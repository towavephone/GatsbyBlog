webpackJsonp([0xeaa0e953270],{1200:function(a,n){a.exports={data:{file:{childImageSharp:{sizes:{base64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAeCAYAAAAsEj5rAAAACXBIWXMAAAsSAAALEgHS3X78AAAHlElEQVRIx12We2xT5xXAbcI2Vmn7o1I1uhVYRxL8tuPn9bXv0+/4/YgdOyYkkATCCEEYsqVNC2wCIYQWShmUBFh4hMAWECot0BUtlI4yAS1oKqJQXimsDBgTU8codnLO7r0uUPpJn87Rp+/8vvOdc75zr8xmZmTieI1NykU5yxOfxDncz3NUjAlyDXMjXGMhys+cG+FzGQ8VU4t7XuV8z8m+GUkrJclSqVReYJ0ZWQ8Tl2AdTPhnq9ns2QKd+crDZiHha8NsYCE21HZiXphpb3sxxTf99Tdsw51ldHqFaLOXXyzvYqOyZ0YPk5soylfouuUbvHOxh56JbiqJfi4/FnE1lxKetrGUZ954nbcdU/752ORpxWVsc6mZjPxctFtApeVtra1lmIPwTxClgeCqvGTsX/WWOEbtyTGWSoGbToOPzUHQ1QghVxOEhRniZ5U8XB4TzvTdgj1ZJdq2OOrkGhVRBnrYFum6TiK0l2fr0emMlVxcBhlnEniqDjlBuqg0CnD0MPWiDrwzhR4u+5B3x3WiLUNHJjxzZYvR8ZKTCP+Xo1JoM/nBYvSB1egHuyUIrCOBPj4LtD0KlD2K4h7SGip62aygxzaK9rHA3Aqt2vw0MRYjnyJtYaQdsXG9hgWFwgmVlXZUKUjUqmm0CgfwhA80Kgr1Wg40Sue4SuFEnZq+YjMbJ0kh0zmfemjQ0j2EJYh2a23RVOODIBvHmCsBUaoWLDoWKIsP50bTApxC5QwH1Ghp0Gk4MBk8aDLQEslooCc88VClsK+zGANI2mqLer0XFuea8PSuN+DM7o3QWyhAR7IBfj+vDbyOICS9aSjkZo8nvSlUKuxXLDUOKdN6LSl/AlRUE+vNAnD50l8XeTIEPiYEzXYG5mlNeGz7BvjPpY/g5snDcHxwE+zs7oCh1zvHCrNm48u/ML8j2muVQblBZ3t6ZY2KXKtQcDiwdk1xx9rV0BlqghEuD4fNUTy1Zwhw7Cbioxu461fdsOgFDa5pbh3zu6NifE9f+XCPlGHS5nuaFI3K8brJ4EUHES4WFiyEP2/dCPc2vYH/3NIHePcywP1LWLp3Ec4tWQa3FvbAu7294yqVA801rju5utYfiQyKDD4DnC8GWEhMafJPtBALxuHjo3+C8bufIn59DfHBFcDiDcQvzyF+/iEsbWuDadNMaDW5H7nY6Iyyh165zfLNtdUqIqLTsEJSQqBVUTD1JQPqdRT8sf9NuH7kMHy0fRg+O3EUzp96H/Zs2SBklxFKxwFmowtdTCIoPQx7oKLzl32PPTRPVSudDwQgCrUGL0+twdzsDjjSdwD2J1fh/q7N0N+1EtykB178qVY4lAahRktWkw95JrG4DAxPvHU3Wwb+rlcsHfK0WNxCoMdUCgdUaxnMBPKw7dVe2LyhDw4MboORA4NQOd2CaiUFaqWjZJGAyQGRUeubP8FqElqZspquEBeUM2zrnEQUa3R8USVcp2qGDZV6ErqXL4PfrlwFhSU9cPL4MejfshOsZq90sCg5KvHZ5MnPfa+cmFrxukRFuRZNcYqIoNngHheeFmiF11ClIDBdPwfqG9qhc1E3rF25GnrX90M204JqBfWItPrP8lTqa7vFpSw3GJ9cZjI4pW5TXaWezpKxh4Q5gEY9LwApVOtZMApxVWhd2DKvC7K5FjTUsFCj45Ah4yXaHuz1MBlgyHCb1HXISIXMTcekOJqN1h/72Mx92h5DwuwHjeChWseBQsNgJJ6H944eB5oNgaLajnaL/07E24wuKr7Cz+XuuenUsMioCxYmyHhnSPLQTYVVYVfjI46Mo80WBLMgLY4E1FhCOENBAsfHQG/0juuNPqGguU8ywXas5XNbg6783wJ8w781GtUPJc+irkap/Ufdje0JXytStnDJbA2D1Z4EKxEHsyUMRmsIdcZaNFpCYBYqwWQLPhD3Btn6t2Pe5uF0cD7Sdr/xmSab8racFaDooOvuk0wDEs40EFQGbVQGbEKXJoTPgZ3JoJGIgULvR6M1jE67rzvpae5ojC7GEJ9rfgILc7lC3NV0T6flTtjoPLK+VuD8rcD65gDtaQInPxOtzoxQRrXgD8/BdW/+YezYByfxvfdHvnxl+ZLKCDfzUMIze60Ey+brJukrqcjA1u3tBw8dfZiZuRQFaNFory/WEPUlE5kFK5WDQKRtbFPfUOnChUvFL27cwKuj/8CBHXv2iQw/k/KGuNwyCYiIkhw+sO/569eu7b1+ffR/H5z4BAcG38X1m/biyjX9ODR8GC9dHsXLV0fx5KlzePDIyFd7ht9ZJZhJrcvLhV/wMuUPljQWtC6Z+FjfuWPHlPMXLq64Onpz3d8/Pf9WX//OW2vWbITBof3n3tqya9fbh/7SvW1gZ9Xj/V1dr8kf614qIZONjBwrezi8Ty54K5d9ZzTmF+xe1LnioaD+4Nvrn4/ermif3yHp8UCDLMCky7Z+n192+/YdST9z5mPZ7t1D8ouXv6gQ4S9WTplks7mut8xZijxbKz2vvi2D39/cPyB/HC5xOm2czPvd35F8rkGCS0+I4WXV1QbJaMq06XqbNXCQJIILpH8hOic3GghZMpl62qG/Nf4PRzaQ862MzO4AAAAASUVORK5CYII=",aspectRatio:.6666666666666666,src:"/static/avatar-dc7bc85837bf005ae32d2a37dfdfa8a2-25c91.png",srcSet:"/static/avatar-dc7bc85837bf005ae32d2a37dfdfa8a2-8a97b.png 200w,\n/static/avatar-dc7bc85837bf005ae32d2a37dfdfa8a2-0fdf3.png 400w,\n/static/avatar-dc7bc85837bf005ae32d2a37dfdfa8a2-25c91.png 600w",srcWebp:"/static/avatar-dc7bc85837bf005ae32d2a37dfdfa8a2-216f6.webp",srcSetWebp:"/static/avatar-dc7bc85837bf005ae32d2a37dfdfa8a2-5d70e.webp 200w,\n/static/avatar-dc7bc85837bf005ae32d2a37dfdfa8a2-d1677.webp 400w,\n/static/avatar-dc7bc85837bf005ae32d2a37dfdfa8a2-216f6.webp 600w",sizes:"(max-width: 600px) 100vw, 600px"}}},site:{siteMetadata:{title:"女王控的博客",description:'前端工程师，黑猫女王控，欢迎勾搭，技术相关<a href="https://github.com/towavephone" target="_blank">@towavephone</a>，QQ闲聊<a href="tencent://AddContact/?fromId=45&fromSubId=1&subcmd=all&uin=634407147&website=www.oicqzone.com">@towave</a>，bili关注<a href="https://space.bilibili.com/11507708#/" target="_blank">@towave</a>',siteUrl:"https://blog.towavephone.com"}},mainPost:{html:'<p>随着显示器的不断升级，人们对 Web 产品的视觉效果的要求也越来越高，如半透明、圆角、阴影等效果。于是，这些细致的样式表现就率先加入了 CSS 新世界中。本章将介绍这些 CSS 新属性的细节知识，并且这些 CSS 属性都非常实用，值得读者反复阅读、深入学习。</p>\n<h1 id="透明度控制属性-opacity"><a href="#%E9%80%8F%E6%98%8E%E5%BA%A6%E6%8E%A7%E5%88%B6%E5%B1%9E%E6%80%A7-opacity" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>透明度控制属性 opacity</h1>\n<p>opacity 属性可以让元素表现为半透明，属性计算值范围是 0 ～ 1，初始值是 1.0，没有继承性。大多数开发者对 opacity 属性的认识就只有这些，实际上 opacity 属性还有很多细节知识。</p>\n<p>例如，在所有支持 CSS 过渡和动画的 CSS 属性中，opacity 属性是性能最高的，因此很多动画效果都可以使用 opacity 属性进行性能优化。例如盒阴影动画效果很耗性能，就可以使用伪元素在元素底部创建一个盒阴影，然后使用 opacity 属性控制这个伪元素的显示与隐藏，性能会因此提高很多，具体参见 box-shadow 相关的介绍。</p>\n<p>又如，opacity 属性值不为 1 的元素会创建一个层叠上下文，层叠顺序会变高。因此，如果你希望某个 DOM 顺序在前的元素覆盖后面的元素，可以试试设置 opacity: 0.99。</p>\n<p>下面讲解一些细节。</p>\n<h2 id="opacity-属性的叠加计算规则"><a href="#opacity-%E5%B1%9E%E6%80%A7%E7%9A%84%E5%8F%A0%E5%8A%A0%E8%AE%A1%E7%AE%97%E8%A7%84%E5%88%99" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>opacity 属性的叠加计算规则</h2>\n<p>由于 opacity 属性没有继承性，因此父、子元素同时设置半透明时，半透明效果是叠加的。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="43791456867588874000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.father {\n   opacity: .5:\n}\n\n.son {\n   opacity: .5;\n}`, `43791456867588874000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.father</span> <span class="token punctuation">{</span>\n   <span class="token property">opacity</span><span class="token punctuation">:</span> .5<span class="token punctuation">:</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.son</span> <span class="token punctuation">{</span>\n   <span class="token property">opacity</span><span class="token punctuation">:</span> .5<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>此时，子元素的视觉透明度不是 0.5，而是一个叠加计算的值，即 0.25，没错，就是 0.5×0.5 的计算值。下面这个例子可以证明这一点：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="73078571470242456000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<div class=&quot;father opacity1&quot;>\n   <p class=&quot;son&quot;></p>\n</div>\n<div class=&quot;father opacity2&quot;>\n   <p class=&quot;son&quot;></p>\n</div>\n<style>\n   .father {\n      width: 120px;\n   }\n\n   .son {\n      height: 120px;\n      background: deepskyblue;\n   }\n\n   .opacity1,\n   .opacity1 .son {\n      opacity: 0.5;\n   }\n\n   .opacity2 {\n      opacity: 0.25;\n   }\n</style>`, `73078571470242456000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>father opacity1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>son<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>father opacity2<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>son<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n   <span class="token selector">.father</span> <span class="token punctuation">{</span>\n      <span class="token property">width</span><span class="token punctuation">:</span> 120px<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">.son</span> <span class="token punctuation">{</span>\n      <span class="token property">height</span><span class="token punctuation">:</span> 120px<span class="token punctuation">;</span>\n      <span class="token property">background</span><span class="token punctuation">:</span> deepskyblue<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">.opacity1,\n   .opacity1 .son</span> <span class="token punctuation">{</span>\n      <span class="token property">opacity</span><span class="token punctuation">:</span> 0.5<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">.opacity2</span> <span class="token punctuation">{</span>\n      <span class="token property">opacity</span><span class="token punctuation">:</span> 0.25<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>两个 <code class="language-text">&lt;p&gt;</code> 元素呈现的色值是一模一样的，如图 4-1 所示，这表明父、子元素同时为半透明时，最终的透明度值就是两者的乘积。</p>\n<p>CSS 中半透明颜色和非透明颜色的叠加算法如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="5218896362179915000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`r = foreground.r * alpha + background.r * (1.0 - alpha);\ng = foreground.g * alpha + background.g * (1.0 - alpha);\nb = foreground.b * alpha + background.b * (1.0 - alpha);`, `5218896362179915000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js">r <span class="token operator">=</span> foreground<span class="token punctuation">.</span>r <span class="token operator">*</span> alpha <span class="token operator">+</span> background<span class="token punctuation">.</span>r <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1.0</span> <span class="token operator">-</span> alpha<span class="token punctuation">)</span><span class="token punctuation">;</span>\ng <span class="token operator">=</span> foreground<span class="token punctuation">.</span>g <span class="token operator">*</span> alpha <span class="token operator">+</span> background<span class="token punctuation">.</span>g <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1.0</span> <span class="token operator">-</span> alpha<span class="token punctuation">)</span><span class="token punctuation">;</span>\nb <span class="token operator">=</span> foreground<span class="token punctuation">.</span>b <span class="token operator">*</span> alpha <span class="token operator">+</span> background<span class="token punctuation">.</span>b <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1.0</span> <span class="token operator">-</span> alpha<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>例如，deepskyblue 的 RGB 值是 rgb(0, 191, 255)，白色的 RGB 值是 rgb(255, 255, 255)，因此 25% deepskyblue 色值和白色的混合值就是：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="75707418528638840000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`r = 0 * 0.25 + 255 * (1.0 - 0.25) = 191.25 ≈ 191;\ng = 191 * 0.25 + 255 * (1.0 - 0.25) = 239;\nb = 255 * 0.25 + 255 * (1.0 - 0.25) = 255;`, `75707418528638840000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js">r <span class="token operator">=</span> <span class="token number">0</span> <span class="token operator">*</span> <span class="token number">0.25</span> <span class="token operator">+</span> <span class="token number">255</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1.0</span> <span class="token operator">-</span> <span class="token number">0.25</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">191.25</span> ≈ <span class="token number">191</span><span class="token punctuation">;</span>\ng <span class="token operator">=</span> <span class="token number">191</span> <span class="token operator">*</span> <span class="token number">0.25</span> <span class="token operator">+</span> <span class="token number">255</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1.0</span> <span class="token operator">-</span> <span class="token number">0.25</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">239</span><span class="token punctuation">;</span>\nb <span class="token operator">=</span> <span class="token number">255</span> <span class="token operator">*</span> <span class="token number">0.25</span> <span class="token operator">+</span> <span class="token number">255</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1.0</span> <span class="token operator">-</span> <span class="token number">0.25</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">255</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>于是，最终呈现的颜色就是 rgb(191, 239, 255)，这和图 4-1 所示的色值完全一致，详见图 4-2 所示的取色结果。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-19-14-40-49-433b3ad2da27226b0b4c60f78dcf7fd0-b1313.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 488px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 152.04918032786884%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAeCAIAAACjcKk8AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEb0lEQVQ4y52Uy4/bVBSHg8SGIjH8Ax22VIItEuxhy6LTQhfsZlepgNghdTUIUQo7xAaBkCpQWxVaEubdSTKZxInznEwS52k7cfx+v+0kdi43mcwD0FSUn66O7j2+3z3nXNsnAv6l6dxSPji0QNUGtA8uUuQiuG6DbQXsKKDhnDn/K1yzwZYy4/8PDLOFwesOYEbPn3bXBRkdIDrouc8feVazCnZUgD077elcC3I6DWfz6ZE13ZSn28q0Yc+W4XShMFzYZ0W2QiAHQApmkwtrnkwCVdU8358EQRiGlm0bpqkbhmUYpq45puFYULY1F/SpmmZalqKqcH9EVtRHj6PVo7pt267r5QulVBpBsvl44uBJdOOP2GZ0fesgk83m8vFkanN790l0PYsWYutbmqZHYAGTyeS0ZigYH9pgrvF4PBqNgnmh5xOGWUJP5HifO5fjONB6nndsj+Uu5DWbTSSTyeVyKIrC9eLCHNsZuV4QBsdHTuYKgwmAnmkIX0A4mX0oq6urry4tLV++/NrycrvdXsC268iWqUpSp1GXBR5eia6p7aGUa7N75W40VUEwukabH3/62ZU33nzr7XfgwHHiJHKvL371fWnI/Y5Wkd6Q43kI9xkeI2ikdBTbTTbwYYdkHiPln9Hm/UP8Hooppr2A/UNWe//XNE5naCfV5QcUpeu6KAoCzw36ZLNRFwVe5thEl4kb04wLEsrI8MYL2Cq7zY8c4cZV8MKLzutXcggiSJIkir1e7yCdiScSxVKJZ5m9Vn9bHCc1sMO5ujdawETZvXvDEb77tv3ue+ytW12COIZpmq5Wq8ViEVYocmy8PdiVg5QBngq+cQpX6t4HN3Vn6jd4gXM9mLOmaTzPsyxbKBSSySRJkjxD77aoDSnY08Em759FrkjeStLoNWocTVMkybBsp9NRFAXC8AiOY03T0hSlilOEHdAj0DN8xz+FPf26USNbHYIk250OJwjtTltVVYqi+v0+3usJoqhIYrZLFfTgyAEFxbfOInvta8ZtfsCSg363ibEU1e32FFkeQJQk4eXzomho6k6L2lTDhAk2uXNpt7zK5/o1ZijSpQIVjwvZLJ/Py77PyTIt8PAImeclht5v9v8k1W3G2pPGunsCq16lbHzYHwr0QYpotTj4i6KoEYsZ9TpdKJD7+3KxyKT2kd2D9Rq1zbk7nHcGe1LZSK6QjDBMpxqHVZJl1WJRR1GNJHuVygDHVdMkCeKAlrMhKAOA+IE5Ck5gHDO++aQviHQ8TqTTDIZp2axsGJChGKY/oGD98C38+Ch6+4dfvrz329pP93lZXcCmYUpDlqLpOzH8wUZNJwb8UKJVlxVkksAHEFYUQRCur1yNRCKvXHpp6eVLTQw7+bZ9X1bhTyV1WAXnVVE3BFUXJEWSZIjJsgwfwR704OHDtbUv7nwNdRd6ZvBx3/h78zu3Pqd/+CEYSeynYd8a0ozn+Q2sBZsZ1mzDUatjcJ7O5AqlSqlS3X2aSKWzSBaFnWwvsY/mi0gu/xdsJUnv+kgzaQAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 19 14 40 49" title="" data-src="/static/2022-01-19-14-40-49-433b3ad2da27226b0b4c60f78dcf7fd0-b1313.png" data-srcset="/static/2022-01-19-14-40-49-433b3ad2da27226b0b4c60f78dcf7fd0-152e1.png 200w,\n/static/2022-01-19-14-40-49-433b3ad2da27226b0b4c60f78dcf7fd0-4a935.png 400w,\n/static/2022-01-19-14-40-49-433b3ad2da27226b0b4c60f78dcf7fd0-b1313.png 488w" data-sizes="(max-width: 488px) 100vw, 488px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h2 id="opacity-属性的边界特性与应用"><a href="#opacity-%E5%B1%9E%E6%80%A7%E7%9A%84%E8%BE%B9%E7%95%8C%E7%89%B9%E6%80%A7%E4%B8%8E%E5%BA%94%E7%94%A8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>opacity 属性的边界特性与应用</h2>\n<p>opacity 属性有一个实用的边界特性，即 opacity 属性设置的数值大小如果超出 0 ～ 1 的范围限制，最终的计算值是边界值，如下所示：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="10804886929058700000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.example {\n   opacity: -999; /* 解析为 0，完全透明 */\n   opacity: -1; /* 解析为 0，完全透明 */\n   opacity: 2; /* 解析为 1，完全不透明 */\n   opacity: 999; /* 解析为 1，完全不透明 */\n}`, `10804886929058700000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.example</span> <span class="token punctuation">{</span>\n   <span class="token property">opacity</span><span class="token punctuation">:</span> -999<span class="token punctuation">;</span> <span class="token comment">/* 解析为 0，完全透明 */</span>\n   <span class="token property">opacity</span><span class="token punctuation">:</span> -1<span class="token punctuation">;</span> <span class="token comment">/* 解析为 0，完全透明 */</span>\n   <span class="token property">opacity</span><span class="token punctuation">:</span> 2<span class="token punctuation">;</span> <span class="token comment">/* 解析为 1，完全不透明 */</span>\n   <span class="token property">opacity</span><span class="token punctuation">:</span> 999<span class="token punctuation">;</span> <span class="token comment">/* 解析为 1，完全不透明 */</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>不仅 opacity 属性有边界特性，RGBA 颜色或者 HSLA 颜色中任意一个颜色通道数值都有边界特性，如下所示：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="14049407418894756000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.example {\n   color: hsl(0, 0%, -100%); /* 解析为 hsl(0, 0%, 0%)，黑色 */\n   color: hsl(0, 0%, 200%); /* 解析为 hsl(0, 0%, 100%)，白色 */\n}`, `14049407418894756000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.example</span> <span class="token punctuation">{</span>\n   <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">hsl</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0%<span class="token punctuation">,</span> -100%<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* 解析为 hsl(0, 0%, 0%)，黑色 */</span>\n   <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">hsl</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0%<span class="token punctuation">,</span> 200%<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* 解析为 hsl(0, 0%, 100%)，白色 */</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>这种边界特性配合 CSS 变量可以在 CSS 中实现类似于 if…else 的逻辑判断，可以用在元素显隐或者色值变化的场景。</p>\n<h3 id="自动配色按钮"><a href="#%E8%87%AA%E5%8A%A8%E9%85%8D%E8%89%B2%E6%8C%89%E9%92%AE" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>自动配色按钮</h3>\n<p>借助透明度和颜色的边界特性可以实现这样一个效果：如果按钮背景颜色比较浅，则按钮的文字颜色自动变成黑色，同时显示边框；如果按钮的背景颜色比较深，则按钮的文字颜色自动变成白色。CSS 代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="73361452737716216000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`:root {\n   /* 定义 RGB 变量 */\n   --red: 44;\n   --green: 135;\n   --blue: 255;\n   /**\n   * 使用 sRGB Luma 方法计算灰度（可以看成亮度），算法为：\n   * lightness = (red * 0.2126 + green * 0.7152 + blue * 0.0722) / 255\n   */\n   --lightness: calc((var(--red) * 0.2126 + var(--green) * 0.7152 + var(--blue) * 0.0722) / 255);\n}\n\n.button {\n   /* 固定样式 */\n   border: 0.2em solid;\n   /* 按钮背景色就是基本背景色 */\n   background: rgb(var(--red), var(--green), var(--blue));\n   /**\n   * --lightness 亮度和 0.5 对比\n   * 大于，则正数，和 -999999% 相乘，会得到一个巨大负数，浏览器会按照边界 0% 渲染，也就是亮度为 0，于是颜色是黑色；\n   * 小于，则和 -999999% 相乘，会得到一个巨大的正数，以最大合法值 100% 渲染，于是颜色是白色；\n   */\n   color: hsl(0, 0%, calc((var(--lightness) - 0.5) * -999999%));\n   /**\n   * 深色颜色加一点浅一点颜色的阴影\n   */\n   text-shadow: 1px 1px rgba(calc(var(--red) + 50), calc(var(--green) + 50), calc(var(--blue) + 50), calc((\n                  var(--lightness) - 0.5\n               ) * 9999));\n   /**\n   * 确定边框透明度。\n   * 如果亮度比 0.8 大，在说明按钮背景色比较淡，我们出现一个深色边框；\n   * 如果亮度比较小，说明按钮背景色较深，没有必要出现边框。\n     此时，计算后为负值，透明度小于 0 的时候，浏览器会按照 0 渲染，因此边框透明。\n   */\n   /* 设置边框相关样式 */\n   border-color: rgba(\n      calc(var(--red) - 50),\n      calc(var(--green) - 50),\n      calc(var(--blue) - 50),\n      calc((var(--lightness) - 0.8) * 100)\n   );\n}`, `73361452737716216000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">:root</span> <span class="token punctuation">{</span>\n   <span class="token comment">/* 定义 RGB 变量 */</span>\n   <span class="token property">--red</span><span class="token punctuation">:</span> 44<span class="token punctuation">;</span>\n   <span class="token property">--green</span><span class="token punctuation">:</span> 135<span class="token punctuation">;</span>\n   <span class="token property">--blue</span><span class="token punctuation">:</span> 255<span class="token punctuation">;</span>\n   <span class="token comment">/**\n   * 使用 sRGB Luma 方法计算灰度（可以看成亮度），算法为：\n   * lightness = (red * 0.2126 + green * 0.7152 + blue * 0.0722) / 255\n   */</span>\n   <span class="token property">--lightness</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--red<span class="token punctuation">)</span> * 0.2126 + <span class="token function">var</span><span class="token punctuation">(</span>--green<span class="token punctuation">)</span> * 0.7152 + <span class="token function">var</span><span class="token punctuation">(</span>--blue<span class="token punctuation">)</span> * 0.0722<span class="token punctuation">)</span> / 255<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.button</span> <span class="token punctuation">{</span>\n   <span class="token comment">/* 固定样式 */</span>\n   <span class="token property">border</span><span class="token punctuation">:</span> 0.2em solid<span class="token punctuation">;</span>\n   <span class="token comment">/* 按钮背景色就是基本背景色 */</span>\n   <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--red<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">var</span><span class="token punctuation">(</span>--green<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">var</span><span class="token punctuation">(</span>--blue<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token comment">/**\n   * --lightness 亮度和 0.5 对比\n   * 大于，则正数，和 -999999% 相乘，会得到一个巨大负数，浏览器会按照边界 0% 渲染，也就是亮度为 0，于是颜色是黑色；\n   * 小于，则和 -999999% 相乘，会得到一个巨大的正数，以最大合法值 100% 渲染，于是颜色是白色；\n   */</span>\n   <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">hsl</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0%<span class="token punctuation">,</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--lightness<span class="token punctuation">)</span> - 0.5<span class="token punctuation">)</span> * -999999%<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token comment">/**\n   * 深色颜色加一点浅一点颜色的阴影\n   */</span>\n   <span class="token property">text-shadow</span><span class="token punctuation">:</span> 1px 1px <span class="token function">rgba</span><span class="token punctuation">(</span><span class="token function">calc</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--red<span class="token punctuation">)</span> + 50<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--green<span class="token punctuation">)</span> + 50<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--blue<span class="token punctuation">)</span> + 50<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token punctuation">(</span>\n                  <span class="token function">var</span><span class="token punctuation">(</span>--lightness<span class="token punctuation">)</span> - 0.5\n               <span class="token punctuation">)</span> * 9999<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token comment">/**\n   * 确定边框透明度。\n   * 如果亮度比 0.8 大，在说明按钮背景色比较淡，我们出现一个深色边框；\n   * 如果亮度比较小，说明按钮背景色较深，没有必要出现边框。\n     此时，计算后为负值，透明度小于 0 的时候，浏览器会按照 0 渲染，因此边框透明。\n   */</span>\n   <span class="token comment">/* 设置边框相关样式 */</span>\n   <span class="token property">border-color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>\n      <span class="token function">calc</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--red<span class="token punctuation">)</span> - 50<span class="token punctuation">)</span><span class="token punctuation">,</span>\n      <span class="token function">calc</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--green<span class="token punctuation">)</span> - 50<span class="token punctuation">)</span><span class="token punctuation">,</span>\n      <span class="token function">calc</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--blue<span class="token punctuation">)</span> - 50<span class="token punctuation">)</span><span class="token punctuation">,</span>\n      <span class="token function">calc</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--lightness<span class="token punctuation">)</span> - 0.8<span class="token punctuation">)</span> * 100<span class="token punctuation">)</span>\n   <span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>此时 .button 按钮的文字颜色、文字阴影和边框颜色都是由 —red、—green、—blue 这 3 个变量决定的，而且前景颜色、背景颜色和边框颜色是自动适配的。</p>\n<p>图 4-3 所示的是使用不同的 R、G、B 色值后的按钮效果，可以看到深色背景的按钮的文字颜色是白色（图 4-3 左图）；浅色背景的按钮的文字颜色是黑色，还有浅色的投影（图 4-3 中图）；当背景颜色足够浅的时候，边框也出现了（图 4-3 右图）。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-19-15-34-44-1133ba8dd0bd3844a26b16b415712ca8-932f0.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 40.09378663540446%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAABpElEQVQY0z2QS47TUBBFvQM2A6tgyjYYIJBYBGwggFqISYtWTxiBxEdECqY70I6/cRK37bjT9rMTx4l/eX5+n+J5QqlGR/dWXV0F9glUW6j2gEtoc+hPQBmgCBJ/gE0B9W6AcqI1uHM4HsBbQZYCxsqlDh/+wMeZuJjBWxWcVKp4PCmCL7k/JXKDa1EOEO7i3A1TJy7m82CRVVnHlUev4eEreHIGj0fw4CW8UaVMjEdw8WL37un0/TPj8jkJfknIfu74+SoffVXPVPM8aPR9r0xDKn9eBew6ZGOPbQoqzVlIXYO5JtM0gZbssCXSjUpspp2B+pt7ktQ4r1ul77Eei7zqeyoVhOCWc4777i/i40hoiElYtxUIgTExY3G1Fr9DnpXs1NRK2eCJzz9ZXN/0cUHKquGMVk038elnhy4Scp93ZVkJzqsGqyH9vqLfluyHxxtpbk5ksRWLlNupMJE8j0Hwrmf+AW734GRgpDLPEJtQuj6CFDuIW0g07UkZ+hFiKDNaJ5uoKI66YXu3/ky7cWzLW7qmrpmWo5uW7cxty0pR8t/yD1bUrfGWRPi2AAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 19 15 34 44" title="" data-src="/static/2022-01-19-15-34-44-1133ba8dd0bd3844a26b16b415712ca8-fee1c.png" data-srcset="/static/2022-01-19-15-34-44-1133ba8dd0bd3844a26b16b415712ca8-a67b7.png 200w,\n/static/2022-01-19-15-34-44-1133ba8dd0bd3844a26b16b415712ca8-0b187.png 400w,\n/static/2022-01-19-15-34-44-1133ba8dd0bd3844a26b16b415712ca8-fee1c.png 800w,\n/static/2022-01-19-15-34-44-1133ba8dd0bd3844a26b16b415712ca8-932f0.png 853w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>原理其实很简单，有了 R、G、B 色值我们就可以计算出亮度 —lightness。</p>\n<ul>\n<li>这里 color 属性使用的是 HSL 颜色，L 的值是 0%，即黑色；如果 L 的值是 100%，则是白色。L 色值的计算公式是 <code class="language-text">var((--lightness) - 0.5) * -999999%</code>。如果亮度大于 0.5，则是一个正数和 -999999% 相乘，最后计算结果是一个巨大的负数，这时会按照 L 色值的最小边界 0% 渲染，于是文字颜色就是黑色；如果亮度小于 0.5，则是一个负数和 -999999% 相乘，最后结果就是一个很大的正数，这时会按照 L 色值的最大边界 100% 渲染，于是文字颜色就是白色。</li>\n<li>我们重点关注 text-shadow 属性的 <code class="language-text">(var(--lightness) - 0.5) * 9999</code> 这个计算。如果亮度大于 0.5，则最终的计算值极大概率大于 1，因此透明度就是 1，文字投影会显示；如果亮度小于 0.5，则最终的计算值一定是负数，此时会按照透明度的边界值 0 来渲染，于是文字投影就不会显示。这就实现了背景颜色亮度比较高时显示更强的文字投影效果。</li>\n<li>border-color 边框颜色的出现和 text-shadow 的出现类似，只不过边框颜色比背景颜色更深。边框颜色是在亮度大于 0.8 的时候显示，这样，按钮在白色页面中也不会显得刺眼。</li>\n</ul>\n<p>本案例中使用亮度 0.5 和亮度 0.8 作为判断点，不过这不一定是最佳判断点，在实际开发的时候大家可以根据自己的需求进行调整。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/3sco9i?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<h3 id="静态饼图"><a href="#%E9%9D%99%E6%80%81%E9%A5%BC%E5%9B%BE" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>静态饼图</h3>\n<p>这个案例将展示如何利用 opacity 属性的边界特性控制元素的显示与隐藏。图 4-4 所示的就是利用 opacity 属性的边界特性实现的静态饼状图效果。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-19-15-57-44-95e922b38b7b8b5223abb074500e8a41-5e5c6.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 38.83040935672514%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAABjElEQVQY0z2Qu24TQRSGRwKkyIgmT4F4ChoaJEoKIqWjAImegpCKHokij0ERiaRInNiRkEwo4hBC4ux6N8G52Z7rmvVlZs/8zK4Rpziab858c84M6w+GN2lM4wxVcMF7adfKoa/QGJ3EkRN9eAroZlMen4wHV0CJDGS/DNyny7Cu6r5oa7t6DmFL2RKlI7ua+mhcYjTBhx7eJWgZVLIevjnKXxxMMMvzmbOaf04N28CzH5g68kb8vJFsyz9sIZ3g0TewLarVqdbAwQhspET9KutxmRutTBbk9d8Zq+N+E69P/VJ7+jHKH+x5tovnR1ho4F4DtaZn21g+BuNCjJSUQhiT/clzwbmQ8vG+XdzD2xhsE3d2EMyFXawkZWY7uNsI/fE+AdNKBV8qZa31RFLrqeKta73W887j6WFoUvZ5eVo+8lUHYaiAT9rIHBgRBa0oCvwLb50riOYwIXw12M8wZ/L4nqGpyv3qw/5LVY67SZj7+rb/qxOdxd3jk875WeciiodChWpB81PlLWH1F+kqnEPHR0adAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 19 15 57 44" title="" data-src="/static/2022-01-19-15-57-44-95e922b38b7b8b5223abb074500e8a41-fee1c.png" data-srcset="/static/2022-01-19-15-57-44-95e922b38b7b8b5223abb074500e8a41-a67b7.png 200w,\n/static/2022-01-19-15-57-44-95e922b38b7b8b5223abb074500e8a41-0b187.png 400w,\n/static/2022-01-19-15-57-44-95e922b38b7b8b5223abb074500e8a41-fee1c.png 800w,\n/static/2022-01-19-15-57-44-95e922b38b7b8b5223abb074500e8a41-5e5c6.png 855w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>饼状图的比例通过 CSS 变量 —percent 控制，HTML 代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="31198975766048862000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<h4>10% 大小</h4>\n<div class=&quot;pie-simple&quot; style=&quot;--percent: 10;&quot;>\n   <div class=&quot;pie-left&quot;></div>\n   <div class=&quot;pie-right&quot;></div>\n</div>\n<h4>40% 大小</h4>\n<div class=&quot;pie-simple&quot; style=&quot;--percent: 40;&quot;>\n   <div class=&quot;pie-left&quot;></div>\n   <div class=&quot;pie-right&quot;></div>\n</div>`, `31198975766048862000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h4</span><span class="token punctuation">></span></span>10% 大小<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h4</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>pie-simple<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">--percent</span><span class="token punctuation">:</span> 10<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>pie-left<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>pie-right<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h4</span><span class="token punctuation">></span></span>40% 大小<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h4</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>pie-simple<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">--percent</span><span class="token punctuation">:</span> 40<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>pie-left<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>pie-right<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>CSS 代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="60481798463995890000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.pie-simple {\n   width: 128px;\n   height: 128px;\n   background-color: #eee;\n   border-radius: 50%;\n   overflow: hidden;\n}\n\n.pie-left,\n.pie-right {\n   width: 50%;\n   height: 100%;\n   float: left;\n   position: relative;\n   overflow: hidden;\n}\n\n.pie-left::before,\n.pie-right::before,\n.pie-right::after {\n   content: \'\';\n   position: absolute;\n   width: 100%;\n   height: 100%;\n   background-color: deepskyblue;\n}\n\n.pie-left::before {\n   left: 100%;\n   transform-origin: left;\n   transform: rotate(calc(3.6deg * (var(--percent) - 50)));\n   /* 比例小于或等于 50% 的时候左半圆隐藏 */\n   opacity: calc(99999 * (var(--percent) - 50));\n}\n\n.pie-right::before {\n   right: 100%;\n   transform-origin: right;\n   transform: rotate(calc(3.6deg * var(--percent)));\n}\n\n.pie-right::after {\n   /* 比例大于 50% 的时候左半圆一直显示 */\n   opacity: calc(99999 * (var(--percent) - 50));\n}`, `60481798463995890000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css{33, 44}"\n              >\n                <span class="gatsby-code-button-language">css{33, 44}</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight has-highlighted-lines" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.pie-simple</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 128px<span class="token punctuation">;</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 128px<span class="token punctuation">;</span>\n   <span class="token property">background-color</span><span class="token punctuation">:</span> #eee<span class="token punctuation">;</span>\n   <span class="token property">border-radius</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>\n   <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.pie-left,</span>\n<span class="token selector">.pie-right</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>\n   <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>\n   <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>\n   <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.pie-left::before,</span>\n<span class="token selector">.pie-right::before,</span>\n<span class="token selector">.pie-right::after</span> <span class="token punctuation">{</span>\n   <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">\'\'</span><span class="token punctuation">;</span>\n   <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>\n   <span class="token property">background-color</span><span class="token punctuation">:</span> deepskyblue<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.pie-left::before</span> <span class="token punctuation">{</span>\n   <span class="token property">left</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>\n   <span class="token property">transform-origin</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>\n   <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span><span class="token function">calc</span><span class="token punctuation">(</span>3.6deg * <span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--percent<span class="token punctuation">)</span> - 50<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token comment">/* 比例小于或等于 50% 的时候左半圆隐藏 */</span>\n<span class="gatsby-highlight-code-line">   <span class="token property">opacity</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>99999 * <span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--percent<span class="token punctuation">)</span> - 50<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="token punctuation">}</span>\n\n<span class="token selector">.pie-right::before</span> <span class="token punctuation">{</span>\n   <span class="token property">right</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>\n   <span class="token property">transform-origin</span><span class="token punctuation">:</span> right<span class="token punctuation">;</span>\n   <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span><span class="token function">calc</span><span class="token punctuation">(</span>3.6deg * <span class="token function">var</span><span class="token punctuation">(</span>--percent<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.pie-right::after</span> <span class="token punctuation">{</span>\n   <span class="token comment">/* 比例大于 50% 的时候左半圆一直显示 */</span>\n   <span class="token property">opacity</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>99999 * <span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--percent<span class="token punctuation">)</span> - 50<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>实现原理如下所述。</p>\n<p>左右两个矩形区域拼接，且左右两个矩形中都有一个会跟着旋转的半圆，由 .pie-left::before 和 .pie-right::before 这两个 ::before 伪元素创建，我们可以称它们为“左半圆”和“右半圆”。右边的矩形里面还藏了一个不会旋转的撑满整个矩形的半圆，我们可以称它为“右覆盖圆”，由 .pie-right::after 创建。</p>\n<ol>\n<li>左半圆和右半圆一直处于旋转状态。</li>\n<li>比例不大于 50% 时候，左半圆隐藏，右半圆显示，因此只能看到右半圆旋转。</li>\n<li>比例大于 50% 时候，左半圆显示，于是可以看到左半圆旋转，同时右覆盖圆显示，挡住后面的右半圆。此时可以看到右侧完整的静止半圆和左侧旋转的左半圆。</li>\n</ol>\n<p>可以看出，我们除了要控制左右半圆的旋转，还需要控制左半圆和右覆盖圆的显隐，这个效果非常巧妙地利用了 opacity 属性的边界特性来实现，关键 CSS 代码见上面代码的高亮行。</p>\n<p>假设 —percent 的值是 40，也就是 40% 范围的饼状图，将 40 代入 <code class="language-text">99999 * (var(--percent) - 50)</code> 计算可以得到 -999990 的结果，opacity: -999990 等同于 opacity: 0，也就是饼状图百分比不足 50% 的时候，左半圆和右覆盖圆是隐藏的，只有右半圆在旋转。假设 —percent 的值是 80，可以发现最终的 opacity 计算值远大于 1，此时会按照 opacity: 1 渲染，也就是饼状图百分比大于 50% 的时候，左半圆和右覆盖圆是显示的。于是，我们就实现了一个基于 CSS 变量自动绘制的饼状图效果了。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/3imbjk?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<h1 id="深入了解圆角属性-border-radius"><a href="#%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3%E5%9C%86%E8%A7%92%E5%B1%9E%E6%80%A7-border-radius" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>深入了解圆角属性 border-radius</h1>\n<p>border-radius 属性是一个典型的符合“二八原则”的 CSS 属性，也就是说要想深入了解 border-radius 属性，需要花费额外 80% 的学习精力，但是用这一部分精力所学到的知识只能用在 20% 的场景中。</p>\n<p>在日常开发中，我们使用 border-radius 属性的场景无非下面两类。</p>\n<ol>\n<li>\n<p>为按钮、输入框等控件，或者为背景色块增加小圆角，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="88448770019111980000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`input,\nbutton {\n  border-radius: 4px;\n}`, `88448770019111980000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">input,\nbutton</span> <span class="token punctuation">{</span>\n  <span class="token property">border-radius</span><span class="token punctuation">:</span> 4px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>将用户头像变成圆形：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="35502662558050190000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.user-avatar {\n  border-radius: 50%;\n}`, `35502662558050190000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.user-avatar</span> <span class="token punctuation">{</span>\n  <span class="token property">border-radius</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n</li>\n</ol>\n<p>上面两类场景就满足了日常 80% 与圆角相关的开发需求了，那么到此结束了吗？显然没有，如果继续深入了解 border-radius 属性，你会发现 border-radius 属性远没有你想的那么简单，它可以呈现的效果也绝对超出你的预期。</p>\n<h2 id="了解-border-radius-属性的语法"><a href="#%E4%BA%86%E8%A7%A3-border-radius-%E5%B1%9E%E6%80%A7%E7%9A%84%E8%AF%AD%E6%B3%95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>了解 border-radius 属性的语法</h2>\n<p>我们平时使用的 border-radius 属性其实是一种缩写，它是 border-top-left-radius、border-top-right-radius、border-bottom-left-radius 和 border-bottom-right-radius 这 4 个属性的缩写。这 4 个属性的圆角位置如图 4-5 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-21-10-34-32-4012fa665ded792dae6be62e1f4ab61d-51e2b.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 52.43619489559165%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAABOElEQVQoz4VS20rDQBBdoaD4LX6A4oPv6jfou7/jq/+hSIvU19pqkxITWmztxRar6SVrgrnMcWYDpVGwh8PsZuacHXayCmmKLBPyhjmZIFiAQQSzgFKJkzF8v6AkUlgDq/AdXnX0UROnTRzntHFi0es7n0gZCiiYE2lGZw7UNUoVqLJwi+MtaoGUUtpkvnBJVbB7j+2qcKcKdYf6QmobzTjnzjcolf92/tcsd6b4sh3u1XDYwH7dsIGDB3r50FzMfpt5ejzYPDJ42tOpbDIzZJmRicMBtDZ5ozRUcF1hrwfPg+Og28VgILQsUef54RCdDlotjEawbfT7YvE8tTom7xzH8Ww2T+I4+go/fQF/aq3nnEwS0XDMX8H6fyZjXi6XrtcOo2j0Nq4/PjGdZ6/b67ccNwiClSzHD9b3Izn4ZLazAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 21 10 34 32" title="" data-src="/static/2022-01-21-10-34-32-4012fa665ded792dae6be62e1f4ab61d-fee1c.png" data-srcset="/static/2022-01-21-10-34-32-4012fa665ded792dae6be62e1f4ab61d-a67b7.png 200w,\n/static/2022-01-21-10-34-32-4012fa665ded792dae6be62e1f4ab61d-0b187.png 400w,\n/static/2022-01-21-10-34-32-4012fa665ded792dae6be62e1f4ab61d-fee1c.png 800w,\n/static/2022-01-21-10-34-32-4012fa665ded792dae6be62e1f4ab61d-51e2b.png 862w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>这 4 个属性很好理解，因为属性名称就暴露了一切，例如 border-top-left-radius 显然就是用来设置左上角圆角大小的。不过，虽然它们好理解，但是不好记忆，一段时间后就会不记得到底是 border-top-left-radius 还是 border-left-top-radius。我是使用这种方法让自己记住的：圆角属性的方位顺序和中文表述是相反的。例如中文我们都是说左上角、右上角，或者左下角、右下角，顺序是先左右再上下，但是，CSS 圆角属性却是先上下再左右，例如 border-top-left-radius 先是 top 再是 left，又如 border-bottom-right-radius 先是 bottom 再是 right。</p>\n<h3 id="1-～-4-个值表示的方位"><a href="#1-%EF%BD%9E-4-%E4%B8%AA%E5%80%BC%E8%A1%A8%E7%A4%BA%E7%9A%84%E6%96%B9%E4%BD%8D" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1 ～ 4 个值表示的方位</h3>\n<p>border-radius 属性支持 1 ～ 4 个值，分别表示不同的角。</p>\n<ol>\n<li>\n<p>如果只有 1 个值，则表示圆角效果作用在全部 4 个角，效果如图 4-6 所示，代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="4503544588684560400"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`border-radius: 10px;`, `4503544588684560400`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">border-radius</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-21-10-43-24-182c26c7d19d365dc80c8cc1dc4fbf18-927fb.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 439px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 54.66970387243736%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABWElEQVQoz7WRy07CQBSGp6ALE2NQfAPj0rhxYVxofA6XPotv4oIoEcI9KKWlqGhQ4jUukSqXlrY0bSXt4Bw7g4mkhKUnX04m0/+ff+YUAatvQvtRE9auYfMWNqbwN9drcPAKmClZAzRp3q4DKkKYB1QKwvn9AhZF6LhMP23ea1DFnABcOUioDIiHqAQ9d0byLjOHBUDlIBwzL/+Xeb9BnzcvQkgIMj5xtQqKN8O8cwfoHMIsJADHprhUge7kwAirsfnwzZ8WiUokIkGkQiZZqZAFkWzViUX/la+n9Zs8riGBdw9kD1ouRWZrGVM+MP1kjv7uTJPbna6m6V/DIcZ4hLFt6D6eY7mO5QwMS9cGfdXsq4aiOIZhm+Znu9NTVMu2FbWPYidnvCA9Pr0MTFPVdLFaS2YKzZZ8//AcO03mi6VcsZRI545j8XgiXSjyiVQ2nS1cXt2kMvkf2fgMaKwo6VEAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 21 10 43 24" title="" data-src="/static/2022-01-21-10-43-24-182c26c7d19d365dc80c8cc1dc4fbf18-927fb.png" data-srcset="/static/2022-01-21-10-43-24-182c26c7d19d365dc80c8cc1dc4fbf18-8b407.png 200w,\n/static/2022-01-21-10-43-24-182c26c7d19d365dc80c8cc1dc4fbf18-c4ab1.png 400w,\n/static/2022-01-21-10-43-24-182c26c7d19d365dc80c8cc1dc4fbf18-927fb.png 439w" data-sizes="(max-width: 439px) 100vw, 439px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n<li>\n<p>如果有 2 个值，则第一个值作用于左上角和右下角，第二个值作用于右上角和左下角，效果如图 4-7 所示，代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="85643197892200450000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`border-radius: 10px 50%;`, `85643197892200450000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">border-radius</span><span class="token punctuation">:</span> 10px 50%<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-21-10-44-47-d984055486bfe7ef61c0d3f5041f9ee6-bb574.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 410px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 60.243902439024396%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAABdUlEQVQoz6WRy07CUBCGT0Xj0oWP4TOY6MK1z+DCRBcuTXwDd25c+BYauQQopS2KRDEiN2kLrUQosKigQa4JPeOcEgsKrJz8PTmd/N8/6ZQAAAVW9SHs5mAzBdvPsPWjnTTsKXBRg8YQXKdbBJ+R0ws1gfDARYFMSwAuAiQCa7dwVgVYBIcRFsEjw9JveRwtiSz6xGBOm87CLQZzEpB5GvdXJVC6E34CCw6Mo8giXmYf4nsHFyFujDmA9RjjV+T581kzCv4/sPtybrLdcAKbvzwjDMVo3yzs/oZLCzaSwIksBVc9LQzFnQWmYdupMWxTPOhgRMUWPS3TI40eqCgbz0PV3lfpsU6tIZopOpEi8I8iyceUYZRbH5/t9lev38/lC7V6481sZAtaOq8oJSOnFp+yL8lUJlPQ9HIlnc0XS0ZJf0UnufIG5Ju4ZTW7vV6n0wmGBU3TK1UzxIt4v0s8hPjotS+IigiSFIt7/cF44j6VzvCC9A3PA0Oh/8Lw6gAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 21 10 44 47" title="" data-src="/static/2022-01-21-10-44-47-d984055486bfe7ef61c0d3f5041f9ee6-bb574.png" data-srcset="/static/2022-01-21-10-44-47-d984055486bfe7ef61c0d3f5041f9ee6-0fa18.png 200w,\n/static/2022-01-21-10-44-47-d984055486bfe7ef61c0d3f5041f9ee6-c3228.png 400w,\n/static/2022-01-21-10-44-47-d984055486bfe7ef61c0d3f5041f9ee6-bb574.png 410w" data-sizes="(max-width: 410px) 100vw, 410px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n<li>\n<p>如果有 3 个值，则第一个值作用于左上角，第二个值作用于右上角和左下角，第三个值作用于右下角，效果如图 4-8 所示，代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="69171498627904280000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`border-radius: 10px 50% 30px;`, `69171498627904280000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">border-radius</span><span class="token punctuation">:</span> 10px 50% 30px<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-21-10-45-58-f82522cee97c277573ca87abee3f78ce-0208c.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 493px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 64.50304259634888%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAAB0ElEQVQoz5WS3Y7SQBTHC34kemOi8QW8MXFfYF/CS9/FW9c770y88AEMTyDQQvmoJWzKQpfNBnVTga1LlqVFWmixsWXO3xmQRtS98OSfmcnM+Z2PmZHg+5BlNJtwne+AH9M8we/6QdgYnylOEEUIQzDGdyQsl6w/QNccTuaPWrin0QMd97d62MATA896yF1RzN0/9qhYRC6HyWQNA6t17LoHSYVU/UsVZMriaN+ENV0iCtkiQBxvYSYq0j0SrrU/lanhRl1IKmGvBW/1q4WdzJqHf8Kpbq35tyOkiICZyMwMj2WrlK1fC4vkZTzvCyxJ4U0NIcNjQ/R2W0P2OljdwCxZMRAJGEGwGo1gD5Tz+V2dh6dMVbje3BUPKil4fbFbNiwLlQorFNC3TmM8PaE7mmiPF5kqy0eZ9tpwzi9hdpht8weXaGvra+fdi5v/HNK7Mb2y6WBAB0N6OaQXA3pzwcYJ8NVm+TwpCjmOhNSI8J8mue40CMKQ/zPGPN+fzxeLIHBnnuv5znQ2dqaXE3c6E2vnmzfj5xuPIOSgVFJrrbbZ+3QWRVG7c3zUOba+9Aty+YPe1BuH+WLpfUGpaQ21UlerWqNpHBpHHbPbPTmVS5WfqHR49OVIWW4AAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 21 10 45 58" title="" data-src="/static/2022-01-21-10-45-58-f82522cee97c277573ca87abee3f78ce-0208c.png" data-srcset="/static/2022-01-21-10-45-58-f82522cee97c277573ca87abee3f78ce-1777c.png 200w,\n/static/2022-01-21-10-45-58-f82522cee97c277573ca87abee3f78ce-1db89.png 400w,\n/static/2022-01-21-10-45-58-f82522cee97c277573ca87abee3f78ce-0208c.png 493w" data-sizes="(max-width: 493px) 100vw, 493px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n<li>\n<p>如果有 4 个值，则 4 个值按照顺时针方向依次作用于左上角、右上角、右下角和左下角，效果如图 4-9 所示。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="83689999833070040000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`border-radius: 10px 50% 30px 0;`, `83689999833070040000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">border-radius</span><span class="token punctuation">:</span> 10px 50% 30px 0<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-21-10-46-58-3a26dcc1c79db52df7973fabfdaa17e4-6a9ea.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 413px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 58.35351089588377%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAABU0lEQVQoz6WQ30pCQRDG14SkR+m+q7qMgvCiuo5eJOhFQoIwK8MiQkw9HjUSIojS1ArRPR419aCZN5lBZ79mPeQfsotq+C0MM9+3s7MMgICMNxPr95i5xtwNZr+gfDmNDY5EG2ZPZomtYHTMXoF34IiCRWBTwYahigIWxVIKpa5Umt/NhQ6mzqXIHsPEEPa4hBIWxvQVau+D+SNmR89sI904JqkbwiaX4g/xSzPNpxVW03+abJlXfjKP3bmPfLaCtSz6loE5/wqHKn9F/u04rPpRY2hnIYQpZFrtCucd5pNikUiJheQot8KZEl6DlFJvBcM/guXyhVK58txqtV7adBnXioZhNJrNet3QNL1Sqep6ifNigWu6Xn6qGZRoRZ261GK7e4f+QCiTfaAqmU/9Z4oae8zlI2p8y7VDrUBQcXu8JHNtu4Nhdd/rOz7xXyQuPQe+T128OFCJm6fAAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 21 10 46 58" title="" data-src="/static/2022-01-21-10-46-58-3a26dcc1c79db52df7973fabfdaa17e4-6a9ea.png" data-srcset="/static/2022-01-21-10-46-58-3a26dcc1c79db52df7973fabfdaa17e4-7efe1.png 200w,\n/static/2022-01-21-10-46-58-3a26dcc1c79db52df7973fabfdaa17e4-33ab6.png 400w,\n/static/2022-01-21-10-46-58-3a26dcc1c79db52df7973fabfdaa17e4-6a9ea.png 413w" data-sizes="(max-width: 413px) 100vw, 413px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n</ol>\n<h3 id="水平半径和垂直半径"><a href="#%E6%B0%B4%E5%B9%B3%E5%8D%8A%E5%BE%84%E5%92%8C%E5%9E%82%E7%9B%B4%E5%8D%8A%E5%BE%84" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>水平半径和垂直半径</h3>\n<p>还有很多人不知道我们平时使用的圆角值也是一种缩写。例如，下面 CSS 代码中的 10px 就是一种缩写：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="81996600705848920000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`border-top-left-radius: 10px;`, `81996600705848920000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">border-top-left-radius</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>它等同于：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="95699163067392880000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`border-top-left-radius: 10px 10px;`, `95699163067392880000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">border-top-left-radius</span><span class="token punctuation">:</span> 10px 10px<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>其中，第一个值表示水平半径，第二个值表示垂直半径。又如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="22683859353988490000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`border-top-left-radius: 30px 60px;`, `22683859353988490000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">border-top-left-radius</span><span class="token punctuation">:</span> 30px 60px<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>表示左上角的圆角是由水平半径（短半轴）为 30px、垂直半径（长半轴）为 60px 的椭圆产生的，效果如图 4-10 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-21-10-50-09-819cfc082534c96396cfd8f0ebf6649d-35f69.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 736px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 56.1141304347826%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABX0lEQVQoz52Q7UoCQRSGx7SgO4h+RF1Ut1DkBfSnWwm6hv6prdpWlCKKIoQfi+z3mpv7Ua6rNc7bzAqxBfajwzNnzgzzvucwBPU6Oh20WrBtNJtQFLTb4kbX0WiwWo36Ae316Y1EDZN2u1SWqWlRgK4YgevC8zCdIo7hOAhDQRRxL2aaCDwsZlhGmDqIZ4jeRLGIkATBhmB8aeo4eD/XcDpg+RHOlIQR8kOc9HAx+iVm7Fu54hv9OO5QUkC2BFJiRGRBhucC9u42dF4lJr05dmVkqti+RS4FP5Iqjp42iGkivnZBJGwlT9NwO1LBweOf4itbiLP/FDsgZezIQp8ml9gdrsdmqX9a159JvrRAiixb5v0ZHyHJgowkPm//YUPntZm9RNFHOfhBJRRIAe59EN6qNxgapuX5wcR9VTXdsh3LcjTDnNj2/MVauGNPG8XuODDV0NL05+5E6buGyt2/AMMJLhFUP7ZtAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 21 10 50 09" title="" data-src="/static/2022-01-21-10-50-09-819cfc082534c96396cfd8f0ebf6649d-35f69.png" data-srcset="/static/2022-01-21-10-50-09-819cfc082534c96396cfd8f0ebf6649d-0149d.png 200w,\n/static/2022-01-21-10-50-09-819cfc082534c96396cfd8f0ebf6649d-cfc3c.png 400w,\n/static/2022-01-21-10-50-09-819cfc082534c96396cfd8f0ebf6649d-35f69.png 736w" data-sizes="(max-width: 736px) 100vw, 736px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>如果是 border-radius 属性，则水平半径和垂直半径不是通过空格进行区分，而是通过斜杠区分。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="638976316376127500"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`border-radius: 30px / 60px;`, `638976316376127500`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">border-radius</span><span class="token punctuation">:</span> 30px / 60px<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>表示 4 个角落的圆角的水平半径都是 30px，垂直半径都是 60px，效果如图 4-11 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-21-10-53-04-b5ecb8d9b72f859c262b92b4563c0679-94f8a.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 546px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 45.238095238095234%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsSAAALEgHS3X78AAABM0lEQVQoz4WQz07CQBDGV6vxXfRkfAnvJsab3jz7Al788wjePXnxASQgBVQiVWwLrSWICBojakxMS/8A237OFrQkGJ39MpnZfL+d7DB8RxRnL8S6hXkFS9dYjEXFgoI1EzZPbMNgPxWPrw9fwFKQsmCniUSbwsFzYvsd3rDAMpjNYVpORC1drhr/wSsGWBoSueVEUgwv68IQ/gFv1QU8l8dMLhG1BG/WJiZHUTQOFz6Fj/iptMhDDeuTj5GNDnkJZGPLG23y+B3bD9hrY7eNnRb2n0R79IbJYLbjeJ4fBD3O+WBAiYP36WuI4oJmBC49G/Z7ruuGYdjturZti+w4TM6fGabV6bz6vl+/u9er5pVWabQe1eptWTNqjWZZN0o3umZaJaWs6tWL4mUmm1e1SuG8+AWKZ8mQgy7uzQAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 21 10 53 04" title="" data-src="/static/2022-01-21-10-53-04-b5ecb8d9b72f859c262b92b4563c0679-94f8a.png" data-srcset="/static/2022-01-21-10-53-04-b5ecb8d9b72f859c262b92b4563c0679-e2b97.png 200w,\n/static/2022-01-21-10-53-04-b5ecb8d9b72f859c262b92b4563c0679-db056.png 400w,\n/static/2022-01-21-10-53-04-b5ecb8d9b72f859c262b92b4563c0679-94f8a.png 546w" data-sizes="(max-width: 546px) 100vw, 546px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>斜杠前后都支持 1 ～ 4 个长度值。因此，下面的语法都是合法的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="20424265795759112000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 左上 右上+左下 右下 / 左上 右上+左下 右下 */\nborder-radius: 10px 5px 2em / 20px 25px 30%;\n/* 左上+右下 右上+左下 / 左上 右上 右下 左下 */\nborder-radius: 10px 5% / 20px 25em 30px 35em;`, `20424265795759112000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 左上 右上+左下 右下 / 左上 右上+左下 右下 */</span>\n<span class="token property">border-radius</span><span class="token punctuation">:</span> 10px 5px 2em / 20px 25px 30%<span class="token punctuation">;</span>\n<span class="token comment">/* 左上+右下 右上+左下 / 左上 右上 右下 左下 */</span>\n<span class="token property">border-radius</span><span class="token punctuation">:</span> 10px 5% / 20px 25em 30px 35em<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>现在了解了语法，那这里的水平半径和垂直半径究竟是如何作用才让边角产生圆角效果的呢？这个问题就是接下来要深入探讨的。</p>\n<h2 id="弄懂圆角效果是如何产生的"><a href="#%E5%BC%84%E6%87%82%E5%9C%86%E8%A7%92%E6%95%88%E6%9E%9C%E6%98%AF%E5%A6%82%E4%BD%95%E4%BA%A7%E7%94%9F%E7%9A%84" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>弄懂圆角效果是如何产生的</h2>\n<p>虽然我们口头上都称 border-radius 为圆角属性，实际上 border-radius 属性的字面意思不是“圆角”，而是“边界半径”，也就是圆角效果来自以这个半径值绘制的圆或以半轴值绘制的椭圆。例如，图 4-10 所示左上角的圆角效果是由水平半径为 30px、垂直半径为 60px 的椭圆产生的，原理如图 4-12 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-21-11-01-58-c20ad2e25de4863b60db5ec05b56c5ee-b2e17.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 623px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 51.20385232744783%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAABSklEQVQoz42Ry07CUBCGJxFCoi5c+waGBzDRF3FpiPENXLt1Q/A5jCaasMBW5BKjICoGpS23ciltKQjtIQERacdDoYbgJfyZTM5k5jszmQGck2EgId1ev6T3SgMs9qeW76H2MV8Ls4FlO6WmbgZr7hMZwiN3DD0xXI4jhHE/N06b1h/wyE74c124IF5W915qnugYc0UQGPTxC8A7N0041TfCZIttrERNuEYX/YJFn/AvPEkc3MrbTGstMoQgWYqNSTo5XOGesEjnRHs9PlyNfMJ5h85MMRf1IdzlFuh8JhqHwsBfeA/wJCBjQMJjCY+qyHS+l+rAlq3ptidvc4T6GxpttEznCJZzClpjB7YAf8gpRHOGs/AXQSL5UJeVhtbqElKpSoViUWu2RLFMrS6rWY5XFDWXL4jlytPjcyqZTmde7+5TmcxLlhO+AN1kE3E7MJPsAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 21 11 01 58" title="" data-src="/static/2022-01-21-11-01-58-c20ad2e25de4863b60db5ec05b56c5ee-b2e17.png" data-srcset="/static/2022-01-21-11-01-58-c20ad2e25de4863b60db5ec05b56c5ee-5d0dd.png 200w,\n/static/2022-01-21-11-01-58-c20ad2e25de4863b60db5ec05b56c5ee-d9bec.png 400w,\n/static/2022-01-21-11-01-58-c20ad2e25de4863b60db5ec05b56c5ee-b2e17.png 623w" data-sizes="(max-width: 623px) 100vw, 623px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>如果进一步放大半径值，例如设置垂直半径大小和元素等高，也就是 100% 高度值，如下所示：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="67510249033757440000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`border-top-left-radius: 30px 100%;`, `67510249033757440000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">border-top-left-radius</span><span class="token punctuation">:</span> 30px 100%<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>效果和原理此时如图 4-13 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-21-11-03-23-321bdedfb19d81e53056658d08d5f48e-3086a.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 656px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 70.42682926829268%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsSAAALEgHS3X78AAABx0lEQVQoz5WQXU8TQRSGZ0s0DXdoTFCjF1gkKvcmJHpRL/wNhJ9gws/g75Aa2wTplyksW7et5aKUtmz5sFRxKfu9lm47r2dqIVqD6MmbycnM+7xnZhiA5Qbuy3isIDIUNQ9kRMtw+3SIAHiTPYwkvkVUOuVkmFXwUMbrbTDVhpQGS49WUojWJGa2YAQCjrd9KWaHYx32vscunUnMKWArB2DruJGFlBlpIgOWwiMFpoD58rYjvbVvx8/Ca144C3ZheJoHW6qImJsfMJEdiYIonu5mDeGo4rF37ovU6WLyYCFnEUxmMsx/BFsoiphQRkT+VGgYTNd2BvTi3vxGl+DJhMMSjpTml4YnNDn6CVM53NvE9IWop53nBe4T69ivNuxnKXc2495ZM6dlYbi7iVs5vCyB0cM6Ac5+F+2YAafB6HZ3t/Lx1Zj29dQ03c4vBnoUw98rCBxdb7Xbve8+PHfskHH6kyskinNYlmgGA24YY4brJpPJskTQ+Tl8f3zytTA8D/2+IIn/b5hIwxARf9Q/wFcXq9cblWpN13XH9bRmc6+hHbe/NOqa1tw/+tyq7FRPTvSdaq1W31MLpUKpnC8UZUVVi+Wj1vEPOiS+a8Pq7NsAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 21 11 03 23" title="" data-src="/static/2022-01-21-11-03-23-321bdedfb19d81e53056658d08d5f48e-3086a.png" data-srcset="/static/2022-01-21-11-03-23-321bdedfb19d81e53056658d08d5f48e-a142c.png 200w,\n/static/2022-01-21-11-03-23-321bdedfb19d81e53056658d08d5f48e-201ef.png 400w,\n/static/2022-01-21-11-03-23-321bdedfb19d81e53056658d08d5f48e-3086a.png 656w" data-sizes="(max-width: 656px) 100vw, 656px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h3 id="重叠曲线的渲染机制"><a href="#%E9%87%8D%E5%8F%A0%E6%9B%B2%E7%BA%BF%E7%9A%84%E6%B8%B2%E6%9F%93%E6%9C%BA%E5%88%B6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>重叠曲线的渲染机制</h3>\n<p>左上角和左下角的垂直半径都是 100%，代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="67013547359354340000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`border-top-left-radius: 30px 100%;\nborder-bottom-left-radius: 30px 100%;`, `67013547359354340000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">border-top-left-radius</span><span class="token punctuation">:</span> 30px 100%<span class="token punctuation">;</span>\n<span class="token property">border-bottom-left-radius</span><span class="token punctuation">:</span> 30px 100%<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>显然，元素的高度并不足以放下两个半轴为 100% 尺寸的椭圆，如果我们对这种场景不加以约束，则曲线一定会发生重叠，而且曲线的交叉点一定不是平滑的，最后得到的绝对不会是我们想看到的效果。</p>\n<p>因此，CSS 规范对圆角曲线重叠这一问题做了额外的渲染设定，具体算法如下：设置 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi><mo>=</mo><mi>m</mi><mi>i</mi><mi>n</mi><mo>(</mo><msub><mi>L</mi><mi>h</mi></msub><mi mathvariant="normal">/</mi><msub><mi>S</mi><mi>h</mi></msub><mo separator="true">,</mo><msub><mi>L</mi><mi>v</mi></msub><mi mathvariant="normal">/</mi><msub><mi>S</mi><mi>v</mi></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">f = min(L_h/S_h, L_v/S_v)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="mord mathit">m</span><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">h</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span><span class="mord">/</span><span class="mord"><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">h</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span><span class="mpunct">,</span><span class="mord rule" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathit">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right:0.03588em;">v</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span><span class="mord">/</span><span class="mord"><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right:0.03588em;">v</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span><span class="mclose">)</span></span></span></span>，其中 S 是半径之和，L 是元素宽高，下标 h 和 v 表示方向，f 是计算值，简称“f 计算值”。CSS 圆角曲线的渲染规则很简单，如果 f 计算值小于 1，则所有圆角半径都乘以 f。</p>\n<p>回到这里的例子，左上角和左下角的垂直半径都是 100%，水平半径都是 30px，因此 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi><mo>=</mo><mi>m</mi><mi>i</mi><mi>n</mi><mo>(</mo><msub><mi>L</mi><mi>h</mi></msub><mi mathvariant="normal">/</mi><msub><mi>S</mi><mi>h</mi></msub><mo separator="true">,</mo><msub><mi>L</mi><mi>v</mi></msub><mi mathvariant="normal">/</mi><msub><mi>S</mi><mi>v</mi></msub><mo>)</mo><mo>=</mo><mi>m</mi><mi>i</mi><mi>n</mi><mo>(</mo><mn>1</mn><mn>5</mn><mn>0</mn><mi mathvariant="normal">/</mi><mn>6</mn><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mn>0</mn><mn>0</mn><mi mathvariant="normal">/</mi><mn>2</mn><mn>0</mn><mn>0</mn><mo>)</mo><mo>=</mo><mn>0</mn><mi mathvariant="normal">.</mi><mn>5</mn></mrow><annotation encoding="application/x-tex">f = min(L_h/S_h, L_v/S_v) = min(150/60, 100/200) = 0.5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="mord mathit">m</span><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">h</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span><span class="mord">/</span><span class="mord"><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">h</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span><span class="mpunct">,</span><span class="mord rule" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathit">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right:0.03588em;">v</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span><span class="mord">/</span><span class="mord"><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right:0.03588em;">v</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span><span class="mclose">)</span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="mord mathit">m</span><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mopen">(</span><span class="mord">1</span><span class="mord">5</span><span class="mord">0</span><span class="mord">/</span><span class="mord">6</span><span class="mord">0</span><span class="mpunct">,</span><span class="mord rule" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord">/</span><span class="mord">2</span><span class="mord">0</span><span class="mord">0</span><span class="mclose">)</span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">5</span></span></span></span>，f 计算值是 0.5，小于 1，所有圆角值都要乘以 0.5，因此：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="12587167359978380000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`border-top-left-radius: 30px 100%;\nborder-bottom-left-radius: 30px 100%;`, `12587167359978380000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">border-top-left-radius</span><span class="token punctuation">:</span> 30px 100%<span class="token punctuation">;</span>\n<span class="token property">border-bottom-left-radius</span><span class="token punctuation">:</span> 30px 100%<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>实际上，这等同于：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="91604480789861650000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`border-top-left-radius: 15px 50%;\nborder-bottom-left-radius: 15px 50%;`, `91604480789861650000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">border-top-left-radius</span><span class="token punctuation">:</span> 15px 50%<span class="token punctuation">;</span>\n<span class="token property">border-bottom-left-radius</span><span class="token punctuation">:</span> 15px 50%<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>此时会有图 4-14 所示的效果。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-21-11-06-33-0cb1152cce445a55983cbaa4b4abb530-6bfa8.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 44.80369515011547%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABfUlEQVQoz4WRS0tCQRTHRyvaiVBZYA9w2aJFILSraNOuVX2CPkDQxwj6AH6FFoVJSuZV896rYVpWGkoR4vPaAzW8d3zdfzM+Ktp0+DHMnPn/zznMEEcB5hAWwpiVB8zJsIiwX+O1BRbH6Xeb+2Mxou/JykzvlmmsMreQ1TiIF0Y/iDDAyNYLWCWUubm7JdfI6adJaG2EG8QPw7eMWVil/s4wZIRlfbxDpQ206LLUJB667Xo5dN2unRVJgAl0VmUsADLPzH6MstQQnhXA8pUOoDXsoQbxaPvO5JFT3nFnSZAJdGMA40GQlSjIOYw+3q0P33thFVHiY3c2QzVyUjcJzfWIysceyvj8B1mMBzAtYVIcwF7LdImlKCq9B3M8qRZBtYU7u9KbWcRUTzMhcgtp68jTH3JUz1M9R1Gkervb5a0lseD2leuaqtHfSgbR8V9Uq1BK6BX6E9zchwWlzWQqnS+US4pyFY3F4gl2TGaebx4zibvU/UOqoWn894aWLwD+lYNo2xONAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 21 11 06 33" title="" data-src="/static/2022-01-21-11-06-33-0cb1152cce445a55983cbaa4b4abb530-fee1c.png" data-srcset="/static/2022-01-21-11-06-33-0cb1152cce445a55983cbaa4b4abb530-a67b7.png 200w,\n/static/2022-01-21-11-06-33-0cb1152cce445a55983cbaa4b4abb530-0b187.png 400w,\n/static/2022-01-21-11-06-33-0cb1152cce445a55983cbaa4b4abb530-fee1c.png 800w,\n/static/2022-01-21-11-06-33-0cb1152cce445a55983cbaa4b4abb530-6bfa8.png 866w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>明白了重叠曲线的渲染机制，一些常见却不太理解的现象也就明白了。</p>\n<p>如果元素的高度和宽度是一样的，例如都是 150px，则下面两段 CSS 声明的效果是一样的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="8395293201832077000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`border-radius: 100%;\nborder-radius: 150px;`, `8395293201832077000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">border-radius</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>\n<span class="token property">border-radius</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>但是，如果元素的高度和宽度是不一样的，例如宽度是 150px，高度是 100px，则下面两段 CSS 声明的效果就不一样：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="73674828729197580000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`border-radius: 100%;\nborder-radius: 150px;`, `73674828729197580000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">border-radius</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>\n<span class="token property">border-radius</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>效果如图 4-15 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-21-11-27-24-d5a3dcf3a56645a8affb3022e5155326-244cb.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 46.51162790697674%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsSAAALEgHS3X78AAABlklEQVQoz1VQTU/UQBh+2yB3roa/YUz8Ddz8E0T0TLyamJgYr5xc45WLibelfLQEBUUXdrs1CLsL7lfbnbZpl/1ghZ33caYIgclzmOczkyEcHspqFZUyhI8jFwf7CLrseWyto1zmeoMrLiolhG2cHqP0DX9qqP3G7h5cl1j0kEZpEBVbww+uWK32jtsJRufopzwYcpZxLHbr4v3JoOAlhXKvUBGlToY4VEUC8LaLuT2QA8MBbcPcwcIvNC9xfRYbWjRskH2TcfCyqS161wKtwdzUnpHD3GKlPNrX9ucIZCkFpn0Lpi3QOuwU9PgHFJlx8mH7/8TsNmgT3hCvzkAb91wFTTfwpgl6cQIqan6LB44efvgFE4mPvn6X2rrrzuSBTwLUv8JTTy2xYWnJsJgsnv/KVsIA96/4yU+mIpu5rqAva7zgghnE+a98H+B1C0s1LJ9hNcZQavHaGkmsBHhWw/NGjjoKIS7ygC5PpZykMS4G07/jyyyZ9hMRBoEQ7U7XD4Xf7Yx7/iQR4ygYReE4CqdZLKVUxX/OOZ9zZ+R38AAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 21 11 27 24" title="" data-src="/static/2022-01-21-11-27-24-d5a3dcf3a56645a8affb3022e5155326-fee1c.png" data-srcset="/static/2022-01-21-11-27-24-d5a3dcf3a56645a8affb3022e5155326-a67b7.png 200w,\n/static/2022-01-21-11-27-24-d5a3dcf3a56645a8affb3022e5155326-0b187.png 400w,\n/static/2022-01-21-11-27-24-d5a3dcf3a56645a8affb3022e5155326-fee1c.png 800w,\n/static/2022-01-21-11-27-24-d5a3dcf3a56645a8affb3022e5155326-244cb.png 860w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>为什么会不一样呢？很多人百思不得其解。其实，简单套用一下重叠曲线的算法，一切就豁然开朗了：</p>\n<ul>\n<li>\n<p>border-radius: 100% 的 f 计算值是 0.5，因此，最终的圆角半径都要乘以 0.5，等同于：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="20071775395278336000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`border-radius: 75px / 50px;`, `20071775395278336000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">border-radius</span><span class="token punctuation">:</span> 75px / 50px<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n</li>\n<li>\n<p>border-radius: 150px 水平方向的 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>L</mi><mi mathvariant="normal">/</mi><mi>S</mi></mrow><annotation encoding="application/x-tex">L/S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit">L</span><span class="mord">/</span><span class="mord mathit" style="margin-right:0.05764em;">S</span></span></span></span> 的计算值是 0.5，而垂直方向的 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>L</mi><mi mathvariant="normal">/</mi><mi>S</mi></mrow><annotation encoding="application/x-tex">L/S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit">L</span><span class="mord">/</span><span class="mord mathit" style="margin-right:0.05764em;">S</span></span></span></span> 计算值是 100/300，也就是 0.3333，于是 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi><mo>=</mo><mi>m</mi><mi>i</mi><mi>n</mi><mo>(</mo><mn>0</mn><mi mathvariant="normal">.</mi><mn>5</mn><mo separator="true">,</mo><mn>0</mn><mi mathvariant="normal">.</mi><mn>3</mn><mn>3</mn><mn>3</mn><mn>3</mn><mo>)</mo><mo>=</mo><mn>0</mn><mi mathvariant="normal">.</mi><mn>3</mn><mn>3</mn><mn>3</mn><mn>3</mn></mrow><annotation encoding="application/x-tex">f = min(0.5, 0.3333) = 0.3333</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="mord mathit">m</span><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mopen">(</span><span class="mord">0</span><span class="mord">.</span><span class="mord">5</span><span class="mpunct">,</span><span class="mord rule" style="margin-right:0.16666666666666666em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">3</span><span class="mord">3</span><span class="mord">3</span><span class="mord">3</span><span class="mclose">)</span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">3</span><span class="mord">3</span><span class="mord">3</span><span class="mord">3</span></span></span></span>，也就是所有圆角半径（都是 150px）都要乘以 0.3333，等同于：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="53575027451282240000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`border-radius: 50px;`, `53575027451282240000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">border-radius</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n</li>\n</ul>\n<h2 id="border-radius-属性渲染-border-边框的细节"><a href="#border-radius-%E5%B1%9E%E6%80%A7%E6%B8%B2%E6%9F%93-border-%E8%BE%B9%E6%A1%86%E7%9A%84%E7%BB%86%E8%8A%82" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>border-radius 属性渲染 border 边框的细节</h2>\n<p>如果元素设置了 border 边框，则圆角半径会被分成内半径和外半径，如图 4-16 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-21-11-36-53-e7d3fa44bb968986528c935c093e7aad-a4730.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 357px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 69.187675070028%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsSAAALEgHS3X78AAAB0ElEQVQoz6WRTVPTQBjHlwMH6wyDHnUc/UIynD2gM74c/Qqe/CRevPDeYYAaoDMlbEJLtUM3SVPSDAJKk2zavLQDye7jplUrULj4PzyHZ/+/ff7PLoKrYlwUbrTDjxX3/c7puz36aj+cPYTnNZgjEKeZh/8xoxsk+4y9+6sRktjEDqACv7fs55Z99AWmiuAnt8CMZ03j1JueD9EnmCiw3GacK/LJXXi6Rh9uRI8wBAkfDw/7H6o+2uZojb+eD0jL0858rQckYvoJbfSH0UYawdk67PIN9pAE01Kv3ur2Q4COB0kKIhSlcEP/xB6Ut5iK9R4UmfXTF+Ql7YhLU8ZSj6Z3wHyw80u1i1bCKRmsmEOaDB8COh2IoqHpjskwW2OTi/TZZmj1hI9ncBCA58E4XYdnauJ74PF6cPzdAeqydhvi+NrAcbEH9QUBtA1PMNj90Y23wmJVxkS67FyUbgrnF9y9YMmg91e/PVeF4D+EymW18u3QpdR1HPPIFq2249i23Whadc0gdY3oBiG6rplGs2k2jzTD1I2Grhvlg68on19aWF0neuP87IdSroroptWSZXlXUUuyLElbJaxuFKR9papWDzDGW8WSolbwnrKwlP8FEv/16I3SWjQAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 21 11 36 53" title="" data-src="/static/2022-01-21-11-36-53-e7d3fa44bb968986528c935c093e7aad-a4730.png" data-srcset="/static/2022-01-21-11-36-53-e7d3fa44bb968986528c935c093e7aad-11629.png 200w,\n/static/2022-01-21-11-36-53-e7d3fa44bb968986528c935c093e7aad-a4730.png 357w" data-sizes="(max-width: 357px) 100vw, 357px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>其中直线为外半径，圆心到内部虚线圆的距离为内半径。</p>\n<ol>\n<li>\n<p>padding 边缘的圆角大小为设置的 border-radius 大小减去边框的厚度，如果结果为负，则内半径为 0。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="85338670024328180000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.radius {\n  width: 100px;\n  height: 100px;\n  border-top: 40px solid deepskyblue;\n  border-left: 40px solid deepskyblue;\n  border-radius: 40px 0 0;\n}`, `85338670024328180000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.radius</span> <span class="token punctuation">{</span>\n  <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>\n  <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>\n  <span class="token property">border-top</span><span class="token punctuation">:</span> 40px solid deepskyblue<span class="token punctuation">;</span>\n  <span class="token property">border-left</span><span class="token punctuation">:</span> 40px solid deepskyblue<span class="token punctuation">;</span>\n  <span class="token property">border-radius</span><span class="token punctuation">:</span> 40px 0 0<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>圆角半径大小和边框的大小均是 40px，此时内半径大小为 0，因此，padding 边缘是直角，没有弧度。最终效果如图 4-17 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-21-11-42-49-eb8c40ba9ae45306117ec2594cb418ec-66417.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 441px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 75.51020408163265%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsSAAALEgHS3X78AAABpUlEQVQoz5WSy0rDQBSG040P4ErwBcSFunErio/hA3hduVbqShCfwgdQLIiovWhoLNqW2oooqZeoaG3FNmmTSVOTmd+ZltqLFPXn53CYOd+czJlIAK4JZq4xksBop8cSGI5jOg2H8iowdEtSbQyeQjqCLwKp02IlhAEFdi94ThVknwxfGFKwwz4eD9Evg/SCJy8ghYXHE2z99nNVg/+B+XnU2JqGlQe2+Qy3i2OsEZtwEMtZirjsFnKt7d/UguezwKfj3GvuW951PbdiuqbllnTPtGCacBx4Hspl2DZyORCCQqEFL6riMI8ysX1zg0AAmQzicSgKLi8Ri+H9HdEokklsbSGdxs5OG5xtwlyc56XVKiwLlYqIjeaGIdbzeVHw8fEDZn+9sLjzVBNe+obbR9qV86ThBjyRqr/qIRbUTvgvnWdV8ScOnWPjSXzx/2Ba78ZN8W9J35lhGLpe9qhHCHFqNUqZRQh3hcu0bLuq63qxWCJ8zu0wqw9AlpXtwL72+HSbvas6teeX14Ng6DiqhMKRk2gsFDlRTs92d/dSmSteTOsv+gUbABvf/lKAQAAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 21 11 42 49" title="" data-src="/static/2022-01-21-11-42-49-eb8c40ba9ae45306117ec2594cb418ec-66417.png" data-srcset="/static/2022-01-21-11-42-49-eb8c40ba9ae45306117ec2594cb418ec-d16fa.png 200w,\n/static/2022-01-21-11-42-49-eb8c40ba9ae45306117ec2594cb418ec-9fd5a.png 400w,\n/static/2022-01-21-11-42-49-eb8c40ba9ae45306117ec2594cb418ec-66417.png 441w" data-sizes="(max-width: 441px) 100vw, 441px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>此特性在边框颜色透明的场景下依旧适用。另外，当内半径大于 0 的时候边框会和 padding box 重叠，此时文字内容可能会出现在边框之上。</p>\n</li>\n<li>\n<p>如果相邻两侧边框的厚度不同，则圆角大小将在较厚和较薄边界之间显示平滑过渡。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="43169500172074170000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.radius {\n  width: 100px;\n  height: 100px;\n  border-top: 40px solid deepskyblue;\n  border-left: 20px solid deepskyblue;\n  border-radius: 40px 0 0 / 60px 0 0;\n}`, `43169500172074170000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.radius</span> <span class="token punctuation">{</span>\n  <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>\n  <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>\n  <span class="token property">border-top</span><span class="token punctuation">:</span> 40px solid deepskyblue<span class="token punctuation">;</span>\n  <span class="token property">border-left</span><span class="token punctuation">:</span> 20px solid deepskyblue<span class="token punctuation">;</span>\n  <span class="token property">border-radius</span><span class="token punctuation">:</span> 40px 0 0 / 60px 0 0<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>最终效果如图 4-18 所示。可以明显看出在圆角位置处，边框的厚度在 20px ～ 40px 范围内变化的时候是平滑的，是流畅的。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-21-11-45-59-33c88d6e7db25096b633cd514adb590f-ae33f.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 391px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 63.68286445012787%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABi0lEQVQoz6WRO0/CUBTHi4mjn8PdOOjkI24YEuPEoi4ORCdWBxM+gaMfwcWFSJDyCOWhEWyhpfI0oaVITAQaCvKwvfd4C8aAAjHxn9yTnMfvnnvOpWBSCGNi8/nS6fmFnVZsyd5mGjY4sAnQ+DAL8FgxNU7iIfmudVYOnAtbh4s+3eLWLN4BRcNSCKr90e0zYN0wiL32BKm1vdUT1zZr7CQH1lhrPQ27AtTndzYQIvbs8mrZ4eqWJTAMs1RrAcYwTZOwWYOd0dr+Qwf0no7NQbCq4smG0+HRPA5Ws6Z00yWn34d2G2aI+r3qY65jj6tfsKqa/F/g4bPBngWyJGirqNmc03Y6fJTDNpGMqyNdH33gTBghPC4SUvpY6qLhr2OMfuTxt0sSFPxDVIqIF9/qjYryIskKCZVlOc1nWJZnOS7FC2nhSRSzvJDJ5PKSJHMpIVcoFoolkqMYhvH6gkrtVa5Us7kigR9ZjonE/XQ4EAp7vLeh6F2x8BxhYoFwjOcz7htv/D6ReORof+gTTvbKAxDYeakAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 21 11 45 59" title="" data-src="/static/2022-01-21-11-45-59-33c88d6e7db25096b633cd514adb590f-ae33f.png" data-srcset="/static/2022-01-21-11-45-59-33c88d6e7db25096b633cd514adb590f-12493.png 200w,\n/static/2022-01-21-11-45-59-33c88d6e7db25096b633cd514adb590f-ae33f.png 391w" data-sizes="(max-width: 391px) 100vw, 391px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>我们可以利用这一特性实现图 4-24 所示的带尾巴的小尖角效果。</p>\n</li>\n<li>\n<p>圆角边框的连接线和直角边框连接线位置一致，但是角度会有所不同。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="42406823079174320000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.radius {\n  width: 100px;\n  height: 100px;\n  border-top: 40px solid deepskyblue;\n  border-left: 20px solid deeppink;\n  border-right: 20px solid deeppink;\n  border-radius: 40px 0 0 / 60px 0 0;\n}`, `42406823079174320000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.radius</span> <span class="token punctuation">{</span>\n  <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>\n  <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>\n  <span class="token property">border-top</span><span class="token punctuation">:</span> 40px solid deepskyblue<span class="token punctuation">;</span>\n  <span class="token property">border-left</span><span class="token punctuation">:</span> 20px solid deeppink<span class="token punctuation">;</span>\n  <span class="token property">border-right</span><span class="token punctuation">:</span> 20px solid deeppink<span class="token punctuation">;</span>\n  <span class="token property">border-radius</span><span class="token punctuation">:</span> 40px 0 0 / 60px 0 0<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>最终效果如图 4-19 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-21-12-03-30-b8d7441dc49542cd30fef2ba1da17a63-96dff.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 494px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 68.21862348178138%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsSAAALEgHS3X78AAABnUlEQVQoz6WRyy8DcRDH9+DfkAgHJwmJXgji7upYEfEP+DMEJweiNwlxUyHarUdafaAe0TY2yu623a7Hbh+0QVp252u3q+pR0cRkMjO/38wnM/P7MfguRATCL5LLoVj8ODG1hKahUKjieKVPqlPZuBEEyLJV8AMGdEWBLMUeMRRB1xFsx+g+Nm3nKfp9ZSWqfgK/wsalbrjz+Igzw+ygyU0MC0ObXMQEMD5xBuelWaBR3bFJMyybWB9Y7T7D2AXsHEY4sscxGtX5jkVs8L/Dr2YKsyd6u6P0or/vZk35UKKWebhE/AFPhalv2dqiwpo0FcrUtoDNP+HpMHqWas9gdS6U0NoIPBNGbz24oc6Th7At1oGb57AhfIep+nFUgckRoeG1ClUVIy6WaXCFvJIZa7qFGJbBP4S5urxS1Vw2m8/fPzw/P/GiIKYkSZLFZFIQEneKIiZSyZSUTKfl6+ubW5Wv5FU1k5LSDOv2cBe8LN+k5dtsRnGxnl1vMOALsVvb3r1AMHTo9x/4A6Fd757PZ/ijTfcWx3ExLu4P7r8B44EAu06SagEAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 21 12 03 30" title="" data-src="/static/2022-01-21-12-03-30-b8d7441dc49542cd30fef2ba1da17a63-96dff.png" data-srcset="/static/2022-01-21-12-03-30-b8d7441dc49542cd30fef2ba1da17a63-1a6e9.png 200w,\n/static/2022-01-21-12-03-30-b8d7441dc49542cd30fef2ba1da17a63-b9533.png 400w,\n/static/2022-01-21-12-03-30-b8d7441dc49542cd30fef2ba1da17a63-96dff.png 494w" data-sizes="(max-width: 494px) 100vw, 494px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n</ol>\n<p>下面是其他一些细节。</p>\n<ol>\n<li>border-radius 不支持负值。</li>\n<li>圆角以外的区域不可点击，无法响应 click 事件。</li>\n<li>border-radius 没有继承性，因此父元素设置了 border-radius，子元素依然是直角效果。我们可以通过给父元素设置 overflow: hidden 让子元素视觉上表现为圆角。</li>\n<li>border-radius 属性支持 transition 过渡效果，也支持 animation 动画效果，因此在图形表现领域，border-radius 属性会非常给力。</li>\n<li>border-radius 属性也是可以应用于 display 的计算值为 table、inline-table 或者 table-cell 的元素上的，但是有一个前提，那就是表格元素的 border-collapse 属性值需要是 separate（separate 是 border-collapse 属性的默认值），如果 border-collapse 属性值是 collapse，那么是没有圆角效果的。</li>\n</ol>\n<h2 id="border-radius-属性的高级应用技巧"><a href="#border-radius-%E5%B1%9E%E6%80%A7%E7%9A%84%E9%AB%98%E7%BA%A7%E5%BA%94%E7%94%A8%E6%8A%80%E5%B7%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>border-radius 属性的高级应用技巧</h2>\n<p>border-radius 在实际开发中的高级应用主要在两方面，一个是增强原本的圆角效果，另外一个就是绘制各类图形效果。</p>\n<h3 id="border-radius-与不规则圆角头像"><a href="#border-radius-%E4%B8%8E%E4%B8%8D%E8%A7%84%E5%88%99%E5%9C%86%E8%A7%92%E5%A4%B4%E5%83%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>border-radius 与不规则圆角头像</h3>\n<p>我们平时给头像设置的圆角效果都是规则的圆，其实还可以使用百分比值设置不同的水平半径和垂直半径，实现不规则的圆角效果，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="93517684247725300000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.avatar {\n   border-radius: 70% 30% 30% 70% / 60% 40% 60% 40%;\n}`, `93517684247725300000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.avatar</span> <span class="token punctuation">{</span>\n   <span class="token property">border-radius</span><span class="token punctuation">:</span> 70% 30% 30% 70% / 60% 40% 60% 40%<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>效果如图 4-20 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-21-12-06-58-a1d1f4767e4ab3935878987881ca1966-6a9ea.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 413px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 60.77481840193705%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAABy0lEQVQoz2P4jwX8A+Lf3788PLHu7f6Kvd2xx1fNhAjCSChgwND4F0h8e3z06kzb1amCTcG8lopc/oqMmxZOAIr//fsHp+Z/YJ1fHx2/1qV4sV50dYZ8rrmUuYIEFxe3kY7Oly9fwWr+YdUMFb23MvDOAqGHc1T25Mhu8ZdZ6C5tJiUkIST2+PETsOV/sWkGW/vz463rCxWv18k/n6xwNkNuc4DMwXC5JlNxdVnpp89f4LQZ4ubvb69ecBJfKyg/xUem01FqjqP0Ml/ZUDMBF2eLb1+/4XY2RPjP/wth8Y1G7Plqkta8Eiaykg5KsqqSrE01BSDJP7gD7D9Y+88fn94cqj1TqLE+RHBOpPC0QL6uEIUHt66CffYXRfM/MIBbDOKAVXx9c/fDpVXv97W/2lrx9e5hSDz9QwUM/4kDyF5F2Pz06bNXr9/+/PnzzZu3v3///vr167MXL1+8fvXy5Yvnz54/efzo+fPnX79+efv23fPnL969f//k6bN37z+8fff20ZOnDGvWrt2+e/+jx0+OnTjz6dPnly9fHj52YvO2HXv27F29dtvqNZu2b9996PCRnTt3b9yy48ChI+s2bdm//+D+A0c2bd8NALliS9LyObrEAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 21 12 06 58" title="" data-src="/static/2022-01-21-12-06-58-a1d1f4767e4ab3935878987881ca1966-6a9ea.png" data-srcset="/static/2022-01-21-12-06-58-a1d1f4767e4ab3935878987881ca1966-7efe1.png 200w,\n/static/2022-01-21-12-06-58-a1d1f4767e4ab3935878987881ca1966-33ab6.png 400w,\n/static/2022-01-21-12-06-58-a1d1f4767e4ab3935878987881ca1966-6a9ea.png 413w" data-sizes="(max-width: 413px) 100vw, 413px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>再配点标题和描述，一个非常有设计感的布局效果就出来了，如图 4-21 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-21-12-07-17-bd09296a3626be6a0dc583623c998bac-2cb88.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 50.115207373271886%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAACO0lEQVQoz12RTWgTQRTH9+TBQ1VskFJThQgRD9J7oYgU7KVe7EnowYNo8QN6lF6KFDwoQhBrUz8So7ENpihN22STxmTTrCQ1pVZtmjSbnU02u5uvxmbTbSRJ57lbQcHHjx+PYf5vhhkChAjwFM6FQKJBDINIa/Ch/8lSkI+BQGPkbiE/5CPqCtHKBFH4TTJoQ/S0RNsE6mXWP6XE5yDrB86ngQ7MB8uB8ejji9bbZ0b7jSxpApEi9rOUvOHa+eGSYs7KmlNen5W/zjZTHuCWsBrL+DVnqcLcrbUxnWWofeCc7tjhQ5d7uzHyE/tcQFq2CKFX0rJVCr8WQpbKqmN7RbvFz1VHOWpXNt176y+Sls6c9ZTvRtfHAf1V43FDp1788l4Ls96JNDmRnDcxnqdqmPU+U5tCxJ6nrRsfHsrfFyvLI2vX2+P3DIFremqwa6rvRO95Q/nbHNFCgdSCCXkn1cM5nxn5zMWoXZ21tfgk43++NW8SYzPK9IO3bW13jR1XTncMd5/sO3tkaLBHfQWiyQbyn21oyVxamanEHGLYVozYWe9kPTHfYMhGytNMk8AE084R703jowvto5d0d3qOhu3jkKcJnAngtLvFLO6n3Zj1NFMLatNIuIDzAksCIjFLYuQBKdjcfFen7tdcw8qnMciov0ASUBNBzkHtDwIoouZd8QDhn2Uedgt4rwxKCStFXOXVFAEHhbHmnaqMeLH+q1EobSdSbDzBZHNSiuVYxCcZjmEzVbn2d7NavwH7U8n5m0/yIgAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 21 12 07 17" title="" data-src="/static/2022-01-21-12-07-17-bd09296a3626be6a0dc583623c998bac-fee1c.png" data-srcset="/static/2022-01-21-12-07-17-bd09296a3626be6a0dc583623c998bac-a67b7.png 200w,\n/static/2022-01-21-12-07-17-bd09296a3626be6a0dc583623c998bac-0b187.png 400w,\n/static/2022-01-21-12-07-17-bd09296a3626be6a0dc583623c998bac-fee1c.png 800w,\n/static/2022-01-21-12-07-17-bd09296a3626be6a0dc583623c998bac-2cb88.png 868w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/67hxng?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>如果是很多个头像，我们还可以利用“蝉原则”（质数）实现随机圆角效果。</p>\n<p>一种方法是直接指定圆角大小，IE9+ 浏览器均提供支持，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="6536618697589614000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.avatar {\n   border-radius: 87% 91% 98% 100%;\n}\n\n.avatar:nth-child(2n + 1) {\n   border-radius: 59% 52% 56% 59%;\n}\n\n.avatar:nth-child(3n + 2) {\n   border-radius: 84% 94% 83% 72%;\n}\n\n.avatar:nth-child(5n + 3) {\n   border-radius: 73% 100% 82% 100%;\n}\n\n.avatar:nth-child(7n + 5) {\n   border-radius: 93% 90% 85% 78%;\n}\n\n.avatar:nth-child(11n + 7):hover {\n   border-radius: 58% 98% 78% 83%;\n}`, `6536618697589614000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.avatar</span> <span class="token punctuation">{</span>\n   <span class="token property">border-radius</span><span class="token punctuation">:</span> 87% 91% 98% 100%<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.avatar:nth-child(2n + 1)</span> <span class="token punctuation">{</span>\n   <span class="token property">border-radius</span><span class="token punctuation">:</span> 59% 52% 56% 59%<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.avatar:nth-child(3n + 2)</span> <span class="token punctuation">{</span>\n   <span class="token property">border-radius</span><span class="token punctuation">:</span> 84% 94% 83% 72%<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.avatar:nth-child(5n + 3)</span> <span class="token punctuation">{</span>\n   <span class="token property">border-radius</span><span class="token punctuation">:</span> 73% 100% 82% 100%<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.avatar:nth-child(7n + 5)</span> <span class="token punctuation">{</span>\n   <span class="token property">border-radius</span><span class="token punctuation">:</span> 93% 90% 85% 78%<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.avatar:nth-child(11n + 7):hover</span> <span class="token punctuation">{</span>\n   <span class="token property">border-radius</span><span class="token punctuation">:</span> 58% 98% 78% 83%<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>另外一种方法是选取圆角动画中的某一帧，这可以借助 animation-delay 负值技术实现，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="15848423213643991000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.avatar {\n   border-radius: 50%;\n   animation: morph 6s paused linear;\n}\n\n@keyframes morph {\n   0% {\n      border-radius: 40% 60% 60% 40% / 60% 30% 70% 40%;\n   }\n   100% {\n      border-radius: 40% 60%;\n   }\n}\n\n.avatar:nth-child(2n + 1) {\n   animation-delay: -1s;\n}\n\n.avatar:nth-child(3n + 2) {\n   animation-delay: -2s;\n}\n\n.avatar:nth-child(5n + 3) {\n   animation-delay: -3s;\n}\n\n.avatar:nth-child(7n + 5) {\n   animation-delay: -4s;\n}\n\n.avatar:nth-child(11n + 7) {\n   animation-delay: -5s;\n}`, `15848423213643991000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.avatar</span> <span class="token punctuation">{</span>\n   <span class="token property">border-radius</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>\n   <span class="token property">animation</span><span class="token punctuation">:</span> morph 6s paused linear<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token atrule"><span class="token rule">@keyframes</span> morph</span> <span class="token punctuation">{</span>\n   <span class="token selector">0%</span> <span class="token punctuation">{</span>\n      <span class="token property">border-radius</span><span class="token punctuation">:</span> 40% 60% 60% 40% / 60% 30% 70% 40%<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n   <span class="token selector">100%</span> <span class="token punctuation">{</span>\n      <span class="token property">border-radius</span><span class="token punctuation">:</span> 40% 60%<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.avatar:nth-child(2n + 1)</span> <span class="token punctuation">{</span>\n   <span class="token property">animation-delay</span><span class="token punctuation">:</span> -1s<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.avatar:nth-child(3n + 2)</span> <span class="token punctuation">{</span>\n   <span class="token property">animation-delay</span><span class="token punctuation">:</span> -2s<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.avatar:nth-child(5n + 3)</span> <span class="token punctuation">{</span>\n   <span class="token property">animation-delay</span><span class="token punctuation">:</span> -3s<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.avatar:nth-child(7n + 5)</span> <span class="token punctuation">{</span>\n   <span class="token property">animation-delay</span><span class="token punctuation">:</span> -4s<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.avatar:nth-child(11n + 7)</span> <span class="token punctuation">{</span>\n   <span class="token property">animation-delay</span><span class="token punctuation">:</span> -5s<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>最终可以实现图 4-22 所示的随机不规则圆角头像效果，支持任意数量的头像。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-21-13-34-00-c37ec2b2e458e595b41724ddfe8d9712-8d399.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 516px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 80.81395348837209%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAAsSAAALEgHS3X78AAADwElEQVQozx2Te2xTVRzH7x/+o4KJcVF8ECsKYiTxT/8gMRIxmDLFRwQMTGEgBDWEwJSGocGxMW1hQ9jGsq6Qbd14BCfQB7tdSx+3a9d27S197Lbrc23Xrl3btbf3tre3vfd4u39Ocj4539/J+X5yIACAeTH3xw1F2z8KsdqboRiOVFlgy1XVCQJJke5ijWwwgDNgxqOYVl54rBoL5lc4Armz5MDQmKRD2HG2d9/3l1ovy4t1MJejJqxB1B9zBuNoeFm/hFcBkCN37ML10b9eeHR83e4dW4c0FsgQWgoYpkJuJ4b5tGrDpavj03FCYgn1ycwPrBhs9837w3osYS8ysn7+fM/LUem7RsHbAx8+u//rz6HZcBjQhdUlj8ugUIyJhaIraL5y6rZp/8WRvgc66ROL1eWH54KmFD4zsd0n2ug5w0NO8ox7NvQc2gmpUFvAKLPI/lUOiwfbO7olD0kAbjoSh3omD3SN/CK6NS7XaCP5DAAqyQnbW8+LtvGOvPd6y8ZnukTdUJQojw52jpxuuXz0QFfvSKBAc00slOrXrfEW8ZPtgmHBf6ZYheUg5ordav1Ce/610S9fPd3WOr9CQhxNlkjYaoTtjjRZA4Cps42jSxXmbrBwbyFXrDe2zBpMlcuWkNUZQctMrdE2xQKsuBgomoK4w1dMFRqQ5VZThlZHSvJA0Z6t0mvJYrV+L0zfCICJOFAt11IUC7nTwWjkd3b1YmXxfDb891zcTAFgydKWSEFmWRxQevv1i4oYwYUnE7TQhY+FcHmyZMVLCE5Berswgez0W37IWPfkZps9hm/MmYx9hc3myslVOpimzN5lqT2FESwci/mS3mjOhxN+wCx48QQ0rPr1Zn+TeGiz8fG2yYdbpXfegWMLjiyw+RJS2HZ1XME/1v7R8QuaJGGYVXl10ohuMAxfeTr+mxJRQrfRqW/bnjsnfEUk4Ql61p+S7FqmWXWMEAwrdv3UuZl/DHpxy/t7TyYB6P7zzPW9vL7DWzr56w5/2qR+6oI4q+cmrzWf3bSvvelg7w5l0M09L1sDB6/dfXP3jxs+/u6Nr35WYTEOjk4jJ/ibjnzy0mfNH4jhqUbbLGDrAKDpjCqExclyo+u1bjndxmjmvjOUJBrmWabxObzpvHzOia0U1ggLcQJJEufsArbhuFqlKhWqTFXL3CBOJstUCIIgy/U6Q5IkQ9PcbO46gigxXJhlGQNiRN2eeZ8/v1oIhcJKWO3y+ExWmx4xaXWmKVhjNM2iTqdGixiMZrXW4EBdOv1Mhar+D1Pc1JMdSydCAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 21 13 34 00" title="" data-src="/static/2022-01-21-13-34-00-c37ec2b2e458e595b41724ddfe8d9712-8d399.png" data-srcset="/static/2022-01-21-13-34-00-c37ec2b2e458e595b41724ddfe8d9712-8ba40.png 200w,\n/static/2022-01-21-13-34-00-c37ec2b2e458e595b41724ddfe8d9712-7e253.png 400w,\n/static/2022-01-21-13-34-00-c37ec2b2e458e595b41724ddfe8d9712-8d399.png 516w" data-sizes="(max-width: 516px) 100vw, 516px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/svq56c?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/t0zrfn?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<h3 id="border-radius-图形绘制技巧"><a href="#border-radius-%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6%E6%8A%80%E5%B7%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>border-radius 图形绘制技巧</h3>\n<p>一句话，只要是带圆弧的图形效果，border-radius 属性都能绘制出来，前提是对 border-radius 属性有足够深入的了解。想要出神入化地绘制图形，离不开人的创造力，下面先来介绍几个常用的图形效果，其他效果可以在此基础上延伸。</p>\n<p>下面两个例子纯属抛砖引玉。</p>\n<ol>\n<li>\n<p>绘制 1/4 圆作为角标，用来显示序号，关键 CSS 代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="22311668353564307000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`border-bottom-right-radius: 100%;`, `22311668353564307000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">border-bottom-right-radius</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>效果如图 4-23 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-21-13-41-25-aeebe3572be99eeadd9931be663c915f-a9af0.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 49.770114942528735%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAAA6ElEQVQoz5VRzc6CMBDk0XyD7+y76fk76ktwMIoYgiagVaGoiIqk2gitu1gk/kQvddJ0N212ZyZj/NmiTWUJ4lIU/MyllFdtGP9bnO+zKJi7Y9ey7FzIUhtGlsujwBJBbXr/QA0YDQtaSnZ+ztgpPRySJElTVVMt5vCCjDFKA8dxBv2BaZr2cEQI0RruxLLHqg6w/Fl208VueMo21POniwXxPF9IZR61mMUViiJXLsMKwSaOAfFBXpeXls/hKlaA9yd4xAgA9Q11953z0x7cV0TRmkYrzvlut59MvOUy9Kez+yGrdfzBfwP5IkIqEUwKDQAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 21 13 41 25" title="" data-src="/static/2022-01-21-13-41-25-aeebe3572be99eeadd9931be663c915f-fee1c.png" data-srcset="/static/2022-01-21-13-41-25-aeebe3572be99eeadd9931be663c915f-a67b7.png 200w,\n/static/2022-01-21-13-41-25-aeebe3572be99eeadd9931be663c915f-0b187.png 400w,\n/static/2022-01-21-13-41-25-aeebe3572be99eeadd9931be663c915f-fee1c.png 800w,\n/static/2022-01-21-13-41-25-aeebe3572be99eeadd9931be663c915f-a9af0.png 870w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n<li>\n<p>例如，border 边框应用 border-radius 属性时，可以使用平滑特性实现带尖角的对话框小尾巴效果：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="29135814011114136000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.corner-tail {\n  width: 15px;\n  height: 10px;\n  border-top: 10px solid deepskyblue;\n  border-top-left-radius: 80%;\n}`, `29135814011114136000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.corner-tail</span> <span class="token punctuation">{</span>\n  <span class="token property">width</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>\n  <span class="token property">height</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>\n  <span class="token property">border-top</span><span class="token punctuation">:</span> 10px solid deepskyblue<span class="token punctuation">;</span>\n  <span class="token property">border-top-left-radius</span><span class="token punctuation">:</span> 80%<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>效果如图 4-24 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-21-13-43-57-b43cba24c0b62a7ef884ba4c80a30983-244cb.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 27.906976744186046%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsSAAALEgHS3X78AAABB0lEQVQY002LX0vCYBjF36B/9g266CIIqmVWRBFEF4FFGH2E6HN2Ua2psXebtZWbm7i5UMO03Gt13WnPHCn8eDjnPOewggVJw46OdQ6Jk97UyWY1bHAK6apYS0Rc2NbolUsmTNJxYiJvYkvDroE9A6cmrlycWTioUOmwgqUHZHWyR4+4dHBu4eIZOQ62rOL4CfsGpmXM3Y+ZnxAzcmozCQsKJbMy2GIZqxwrKqbuwEbcpuI/Gb8moLH1jesBbiKUhijHfKUoAkpEtyh+R7ooUuJmnJQE2KDX7QSNn8/+MProBIF4f+u3W92w6dvV0HN9x67bL691r+m6oecFNadhV/2a02u3APwB1q8CWXBAZ/AAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 21 13 43 57" title="" data-src="/static/2022-01-21-13-43-57-b43cba24c0b62a7ef884ba4c80a30983-fee1c.png" data-srcset="/static/2022-01-21-13-43-57-b43cba24c0b62a7ef884ba4c80a30983-a67b7.png 200w,\n/static/2022-01-21-13-43-57-b43cba24c0b62a7ef884ba4c80a30983-0b187.png 400w,\n/static/2022-01-21-13-43-57-b43cba24c0b62a7ef884ba4c80a30983-fee1c.png 800w,\n/static/2022-01-21-13-43-57-b43cba24c0b62a7ef884ba4c80a30983-244cb.png 860w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/0ctmlz?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n</li>\n</ol>\n<h1 id="box-shadow-盒阴影"><a href="#box-shadow-%E7%9B%92%E9%98%B4%E5%BD%B1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>box-shadow 盒阴影</h1>\n<p>box-shadow 盒阴影也是非常实用的 CSS 属性，可以给元素设置阴影效果，让视觉表现更富有层次。例如，为固定定位的头部元素设置方向朝下的阴影效果可以让页面层次更清晰：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="55322354610543000000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`header {\n   background-color: #fff;\n   position: fixed;\n   left: 0;\n   right: 0;\n   top: 0;\n   box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n}`, `55322354610543000000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">header</span> <span class="token punctuation">{</span>\n   <span class="token property">background-color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>\n   <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>\n   <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n   <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n   <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n   <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 2px 4px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.2<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>其中，<code class="language-text">box-shadow: 0 2px 4px rgba(0, 0, 0, .2)</code> 这段 CSS 声明包含 box-shadow 属性最常使用的几个值，0 表示水平偏移，2px 表示垂直偏移，4px 是模糊大小，<code class="language-text">rgba(0, 0, 0, .2)</code> 则是投影的颜色。</p>\n<p>常规的投影效果使用上面几个值就可以了，偏移+模糊+颜色，例如 filter 属性中的 drop-shadow 投影滤镜就是上面几个部件组成的。</p>\n<p>无论是盒阴影还是投影效果，其光源都默认在页面的左上角。因此水平偏移的值如果是正数则表示投影偏右，如果是负数则表示投影偏左，垂直偏移也是类似效果。这种偏移方位与文档流的方向没有任何关系，例如我们设置文档流是从右往左（direction: rtl），正数偏移值依然表示投影偏右下，不会有任何变化。</p>\n<p>本书不会在 box-shadow 属性的常规用法上多费笔墨，主要介绍你可能不知道的其他的一些应用。</p>\n<h2 id="inset-关键字与内阴影"><a href="#inset-%E5%85%B3%E9%94%AE%E5%AD%97%E4%B8%8E%E5%86%85%E9%98%B4%E5%BD%B1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>inset 关键字与内阴影</h2>\n<p>box-shadow 属性支持 inset 关键字，表示阴影朝向元素内部。先看一个简单的内外阴影对比案例：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="13924230696298045000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.inset {\n   width: 180px;\n   height: 100px;\n   background-color: deepskyblue;\n   box-shadow: inset 2px 2px 4px rgba(0, 0, 0, 0.5);\n}\n\n.normal {\n   width: 180px;\n   height: 100px;\n   background-color: deepskyblue;\n   box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);\n}`, `13924230696298045000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.inset</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 180px<span class="token punctuation">;</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>\n   <span class="token property">background-color</span><span class="token punctuation">:</span> deepskyblue<span class="token punctuation">;</span>\n   <span class="token property">box-shadow</span><span class="token punctuation">:</span> inset 2px 2px 4px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.5<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.normal</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 180px<span class="token punctuation">;</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>\n   <span class="token property">background-color</span><span class="token punctuation">:</span> deepskyblue<span class="token punctuation">;</span>\n   <span class="token property">box-shadow</span><span class="token punctuation">:</span> 2px 2px 4px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.5<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>效果如图 4-25 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-22-12-47-36-ff359cacb80d11f92c340d5601573f83-925e2.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 36.61971830985916%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsSAAALEgHS3X78AAABK0lEQVQY023OUU7CQBAG4CnFA5j44gNqlMQXwhE8gOdUiRohGhFb2lIkERMPIdoipS3Qwlpt6c64JVp8cPNlkt2df2fhSHd29HlZDw70MHdohJutmebGNz5t9bD8hPv9tXKfbz/S8XMEpXYIHZI6KGquaBIo1PDwdISgkiwOjbWCgaBTpctgTwtEd6GDUvbEj40sjNce1hyENskm/b2VxSSDqg8Mdlfh/yZn4TMR1kjukmSuyWbWXO0xKKkz8QdJ56BjrijqHa+7/GSYQjOR1QQUYZlRl4VsyytGAKaXNH1sragzUqZ0P0EtoNspuQnZn/zcihp2VF+5sj4uX9nFYFF7WSjWHOh38TSNfCdlISZROHxjI8tzHHswiMbvbGQzZxhP3Ngfp/FXHvkGv4MmYkYZhdIAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 22 12 47 36" title="" data-src="/static/2022-01-22-12-47-36-ff359cacb80d11f92c340d5601573f83-fee1c.png" data-srcset="/static/2022-01-22-12-47-36-ff359cacb80d11f92c340d5601573f83-a67b7.png 200w,\n/static/2022-01-22-12-47-36-ff359cacb80d11f92c340d5601573f83-0b187.png 400w,\n/static/2022-01-22-12-47-36-ff359cacb80d11f92c340d5601573f83-fee1c.png 800w,\n/static/2022-01-22-12-47-36-ff359cacb80d11f92c340d5601573f83-925e2.png 1136w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>从图 4-25 中可以看出以下两点。</p>\n<ol>\n<li>box-shadow 内阴影效果适合实现内嵌效果，表现更低一层级的视觉效果。</li>\n<li>box-shadow 内阴影的水平和垂直偏移方向和外阴影一致，都是左上角光源。</li>\n</ol>\n<p>然而，根据我多年的实践经验，内阴影更常见的使用场景并不是视觉层级表现，而是辅助图形效果。</p>\n<h3 id="模拟边框"><a href="#%E6%A8%A1%E6%8B%9F%E8%BE%B9%E6%A1%86" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模拟边框</h3>\n<p>在 border 边框被占用，或者不方便使用 border 属性的情况下，我们可以借助 box-shadow 内阴影来模拟边框效果。</p>\n<p>例如，一套按钮组件，深色背景按钮无边框，浅色背景按钮需要有边框，这就带来了一点小麻烦。因为 border 会影响元素的尺寸，为了保证所有按钮尺寸一致的同时代码被高度复用，很多人会给深色背景按钮设置透明边框。其实还有更好的做法，那就是使用 box-shadow 内阴影模拟边框，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="94596629259530100000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<button class=&quot;normal&quot;>正常</button>\n<button class=&quot;primary&quot;>主要</button>\n<button class=&quot;warning&quot;>警示</button>\n<style>\n   button {\n      height: 40px;\n      border: 0;\n      border-radius: 4px;\n   }\n\n   .normal {\n      background-color: #fff;\n      /* 模拟边框 */\n      box-shadow: inset 1px 0 #a2a9b6, inset -1px 0 #a2a9b6, inset 0 1px #a2a9b6, inset 0 -1px #a2a9b6;\n   }\n\n   .primary {\n      color: #fff;\n      background-color: #2a80eb;\n   }\n\n   .warning {\n      color: #fff;\n      background-color: #eb4646;\n   }\n</style>`, `94596629259530100000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>normal<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>正常<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>primary<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>主要<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>warning<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>警示<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n   <span class="token selector">button</span> <span class="token punctuation">{</span>\n      <span class="token property">height</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>\n      <span class="token property">border</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n      <span class="token property">border-radius</span><span class="token punctuation">:</span> 4px<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">.normal</span> <span class="token punctuation">{</span>\n      <span class="token property">background-color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>\n      <span class="token comment">/* 模拟边框 */</span>\n      <span class="token property">box-shadow</span><span class="token punctuation">:</span> inset 1px 0 #a2a9b6<span class="token punctuation">,</span> inset -1px 0 #a2a9b6<span class="token punctuation">,</span> inset 0 1px #a2a9b6<span class="token punctuation">,</span> inset 0 -1px #a2a9b6<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">.primary</span> <span class="token punctuation">{</span>\n      <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>\n      <span class="token property">background-color</span><span class="token punctuation">:</span> #2a80eb<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">.warning</span> <span class="token punctuation">{</span>\n      <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>\n      <span class="token property">background-color</span><span class="token punctuation">:</span> #eb4646<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>效果如图 4-26 所示，有边框按钮和无边框按钮的尺寸完全一致。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-22-12-53-32-8972208661cdd9faecb257afd02096a6-e9aba.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 38.26940231935772%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAABYklEQVQY052RPU/CUBSG+zd0MW4uDiaSoE6EwKAEle4u+g8QCSZqSAxGE+PC5k/AxVVdDX4E6YDUEIQWFWjvLdCP2Pb23l5viYmuevLk5F3OOe85h6OeR/8bHG00qOME0vf/XIxrz1gUMaXEwx4mPiH6J/kYkZ4e0B0FAMsnuk4U5RtVDbKmcbaLbNsxLIthO4j67v7lcOYAhgowdASXTuBsHqyfm8peXovHAM/DVAomkzCRGGxscGz6APbL5durm+uxb7JdGk5m1eiZlr4w0iV9eleJF41uOgcXwsPMjnl6PNjaBNEo68IhD1umCSA0TMNBzD7KlIYTWXXuELCx8wUwlevHinpQvBgGq2saz4OVZRCJQJ7nXBdhTIjvszzeGUsQ30v4sUPuJPzAhIzrCiVyxxME96mKKhUkCAGiyP2+XvO1JXXeHNuCPfmlVpWadeW9LTfFVkOst2XmbfyTn6d8Af4TmDu4eDM6AAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 22 12 53 32" title="" data-src="/static/2022-01-22-12-53-32-8972208661cdd9faecb257afd02096a6-fee1c.png" data-srcset="/static/2022-01-22-12-53-32-8972208661cdd9faecb257afd02096a6-a67b7.png 200w,\n/static/2022-01-22-12-53-32-8972208661cdd9faecb257afd02096a6-0b187.png 400w,\n/static/2022-01-22-12-53-32-8972208661cdd9faecb257afd02096a6-fee1c.png 800w,\n/static/2022-01-22-12-53-32-8972208661cdd9faecb257afd02096a6-e9aba.png 1121w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/6usjz1?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<h3 id="颜色覆盖"><a href="#%E9%A2%9C%E8%89%B2%E8%A6%86%E7%9B%96" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>颜色覆盖</h3>\n<p>box-shadow 内阴影有一个实用特性，那就是生成的阴影会位于文字内容的下面，背景颜色的上面。于是我们可以使用 box-shadow 属性在元素上面再覆盖一层颜色，这种做法在不少场景下非常有用。</p>\n<p>在 Chrome 浏览器中，输入框在自动填充的时候会自带背景颜色，一般是黄色或者浅蓝色，我们可以使用 box-shadow 内阴影创建白色颜色层对其进行覆盖，代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="490056547916983800"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`input:-webkit-autofill {\n   -webkit-box-shadow: inset 0 0 0 1000px #fff;\n   background-color: transparent;\n}`, `490056547916983800`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">input:-webkit-autofill</span> <span class="token punctuation">{</span>\n   <span class="token property">-webkit-box-shadow</span><span class="token punctuation">:</span> inset 0 0 0 1000px #fff<span class="token punctuation">;</span>\n   <span class="token property">background-color</span><span class="token punctuation">:</span> transparent<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>又如，按钮在被按下的时候其背景色要深一点，这用来给用户提供操作反馈。使用 box-shadow 内阴影，只用一行代码便可以搞定所有按钮，无须一个一个专门进行颜色设置，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="68131510862597276000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`button:active {\n   box-shadow: inset 0 0 0 999px rgba(0, 0, 0, 0.1);\n}`, `68131510862597276000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">button:active</span> <span class="token punctuation">{</span>\n   <span class="token property">box-shadow</span><span class="token punctuation">:</span> inset 0 0 0 999px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.1<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>效果如图 4-27 所示，在中间按钮被按下的时候背景颜色明显加深了。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-22-20-54-13-b4b8534da823b8bcaee35b3c97ecf17e-a9bb1.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 30.39301310043668%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABSUlEQVQY02P4/OXrz5+/vn3/8e37dyD5/++vi/c/WtZft2m8YVF/3bbphm3DNcuOBxdmrvoSGvg6KvptZOTbiIg3ISEfSkoYfvz49f//v3t3bu3YvfPOvQf///8/deu9TM4F9ZLLkZPvVax4bFR5WbL09on22V+szN4kpXzubn+flvLKwf5dXBzD12/f//758+rlyxcvX37+/BWo+fSt91LZF5QLL1s1XLdquKFRcE6+4tbx9jmfrcxe+vi+jYp87ev70sbmbWwsyGags//8+fvn77+fv34DOe8//9x96cPOSx+2nn+37eKnrScfLdpx6f3dJ78OH/x++PCPAwd/HDny8/DhXxcuMPwnBP7++f39y0esUiia79178PDR4y9fvl65duP02UuXrlwHMi5fuX77zv1Ll69evXr9/t37QGX//vz5//cvEAEAk7cf39J/vaoAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 22 20 54 13" title="" data-src="/static/2022-01-22-20-54-13-b4b8534da823b8bcaee35b3c97ecf17e-fee1c.png" data-srcset="/static/2022-01-22-20-54-13-b4b8534da823b8bcaee35b3c97ecf17e-a67b7.png 200w,\n/static/2022-01-22-20-54-13-b4b8534da823b8bcaee35b3c97ecf17e-0b187.png 400w,\n/static/2022-01-22-20-54-13-b4b8534da823b8bcaee35b3c97ecf17e-fee1c.png 800w,\n/static/2022-01-22-20-54-13-b4b8534da823b8bcaee35b3c97ecf17e-a9bb1.png 1145w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>box-shadow 内阴影颜色覆盖也是有局限的，其对于部分替换元素是无效的，例如 <code class="language-text">&lt;img&gt;</code> 元素：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="95870992827390820000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 无效 */\nimg:active {\n   box-shadow: inset 0 0 0 999px rgba(0, 0, 0, 0.1);\n}`, `95870992827390820000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 无效 */</span>\n<span class="token selector">img:active</span> <span class="token punctuation">{</span>\n   <span class="token property">box-shadow</span><span class="token punctuation">:</span> inset 0 0 0 999px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.1<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>因为替换元素的内容在盒阴影之上。此时可以使用 outline 属性进行模拟，假设图片尺寸是 75px×100px，则可以：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="47058563377662610000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`img:active {\n   outline: 50px solid rgba(0, 0, 0, 0.1);\n   outline-offset: -50px;\n}`, `47058563377662610000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">img:active</span> <span class="token punctuation">{</span>\n   <span class="token property">outline</span><span class="token punctuation">:</span> 50px solid <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.1<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token property">outline-offset</span><span class="token punctuation">:</span> -50px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="不要忽略第四个长度值"><a href="#%E4%B8%8D%E8%A6%81%E5%BF%BD%E7%95%A5%E7%AC%AC%E5%9B%9B%E4%B8%AA%E9%95%BF%E5%BA%A6%E5%80%BC" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>不要忽略第四个长度值</h2>\n<p>box-shadow 属性支持 2 ～ 4 个长度值，前两个长度值是固定的，表示水平偏移和垂直偏移，第三个长度值表示模糊半径，还有第四个长度值，表示扩展半径。“扩展”这一特性并不符合现实世界对投影的认知，因此在模拟真实世界投影效果的时候是用不到的，用得少自然知道的人就少。</p>\n<p>不过扩展半径在某些时候还是很有用的，扩展半径主要用在以下两个场景：一是轮廓模拟，二是实现单侧阴影。</p>\n<h3 id="轮廓模拟"><a href="#%E8%BD%AE%E5%BB%93%E6%A8%A1%E6%8B%9F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>轮廓模拟</h3>\n<p>理论上，按钮的轮廓可以借助第四个长度值，即扩展半径来实现，代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="33452787335648870000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.normal {\n   background-color: #fff;\n   /* 模拟轮廓 */\n   box-shadow: inset 0 0 0 1px #a2a9b6;\n}`, `33452787335648870000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.normal</span> <span class="token punctuation">{</span>\n   <span class="token property">background-color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>\n   <span class="token comment">/* 模拟轮廓 */</span>\n   <span class="token property">box-shadow</span><span class="token punctuation">:</span> inset 0 0 0 1px #a2a9b6<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>使用扩展半径模拟轮廓的代码量要比实现 4 个方向分别投影的代码量小很多。但是很遗憾，在有圆角的情况下，使用扩展半径的方法在 IE 浏览器中的渲染是有问题的，4 个圆角阴影会重叠，如图 4-28 所示，这不符合我们的预期。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-22-21-00-44-67651d52d6ec9ab6c8d7cdac7f1b0bf8-7c3d8.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 38.502202643171806%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAABkUlEQVQY041QTUsCYRjca9A/6E90iYIoMDp2sAyMoEO3qNCSymunDuGtwIigU106VKfAiKCQlDR1XfXV/EBzlzR3XTfNdd+Pp9fOHhqGYS4zz/AIgBBIEjw8QCIB8TgUi6AoEAxCqdTn8zOk03B/D4MgQKEAigyRCOTzkM1CtQqy3K/7qEC53K/j7U9PgPGgcChEu10KwAAoY9xQ+C8Eqmqdpt6zcM/sUUpN0wJq+h+NhZPm8lnTeaqtnKmO807wOmx5NrWtbd3t1j0e3eVq+/0CD/AkrxHFRCAQaBnf3G9cqMPu2uRhY/2yNeP7Gtozrg5vzPHRunNJ93rVxcXa2Ji2tiYQQrpdk6ssK+Vypf1j8uG7V9qItz7tU+eOtYmD+sj+9+3RnTk7VZt3qKurDbu9brM1d3YExliPn8aEMeC0MKEEfxosKZNE1YpWcFIh0icztDbkcxghnEr1FSGiKAIfibLvCOUaDbVQLEWjsZdQRBLFjBTLZZL5rJQSY+Lba0wUQ8l0WErH3wtG5wf+HvwLf7uWZJIX26QAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 22 21 00 44" title="" data-src="/static/2022-01-22-21-00-44-67651d52d6ec9ab6c8d7cdac7f1b0bf8-fee1c.png" data-srcset="/static/2022-01-22-21-00-44-67651d52d6ec9ab6c8d7cdac7f1b0bf8-a67b7.png 200w,\n/static/2022-01-22-21-00-44-67651d52d6ec9ab6c8d7cdac7f1b0bf8-0b187.png 400w,\n/static/2022-01-22-21-00-44-67651d52d6ec9ab6c8d7cdac7f1b0bf8-fee1c.png 800w,\n/static/2022-01-22-21-00-44-67651d52d6ec9ab6c8d7cdac7f1b0bf8-7c3d8.png 1135w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>因此，扩展半径多用来模拟大范围的色块效果，例如新手引导的蒙层效果：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="78753727061758480000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.guide {\n   box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.75);\n   border-radius: 50%;\n}`, `78753727061758480000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.guide</span> <span class="token punctuation">{</span>\n   <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 0 0 9999px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.75<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token property">border-radius</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>相比 outline 属性，使用 box-shadow 属性实现蒙层效果出现的 bug 要更少（Firefox 浏览器的 outline 轮廓有些小问题），同时还支持圆角，是最佳的实现方法，效果如图 4-29 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-22-21-03-32-e6b715653d7f35ed758671954d10c0ee-180cb.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 780px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 64.61538461538461%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAAC5UlEQVQoz2WP+0/SURjGv/+IbaYNEBG+XFVu3hCVi0MXJKZB2byVc5ZbF+1is1YOf9C0WF5QAZVQYJkKEjdDRQUDNOOiglqZ9QcoLetMa3Pr2ee8532fPe92DlQurcrK5bHy+Pzii9KqxhvN7S2yAZlc3zkw/UJp7laaOxXTMrnufpui4a5MUnmTX1QKwjlsvlAshYipTAqTX9fU1am09+p8ysnAsGlDDTCGlFMh0I+YNsGot0c1M6F+g69j0FZ7u4PC4KKxZKi2sbXPsKaz7yys7utsm5POyNTc1rRzy+yKGmzhee8X1+rXCceGL7Tv/vRt1BQEMb1jt0fvL6+8BTU+eK42RbSWzXn/3rgl9HZ2QzMTsCxtT89FjPORGVfUtryrt4Ydnl3L4rZqct21ujdu3VIZI5UNrRAtM49fUvtUPvnatK4xRwyzn8ErxqxRrWVr2BQ2OKITzp1xW3TMuq217Wgt0VHjx8fdb7jCKjyFCTGyOXHxyHNJMJnBKSypkV5/VH/vZVOb+kn3RHufubVr4mGH/s4zVX1zt+RaC09UTaIVJCLhM2dRpPQsiFVQiCGkw2Q6BiYjk2EAGktEJMP5PAG/SIhKIWJgChpLQqUQEGgcAo1NxpFxJFoKIY2WkQvl5PGQGCIGn4ohpGHgVCyRiiWmU5msTBYnGU+ByVSYTDsBT6EDTnqwTM9kQ4Lz4gxWAZsjyMrlcgVCehY7J58vEksY2fn5vGIciUpMZRD+A+xn5BRAkorqkrLLpeVXROJLkoqqC6XSMunVypq6PK5AVCqJS0AlJuESUFhA4iniEeCXNGhEo5X39PcPKgGvehWKQZVqeBSYg0r1wJBaMaQCzjHKf6iA2QfOiAaKxWJHQL+Ojn7/1dEpHcZih4egxH4eC1ygPzg4AGkwQkvLng9efyAY2v/+IxgMB0LhQCC4suLz+la9/rXZ93OzzgWbw+lZ8fr8a26P1znveme1L7ndi8ueP++zpEQoNNUtAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 22 21 03 32" title="" data-src="/static/2022-01-22-21-03-32-e6b715653d7f35ed758671954d10c0ee-180cb.png" data-srcset="/static/2022-01-22-21-03-32-e6b715653d7f35ed758671954d10c0ee-b84dc.png 200w,\n/static/2022-01-22-21-03-32-e6b715653d7f35ed758671954d10c0ee-8d9eb.png 400w,\n/static/2022-01-22-21-03-32-e6b715653d7f35ed758671954d10c0ee-180cb.png 780w" data-sizes="(max-width: 780px) 100vw, 780px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/mrno29?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<h3 id="单侧阴影"><a href="#%E5%8D%95%E4%BE%A7%E9%98%B4%E5%BD%B1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>单侧阴影</h3>\n<p>扩展半径还支持负值，可以用来实现单侧阴影效果。理论上，实现单侧阴影效果只要设置一侧阴影的偏移大小为 0 即可，但是，如果模糊半径设置得较大，就会看到有部分阴影显示在左右两侧了，并不是单侧阴影效果，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="352060045592339500"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`header {\n   width: 150px;\n   padding: 10px;\n   background-color: white;\n   box-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);\n}`, `352060045592339500`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">header</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>\n   <span class="token property">padding</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>\n   <span class="token property">background-color</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span>\n   <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 2px 5px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.5<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>效果如图 4-30 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-22-21-12-07-1a524a88300069f334bc59a21acd1f5a-381aa.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 34.33994823123383%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA/ElEQVQY032Q627DIAyF8/7PNU3KSNmqpWo1tWquTShgMLmoWm5zyTptf/bJgmPL5gBB27YWkQKtpTD/43sorHM0EaBzWkoQQjsnAbr2jvM0TdP9ou97mpLWgjFQ1wBwHyZljkcbRZAkypgwDBljnPO6rpdlmed5edDdbopzjGNzPoPWAblrOgnRpOk1yyohiqKoqirPcyGEf803pKVS6nQyZIvonRGpognEq1JlWdLk5XKhlXTxFypqa8lMe4JhGD49JKZpJGbPNE3rnUmu25qOj34i+HlVmmT7w4dUwN+2zyGLdwdK+euWbfhLxJ+oFPGQbd7j3TCO6xd8AYyGhKgARdLtAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 22 21 12 07" title="" data-src="/static/2022-01-22-21-12-07-1a524a88300069f334bc59a21acd1f5a-fee1c.png" data-srcset="/static/2022-01-22-21-12-07-1a524a88300069f334bc59a21acd1f5a-a67b7.png 200w,\n/static/2022-01-22-21-12-07-1a524a88300069f334bc59a21acd1f5a-0b187.png 400w,\n/static/2022-01-22-21-12-07-1a524a88300069f334bc59a21acd1f5a-fee1c.png 800w,\n/static/2022-01-22-21-12-07-1a524a88300069f334bc59a21acd1f5a-381aa.png 1159w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>此时可以设置扩展半径为负值，让阴影只在一侧显示，相关代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="43039677104763900000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`header {\n   box-shadow: 0 7px 5px -5px rgba(0, 0, 0, 0.5);\n}`, `43039677104763900000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">header</span> <span class="token punctuation">{</span>\n   <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 7px 5px -5px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.5<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>效果如图 4-31 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-22-21-16-08-645340ca46e72466b3e3449e8460beab-1dace.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 770px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 37.14285714285714%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsSAAALEgHS3X78AAAAvUlEQVQY052PYQuCMBCG/f8/bDZFs00rqSQwtylObQaKmnXM/FD6qYfBju197jjjpen7vppRSj00UFQLyrKE8GQZ09V1XVEUUkqlieM4SRJ4GcfxqYGiaRqpgfC6XNc155wQEoYhtAANvmDUMAwgT5kVWc6AnKapEIIxdpuBRlmWgZzn+Yq8XO/+zc/OsMhH/g8DbawounIm2rY9nS/YdmhwoP7eD46EBsi0XI+62x22XYQwthyP+Ca2IQDnDU1UilHXGIBIAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 22 21 16 08" title="" data-src="/static/2022-01-22-21-16-08-645340ca46e72466b3e3449e8460beab-1dace.png" data-srcset="/static/2022-01-22-21-16-08-645340ca46e72466b3e3449e8460beab-f7e89.png 200w,\n/static/2022-01-22-21-16-08-645340ca46e72466b3e3449e8460beab-20ec6.png 400w,\n/static/2022-01-22-21-16-08-645340ca46e72466b3e3449e8460beab-1dace.png 770w" data-sizes="(max-width: 770px) 100vw, 770px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h2 id="多阴影特性与图形绘制"><a href="#%E5%A4%9A%E9%98%B4%E5%BD%B1%E7%89%B9%E6%80%A7%E4%B8%8E%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>多阴影特性与图形绘制</h2>\n<p>box-shadow 属性支持无限多个阴影效果不断累加，因此理论上 box-shadow 属性可以实现任意图形效果，我们只需要设置 1px×1px 的元素，然后不断投影。当然，我们在实际开发中不会这么使用，因为没必要，性能也很糟糕。但是，box-shadow 属性的多阴影特性确实让 box-shadow 属性在图形绘制领域大放光彩。</p>\n<h3 id="多边框和渐变边框效果"><a href="#%E5%A4%9A%E8%BE%B9%E6%A1%86%E5%92%8C%E6%B8%90%E5%8F%98%E8%BE%B9%E6%A1%86%E6%95%88%E6%9E%9C" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>多边框和渐变边框效果</h3>\n<p>我们可以使用 box-shadow 属性模拟多边框效果，该属性也支持圆角效果，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="50779593432851500000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.multi-border {\n   height: 100px;\n   border-radius: 10px;\n   background-color: deepskyblue;\n   box-shadow: 0 0 0 4px #fff, 0 0 0 8px deeppink, 0 0 0 12px yellow, 0 0 0 16px purple;\n}`, `50779593432851500000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.multi-border</span> <span class="token punctuation">{</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>\n   <span class="token property">border-radius</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>\n   <span class="token property">background-color</span><span class="token punctuation">:</span> deepskyblue<span class="token punctuation">;</span>\n   <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 0 0 4px #fff<span class="token punctuation">,</span> 0 0 0 8px deeppink<span class="token punctuation">,</span> 0 0 0 12px yellow<span class="token punctuation">,</span> 0 0 0 16px purple<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>效果如图 4-32 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-22-21-21-50-f04bb8012b844704d03738b38fcf5d89-7bb57.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 52.81437125748503%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABZUlEQVQoz5WR3UvCUBjGj3ZV9E9F1G0QkXTXbX9GZKFpobIgEIoio6iLIsKo6dzmps0JIVP70iWaKSI5Nz/AeU7nGF0v4cfDe97zPufh5YDSxaXqdBbcnoJr+1+4Peqms3x7BxECKcqzIPdnE635pDZnBZ6ZedRWEpqyu6EVyuDq7BRICNAmiCJLbFgj5qSIxONgS8qCm9CJTUL2iGlnkCUTDH5iOI3NB/stOY/NIZIcMQG+sMI2Mk9h8yE250iyffxk4Tf5+jw03s60SZKPgt94Z3lna1VsLImfDrG6bAWeWUx+rTEVxbXeLlVBJRyuB7w1KlDfw/hrlK9G+f/wjTp+rARSjMYob5XlyT9DiLpdgq7Ddhv2+wiDj70eKXQDGQY0DNTpkCZWQ0dGBw0hHAwG4O31vagWm80Gw7F8nM+/PKsfaibzpORySjZ7/0BzQpwXBJbnUuk0y7HRWIxmGCkl80LiB3wJw+hmk6arAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 22 21 21 50" title="" data-src="/static/2022-01-22-21-21-50-f04bb8012b844704d03738b38fcf5d89-fee1c.png" data-srcset="/static/2022-01-22-21-21-50-f04bb8012b844704d03738b38fcf5d89-a67b7.png 200w,\n/static/2022-01-22-21-21-50-f04bb8012b844704d03738b38fcf5d89-0b187.png 400w,\n/static/2022-01-22-21-21-50-f04bb8012b844704d03738b38fcf5d89-fee1c.png 800w,\n/static/2022-01-22-21-21-50-f04bb8012b844704d03738b38fcf5d89-7bb57.png 835w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>如果我们多边框的过渡颜色足够细腻，我们还可以使用 box-shadow 属性实现由内往外但并不是径向渐变的渐变效果，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="10346888324721725000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.gradient-border {\n   height: 100px;\n   border-radius: 10px;\n   background-color: deepskyblue;\n   box-shadow: 0 0 0 1px #07b9fb, 0 0 0 2px #17aef4, 0 0 0 3px #27a4ee, 0 0 0 4px #3799e7, 0 0 0 5px #478ee0, 0 0 0 6px\n         #5784d9, 0 0 0 7px #6779d3, 0 0 0 8px #776ecc, 0 0 0 9px #8764c5, 0 0 0 10px #9759be, 0 0 0 11px #a74eb8, 0 0 0\n         12px #b744b1, 0 0 0 13px #c739aa, 0 0 0 14px #d72ea3, 0 0 0 15px #e7249d, 0 0 0 16px #f71996;\n}`, `10346888324721725000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.gradient-border</span> <span class="token punctuation">{</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>\n   <span class="token property">border-radius</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>\n   <span class="token property">background-color</span><span class="token punctuation">:</span> deepskyblue<span class="token punctuation">;</span>\n   <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 0 0 1px #07b9fb<span class="token punctuation">,</span> 0 0 0 2px #17aef4<span class="token punctuation">,</span> 0 0 0 3px #27a4ee<span class="token punctuation">,</span> 0 0 0 4px #3799e7<span class="token punctuation">,</span> 0 0 0 5px #478ee0<span class="token punctuation">,</span> 0 0 0 6px\n         #5784d9<span class="token punctuation">,</span> 0 0 0 7px #6779d3<span class="token punctuation">,</span> 0 0 0 8px #776ecc<span class="token punctuation">,</span> 0 0 0 9px #8764c5<span class="token punctuation">,</span> 0 0 0 10px #9759be<span class="token punctuation">,</span> 0 0 0 11px #a74eb8<span class="token punctuation">,</span> 0 0 0\n         12px #b744b1<span class="token punctuation">,</span> 0 0 0 13px #c739aa<span class="token punctuation">,</span> 0 0 0 14px #d72ea3<span class="token punctuation">,</span> 0 0 0 15px #e7249d<span class="token punctuation">,</span> 0 0 0 16px #f71996<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>效果如图 4-33 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-22-21-29-16-67df68f6993b2f54d8e9dbb881aa41f5-d9352.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 50.97813578826237%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABI0lEQVQoz51RTU+DQBDd1vTf6sUe8IBQtUD1oMYf4cV48aiHYmJCRaBQCxWtJcGWD7UlWmm92HFYY2JPECdvN7OT9zIvbwkAjM68o9VWo6rtrd/kYreqHa61/NM+Cgm8fx4wOjn/Kl0CkfOR0S4WDcaAyYzgETgLpytNKBUA0pDMbnchnGZiadMiTSjjtAB+aNzWLUQoTv4j5lEc080i30EnFWopFxVqm9uxqe23+T5jYGBludhmOQtM3DBgjIEBeCd9iTV5yanV7ZqwjPqfhva86Ais+XB8T78KawHwMoNgClFK8ZHdcfr7XB6GKbzOgRZRVd33h1GSDJ9jWVUdbxBMxo+jJ9f3B2FwZeh6zzHuekq7rdu26bqKaSqmZXW616r2DZMpm8V4zXGVAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 22 21 29 16" title="" data-src="/static/2022-01-22-21-29-16-67df68f6993b2f54d8e9dbb881aa41f5-fee1c.png" data-srcset="/static/2022-01-22-21-29-16-67df68f6993b2f54d8e9dbb881aa41f5-a67b7.png 200w,\n/static/2022-01-22-21-29-16-67df68f6993b2f54d8e9dbb881aa41f5-0b187.png 400w,\n/static/2022-01-22-21-29-16-67df68f6993b2f54d8e9dbb881aa41f5-fee1c.png 800w,\n/static/2022-01-22-21-29-16-67df68f6993b2f54d8e9dbb881aa41f5-d9352.png 869w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h3 id="加载效果"><a href="#%E5%8A%A0%E8%BD%BD%E6%95%88%E6%9E%9C" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>加载效果</h3>\n<p>box-shadow 属性可以实现多种 CSS 加载效果，例如下面这个经典的旋转加载效果：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="19878442821204435000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.loading {\n   width: 4px;\n   height: 4px;\n   border-radius: 100%;\n   color: rgba(0, 0, 0, 0.4);\n   box-shadow: 0 -10px rgba(0, 0, 0, 0.9), 10px 0px, 0 10px, -10px 0 rgba(0, 0, 0, 0.7), -7px -7px rgba(0, 0, 0, 0.8), 7px -7px\n         rgba(0, 0, 0, 1), 7px 7px, -7px 7px;\n   animation: spin 1s steps(8) infinite;\n}\n\n@keyframes spin {\n   0% {\n      transform: rotate(0deg);\n   }\n\n   100% {\n      transform: rotate (360deg);\n   }\n}`, `19878442821204435000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.loading</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 4px<span class="token punctuation">;</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 4px<span class="token punctuation">;</span>\n   <span class="token property">border-radius</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>\n   <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.4<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 -10px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.9<span class="token punctuation">)</span><span class="token punctuation">,</span> 10px 0px<span class="token punctuation">,</span> 0 10px<span class="token punctuation">,</span> -10px 0 <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.7<span class="token punctuation">)</span><span class="token punctuation">,</span> -7px -7px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.8<span class="token punctuation">)</span><span class="token punctuation">,</span> 7px -7px\n         <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 1<span class="token punctuation">)</span><span class="token punctuation">,</span> 7px 7px<span class="token punctuation">,</span> -7px 7px<span class="token punctuation">;</span>\n   <span class="token property">animation</span><span class="token punctuation">:</span> spin 1s <span class="token function">steps</span><span class="token punctuation">(</span>8<span class="token punctuation">)</span> infinite<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token atrule"><span class="token rule">@keyframes</span> spin</span> <span class="token punctuation">{</span>\n   <span class="token selector">0%</span> <span class="token punctuation">{</span>\n      <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>0deg<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">100%</span> <span class="token punctuation">{</span>\n      <span class="token property">transform</span><span class="token punctuation">:</span> rotate <span class="token punctuation">(</span>360deg<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>效果如图 4-34 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-22-21-38-34-7b82468e9ca34fa21fd7c19b0afa98c1-115a3.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 37.952559300873915%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA20lEQVQY05VP226CQBTk/3+B7yBRqkuoijVCwFCi0JaEVIQAb8Dustw6vjSaqK3zcDJzsrMzRxqvMQwDZpqmruvKspxlGWNsvAPpptk0TcMwuq6Loqgoit/9H2aAUqooCpzgbdv6vt/3/RPJ6BwEAUiSJHmeP1c7jmMEhmEIc1mW/zVf/oPO40NIQohGCATWuJUySFzbNNiJtutBqqrmZ90wzik7A8+gMaWPz6/9weeML1brF6JZlvN9PHne3rF3797hbWOqM2KsN/piOddepyrR9OVEJVvLnhH9B/Ikx+N31ynuAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 22 21 38 34" title="" data-src="/static/2022-01-22-21-38-34-7b82468e9ca34fa21fd7c19b0afa98c1-fee1c.png" data-srcset="/static/2022-01-22-21-38-34-7b82468e9ca34fa21fd7c19b0afa98c1-a67b7.png 200w,\n/static/2022-01-22-21-38-34-7b82468e9ca34fa21fd7c19b0afa98c1-0b187.png 400w,\n/static/2022-01-22-21-38-34-7b82468e9ca34fa21fd7c19b0afa98c1-fee1c.png 800w,\n/static/2022-01-22-21-38-34-7b82468e9ca34fa21fd7c19b0afa98c1-115a3.png 801w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h3 id="云朵效果"><a href="#%E4%BA%91%E6%9C%B5%E6%95%88%E6%9E%9C" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>云朵效果</h3>\n<p>使用 box-shadow 属性实现云朵效果的代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="4759742021216317000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.cloud {\n   width: 60px;\n   height: 50px;\n   color: white;\n   background-color: currentcolor;\n   border-radius: 50%;\n   box-shadow: 100px 0px 0 -10px, 40px 0px, 70px 15px, 30px 20px 0 -10px, 70px -15px, 30px -30px;\n}`, `4759742021216317000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.cloud</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 60px<span class="token punctuation">;</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>\n   <span class="token property">color</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span>\n   <span class="token property">background-color</span><span class="token punctuation">:</span> currentcolor<span class="token punctuation">;</span>\n   <span class="token property">border-radius</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>\n   <span class="token property">box-shadow</span><span class="token punctuation">:</span> 100px 0px 0 -10px<span class="token punctuation">,</span> 40px 0px<span class="token punctuation">,</span> 70px 15px<span class="token punctuation">,</span> 30px 20px 0 -10px<span class="token punctuation">,</span> 70px -15px<span class="token punctuation">,</span> 30px -30px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>效果如图 4-35 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-22-21-44-49-7a0b6846e00f745a6d253c0e78327980-fee1c.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 55.375%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABiElEQVQoz4WQTUsCURSGr6HWKmgTQZu+aN8faFnUIuhL+gdlyxaB1rZVQdto1aq/UH5MM36kFqKpY6noZIZFJC0igmpm3u65OolQdHnncO8573PuPcMAbGvoi2A0gaF4WwPnGIxhJIHhzvxYAr0R7NY4B8a/tSKYH3YZ7MySRKb+KFhASGqXHNzmg7diwe4iORwKbDK6ZGq0U6XawwfcJUym0KOAiRI3OBUyeLVO2G45VvJ4+aKaCRgmbfbvyUB9ZbrjF7g7RHFTvOfTJNI0CRY4jh6J/AfeKFNWbxLW4qeD+h/wegksCGcINoUeP5eFp4LSO9Q3vOpk2qu15upSyMb3Wz/w6g3YCewStSCdCol/Pp7ARFIkA62qQyKzp2zBh3VMZ+DKY0klLatwqZjPYSGH2SxmMlhU2+K2qQyOnwRs6LoYSsjQSe1Jm8uAadCRIiiaumlwTmf+gFyuaNrt3XOjISnhcCRWKJW1ai2dzqj5gnpd8PmlcDTOFY1dpK9yPPqC8mUyxTPfBvv07QugxyIAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 22 21 44 49" title="" data-src="/static/2022-01-22-21-44-49-7a0b6846e00f745a6d253c0e78327980-fee1c.png" data-srcset="/static/2022-01-22-21-44-49-7a0b6846e00f745a6d253c0e78327980-a67b7.png 200w,\n/static/2022-01-22-21-44-49-7a0b6846e00f745a6d253c0e78327980-0b187.png 400w,\n/static/2022-01-22-21-44-49-7a0b6846e00f745a6d253c0e78327980-fee1c.png 800w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>实现原理很简单，就是使用 box-shadow 属性克隆多个圆，然后让圆不断交错重叠。</p>\n<h3 id="3d-投影效果"><a href="#3d-%E6%8A%95%E5%BD%B1%E6%95%88%E6%9E%9C" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3D 投影效果</h3>\n<p>给按钮设置一个 3D 投影效果，按下按钮的时候按钮的位置发生偏移，同时投影高度降低，这可以实现非常有立体感的按钮效果，代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="74708318064487900000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.shadow-3d-button {\n   width: 100px;\n   height: 36px;\n   border: 1px solid #a0b3d6;\n   background-color: #f0f3f9;\n   box-shadow: 1px 1px #afc4ea, 2px 2px #afc4ea, 3px 3px #afc4ea;\n}\n\n.shadow-3d-button:active {\n   transform: translate(1px, 1px);\n   box-shadow: 1px 1px #afc4ea, 2px 2px #afc4ea;\n}`, `74708318064487900000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.shadow-3d-button</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 36px<span class="token punctuation">;</span>\n   <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #a0b3d6<span class="token punctuation">;</span>\n   <span class="token property">background-color</span><span class="token punctuation">:</span> #f0f3f9<span class="token punctuation">;</span>\n   <span class="token property">box-shadow</span><span class="token punctuation">:</span> 1px 1px #afc4ea<span class="token punctuation">,</span> 2px 2px #afc4ea<span class="token punctuation">,</span> 3px 3px #afc4ea<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.shadow-3d-button:active</span> <span class="token punctuation">{</span>\n   <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate</span><span class="token punctuation">(</span>1px<span class="token punctuation">,</span> 1px<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token property">box-shadow</span><span class="token punctuation">:</span> 1px 1px #afc4ea<span class="token punctuation">,</span> 2px 2px #afc4ea<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>效果如图 4-36 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-22-21-50-48-9c5375e4e972b2fae5cfa49818978dcc-7f274.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 35.344827586206904%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsSAAALEgHS3X78AAABU0lEQVQoz3WQ0W7aQBBF+f/viPqWSrz0uRIFEqdpUhq7LXEokBAMi/F6vfbagDkdE4gSVR3pakazu2fuTguJ/X7fJFRS8LjIiFY586OUrg6K0y3LtWOu7KG/iHNGM8PzquDEaNR6C1ynTh6WGFuR2g3aOMKHKb/DCbcDn/HTkqzYobMSW2xkeM7wMfs/MBagShyJKUmyDUqltD+2OW9/4uzsA9d+iClqYu1kYMU0soQz+x54Kk4OtXmZ3sjYkvlcsVxpptNnIqWlvyXLK1y5ZaZy7p+yf4H1ERjFBTfDNT8eEgbhi+5GRpQSTCz+HyNn+iB/pPGC+NVh/fbLp6iFa12NDD/IbY652osrcSburOyw2WNzz7odu5p30er3PYLgF9FiyfA+pNPt4fsB4/GEQLIf/OTy0qPbu+DbzS1XV1/5Prij86WLJ3XvwuNzp6mvpdfnL4DZD0ZGTVeuAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 22 21 50 48" title="" data-src="/static/2022-01-22-21-50-48-9c5375e4e972b2fae5cfa49818978dcc-fee1c.png" data-srcset="/static/2022-01-22-21-50-48-9c5375e4e972b2fae5cfa49818978dcc-a67b7.png 200w,\n/static/2022-01-22-21-50-48-9c5375e4e972b2fae5cfa49818978dcc-0b187.png 400w,\n/static/2022-01-22-21-50-48-9c5375e4e972b2fae5cfa49818978dcc-fee1c.png 800w,\n/static/2022-01-22-21-50-48-9c5375e4e972b2fae5cfa49818978dcc-7f274.png 928w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/e3j333?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<h2 id="box-shadow-动画与性能优化"><a href="#box-shadow-%E5%8A%A8%E7%94%BB%E4%B8%8E%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>box-shadow 动画与性能优化</h2>\n<p>在日常开发中，对 box-shadow 属性的使用没有什么限制，不用担心相对较大的性能开销。个别元素应用 box-shadow 动画也没问题，毕竟抛开数量谈性能是没有意义的。但是，如果页面本身比较复杂，应用渐变、半透明、盒阴影、滤镜等特性的元素很多，则此时 box-shadow 动画所带来的性能开销就会很大，实现的动画效果帧率不足 60f/s，GPU 加速疯狂运转，手机电量迅速减少。这时可以使用一些小技巧优化一下。</p>\n<p>例如，有一个盒阴影过渡效果：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="62440986181221070000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.normal {\n   transition: all 0.5s;\n   box-shadow: 0 8px 12px rgba(0, 0, 0, 0.5);\n}\n\n.normal:hover {\n   box-shadow: 0 16px 24px rgba(0, 0, 0, 0.7);\n}`, `62440986181221070000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.normal</span> <span class="token punctuation">{</span>\n   <span class="token property">transition</span><span class="token punctuation">:</span> all 0.5s<span class="token punctuation">;</span>\n   <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 8px 12px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.5<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.normal:hover</span> <span class="token punctuation">{</span>\n   <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 16px 24px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.7<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>在鼠标经过盒的时候会伴随大量的样式重计算和 GPU 加速，此时，我们可以使用伪元素创建盒阴影，然后在鼠标经过盒的时候改变盒阴影的透明度，以此进行优化，代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="19923909775513616000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.optimize::before,\n.optimize::after {\n   content: \'\';\n   transition: opacity 0.6s;\n}\n\n.optimize::before {\n   box-shadow: 0 8px 12px rgba(0, 0, 0, 0.5);\n}\n\n.optimize::after {\n   opacity: 0;\n   box-shadow: 0 16px 24px rgba(0, 0, 0, 0.7);\n}\n\n.optimize:hover::before {\n   opacity: 0;\n}\n\n.optimize:hover::after {\n   opacity: 1;\n}`, `19923909775513616000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.optimize::before,\n.optimize::after</span> <span class="token punctuation">{</span>\n   <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">\'\'</span><span class="token punctuation">;</span>\n   <span class="token property">transition</span><span class="token punctuation">:</span> opacity 0.6s<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.optimize::before</span> <span class="token punctuation">{</span>\n   <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 8px 12px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.5<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.optimize::after</span> <span class="token punctuation">{</span>\n   <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n   <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 16px 24px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.7<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.optimize:hover::before</span> <span class="token punctuation">{</span>\n   <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.optimize:hover::after</span> <span class="token punctuation">{</span>\n   <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>图 4-37 所示是优化前后的一些性能指标，从左往右共 4 段动画区间，分别代表正常实现鼠标经过、正常实现鼠标移开、优化实现鼠标经过和优化实现鼠标移开触发的 transition 过渡效果，可以看到正常实现的盒阴影动画的样式重计算和 GPU 开销明显更大（左方块内的栅格数量更多）。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-22-21-58-03-e80491a2393850e14a704e94f013a90c-11cd2.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.467419635099915%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAACHklEQVQozx2SSW7cMBBF+/67HMDLHCFANgaMbAI4MQzbceTulq1WS+KkgaMocU7FBS6KH3z8xSoeCkTOxm6TWlvEzh/tFbNRbe89OTftZaBMrk2HQL8MhHLz0Q6Qd2Sa5Hr4hMu6WbtbITmhWCgRc1jEgjHicvHRTctIKFr47Pw+ThRTpLR0wR3ANqe0ud0FL5XAeJCK5xKlFggNXCypxGUZMRkADsmPE0N40EaGFD6dS9ndvlo7cdEjrFcDCpey68FZ5ZLZNIPOlQw5YEoRIWazcNGhaJ2VnugMlc3Vealqe7m6oefHmr/VfiB53/VHq86XMOCIiTw3a93GafYBnBGK135AlJIeVceWUvAxxvUEd4yRpiHHary02roFWqJMT9kilAaDDeDgs1Qz15wxecWTcsa6mIte/aycJOOOsaaTi9DUuPkklLMu6a6Dvh6KMaVpvDFj3031kRvh4wZvXne1RuP4mBkNfAIlpRBTSClC/v3u5ubuy6Hse2bMSgHw3HzIbYs55VJs2H0pQYpIsOcLKC6FkGPMec/+9sfX25dvh7JtZWSr4sGuW/eu5n6bSNFmm4mGHLVFcE96KDDJJSmRJM+SF8pKyofPCne77955x4WfF8tGWHIYZI80fDAIQmU/iK4HUcMsEbJCAPgfvrbX06nWWsMwL91Qneq3unl8/vP0Wr28Vve/H+4fn55fq5+/Hh5hf67/ns5wEsB/aEydLRmx9j0AAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 22 21 58 03" title="" data-src="/static/2022-01-22-21-58-03-e80491a2393850e14a704e94f013a90c-fee1c.png" data-srcset="/static/2022-01-22-21-58-03-e80491a2393850e14a704e94f013a90c-a67b7.png 200w,\n/static/2022-01-22-21-58-03-e80491a2393850e14a704e94f013a90c-0b187.png 400w,\n/static/2022-01-22-21-58-03-e80491a2393850e14a704e94f013a90c-fee1c.png 800w,\n/static/2022-01-22-21-58-03-e80491a2393850e14a704e94f013a90c-11cd2.png 1151w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/klb7hc?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<h1 id="css-2d-变换"><a href="#css-2d-%E5%8F%98%E6%8D%A2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>CSS 2D 变换</h1>\n<p>本节主要介绍 2D 变换，3D 变换会在之后详细讲解。</p>\n<p>首先说一下私有前缀，现在已经不是 10 年前了，没有任何理由需要给 transform 属性添加 -moz- 和 -o- 私有前缀。如果是需要兼容 IE 浏览器的传统 Web 产品，则需要加上 -ms- 私有前缀，但不需要加上 -webkit- 私有前缀，示例如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="46625005523959824000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.pc {\n   -ms-transform: none;\n   transform: none;\n}`, `46625005523959824000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.pc</span> <span class="token punctuation">{</span>\n   <span class="token property">-ms-transform</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>\n   <span class="token property">transform</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>如果是移动端项目，考虑到还有不到 4% 的 Android 4.4 操作系统用户，因此还需要加 -webkit- 私有前缀，但不需要加 -ms- 私有前缀。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="55135390224753934000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.mobile {\n   -webkit-transform: none;\n   transform: none;\n}`, `55135390224753934000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.mobile</span> <span class="token punctuation">{</span>\n   <span class="token property">-webkit-transform</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>\n   <span class="token property">transform</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>transform 属性相关特性和细节非常多，想要理解本节内容需要反复阅读。</p>\n<h2 id="从基本的变换方法说起"><a href="#%E4%BB%8E%E5%9F%BA%E6%9C%AC%E7%9A%84%E5%8F%98%E6%8D%A2%E6%96%B9%E6%B3%95%E8%AF%B4%E8%B5%B7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>从基本的变换方法说起</h2>\n<p>2D 变换常用的变换方法包括位移、旋转、缩放和斜切，示例如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="55545801061390090000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 位移 */\ntransform: translate(0, 0);\n/* 旋转 */\ntransform: rotate(0deg);\n/* 缩放 */\ntransform: scale(1);\n/* 斜切 */\ntransform: skew(0deg);`, `55545801061390090000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 位移 */</span>\n<span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">/* 旋转 */</span>\n<span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>0deg<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">/* 缩放 */</span>\n<span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>1<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">/* 斜切 */</span>\n<span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">skew</span><span class="token punctuation">(</span>0deg<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>我们先逐个快速了解一下各个变换方法的基本特性。</p>\n<h3 id="translate-位移"><a href="#translate-%E4%BD%8D%E7%A7%BB" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>translate() 位移</h3>\n<p>以自身坐标为基准，进行水平方向或垂直方向的位移，语法如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="58621152197654820000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 往右偏移 10px，往下偏移 20px */\ntransform: translate(10px, 20px);\n/* 往右偏移 10px */\ntransform: translateX(10px);\n/* 往下偏移 20px */\ntransform: translateY(20px);`, `58621152197654820000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 往右偏移 10px，往下偏移 20px */</span>\n<span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate</span><span class="token punctuation">(</span>10px<span class="token punctuation">,</span> 20px<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">/* 往右偏移 10px */</span>\n<span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>10px<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">/* 往下偏移 20px */</span>\n<span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateY</span><span class="token punctuation">(</span>20px<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>其中，translate() 函数中的第二个值可以省略，省略后表示垂直方向的偏移大小是 0。因此，translate(10px) 等同于 translate(10px, 0)，也等同于 translateX(10px)。大家千万不要被 scale() 函数的语法给误导，translate(10px) 不是 translate(10px, 10px) 的简写。</p>\n<p>位移的方向和文档流的顺序没有任何关系，也就是即使祖先元素设置 direction: rtl，translateX(10px) 依然表示往右偏移。</p>\n<p>位移变换最不可替代的特性就是设定百分比偏移值，因为 CSS 世界中就没有几个属性的百分比值是相对于自身尺寸计算的，示例如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="60014244329897590000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 往左偏移自身宽度的一半，往上偏移自身高度的一半 */\ntransform: translate(-50%, -50%);`, `60014244329897590000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 往左偏移自身宽度的一半，往上偏移自身高度的一半 */</span>\n<span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate</span><span class="token punctuation">(</span>-50%<span class="token punctuation">,</span> -50%<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>百分比值相对于自身计算的这个特性非常适合用来实现高宽不固定元素的水平垂直居中效果，例如，弹框元素想要居中定位，可以使用下面的 CSS 语句：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="85196695992967330000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.dialog {\n   position: absolute;\n   left: 50%;\n   top: 50%;\n   transform: translate(-50%, -50%);\n}`, `85196695992967330000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.dialog</span> <span class="token punctuation">{</span>\n   <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n   <span class="token property">left</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>\n   <span class="token property">top</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>\n   <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate</span><span class="token punctuation">(</span>-50%<span class="token punctuation">,</span> -50%<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>然而对于绝对定位元素，如果可以，请尽量避免使用 transform 属性进行位置偏移，应改用 margin 属性进行偏移定位，这样就可以把 transform 属性预留出来，方便实现各种 animation 动画效果。例如，我们希望元素出现的时候有一个缩放动画效果，但是如果偏移是使用 transform 属性实现的，那么这个动画执行的时候元素的定位就会出现问题。</p>\n<h3 id="rotate-旋转"><a href="#rotate-%E6%97%8B%E8%BD%AC" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>rotate() 旋转</h3>\n<p>例如，将图片旋转 45 度：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="36160190317848916000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`img {\n   transform: rotate(45deg);\n}`, `36160190317848916000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">img</span> <span class="token punctuation">{</span>\n   <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>45deg<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>效果如图 4-38 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-23-17-39-41-83d4f62cdcc1d4f1fa5a4fb82fc232be-e269b.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 634px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 68.61198738170347%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsSAAALEgHS3X78AAACAElEQVQoz2P4jwn+/QMSf368u71/8o9vn8EC//5jAwxYdf7/++POxqSlmSy7Z6b9//cLIY5P87+/IPzr+8NNCUcbBXY2KZ/pEXq+O/Xv7x///v399/cPHs0gs//++XVxXcKRbv4L04E6FW5PU7nRK3hvdeqf3z+Bjv/39y9WzWBX/ftzc0v04WbBC70qd6Yr3p6jeHem4vk25fWZ/I82pP358xvN/UiawYIPN1Rd0xM9q6K0XVHudLT8k3lK+7Llcxxkokw41zUl/frxDTn8UJwNEb2zvGlTrNB0X4Uyfeld0XLbguXabaTFRSUClRkObpwP9tofrAEG1Pz315//r042ns8XDZORzjGSOhEp32Enx8/GXlSQDwkzrDbD9AOD5d//Vztql8fyualKp9nJGEuwZKZlgkRR45wBayIBaf/3/+Puujmh/CoSbHn52X/+gkXRQvsf1KdQI2EkNFYfrSnf2pH1/Tco+v/8+fMPBiAqGf7jBX9+/4IGD9YU9vLV67dv3337/v3du/dAw4Dcd+/fA9lAxosXLz+8f/fs+fNPnz5/+Pjx5ctXb96+ffP23dNnzz9+/PTq9RuGLdt27j945NHjp8dPnv79+8/mrTsOHTm278Ch7Tv37N138Oz5i2vXbz5z9vzhoye2bt+9/+DhHbv3rl678ey5C5u27AAA3pzFgwD3GnwAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 23 17 39 41" title="" data-src="/static/2022-01-23-17-39-41-83d4f62cdcc1d4f1fa5a4fb82fc232be-e269b.png" data-srcset="/static/2022-01-23-17-39-41-83d4f62cdcc1d4f1fa5a4fb82fc232be-3a8bb.png 200w,\n/static/2022-01-23-17-39-41-83d4f62cdcc1d4f1fa5a4fb82fc232be-a4958.png 400w,\n/static/2022-01-23-17-39-41-83d4f62cdcc1d4f1fa5a4fb82fc232be-e269b.png 634w" data-sizes="(max-width: 634px) 100vw, 634px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>由此可见，正值是顺时针旋转。</p>\n<p>这里顺便详细介绍一下角度单位，CSS 中的角度单位包括下表所示的 4 个单位。</p>\n<table>\n<thead>\n<tr>\n<th align="left">单位</th>\n<th align="left">含义</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align="left">deg</td>\n<td align="left">degrees，表示角度</td>\n</tr>\n<tr>\n<td align="left">grad</td>\n<td align="left">grads，表示百分度</td>\n</tr>\n<tr>\n<td align="left">rad</td>\n<td align="left">radians，表示弧度</td>\n</tr>\n<tr>\n<td align="left">turn</td>\n<td align="left">turns，表示圈数</td>\n</tr>\n</tbody>\n</table>\n<p>下面分别介绍一下这 4 个单位。</p>\n<ul>\n<li>\n<p>角度（deg）：角度范围为 0 ～ 360 度，角度为负值可以理解为逆时针旋转。例如，−45deg 可以理解为逆时针旋转 45 度。</p>\n</li>\n<li>\n<p>百分度（grad）：一个梯度，或者说一个百分度表示 1/400 个整圆。因此 100grad 相当于 90deg，它和 deg 单位一样支持负值，负值可以理解为逆时针方向旋转。</p>\n</li>\n<li>\n<p>弧度（rad）：1 弧度等于 180/π 度，或者大致等于 57.3 度。1.5708rad 相当于 100grad 或是 90deg，如图 4-39 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-23-17-43-25-32d0b1fbe11a1295fa7a94212f56d33d-e31b0.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 709px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 63.18758815232722%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAABXElEQVQoz4WR6WrCQBSF8/7vIYWgqZpYwWAJgZiVtin9k2haNIorZnOZBBN76oDU/RCGy8x859y5YfYXKooC62Aw0DSNEFIctL8m5nIrDMPlcmnbdqlU0nXdNM3dbvcApvYgJ5MJTZZleTwedzodVVWPF24mI2E6neZ5TmFJkrrdLgrAcLnkmbOGh8Mh3gkX13V5nnccR1EUURTb7fYDGLFgFovFfD73PK/VahmGYVkWSEEQ4jg+40/gNE2B0Xq9XmNsx3qz2dxLpgeAgyBAkSQJNQI5Go0wiAcDoxZoHjyaBwMLrFmWXf9VxanoqNGk7/s9zwNMM/PD0f9rWJn9DR2N7oghW4KcLSFpmoVhFIRRslrhi2OkrqAAW/FfhVPs4AkYXxRFaZYxmma+f3z+9P3ZbFatCVW++SrJbKVa5ur1xoumW2yZazTFCld7YjlZUW37y7De2PJz77v/C1xg3nWQySq5AAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 23 17 43 25" title="" data-src="/static/2022-01-23-17-43-25-32d0b1fbe11a1295fa7a94212f56d33d-e31b0.png" data-srcset="/static/2022-01-23-17-43-25-32d0b1fbe11a1295fa7a94212f56d33d-ae213.png 200w,\n/static/2022-01-23-17-43-25-32d0b1fbe11a1295fa7a94212f56d33d-0d4a3.png 400w,\n/static/2022-01-23-17-43-25-32d0b1fbe11a1295fa7a94212f56d33d-e31b0.png 709w" data-sizes="(max-width: 709px) 100vw, 709px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n<li>\n<p>圈数（turn）：这个很好理解，1 圈表示 360 度，平时体操或跳水中出现的“后空翻 720 度”，也就是后空翻两圈的意思。于是有等式 1turn=360deg、2turn=720deg 等。</p>\n</li>\n</ul>\n<p>下面的 CSS 代码均表示顺时针旋转 45 度：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="11837293062977073000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`transform: rotate(45deg);\ntransform: rotate(50gard);\ntransform: rotate(0.7854rad);\ntransform: rotate(0.25turn);`, `11837293062977073000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>45deg<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>50gard<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>0.7854rad<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>0.25turn<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>在实际开发的时候，我们只需要使用 deg 单位就好了，没必要“炫技”使用其他角度单位。那么什么时候使用 grad 或者 rad 这些 CSS 单位呢？这些单位一般用在动态计算的场景（例如 JavaScript 计算运动轨迹或者根据坐标计算角度的时候，使用弧度更方便）。</p>\n<h3 id="scale-缩放"><a href="#scale-%E7%BC%A9%E6%94%BE" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>scale() 缩放</h3>\n<p>缩放变换也支持 x 和 y 两个方向，因此，下面的语法都属于 2D 变换的语法：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="3348316539719920000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 水平放大 2 倍，垂直缩小 1 / 2 */\ntransform: scale(2, 0.5);\n/* 水平放大 2 倍 */\ntransform: scaleX(2);\n/* 垂直缩小 1 / 2 */\ntransform: scaleY(0.5);`, `3348316539719920000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 水平放大 2 倍，垂直缩小 1 / 2 */</span>\n<span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>2<span class="token punctuation">,</span> 0.5<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">/* 水平放大 2 倍 */</span>\n<span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scaleX</span><span class="token punctuation">(</span>2<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">/* 垂直缩小 1 / 2 */</span>\n<span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scaleY</span><span class="token punctuation">(</span>0.5<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>图 4-40 所示就是图片元素应用 scale(2, .5) 变换后的效果。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-23-17-52-12-2289211069dd30b647bfb3b10302660e-b9e7f.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 27.95138888888889%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsSAAALEgHS3X78AAABuUlEQVQY00WMX0hTcRiGz3UwqVzCznbOWY266NICK+Zsa6dU6kKN0aV3CYFB4k2BIaab1c2iXcwwpC7ECOwiwooIxDJsU8Y5Ozsryc2FpaZbovS/px8U9MLL8z0ffJ/07HqAh7Fj3O8LCgax7oRZvKdTHNMpjOrMj+jkhsKk42Em+kI8joZ4dDXEjfMNnGv1c/akn54zAaLtAToj9UgzMSdT/TLPe11MDrhIxWXMpJv8sJt3Q24WBYs3hcdkprpcJJp2kdRrGPA7uVBbTaN3O/udDvbtdFC1zYH0YtDFq7iXVFLDSGhY/V6sDi/pVpWJIwrjpxUedCiMRTzcavZwuU7mdtDDqJjvNnq44pdpq63hgM9J1Y5q8TChMhPdSybiI3vIh3HQx9O63YzUazzp3MO46HCb8KMa146rdDcp9JzQGGzRuNSs0qUrXGwRPKXSflhB2loz2Fww+Gqa/CzZ/KrkWFkyRS34noNvNnzOQkVwMw9lsVu3/3rZ5vequPkgbpcMvpQMJP7lY7lC2shRKC2zXt5gzrCx8kVmjbcsf9pgcnqWl69NCu9XyGTnmU6ZwjPMmW/4wf/8AXDQQUC3lj0FAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 23 17 52 12" title="" data-src="/static/2022-01-23-17-52-12-2289211069dd30b647bfb3b10302660e-fee1c.png" data-srcset="/static/2022-01-23-17-52-12-2289211069dd30b647bfb3b10302660e-a67b7.png 200w,\n/static/2022-01-23-17-52-12-2289211069dd30b647bfb3b10302660e-0b187.png 400w,\n/static/2022-01-23-17-52-12-2289211069dd30b647bfb3b10302660e-fee1c.png 800w,\n/static/2022-01-23-17-52-12-2289211069dd30b647bfb3b10302660e-b9e7f.png 1152w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>缩放变换不支持百分比值，仅支持数值，因此 scale(200%, 50%) 是无效的。</p>\n<p>缩放变换支持负值。如果我们想要实现元素的水平翻转效果，可以设置 transform: scaleX(-1)；想要实现元素的垂直翻转效果，可以设置 transform: scaleY(-1)。如果水平缩放和垂直缩放的大小一样，我们可以只使用一个值，例如，transform: scale(2) 表示将元素水平方向和垂直方向的尺寸放大到现有尺寸的 2 倍。</p>\n<h3 id="skew-斜切"><a href="#skew-%E6%96%9C%E5%88%87" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>skew() 斜切</h3>\n<p>斜切变换也支持 x 和 y 两个方向，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="47213915190750760000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 水平切斜 10 度，垂直切斜 20 度 */\ntransform: skew(10deg, 20deg);\n/* 水平切斜 10 度 */\ntransform: skewX(10deg);\n/* 垂直切斜 20 度 */\ntransform: skewY(20deg);`, `47213915190750760000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 水平切斜 10 度，垂直切斜 20 度 */</span>\n<span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">skew</span><span class="token punctuation">(</span>10deg<span class="token punctuation">,</span> 20deg<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">/* 水平切斜 10 度 */</span>\n<span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">skewX</span><span class="token punctuation">(</span>10deg<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">/* 垂直切斜 20 度 */</span>\n<span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">skewY</span><span class="token punctuation">(</span>20deg<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>所有包含 X 和 Y 字符的变换函数都不区分大小写，例如 skewX(10deg) 写作 skewx(10deg) 是合法的，translateX(10px) 写作 translatex(10px) 也是合法的，不过我们约定俗成字符 X 和 Y 都是大写。skew(10deg) 可以看成 skew(10deg, 0) 的简写，效果等同于 skewX(10deg)。</p>\n<p>图 4-41 所示的是图片元素分别应用 skewX (10deg) 和 skewY(20deg) 变换后的效果。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-23-17-56-47-e664251a22a70068c532535f9694e96b-83017.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 54.15573053368329%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAACpElEQVQoz42TWUhUYRTH5yGoIFHDHKZhNCd7maBESWixIMk2WiTapIeCeikqDMoeIopcSh2VEEklJCNKg+zFFkUsGTXLbEzH6Y4zo+OCmlku4zJ65/66c28L9NSBP5z7ff/zu4fvfJ+GySmYmISxHzA9q+RSIB8ahtFRpNkZAjEzPsg3VxtSTz8MjsHAENLIMH6HgOR2I9ntIAhofB43c24n/n4X4sgAoscpF7hYcDlYEOxIM14FOO6q5UmqjsbCfXjbS5kf7VHW8QfkR/L5wOtF01CcTOX19biebMRZFk9zdjwV1zaQuttE9vn9+BbmlTpvXz31t3S8zdDiLArHmrcOe+U5xoVXzE1PKx5JlkZ4dpLqtCA+mQ105+t5c0VH6pYwTCuWYdRr6etVO5noqaPNrKc114hQvJqO2waKU4I5HBvM1T0mPluqFZ9mpMXM+8wQrIVr6H1kxFNopOHEKsp2GogJX05NTa1iHBHqaJB/apM9DnMUwyVGXp+O4kyMgeBFGgpzMlTgV1sVFrMW+/1omhOjqEiOpGR3BM8PGkmKXkpR8T0V6KimMT0IW6KBl7ooyg9EUn0sgncpRraFLSYjK1cFTgx1YCnQ8TlOS1V0OOlbwziqD+GgKYw4vYYbaRfUKc948JScpX3TWp6mhJKVEEryynAytxvZu2YJObk5KlD0TyGUH6L7eCINd3bQ+zCJrrwkrAW7sNxMoLX0snLYv2PaO8hg2wOGHh+h8lQkFzcHY9JqyDf/6lCZjiTJRX78kqhIvQuiKvlb2ZfkfVH8Aw44+N6Ft+kuLy7FYnlUoAID5j8z/+/4xyzOIk6N/gWqUEm+6N243T1Mya9HcHTT0Wnji+CQc6ey3tTcQofNTqeslg8f+WRtx2q14ptXOw9wfgLIWLXov79nQQAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 23 17 56 47" title="" data-src="/static/2022-01-23-17-56-47-e664251a22a70068c532535f9694e96b-fee1c.png" data-srcset="/static/2022-01-23-17-56-47-e664251a22a70068c532535f9694e96b-a67b7.png 200w,\n/static/2022-01-23-17-56-47-e664251a22a70068c532535f9694e96b-0b187.png 400w,\n/static/2022-01-23-17-56-47-e664251a22a70068c532535f9694e96b-fee1c.png 800w,\n/static/2022-01-23-17-56-47-e664251a22a70068c532535f9694e96b-83017.png 1143w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>旋转是 360 度一个轮回，斜切则是 180 度一个轮回。元素处于 90 度或者 270 度斜切的时候是看不见的，因为此时元素的尺寸在理论上是无限的。对浏览器而言，尺寸不可能是无限的，因为没办法表现出来！于是这种情况下的尺寸为 0，所以元素在 90 度或者 270 度斜切的时候是不会影响祖先元素的滚动状态的。如果读者对这句话不理解，把 skewY() 函数的角度调成 89 度或者 271 度就知道什么意思了。skew() 函数支持所有角度单位值。</p>\n<p>斜切变换在图形绘制的时候非常有用，这是一个被低估的变换特性。举个例子，使用 CSS 实现图 4-42 所示的导航效果。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-23-17-59-22-4c4ca03ace2d02a768c3db4b01e9041b-66f68.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 15.91304347826087%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAApklEQVQI113KSQ6CMBhAYS7jAVx5AY/lxhOYeA43xo0HcGlijIlxYCglDE1LW6ClQAu/bvXlWz6vsnCX7kRs2IxygEtpz8y+63F55LMdne/Z4sBeGccI+2HMuKRM+AEKQiQr5RkH1EyJmkQ/tQ6kg9KCGGD7HFbXbn3rNo++MlbrVtaN0kbptuTiy3S9B7/laUryXCtFcCSLhGeYYhSjOIhQUZC/+QMSsqNYBZtVggAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 23 17 59 22" title="" data-src="/static/2022-01-23-17-59-22-4c4ca03ace2d02a768c3db4b01e9041b-fee1c.png" data-srcset="/static/2022-01-23-17-59-22-4c4ca03ace2d02a768c3db4b01e9041b-a67b7.png 200w,\n/static/2022-01-23-17-59-22-4c4ca03ace2d02a768c3db4b01e9041b-0b187.png 400w,\n/static/2022-01-23-17-59-22-4c4ca03ace2d02a768c3db4b01e9041b-fee1c.png 800w,\n/static/2022-01-23-17-59-22-4c4ca03ace2d02a768c3db4b01e9041b-66f68.png 1150w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>有些人会使用 clip-path 属性以剪裁方式实现这个效果，有些人会使用 border 属性以模拟边框方式实现这个效果，其实，完全不需要这么复杂，使用斜切变换就可以轻松实现这个效果。</p>\n<p>首先按照正常的方块布局进行排版，让每一个导航元素由上下两个矩形盒子组成，使用 skew() 函数斜切一下效果就出来了，连定位都不需要，这是最佳实现方式，没有之一。实现原理如图 4-43 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-23-18-00-07-218c4ed3eb755f40a65e614cb65f714f-11cd2.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 34.75238922675934%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsSAAALEgHS3X78AAABT0lEQVQY021Qy07CUBRs9E+MUROFBEmMH+DOxIV+kRuNxkRdsHBl3AOhwgIfAQ1SEBVoAS0SqQSpUG4pr9IH7a3n4kJjnMxi7szJ5J5DYcf5TYBlY6NWdwQBv1Uxz+Nej7j4O/wBvKnNWHcphJbPZW9Yng+i2KcBwXoULQYkL408wZaHRpm2Cab/Xd/ODfcL6h6ngki2TOqsMjooqkclQgj47hjmoh/GLjcE57ik7rDD+KTxhB9Rh41pnzjlE0GsBBC1cd2dCyJXSHbT8owfXYlkbuumPxtS3GHFFekt0MplQwfztKKtRjprFwoQBLRTrDxmWmZaIrxrmh3dNiyc5OqpbDX1LDLMy0O5qdtkZ9P+uzbl/AtLd8aagy1HGxDxH8jBoA4ISjNMtlAShJoktYvlSoF/jSeYTI5NP+Y5rhi/TaTvn7J5tj8YTG5PfvEFzlVlZ7cZKxgAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 23 18 00 07" title="" data-src="/static/2022-01-23-18-00-07-218c4ed3eb755f40a65e614cb65f714f-fee1c.png" data-srcset="/static/2022-01-23-18-00-07-218c4ed3eb755f40a65e614cb65f714f-a67b7.png 200w,\n/static/2022-01-23-18-00-07-218c4ed3eb755f40a65e614cb65f714f-0b187.png 400w,\n/static/2022-01-23-18-00-07-218c4ed3eb755f40a65e614cb65f714f-fee1c.png 800w,\n/static/2022-01-23-18-00-07-218c4ed3eb755f40a65e614cb65f714f-11cd2.png 1151w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h2 id="transform-属性的若干细节特性"><a href="#transform-%E5%B1%9E%E6%80%A7%E7%9A%84%E8%8B%A5%E5%B9%B2%E7%BB%86%E8%8A%82%E7%89%B9%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>transform 属性的若干细节特性</h2>\n<p>这里介绍的 transform 特征对于 2D 变换和 3D 变换均适用。</p>\n<h3 id="盒模型尺寸不会变化"><a href="#%E7%9B%92%E6%A8%A1%E5%9E%8B%E5%B0%BA%E5%AF%B8%E4%B8%8D%E4%BC%9A%E5%8F%98%E5%8C%96" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>盒模型尺寸不会变化</h3>\n<p>页面中的元素无论应用什么 transform 属性值，该元素盒模型的尺寸和位置都不会有任何变化。例如，页面中有一个 <code class="language-text">&lt;img&gt;</code> 元素，尺寸是 128px×96px，则无论应用什么 transform 属性值，这个 <code class="language-text">&lt;img&gt;</code> 元素的尺寸依然是 128px×96px，位置依然是原来的位置。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="43514466260154384000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`img {\n   transfrom: translateX(-9999px);\n}`, `43514466260154384000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">img</span> <span class="token punctuation">{</span>\n   <span class="token property">transfrom</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>-9999px<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>图片原来的位置会变成一片空白，图片在视觉上已经不知道偏移到何处了。这和 position: relative 相对定位偏移的行为有些类似。又如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="37092753976868310000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`img {\n   transfrom: scale(2);\n}`, `37092753976868310000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">img</span> <span class="token punctuation">{</span>\n   <span class="token property">transfrom</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>2<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>虽然图片的视觉尺寸放大了 2 倍，但是，并不会推开旁边的元素，只会在视觉上重叠与覆盖。</p>\n<p>元素尺寸和位置不会变化的特性让人又爱又恨，爱的是可以放心使用 transform 实现各类交互效果，恨的是有时候我们又希望位置可以发生变化。例如，我们希望一个元素往上移动自身高度的 50%，同时后面的元素也跟着一起位移，这在目前的 CSS 世界中，是没有有效的实现方法的，需要借助 JavaScript 计算实现。原因在于相对自身尺寸偏移的特性只有 translate 位移才有，但是 translate 位移无法影响其他元素的布局；可以影响其他元素布局的 margin 负值定位虽然也支持百分比值，但这个百分比值却是相对宽度计算的。于是，这就形成了一个死结。</p>\n<p>但需要注意的是，元素应用 transform 变换后还是可能因为某些间接的原因影响排版，主要是在触发滚动条的显示与隐藏的情况下影响容器的可用尺寸（Windows 操作系统中的滚动条默认占据一定的宽度和高度）。且看下面这个具有代表性的案例：</p>\n<html><head></head><body><div class="gatsby-code-button-container" data-toaster-id="19777885177539180000" data-toaster-class="gatsby-code-button-toaster" data-toaster-text-class="gatsby-code-button-toaster-text" data-toaster-text="复制成功" data-toaster-duration="3500" onclick="copyToClipboard(`<p><img data-src=&quot;./1.jpg&quot; /></p>\n<style>\n   img {\n      width: 100%;\n   }\n\n   p {\n      width: 128px;\n      border: solid deepskyblue;\n      overflow: auto;\n   }\n</style>`, `19777885177539180000`)">\n              <div class="gatsby-code-button" title="html">\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div></body></html>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>./1.jpg<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n   <span class="token selector">img</span> <span class="token punctuation">{</span>\n      <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">p</span> <span class="token punctuation">{</span>\n      <span class="token property">width</span><span class="token punctuation">:</span> 128px<span class="token punctuation">;</span>\n      <span class="token property">border</span><span class="token punctuation">:</span> solid deepskyblue<span class="token punctuation">;</span>\n      <span class="token property">overflow</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>很显然，此时 <code class="language-text">&lt;img&gt;</code> 元素的宽度是 128px，但是，如果 <code class="language-text">&lt;img&gt;</code> 元素旋转一下，则 <code class="language-text">&lt;img&gt;</code> 元素尺寸就会发生变化，尺寸瞬间变小了。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="14235601132598786000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`img {\n   width: 100%;\n   transform: rotate(45deg);\n}`, `14235601132598786000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">img</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>\n   <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>45deg<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>例如，在 Windows 10 操作系统下的 Chrome 浏览器中，<code class="language-text">&lt;img&gt;</code> 元素的宽度变成了 111px，如图 4-44 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-23-18-09-20-8864b6936c7c6d9a2d741e1f4f5afad5-2ddf5.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 50.134048257372655%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAACS0lEQVQoz22RS08TYRSG+wuMwYXRhTEqG1ds/AeujIlx78KNe/0DbkDlaq8gVIzGW4EFGIwLW000lF64TAsYS2mnN0pLaTstvdGWto/ftKSG6ElO3nknmWfec44Gmpwu1bf+umaj7eqVQ1IuCwGbmZTzPblVC2nXB5SVj2RFq77omUUjV8F3kGYzsYcvs09QeH8JQpUmTUFqNjrA43KOjH0C2TpA8uco5XUTpXUj5TUTFclEzq2j6JhA81WaZ226F7uhF4/hMvFlLTUBcO1mKKhhRUJV6qUcebeZuKTFvfQE39og8tYYu9taIj49yq9xCs5JNIuP7+C5e5ZA/1X8zy/x6l4PTssAP3xRiidANWFNBTqnkD2jvP4yiHFOx/RnA2+tU3xaEmDxo8LyCzRLC7PYbp3n2Y2L2B9c42FfDzf7ruAKxjoJG8ddoOKYIiQN88b6ktGFRUbmLPS/m2Hm2zgJzxh5uwAG1c1HLGhvX+BR3znuXz/D0MBTIsUa+eNWN6E6ckGMHNvQsewZZsU7hEsaYnVjGLd3hP0NIyV1ZGu8iBTcw/Z9Af20GfP8IjspBVv4oDtys32UPBmRUPHqyW2No2yayHiNbc2L/WUlA3mHSBgtN5BzJWTxdaIO6QZEi3XRtVNXrhWzFByTHNp1Qo1iXwJg17dV7UO7gYpTXJl/qsX/qiV2Wc1EqGcj1IRW0+FOq88n/igd6gCPqlW2/QGyWYXkfgrf9g4+4cORGDsBmYBoVX/7hYbEOzlKbC9FOJYgEk+SPFC6Uf4AmDuwR06JGnQAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 23 18 09 20" title="" data-src="/static/2022-01-23-18-09-20-8864b6936c7c6d9a2d741e1f4f5afad5-fee1c.png" data-srcset="/static/2022-01-23-18-09-20-8864b6936c7c6d9a2d741e1f4f5afad5-a67b7.png 200w,\n/static/2022-01-23-18-09-20-8864b6936c7c6d9a2d741e1f4f5afad5-0b187.png 400w,\n/static/2022-01-23-18-09-20-8864b6936c7c6d9a2d741e1f4f5afad5-fee1c.png 800w,\n/static/2022-01-23-18-09-20-8864b6936c7c6d9a2d741e1f4f5afad5-2ddf5.png 1119w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>之所以是这样的结果，是因为 <code class="language-text">&lt;img&gt;</code> 元素旋转导致 <code class="language-text">&lt;p&gt;</code> 元素出现滚动条，滚动条占据了 17px 的宽度，进而导致 width: 100% 的 <code class="language-text">&lt;img&gt;</code> 元素的宽度变成了 111px。</p>\n<h3 id="内联元素无效"><a href="#%E5%86%85%E8%81%94%E5%85%83%E7%B4%A0%E6%97%A0%E6%95%88" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>内联元素无效</h3>\n<p>内联元素（不包括替换元素）是无法应用 transform 变换的，且不支持所有变换特性。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="35630938661089817000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<span>不能变换</span>\n<style>\n   span {\n      transform: translateX(99px);\n   }\n</style>`, `35630938661089817000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>不能变换<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n   <span class="token selector">span</span> <span class="token punctuation">{</span>\n      <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>99px<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>此时 <code class="language-text">&lt;span&gt;</code> 元素是不会有位移效果的。但有两种方法可以实现位移效果，一种是给元素增加块状特性，例如设置 display 属性值为 inline-block，如下所示：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="1923580960309534500"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`span {\n   display: inline-block;\n   transform: translateX(99px);\n}`, `1923580960309534500`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">span</span> <span class="token punctuation">{</span>\n   <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>\n   <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>99px<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>还有一种方法是改用相对定位：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="19862142756711120000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`span {\n   position: relative;\n   left: 99px;\n}`, `19862142756711120000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">span</span> <span class="token punctuation">{</span>\n   <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>\n   <span class="token property">left</span><span class="token punctuation">:</span> 99px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="锯齿或虚化的问题"><a href="#%E9%94%AF%E9%BD%BF%E6%88%96%E8%99%9A%E5%8C%96%E7%9A%84%E9%97%AE%E9%A2%98" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>锯齿或虚化的问题</h3>\n<p>在应用旋转或者斜切变换的时候，元素边缘会表现出明显的锯齿，文字会明显虚化。这个现象主要出现在桌面端浏览器上，而且这个问题是没有办法避免的，因为显示器的密度跟不上。</p>\n<p>目前大部分桌面显示器还都是 1 倍屏，显示的最小单元是 1px× 1px，你可以理解为显示器屏幕是由一个个 1px×1px 大小的格子组成的。如果像素点旋转 45 度，那么这个正方形像素点的端点和边必然就会穿过其他的格子，如图 4-45 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-23-18-17-30-637eb3adcbecea4e4bccde40a86ac823-fac45.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.57744733581164%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAACEklEQVQoz2P4Dwb//v0DknN2Hc2etqxk7prSeWuL5qwumbO6dP7aknlrS+etyZ6+bOPJi0A1f//++w8DDMiaqxdusCxsc6vq86id4FLZm9A7P33S4uQJ8yM6ZgLR8oOnwJr/YtfcsGyTY3mXb+Mk/8Ypno1T/OonhdX1BzZN9Wuc7FzZO3f3UaCaP7g0N67Y6lzdH9A81bdzTmRpa3lAdGhtn3fHLP+mKU5VfXPwa25YttmxvNunaWpUaWuDm3+PuX1lQHRwda9P4xSg+JxdR/Bprl+6yaGsy6tpanFYUpelY5OjV4+VY1pSgWfzNKD47J2HCdjsVNHt2zQlsGFSpX9Ur5ldQUyGL9AXjZMdKwjZ3Lh8i3NVr3/TZN/2mYE1vemJ+X7N03xbpwNFnKp6Cfi5cSnQ5h6/hskBTVN8Gid7NE/zAwX1FKCIY0UPTpv/gjWXL1hrmtcCdDkwYoCedCjtdKrscazsdSrvNslrmbplP1DN7z9//sEAis0Hr95ZuO/E8kNnVhw+AyQhDAgbKH7+/hO4SqjNP3/9+vHjJ9AxX758/fnjx+9fP4Ho7+/fQPaP79+B5C+I4M+fX798/fbt2+cvXz59+gxkvH33juHW7Tt37tz9+vXb6TPnrly7cfDQsSPHTp4+d/74qbO79x04dOT44aPHz128fOL0OSD7zNkLJ0+dPXr85IVLl/fsOwgA+AVLvn0YycQAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 23 18 17 30" title="" data-src="/static/2022-01-23-18-17-30-637eb3adcbecea4e4bccde40a86ac823-fee1c.png" data-srcset="/static/2022-01-23-18-17-30-637eb3adcbecea4e4bccde40a86ac823-a67b7.png 200w,\n/static/2022-01-23-18-17-30-637eb3adcbecea4e4bccde40a86ac823-0b187.png 400w,\n/static/2022-01-23-18-17-30-637eb3adcbecea4e4bccde40a86ac823-fee1c.png 800w,\n/static/2022-01-23-18-17-30-637eb3adcbecea4e4bccde40a86ac823-fac45.png 807w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>于是，有一个问题出现了，显示器没有能力显示小于 1px×1px 的图形，于是，要么裁剪像素点（锯齿），要么使用算法进行边缘模糊计算（虚化）。因此，要想解决 transform 变换锯齿和虚化的问题，只要把我们的显示器换掉就可以了。换成一个高清屏，类似 iMac 那种 5K 显示屏，这个现象就没了。因为这类屏幕密度足够高，0.2px×0.2px 的元素都可以细腻渲染。</p>\n<h3 id="不同顺序不同效果"><a href="#%E4%B8%8D%E5%90%8C%E9%A1%BA%E5%BA%8F%E4%B8%8D%E5%90%8C%E6%95%88%E6%9E%9C" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>不同顺序不同效果</h3>\n<p>我们可以一次性应用多个不同的变换函数，但需要注意的是，即使变换内容一样，如果顺序不同，最终的效果也会不一样，例如：</p>\n<html><head></head><body><div class="gatsby-code-button-container" data-toaster-id="63530558062692920000" data-toaster-class="gatsby-code-button-toaster" data-toaster-text-class="gatsby-code-button-toaster-text" data-toaster-text="复制成功" data-toaster-duration="3500" onclick="copyToClipboard(`<p><img data-src=&quot;1.jpg&quot; class=&quot;transform-1&quot; /></p>\n<p><img src=&quot;1.jpg&quot; class=&quot;transform-2&quot; /></p>\n<style>\n   p {\n      width: fit-content;\n      border: solid deepskyblue;\n   }\n\n   .transform-1 {\n      transform: translateX(40px) scale(0.75);\n   }\n\n   .transform-2 {\n      transform: scale(0.75) translateX(40px);\n   }\n</style>`, `63530558062692920000`)">\n              <div class="gatsby-code-button" title="html">\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div></body></html>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1.jpg<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>transform-1<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1.jpg<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>transform-2<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n   <span class="token selector">p</span> <span class="token punctuation">{</span>\n      <span class="token property">width</span><span class="token punctuation">:</span> fit-content<span class="token punctuation">;</span>\n      <span class="token property">border</span><span class="token punctuation">:</span> solid deepskyblue<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">.transform-1</span> <span class="token punctuation">{</span>\n      <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>40px<span class="token punctuation">)</span> <span class="token function">scale</span><span class="token punctuation">(</span>0.75<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">.transform-2</span> <span class="token punctuation">{</span>\n      <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>0.75<span class="token punctuation">)</span> <span class="token function">translateX</span><span class="token punctuation">(</span>40px<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>结果两张图片的位置表现出了明显的不一致，如图 4-46 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-23-18-21-57-44f9afaa391badce65fe406da32b9807-a3a80.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 51.42857142857144%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAABXElEQVQoz5WRS0sCYRSG3UUbWwRBP6JFi9q2jtbtWwUtWkQLN+1aRS0D/0O4sCtBQUKWzpgTozZJXlPTMQu66eRtnma8RNlg+ML7ceA738N7vmOjR7retnFyV9bJ1UCOhYiEDzj17hGNSJ0+veVe2ayApppG8aA1WnX8aIXoph3n7DCOxYV2X7M5ODBbaQMz+w7O5sfYmBlle21pcGC3L1HRKdQNoPpIPKYQTiu8P2UHH7n7h0kNUuUGSj5LopQhkL7no6J9A63Uf+Qq1LRXfM4pbrbGWZ4ewe1yte4b9bp1wm70nzbTmcBC1Xz5grI+weGcndXJIY7dO7+AvbYEdh0vQ6laIy6coJzv4vG4eS7m2hN0lvIHSB99Gn5rgsHFDFvjf9kEMUgylSafL6CqRS59It4LP2JAQvCL3CrGduUQV4KIFAxSUFUSySRCIIj5VrqW8QkBQpEb5FCEL13N7sl6M4T/AAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 23 18 21 57" title="" data-src="/static/2022-01-23-18-21-57-44f9afaa391badce65fe406da32b9807-fee1c.png" data-srcset="/static/2022-01-23-18-21-57-44f9afaa391badce65fe406da32b9807-a67b7.png 200w,\n/static/2022-01-23-18-21-57-44f9afaa391badce65fe406da32b9807-0b187.png 400w,\n/static/2022-01-23-18-21-57-44f9afaa391badce65fe406da32b9807-fee1c.png 800w,\n/static/2022-01-23-18-21-57-44f9afaa391badce65fe406da32b9807-a3a80.png 875w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>下面一张图片实际偏移大小是 30px，因为先缩小到了原大小的 75%。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/mw9kwb?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<h3 id="clipclip-path-前置剪裁"><a href="#clipclip-path-%E5%89%8D%E7%BD%AE%E5%89%AA%E8%A3%81" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>clip/clip-path 前置剪裁</h3>\n<p>一个元素应用 transform 变换之后，同时再应用 clip 或者 clip-path 等属性，此时很多人会误认为剪裁的是应用变换之后的图形，实际上不是的，剪裁的还是变换之前的图形，也就是先剪裁再变换。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="99639386785030260000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`img {\n   width: 128px;\n   height: 96px;\n   transform: scale(2);\n   clip-path: circle(48px at 64px 48px);\n}`, `99639386785030260000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">img</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 128px<span class="token punctuation">;</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 96px<span class="token punctuation">;</span>\n   <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>2<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token property">clip-path</span><span class="token punctuation">:</span> <span class="token function">circle</span><span class="token punctuation">(</span>48px at 64px 48px<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>如果是先执行 transform 再执行 clip-path，则最终剪裁的圆的半径应该还是 circle() 函数中的 48px，即最终剪裁的圆的直径是 96px；如果是先执行 clip-path 再执行 transform，则最终剪裁的圆的直径应该是 192px，在各个浏览器中实际渲染的结果都是直径为 192px 的圆，如图 4-47 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-23-18-26-52-0f95dd36302213b7a369710d91edd7df-e1c08.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 54.810238305383926%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAACQUlEQVQoz5WS7W/ScBDH+3f6xsT3vlAJmiXOLEYGdFAo0JX2xxiCRl2mc+4Jo9kGTJ5KKTDYgFU2Hn4rDEfpA2Mb7eyW6CvfeLncJZf75HuXO0TpiqowGF9IY1XWJpOb/zGkUD+LFzrJWn+v3EpyhQzHZfePKlAuwxHblE/FS6NJ1zRdu77RrvXJ1V/Xri+RFa5Pxnr+rxXXm4gzMG/x+p47CBP+wbXV8G3DFC8a8KjHN78TMEbLTHiYDcnM67sYRjZK5/ROEwtFPEHSGwzgIPACAw+e4Q+xTyDRZRpDA1ZhFcZstR2LkEUHRUwsufosJiV9yMa+5FvLOCjSvRgg3gEiBGYx2mqnTS9pdPUw31QMWOlUB4z7W8IW+WL7vO3aTHsOWKeSIg1Y9q7s4uF5T2TBMw+IBYA6gA0FszYaXebyrdEdXDtLz6398KEf39uX3uJrkUJ2Tk4SxthDYpN1B0nXTGDaTJst1KMZavoV9dQC8K0j9uSPcg4/rODFIlYqYsUSdlLClYwfWS/8AnvQa1+yPvZOofSTKeq+mbxnck/5o2Cvl/15t3PnYBC3KwwmZ5xSxqEyTjE1JyXcyGq+T8UFEG1YyGX3IuXw+q04QMPRQAwS2zDN38IXoqDUd+V6XK7FpFpMqcfVo/iITyA96ap1PhZUTVD1dq/fEU67otwf35ypGhxORlf67Z3/9SFGETGSpml8vQbbrZGiwA48bhw3eP6wUu7CTrVaZfMFrljK5bkcy2WZXIbJtdrtW1jXfwNecw86HzDFCgAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 23 18 26 52" title="" data-src="/static/2022-01-23-18-26-52-0f95dd36302213b7a369710d91edd7df-fee1c.png" data-srcset="/static/2022-01-23-18-26-52-0f95dd36302213b7a369710d91edd7df-a67b7.png 200w,\n/static/2022-01-23-18-26-52-0f95dd36302213b7a369710d91edd7df-0b187.png 400w,\n/static/2022-01-23-18-26-52-0f95dd36302213b7a369710d91edd7df-fee1c.png 800w,\n/static/2022-01-23-18-26-52-0f95dd36302213b7a369710d91edd7df-e1c08.png 1133w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>由此可以证明，transform 和 clip-path 同时用的时候，是先执行 clip-path 剪裁，另外一个剪裁属性 clip 也是类似的。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/yngl2i?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<h3 id="动画性能优秀"><a href="#%E5%8A%A8%E7%94%BB%E6%80%A7%E8%83%BD%E4%BC%98%E7%A7%80" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>动画性能优秀</h3>\n<p>CSS 高性能动画三要素指的是绝对定位、opacity 属性和 transform 属性。因此，同样的动画效果，优先使用 transform 属性实现。例如，元素移动动画应使用 transform 属性，而不是 margin 属性。</p>\n<h2 id="元素应用-transform-属性后的变化"><a href="#%E5%85%83%E7%B4%A0%E5%BA%94%E7%94%A8-transform-%E5%B1%9E%E6%80%A7%E5%90%8E%E7%9A%84%E5%8F%98%E5%8C%96" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>元素应用 transform 属性后的变化</h2>\n<p>元素应用 transform 属性后还会带来很多看不见的特性变化。</p>\n<h3 id="创建层叠上下文"><a href="#%E5%88%9B%E5%BB%BA%E5%B1%82%E5%8F%A0%E4%B8%8A%E4%B8%8B%E6%96%87" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>创建层叠上下文</h3>\n<p>和 opacity 属性值不是 1 的元素类似，如果元素的 transform 属性值不是 none，则会创建一个新的层叠上下文。这一特性常被用在下面两个场景中。</p>\n<ol>\n<li>覆盖其他元素。</li>\n<li>限制 z-index: -1 的层级表现。</li>\n</ol>\n<p>在默认情况下，多个 <code class="language-text">&lt;img&gt;</code> 元素相互重叠的时候，一定是 DOM 位置偏后的 <code class="language-text">&lt;img&gt;</code> 元素覆盖 DOM 位置靠前的元素，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="83241253952163610000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`img + img {\n   margin-left: -60px;\n}`, `83241253952163610000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">img + img</span> <span class="token punctuation">{</span>\n   <span class="token property">margin-left</span><span class="token punctuation">:</span> -60px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>效果如图 4-48 所示，可以看到 DOM 位置靠后的图片覆盖了 DOM 位置靠前的图片。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-23-18-31-53-f8f0784ce6fd40427d59cf7051c9a7fd-88b8f.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 51.733102253032925%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAAC3ElEQVQozx2Sf0jUZxzHv3/1R2j3a6d33/t+7/k6ImhOt90NL4p+0aBfi1ghsancRfTHRINFYEzTVaKZeauui9xZYJn2QycM1nTK4pqSw2vmzzotVmuB2s5K+6FQvXrqgTcf+Lzez5vP5+FRuk6sJVKYzqWST7l7zss/DV5unfQS/eEz+o956D/h5dyeTzj9XSaDES/3Gz9nTNbr5R56qjyMSB7MzuDw1gyKsz9G6Q17ad5jp61MZewnnXhYY6RGo223SkV2CrUFDtol+7nIybBkY6c0bh/ViBarnNnu4KulNhY7zeR4bCxZaEEZiPhoL1XpPOhm4EeD20GDoQpBdK+bkpVOGvM1uqsEV0p1YkeEDJO8UtBbJghtdbHL4+Aj1UaSyYLdbEOJ1/vorVL5S17qqxbcbTB4IPX3fjetmzX69rnpOyboOeQmJj3xOsGDiwbxGsEvuRqdW3SCK1QyUm18sMCKMlgnA4MuhmqlqdFgsFTwb43BaLHg100a1+WkN0KCfql4k5zusODOQempMujcpnNFBnZI5WekYrXKlXvCWUQrndw8azC8U/B7kkZklYvQJhdBn0rbLp1r1Tq9dW5Gyg26nTr16S7CW1xUL1O5tM7FqfUqG312hFxd+TPko6tWZzD3Q2LzDI5nucn36GSbnaRZUjiap9MTkU/wfRoDpjSaFgkKl+vssKsstqawJs3JUuEgKzMVuyMVJdaQTmx7MsOKlRaviaslFvp2W2hda6Lyi2RaiszcqLAwNN9Ch26m9VsTwwes/LbBxPH1yRz5cgFla5IoWp1EfmYyyp1rBYyW55AIBrga+oab53OZ6ghw/4KfJ5cDPGz3M3raz2RZgKEzefwRzmU6GuDeRT+J5gBTzX7Gm/z8V58n/+3XKMgz8+oNidk55l7Ds5evefTkJZOPnzM+9YJJqcTMLBMvnr2vT5/PMSF744kZJh5LLr3/T88xPfvmXRRvATwp4u0wMOlGAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 23 18 31 53" title="" data-src="/static/2022-01-23-18-31-53-f8f0784ce6fd40427d59cf7051c9a7fd-fee1c.png" data-srcset="/static/2022-01-23-18-31-53-f8f0784ce6fd40427d59cf7051c9a7fd-a67b7.png 200w,\n/static/2022-01-23-18-31-53-f8f0784ce6fd40427d59cf7051c9a7fd-0b187.png 400w,\n/static/2022-01-23-18-31-53-f8f0784ce6fd40427d59cf7051c9a7fd-fee1c.png 800w,\n/static/2022-01-23-18-31-53-f8f0784ce6fd40427d59cf7051c9a7fd-88b8f.png 1154w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>但是，如果我们给 DOM 位置靠前的图片设置 transform 属性，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="16034157060320053000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`img:first-child {\n   transform: scale(1);\n}`, `16034157060320053000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">img:first-child</span> <span class="token punctuation">{</span>\n   <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>1<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>则此时 DOM 位置靠前的图片会覆盖 DOM 位置靠后的图片，如图 4-49 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-23-18-33-34-eb04c107fbf19a21c215aa4ab3b643ba-88b8f.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 51.64644714038128%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAACbUlEQVQozwFiAp39AMSVR5ttK6p8Md6kNOCkNNiWM8GAMdSUM8aFMohPLYZSLZ1yL+arNdqaNMiFMsiJMteVM49VLoxULn1WLQDMlTSsdBW5gBvbmh3alh3WjR23cRqPWxc6KxI6IRFPKxNvThbmoB7Wjx3CexueYhhSOhQpGRBbMhM5JRIA0pw3un4avYQf05Ag2I4g1YUgwHYfhkYaZS8YHBYTBggRXEAY5Zkh0oYgzH8glVQccTQZLhsUDxASFRAUANqiN8yJG8mKIM+MH92kIOOlIc6AH69THbxRHXEzGBQKEVg7F+elIeCnIdmOILFcHLxRHY0+Gi0YExQOEwDUnDfMjhvUmSHZpyHUfh/jjSDbeyC1UR29Vh6xTRw8FxRXTBfklSHagR/kiSC9Vx23Ux28Ux1qLRcSEhIAyJY2wYca0KQg1mgguwwdnEAblE4bkTwas04chkYZLSwUYjQY0yMenykbl1Mcjj0arEkcmkobTDgVIBsTAMOTOcWZHtNcJMwHIZM4IGszH1MQGikYGEYiGzokGSUvGFcLG7UoIWo+H2MVGyoTF0MiGzogGTcvGBYaGADNpi3NYxDWABSuNhHAfxPRdROwSBGMTA+NTRB9RA5yPw5+Lw+3aBLVhRS5TRGUSxCNThGARg95RA5tMQ8A3cNw2ohe7JBjwpRe0aZf7btj4Khi7axj7K1j5aVh5aNixo9fwZhf8MBj36hi6qxi7Kxi5qdh46Fh0ZNdAP////P5+O/3+Pr7/fT3++zw9+vv9ejt9Oju9evx+Ojt9O3y9/L1+eru9eru9Ovw9+rw9+zy+fL1+P///870CcIW0UkUAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 23 18 33 34" title="" data-src="/static/2022-01-23-18-33-34-eb04c107fbf19a21c215aa4ab3b643ba-fee1c.png" data-srcset="/static/2022-01-23-18-33-34-eb04c107fbf19a21c215aa4ab3b643ba-a67b7.png 200w,\n/static/2022-01-23-18-33-34-eb04c107fbf19a21c215aa4ab3b643ba-0b187.png 400w,\n/static/2022-01-23-18-33-34-eb04c107fbf19a21c215aa4ab3b643ba-fee1c.png 800w,\n/static/2022-01-23-18-33-34-eb04c107fbf19a21c215aa4ab3b643ba-88b8f.png 1154w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/76wcb0?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>这就是我们实现鼠标悬停图片放大效果的时候无须指定层级的原因。</p>\n<p>我们再看一个使用 transform 属性限制 z-index: -1 层级位置的案例，有一个模拟纸张投影的效果，HTML 代码结构如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="92894381714301730000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<div class=&quot;container&quot;>\n   <div class=&quot;page&quot;></div>\n</div>`, `92894381714301730000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>page<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>其中，容器元素设置了让效果更突出的深灰色背景，纸张元素使用 ::before 和 ::after 伪元素创建了模拟卷角投影的效果，由于投影效果需要放在纸张元素后面，因此 z-index 设为了负值，如下所示：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="49625602391999420000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.container {\n   background-color: #666;\n}\n\n.page {\n   width: 300px;\n   height: 200px;\n   background-color: #f4f39e;\n   box-shadow: 0 2px 10px 1px rgba(0, 0, 0, 0.2);\n   border-bottom-right-radius: 50% 10px;\n   position: relative;\n}\n\n.page::before {\n   transform: skew(-15deg) rotate(-5deg);\n   left: 15px;\n   bottom: 10px;\n   box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);\n}\n\n.page::after {\n   transform: skew(15deg) rotate(8deg);\n   right: 15px;\n   bottom: 25px;\n   box-shadow: 8px 8px 10px rgba(0, 0, 0, 0.4);\n}\n\n.page:before,\n.page:after {\n   content: \'\';\n   width: 90%;\n   height: 30%;\n   position: absolute;\n   z-index: -1;\n}`, `49625602391999420000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.container</span> <span class="token punctuation">{</span>\n   <span class="token property">background-color</span><span class="token punctuation">:</span> #666<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.page</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>\n   <span class="token property">background-color</span><span class="token punctuation">:</span> #f4f39e<span class="token punctuation">;</span>\n   <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 2px 10px 1px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.2<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token property">border-bottom-right-radius</span><span class="token punctuation">:</span> 50% 10px<span class="token punctuation">;</span>\n   <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.page::before</span> <span class="token punctuation">{</span>\n   <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">skew</span><span class="token punctuation">(</span>-15deg<span class="token punctuation">)</span> <span class="token function">rotate</span><span class="token punctuation">(</span>-5deg<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token property">left</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>\n   <span class="token property">bottom</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>\n   <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 8px 16px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.3<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.page::after</span> <span class="token punctuation">{</span>\n   <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">skew</span><span class="token punctuation">(</span>15deg<span class="token punctuation">)</span> <span class="token function">rotate</span><span class="token punctuation">(</span>8deg<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token property">right</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>\n   <span class="token property">bottom</span><span class="token punctuation">:</span> 25px<span class="token punctuation">;</span>\n   <span class="token property">box-shadow</span><span class="token punctuation">:</span> 8px 8px 10px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.4<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.page:before,\n.page:after</span> <span class="token punctuation">{</span>\n   <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">\'\'</span><span class="token punctuation">;</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 90%<span class="token punctuation">;</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 30%<span class="token punctuation">;</span>\n   <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n   <span class="token property">z-index</span><span class="token punctuation">:</span> -1<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>此时，::before 和 ::after 伪元素创建的投影效果不见了，如图 4-50 所示</p>\n<p>原因就在于，z-index: -1 是定位在第一个层叠上下文祖先元素的背景层上的，而网页在默认状态下的层叠上下文元素就是 <code class="language-text">&lt;html&gt;</code> 根元素，也就是伪元素创建的阴影效果其实是在页面根元素的上面、在 .container 元素的下面，而 .container 元素设置了背景颜色，挡住了伪元素，因此阴影效果在视觉上不可见。</p>\n<p>要想解决这个问题很简单，把 .container 元素作为层叠上下文元素即可，实现这个操作的方法很多，比较合适的方法就是设置一个无关紧要的 transform 属性值。例如我就喜欢设置 scale(1)，因为拼写更快：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="72751042842953015000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.container {\n   transform: scale(1);\n}`, `72751042842953015000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.container</span> <span class="token punctuation">{</span>\n   <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>1<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>此时的结果如图 4-51 所示，可以看到纸张底部两个角落均出现了明显的卷角投影效果。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-23-18-47-23-c320a32781f72cbe1bfda81125b54cd1-4c90f.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 53.414001728608476%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABlklEQVQoz6WRW0sCURDH93Mq6Oa6umVG6+4hK3PN1YzqwYegEHWj6FsUVLa6lwdfKixTSNOHLoa7Xshro5kaQQT9+R8OM8yPmTkH8/l8LpcLIcQwrNuNolE+Hg/8tCAEIhE/Quy0MJqmLRYLSZIzMwTDzL5VIvVaTNeiNX1iCJuNWLm0Z7NZCcI6FsYwDFx2u50gSMQ63irRek3QtXhNnxjCZkMol/YpykaStrH+B8PoAFMU9XcYOo1geC0cx61WAsct7O9wGWByvPMAXhmK4zjGxSLkqLzCCwladQCMrVVjABcedj2ry+FweGdne3trCz4I83q9/FABPujx0NCn2zlqvR+2W9/c7x+/vkTWPCt+P0/Ti7Cs0+nE4BgMBqPROEvNcdzS+dm6lNoYWQrJ0mYqGUpcBE9P+AOBXXDOw8Amk8lsNsOyWDqdVhRFVVVlqGQyJYpiUkwNcgokVVlWJUkRL6VEQpJlsKx+CetPqdPpFoolTdNbrfbVdebuPn+TyWZz+dtsrlgsFYqPT88vUNbr9T7rPwA3gLBUTTqyxgAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 23 18 47 23" title="" data-src="/static/2022-01-23-18-47-23-c320a32781f72cbe1bfda81125b54cd1-fee1c.png" data-srcset="/static/2022-01-23-18-47-23-c320a32781f72cbe1bfda81125b54cd1-a67b7.png 200w,\n/static/2022-01-23-18-47-23-c320a32781f72cbe1bfda81125b54cd1-0b187.png 400w,\n/static/2022-01-23-18-47-23-c320a32781f72cbe1bfda81125b54cd1-fee1c.png 800w,\n/static/2022-01-23-18-47-23-c320a32781f72cbe1bfda81125b54cd1-4c90f.png 1157w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/45ytkg?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<h3 id="固定定位失效"><a href="#%E5%9B%BA%E5%AE%9A%E5%AE%9A%E4%BD%8D%E5%A4%B1%E6%95%88" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>固定定位失效</h3>\n<p>想要实现固定定位效果，可以应用 position: fixed 声明。大部分情况下，最终的样式表现是符合预期的，但是，如果父元素设置了 transform 变换，则固定定位效果就会失效，样式表现就会类似于绝对定位。例如：</p>\n<html><head></head><body><div class="gatsby-code-button-container" data-toaster-id="40833012065157280000" data-toaster-class="gatsby-code-button-toaster" data-toaster-text-class="gatsby-code-button-toaster-text" data-toaster-text="复制成功" data-toaster-duration="3500" onclick="copyToClipboard(`<p>\n   <img data-src=&quot;./1.jpg&quot; />\n</p>\n<p class=&quot;transform&quot;>\n   <img src=&quot;./1.jpg&quot; />\n</p>\n<style>\n   img {\n      position: fixed;\n   }\n\n   .transform {\n      transform: scale(1);\n   }\n</style>`, `40833012065157280000`)">\n              <div class="gatsby-code-button" title="html">\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div></body></html>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>./1.jpg<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>transform<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>./1.jpg<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n   <span class="token selector">img</span> <span class="token punctuation">{</span>\n      <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">.transform</span> <span class="token punctuation">{</span>\n      <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>1<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>结果页面滚动的时候，第一张图片纹丝不动，第二张图片跟着页面滚动，这说明第二张图片的固定定位效果失效了。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/bcp7k3?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>此特性表现不包括 IE 浏览器。</p>\n<p>另外，顺便提一下，filter 滤镜也会让子元素的固定定位效果失效。那么，问题来了，如何让变换效果和固定定位同时有效呢？之前有人问过我这样一个问题：产品的要求是既要有动画又要固定定位，有什么方法可以使两者共存呢？解决方法就是使用嵌套，外层元素负责固定定位，内层元素负责实现动画。</p>\n<h3 id="改变-overflow-对绝对定位元素的限制"><a href="#%E6%94%B9%E5%8F%98-overflow-%E5%AF%B9%E7%BB%9D%E5%AF%B9%E5%AE%9A%E4%BD%8D%E5%85%83%E7%B4%A0%E7%9A%84%E9%99%90%E5%88%B6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>改变 overflow 对绝对定位元素的限制</h3>\n<p>下面这句话源自 CSS2.1 规范：</p>\n<blockquote>\n<p>如果绝对定位元素含有 overflow 属性值不为 visible 的祖先元素，同时，该祖先元素以及到该绝对定位元素之间的任何嵌套元素都没有 position: static 的声明，则 overflow 对该 absolute 元素不起作用。</p>\n</blockquote>\n<p>现在这个规范已经不准确了，因为现在不仅 position 属性值不为 static 的元素可以影响绝对定位在 overflow 元素中的表现，transform 属性值不为 none 的元素也可以影响绝对定位在 overflow 元素中的表现。例如：</p>\n<html><head></head><body><div class="gatsby-code-button-container" data-toaster-id="88790032853843920000" data-toaster-class="gatsby-code-button-toaster" data-toaster-text-class="gatsby-code-button-toaster-text" data-toaster-text="复制成功" data-toaster-duration="3500" onclick="copyToClipboard(`<p>\n   <img data-src=&quot;1.jpg&quot; />\n</p>\n<p class=&quot;transform&quot;>\n   <img src=&quot;1.jpg&quot; />\n</p>\n<style>\n   p {\n      border: solid deepskyblue;\n      width: 150px;\n      height: 150px;\n      overflow: hidden;\n   }\n\n   img {\n      position: absolute;\n   }\n\n   .transform {\n      transform: scale(1);\n   }\n</style>`, `88790032853843920000`)">\n              <div class="gatsby-code-button" title="html">\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div></body></html>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1.jpg<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>transform<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1.jpg<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n   <span class="token selector">p</span> <span class="token punctuation">{</span>\n      <span class="token property">border</span><span class="token punctuation">:</span> solid deepskyblue<span class="token punctuation">;</span>\n      <span class="token property">width</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>\n      <span class="token property">height</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>\n      <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">img</span> <span class="token punctuation">{</span>\n      <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">.transform</span> <span class="token punctuation">{</span>\n      <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>1<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>第一个 <code class="language-text">&lt;img&gt;</code> 元素没有被 overflow: hidden 隐藏，第二个 <code class="language-text">&lt;img&gt;</code> 元素被 overflow: hidden 隐藏了（因为设置了 transform 变换），如图 4-52 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-26-09-42-50-23836a7b8df9a756ce51930dc7933bd7-f2909.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 768px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 60.286458333333336%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAABwklEQVQoz2P4Dwb//v4BkocPLZnfYnd2VeCBGb6zGn3LQy1P7d0AFP/7589/bIABSv/9DSQu7e/aV8F2e6bMtQ6JLldxGWaGGVMmA8V/37v3/8GD/7du/f/3D6fmCwf7T08VvtqsfjBf6WC0aoom95QJYM137vwH6r979//fvzg1Hz/QciKEYZemQI0WZ5Iat404w/zZU4Dif37/xuvsfyAjb93dd6Gr7Mji+gtb6k+sqD85LfnZhQNgyb/4NP8De+bmgxv7Tqy7dWf7lYubrl7f+x3swX//cQIUZx/b0bYym+HqJPHD5dy1YSqPPn6Dmgu0GUj++4dP89XDfae6BO7MVbvbIb012eT124//P3z4d+XK/zdv/j95AkKfPuHUfPpAz9kGnhMuCt0mQvVuuq/fvP//9es/YAwBAwwY1UCEFtr/IACs+dSJSYfdpbaE6yxOVOxMsn757QfIWIiC/xCHowCYzeBw+fT1w4sX919+fPT5y6PvX5/9+U8AMJw9d/Huvftv3r69e//+jRu3Hjx6cu7c5ZOnLl68fOPSxcv37j24fuP29Rs3r16/ceXq9bPnLpy+cPHY8RMXL10+ceIUAO2ZZxH4inK+AAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 26 09 42 50" title="" data-src="/static/2022-01-26-09-42-50-23836a7b8df9a756ce51930dc7933bd7-f2909.png" data-srcset="/static/2022-01-26-09-42-50-23836a7b8df9a756ce51930dc7933bd7-60902.png 200w,\n/static/2022-01-26-09-42-50-23836a7b8df9a756ce51930dc7933bd7-48de7.png 400w,\n/static/2022-01-26-09-42-50-23836a7b8df9a756ce51930dc7933bd7-f2909.png 768w" data-sizes="(max-width: 768px) 100vw, 768px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/g1zgyi?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<h3 id="改变绝对定位元素的包含块"><a href="#%E6%94%B9%E5%8F%98%E7%BB%9D%E5%AF%B9%E5%AE%9A%E4%BD%8D%E5%85%83%E7%B4%A0%E7%9A%84%E5%8C%85%E5%90%AB%E5%9D%97" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>改变绝对定位元素的包含块</h3>\n<p>过去绝对定位元素的包含块是第一个 position 属性值不为 static 的祖先元素，现在 transform 属性值不为 none 的元素也可以作为绝对定位元素的包含块。例如：</p>\n<html><head></head><body><div class="gatsby-code-button-container" data-toaster-id="46316444815394960000" data-toaster-class="gatsby-code-button-toaster" data-toaster-text-class="gatsby-code-button-toaster-text" data-toaster-text="复制成功" data-toaster-duration="3500" onclick="copyToClipboard(`<p>\n   <img data-src=&quot;1.jpg&quot; />\n</p>\n<style>\n   p {\n      border: solid deepskyblue;\n      width: 150px;\n      height: 150px;\n      transform: scale(1);\n   }\n\n   img {\n      width: 100%;\n      position: absolute;\n   }\n</style>`, `46316444815394960000`)">\n              <div class="gatsby-code-button" title="html">\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div></body></html>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1.jpg<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n   <span class="token selector">p</span> <span class="token punctuation">{</span>\n      <span class="token property">border</span><span class="token punctuation">:</span> solid deepskyblue<span class="token punctuation">;</span>\n      <span class="token property">width</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>\n      <span class="token property">height</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>\n      <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>1<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">img</span> <span class="token punctuation">{</span>\n      <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>\n      <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><code class="language-text">&lt;img&gt;</code> 元素的宽度是 150px，因为此时的 100% 宽度是相对于父元素 <code class="language-text">&lt;p&gt;</code> 计算的，如图 4-53 所示。但是，如果父元素 <code class="language-text">&lt;p&gt;</code> 没有设置 <code class="language-text">transform: scale(1)</code>，则图片的宽度就不一定是 150px 了。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/4mjvuh?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<h3 id="深入了解矩阵函数-matrix"><a href="#%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3%E7%9F%A9%E9%98%B5%E5%87%BD%E6%95%B0-matrix" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>深入了解矩阵函数 matrix()</h3>\n<p>transform 变换还支持矩阵函数 matrix()。无论是位移、旋转、缩放还是斜切，其变换的本质都是应用矩阵函数 matrix() 进行矩阵变换。所谓矩阵变换，就是套用矩阵公式，把原先的坐标点转换成另外一个坐标点的过程。其语法如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="24221280966051940000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`transform: matrix(a, b, c, d, e, f);`, `24221280966051940000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">matrix</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d<span class="token punctuation">,</span> e<span class="token punctuation">,</span> f<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>可以看到总共有 6 个参数（a ～ f），参数数量多是多了点，但是，只要你认真学习，就会发现，矩阵真的很难！所以，这里只介绍 2D 变换中的矩阵变换，关于 3D 变换中的矩阵变换大家可以参考更专业的资料。</p>\n<p>matrix() 函数的 6 个参数对应的矩阵如图 4-54 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-26-09-54-03-007c5ca66430691594e5685517f86a84-f690e.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 487px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 50.71868583162218%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABV0lEQVQoz4VQ3WuCcBTtr+6h13oo+qT36E/oxaHOOTfNzGUsmy3KFkFFlEREWmtq7dDdRhvFLnLxnN859ytyPEUQBMjFYjEajeLncDggh2G43++P35FKpeLxOPHERM7NyWSy2+0KguA4DqBt271ej2qxLGsYRjqd/in915zJZMhADVer1Xg8JoFlWXjK5XJXzdlsFiJFUdbrNeB0OuU4joY0TXMymfzTGWMPh0Pf9wHn8/loNCL1crmczWZY+6o5n8/DXCgUBoMBIMMwpVKJ1JIkoRZGu2CmVolEAltVKpXFYgFYr9d5nidBs9ksl8uxWOyCmTBOIoriF3PGU6iq2ul0fpld18Nt/VMQ9eH72AIQT/g8b7vbvSPjckEYbrc7cBvXBRsR7x8bRqtv2337zXM3xnO71WqblmW+vIq3EsPeyZr+IFeZG17TG5quKzVNrukcL8jq0ydfPxhGX7i7LgAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 26 09 54 03" title="" data-src="/static/2022-01-26-09-54-03-007c5ca66430691594e5685517f86a84-f690e.png" data-srcset="/static/2022-01-26-09-54-03-007c5ca66430691594e5685517f86a84-28e07.png 200w,\n/static/2022-01-26-09-54-03-007c5ca66430691594e5685517f86a84-e077b.png 400w,\n/static/2022-01-26-09-54-03-007c5ca66430691594e5685517f86a84-f690e.png 487w" data-sizes="(max-width: 487px) 100vw, 487px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>注意书写方向是从上到下的。</p>\n<p>大家可以把矩阵想象成古代的士兵方阵，若要让其发生变化，就要让其与另外一个士兵方阵对战，即使这是一个小方阵。这个变化过程可以用图 4-55 所示的转换公式表现。</p>\n<p>图 4-55 所示的 x 和 y 表示转换元素的所有坐标变量，后面的 ax + cy + e 和 bx + dy + f 就是转换之后的新的坐标，这个新的坐标是如何计算得来的呢？</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-26-09-56-24-b97e34a1f48fa04a1773c011406e5edd-a9af0.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 28.39080459770115%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsSAAALEgHS3X78AAABHUlEQVQY0z2Py26CYBCFef83YKvEaAIs2BhkhQkxkbRAkUuAWKBcbLkZtKAi0BObMIvJ/POf+WYOUZbl8/k8n8/jOBqGQVFUEAQsy3qeN5vN0CRJ0jTNx+PRti3ERVHc73cU8/mcOJ1O+AjDcBgGx3HW6zUQiqLUdQ0E8nK5RCfP8ziOIfB9P4qiJEl4nidc173dbvv9HvuzLNtsNrZt73Y7QGmahpTjOLDwrKrqcDioqorlgEqSRMiyfL1eRVHs+x7nMQxjWZYgCECsVisQkaHDjsvlkqbpdruFRxSLxYLoug7GcDMy2DgMLmAY9fF4RFPTtKZpUAA0vqJ/ha7rxP/YNJ9nxYdu/DbNZxC+Kdq7on3/ZKZl++HXpJniD0xaPAIZki+3AAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 26 09 56 24" title="" data-src="/static/2022-01-26-09-56-24-b97e34a1f48fa04a1773c011406e5edd-fee1c.png" data-srcset="/static/2022-01-26-09-56-24-b97e34a1f48fa04a1773c011406e5edd-a67b7.png 200w,\n/static/2022-01-26-09-56-24-b97e34a1f48fa04a1773c011406e5edd-0b187.png 400w,\n/static/2022-01-26-09-56-24-b97e34a1f48fa04a1773c011406e5edd-fee1c.png 800w,\n/static/2022-01-26-09-56-24-b97e34a1f48fa04a1773c011406e5edd-a9af0.png 870w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>这就是大学线性代数的知识了，其实挺简单的。3×3 矩阵每一行的第一个值与后面 1×3 矩阵的第一个值相乘，3×3 矩阵每一行的第二个值与 1×3 矩阵的第二个值相乘，3×3 矩阵每一行的第三个值与 1×3 矩阵的第三个值相乘，然后将 3 个乘积结果相加，如图 4-56 所示。其中，ax + cy + e 表示变换后的水平坐标，bx + dy + f 表示变换后的垂直坐标。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-26-09-57-39-6df95ed6d33c81c42097fd00efb1fcae-d9352.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 27.963176064441885%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABV0lEQVQY0z1Oy07CUBTs/7n2B1yS6Nq4cWFI1IgJG8GFCQkLNiKoRNGimAK22FIqryvQFvqkpbSg2NJCAW9iwsnJ5DxmJoMcZ3fr9MPgIjLt1xgmHI+dWcZ3MLoffNwLR07W6/XdbYogcG/uee5sOv0ZDnU4ue7sJYciR9cBunhDBQIag9F0KJOOCoJ2eXV4HtqKJaKu46LPWYoix5apawNZlgAAI0PXdY2mK0iP5V3XqzTq88XCsibYW54VhadImNnZTiUTqqLkX3MU+aGqymRsKrJcJnBoBJtju8hnteI4v0QJ8/2FJAqZ+zTPC6nkKU0cxGMhGBtFs2QZZ7ttKLBtGy8VzNHQMkfFAoZADWSsViuI8Ndpt33fh1QYk2U78AhaLcMwNhxYy6UPkec45H+HyRmmJkqK7cwaTVCt1pkaaH11mwDwfZHleoIgFQvEO06qqr4x+gNJwi8QaZ+V2gAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 26 09 57 39" title="" data-src="/static/2022-01-26-09-57-39-6df95ed6d33c81c42097fd00efb1fcae-fee1c.png" data-srcset="/static/2022-01-26-09-57-39-6df95ed6d33c81c42097fd00efb1fcae-a67b7.png 200w,\n/static/2022-01-26-09-57-39-6df95ed6d33c81c42097fd00efb1fcae-0b187.png 400w,\n/static/2022-01-26-09-57-39-6df95ed6d33c81c42097fd00efb1fcae-fee1c.png 800w,\n/static/2022-01-26-09-57-39-6df95ed6d33c81c42097fd00efb1fcae-d9352.png 869w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>我们通过一个简单的例子来快速了解一下，假设矩阵参数如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="58674760852187660000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`transform: matrix(1, 0, 0, 1, 30, 30); /* a=1, b=0, c=0, d=1, e=30, f=30 */`, `58674760852187660000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">matrix</span><span class="token punctuation">(</span>1<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 1<span class="token punctuation">,</span> 30<span class="token punctuation">,</span> 30<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* a=1, b=0, c=0, d=1, e=30, f=30 */</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>我们随便选取一个点坐标，例如(0, 0)，即 x=0, y=0。于是，矩阵计算后的 x 坐标就是 ax + xy + e = 1 × 0 + 0 × 0 + 30 = 30。矩阵计算后的 y 坐标就是 bx + dy + f = 0 × 0 + 1 × 0 + 30 = 30。</p>\n<p>也就是点坐标从 (0, 0) 变成了 (30, 30)。请读者好好想象一下，原来 (0, 0) 的位置，经过矩阵变换后就移到了 (30, 30) 的位置，是不是等同于往右方和下方各偏移了 30px？如果我们再选取其他坐标点进行计算，就会发现计算后的坐标相比原坐标同样是往右方和下方各偏移了 30px。实际上 transform: matrix(1, 0, 0, 1, 30, 30) 等同于 transform: translate(30px, 30px)。</p>\n<p>注意，translate()、rotate() 等函数都是需要单位的，而 matrix() 函数中的参数的单位是省略的。</p>\n<h4 id="位移：translate-函数"><a href="#%E4%BD%8D%E7%A7%BB%EF%BC%9Atranslate-%E5%87%BD%E6%95%B0" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>位移：translate() 函数</h4>\n<p>位移变换函数 translate(x, y) 中的 x 和 y 分别对应 matrix() 函数中的 e 和 f 两个参数，语法示意如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="2297427220189285400"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`transform: matrix(a, b, c, d, 水平偏移距离, 垂直偏移距离);`, `2297427220189285400`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">matrix</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d<span class="token punctuation">,</span> 水平偏移距离<span class="token punctuation">,</span> 垂直偏移距离<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>我们只要关心最后 2 个参数就可以了，至于前面 4 个参数，它们和位移变化没有关系。</p>\n<h4 id="缩放：scale-函数"><a href="#%E7%BC%A9%E6%94%BE%EF%BC%9Ascale-%E5%87%BD%E6%95%B0" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>缩放：scale() 函数</h4>\n<p>偏移变换只需要关心最后 2 个参数，缩放变换同样也只需要关心 2 个参数，那么是哪两个呢？</p>\n<p>下面的 CSS 声明是位移变换使用的矩阵变换值，其中两个数值为 1 的参数就是与缩放变换计算相关的参数，因为缩放默认大小就是 1：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="50636719662455670000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`transform: matrix(1, 0, 0, 1, 30, 30); /* a=1, b=0, c=0, d=1, e=30, f=30 */`, `50636719662455670000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">matrix</span><span class="token punctuation">(</span>1<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 1<span class="token punctuation">,</span> 30<span class="token punctuation">,</span> 30<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* a=1, b=0, c=0, d=1, e=30, f=30 */</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>其中参数 a 表示 x 轴缩放大小，参数 d 表示 y 轴缩放大小。</p>\n<p>我们套用矩阵计算公式计算下就明白了，假设原始坐标是 (x, y)，缩放比例是 s，则：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="10517983031977196000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`x\' = ax + cy + e = sx + 0y + 0 = sx\ny\' = bx + dy + f = 0x + sy + 0 = sy`, `10517983031977196000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title=""\n              >\n                \n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">x&#39; = ax + cy + e = sx + 0y + 0 = sx\ny&#39; = bx + dy + f = 0x + sy + 0 = sy</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>可以看到最终的坐标就是原始坐标按缩放比例缩放的结果，表明参数 a 和参数 d 确实是和缩放相关的矩阵参数。我们不妨测试一下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="53501022745268800000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`img {\n   transform: matrix(3, 0, 0, 1, 0, 0);\n}`, `53501022745268800000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">img</span> <span class="token punctuation">{</span>\n   <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">matrix</span><span class="token punctuation">(</span>3<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 1<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>其中参数 a 是 3，参数 d 是 1，这表示水平 x 轴放大 3 倍，垂直 y 轴的大小是原来的 1 倍（相等），最终的效果如图 4-57 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-02-09-13-40-42-6369af540e99930be19907237a0f0e8a-e2f03.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 33.179190751445084%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsSAAALEgHS3X78AAABtklEQVQY0wGrAVT+ALJ8KKd3Kp5xKa18KtacLuCkL9+iLt2dLtmWLtKOLsSBLbBzK7yCLLGBLIBZJ2I+JWtAJoVPJ3xPJl1DJQDFhhq9ghy5fxu9gRzMih3VkB7Zlh7amR7Ykh7TiB3Lfx2kZBqFRhdzOBZeLRQ1HBIXERAgFhAhFBESDREAz5AezY4hzo8g0Zgg1KAh1p8h2JAh24Qg45ch4pUh3YYhymofsE4dzVsgwFYew1YegDoaSyIVKhgTDhATAMCJIcWUJMybJNWNJNhmJdRCJcMsI54cIY8+IYpIIYg0IG0zHmAsHX82H4dBH3Y5HmM3HUc7GyklGREWGADGlhfLfBvTPBrTGRfPJhipLxWYShPDhhi3cxajTBWoQBWHRxJ0RRKDRxSITBR1QhJzQhN/TRVyQxRiMBMA7+O67si69L67+dbA+OS93dK75NS9/+6//+zB++XA++K//+a//+K//+K//+XA/uLA99i7+dm69Na679C5AP7///////b3+M3V3Ovw9+zw8tbb49TZ5cbO2MjO2M/V3tLZ49Tb5M7U387T38/X4PT39/////7//////4i0159I8EPAAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 02 09 13 40 42" title="" data-src="/static/2022-02-09-13-40-42-6369af540e99930be19907237a0f0e8a-fee1c.png" data-srcset="/static/2022-02-09-13-40-42-6369af540e99930be19907237a0f0e8a-a67b7.png 200w,\n/static/2022-02-09-13-40-42-6369af540e99930be19907237a0f0e8a-0b187.png 400w,\n/static/2022-02-09-13-40-42-6369af540e99930be19907237a0f0e8a-fee1c.png 800w,\n/static/2022-02-09-13-40-42-6369af540e99930be19907237a0f0e8a-e2f03.png 865w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>可以看到图片水平拉伸了 3 倍。</p>\n<h4 id="旋转：rotate-函数"><a href="#%E6%97%8B%E8%BD%AC%EF%BC%9Arotate-%E5%87%BD%E6%95%B0" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>旋转：rotate() 函数</h4>\n<p>旋转要比位移和缩放难一些，需要用到三角函数的知识。</p>\n<p>假设旋转角度为 θ，则矩阵计算方法和参数如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="85401832177975980000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`matrix(cosθ, sinθ, -sinθ, cosθ, 0, 0)`, `85401832177975980000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token function">matrix</span><span class="token punctuation">(</span>cosθ<span class="token punctuation">,</span> sinθ<span class="token punctuation">,</span> -sinθ<span class="token punctuation">,</span> cosθ<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>结合矩阵公式，就有：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="97918722383514470000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`x\' = xcosθ - ysinθ + 0 = xcosθ - ysinθ\ny\' = xsinθ + ycosθ + 0 = xsinθ + ycosθ`, `97918722383514470000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title=""\n              >\n                \n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">x&#39; = xcosθ - ysinθ + 0 = xcosθ - ysinθ\ny&#39; = xsinθ + ycosθ + 0 = xsinθ + ycosθ</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>假设原坐标是 (100, 100)，旋转角度为 60 度，则有：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="96060396048335900000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`x\' = 100 * 0.5 - 100 * 0.866025 = -36.6025\ny\' = 100 * 0.866025 + 100 * 0.5 = 136.6025`, `96060396048335900000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title=""\n              >\n                \n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">x&#39; = 100 * 0.5 - 100 * 0.866025 = -36.6025\ny&#39; = 100 * 0.866025 + 100 * 0.5 = 136.6025</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>用坐标图表示就是图 4-58 所示的 A 点 (100, 100) 变换到了 B 点 (−36.6025, 136.6025)。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-02-09-13-48-05-1d43642dfe968cda67678561d82fd64c-ad786.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 457px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 109.62800875273521%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAIAAABPIytRAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACyUlEQVQ4y51TaVPaYBDmr/d7O5VKuMIRKnJDIoxMWxVFCUcg5FBLqW0dHatc4chFhAS6Cc7QOsqH7uy8s9l3n2efdzNrW240QRA0TXvt1rYBuVgsFEXeULAGz+eGqDxKf7koa73BWFZn0r95w1iswdABzh+3QzTDYFkuuGc6luUxgkNTdTPI8qtkgOBCOV4YqyvUGnx1K3hSzQDOQoUvw7jjNVes+h4rOKMVT7Lux1m/lQeKwcvgZDNgdqMduyVPgoJSwJtECQqJkBAAxSvgG7OzP9N07Jp1AYK3wBU/zq0YkUh5E9ibMtWiaRqqoQ7AzigAIAYuDrSAEHj/GrywDD6+W52talOe6abg+orI5ErTTgssjKcLQ1dV1SZJkqKo2lTh23fbYXILO3bFqzAkYHHFa3ZvHt4PgsFBFMzPHa/87ozEyXg4Gj0fGFQ8tSW4QIq2u/JvttLvAkfB7Lkv3QQK7PWBMU6YEEwL57wZNpljiyRXJFk820Bx3pumn7/5GRhNNUAwjBol+ChO5w6axCET2+dCO2eY74svRQf3+Ff/c5DgXImaK3wWipDBWNURheGzbpzD3PsRTx7NnkPBi+ChN83AHfxJX6aZ+JDGPPv2COlNUq5oGSU4DGewWDVkyp6uwYYF/nY9sIcpZ7yBxOqORNMdriAfS2+x0+0ohSRoJNZA4jSyW0N3yP5I+buzuSJjSbv82W/9Gljeb13cfL0esK271rX1aSUh077qTMfixn3W9eV8Bpyq+sI+LzQNFn35JBsW1LJVoINPNX020w1DlhVIQqDr1mmYBqTG4yPgbcv/Nuisz2f39w+yOp2IoihJkByNRsPhWBgOe/1Bt9vr9nqruNPt9gfCZCJ2e/2HTlfXdZsqTzJE7qJ9xbDcZaut63Oq3iielMkyVSiW8p8ODo6OS+Xq58MTCApnJMOwFEUfFU5lZfoH6wdogALDRiUAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 02 09 13 48 05" title="" data-src="/static/2022-02-09-13-48-05-1d43642dfe968cda67678561d82fd64c-ad786.png" data-srcset="/static/2022-02-09-13-48-05-1d43642dfe968cda67678561d82fd64c-aaeb0.png 200w,\n/static/2022-02-09-13-48-05-1d43642dfe968cda67678561d82fd64c-4d187.png 400w,\n/static/2022-02-09-13-48-05-1d43642dfe968cda67678561d82fd64c-ad786.png 457w" data-sizes="(max-width: 457px) 100vw, 457px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>因此，元素旋转 60 度也可以使用下面的矩阵函数表示：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="31424219256996856000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`transform: matrix(0.5, 0.866025, -0.866025, 0.5, 0, 0);\n/* 等同于 */\ntransform: rotate(60deg);`, `31424219256996856000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">matrix</span><span class="token punctuation">(</span>0.5<span class="token punctuation">,</span> 0.866025<span class="token punctuation">,</span> -0.866025<span class="token punctuation">,</span> 0.5<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">/* 等同于 */</span>\n<span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>60deg<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<h4 id="斜切：skew-函数"><a href="#%E6%96%9C%E5%88%87%EF%BC%9Askew-%E5%87%BD%E6%95%B0" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>斜切：skew() 函数</h4>\n<p>斜切用到了三角函数 tan，对应的是 b 和 c 两个参数，需要注意的是 b 参数表示的是 y 轴的斜切，而后面的参数 c 才是 x 轴的斜切。计算公式如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="35162830326206198000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`matrix(1, tan(θy), tan(θx), 1, 0, 0);`, `35162830326206198000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token function">matrix</span><span class="token punctuation">(</span>1<span class="token punctuation">,</span> <span class="token function">tan</span><span class="token punctuation">(</span>θy<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">tan</span><span class="token punctuation">(</span>θx<span class="token punctuation">)</span><span class="token punctuation">,</span> 1<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>假设原坐标是 (x, y)，则套用矩阵公式后的坐标计算结果为：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="26827445849803653000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`x\' = x + ytan(θx) + 0 = x + ytan(θx)\ny\' = xtan(θy) + y + 0 = xtan(θy) + y`, `26827445849803653000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title=""\n              >\n                \n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">x&#39; = x + ytan(θx) + 0 = x + ytan(θx)\ny&#39; = xtan(θy) + y + 0 = xtan(θy) + y</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<h4 id="汇总说明"><a href="#%E6%B1%87%E6%80%BB%E8%AF%B4%E6%98%8E" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>汇总说明</h4>\n<p>通过上面的分析，我们可以得到下面的结论：</p>\n<ul>\n<li>位移变换使用的是矩阵参数 e 和 f；</li>\n<li>缩放变换使用的是矩阵参数 a 和 d；</li>\n<li>旋转变换使用的是矩阵参数 a、b、c 和 d；</li>\n<li>斜切变换使用的是矩阵参数 b 和 c。</li>\n</ul>\n<p>仔细查看上面的结论，不难发现同时使用不同的变换就会有参数冲突的问题，假如想要同时使用旋转变换和缩放变换，各个参数值该如何使用矩阵表示呢？使用空格分开表示即可，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="83006609342133980000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`transform: matrix(0.5, 0.866, -0.866, 0.5, 0, 0) matrix(3, 0, 0, 1, 0, 0);`, `83006609342133980000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">matrix</span><span class="token punctuation">(</span>0.5<span class="token punctuation">,</span> 0.866<span class="token punctuation">,</span> -0.866<span class="token punctuation">,</span> 0.5<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">)</span> <span class="token function">matrix</span><span class="token punctuation">(</span>3<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 1<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>可以看到，使用 matrix() 函数表示实在太麻烦了，参数很多，还要计算和记忆。因此日常开发中我们使用的都是更加语义化的快捷函数，例如上面的矩阵表示实际上可以写作：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="99452864390454250000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`transform: rotate(60deg) scale(3, 1);`, `99452864390454250000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>60deg<span class="token punctuation">)</span> <span class="token function">scale</span><span class="token punctuation">(</span>3<span class="token punctuation">,</span> 1<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>但是，这并不表示 matrix()函数一无是处，举两个应用场景例子。</p>\n<ol>\n<li>\n<p>跨语言的图形变换处理。矩阵的计算是各个语言通用的，在跨语言、跨设备处理的时候，matrix() 函数就很有用。例如，在 Web 中呈现医学影像的图形，后台数据库存储的往往就是矩阵变换坐标，此时有了 matrix() 函数，就可以直接呈现了。</p>\n</li>\n<li>\n<p>前面提到运行 <code class="language-text">transform: scale(.75) translateX(40px)</code> 最后元素的水平偏移大小是 30px，这让不少开发者“踩了坑”，如果使用 matrix() 函数表示，就不会有这样的问题出现了：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="54062517190670565000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`transform: matrix(0.75, 0, 0, 0.75, 40, 0);`, `54062517190670565000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">matrix</span><span class="token punctuation">(</span>0.75<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.75<span class="token punctuation">,</span> 40<span class="token punctuation">,</span> 0<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n</li>\n</ol>\n<h4 id="3d-矩阵变换"><a href="#3d-%E7%9F%A9%E9%98%B5%E5%8F%98%E6%8D%A2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3D 矩阵变换</h4>\n<p>最后，关于 3D 矩阵变换再多说一两句。3D 矩阵变换不再是 3×3，而是 4×4，其计算方式和 2D 变换一致，只是上升了 1 个维度，计算复杂度增加了。这里简单示意下 3D 缩放效果的矩阵计算公式，如图 4-59 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-02-09-14-01-41-f710f92ea825c9a5b44323b11de710d8-acb24.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 399px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 60.902255639097746%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAABsElEQVQoz6WRSWvCUBSF/Z1u/BPu6kZwJygibkRBNyqtGG1JnGglQtHGGCM4VdOsnBaiGZ5xQE2PvEKplG7qQr7cd889d3BcLhfbtnVdd7lc1WrVsqzD4YCIIAjr9RrQarUWiwVgOBzyPO90OieTCT7P57ODiqfTaSKRGAwGDMMcj0dE/H6/oiiAcDjc6/UA8Xi83+9nMpl2u/1DPJvNotEoQBRFQgj0q9WKVoHzcrkEQKNpGjw6nc6tOBaLAYLBIFiW5WKxuNvtaKTb7QKQgBZSqZQkSb87o/x2u4VnvV5HC4hgcloFPePpL+dQKKSqKiAQCCCIJeVyOdM0qTNaSKfTt87z+ZyK4UxTKSADAoyKyHg8RnIymcRQt9uGJ8Dn89FLeL3e0WhEIzgboFaroUokEvne9ul0AuG8dx5Po9EwDINOiNvSg2PVeKU5WJjb7UabX2L7Hz8HrAi5rhf/+/0BU2wtC7zZaKZJTEI0XUeObgCJYZgbTUNHyMerg2O5LMMqH2pTEIfv12nfhFblhX/I5gts6bFUeWS5whOXZ0vl8nOBK9/nCqIkC6L02hQ+AW+vdYgVLdPHAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 02 09 14 01 41" title="" data-src="/static/2022-02-09-14-01-41-f710f92ea825c9a5b44323b11de710d8-acb24.png" data-srcset="/static/2022-02-09-14-01-41-f710f92ea825c9a5b44323b11de710d8-ff279.png 200w,\n/static/2022-02-09-14-01-41-f710f92ea825c9a5b44323b11de710d8-acb24.png 399w" data-sizes="(max-width: 399px) 100vw, 399px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>用代码表示就是：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="29393270650763000000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`transform: matrix3d(sx, 0, 0, 0, 0, sy, 0, 0, 0, 0, sz, 0, 0, 0, 0, 1);`, `29393270650763000000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">matrix3d</span><span class="token punctuation">(</span>sx<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> sy<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> sz<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 1<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<h3 id="常常被遗忘的-transform-origin-属性"><a href="#%E5%B8%B8%E5%B8%B8%E8%A2%AB%E9%81%97%E5%BF%98%E7%9A%84-transform-origin-%E5%B1%9E%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>常常被遗忘的 transform-origin 属性</h3>\n<p>transform-origin 属性可以用来改变元素变换的中心坐标点。很多开发者容易把这个 CSS 属性给遗忘，这个属性还是很实用的，大家可以强化记忆一下。</p>\n<p>变换默认是相对于元素的中心点进行的，这个中心点是由 transform-origin 属性决定的。</p>\n<p>在 IE9 浏览器中的 transform-origin 属性支持 2 个属性值，在 IE10+ 浏览器中则支持 3 个属性值，分别表示 x 轴、 y 轴和 z 轴的变换中心点，初始值是 50%、50% 和 0，其中需要注意以下几点。</p>\n<ul>\n<li>z 轴只能是数值。</li>\n<li>x 轴和 y 轴支持百分比值、数值和关键字属性值（left | center | right | top | bottom）。</li>\n<li>关键字属性值自带方位，因此 y 轴关键字写在前面也是合法的，例如：</li>\n</ul>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="43916969794312790000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* x轴 | y轴 */\ntransform-origin: right top;\n/* y轴 | x轴 */\ntransform-origin: top right;`, `43916969794312790000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* x轴 | y轴 */</span>\n<span class="token property">transform-origin</span><span class="token punctuation">:</span> right top<span class="token punctuation">;</span>\n<span class="token comment">/* y轴 | x轴 */</span>\n<span class="token property">transform-origin</span><span class="token punctuation">:</span> top right<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>center 关键字可省略，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="81135603454756540000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`transform-origin: bottom center;\n/* 可以写作 */\ntransform-origin: bottom;`, `81135603454756540000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">transform-origin</span><span class="token punctuation">:</span> bottom center<span class="token punctuation">;</span>\n<span class="token comment">/* 可以写作 */</span>\n<span class="token property">transform-origin</span><span class="token punctuation">:</span> bottom<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>同样，如果看到单个值语法，则另外一个省略的值就是 50%，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="83930176810897310000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`transform-origin: 20px;\n/* 等同于 */\ntransform-origin: 20px 50%;`, `83930176810897310000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">transform-origin</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>\n<span class="token comment">/* 等同于 */</span>\n<span class="token property">transform-origin</span><span class="token punctuation">:</span> 20px 50%<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>transform-origin 属性在实际项目开发中主要用在下面两个场景。</p>\n<ol>\n<li>\n<p>模拟现实世界物体的运动。例如蜡烛火焰摆动的效果，该效果需要设置火焰元素的 transform-origin 属性值为 bottom，这样火焰摆动的时候才自然。又如实现钟摆运动的动画效果，需要设置 transform-origin 属性值为 top，这样钟摆顶部就会固定，下方会摆动。</p>\n</li>\n<li>\n<p>布局与定位。例如，在 Chrome 浏览器中想要实现 10px 大小的字符，可以先设置 12px 大小的字符，然后缩放一下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="17571665634751187000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.text {\n  transform: scale(0.83333);\n}`, `17571665634751187000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.text</span> <span class="token punctuation">{</span>\n  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>0.83333<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>但是这样做有一个问题，transform 变换的时候元素的原始位置是保留的，这会导致元素缩小后原本设定的间距变大，此时可以使用 transform-origin 属性优化一下。如果元素是左对齐的，则可以设置：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="28679420742898864000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`transform-origin: left;`, `28679420742898864000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">transform-origin</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>如果元素是右对齐的，则可以设置：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="64659832985873240000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`transform-origin: right;`, `64659832985873240000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">transform-origin</span><span class="token punctuation">:</span> right<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n</li>\n</ol>\n<p>transform-origin 属性是支持 CSS 过渡和 CSS 动画效果的，活用这个特性可以实现体现数学之美的运动轨迹效果，本书不展开讲解。</p>\n<h4 id="transform-origin-属性作用原理"><a href="#transform-origin-%E5%B1%9E%E6%80%A7%E4%BD%9C%E7%94%A8%E5%8E%9F%E7%90%86" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>transform-origin 属性作用原理</h4>\n<p>transform-origin 属性的作用原理就是改变 transform 变换的中心点坐标。transform 变换默认的中心点坐标为 (0, 0)，如图 4-60 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-02-11-11-20-58-913d68e9b76ae02aa463a1b69bda7170-6566f.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 462px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 108.44155844155843%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAIAAABPIytRAAAACXBIWXMAAAsSAAALEgHS3X78AAACLUlEQVQ4y51U7W/SYBDvP2/8oDFZ5srK+gIC5ZPGRWRAsYUZE3Bs4DaqU3ASNbxsDGiBtvbNe/q0WAZIsssvT+653u/uenct4brOZriqMlFV1UWyxoEIu94Tx3E0beaukRWyaVqj8TSACufdSO32bsbBFQOMum7gEISXwAa12x8xCZFLlUKQKC7v6zxCPF3eZwX5y0/wt217iUwnRDZVCiPK5cPXWLocYYXmRnJSCnvvczmkBMZtZEwLvCl2OTMfJlv/LTspocwQaJGZL61mdhZkLmB6igTvHOOPufTxatmKohC6rs3nM9M0fnS6ETYXjQvRWGGB59QhSWf2DjLQdrjSL4Rd6m39vO045nA4JKB0yzIh0u/uMBovMkkRBgYnnXgHmXcirx4/jT96wlGxPIOKl/aYwqXcAX+gEXiTvLLHdOJfq3H9eM6BpYwbJl/92tJt2BA4gQwJmdQDRgXdZpfnzG8mQxKOLyOgfUQKNMlT/CtaT664Zj2hYbsHeQhMApgC6Sk7kQzJCGRgBOYzMnve7NwnK9P5yVmr1mgj1DFaH6pN3+IZTxvtSu1rfzD22mxv+Z4NXdv+PUMYABZPsbz5W/Ab8a3I4tttVKlPfrggsmEYvf5A07TpbDafa5Dw9haW7w4wGNwoigrW0XhiGH8mEwVBUfDPBJF7vcHL128uLuXKx9r1dQeeZY+Eo1wxL4jZnFA9Oa03LirVmvz56qz+SSq9L4qlb63vQPwLWfpXAj1GtU8AAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 02 11 11 20 58" title="" data-src="/static/2022-02-11-11-20-58-913d68e9b76ae02aa463a1b69bda7170-6566f.png" data-srcset="/static/2022-02-11-11-20-58-913d68e9b76ae02aa463a1b69bda7170-c4b43.png 200w,\n/static/2022-02-11-11-20-58-913d68e9b76ae02aa463a1b69bda7170-5dba5.png 400w,\n/static/2022-02-11-11-20-58-913d68e9b76ae02aa463a1b69bda7170-6566f.png 462w" data-sizes="(max-width: 462px) 100vw, 462px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>为了方便大家理解，我就使用这个中心点坐标来做原理讲解。在默认状态下，这个点的坐标是 (0, 0)。2D 矩阵变换的坐标转换公式如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="11083419936865413000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`x\' = ax + cy + e\ny\' = bx + dy + f`, `11083419936865413000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title=""\n              >\n                \n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">x&#39; = ax + cy + e\ny&#39; = bx + dy + f</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>坐标 (0, 0) 表示 x 是 0，y 是 0，因此，此时无论旋转多少度，变换后的坐标还是 (0, 0)，因为旋转相关的 4 个参数 a、b、c、d 都是与 0 相乘。</p>\n<p>现在，我们设置变换中心点位于左上角：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="14008604075941356000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`transform-origin: 0 0;`, `14008604075941356000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">transform-origin</span><span class="token punctuation">:</span> 0 0<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>现在的中心点坐标就不是 (0, 0) 了，而是 (140, -145)（这是因为色块尺寸为 280px×290px），如图 4-61 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-02-11-11-51-31-932f4a483de590f832e105e599c8dd37-2c5fa.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 601px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 82.36272878535773%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAAsSAAALEgHS3X78AAABeUlEQVQoz6WT7U+CQBzH/ft71dZS84FDBHRztmZzuVQeXrl62XxKQMU04GjRQiEXYAeYw2WO1nffHce4z933Bz8Sm4g8zzPNd89zN78LrXFdJ5wnwovjfK7XH7ZtaZoOdQO+GPoPQ/3VXK4sa7U0zT3Y3851kMly4+S0BEgGL/E4zW1NcYUSf4G3un0ZLXZdbw9GeLCDc3ndSYMmRnF5ko0ao/kkaHYHTwHsHoDRyVf1+yzBAprDEEBxOwOaT8WA7zIFZg8OJjjFprA4MBHAKDnFUZlaOVklc/XKeSWdv40Hh1GL7SJ2A0gWFBmcjHlyoQ2+S81TfKTmVncwixt7V/AfXliOYHGaBwGwG9FnT+Ot3vAoXK11klgzS7RR+KizBHOWaTz0jsYeTxVBUsTxAT+KC+NtGbb3FvZ8hfde2OHH/wrUhoF9JTb/UKLXH2oaNAzDsu3hSBgJkqpCVYOiNJnN51DXRWm8eFbQOJnKiqqp0H80leWRIH4B6Z5H0RvhvZsAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 02 11 11 51 31" title="" data-src="/static/2022-02-11-11-51-31-932f4a483de590f832e105e599c8dd37-2c5fa.png" data-srcset="/static/2022-02-11-11-51-31-932f4a483de590f832e105e599c8dd37-31ae8.png 200w,\n/static/2022-02-11-11-51-31-932f4a483de590f832e105e599c8dd37-e4d65.png 400w,\n/static/2022-02-11-11-51-31-932f4a483de590f832e105e599c8dd37-2c5fa.png 601w" data-sizes="(max-width: 601px) 100vw, 601px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>此时，中心点的旋转变换坐标值就变成了：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="47475788984901770000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`x\' = ax + cy + e = a * 140 - c * 145 + e\ny\' = bx + dy + f = b * 140 - d * 145 + f`, `47475788984901770000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title=""\n              >\n                \n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">x&#39; = ax + cy + e = a * 140 - c * 145 + e\ny&#39; = bx + dy + f = b * 140 - d * 145 + f</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>显然是一个有着明显坐标变化的新的坐标点，于是视觉上就有元素绕着左上角旋转的效果了。</p>\n<p>总结一下，所有 transform 变换本质上都是坐标点位置的矩阵变换，transform-origin 属性变化后，所有点的坐标都会发生变化，这导致最终的矩阵变换计算结果也发生变化。</p>\n<h3 id="scale-函数缩放和-zoom-属性缩放的区别"><a href="#scale-%E5%87%BD%E6%95%B0%E7%BC%A9%E6%94%BE%E5%92%8C-zoom-%E5%B1%9E%E6%80%A7%E7%BC%A9%E6%94%BE%E7%9A%84%E5%8C%BA%E5%88%AB" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>scale() 函数缩放和 zoom 属性缩放的区别</h3>\n<p>除了 Firefox 浏览器不支持 zoom 属性，其他所有浏览器都支持，且支持时间非常早，移动端也可以放心使用。zoom 属性的正式语法如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="22295450137870310000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`zoom: normal | reset | <number> | <percentage>;`, `22295450137870310000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">zoom</span><span class="token punctuation">:</span> normal | reset | &lt;number> | &lt;percentage><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>从语法中可以看出 zoom 属性支持以下属性值。</p>\n<ul>\n<li>百分比值。zoom: 50%，表示缩小到原来的一半。</li>\n<li>数值。zoom: 0.5，表示缩小到原来的一半。</li>\n<li>normal 关键字。zoom: normal 等同于 zoom: 1，是默认值。</li>\n<li>reset 关键字。zoom: reset，表示用户按 Ctrl 和 − 或 Ctrl 和 + 进行文档缩放的时候，元素不跟着缩小与放大。不过，这个关键字兼容性很糟糕，仅被 Safari 浏览器支持。</li>\n</ul>\n<p>下面我通过对比 zoom 属性缩放和 scale() 函数缩放的不同之处带大家快速了解一下 zoom 属性。</p>\n<ol>\n<li>\n<p>标准和非标准区别。zoom 属性是一个非标准属性，虽然 MDN 文档建议不要在非生产环境使用，但是根据我的判断，浏览器日后绝无可能放弃对 zoom 属性的支持。</p>\n</li>\n<li>\n<p>坐标系不同。zoom 属性缩放的中心坐标是相对于元素的左上角，且不能修改。transform 变换中的 scale() 函数缩放默认的中心坐标是元素的中心点。</p>\n</li>\n<li>\n<p>占据的尺寸空间表现不同。zoom 属性缩放会实时改变元素占据的尺寸空间。例如，一个图片原始尺寸是 128px×96px，则应用下面的 CSS 代码后，图片占据的尺寸就会变成 256px×192px，该图片周围的元素会被推开，并会触发重绘和重计算，因此 zoom 属性缩放的性能比 scale() 函数缩放的性能差。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="32499570830336610000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`img {\n  zoom: 2;\n}`, `32499570830336610000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">img</span> <span class="token punctuation">{</span>\n  <span class="token property">zoom</span><span class="token punctuation">:</span> 2<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>如果图片使用的是 scale() 函数缩放，则占据的尺寸还是原先的 128px×96px。</p>\n</li>\n<li>\n<p>元素应用 zoom 属性不会出现应用 transform 属性后的 N 个变化。元素应用 zoom 属性不会创建层叠上下文，不会影响 fixed 元素的定位和 overflow 属性对绝对定位的溢出隐藏，也不会改变绝对定位元素的包含块。</p>\n</li>\n</ol>\n<p>总而言之，zoom 属性就是一个普普通通的改变元素比例的 CSS 属性。</p>\n<h3 id="了解全新的-translate、scale-和-rotate-属性"><a href="#%E4%BA%86%E8%A7%A3%E5%85%A8%E6%96%B0%E7%9A%84-translate%E3%80%81scale-%E5%92%8C-rotate-%E5%B1%9E%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>了解全新的 translate、scale 和 rotate 属性</h3>\n<p>最新的 CSS Transforms Level 2 规范针对位移、缩放和旋转定义了全新的 CSS 属性。例如，位移可以直接使用 translate 属性，该属性支持 1 ～ 3 个值，分别表示 x 轴、y 轴和 z 轴，语法如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="70703823439987290000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`translate: 50%;\ntranslate: 10px 20px;\ntranslate: 50% 105px 5rem;`, `70703823439987290000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">translate</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>\n<span class="token property">translate</span><span class="token punctuation">:</span> 10px 20px<span class="token punctuation">;</span>\n<span class="token property">translate</span><span class="token punctuation">:</span> 50% 105px 5rem<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>缩放可以直接使用 scale 属性，支持 1 ～ 3 个值，分别表示 x 轴、y 轴和 z 轴，语法如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="70414857170497780000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`scale: 1;\nscale: 1.5;\nscale: 1 2 3;`, `70414857170497780000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">scale</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>\n<span class="token property">scale</span><span class="token punctuation">:</span> 1.5<span class="token punctuation">;</span>\n<span class="token property">scale</span><span class="token punctuation">:</span> 1 2 3<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>旋转可以直接使用 rotate 属性，语法相对复杂些：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="18649365943964623000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`rotate: 45deg;\n/* 指定旋转轴 */\nrotate: x 90deg;\nrotate: y 0.25turn;\nrotate: z 1.57rad;\n/* 矢量角度值 */\nrotate: 1 1 1 90deg;`, `18649365943964623000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">rotate</span><span class="token punctuation">:</span> 45deg<span class="token punctuation">;</span>\n<span class="token comment">/* 指定旋转轴 */</span>\n<span class="token property">rotate</span><span class="token punctuation">:</span> x 90deg<span class="token punctuation">;</span>\n<span class="token property">rotate</span><span class="token punctuation">:</span> y 0.25turn<span class="token punctuation">;</span>\n<span class="token property">rotate</span><span class="token punctuation">:</span> z 1.57rad<span class="token punctuation">;</span>\n<span class="token comment">/* 矢量角度值 */</span>\n<span class="token property">rotate</span><span class="token punctuation">:</span> 1 1 1 90deg<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>下面将逐一讲解上述语法中的元素：</p>\n<ul>\n<li>rotate: 45deg 等同于 transform: rotate(45deg)，是一个 2D 旋转变换；</li>\n<li>rotate: x 90deg 等同于 transform: rotateX(90deg)；</li>\n<li>rotate: y 0.25turn 等同于 transform: rotateY(0.25turn)；</li>\n<li>rotate: z 1.57rad 等同于 transform: rotateZ(1.57rad)；</li>\n<li>rotate: 1 1 1 90deg 等同于 transform: rotate3D(1, 1, 1, 90deg)。</li>\n</ul>\n<p>目前只有 Firefox 浏览器支持这个新特性，想要在实际项目中使用这个新特性，还需要一段时间，大家了解即可。最后，没有 skew 属性。</p>\n<h1 id="简单实用的-calc-函数"><a href="#%E7%AE%80%E5%8D%95%E5%AE%9E%E7%94%A8%E7%9A%84-calc-%E5%87%BD%E6%95%B0" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>简单实用的 calc() 函数</h1>\n<p>calc() 函数非常实用，项目使用率接近 100%，且其语法简单，效果显著，深受广大开发者喜欢。</p>\n<h2 id="关于-calc-函数"><a href="#%E5%85%B3%E4%BA%8E-calc-%E5%87%BD%E6%95%B0" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>关于 calc() 函数</h2>\n<p>calc() 函数支持加减乘除 4 种运算，任何可以使用 <code class="language-text">&lt;length&gt;</code>、<code class="language-text">&lt;frequency&gt;</code>、<code class="language-text">&lt;angle&gt;</code>、<code class="language-text">&lt;time&gt;</code>、<code class="language-text">&lt;percentage&gt;</code>、<code class="language-text">&lt;number&gt;</code> 或者 <code class="language-text">&lt;integer&gt;</code> 数据类型的地方都可以使用 calc() 函数。但这并不表示上述数据类型都可以出现在 calc() 函数中，该函数是有很多约束的。</p>\n<p>在 calc() 函数中，不能使用当前 CSS 属性不支持的数据类型。例如，下面这些 CSS 声明都是不合法的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="35354171824150348000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 不合法 */\nwidth: calc(100% - 10deg);\nwidth: calc(10s / 10);`, `35354171824150348000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 不合法 */</span>\n<span class="token property">width</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>100% - 10deg<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token property">width</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>10s / 10<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>在 calc() 函数中，运算符前后带单位或者带百分号的值只能进行加减运算，不能进行乘除运算，否则是不合法的，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="78763009731420050000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 不合法 */\nwidth: calc(10px * 10px);\nwidth: calc(90% / 1rem);`, `78763009731420050000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 不合法 */</span>\n<span class="token property">width</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>10px * 10px<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token property">width</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>90% / 1rem<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>在 calc() 函数中，除法运算斜杠右侧必须是不为 0 的数值类型，否则是不合法的，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="72982034356379250000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 不合法 */\nwidth: calc(100 / 10px);\nwidth: calc(100px / 0);`, `72982034356379250000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 不合法 */</span>\n<span class="token property">width</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>100 / 10px<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token property">width</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>100px / 0<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>关于 calc() 运算符的书写也是有一定的限制的，如加号和减号左右两边一定要有空格，否则是不合法的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="86948264330164980000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 不合法 */\nwidth: calc(100%-2rem);\nwidth: calc(lem+2px);`, `86948264330164980000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 不合法 */</span>\n<span class="token property">width</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>100%-2rem<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token property">width</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>lem+2px<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>因为浏览器无法区分 −2rem 和 +2px 是表示正负还是表示计算。乘法和除法符号两侧无须空格，但是为了格式一致、便于阅读，建议也要设置空格。calc() 函数在过去很长一段时间的发展中都处于一种很平和的状态，主要是以一种非常硬朗的方式实现各种自适应布局效果。例如，替换元素的宽度自适应：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="50615232140489510000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`button {\n   width: calc(100% - 20px);\n}`, `50615232140489510000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">button</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>100% - 20px<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>又如，根据设备屏幕设定根字号大小：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="63030052380057166000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`html {\n   font-size: calc(16px + 2 * (100vw - 375px) / 39);\n}`, `63030052380057166000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">html</span> <span class="token punctuation">{</span>\n   <span class="token property">font-size</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>16px + 2 * <span class="token punctuation">(</span>100vw - 375px<span class="token punctuation">)</span> / 39<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>再如，让等比例的列表尺寸之和可以 100% 匹配容器尺寸，如果写成 width: 16.67%，则 6 个列表尺寸之和可能会超过容器尺寸，如果写成 width: 16.66%，则 6 个列表尺寸之和可能会小于容器尺寸 1 ～ 2 像素。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="39149597106921340000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.list {\n   width: calc(100% / 6);\n}`, `39149597106921340000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.list</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>100% / 6<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>在数年前，calc() 函数突然大量地出现在 CSS 代码中，原因就是 CSS 变量出现了。</p>\n<p>我们只需要定义一个 CSS 自定义属性，让其他 CSS 样式全部基于这个自定义属性构建，然后我们只需要通过 JavaScript 代码重置这个唯一的 CSS 自定义属性值，整个网页的样式效果就会神奇地跟着变化，大大降低了实现成本和日后的维护成本。而基于 CSS 自定义属性构建其他 CSS 样式必须依赖 calc() 函数，这就导致 calc() 函数迎来了爆发式的发展。</p>\n<p>举个自定义进度条效果例子，以前我们需要先使用双层 HTML 标签模拟出进度条的样式，然后使用 JavaScript 代码实时改变内层 DOM 元素的宽度，这很麻烦。但是现在有了 CSS 自定义属性和 calc() 函数，就可以很方便地实现这个效果，HTML 代码和 CSS 代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="43854034284747570000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<label>图片 1：</label>\n<div class=&quot;bar&quot; style=&quot;--percent: 60;&quot;></div>\n<label>图片 2：</label>\n<div class=&quot;bar&quot; style=&quot;--percent: 40;&quot;></div>\n<label>图片 3：</label>\n<div class=&quot;bar&quot; style=&quot;--percent: 20;&quot;></div>\n<style>\n   .bar {\n      line-height: 20px;\n      background-color: #eee;\n   }\n\n   .bar::before {\n      counter-reset: progress var(--percent);\n      content: counter(progress) \'%\\2002\';\n      display: block;\n      width: calc(100% * var(--percent) / 100);\n      color: #fff;\n      background-color: deepskyblue;\n      text-align: right;\n   }\n</style>`, `43854034284747570000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">></span></span>图片 1：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>bar<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">--percent</span><span class="token punctuation">:</span> 60<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">></span></span>图片 2：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>bar<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">--percent</span><span class="token punctuation">:</span> 40<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">></span></span>图片 3：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>bar<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">--percent</span><span class="token punctuation">:</span> 20<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n   <span class="token selector">.bar</span> <span class="token punctuation">{</span>\n      <span class="token property">line-height</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>\n      <span class="token property">background-color</span><span class="token punctuation">:</span> #eee<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">.bar::before</span> <span class="token punctuation">{</span>\n      <span class="token property">counter-reset</span><span class="token punctuation">:</span> progress <span class="token function">var</span><span class="token punctuation">(</span>--percent<span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token property">content</span><span class="token punctuation">:</span> <span class="token function">counter</span><span class="token punctuation">(</span>progress<span class="token punctuation">)</span> <span class="token string">\'%\\2002\'</span><span class="token punctuation">;</span>\n      <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>\n      <span class="token property">width</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>100% * <span class="token function">var</span><span class="token punctuation">(</span>--percent<span class="token punctuation">)</span> / 100<span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>\n      <span class="token property">background-color</span><span class="token punctuation">:</span> deepskyblue<span class="token punctuation">;</span>\n      <span class="token property">text-align</span><span class="token punctuation">:</span> right<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>加载的进度数值和加载的进度条宽度全部由 —percent 这个 CSS 自定义属性控制，最终的效果如图 4-62 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-02-12-23-54-28-6badda8487d45b47299fdc277222aa92-46120.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 55.49828178694158%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABTklEQVQoz52QzUoCURTH78qInqAHaRMtWiZCJT1Dy2pXi54hoicI2vYCtsuyohDNO1/OOKPjF6XpnU/zNnPnnhwrsMggf/w5nxw45yB8d9syKqFnw/9B25iuFVka87QAk9oUYEuAAx32K7zjeAPPc71v+L6PduqQkmBdhBT+qQ0Bdiuwp/HutGFS1cJuG16dWdY+yxuncufcdC8IZPqxLi24tsGjYRCEQfhpfwUtYUjkYCEHc1lIZGH+ClYKsJznStf2bYtYU3EcB2lkIJGh7jNzCNUv1YYQsOhvOOcI3z+Yhk56/VluXi3yxRtIliD5yAvPjm+TPpm6LZlouK6Ljlpw2ICTJzhuw0sQAQsZi3gUMRa/ZOTjJPrIg3HMxoZRShGjA6KXaa/z5liqolRrpigpGEuGUTPrTVXTS1gcVWRFrTeacSyXBVGSy+po+B3MaFXrniPl5AAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 02 12 23 54 28" title="" data-src="/static/2022-02-12-23-54-28-6badda8487d45b47299fdc277222aa92-fee1c.png" data-srcset="/static/2022-02-12-23-54-28-6badda8487d45b47299fdc277222aa92-a67b7.png 200w,\n/static/2022-02-12-23-54-28-6badda8487d45b47299fdc277222aa92-0b187.png 400w,\n/static/2022-02-12-23-54-28-6badda8487d45b47299fdc277222aa92-fee1c.png 800w,\n/static/2022-02-12-23-54-28-6badda8487d45b47299fdc277222aa92-46120.png 1164w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/21fbmy?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>类似的案例非常多。随着陈旧设备的迅速淘汰，calc() 函数一定会铺天盖地袭来，大家准备好迎接 calc() 函数的暴风雨吧。</p>\n<p>最后，在现代浏览器中，还支持 calc() 函数嵌套使用，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="96456443533094290000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.list {\n   --size: calc(100% - 2rem);\n   width: calc(var(--size) / 6);\n}`, `96456443533094290000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.list</span> <span class="token punctuation">{</span>\n   <span class="token property">--size</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>100% - 2rem<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--size<span class="token punctuation">)</span> / 6<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>等同于：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="81783195761920480000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.list {\n   width: calc(calc(100% - 2rem) / 6);\n}`, `81783195761920480000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.list</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token function">calc</span><span class="token punctuation">(</span>100% - 2rem<span class="token punctuation">)</span> / 6<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<h2 id="了解-min、max-和-clamp-函数"><a href="#%E4%BA%86%E8%A7%A3-min%E3%80%81max-%E5%92%8C-clamp-%E5%87%BD%E6%95%B0" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>了解 min()、max() 和 clamp() 函数</h2>\n<p>min()、max() 和 clamp() 这 3 个函数是现代浏览器从 2018 年底开始支持的，理论上还不是可以放心使用的 CSS 特性。但是由于这几个函数太实用了，因此我建议大家尽量使用。至于那些陈旧的不支持的浏览器，直接使用固定值兜底，保证样式不乱即可。例如：</p>\n<p>例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="52889890125411140000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`html {\n   font-size: 16px;\n   font-size: clamp(16px, calc(16px + 2 * (100vw - 375px) / 39), 20px);\n}`, `52889890125411140000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">html</span> <span class="token punctuation">{</span>\n   <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>\n   <span class="token property">font-size</span><span class="token punctuation">:</span> <span class="token function">clamp</span><span class="token punctuation">(</span>16px<span class="token punctuation">,</span> <span class="token function">calc</span><span class="token punctuation">(</span>16px + 2 * <span class="token punctuation">(</span>100vw - 375px<span class="token punctuation">)</span> / 39<span class="token punctuation">)</span><span class="token punctuation">,</span> 20px<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>如果浏览器支持，则根字体大小随着浏览器宽度不同在 16px ～ 20px 弹性变化，如果浏览器不支持，则依然使用浏览器默认的根字体大小 16px。</p>\n<h3 id="语法"><a href="#%E8%AF%AD%E6%B3%95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>语法</h3>\n<p>和 calc() 函数类似，任何可以使用 <code class="language-text">&lt;length&gt;</code>、<code class="language-text">&lt;frequency&gt;</code>、<code class="language-text">&lt;angle&gt;</code>、<code class="language-text">&lt;time&gt;</code>、<code class="language-text">&lt;percentage&gt;</code>、<code class="language-text">&lt;number&gt;</code> 或者 <code class="language-text">&lt;integer&gt;</code> 数据类型的地方都可以使用 min()、max() 和 clamp() 这 3 个函数。</p>\n<p>min()、max() 和 clamp() 这 3 个函数与 calc() 函数是可以相互嵌套使用的，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="93885263786352070000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`width: calc(min(800px, 100vw) / 6);`, `93885263786352070000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">width</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token function">min</span><span class="token punctuation">(</span>800px<span class="token punctuation">,</span> 100vw<span class="token punctuation">)</span> / 6<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>下面具体介绍一下 min()、max() 和 clamp() 这 3 个函数。</p>\n<h3 id="min-函数"><a href="#min-%E5%87%BD%E6%95%B0" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>min() 函数</h3>\n<p>min() 函数语法如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="63606199571948580000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`min(expression [,expression])`, `63606199571948580000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token function">min</span><span class="token punctuation">(</span>expression [<span class="token punctuation">,</span>expression]<span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>min() 函数支持一个或多个表达式，每个表达式之间使用逗号分隔，然后将最小的表达式的值作为返回值。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="57617257618147090000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`width: min(10vw, 5em, 80px);`, `57617257618147090000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">width</span><span class="token punctuation">:</span> <span class="token function">min</span><span class="token punctuation">(</span>10vw<span class="token punctuation">,</span> 5em<span class="token punctuation">,</span> 80px<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>其中出现了 2 个相对长度值，1 个固定长度值，因此上面的 width 计算值最大就是 80px。至于真实的宽度值，如果浏览器视口宽度小于 800px，或文字字号小于 16px，真实宽度值则会更小。也就是说，虽然函数的名称是 min()，表示最小，但实际上这个函数是用来限制最大值的。</p>\n<p>min() 函数的表达式可以是数学表达式（使用算术运算符）、具体的值或其他表达式（如 attr() 新语法）。因此，下面这些 CSS 声明都是合法的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="74945340215698600000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 合法 */\nwidth: min(10px * 10, 10em);\nwidth: min(calc(10px * 10), 10em);\nwidth: min(10px * 10, var(--width));`, `74945340215698600000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 合法 */</span>\n<span class="token property">width</span><span class="token punctuation">:</span> <span class="token function">min</span><span class="token punctuation">(</span>10px * 10<span class="token punctuation">,</span> 10em<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token property">width</span><span class="token punctuation">:</span> <span class="token function">min</span><span class="token punctuation">(</span><span class="token function">calc</span><span class="token punctuation">(</span>10px * 10<span class="token punctuation">)</span><span class="token punctuation">,</span> 10em<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token property">width</span><span class="token punctuation">:</span> <span class="token function">min</span><span class="token punctuation">(</span>10px * 10<span class="token punctuation">,</span> <span class="token function">var</span><span class="token punctuation">(</span>--width<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>如果我们希望网页在桌面端浏览器中的宽度为 1024px，在移动端的宽度为 100%，过去是这么实现的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="72802900457280130000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.constr {\n   width: 1024px;\n   max-width: 100%;\n}`, `72802900457280130000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.constr</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 1024px<span class="token punctuation">;</span>\n   <span class="token property">max-width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>有了 min() 函数，我们只需要一句 CSS 声明就可以实现这个效果了：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="6817727902887083000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.constr {\n   width: min(1024px, 100%);\n}`, `6817727902887083000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.constr</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> <span class="token function">min</span><span class="token punctuation">(</span>1024px<span class="token punctuation">,</span> 100%<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<h3 id="max-函数"><a href="#max-%E5%87%BD%E6%95%B0" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>max() 函数</h3>\n<p>max() 函数和 min() 函数语法类似，区别在于 max() 函数返回的是最大值，min() 函数返回的是最小值。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="87237102864543630000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`width: max(10vw, 5em, 80px);`, `87237102864543630000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">width</span><span class="token punctuation">:</span> <span class="token function">max</span><span class="token punctuation">(</span>10vw<span class="token punctuation">,</span> 5em<span class="token punctuation">,</span> 80px<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>表示最小宽度是 80px，如果浏览器视口宽度大于 800px，或者文字字号大于 16px，则最终的宽度值会更大。也就是说，虽然 max() 函数从名称上看表示最大，但是其实际作用是限制最小值。max() 函数其他特性都和 min() 函数类似，在此不赘述。</p>\n<h3 id="clamp-函数"><a href="#clamp-%E5%87%BD%E6%95%B0" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>clamp() 函数</h3>\n<p>clamp() 函数的作用是返回一个区间范围的值，语法如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="84288438677033810000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`clamp(MIN, VAL, MAX);`, `84288438677033810000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token function">clamp</span><span class="token punctuation">(</span>MIN<span class="token punctuation">,</span> VAL<span class="token punctuation">,</span> MAX<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>其中，MIN 表示最小值，VAL 表示首选值，MAX 表示最大值。这段语句的意思是：如果 VAL 在 MIN ～ MAX 范围内，则使用 VAL 作为函数返回值；如果 VAL 大于 MAX，则使用 MAX 作为返回值；如果 VAL 小于 MIN，则使用 MIN 作为返回值。clamp(MIN, VAL, MAX) 实际上等同于 max(MIN, min(VAL, MAX))。</p>\n<p>我们通过一个例子看一下效果：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="28432004692374370000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<button>我的宽度是？</button>\n<style>\n   button {\n      width: clamp(200px, 50vw, 600px);\n   }\n</style>`, `28432004692374370000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">></span></span>我的宽度是？<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n   <span class="token selector">button</span> <span class="token punctuation">{</span>\n      <span class="token property">width</span><span class="token punctuation">:</span> <span class="token function">clamp</span><span class="token punctuation">(</span>200px<span class="token punctuation">,</span> 50vw<span class="token punctuation">,</span> 600px<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>如果我们不断改变浏览器视口的宽度，可以看到按钮的宽度在 200px ～ 600px 范围内变化。</p>\n<p>例如，在浏览器视口很宽的时候，按钮宽度是 600px，如图 4-63 所示。随着浏览器视口宽度不断变小，小到宽度为 646px 的时候，按钮宽度变成了 323px，如图 4-64 所示。随着浏览器视口宽度进一步变小，按钮宽度维持在 200px 并不再变小，如图 4-65 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-02-13-00-26-19-7bf11c0e6c7605483244b8ae46bca535-822e9.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 93.55961705831159%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAIAAAAf7rriAAAACXBIWXMAAAsSAAALEgHS3X78AAACAElEQVQ4y42SW2/aQBCF/f9/RJWGtm+tlIpWAdISqagVAcwl2BgnNiTEa3zF67uNAznBTQQ2anMe5mF1RrPznWH8kjzPC8LQtqzpRBiORvZqFYYhHstO5rGkzWaDqmuaJEmGoeuGkSRp/lgQsy0p9yVJgoFxHEdRtM6y7TExhTZUy7JvJdmhVFHU6/GEF8SbWwkfONK8LgkzMTBN02gnzEeN46TsZCilBVroFEWx2WxcXjar1Wq91tA0Hf0FZq7rMuGhgiDAZFTqOtSlYG6aJsbmCAoq7PxcgXcmz0Xxhue4xUJJ44gQgp2Rw7+A5XI9zzRMQzdUQhyHrtPUcVbY7j+0IWBQVS3/lUKWiwdF0w3X9XTTxMqviRxvzrJMJcuVQ4HnfqEohBgm1rYUovpBUGwuY4hTRIWE/CiMcCJB4Hu+hwekEAaHwLBMfka7MGPfpdWzs89fvv74flE5fX9S+VQ5PXn34aM0m0cvtr9O3LZtI44XmeCk8dy41+sL3HTQ7191u4PhsMv21aW2S8209sTsX/z2Ddr3HwCjtq0S9YEoPM/LkixOBUEU8b6yrfndva7roIg4jtDebLLrXqfV+nXFsj8vGufn9Uaj9q1WT9L1fCaz7GA0ZP+0O7i7V+bM9s2Cv3BjxWaccbvdkWd3INT63caobm8w5ibd3jOzQs5PXj41WgqUAaYAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 02 13 00 26 19" title="" data-src="/static/2022-02-13-00-26-19-7bf11c0e6c7605483244b8ae46bca535-fee1c.png" data-srcset="/static/2022-02-13-00-26-19-7bf11c0e6c7605483244b8ae46bca535-a67b7.png 200w,\n/static/2022-02-13-00-26-19-7bf11c0e6c7605483244b8ae46bca535-0b187.png 400w,\n/static/2022-02-13-00-26-19-7bf11c0e6c7605483244b8ae46bca535-fee1c.png 800w,\n/static/2022-02-13-00-26-19-7bf11c0e6c7605483244b8ae46bca535-822e9.png 1149w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/etuxjf?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>在弹性布局中（宽度自适应布局中），min()、max() 和 clamp() 函数可以帮助我们简化很多 CSS 代码，用过的开发者都说好用，有机会大家一定要在项目中试一试。</p>',
excerpt:"随着显示器的不断升级，人们对 Web 产品的视觉效果的要求也越来越高，如半透明、圆角、阴影等效果。于是，这些细致的样式表现就率先加入了 CSS 新世界中。本章将介绍这些 CSS 新属性的细节知识，并且这些 CSS…",timeToRead:49,tableOfContents:'<ul>\n<li>\n<p><a href="/css-new-world-detailed-style-performance/#%E9%80%8F%E6%98%8E%E5%BA%A6%E6%8E%A7%E5%88%B6%E5%B1%9E%E6%80%A7-opacity">透明度控制属性 opacity</a></p>\n<ul>\n<li><a href="/css-new-world-detailed-style-performance/#opacity-%E5%B1%9E%E6%80%A7%E7%9A%84%E5%8F%A0%E5%8A%A0%E8%AE%A1%E7%AE%97%E8%A7%84%E5%88%99">opacity 属性的叠加计算规则</a></li>\n<li>\n<p><a href="/css-new-world-detailed-style-performance/#opacity-%E5%B1%9E%E6%80%A7%E7%9A%84%E8%BE%B9%E7%95%8C%E7%89%B9%E6%80%A7%E4%B8%8E%E5%BA%94%E7%94%A8">opacity 属性的边界特性与应用</a></p>\n<ul>\n<li><a href="/css-new-world-detailed-style-performance/#%E8%87%AA%E5%8A%A8%E9%85%8D%E8%89%B2%E6%8C%89%E9%92%AE">自动配色按钮</a></li>\n<li><a href="/css-new-world-detailed-style-performance/#%E9%9D%99%E6%80%81%E9%A5%BC%E5%9B%BE">静态饼图</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href="/css-new-world-detailed-style-performance/#%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3%E5%9C%86%E8%A7%92%E5%B1%9E%E6%80%A7-border-radius">深入了解圆角属性 border-radius</a></p>\n<ul>\n<li>\n<p><a href="/css-new-world-detailed-style-performance/#%E4%BA%86%E8%A7%A3-border-radius-%E5%B1%9E%E6%80%A7%E7%9A%84%E8%AF%AD%E6%B3%95">了解 border-radius 属性的语法</a></p>\n<ul>\n<li><a href="/css-new-world-detailed-style-performance/#1-%EF%BD%9E-4-%E4%B8%AA%E5%80%BC%E8%A1%A8%E7%A4%BA%E7%9A%84%E6%96%B9%E4%BD%8D">1 ～ 4 个值表示的方位</a></li>\n<li><a href="/css-new-world-detailed-style-performance/#%E6%B0%B4%E5%B9%B3%E5%8D%8A%E5%BE%84%E5%92%8C%E5%9E%82%E7%9B%B4%E5%8D%8A%E5%BE%84">水平半径和垂直半径</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/css-new-world-detailed-style-performance/#%E5%BC%84%E6%87%82%E5%9C%86%E8%A7%92%E6%95%88%E6%9E%9C%E6%98%AF%E5%A6%82%E4%BD%95%E4%BA%A7%E7%94%9F%E7%9A%84">弄懂圆角效果是如何产生的</a></p>\n<ul>\n<li><a href="/css-new-world-detailed-style-performance/#%E9%87%8D%E5%8F%A0%E6%9B%B2%E7%BA%BF%E7%9A%84%E6%B8%B2%E6%9F%93%E6%9C%BA%E5%88%B6">重叠曲线的渲染机制</a></li>\n</ul>\n</li>\n<li><a href="/css-new-world-detailed-style-performance/#border-radius-%E5%B1%9E%E6%80%A7%E6%B8%B2%E6%9F%93-border-%E8%BE%B9%E6%A1%86%E7%9A%84%E7%BB%86%E8%8A%82">border-radius 属性渲染 border 边框的细节</a></li>\n<li>\n<p><a href="/css-new-world-detailed-style-performance/#border-radius-%E5%B1%9E%E6%80%A7%E7%9A%84%E9%AB%98%E7%BA%A7%E5%BA%94%E7%94%A8%E6%8A%80%E5%B7%A7">border-radius 属性的高级应用技巧</a></p>\n<ul>\n<li><a href="/css-new-world-detailed-style-performance/#border-radius-%E4%B8%8E%E4%B8%8D%E8%A7%84%E5%88%99%E5%9C%86%E8%A7%92%E5%A4%B4%E5%83%8F">border-radius 与不规则圆角头像</a></li>\n<li><a href="/css-new-world-detailed-style-performance/#border-radius-%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6%E6%8A%80%E5%B7%A7">border-radius 图形绘制技巧</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href="/css-new-world-detailed-style-performance/#box-shadow-%E7%9B%92%E9%98%B4%E5%BD%B1">box-shadow 盒阴影</a></p>\n<ul>\n<li>\n<p><a href="/css-new-world-detailed-style-performance/#inset-%E5%85%B3%E9%94%AE%E5%AD%97%E4%B8%8E%E5%86%85%E9%98%B4%E5%BD%B1">inset 关键字与内阴影</a></p>\n<ul>\n<li><a href="/css-new-world-detailed-style-performance/#%E6%A8%A1%E6%8B%9F%E8%BE%B9%E6%A1%86">模拟边框</a></li>\n<li><a href="/css-new-world-detailed-style-performance/#%E9%A2%9C%E8%89%B2%E8%A6%86%E7%9B%96">颜色覆盖</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/css-new-world-detailed-style-performance/#%E4%B8%8D%E8%A6%81%E5%BF%BD%E7%95%A5%E7%AC%AC%E5%9B%9B%E4%B8%AA%E9%95%BF%E5%BA%A6%E5%80%BC">不要忽略第四个长度值</a></p>\n<ul>\n<li><a href="/css-new-world-detailed-style-performance/#%E8%BD%AE%E5%BB%93%E6%A8%A1%E6%8B%9F">轮廓模拟</a></li>\n<li><a href="/css-new-world-detailed-style-performance/#%E5%8D%95%E4%BE%A7%E9%98%B4%E5%BD%B1">单侧阴影</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/css-new-world-detailed-style-performance/#%E5%A4%9A%E9%98%B4%E5%BD%B1%E7%89%B9%E6%80%A7%E4%B8%8E%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6">多阴影特性与图形绘制</a></p>\n<ul>\n<li><a href="/css-new-world-detailed-style-performance/#%E5%A4%9A%E8%BE%B9%E6%A1%86%E5%92%8C%E6%B8%90%E5%8F%98%E8%BE%B9%E6%A1%86%E6%95%88%E6%9E%9C">多边框和渐变边框效果</a></li>\n<li><a href="/css-new-world-detailed-style-performance/#%E5%8A%A0%E8%BD%BD%E6%95%88%E6%9E%9C">加载效果</a></li>\n<li><a href="/css-new-world-detailed-style-performance/#%E4%BA%91%E6%9C%B5%E6%95%88%E6%9E%9C">云朵效果</a></li>\n<li><a href="/css-new-world-detailed-style-performance/#3d-%E6%8A%95%E5%BD%B1%E6%95%88%E6%9E%9C">3D 投影效果</a></li>\n</ul>\n</li>\n<li><a href="/css-new-world-detailed-style-performance/#box-shadow-%E5%8A%A8%E7%94%BB%E4%B8%8E%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96">box-shadow 动画与性能优化</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/css-new-world-detailed-style-performance/#css-2d-%E5%8F%98%E6%8D%A2">CSS 2D 变换</a></p>\n<ul>\n<li>\n<p><a href="/css-new-world-detailed-style-performance/#%E4%BB%8E%E5%9F%BA%E6%9C%AC%E7%9A%84%E5%8F%98%E6%8D%A2%E6%96%B9%E6%B3%95%E8%AF%B4%E8%B5%B7">从基本的变换方法说起</a></p>\n<ul>\n<li><a href="/css-new-world-detailed-style-performance/#translate-%E4%BD%8D%E7%A7%BB">translate() 位移</a></li>\n<li><a href="/css-new-world-detailed-style-performance/#rotate-%E6%97%8B%E8%BD%AC">rotate() 旋转</a></li>\n<li><a href="/css-new-world-detailed-style-performance/#scale-%E7%BC%A9%E6%94%BE">scale() 缩放</a></li>\n<li><a href="/css-new-world-detailed-style-performance/#skew-%E6%96%9C%E5%88%87">skew() 斜切</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/css-new-world-detailed-style-performance/#transform-%E5%B1%9E%E6%80%A7%E7%9A%84%E8%8B%A5%E5%B9%B2%E7%BB%86%E8%8A%82%E7%89%B9%E6%80%A7">transform 属性的若干细节特性</a></p>\n<ul>\n<li><a href="/css-new-world-detailed-style-performance/#%E7%9B%92%E6%A8%A1%E5%9E%8B%E5%B0%BA%E5%AF%B8%E4%B8%8D%E4%BC%9A%E5%8F%98%E5%8C%96">盒模型尺寸不会变化</a></li>\n<li><a href="/css-new-world-detailed-style-performance/#%E5%86%85%E8%81%94%E5%85%83%E7%B4%A0%E6%97%A0%E6%95%88">内联元素无效</a></li>\n<li><a href="/css-new-world-detailed-style-performance/#%E9%94%AF%E9%BD%BF%E6%88%96%E8%99%9A%E5%8C%96%E7%9A%84%E9%97%AE%E9%A2%98">锯齿或虚化的问题</a></li>\n<li><a href="/css-new-world-detailed-style-performance/#%E4%B8%8D%E5%90%8C%E9%A1%BA%E5%BA%8F%E4%B8%8D%E5%90%8C%E6%95%88%E6%9E%9C">不同顺序不同效果</a></li>\n<li><a href="/css-new-world-detailed-style-performance/#clipclip-path-%E5%89%8D%E7%BD%AE%E5%89%AA%E8%A3%81">clip/clip-path 前置剪裁</a></li>\n<li><a href="/css-new-world-detailed-style-performance/#%E5%8A%A8%E7%94%BB%E6%80%A7%E8%83%BD%E4%BC%98%E7%A7%80">动画性能优秀</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/css-new-world-detailed-style-performance/#%E5%85%83%E7%B4%A0%E5%BA%94%E7%94%A8-transform-%E5%B1%9E%E6%80%A7%E5%90%8E%E7%9A%84%E5%8F%98%E5%8C%96">元素应用 transform 属性后的变化</a></p>\n<ul>\n<li><a href="/css-new-world-detailed-style-performance/#%E5%88%9B%E5%BB%BA%E5%B1%82%E5%8F%A0%E4%B8%8A%E4%B8%8B%E6%96%87">创建层叠上下文</a></li>\n<li><a href="/css-new-world-detailed-style-performance/#%E5%9B%BA%E5%AE%9A%E5%AE%9A%E4%BD%8D%E5%A4%B1%E6%95%88">固定定位失效</a></li>\n<li><a href="/css-new-world-detailed-style-performance/#%E6%94%B9%E5%8F%98-overflow-%E5%AF%B9%E7%BB%9D%E5%AF%B9%E5%AE%9A%E4%BD%8D%E5%85%83%E7%B4%A0%E7%9A%84%E9%99%90%E5%88%B6">改变 overflow 对绝对定位元素的限制</a></li>\n<li><a href="/css-new-world-detailed-style-performance/#%E6%94%B9%E5%8F%98%E7%BB%9D%E5%AF%B9%E5%AE%9A%E4%BD%8D%E5%85%83%E7%B4%A0%E7%9A%84%E5%8C%85%E5%90%AB%E5%9D%97">改变绝对定位元素的包含块</a></li>\n<li>\n<p><a href="/css-new-world-detailed-style-performance/#%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3%E7%9F%A9%E9%98%B5%E5%87%BD%E6%95%B0-matrix">深入了解矩阵函数 matrix()</a></p>\n<ul>\n<li><a href="/css-new-world-detailed-style-performance/#%E4%BD%8D%E7%A7%BB%EF%BC%9Atranslate-%E5%87%BD%E6%95%B0">位移：translate() 函数</a></li>\n<li><a href="/css-new-world-detailed-style-performance/#%E7%BC%A9%E6%94%BE%EF%BC%9Ascale-%E5%87%BD%E6%95%B0">缩放：scale() 函数</a></li>\n<li><a href="/css-new-world-detailed-style-performance/#%E6%97%8B%E8%BD%AC%EF%BC%9Arotate-%E5%87%BD%E6%95%B0">旋转：rotate() 函数</a></li>\n<li><a href="/css-new-world-detailed-style-performance/#%E6%96%9C%E5%88%87%EF%BC%9Askew-%E5%87%BD%E6%95%B0">斜切：skew() 函数</a></li>\n<li><a href="/css-new-world-detailed-style-performance/#%E6%B1%87%E6%80%BB%E8%AF%B4%E6%98%8E">汇总说明</a></li>\n<li><a href="/css-new-world-detailed-style-performance/#3d-%E7%9F%A9%E9%98%B5%E5%8F%98%E6%8D%A2">3D 矩阵变换</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/css-new-world-detailed-style-performance/#%E5%B8%B8%E5%B8%B8%E8%A2%AB%E9%81%97%E5%BF%98%E7%9A%84-transform-origin-%E5%B1%9E%E6%80%A7">常常被遗忘的 transform-origin 属性</a></p>\n<ul>\n<li><a href="/css-new-world-detailed-style-performance/#transform-origin-%E5%B1%9E%E6%80%A7%E4%BD%9C%E7%94%A8%E5%8E%9F%E7%90%86">transform-origin 属性作用原理</a></li>\n</ul>\n</li>\n<li><a href="/css-new-world-detailed-style-performance/#scale-%E5%87%BD%E6%95%B0%E7%BC%A9%E6%94%BE%E5%92%8C-zoom-%E5%B1%9E%E6%80%A7%E7%BC%A9%E6%94%BE%E7%9A%84%E5%8C%BA%E5%88%AB">scale() 函数缩放和 zoom 属性缩放的区别</a></li>\n<li><a href="/css-new-world-detailed-style-performance/#%E4%BA%86%E8%A7%A3%E5%85%A8%E6%96%B0%E7%9A%84-translate%E3%80%81scale-%E5%92%8C-rotate-%E5%B1%9E%E6%80%A7">了解全新的 translate、scale 和 rotate 属性</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href="/css-new-world-detailed-style-performance/#%E7%AE%80%E5%8D%95%E5%AE%9E%E7%94%A8%E7%9A%84-calc-%E5%87%BD%E6%95%B0">简单实用的 calc() 函数</a></p>\n<ul>\n<li><a href="/css-new-world-detailed-style-performance/#%E5%85%B3%E4%BA%8E-calc-%E5%87%BD%E6%95%B0">关于 calc() 函数</a></li>\n<li>\n<p><a href="/css-new-world-detailed-style-performance/#%E4%BA%86%E8%A7%A3-min%E3%80%81max-%E5%92%8C-clamp-%E5%87%BD%E6%95%B0">了解 min()、max() 和 clamp() 函数</a></p>\n<ul>\n<li><a href="/css-new-world-detailed-style-performance/#%E8%AF%AD%E6%B3%95">语法</a></li>\n<li><a href="/css-new-world-detailed-style-performance/#min-%E5%87%BD%E6%95%B0">min() 函数</a></li>\n<li><a href="/css-new-world-detailed-style-performance/#max-%E5%87%BD%E6%95%B0">max() 函数</a></li>\n<li><a href="/css-new-world-detailed-style-performance/#clamp-%E5%87%BD%E6%95%B0">clamp() 函数</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>',wordCount:{words:3407},frontmatter:{date:"2022-01-19 11:12:44",path:"/css-new-world-detailed-style-performance/",tags:"前端, CSS, CSS新世界, 读书笔记",title:"CSS新世界更细致的样式表现",draft:null,catalog_number:null}},nextPost:{html:'<p>CSS 新世界中有大量的 CSS 新特性源自对 CSS2.1 中已有的 CSS 属性的增强，本章内容所讲述的就是在已有 CSS 属性上新增的那些 CSS 新特性</p>\n<h1 id="贯穿全书的尺寸体系"><a href="#%E8%B4%AF%E7%A9%BF%E5%85%A8%E4%B9%A6%E7%9A%84%E5%B0%BA%E5%AF%B8%E4%BD%93%E7%B3%BB" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>贯穿全书的尺寸体系</h1>\n<p>在 CSS2.1 中，CSS 中的尺寸概念都隐藏在具体的 CSS 用法中。例如，<code class="language-text">display: inline-block</code>、<code class="language-text">float: left</code> 和 <code class="language-text">position: absolute</code> 等 CSS 声明带来的 <code class="language-text">shrink-to-fit</code> 收缩；<code class="language-text">white-space: nowrap</code> 带来的“最大内容宽度”；连续英文字符的宽度溢出其实是因为“最小内容宽度”。</p>\n<p>因为这些尺寸的表现过于隐晦，所以学习时很难理解，学起来就很吃力，这就是我在第 1 章提过的，CSS2.1 中的 CSS 语法虽简单，但理解很难。这种困扰在纯理性思维的开发者身上体现得尤为明显，因为过于理性的人不擅长将模糊的概念转换为感性的认知来进行学习，所以他们学习 JavaScript 得心应手，但是学习 CSS 就会觉得比较困难。</p>\n<p>不过从 CSS3 开始，以前很多模糊的概念有了明确的定义，并且这些明确的定义有与之相匹配的 CSS 属性或 CSS 属性值。这种变化的优点很明显，那就是我们不需要再去理解 CSS 属性背后隐藏的含义和特性，知识变得更表层、更浅显了。虽说 CSS 学习的广度有所增加，但是总体来看，把概念规范起来的利还是远远大于弊的。例如接下来要介绍的尺寸体系，如果用一个金字塔来表示，那么在最上层的概念就是 <code class="language-text">Intrinsic Sizing</code> 和 <code class="language-text">Extrinsic Sizing</code>。<code class="language-text">Intrinsic Sizing</code> 被称为 <code class="language-text">内在尺寸</code>，表示元素最终的尺寸表现是由内容决定的；<code class="language-text">Extrinsic Sizing</code> 被称为 <code class="language-text">外在尺寸</code>，表示元素最终的尺寸表现是由上下文决定的。</p>\n<p>由于新的尺寸关键字在 width 属性中最常用，因此，本节以 width 属性为示例属性，和大家深入探讨 CSS 新世界中的尺寸概念。本节内容很重要，大家请仔细阅读，如有必要，可以反复阅读。</p>\n<p>CSS 的 width 属性新增了 4 个与尺寸概念相匹配的关键字，包括 fit-content、fill-available、min-content 和 max-content，每一个关键字背后都有知识点。我们先从最常用的 fit-content 关键字开始讲解。</p>\n<h2 id="从-width-fit-content-声明开始"><a href="#%E4%BB%8E-width-fit-content-%E5%A3%B0%E6%98%8E%E5%BC%80%E5%A7%8B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>从 width: fit-content 声明开始</h2>\n<p>fit-content 关键字是新的尺寸体系关键字中使用频率最高的关键字。你可以把 fit-content 关键字的尺寸表现想象成“紧身裤”，大腿的肉对应的就是元素里面的内容，如果是宽松的裤子，那肉眼所见的尺寸就比较大，但是如果是紧身裤，则呈现的尺寸就是大腿实际的尺寸。同样，元素应用 fit-content 关键字就像给元素里面的内容穿上了超薄紧身裤，此时元素的尺寸就是里面内容的尺寸。</p>\n<p>实际上，fit-content 关键字的样式表现就是 CSS2.1 规范中的“shrink-to-fit”，我称其为“包裹性”。这种尺寸表现和元素应用 display: inline-block、position: absolute 等 CSS 声明类似，尺寸收缩但不会超出包含块级元素的尺寸限制。</p>\n<p>举个例子，要实现和 <a href="/css-world-flow-element-size/#%E5%8C%85%E8%A3%B9%E6%80%A7">CSS 世界流、元素与基本尺寸——包裹性</a> 的例子一样的效果，需求描述为：一段文字，字数少的时候居中显示，字数多的时候左对齐显示。当然这里使用了不一样的方法，关键 CSS 代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="24205393324619796000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 传统实现 display: table */\n.cw-content {\n   display: table;\n   margin: auto;\n}\n\n/* fit-content 实现 */\n.cw-content {\n   width: fit-content;\n   margin: auto;\n}`, `24205393324619796000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 传统实现 display: table */</span>\n<span class="token selector">.cw-content</span> <span class="token punctuation">{</span>\n   <span class="token property">display</span><span class="token punctuation">:</span> table<span class="token punctuation">;</span>\n   <span class="token property">margin</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">/* fit-content 实现 */</span>\n<span class="token selector">.cw-content</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> fit-content<span class="token punctuation">;</span>\n   <span class="token property">margin</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>可以看到，在现代浏览器中，两种方法实现的效果一模一样：</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/8u5i6f?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>如果是内联元素要收缩，可以使用 display: inline-block 声明；如果是块级元素要收缩，可以使用 display: table 声明。这两种方式效果一样，兼容性还更好，IE8+ 浏览器都提供了支持。这么一看，fit-content 关键字岂不是没什么用？实际上并不是这样，使用 fit-content 关键字有两大优点。</p>\n<ol>\n<li>\n<p>保护了元素原始的 display 计算值，例如 <code class="language-text">&lt;li&gt;</code> 元素要是设置成了 display: table，前面的项目符号就不会出现，::marker 伪元素也会失效。</p>\n</li>\n<li>\n<p>让元素的尺寸有了确定的值，这是 fit-content 关键字最重要也最可贵的优点。第二个优点有必要展开讲一下。</p>\n</li>\n</ol>\n<h3 id="fit-content-关键字让元素有了确定的尺寸"><a href="#fit-content-%E5%85%B3%E9%94%AE%E5%AD%97%E8%AE%A9%E5%85%83%E7%B4%A0%E6%9C%89%E4%BA%86%E7%A1%AE%E5%AE%9A%E7%9A%84%E5%B0%BA%E5%AF%B8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>fit-content 关键字让元素有了确定的尺寸</h3>\n<p>CSS 中有不少布局需要有明确的元素的尺寸才能实现，非常典型的例子就是绝对定位元素使用 margin: auto 实现居中效果时需要设置具体的 width 或 height 的属性值，CSS 代码示意如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="75935205665984040000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.cw-dialog {\n   width: 300px;\n   height: 200px;\n   position: absolute;\n   left: 0;\n   top: 0;\n   right: 0;\n   bottom: 0;\n   margin: auto;\n   border: solid;\n}`, `75935205665984040000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.cw-dialog</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>\n   <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n   <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n   <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n   <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n   <span class="token property">bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n   <span class="token property">margin</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>\n   <span class="token property">border</span><span class="token punctuation">:</span> solid<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>但是，很多时候绝对定位元素的尺寸是不固定的，最终的尺寸会根据内容自动变化，此时上面的 CSS 代码就不适合，该怎么办呢？很多人会想到使用 transform 属性进行偏移：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="8182751252217546000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.cw-dialog {\n   position: absolute;\n   left: 50%;\n   top: 50%;\n   border: solid;\n   transform: translate(-50%, -50%);\n}`, `8182751252217546000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.cw-dialog</span> <span class="token punctuation">{</span>\n   <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n   <span class="token property">left</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>\n   <span class="token property">top</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>\n   <span class="token property">border</span><span class="token punctuation">:</span> solid<span class="token punctuation">;</span>\n   <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate</span><span class="token punctuation">(</span>-50%<span class="token punctuation">,</span> -50%<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>这是一种不错的方法，但并不完美，而且这个方法占用了 transform 属性，这会导致绝对定位元素无法使用包含 transform 属性的动画效果。例如，现在项目中有一个整站通用的体验增强的位移小动画：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="76693289567194630000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`@keyframe tinyUp {\n   from {\n      transform: translateY(5px);\n   }\n\n   to {\n      transform: translateY(0);\n   }\n}`, `76693289567194630000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token atrule"><span class="token rule">@keyframe</span> tinyUp</span> <span class="token punctuation">{</span>\n   <span class="token selector">from</span> <span class="token punctuation">{</span>\n      <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateY</span><span class="token punctuation">(</span>5px<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">to</span> <span class="token punctuation">{</span>\n      <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateY</span><span class="token punctuation">(</span>0<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>.cw-dialog 元素就没办法使用这个名为 tinyUp 的位移小动画，因为 CSS 动画关键帧中的 CSS 语句的优先级最高，会干扰原本设置的 transform 偏移值：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="83332328458952150000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.cw-dialog {\n   position: absolute;\n   left: 50%;\n   top: 50%;\n   border: solid;\n   /* transform 会被 animation 动画干扰 */\n   transform: translate(-50%, -50%);\n   animation: tinyUp 0.2s;\n}`, `83332328458952150000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.cw-dialog</span> <span class="token punctuation">{</span>\n   <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n   <span class="token property">left</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>\n   <span class="token property">top</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>\n   <span class="token property">border</span><span class="token punctuation">:</span> solid<span class="token punctuation">;</span>\n   <span class="token comment">/* transform 会被 animation 动画干扰 */</span>\n   <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate</span><span class="token punctuation">(</span>-50%<span class="token punctuation">,</span> -50%<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token property">animation</span><span class="token punctuation">:</span> tinyUp 0.2s<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>有没有什么更好的方法呢？有，就是使用 fit-content 关键字，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="14475075364112056000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.cw-dialog {\n   width: fit-content;\n   height: fit-content;\n   position: absolute;\n   left: 0;\n   top: 0;\n   right: 0;\n   bottom: 0;\n   margin: auto;\n   border: solid;\n   animation: tinyUp 0.2s;\n}`, `14475075364112056000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.cw-dialog</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> fit-content<span class="token punctuation">;</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> fit-content<span class="token punctuation">;</span>\n   <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n   <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n   <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n   <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n   <span class="token property">bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n   <span class="token property">margin</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>\n   <span class="token property">border</span><span class="token punctuation">:</span> solid<span class="token punctuation">;</span>\n   <span class="token property">animation</span><span class="token punctuation">:</span> tinyUp 0.2s<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>此时元素尺寸自适应，同时完全居中，不用担心包括 transform 属性的动画带来的冲突。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/cexesq?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>在 webkit 浏览器中，大家可以看到弹框出现的时候会有一个向上微移的动画，这就是 fit-content 关键字带来的体验增强。其他浏览器则做了降级处理（兼容到 IE9），即居中功能正常，但没有动画，兼容细节可参见示例页面源码。</p>\n<h3 id="fit-content-关键字的兼容性"><a href="#fit-content-%E5%85%B3%E9%94%AE%E5%AD%97%E7%9A%84%E5%85%BC%E5%AE%B9%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>fit-content 关键字的兼容性</h3>\n<p>fit-content 关键字的兼容性比较复杂，很多人会误认为 width 属性和 height 属性都表示尺寸，fit-content 关键字作为这两个属性的属性值，兼容性应该与它们一样，然而实际上差异很大，具体细节如下。</p>\n<ol>\n<li>\n<p>IE 浏览器和 Edge 浏览器不支持 fit-content 关键字，若要兼容，可以使用传统方法进行模拟。</p>\n<p>Chrome 浏览器最早在 2012 年的时候就已支持 width: fit-content，Safari 等浏览器紧随其后很快也支持了，因此 width: fit-content 目前在移动端是可以放心使用的。为了兼顾少部分陈旧手机用户，稳妥起见，我们可以加上 -webkit- 私有前缀：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="28500411438960980000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.example {\n  width: -webkit-fit-content;\n  width: fit-content;\n}`, `28500411438960980000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.example</span> <span class="token punctuation">{</span>\n  <span class="token property">width</span><span class="token punctuation">:</span> -webkit-fit-content<span class="token punctuation">;</span>\n  <span class="token property">width</span><span class="token punctuation">:</span> fit-content<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>对于 Firefox 浏览器，还需要添加 -moz- 私有前缀，因此，对于用户量较大的对外项目，下面的书写方式是最稳妥的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="5756211649242293000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.example {\n  width: -webkit-fit-content;\n  width: -moz-fit-content;\n  width: fit-content;\n}`, `5756211649242293000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.example</span> <span class="token punctuation">{</span>\n  <span class="token property">width</span><span class="token punctuation">:</span> -webkit-fit-content<span class="token punctuation">;</span>\n  <span class="token property">width</span><span class="token punctuation">:</span> -moz-fit-content<span class="token punctuation">;</span>\n  <span class="token property">width</span><span class="token punctuation">:</span> fit-content<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>height: fit-content 则是在 2015 年才开始被支持的，比 width: fit-content 晚了 3 年，不过依旧可以放心大胆使用：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="69985140465606870000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.example {\n  height: -webkit-fit-content;\n  height: fit-content;\n}`, `69985140465606870000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.example</span> <span class="token punctuation">{</span>\n  <span class="token property">height</span><span class="token punctuation">:</span> -webkit-fit-content<span class="token punctuation">;</span>\n  <span class="token property">height</span><span class="token punctuation">:</span> fit-content<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>至于 Firefox 浏览器，虽然它在语法上支持 height: fit-content，但是并没有任何实际的效果。例如我们设置 height: -moz-fit-content，Firefox 浏览器不会认为它是错误的语法，但是没有任何实际的效果，可以说 Firefox 浏览器目前并不支持 height: fit-content。因此，请勿出现下面的特征检测语法：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="98740271086822820000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`@support (height: fit-content) or (height: -moz-fit-content) {\n  .example {\n     height: -moz-fit-content;\n     height: fit-content;\n  }\n}`, `98740271086822820000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token atrule"><span class="token rule">@support</span> <span class="token punctuation">(</span><span class="token property">height</span><span class="token punctuation">:</span> fit-content<span class="token punctuation">)</span> or <span class="token punctuation">(</span><span class="token property">height</span><span class="token punctuation">:</span> -moz-fit-content<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>\n  <span class="token selector">.example</span> <span class="token punctuation">{</span>\n     <span class="token property">height</span><span class="token punctuation">:</span> -moz-fit-content<span class="token punctuation">;</span>\n     <span class="token property">height</span><span class="token punctuation">:</span> fit-content<span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>当然，随着时间推进，若干年后，Firefox 浏览器也可能会完美支持 height: fit-content 声明。</p>\n</li>\n<li>\n<p>min-width 属性和 max-width 属性可以正确渲染 fit-content 关键字，而 max-height 和 min-height 属性设置 fit-content 关键字虽然语法正确，但没有任何具体的样式表现。</p>\n<p>有人可能会问，既然无效，那浏览器还认为 fit-content 关键字对于 max-height 和 min-height 属性是合法的，这也太奇怪了吧？</p>\n<p>实际并不是这样，max-height: fit-content、min-height: fit-content 和 Firefox 浏览器中的 height: -moz-fit-content 声明在某些情况下也是有效的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="81424791207053540000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.parent {\n  writing-mode: vertical-rl;\n}\n\n.child {\n  /* 有效 */\n  max-height: fit-content;\n}`, `81424791207053540000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.parent</span> <span class="token punctuation">{</span>\n  <span class="token property">writing-mode</span><span class="token punctuation">:</span> vertical-rl<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.child</span> <span class="token punctuation">{</span>\n  <span class="token comment">/* 有效 */</span>\n  <span class="token property">max-height</span><span class="token punctuation">:</span> fit-content<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>即在图文内容垂直排版的时候，height 相关的 CSS 属性是可以准确渲染 fit-content 关键字的。</p>\n</li>\n</ol>\n<h2 id="stretch、available-和-fill-available-关键字究竟用哪个"><a href="#stretch%E3%80%81available-%E5%92%8C-fill-available-%E5%85%B3%E9%94%AE%E5%AD%97%E7%A9%B6%E7%AB%9F%E7%94%A8%E5%93%AA%E4%B8%AA" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>stretch、available 和 fill-available 关键字究竟用哪个</h2>\n<p>我们在页面中放置一个没有样式设置的 <code class="language-text">&lt;div&gt;</code> 元素，此时，该 <code class="language-text">&lt;div&gt;</code> 元素的宽度自动填满可用空间。</p>\n<p>stretch、available 和 fill-available 这 3 个关键字虽然名称有所不同，但是作用都是一致的，那就是让元素的尺寸自动填满可用空间，就如同 <code class="language-text">&lt;div&gt;</code> 元素的默认尺寸表现。</p>\n<p>下面问题来了，究竟该使用 stretch、available 和 fill-available 这 3 个关键字中的哪一个呢？先简单分析一下这 3 个关键字。</p>\n<ul>\n<li>stretch 指 <code class="language-text">弹性拉伸</code>，是最新的规范中定义的关键字，替换之前的 fill-available 和 available。</li>\n<li>available 指 <code class="language-text">可用空间</code>，是 Firefox 浏览器使用的关键字，需要配合 -moz- 私有前缀使用。</li>\n<li>fill-available 指 <code class="language-text">填充可用空间</code>，是 webkit 浏览器使用的关键字，需要配合 -webkit- 私有前缀使用。</li>\n</ul>\n<p>因此，立足现在，面向未来，我们的 CSS 应该这么写：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="7138352480966593000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.element {\n   width: -webkit-fill-available;\n   width: -moz-available;\n   width: stretch;\n}`, `7138352480966593000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.element</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> -webkit-fill-available<span class="token punctuation">;</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> -moz-available<span class="token punctuation">;</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> stretch<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>为了统一，接下来分享的内容都以 stretch 关键字为代表进行介绍。</p>\n<h3 id="stretch-关键字的应用场景"><a href="#stretch-%E5%85%B3%E9%94%AE%E5%AD%97%E7%9A%84%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>stretch 关键字的应用场景</h3>\n<p>实际开发的时候，我们需要用到 stretch 关键字的场景并不多。首先，block 水平的元素、弹性布局和网格布局中的子项默认都自带弹性拉伸特性；其次，对于替换元素、表格元素、内联块级元素等这些具有“包裹性”的元素，建议使用 <code class="language-text">宽度分离原则</code> 进行自适应，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="64593906561037490000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.container {\n   margin: 15px;\n   padding: 10px;\n}\n\n.container > img {\n   width: 100%;\n}`, `64593906561037490000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.container</span> <span class="token punctuation">{</span>\n   <span class="token property">margin</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>\n   <span class="token property">padding</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.container > img</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>也就是外面嵌套一层普通的块级元素，块级元素具有弹性拉伸特性，因此可以很好地实现替换元素的宽度自适应布局效果。</p>\n<p>只有当我们的 HTML 标签使用受限的时候，才需要考虑使用 stretch 关键字。例如一个 <code class="language-text">&lt;button&gt;</code> 按钮元素，希望距离容器左右边缘各 15px 的间距，但是外部又不方便嵌套其他标签元素，此时就非常适合使用 stretch 关键字，这样连 box-sizing 属性都可以省略：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="51167473996893676000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`button {\n   height: 40px;\n   width: -webkit-fill-available;\n   width: -moz-available;\n   width: stretch;\n   margin-left: 15px;\n   margin-right: 15px;\n}`, `51167473996893676000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">button</span> <span class="token punctuation">{</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> -webkit-fill-available<span class="token punctuation">;</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> -moz-available<span class="token punctuation">;</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> stretch<span class="token punctuation">;</span>\n   <span class="token property">margin-left</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>\n   <span class="token property">margin-right</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/e992x2?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>然而，IE 浏览器和 Edge 浏览器是不支持 stretch 关键字的，因此如果你的项目需要兼容这两个浏览器，stretch 关键字就不能使用，需要换成其他兼容性更好的方法，那就是使用 calc() 函数，示例如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="87803113656577440000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`button {\n   height: 40px;\n   width: calc(100% - 30px);\n   margin-left: 15px;\n   margin-right: 15px;\n   box-sizing: border-box;\n}`, `87803113656577440000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">button</span> <span class="token punctuation">{</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>100% - 30px<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token property">margin-left</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>\n   <span class="token property">margin-right</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>\n   <span class="token property">box-sizing</span><span class="token punctuation">:</span> border-box<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>其实现效果和使用 stretch 关键字是一样的。兼容性问题限制了 stretch 关键字的使用场景。</p>\n<p>当然，如果你的项目没有兼容性的顾虑，例如后台产品、实验项目或者是移动端项目，我还是建议使用 stretch 关键字。因为 calc() 函数的代码有些麻烦，宽度要手动计算，而且当 margin 在水平方向的大小发生变化的时候，width 属性值也要同步变化，这增加了维护成本，不如使用 stretch 关键字省心。</p>\n<p>或者各退一步，既使用新特性，又兜底低版本浏览器；既满足使用新特性的要求，又不用担心兼容问题：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="33956027511335997000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`button {\n   height: 40px;\n   width: calc(100% - 30px);\n   width: -webkit-fill-available;\n   width: -moz-available;\n   width: stretch;\n   margin-left: 15px;\n   margin-right: 15px;\n   box-sizing: border-box;\n}`, `33956027511335997000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">button</span> <span class="token punctuation">{</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>100% - 30px<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> -webkit-fill-available<span class="token punctuation">;</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> -moz-available<span class="token punctuation">;</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> stretch<span class="token punctuation">;</span>\n   <span class="token property">margin-left</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>\n   <span class="token property">margin-right</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>\n   <span class="token property">box-sizing</span><span class="token punctuation">:</span> border-box<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>个中权衡还需要大家根据实际场景进行判断。</p>\n<h3 id="stretch-关键字在-firefox-浏览器中的问题"><a href="#stretch-%E5%85%B3%E9%94%AE%E5%AD%97%E5%9C%A8-firefox-%E6%B5%8F%E8%A7%88%E5%99%A8%E4%B8%AD%E7%9A%84%E9%97%AE%E9%A2%98" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>stretch 关键字在 Firefox 浏览器中的问题</h3>\n<p><code class="language-text">&lt;table&gt;</code> 元素的默认尺寸表现是收缩，并且实际开发的时候往往需要宽度自适应于外部容器，因此 <code class="language-text">&lt;table&gt;</code> 元素很适合使用 stretch 关键字。在 CSS 重置的时候，不要再使用下面这样的 CSS 代码：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="80145098020725440000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`table {\n   width: 100%;\n   table-layout: fixed;\n   box-sizing: border-box;\n}`, `80145098020725440000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">table</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>\n   <span class="token property">table-layout</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>\n   <span class="token property">box-sizing</span><span class="token punctuation">:</span> border-box<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>可以优化成：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="45928106706447204000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`table {\n   width: 100%;\n   width: -webkit-fill-available;\n   width: -moz-available;\n   width: stretch;\n   table-layout: fixed;\n   box-sizing: border-box;\n}`, `45928106706447204000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">table</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> -webkit-fill-available<span class="token punctuation">;</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> -moz-available<span class="token punctuation">;</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> stretch<span class="token punctuation">;</span>\n   <span class="token property">table-layout</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>\n   <span class="token property">box-sizing</span><span class="token punctuation">:</span> border-box<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>这样就算我们的 <code class="language-text">&lt;table&gt;</code> 元素设置 margin 属性，也能完美自适应尺寸。</p>\n<p>但是有一个例外，那就是 Firefox 浏览器。Firefox 浏览器在其他所有场景下都运行完美，唯独对 table 和 inline-table 水平的元素的渲染有问题，这些元素设置 width: -moz-available 的效果和设置 width: 100% 是一样的。</p>\n<p>我们不妨来看一个例子，实现一个左右留有 15px 间距的 <code class="language-text">&lt;table&gt;</code> 元素布局：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="80828858980360670000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`table {\n   width: calc(100% - 32px);\n   width: -webkit-fill-available;\n   /* width: -moz-available; */\n   width: stretch;\n   margin-left: 15px;\n   margin-right: 15px;\n   border: 1px solid lightgray;\n}`, `80828858980360670000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">table</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>100% - 32px<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> -webkit-fill-available<span class="token punctuation">;</span>\n   <span class="token comment">/* width: -moz-available; */</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> stretch<span class="token punctuation">;</span>\n   <span class="token property">margin-left</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>\n   <span class="token property">margin-right</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>\n   <span class="token property">border</span><span class="token punctuation">:</span> 1px solid lightgray<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>此时，无论 <code class="language-text">&lt;table&gt;</code> 元素的 width、margin 或者 border 如何变化，<code class="language-text">&lt;table&gt;</code> 元素的宽度永远自适应外部容器。图 3-4 展示的就是上述代码在 375px 宽度屏幕下的运行效果，可以看到 <code class="language-text">&lt;table&gt;</code> 元素的尺寸正好自适应屏幕尺寸。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-23-01-10-13-48788eb9bc511d6c10e27d17cfa6182e-9ac90.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 64.16739319965127%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAACVElEQVQoz51SXW/SYBTuf/XGO+OVN0tcohcat4yyQVsoGBMzp1fiaAeUtrRl0zmgMD5ayuj353BLBq4rbDDfunhrjE9Oznlycp7zvufkQIsoisJoHi2ieYwomi9ub5fL1fJvWMV2dwdNL0K/YV1PrqbTy+h6Fs6ulneL+3/AanUPTa2eOFDrXf2or38bmIc9vTUOuuZFR5s0R74Y88uG4jbPvLY2OdV/9M1L2Z0CmwVjKOwX9oRhmnVQxsRYC2EMlDbStLFDaXBZ3a6ogMMHI7h0htJauqojjIXzQYZz7GYRCgfkHq8gXIBzLlZzcN7L1M9xwc/z3jtQx/k5wcvXz/OCv0E5COPhnJlipSzn2mIJmkvEFjV8UvJeEdrTDwpGaWtYJUEOt6va8yz1luq/rniPd5WdqvPovbxeMLK8vP6ZgcuW2y5BNxIBU/ILyoPLxsvCGKOtN3kmTcpJ1lorHOOskqhYzz7JKOvABypC2yijbxalZEl1wMuhRO6yA4RxwKgJQkFoK1nRU1UTrRo7pfF2xUCqeqp8BjayuS+lKC1BjjYK0hahxN8OB8SeoGSEIMe7YDzg87H34lEFL/eH47yLshbYU4azMzULq1kP4uJHfojXgMbN1+xc3cdYExdcUI3QBiCZmg0yWd4BJM5zDgK68I4tktCNWmc7GtGZkG2faLlkJyiK3oN9aToxabn7LRcQ4PdFlxA9AlS2/cnwEAKH8n+IL+x3iBsEwXmvL89mPzXd6PYGqqqfNFr1o+N2p9s+7XW7/ZOG+PX7yVjTY8l9LPkFSWeBoYXeTD4AAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 23 01 10 13" title="" data-src="/static/2021-12-23-01-10-13-48788eb9bc511d6c10e27d17cfa6182e-fee1c.png" data-srcset="/static/2021-12-23-01-10-13-48788eb9bc511d6c10e27d17cfa6182e-a67b7.png 200w,\n/static/2021-12-23-01-10-13-48788eb9bc511d6c10e27d17cfa6182e-0b187.png 400w,\n/static/2021-12-23-01-10-13-48788eb9bc511d6c10e27d17cfa6182e-fee1c.png 800w,\n/static/2021-12-23-01-10-13-48788eb9bc511d6c10e27d17cfa6182e-9ac90.png 1147w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>但是，如果打开 Firefox 浏览器的开发者工具，取消将 width: -moz-available 当作注释，就会发现 <code class="language-text">&lt;table&gt;</code> 元素的宽度超出了屏幕的尺寸，如图 3-5 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-23-01-11-00-cd88f4f0c1403742e07a71ed049f3c1e-04367.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 69.95670995670994%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAAC8ElEQVQ4y2WUS28jRRSF/e9YICQgmyxYDBI7VqwZsWfBAoEUYJEBRpqZPGac2O5E9kTYnsSJ7UDiOG4/43a32++32xMnit3+uN1OpMCUdFSnbt17+lSrbnlm8xm3szm2bTO/x2w+xxmFYhn/7lv8SggleIB/X/h+iOBBmOnNDYsFzOfLGttecDeb4REtCSz471iuvVs+Vj56wucrX/Dxp6t88tkqK6tP+PKrr5lOLD4Y9hzP4DbH3x2LZOOaY2NIvGZxXB1xIojJOlxuEym1eXl4QVCtES422b80iJa7kjPmxBzzT2vKefcWtTvFM7zzEW+ESdZiIhAhbr4TwaiIL3m8dsSRs64fkRA4e4eVvzjUwyTMqIhGJR7jtJkg3T53BEMErip4r/rsaV28hTaKfD2g9fBpTqxH0HGlmi5XXCzjv6SavC502NeabORTRPQOHusuyJpa59vUe17khnz3tsrz7Jg/DpL8oByzV53y47tL1g8OCeoDvk/0eRqp4y1ZfBMy+PVsQKDS4afTGG8yIjgWwWfZKr+pI0kaspYw2SqO2DjJ8Tx6Jk4t1i40nqUy4nzI+nmLnxM1/GXJuWyyIzXeQo8/z6oEsg3nyEF2ClW8+QG7V0NepExe53ts5rq8Uju8KfTZzrR5lXaON2A722Iz03Djv59qbKrOXoP1pIYvYy7/oV9roOjXKJUxe/pEZos9B7rlckV/xN31RJyP8YmBgDZysSuOI8ZIrs2dgq9UxS9f9xsT/PmO/JOxHF+clYQbFtsS2yp22K2MxFmP7Qde6rGjSZ0IbuTahPQent5NhpjZIlEbk6yP5PoM5RqMXJ54wH0s/jj2vxxn76IpDt0uc3rI6Y6FveTuLLBt9/YvZ/u+gx7nfgiPVqnQbLXp9fuUNR3DrJHNF0mlVdRcgXRG5UriumHS7w+oN1q02h3K5YqLQqns4iyVRqsYeJxHYSGuXLhmF+5DYbuO4P31NVkRzheKWNZk2bKPah74Q82/OFHh/4asdmYAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 23 01 11 00" title="" data-src="/static/2021-12-23-01-11-00-cd88f4f0c1403742e07a71ed049f3c1e-fee1c.png" data-srcset="/static/2021-12-23-01-11-00-cd88f4f0c1403742e07a71ed049f3c1e-a67b7.png 200w,\n/static/2021-12-23-01-11-00-cd88f4f0c1403742e07a71ed049f3c1e-0b187.png 400w,\n/static/2021-12-23-01-11-00-cd88f4f0c1403742e07a71ed049f3c1e-fee1c.png 800w,\n/static/2021-12-23-01-11-00-cd88f4f0c1403742e07a71ed049f3c1e-04367.png 1155w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/2olzvs?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>因此，如果宽度自适应拉伸效果用在 <code class="language-text">&lt;table&gt;</code> 元素上，就不要再使用 -moz-available。</p>\n<h2 id="深入了解-min-content-关键字"><a href="#%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3-min-content-%E5%85%B3%E9%94%AE%E5%AD%97" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>深入了解 min-content 关键字</h2>\n<p>min-content 关键字实际上就是 CSS2.1 规范中提到的“preferred minimum width”或者“minimum content width”，即“首选最小宽度”或者“最小内容宽度”。</p>\n<p>“首选最小宽度”在 CSS 世界中有过简单的介绍，这里再把最小宽度规则深入讲解一下。</p>\n<p>众所周知，元素由 content-box、padding-box、border-box 和 margin-box 组成，元素最终占据的尺寸由这 4 个盒子占据的尺寸决定。其中 padding-box、border-box 和 margin-box 的尺寸表现规则不会因为元素的不同而有所不同，但是 content-box 不一样，它随着内容的不同，首选最小宽度也会不同。这个有必要好好讲一讲。</p>\n<h3 id="替换元素"><a href="#%E6%9B%BF%E6%8D%A2%E5%85%83%E7%B4%A0" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>替换元素</h3>\n<p>按钮、视频和图片等元素属于替换元素，替换元素的首选最小宽度是当前元素内容自身的宽度。例如：</p>\n<html><head></head><body><div class="gatsby-code-button-container" data-toaster-id="41620005052448874000" data-toaster-class="gatsby-code-button-toaster" data-toaster-text-class="gatsby-code-button-toaster-text" data-toaster-text="复制成功" data-toaster-duration="3500" onclick="copyToClipboard(`<section>\n   <img data-src=&quot;./1.jpg&quot; />\n</section>`, `41620005052448874000`)">\n              <div class="gatsby-code-button" title="html">\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div></body></html>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>./1.jpg<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>上面这段 HTML 代码中的图片，如果原始尺寸是 256px×192px，则 <code class="language-text">&lt;section&gt;</code> 元素的首选最小宽度就是 256px。</p>\n<h3 id="cjk-文字"><a href="#cjk-%E6%96%87%E5%AD%97" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>CJK 文字</h3>\n<p>CJK 是 Chinese/Japanese/Korean 的缩写，指的是中文、日文、韩文这几种文字。这里以中文为代表加以说明。如果是一段没有标点的中文文字，则首选最小宽度是单个汉字的宽度。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="26364000737783955000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<style>\n   p {\n      width: min-content;\n      outline: 1px dotted;\n   }\n</style>\n<p>感谢你的支持</p>`, `26364000737783955000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n   <span class="token selector">p</span> <span class="token punctuation">{</span>\n      <span class="token property">width</span><span class="token punctuation">:</span> min-content<span class="token punctuation">;</span>\n      <span class="token property">outline</span><span class="token punctuation">:</span> 1px dotted<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>感谢你的支持<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>最终的宽度表现效果如图 3-6 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-27-10-30-44-6f3c88d3bf0d1f4d2ceeb940677d4b48-72b6c.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 527px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 47.81783681214421%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA7UlEQVQoz52RTU/CQBCG9///FWPijUhoqxH8oF/EAwbLQRBrFOJ2t93ZLZ3uutaUQ4EYfE5vJvPMJDPE7KGNBiZwiyAhb9Bam0OQrtm0vaebVboWoqCUcs7NEbpy3dhPy83dNLUB69ocZ3/zjzxbUT/53M06TX5+o+H8v7LdHMzXJ8i/Wit/+clHR97dXLeQgyO3WKsKzV8QkLIsS0SkGQOQwv6nEFhVSimbbYXnhVQKALKM2dyGnDFOprPkZfEqpRyN7m8fgnEQ+cEkjCaee9MfuO7V8Oz8YhzGURz3Lp3ewHOca88dhvFj3/G+AU/iQRTa15R6AAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 27 10 30 44" title="" data-src="/static/2021-12-27-10-30-44-6f3c88d3bf0d1f4d2ceeb940677d4b48-72b6c.png" data-srcset="/static/2021-12-27-10-30-44-6f3c88d3bf0d1f4d2ceeb940677d4b48-96efc.png 200w,\n/static/2021-12-27-10-30-44-6f3c88d3bf0d1f4d2ceeb940677d4b48-b717e.png 400w,\n/static/2021-12-27-10-30-44-6f3c88d3bf0d1f4d2ceeb940677d4b48-72b6c.png 527w" data-sizes="(max-width: 527px) 100vw, 527px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>但是，如果这段中文文字包含避头标点或避尾标点，同时 line-break 的属性值不是 anywhere，则最终的首选最小宽度需要包含标点字符的宽度。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="61141523715363455000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<p>感谢你的支持！</p>`, `61141523715363455000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>感谢你的支持！<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>最终的宽度表现效果如图 3-7 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-27-10-32-24-c3ee1703b0e82f57a85fb45598119293-2e6f6.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 529px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 43.28922495274102%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsSAAALEgHS3X78AAAA4klEQVQoz52Ry2rCQBSG8/5bN0V8A2mKaTUaQ4xCMbfSRbWICwU33lKjE8zcZ3ri1tiiH8xwzj98HDhj6Csopfh41kphjPM8RwhxznUVxnVECFktN+nhlGVZeuEOWSlZe/1sRwsouRBSSn2DSlk9OXP3a32p9R9UyDCq4S1Gs58H5bozG063j8gAKhhhQv+HAZsUQsCSMCGMlQ3jTEnBOaMlrCgwJPBCSdnCX0ACNxxj8j3f7VOETna3/x4lQRiPg2gcfgy8od1z23a/abaCOAnjpGlab52u6/qO4wdR8vxi/QJoaANm8h6LpAAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 27 10 32 24" title="" data-src="/static/2021-12-27-10-32-24-c3ee1703b0e82f57a85fb45598119293-2e6f6.png" data-srcset="/static/2021-12-27-10-32-24-c3ee1703b0e82f57a85fb45598119293-31cb9.png 200w,\n/static/2021-12-27-10-32-24-c3ee1703b0e82f57a85fb45598119293-8e573.png 400w,\n/static/2021-12-27-10-32-24-c3ee1703b0e82f57a85fb45598119293-2e6f6.png 529w" data-sizes="(max-width: 529px) 100vw, 529px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>之所以首选最小宽度是两个字符的宽度，是因为叹号是避头标点，不能出现在一行的头部，前面需要其他文字字符。</p>\n<p>有一个比较特别的标点是中文破折号，在 IE 浏览器和 Edge 浏览器中它既是避头标点，又是避尾标点；在 Firefox 浏览器中它是避头标点，不是避尾标点；在 Chrome 等 webkit 浏览器中它既不是避头标点，也不是避尾标点。但是，无论在哪个浏览器中，连续的中文破折号都会被认为是一个字符单元。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="85757714371194700000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<p>感谢————————比心</p>`, `85757714371194700000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>感谢————————比心<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>上述代码在各个浏览器中运行的首选最小宽度表现效果如图 3-8 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-27-10-36-30-18b7843ab93958f2597d4f7e946966d0-35569.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 49.57575757575758%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABS0lEQVQoz21Ra2+CQBDk//8pP9lURR4lSNFYFZ+0iMDBcXBw210wRG0n5HK7OzMZ9jQIQ5hO6RuNYLsFRNvS6XnUNE2YTCDPoYeUYFlgGDAeo1CjOo4hSSAIIMuIoRSdZQmMkTVOkdMDR0JAFBFfCI1aWCNjkD3ien1q9vc0JQlAJ8ZUq9U/4qq691/Emw2FQnEc3xpMNQQjgurc08v5IjJWVVXbbwHdhEjSVHHeVlXTNJqu6yzPW6WklEII1QF5u93GNG0p0Zlw/4nox3VdvNQdWfM+vVuSlGWJxeF45LzseUVRCFFyXjDGBnGS3PzlErNwzvM8106ns2yax8x9yGC/X3+t0RFd67ru42RZ5vs+Y/RyFBtd1d8l02O3ncvrCMkowxGJhw2F36HjelF0tWzHsGw8p/rcdhYfzuLtfTY3zJlu6LoR7A+D5Betqz3fVL14YAAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 27 10 36 30" title="" data-src="/static/2021-12-27-10-36-30-18b7843ab93958f2597d4f7e946966d0-fee1c.png" data-srcset="/static/2021-12-27-10-36-30-18b7843ab93958f2597d4f7e946966d0-a67b7.png 200w,\n/static/2021-12-27-10-36-30-18b7843ab93958f2597d4f7e946966d0-0b187.png 400w,\n/static/2021-12-27-10-36-30-18b7843ab93958f2597d4f7e946966d0-fee1c.png 800w,\n/static/2021-12-27-10-36-30-18b7843ab93958f2597d4f7e946966d0-35569.png 825w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h3 id="非-cjk-文字"><a href="#%E9%9D%9E-cjk-%E6%96%87%E5%AD%97" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>非 CJK 文字</h3>\n<p>非 CJK 文字指的是除中文、日文、韩文之外的文字，如英文、数字和标点等字符。非 CJK 文字的首选最小宽度是由字符单元的宽度决定的，所有连续的英文字母、数字和标点都被认为是一个字符单元，直到遇到中断字符。</p>\n<p>哪些字符可以中断字符单元呢？首先无论是哪个浏览器，Space 空格（U+0020）都能中断字符单元，并且忽略 Space 空格前后字符的类型，例如 <code class="language-text">min content</code> 的最小宽度排版是：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="51614597626881830000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`min\ncontent`, `51614597626881830000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title=""\n              >\n                \n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">min\ncontent</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>而其他字符的中断规则在每个浏览器中都是不一样的。</p>\n<ol>\n<li>\n<p>在 webkit 浏览器中，短横线（即连字符）（U+002D）和英文问号（U+003F）可以中断字符单元，各种前括号（如“(”“[”“{”）也可以中断字符单元。其中，短横线和英文问号只有当后面是字母或数字的时候才会中断字符单元，前括号则只有当前面不是字母和数字的时候才会中断字符单元。例如，min-content 字符在最小宽度下的排版是：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="8606643087527366000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`min-\ncontent`, `8606643087527366000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title=""\n              >\n                \n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">min-\ncontent</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>如果短横线后面的字符不是字母，而是其他标点，例如 min-.content，则最小宽度排版就会是下面这样，不会换行：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="60604310465271570000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`min-.content`, `60604310465271570000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title=""\n              >\n                \n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">min-.content</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>如果新加一对括号变成 min-.(content)，则由于前括号前面是点字符，不是字母和数字，因此前括号会中断字符单元，最小宽度排版效果是下面这样的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="68568827026901460000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`min-.\n(content)`, `68568827026901460000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title=""\n              >\n                \n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">min-.\n(content)</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>如果前括号前面的字符是字母或者数字，如 min-.2(content)，则不会发生换行：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="60944826577203700000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`min-.2(content)`, `60944826577203700000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title=""\n              >\n                \n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">min-.2(content)</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n</li>\n<li>\n<p>在 Firefox 浏览器中，英文问号（U+003F）不能中断字符单元，而短横线（U+002D）可以，不过后面的字符必须是字母而不能是数字。例如 min-content 字符在最小宽度下的排版是：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="84632835640912280000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`min-\ncontent`, `84632835640912280000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title=""\n              >\n                \n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">min-\ncontent</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>但是，如果短横线后面是数字，如 min-2content，则不会换行：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="45811578556920460000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`min-2content`, `45811578556920460000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title=""\n              >\n                \n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">min-2content</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>Firefox 浏览器中前括号的中断规则和 webkit 浏览器一致，这里就不重复介绍了。Firefox 浏览器还对斜杠（/）做了特别的中断处理，目的是优化 URL 地址的排版体验，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="43090774941181300000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<p>https://demo.cssworld.cn/new/3/3-1.php</p>`, `43090774941181300000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>https://demo.cssworld.cn/new/3/3-1.php<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>在 Chrome 浏览器和 Firefox 浏览器中的排版效果分别是：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="27076575722959450000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* Chrome 浏览器中 */\nhttps://demo.cssworld.cn/new/3/3-1.php\n/* Firefox 浏览器中 */\nhttps://demo.cssworld.cn/new/3/3-1.php`, `27076575722959450000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title=""\n              >\n                \n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">/* Chrome 浏览器中 */\nhttps://demo.cssworld.cn/new/3/3-1.php\n/* Firefox 浏览器中 */\nhttps://demo.cssworld.cn/new/3/3-1.php</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>至于从哪一处斜杠中断 URL 地址，是浏览器按照整体宽度最小、行数最少的算法进行计算的，因此不同的字符串的中断位置会有所不同。</p>\n</li>\n<li>\n<p>在 IE 浏览器和 Edge 浏览器中，英文问号（U+003F）不能中断字符单元，而短横线（U+002D）可以，但是要求短横线前后是由字母、数字或短横线组成的字符单元，且这个字符单元的长度要大于 1，例如 min-content 字符可以换行：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="13017334443989647000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`min-\ncontent`, `13017334443989647000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title=""\n              >\n                \n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">min-\ncontent</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>但是 m-content 就不会换行，因为虽然短横线前面是字母，但是只有一个字符：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="65143587826865775000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`m-content`, `65143587826865775000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title=""\n              >\n                \n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">m-content</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>m-i-n-content 可以换行，从前往后遍历短横线，m, i-n-content 不符合要求，m-i, n-content 和 m-i-n, content 符合要求，本着“宽度尽可能小，行数尽可能少”的原则，最终的排版是下面这样的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="96458158172198630000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`m-i-n\n-content`, `96458158172198630000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title=""\n              >\n                \n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">m-i-n\n-content</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>如果将前面几个短横线改成下划线 m<em>i</em>n-content，由于短横线前面符合“字母、数字或短横线”规则的字符只有 1 个 n，因此无法换行：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="78084891451571550000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`m_i_n-content`, `78084891451571550000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title=""\n              >\n                \n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">m_i_n-content</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>但是 m_in-content 就可以，短横线前面符合“字母、数字或短横线”规则的字符是 2 个（字符 in），因此可以换行：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="75485713231211400000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`m_in\n-content`, `75485713231211400000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title=""\n              >\n                \n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">m_in\n-content</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>在 IE 浏览器和 Edge 浏览器中，各种前括号也可以中断字符单元，而且无论前面的字符类型是字母数字还是标点，各种前括号都能中断字符单元，例如 min-.2(content) 的最小宽度排版是：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="56695120422046695000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`min-.2\n(content)`, `56695120422046695000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title=""\n              >\n                \n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">min-.2\n(content)</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>另外，在 IE 浏览器和 Edge 浏览器中，百分号（%）的前面也是百分号的时候也能中断字符单元。</p>\n</li>\n</ol>\n<p>可以看到，不同浏览器中的非 CJK 文字的字符单元的中断规则都不一样，但是不要紧张，我们平常是不会使用 min-content 关键字的，因为在实际开发中没有任何场景需要专门把一个元素设置为首选最小宽度。但是，学习 min-content 关键字的含义还是很有用的，因为我们在实际开发的时候会非常频繁地遇到 min-content 的表现场景。如果你不了解 min-content 关键字，就不明白为什么会有这样的行为表现。这一点在弹性布局和网格布局的学习过程中非常重要，因为在弹性布局中，尺寸不足是非常容易遇到的问题。就算抛开弹性布局不谈，平常普通的文本呈现也会用到 min-content 的相关知识，例如，我们经常遇到的连续英文字符不换行的问题：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="40386883181837720000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<style>\n   p {\n      width: 210px;\n      border: 1px solid deepskyblue;\n   }\n</style>\n<p>https://demo.cssworld.cn/new/3/3-1.php</p>`, `40386883181837720000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n   <span class="token selector">p</span> <span class="token punctuation">{</span>\n      <span class="token property">width</span><span class="token punctuation">:</span> 210px<span class="token punctuation">;</span>\n      <span class="token property">border</span><span class="token punctuation">:</span> 1px solid deepskyblue<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>https://demo.cssworld.cn/new/3/3-1.php<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>链接地址没有换行，而是跑到了容器的外部，如图 3-9 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-27-11-26-35-c2d5fc40243ef77c4c66c7b51e3d94da-7bb57.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 37.724550898203596%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAABFElEQVQY042Q646CMBCF+/6vpb+MZgOIgELLRbEqF9dIKWJ7tjVkNzG7yZ5Mmm+mPcmcErxJa3tGERwHiwVmM6xW+PiwredhPkeWIUlsyzmZLK/6UdPgxJHloBSMoSyRprbCEJcL8hyHA6Qk+I/GEXUNpd7G5NwNlRzP4lF+dqe7rAdlmN8lvwl71Y/HW9cvl7Jpur4fhJiivdIRlsRFUVRVFQSB53nXto3j2DCltNjv+bF0dnQdRlmeMcbMs5d3ikgcPwjT/AH0WvcK4qmFggGpDUMq1KN+6N/TkFaO1+F5f6JTtgwIPYGdaNv+4cX0YVL2Ztu2aTk/ue46ZWkSJ76/2W53ruvHCU0oM7DZRHXTfm/+BfOzxrQKLueIAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 27 11 26 35" title="" data-src="/static/2021-12-27-11-26-35-c2d5fc40243ef77c4c66c7b51e3d94da-fee1c.png" data-srcset="/static/2021-12-27-11-26-35-c2d5fc40243ef77c4c66c7b51e3d94da-a67b7.png 200w,\n/static/2021-12-27-11-26-35-c2d5fc40243ef77c4c66c7b51e3d94da-0b187.png 400w,\n/static/2021-12-27-11-26-35-c2d5fc40243ef77c4c66c7b51e3d94da-fee1c.png 800w,\n/static/2021-12-27-11-26-35-c2d5fc40243ef77c4c66c7b51e3d94da-7bb57.png 835w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>这是因为 content-box 的宽度不会小于首选最小宽度，所以字符内容跑到容器的外面去了。我们可以使用 word-break: break-all 或者 word-wrap: break-word 改变字符单元的中断规则，从而改变容器元素的首选最小宽度。但是，中断的效果不太理想，因为完整的英文单词被分开了，如图 3-10 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-27-11-27-33-a707c86e71c2a7a04ac126340ab5ff88-05a55.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 34.44976076555024%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA60lEQVQY03VRf0+DMBTk+3+v+c8SnEzaUZkDpUBHwZZRpPzokzINxs3mcrm+9PLuUgf+O8ZYxhhcF3Y7QAg8DzYbK+IYfB+SxJlfrbga1glA21oIYQ11DZyDlHbS96C1MwIMM4zladHjIsYfTFpDGMIw3IZzUFq8syKtZMw4Oka5uER5gU/xK82Tooqy8ynjg+7vNnMefIKDAL+EbzTduo8zi0vDyqoUspT1h5RUNp9zEjOZ71K/zFQ0vGm56krV0UpWqpuj6gX9tdHS4v7mP3elFCGkYGeWZYdDgBH2np4JCfd7P6Hp8gnr/i+ngJFOAWPNVwAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 27 11 27 33" title="" data-src="/static/2021-12-27-11-27-33-a707c86e71c2a7a04ac126340ab5ff88-fee1c.png" data-srcset="/static/2021-12-27-11-27-33-a707c86e71c2a7a04ac126340ab5ff88-a67b7.png 200w,\n/static/2021-12-27-11-27-33-a707c86e71c2a7a04ac126340ab5ff88-0b187.png 400w,\n/static/2021-12-27-11-27-33-a707c86e71c2a7a04ac126340ab5ff88-fee1c.png 800w,\n/static/2021-12-27-11-27-33-a707c86e71c2a7a04ac126340ab5ff88-05a55.png 836w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>对于这个问题，一种解决方法是使用 hyphen 属性优化；另外一种解决方法就是使用 <code class="language-text">&lt;wbr&gt;</code> 标签。不过这两种方法非本节重点，因此不在这里展开介绍，详见之后介绍。</p>\n<h3 id="最终的首选最小宽度"><a href="#%E6%9C%80%E7%BB%88%E7%9A%84%E9%A6%96%E9%80%89%E6%9C%80%E5%B0%8F%E5%AE%BD%E5%BA%A6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>最终的首选最小宽度</h3>\n<p>一个元素最终的首选最小宽度是所有内部子元素中最大的那个首选最小宽度值。例如：</p>\n<html><head></head><body><div class="gatsby-code-button-container" data-toaster-id="73205761148729210000" data-toaster-class="gatsby-code-button-toaster" data-toaster-text-class="gatsby-code-button-toaster-text" data-toaster-text="复制成功" data-toaster-duration="3500" onclick="copyToClipboard(`<section>\n   <img data-src=&quot;./1.jpg&quot; />\n   <p>感谢您的支持</p>\n   <p>感谢您的支持！</p>\n   <p>感谢————————比心</p>\n   <p>https://demo.cssworld.cn/new/3/3-1.php</p>\n</section>`, `73205761148729210000`)">\n              <div class="gatsby-code-button" title="html">\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div></body></html>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>./1.jpg<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>感谢您的支持<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>感谢您的支持！<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>感谢————————比心<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>https://demo.cssworld.cn/new/3/3-1.php<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>每个 <code class="language-text">&lt;img&gt;</code> 元素和 <code class="language-text">&lt;p&gt;</code> 元素都有一个首选最小宽度的值，这些值中最大的那个值就是 <code class="language-text">&lt;section&gt;</code> 元素的首选最小宽度，如图 3-11 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-27-11-32-35-3fc1d253d4d7d55dda9698a3d533faa9-cb2f0.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 44.19551934826884%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA7ElEQVQoz5WQQW7CMBBFcxfO0yuw4Axd9Rgcgk2XBVUVCSGggNouWkAksCGi0ADBKQ1J3ST2jDEKQgKBRL7Go7H+f2PJijgXypNweH8slYuF57qWCBEk/GCcSrkMC25VHp7u70a9N3ndpnAjvNd/yrwgynalKCIu8sHLn999HCA3HDM293wxnwnHSSdOxDAHnDDukg1sA/RJ7C7yvcwAJyt/HVLyFy9DGrKrH4aZzgwZB0TAAyMDAJANx66omj79mnmEUEote9wfWEPL/nYXerNV1wxVa8pq6K2Pz3619mK0u4OhbXZe1YZhmt0dO0wDebvy11QAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 27 11 32 35" title="" data-src="/static/2021-12-27-11-32-35-3fc1d253d4d7d55dda9698a3d533faa9-fee1c.png" data-srcset="/static/2021-12-27-11-32-35-3fc1d253d4d7d55dda9698a3d533faa9-a67b7.png 200w,\n/static/2021-12-27-11-32-35-3fc1d253d4d7d55dda9698a3d533faa9-0b187.png 400w,\n/static/2021-12-27-11-32-35-3fc1d253d4d7d55dda9698a3d533faa9-fee1c.png 800w,\n/static/2021-12-27-11-32-35-3fc1d253d4d7d55dda9698a3d533faa9-cb2f0.png 982w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/s7qlth?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>最后再补充一句，随着浏览器的迭代，首选最小宽度规则的细节可能会发生变化。</p>\n<h2 id="快速了解-max-content-关键字"><a href="#%E5%BF%AB%E9%80%9F%E4%BA%86%E8%A7%A3-max-content-%E5%85%B3%E9%94%AE%E5%AD%97" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>快速了解 max-content 关键字</h2>\n<p>max-content 关键字表示最大内容宽度，max-content 关键字的作用是让元素尽可能大，保证图文内容在一行显示，哪怕最终的宽度溢出外部容器元素。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="51347200665753030000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<div class=&quot;container&quot;>\n   <p>可以让元素尽可能的大，保证图文内容在一行显示</p>\n</div>\n<style>\n   .container {\n      border: solid deepskyblue;\n   }\n\n   .container > p {\n      width: max-content;\n   }\n</style>`, `51347200665753030000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>可以让元素尽可能的大，保证图文内容在一行显示<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n   <span class="token selector">.container</span> <span class="token punctuation">{</span>\n      <span class="token property">border</span><span class="token punctuation">:</span> solid deepskyblue<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">.container > p</span> <span class="token punctuation">{</span>\n      <span class="token property">width</span><span class="token punctuation">:</span> max-content<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>最终的效果如图 3-12 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-27-11-36-57-ebff747b7b55eb71fa47fed27f15608b-6604a.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 24.64622641509434%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsSAAALEgHS3X78AAAA20lEQVQY01WKy26DMBBF+f+P6r4bSHgEQxxqCFACpq1c3h7P1G6VRa+ORkf3jvcyQrFgNmOq9C/AlGYKsslY8gXz2Qn7Bgufja9wOIgIDaL3WrRftZDvDY/PRZrwOCpzNtTiEvgVz/dlknV1S8KCJX1TlWmUiDp/jNeMvQnhBQrVAXIzcoNxt+L848B+2eVqGyNX3S/HsGrbf26aT/BYgQxoAK/dqXlS79QBPQy1h7s9OgYLObGT/ekOAqS/ePQMouuGrhP8Nit1FyXPsvB0Dnz/EsWhf7qXJf3PDxUgF1y58JbBAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 27 11 36 57" title="" data-src="/static/2021-12-27-11-36-57-ebff747b7b55eb71fa47fed27f15608b-fee1c.png" data-srcset="/static/2021-12-27-11-36-57-ebff747b7b55eb71fa47fed27f15608b-a67b7.png 200w,\n/static/2021-12-27-11-36-57-ebff747b7b55eb71fa47fed27f15608b-0b187.png 400w,\n/static/2021-12-27-11-36-57-ebff747b7b55eb71fa47fed27f15608b-fee1c.png 800w,\n/static/2021-12-27-11-36-57-ebff747b7b55eb71fa47fed27f15608b-6604a.png 848w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/y338i3?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>max-content 关键字和 min-content 关键字的兼容性一样，IE 浏览器和 Edge 浏览器都不支持，其他浏览器都支持，因此这两个关键字在移动端项目中是可以放心使用的。不过实际开发中却没有任何场景必须要使用 max-content 关键字。理论上，满足以下条件的场景是可以体现 max-content 关键字的价值的。</p>\n<ol>\n<li>各项宽度不确定，整体宽度自适应。</li>\n<li>当前项的内容较少。</li>\n<li>当前项的宽度需要尽可能的小。</li>\n</ol>\n<p>表格布局、弹性布局和网格布局都可以满足上述条件，但是很遗憾，这些布局自带与内容相关的尺寸规则，在大多数时候，给子项设置 width: max-content 是没有任何效果的。同时所有需要使用 max-content 关键字的场景，都能使用 white-space: nowrap 声明实现一模一样的效果，并且 white-space: nowrap 的兼容性更好，所以实际上 max-content 关键字没有任何实用价值。但是，当遇到合适的场景时，我还是推荐大家使用 width: max-content，而不是 white-space: nowrap。因为使用 width: max-content 更有档次，可以彰显自己的 CSS 技术深度。另外，我认为 max-content 关键字最大的作用还是其概念本身，抽象出这样一个关键字，能帮助我们更好地理解 CSS 新世界的尺寸体系。</p>\n<p>最后，对 CSS 新的尺寸体系做一个总结。带 content 这个单词的 3 个关键字 fit-content、min-content 和 max-content 都是“内在尺寸”（intrinsic sizing），尺寸表现和内容相关；stretch 关键字（也包括 available 关键字和 fill-available 关键字）是“外在尺寸”（extrinsicsizing），尺寸表现和上下文有关。这 4 个关键字一起撑起了 CSS 世界的尺寸体系。</p>\n<h1 id="深入了解-css-逻辑属性"><a href="#%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3-css-%E9%80%BB%E8%BE%91%E5%B1%9E%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>深入了解 CSS 逻辑属性</h1>\n<p>整个 CSS 世界就是围绕“流”来构建的。在 CSS2.1 时代，CSS 属性的定位都是基于方向的，而不是“流”。这样的设计其实是有问题的，基于方向进行定位虽然符合现实世界认知，但和 CSS 世界基于“流”的底层设计理念不符，这样就会产生不合理的问题。举个例子，有两个按钮，HTML 代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="81189167170325920000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<p>\n   <button>\n      确定\n   </button>\n   <button>\n      取消\n   </button>\n</p>`, `81189167170325920000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">></span></span>\n      确定\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">></span></span>\n      取消\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>这两个按钮是左对齐按钮，因为彼此之间需要一点间距，所以就设置了下面这样的 CSS：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="41974617548597720000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`button {\n   margin-right: 10px;\n}`, `41974617548597720000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">button</span> <span class="token punctuation">{</span>\n   <span class="token property">margin-right</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>其中，margin-right 就是一个基于方向的 CSS 属性，因为 right 表示右侧，和现实世界的右侧匹配。</p>\n<p>通常情况下，我们这么使用是不会有任何问题的。但是，如果开发者使用 direction 属性改变了文档的水平流向，希望按钮从右往左排列，这段 CSS 声明就会有预期之外的表现，示例如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="55931042680299670000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`p {\n   background-color: deepskyblue;\n   direction: rtl;\n}`, `55931042680299670000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">p</span> <span class="token punctuation">{</span>\n   <span class="token property">background-color</span><span class="token punctuation">:</span> deepskyblue<span class="token punctuation">;</span>\n   <span class="token property">direction</span><span class="token punctuation">:</span> rtl<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>此时 margin-right 产生的 10px 间隙就不是我们想要的，如图 3-13 所示。margin-left: 10px 才是我们想要的。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-28-09-55-40-e3056dfd41a1683223d4ce1cd80a04b1-40f0e.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 21.034077555816687%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsSAAALEgHS3X78AAAA50lEQVQI1y2LvUrDUBxH8xjuDroIgs/ga9jBRRBHi+4OnX0URz9wEqFRLCnNxyU3ufemmNy0uQlUTNIm/59KPZzlDMfKPefZEw8s+WTu8Ud3YOPoDYc2dsfYG2Pfxs4rngwBfRfF4BxhCCnhutDauuXfo7AZ8faG1ReMzgM68+kq7N9ldqdWj6K4T6qJMqhMFwTk++Q4NJ3C8zCbWZccQ45rgQHDwMcpwwnDMKKF5C9z48SJE88nX/ilJ/xDhPUam421zSrXbVn0bd1UpimXdWlSnedZlqV/6jSNhJQqESqJpVosi+31A0utzgyp+NpxAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 28 09 55 40" title="" data-src="/static/2021-12-28-09-55-40-e3056dfd41a1683223d4ce1cd80a04b1-fee1c.png" data-srcset="/static/2021-12-28-09-55-40-e3056dfd41a1683223d4ce1cd80a04b1-a67b7.png 200w,\n/static/2021-12-28-09-55-40-e3056dfd41a1683223d4ce1cd80a04b1-0b187.png 400w,\n/static/2021-12-28-09-55-40-e3056dfd41a1683223d4ce1cd80a04b1-fee1c.png 800w,\n/static/2021-12-28-09-55-40-e3056dfd41a1683223d4ce1cd80a04b1-40f0e.png 851w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>但是，如果我们一开始设置的不是符合现实世界认知的 margin-right 属性，而是符合 CSS 世界“流”概念的逻辑属性 margin-inline-end，代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="16133339149958937000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`button {\n   margin-inline-end: 10px;\n}`, `16133339149958937000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">button</span> <span class="token punctuation">{</span>\n   <span class="token property">margin-inline-end</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>那么我们使用 direction 属性改变文档的水平流向是不会出现布局上的任何问题的，如图 3-14 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-28-09-57-19-64fc560c6f5bfe92536f99538cffb30c-c7bf1.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 20.070422535211264%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA6klEQVQI1yWLQU6DQBhGuYYHcO3ChXoTV8aVRzBudGMTV0bjDdx7AS9gNNIIlBkCQqTDFBiobdUyIQX+zzF+eYsveXnWMvQeQzkJ35+CZP8NezYdjLFrY/sVOza2numuAH5WfZpCSgiBqoL5dY2ytC7i/izqT6P+hHdHnI45HTKch22STh8+VnY8/VQ1inxgjHyfXJcYQxSBcziOdZvhRuBaYmQQuJK4nOG+HJq5eql0qapNswYRzIbhj75D16FtobX1L/Ri/i0SrJcLmVYh/8qzvFBqJk2cisz1+YQFHgtsxwuiuNHaJET0C2fBzypQXR8AAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 28 09 57 19" title="" data-src="/static/2021-12-28-09-57-19-64fc560c6f5bfe92536f99538cffb30c-fee1c.png" data-srcset="/static/2021-12-28-09-57-19-64fc560c6f5bfe92536f99538cffb30c-a67b7.png 200w,\n/static/2021-12-28-09-57-19-64fc560c6f5bfe92536f99538cffb30c-0b187.png 400w,\n/static/2021-12-28-09-57-19-64fc560c6f5bfe92536f99538cffb30c-fee1c.png 800w,\n/static/2021-12-28-09-57-19-64fc560c6f5bfe92536f99538cffb30c-c7bf1.png 852w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>margin-inline-end 是一个“流淌”在文档流中的 CSS 逻辑属性，表示内联元素文档流结束的方向。也就是说，当文档流的方向是从左往右的时候，margin-inline-end 属性的渲染表现就等同于 margin-right 属性；当文档流的方向是从右往左的时候，margin-inline-end 属性的渲染表现就等同于 margin-left 属性。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/5q8807?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<h2 id="css-逻辑属性有限的使用场景"><a href="#css-%E9%80%BB%E8%BE%91%E5%B1%9E%E6%80%A7%E6%9C%89%E9%99%90%E7%9A%84%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>CSS 逻辑属性有限的使用场景</h2>\n<p>CSS 逻辑属性需要配合 writing-mode 属性、direction 属性或者 text-orientation 属性使用才有意义。</p>\n<p>CSS 中还有其他一些 CSS 属性值也可以改变 DOM 元素的呈现方向，例如 flex-direction 属性中的属性值 row-reverse 和 column-reverse，但是请注意，这些属性值和 CSS 逻辑属性之间没有任何关系。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="86377647330754020000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<div class=&quot;flex&quot;>\n   <div class=&quot;item&quot;>1</div>\n   <div class=&quot;item&quot;>2</div>\n   <div class=&quot;item&quot;>3</div>\n</div>\n<style>\n   .flex {\n      display: flex;\n      flex-direction: row-reverse;\n   }\n\n   .item {\n      flex: 1;\n      padding: 40px;\n      border-inline-start: 1rem solid deepskyblue;\n      background-color: azure;\n   }\n</style>`, `86377647330754020000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html{9,15}"\n              >\n                <span class="gatsby-code-button-language">html{9,15}</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight has-highlighted-lines" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>flex<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n   <span class="token selector">.flex</span> <span class="token punctuation">{</span>\n      <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>\n<span class="gatsby-highlight-code-line">      <span class="token property">flex-direction</span><span class="token punctuation">:</span> row-reverse<span class="token punctuation">;</span></span>   <span class="token punctuation">}</span>\n\n   <span class="token selector">.item</span> <span class="token punctuation">{</span>\n      <span class="token property">flex</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>\n      <span class="token property">padding</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>\n<span class="gatsby-highlight-code-line">      <span class="token property">border-inline-start</span><span class="token punctuation">:</span> 1rem solid deepskyblue<span class="token punctuation">;</span></span>      <span class="token property">background-color</span><span class="token punctuation">:</span> azure<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>结果如图 3-15 所示，虽然 .item 从右往左呈现，但是 border-inline-start 属性表示的依然是左边框。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-28-10-06-31-89f4b2f7bbc7174ab8795928eb026f3a-3c344.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 32.31850117096019%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsSAAALEgHS3X78AAAA5klEQVQY00WPPU4DQQyF92DQ5Ap0FKRIgdIjQcGBQHQIcQ2aCAWQUBr+ksn8D7PZmZ3H2JsNlgv76X16dnP6jO+MABhAFxTgQeF6hZ5XC6gqAZfveFQ0DOLQzfETPjIcmcqW4RuB81eCZdmLtaZL3Aoa6qqx72bCsAd+YlynXJ3VNH9jGPgMQfREz15wx/C6SyJlM8BHY7I8JG/+k6soOPlsSRfVqqs6JJ8s8MXJbvz5XuFqRT5bSLcMX4w/W/7ZcDe7nqScszZm13UppdC2Pra/MfoQnPdS6a2UynllrLVOG1tN4PoDfrJRQOHWVHcAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 28 10 06 31" title="" data-src="/static/2021-12-28-10-06-31-89f4b2f7bbc7174ab8795928eb026f3a-fee1c.png" data-srcset="/static/2021-12-28-10-06-31-89f4b2f7bbc7174ab8795928eb026f3a-a67b7.png 200w,\n/static/2021-12-28-10-06-31-89f4b2f7bbc7174ab8795928eb026f3a-0b187.png 400w,\n/static/2021-12-28-10-06-31-89f4b2f7bbc7174ab8795928eb026f3a-fee1c.png 800w,\n/static/2021-12-28-10-06-31-89f4b2f7bbc7174ab8795928eb026f3a-3c344.png 854w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/blm9tu?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>writing-mode、direction 和 text-orientation 属性都不是常用 CSS 属性，这就导致 CSS 逻辑属性的使用场景非常有限。有些人可能会说，平常使用 margin-inline-end 属性代替 margin-right 属性不就好了？对，但是这样做没有必要，因为 margin-right 属性兼容性更好，且更容易理解，再怎么考虑也不会想到使用 margin-inline-end 属性代替。</p>\n<p>当然，也存在非常适合使用 CSS 逻辑属性的场景，那就是对称布局，例如，图 3-16 所示的模拟微信对话的效果就是典型的对称布局。</p>\n<p>这种布局效果使用 CSS 逻辑属性实现会有较好的体验，因为我们只需要使用 CSS 逻辑属性实现一侧的布局效果，然后另外一侧的布局效果我们只需要使用一句 direction: rtl 就完成了，代码超级简洁：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="88120696626656850000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<section>\n   <!-- 其他 HTML -->\n</section>\n<section data-self>\n   <!-- 自己对话内容，和上面 HTML 一样 -->\n</section>\n<style>\n   [data-self] {\n      direction: rtl;\n   }\n</style>`, `88120696626656850000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span><span class="token punctuation">></span></span>\n   <span class="token comment">&lt;!-- 其他 HTML --></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">data-self</span><span class="token punctuation">></span></span>\n   <span class="token comment">&lt;!-- 自己对话内容，和上面 HTML 一样 --></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n   <span class="token selector">[data-self]</span> <span class="token punctuation">{</span>\n      <span class="token property">direction</span><span class="token punctuation">:</span> rtl<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-28-10-11-37-e6490df2756fce2f79490366412753ae-954b4.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 348px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 93.67816091954022%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAIAAAAf7rriAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACWklEQVQ4y5WTy27TQBSG8xywROIRWCMkJF4F2i0rdmyo2sCKHfQihEAsWqmqACmhTWmahJTmQlBTl9yaXnwZe2Y8viVOxhNO4iaiIZHSY+vo2NY/35nxfyK9QYiArx/hdFVHiqxqiA6CEGIYBh4G1L7v9/6JiAjFgt9dUp5uKD5DGjJkWW42m5qmMcZAg1B/OXhst9vXxCPySU1WNEwJLhaKqVQ6Ho9nMhlJkgqFQqPR8DxPUZTJ4m6XY+pj6pqmCQR9GGFtWdY0cr/xLu9Z1Wek+fFCAbEKAmMYUEPb4UKTxZz37Px9p75wqbnYQKFmLKbumfOg1eVu28eGDp3fTByI4P3rtcSXbRmhs/OLCdKJYiH6bYueeHjvUfT5S6hVVdVnFF+Rg8BhxLZM13UJxuEJzSoWnH9IFr+XTpCqKeASY9a2Q5MED5Y+LWylHGKUJYkxC//Hn2oSIDcvFSCCn8GYzGIG1pGujW5qklbLG/f20GFdCtYfEExi2dh3qG8TyB3T8IjWksrV5ZVVsPpgEMTYf+bQI1xYp6fo6HM9unm8uFWNbkqL679ffD1/tbwRvX3rTqVWC0/32lQBGXaogjE1UlFz747n3+SerJbmV4pzb3Nza+XHJXn7j1T3Wm5IDuHDPQvR6XRgCci8w0UwcG2YB0XQDcBII+YVud32Pa8FUwUnaTLLth3Lsh3XtR3Htm14hpEyWf8DpSa8JIS6nkcoBUzktHlWqdYQMqq1eiyeyGR/JnaTqXQ2X/gVi+9kD3I/Dg6T+xnIO4m9VCYb+5Y4zBd29/YpY38BG+EWWEmYTp4AAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 28 10 11 37" title="" data-src="/static/2021-12-28-10-11-37-e6490df2756fce2f79490366412753ae-954b4.png" data-srcset="/static/2021-12-28-10-11-37-e6490df2756fce2f79490366412753ae-99c83.png 200w,\n/static/2021-12-28-10-11-37-e6490df2756fce2f79490366412753ae-954b4.png 348w" data-sizes="(max-width: 348px) 100vw, 348px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/ilehdw?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>那么问题来了，既然 CSS 逻辑属性使用场景比较有限，那我们还要不要学呢？当然要学，因为学习它的成本实在是太低了，所以投入产出比其实还不错。</p>\n<h2 id="inline--block-与-start--end-元素"><a href="#inline--block-%E4%B8%8E-start--end-%E5%85%83%E7%B4%A0" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>inline / block 与 start / end 元素</h2>\n<p>只要理解了本节的 inline / block 与 start / end，CSS 逻辑属性就算学完了，因为所有 CSS 逻辑属性都是围绕 inline / block 与 start / end 展开的。</p>\n<p>以 margin 属性为例，在中文或英文网页环境中，默认情况下，margin 方位属性和 margin 逻辑属性相互的映射关系如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="45743782022217160000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`margin-left   == margin-inline-start\nmargin-top    == margin-block-start\nmargin-right  == margin-inline-end\nmargin-bottom == margin-block-end`, `45743782022217160000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title=""\n              >\n                \n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">margin-left   == margin-inline-start\nmargin-top    == margin-block-start\nmargin-right  == margin-inline-end\nmargin-bottom == margin-block-end</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>其中，inline / block 表示方向，start / end 表示起止方位。</p>\n<p>在中文和英文网页环境中，inline 元素（文字、图片、按钮等）默认是从左往右水平排列的；block 元素（如 <code class="language-text">&lt;div&gt;</code>、<code class="language-text">&lt;p&gt;</code> 元素等）默认是从上往下垂直排列的。因此，margin-inline-start 就表示内联元素排列方向的起始位置，即“左侧”；margin-inline-end 就表示内联元素排列方向的终止位置，即“右侧”。</p>\n<p>如果设置 direction: rtl，则水平文档流方向就是从右往左，此时 start 对应的就是“右侧”，end 对应的就是“左侧”。如果设置 writing-mode: vertical-rl 属性，把文档流改为垂直且从右往左排列，则此时内联元素是从上往下排列的。inline 指的是垂直方向，block 指的是水平方向，margin 方位属性和 margin 逻辑属性相互映射关系就变成了下面这样：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="96421153788293480000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* writing-mode: vertical-rl 环境下 */\nmargin-left   == margin-block-end\nmargin-top    == margin-inline-start\nmargin-right  == margin-block-start\nmargin-bottom == margin-inline-end`, `96421153788293480000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title=""\n              >\n                \n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">/* writing-mode: vertical-rl 环境下 */\nmargin-left   == margin-block-end\nmargin-top    == margin-inline-start\nmargin-right  == margin-block-start\nmargin-bottom == margin-inline-end</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>如果对上面的映射关系存疑，可以查看以下 demo</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/1ds17s?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>下面快速介绍一下可能会用到的 CSS 逻辑属性和 CSS 逻辑属性值。</p>\n<h2 id="width--height-属性与-inline-size--block-size-逻辑属性"><a href="#width--height-%E5%B1%9E%E6%80%A7%E4%B8%8E-inline-size--block-size-%E9%80%BB%E8%BE%91%E5%B1%9E%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>width / height 属性与 inline-size / block-size 逻辑属性</h2>\n<p>在中文或英文网页环境中，默认情况下，width 属性对应的 CSS 逻辑属性是 inline-size，height 属性对应的 CSS 逻辑属性是 block-size。</p>\n<p>width 属性新支持的几个关键字属性值也可以作为 inline-size 的属性值，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="93304448463936060000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 浏览器支持 */\ninline-size: fit-content;\ninline-size: min-content;\ninline-size: max-content;`, `93304448463936060000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 浏览器支持 */</span>\n<span class="token property">inline-size</span><span class="token punctuation">:</span> fit-content<span class="token punctuation">;</span>\n<span class="token property">inline-size</span><span class="token punctuation">:</span> min-content<span class="token punctuation">;</span>\n<span class="token property">inline-size</span><span class="token punctuation">:</span> max-content<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>除了 width 属性和 height 属性，min-width、min-height、max-width 和 max-height 也都有对应的 CSS 逻辑属性，示例如下：</p>\n<ul>\n<li>min-inline-size</li>\n<li>min-block-size</li>\n<li>max-inline-size</li>\n<li>max-block-size</li>\n</ul>\n<h3 id="兼容性"><a href="#%E5%85%BC%E5%AE%B9%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>兼容性</h3>\n<p>inline-size 和 block-size 属性的兼容性如表 3-1 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-28-10-47-04-5a654aa718da264cf4d82c46910faf9a-3f6d7.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 29.181494661921707%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABRklEQVQY0w3KyU7CQAAA0H65P2BiiPHgyaMe1JgYuSiRBKNRBAShFLpRpoXZOm2ZLrNUqFze6RmeF8RJxnkerENEYtfzLWsZRpsNJPOFMxz/jifm4GeKCR2Np9/Dycy0FrY3M48Ehpa80bmodrUutOBSl3/NXsjioEotK63zpim1LmrFm32hBFcy39fqcCyCGysCWg4hWdTuW08jR24m9PUq5263fRt+3KwTfPKypXHYsVHrbSs40FWygPd29FXL1DBxdOkgKcjz97Q3d8XKtM7O5S647j8u5w8kjU97UZKhnh1evANVQlnGg8Vd57MrCmpQ6NY7kNCAQpthl9AVYoCSgEEbQp8RbwdnaRxgMEuhSYmPtg4MvQ2YU+wZGPlaMYr9qsCixBg6okCMrtIEVAXE2Ms5yhKAoKskYzRIGagV0zKWFfkH6es/sz3nxSQAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 28 10 47 04" title="" data-src="/static/2021-12-28-10-47-04-5a654aa718da264cf4d82c46910faf9a-fee1c.png" data-srcset="/static/2021-12-28-10-47-04-5a654aa718da264cf4d82c46910faf9a-a67b7.png 200w,\n/static/2021-12-28-10-47-04-5a654aa718da264cf4d82c46910faf9a-0b187.png 400w,\n/static/2021-12-28-10-47-04-5a654aa718da264cf4d82c46910faf9a-fee1c.png 800w,\n/static/2021-12-28-10-47-04-5a654aa718da264cf4d82c46910faf9a-3f6d7.png 843w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>IE 浏览器和 Edge 浏览器并不支持这两个属性，而移动端目前全部支持这两个属性，很快就可以放心使用。接下来要介绍的几个 CSS 逻辑属性的兼容性也是类似的。</p>\n<h2 id="由-margin--padding--border-演变而来的逻辑属性"><a href="#%E7%94%B1-margin--padding--border-%E6%BC%94%E5%8F%98%E8%80%8C%E6%9D%A5%E7%9A%84%E9%80%BB%E8%BE%91%E5%B1%9E%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>由 margin / padding / border 演变而来的逻辑属性</h2>\n<p>margin 和 padding 属性对应的 CSS 逻辑属性很早就被支持了，最早可以追溯到 2008 年，然而当时使用的不是现在的语法，且只支持水平方向上的逻辑控制，同时需要添加私有前缀，如下所示：</p>\n<ul>\n<li>-webkit-margin-start、-webkit-margin-end；</li>\n<li>-webkit-padding-start、-webkit-padding-end。</li>\n</ul>\n<p>在规范稳定之后，margin、padding 和 border 属性一起，演变成了按照 inline / block 与 start / end 这几个关键字组合的新的 CSS 逻辑属性，无须私有前缀。新的 CSS 逻辑属性如下：</p>\n<ul>\n<li>margin-inline-start、margin-inline-end、margin-block-start、margin-block-end；</li>\n<li>padding-inline-start、padding-inline-end、padding-block-start、padding-block-end；</li>\n<li>border-inline-start、border-inline-end、border-block-start、border-block-end；</li>\n<li>border-inline-start-color、border-inline-end-color、border-block-start-color、border-block-end-color；</li>\n<li>border-inline-start-style、border-inline-end-style、border-block-start-style、border-block-end-style；</li>\n<li>border-inline-start-width、border-inline-end-width、border-block-start-width、border-block-end-width。</li>\n</ul>\n<p>现在还支持 CSS 逻辑属性的缩写语法，例如 margin-inline 属性是 margin-inline-start 属性和 margin-inline-end 属性的缩写，margin-block 属性是 margin-block-start 属性和 margin-block-end 属性的缩写。完整的 CSS 缩写逻辑属性如下：</p>\n<ul>\n<li>margin-inline、margin-block；</li>\n<li>padding-inline、padding-block；</li>\n<li>border-inline、border-block；</li>\n<li>border-inline-color、border-block-color；</li>\n<li>border-inline-style、border-block-style；</li>\n<li>border-inline-width、border-block-width。</li>\n</ul>\n<p>可以看到 CSS 缩写逻辑属性的数量是非常多的，但是，它们都是由传统的带有方位性质的 CSS 属性按照特定规则演变而来的，即把原来的 left、top、right、bottom 换成对应的 inline / block 与 start / end 并组合。</p>\n<h3 id="兼容性-1"><a href="#%E5%85%BC%E5%AE%B9%E6%80%A7-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>兼容性</h3>\n<p>margin/padding/border 相关的 CSS 逻辑属性的兼容性如表 3-2 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-28-10-57-33-0510472a0ec2c848718cff16f1b4f2f2-3f6d7.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 41.16251482799525%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAABjElEQVQY02VPy27TQBT1b/MPbAEJCXXBBjYIhERLJRALKgQNidOkdWyPxzOeh+fhcRLHHr+SmkERK87iPs655+peL4zifVUVpoxBkhGawBRClKQIZwQkcLlaB2EcgeT292Lu3y1X97P5EiQpIXQ2973pHx7P8fFvLo3ZxICy3PkRpmfyf3jD0I5DN/R2Gu3Y29OxPY5tdxwOde3IurG93U8n23fNNFnH9J09jadxaLuu8RiNBAtFQd4glQr84ccmhPHB/1yKX/7Xq93i0zco395mXNPnN5yLrLP8gbw3Ja621Ivju/Xie6T501Dzgl1c+xGG+MVLPfvy+udHtnl3GchnN8RJT64yIunYsuvZq2Vw39W5R0koBTAKHgzeFihDay1TRtw5CaMB50CxjWaB4BFHvspjTiOUPOB0JfPYi0Jf5omWsDnkIgdNxQsFC420gjIH1Y66v0qTMRLutlQJaDRqG9E20o15CVi5vixwZ5XRqVthCnxmlIR1xZUAthaCg3rPnbQ1mXO2jXLFH3KIrgTTIfUzAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 28 10 57 33" title="" data-src="/static/2021-12-28-10-57-33-0510472a0ec2c848718cff16f1b4f2f2-fee1c.png" data-srcset="/static/2021-12-28-10-57-33-0510472a0ec2c848718cff16f1b4f2f2-a67b7.png 200w,\n/static/2021-12-28-10-57-33-0510472a0ec2c848718cff16f1b4f2f2-0b187.png 400w,\n/static/2021-12-28-10-57-33-0510472a0ec2c848718cff16f1b4f2f2-fee1c.png 800w,\n/static/2021-12-28-10-57-33-0510472a0ec2c848718cff16f1b4f2f2-3f6d7.png 843w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>由于目前 Safari 浏览器并不支持 CSS 缩写逻辑属性，因此要慎用 CSS 缩写逻辑属性，最好使用包含 start 和 end 的基本 CSS 逻辑属性。</p>\n<h2 id="text-align-属性支持的逻辑属性值"><a href="#text-align-%E5%B1%9E%E6%80%A7%E6%94%AF%E6%8C%81%E7%9A%84%E9%80%BB%E8%BE%91%E5%B1%9E%E6%80%A7%E5%80%BC" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>text-align 属性支持的逻辑属性值</h2>\n<p>对 text-align 属性而言，演变的不是属性而是属性值。</p>\n<ul>\n<li>text-align: start</li>\n<li>text-align: end</li>\n</ul>\n<h3 id="兼容性-2"><a href="#%E5%85%BC%E5%AE%B9%E6%80%A7-2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>兼容性</h3>\n<p>text-align 支持 start 和 end 属性值的兼容性如表 3-3 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-28-10-59-58-062853e1f91a0bc5b50191b700d0f696-68451.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 35.857988165680474%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABV0lEQVQY0z1MT0+DMBTne3vQL7CLxi/gWS/GGF3mwcRkt8kGjAkrFAqjhQJjGzAobS1m8eXl5ff3aT4MMpoXZYmiGEC4BZ7jAiW6wINBuFwZy9X6W18aa3uH8cowF/pq8+OqzMbZalJKIccRQg78H44AY9y05z9FcnGJja64QI1zJiXjA5OCCzFwzscvikrZnFvGVJmPrmSCjzFFVH0EA9OSFL2hJKXh3HR04B93ZoHmNAfu7KUOFnpEphaqq/DNTqwANVW8rwAkn6cDOZRIM3B8bWenJn2Y6e8WrOcf8H6Sn7zJ012/mz3b+c00EB25mkavZiT7nO71x69bFEesyzRCfLVVEULfJBjgyAmdZU6Drb/AeEsSF4VWSSEAehSu90UYQMteL6BnVAXSdrHL+zwjXrWPujZT/WEoaeq3p7SpCc181lF1z03atSlOXNblYiiHvqiPyS+y4XxxEwdwAwAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 28 10 59 58" title="" data-src="/static/2021-12-28-10-59-58-062853e1f91a0bc5b50191b700d0f696-fee1c.png" data-srcset="/static/2021-12-28-10-59-58-062853e1f91a0bc5b50191b700d0f696-a67b7.png 200w,\n/static/2021-12-28-10-59-58-062853e1f91a0bc5b50191b700d0f696-0b187.png 400w,\n/static/2021-12-28-10-59-58-062853e1f91a0bc5b50191b700d0f696-fee1c.png 800w,\n/static/2021-12-28-10-59-58-062853e1f91a0bc5b50191b700d0f696-68451.png 845w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h2 id="最有用的-css-逻辑属性-inset"><a href="#%E6%9C%80%E6%9C%89%E7%94%A8%E7%9A%84-css-%E9%80%BB%E8%BE%91%E5%B1%9E%E6%80%A7-inset" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>最有用的 CSS 逻辑属性 inset</h2>\n<p>使用绝对定位的时候经常会用到 left、top、right、bottom 等属性。同样，在 CSS 新世界中也有与之相对应的 CSS 逻辑属性，全部都是以 inset 开头，这其中包括：</p>\n<ul>\n<li>inset-inline-start</li>\n<li>inset-inline-end</li>\n<li>inset-block-start</li>\n<li>inset-block-end</li>\n</ul>\n<p>也包括水平方位或者垂直方位的缩写：</p>\n<ul>\n<li>inset-inline</li>\n<li>inset-block</li>\n</ul>\n<p>还包括完整的缩写：</p>\n<ul>\n<li>inset</li>\n</ul>\n<p>以上属性中最有用的当属 inset 属性，在使用绝对定位或固定定位的时候，我们经常会使用下面的 CSS 代码：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="36265570984552632000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.overlay {\n   position: absolute;\n   left: 0;\n   top: 0;\n   right: 0;\n   bottom: 0;\n}`, `36265570984552632000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.overlay</span> <span class="token punctuation">{</span>\n   <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n   <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n   <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n   <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n   <span class="token property">bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>有了 inset 属性，事情就简单多了：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="87043673495659360000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.overlay {\n   position: absolute;\n   inset: 0;\n}`, `87043673495659360000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.overlay</span> <span class="token punctuation">{</span>\n   <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n   <span class="token property">inset</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>这就很有意思了，CSS 大多数的逻辑属性在平时开发过程中都用不到，只有一个例外，那就是 inset 属性。inset 属性有两大特点，一个是逻辑，另一个是缩写。当然，逻辑就是摆设，平常根本用不到。但是缩写实在是太诱人了，因为绝对定位元素在 4 个方向上同时定位是很常见的，每次都要写 4 个属性真的很麻烦。inset 属性谁用了都说好，以后一定会成为热门的 CSS 属性。</p>\n<p>目前阻碍 inset 属性普及的唯一因素就是兼容性，主要问题出在 Safari 浏览器。在我写本书的时候，Safari 浏览器不支持所有缩写逻辑属性，希望本书出版后能看到 Safari 浏览器支持这些缩写逻辑属性的好消息。最后提一句，inset 属性支持的值的数量范围是 1 ～ 4，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="59626748090929560000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.overlay {\n   inset: 100px;\n   inset: 100px 200px;\n   inset: 100px 200px 300px;\n   inset: 100px 200px 300px 400px;\n}`, `59626748090929560000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.overlay</span> <span class="token punctuation">{</span>\n   <span class="token property">inset</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>\n   <span class="token property">inset</span><span class="token punctuation">:</span> 100px 200px<span class="token punctuation">;</span>\n   <span class="token property">inset</span><span class="token punctuation">:</span> 100px 200px 300px<span class="token punctuation">;</span>\n   <span class="token property">inset</span><span class="token punctuation">:</span> 100px 200px 300px 400px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>不同数量的值所表示的方位和 margin、padding 等属性一样，这里不再赘述。</p>\n<p>虽然前面几节列举了很多 CSS 逻辑属性，但是这不是全部，还有很多其他 CSS 逻辑属性或者 CSS 逻辑属性值，如 scroll-margin、scroll-padding，以及它们衍生出的十几个 CSS 逻辑属性，以及 float 属性和 clear 属性支持的 inline-start 和 inline-end 逻辑属性值等。CSS 逻辑属性大同小异，这里就不一一展开说明了。</p>\n<h1 id="在-css-边框上做文章"><a href="#%E5%9C%A8-css-%E8%BE%B9%E6%A1%86%E4%B8%8A%E5%81%9A%E6%96%87%E7%AB%A0" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>在 CSS 边框上做文章</h1>\n<p>一个图形元素的装饰部件主要是边框和背景。在 CSS2.1 时代，边框只能是纯色的，效果太单调了。于是 CSS 规范制定者就开始琢磨，是不是可以在 CSS 边框上做文章，通过支持图片显示来增强边框的表现力呢？</p>\n<h2 id="昙花一现的-css-多边框"><a href="#%E6%98%99%E8%8A%B1%E4%B8%80%E7%8E%B0%E7%9A%84-css-%E5%A4%9A%E8%BE%B9%E6%A1%86" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>昙花一现的 CSS 多边框</h2>\n<p>浏览器对多边框曾经支持过一段时间，语法示意如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="65310231738702630000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.example {\n   border-right: 8px solid;\n   border-right-colors: #555 #666 #777 #888 #999 #aaa #bbb #ccc;\n}`, `65310231738702630000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.example</span> <span class="token punctuation">{</span>\n   <span class="token property">border-right</span><span class="token punctuation">:</span> 8px solid<span class="token punctuation">;</span>\n   <span class="token property">border-right-colors</span><span class="token punctuation">:</span> #555 #666 #777 #888 #999 #aaa #bbb #ccc<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>这样一条渐变边框效果就出来了。可能是因为这一功能不实用，它已经从规范中被剔除了，现在没有任何浏览器支持这种语法。想要实现类似的效果，可以使用 box-shadow 或者 border-image 属性。</p>\n<h2 id="独一无二的-border-image-属性"><a href="#%E7%8B%AC%E4%B8%80%E6%97%A0%E4%BA%8C%E7%9A%84-border-image-%E5%B1%9E%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>独一无二的 border-image 属性</h2>\n<p>所有与装饰有关的 CSS 属性都能从其他设计软件中找到对应的功能，如背景、描边、阴影，甚至滤镜和混合模式，但是唯独 border-image 属性是 CSS 这门语言独有的，就算其他软件有边框装饰，也不是 border-image 这种表现机制。</p>\n<p>这看起来是件好事情，你瞧，border-image 多么与众不同！但实际上，border-image 属性很少出现在项目代码中，其中重要的原因之一就是 border-image 属性过于特殊。</p>\n<ol>\n<li>对开发者而言，border-image 属性怪异的渲染机制，导致学习成本较高，掌握 border-image 属性的人并不多。而且很多时候该属性对源图像的规格和比例也有要求，这导致使用成本也比较高。</li>\n<li>对设计师而言，border-image 属性的视觉表现和现实认知是不一致的，而设计师的视觉设计多基于现实认知，因此，设计师无法为 border-image 属性量身定制图形表现。另外，当下的设计趋势是扁平化而非拟物化，边框装饰通常在项目中不会出现。</li>\n<li>border-image 属性怪异的渲染机制导致元素的 4 个边角成了 4 个尴尬的地方，实现的边框效果往往不符合预期，最终导致开发者放弃使用 border-image 属性。</li>\n</ol>\n<p>至于 border-image 属性这么渲染的原因和 border-image 属性很少使用的另外一个重要原因将在之后介绍。</p>\n<p>总而言之，border-image 属性是一个颇有故事的 CSS 属性，我对 border-image 属性的感情也颇为复杂，恨铁不成钢，内心十分矛盾，既希望人人都熟练掌握这个很酷的 CSS 属性，又担心带大家入坑后发现它无用武之地。</p>\n<p>因此，大家接下来学习 border-image 属性的时候，就保持一个从容的心态，看懂了自然最好，看不懂也没关系。大家只需要知道 border-image 属性大致是怎么回事，可以用在什么场景，等哪天遇到了类似的场景，能够条件反射般想到使用 border-image 属性来实现就可以了。当然，我也会尽量以最简单的语言把 border-image 属性讲清楚，方便大家一遍就看懂。</p>\n<p>为了方便接下来的学习，我们约定后续所有 .example 元素都包含下面的公共 CSS 代码：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="89946405047563860000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.example {\n   width: 80px;\n   height: 80px;\n   border: 40px solid deepskyblue;\n}`, `89946405047563860000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.example</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 80px<span class="token punctuation">;</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 80px<span class="token punctuation">;</span>\n   <span class="token property">border</span><span class="token punctuation">:</span> 40px solid deepskyblue<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="九宫格"><a href="#%E4%B9%9D%E5%AE%AB%E6%A0%BC" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>九宫格</h3>\n<p>border-image 属性的基本表现并不难理解，大家记住一个关键数字“9”即可。</p>\n<p>假设一个 <code class="language-text">&lt;div&gt;</code> 元素就是 .example 元素，我们沿着这个 <code class="language-text">&lt;div&gt;</code> 元素的 content-box 的边缘画 4 条线，则这个 <code class="language-text">&lt;div&gt;</code> 元素就被划分成了 9 份，形成了 1 个九宫格，如图 3-17 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-03-14-25-45-4ffbd121551821f0355cefdedbb37f16-69166.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 702px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 45.72649572649573%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABR0lEQVQoz42PwU7CQBCG9wWMMXpVDnhXL958FDGRsw/jyUQ9eNFEw4EIKMZSSkupFFBEVMQDUShqEaElgl26U3chEqKGMPmzye7838y/yBkqG9gZqjvuQHmWby/xdVes7eJaC/5H1WQtAsN2B/2F/S9dtF9aOdM3lNfVRH05VJ3cu1E+yMAwCj7WAYXtYMl0vjoOsbYKJuIc1YCx4LBuzR3kgpVOU3uCVmO3aM4f3aVa48UO6IRu9hUbXdsmGG/eGuicpJv/xQaAX7Cviie20zP+2uKJ5j6tTR8+T+1k4gbtwKjY/VT0e1713XNtrectTx6vXX561Vqh3YeZY7APYYzh54kA2IROoNe+2MCeWAGzAKGGno3BgigXHorlitY0jDddj0RFWUlyUYkT4nIyHYnJvCjHL1K5/D0vSLwgKskUVeYqG5MS3+Lp4eOESrJiAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 03 14 25 45" title="" data-src="/static/2022-01-03-14-25-45-4ffbd121551821f0355cefdedbb37f16-69166.png" data-srcset="/static/2022-01-03-14-25-45-4ffbd121551821f0355cefdedbb37f16-c9f7c.png 200w,\n/static/2022-01-03-14-25-45-4ffbd121551821f0355cefdedbb37f16-bfd8b.png 400w,\n/static/2022-01-03-14-25-45-4ffbd121551821f0355cefdedbb37f16-69166.png 702w" data-sizes="(max-width: 702px) 100vw, 702px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>border-image 属性的作用过程就是把图片划分为图 3-17 所示的 9 个区域的过程。所以，学习 border-image 属性其实很简单，记住两个点：一是源图像的划分，二是九宫格尺寸的控制。“九宫格尺寸的控制”放在后面讲，我们暂时把边框的尺寸当作九宫格的尺寸，先将注意力全部放在学习源图像的划分上。</p>\n<p>假设我们有一个尺寸是 162px×162px 的源图像，如图 3-18 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-03-14-31-07-3e029dbb44b78e48b9e9ec818d975b36-f8ebe.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 259px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 126.25482625482627%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAZCAIAAAC+dZmEAAAACXBIWXMAAAsSAAALEgHS3X78AAAD/0lEQVQ4y5VUbUxbVRg+OmCbc2Sbm9mMiTFmidE4s3/+8OdM0GhmXLIsJsN/amKGMyTux0QyzAxsgKxjJFPkwzHRjTHoYNDSUmCsQPkGYQWkjE3A0fJl1hboPe/je85tK/rPk/be97z3ec573uc+5woABvEFA4/hXlFBhKeGVJFnDgOPdEpGNMa1BG8QcYqQ+jYewgtuPN0Kz188I0UdnMfzRXi5GL8v6ZXIvoiEZrzWhdk1PWcy3357jP0dEE6IZuxpo1Zeu3tO7v8B2wuw7Tt5oBT3ArXLSHYRA4QDBz3whXVl/p8Yg2hEYisSWzig97xAah2JHHquiPZdgsimk843R9UjBmgMMn0xclji/WEIGwk7vdGDed7l0iqlXJdJuTLxPB21YjUyvYZXOsEAYcfxUZjNCn3FmoEULw6OwL+q2uEkLYVxqJo+qKPwuu4Z90P00hCOTeh24z1L/XTZ9dBfO2lO12WEg5qFAfvKKAc8NTF/Vo6tdM7FKcLcgex7ZLx4We60GLb7Ki3RaEwkycxk+Y1bPuApJ41rY3JrfuTVEjm+qEpLUpXRMQutLe28oBSyTlVjfDtlCcoQdPoZ+taJaVR45a4LtPsi64/XSzHkjwqGr+5A5GDfJWayyPjI9iFuCEpPpKxEOiOQnoZ6vGuVm84xBnsLFTjXEyPz+Nwpt+TJzXl0zIpQZBXGYfpZyFP8S6UbqrHFML193WDA1nx83W4qJuLS4VMbjtykkHYeYZUih3D1CKrUM9L6L4Tx1q845dIikSar96SmN2cjJT4l8rpBct3gIPjLcNDq1doaEY0pHF+z+03MBm/bA7TNJZ9wUPksmd6WVV5jR0Fkb6FsmjI3VzBNoon2tEr3crS2qlw1j6dalLGfdIH5lnngp2G5w4LdF2mXhZ4tRO1E1hyYucmljkByG+yLMXue9rE3kRD1LR1np6Q1KW+z+Ka2me3vTEA0KG8nMN+O8w822PPLSXVcRBNSR00FQWkOJOViSz5lKG1DBg4PKQBXzp6O2ZNiJ/vEOI6ORKUlc4GPbUh3qfY0IiSRMogM34aPgbkGd79O6htC5msjHbGBWVadMvPM4Z+p8T8mMfkyemDMlEbp92kOFWpyHCMotsv/BLGta5oe9O8howfjf474uqK6pq7sSmW7u9Pd6Zn3B4LBYG//4Mg97113l4lYXl6pu22vsdY7nC2MvFXf2NXdW1J+1dPdKy4Xl53Nznc0t9Y3NHl6+mZm5rp7++sb7Ywzyf5A4MeyijNnc0rKK87lWYpLr1RUXvvksy8sRd8Lp6ut9tbtO3c7+geGuAhvyR9YmPRNDQ2PmOSHf8w02By8ektbOxdotDl7+gaqqq0dXd1/A3lS2nhSyI/0AAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 03 14 31 07" title="" data-src="/static/2022-01-03-14-31-07-3e029dbb44b78e48b9e9ec818d975b36-f8ebe.png" data-srcset="/static/2022-01-03-14-31-07-3e029dbb44b78e48b9e9ec818d975b36-17e32.png 200w,\n/static/2022-01-03-14-31-07-3e029dbb44b78e48b9e9ec818d975b36-f8ebe.png 259w" data-sizes="(max-width: 259px) 100vw, 259px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>这个源图像一共由 9 个格子构成，每个格子占据的尺寸是 54px×54px，则下面的代码可以让这 9 个格子依次填充到九宫格的 9 个区域中：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="1997086724786001400"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.example {\n   border-image: url(./grid-nine.svg) 54;\n}`, `1997086724786001400`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.example</span> <span class="token punctuation">{</span>\n   <span class="token property">border-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./grid-nine.svg<span class="token punctuation">)</span></span> 54<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>此时渲染出来的效果如图 3-19 所示。</p>\n<p>渲染的原理如图 3-20 所示，该图展示了源图像的 9 个格子是如何分配到九宫格的各个区域中的。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-03-14-33-33-89edcfdf3eda2a9507c33bc4aa78343b-b9e7f.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 73.09027777777779%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACaElEQVQoz41SS2sTURgdEPGHCC5dCW5cuHMjLhQqLt24cCduLBQXgtCFiAulINJUbaGtFNtqSwlTtE1aK23znnTSJPNqZjKdZDJ5zPvOnc87GVBKsXq4fPfj3HO45z4oOIUwjErCBW6Jg0f0BzVg/SF/SknBX9zqQt3OaaBZ6qeaxfV+8/8y46HoWRpKWtSM/4Bd5Q9/tjmOPWMA/0WAsc1Z3j/0zowdhqHn+wgFBJ7nIc/j7KAjGTgrCybS7YghAgIyEc0JM0LosM5rbd3o9cWjRrVabwhCvlwqcTVJ4IuFYpmtNBryAVthyuyxpsX7URiH2HHB9bDthJ4HpPd9IGxIClkLg6gnI0odECIiMUQrIUU2BVmCQQcEDjQVBAFUFXAA/wFqSrSWRAdm8tkd4WVFH74ofGv7d9KtWxnv9p55Y6v7hjVidbLtfq0a/uvtcGJ/sd6mxlhzoujA6Cq9WHyQNezhnb4V/fNzylih/4rpXlpWbqb12FyQrEyhjZNVoPn9TJPynn/vTG1dh/cb9HrwmB50BnKdfVcfXF1r9kwTbH0037uXsXj2oNZqoMSe/yKFhs/mjm9QzGqtkhITPJ3L13KzBwhhsHqTknt5TVMGLjjWw73uSMbWFVnt615KtFcqeGi2PjPU/VJn9GcXRpYXVvhr+60BjuIleOvCZPki3b+S1M5N83dTx3HsxaY5n1WCJ8nw6eZ0TqQUB+suhqOuaSHRxrFIcPG84n9swVw7nGr46Q6K+aYTSCaCwjEwLc5CJ76nxBEIeseQRdFoiKYqq7VDoZgnB84Vits7u2WGMXvd+IeQ+gvd6y5kN5uJmQAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 03 14 33 33" title="" data-src="/static/2022-01-03-14-33-33-89edcfdf3eda2a9507c33bc4aa78343b-fee1c.png" data-srcset="/static/2022-01-03-14-33-33-89edcfdf3eda2a9507c33bc4aa78343b-a67b7.png 200w,\n/static/2022-01-03-14-33-33-89edcfdf3eda2a9507c33bc4aa78343b-0b187.png 400w,\n/static/2022-01-03-14-33-33-89edcfdf3eda2a9507c33bc4aa78343b-fee1c.png 800w,\n/static/2022-01-03-14-33-33-89edcfdf3eda2a9507c33bc4aa78343b-b9e7f.png 1152w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>有趣的是，源图像的 9 个格子居然正好和边框划分的 9 个区域一一对应，是巧合，还是本就如此？这不是巧合，这是因为 CSS 属性在其中起了作用。</p>\n<p>border-image 属性其实是多个 CSS 的缩写，其中 <code class="language-text">url(...) 54</code> 是 border-image-source 属性和 border-image-slice 属性的缩写，因此下面两段 CSS 代码的效果是一样的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="60242503457935090000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.example {\n   border-image: url(./grid-nine.svg) 54;\n}\n\n.example {\n   border-image-source: url(./grid-nine.svg);\n   border-image-slice: 54;\n}`, `60242503457935090000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.example</span> <span class="token punctuation">{</span>\n   <span class="token property">border-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./grid-nine.svg<span class="token punctuation">)</span></span> 54<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.example</span> <span class="token punctuation">{</span>\n   <span class="token property">border-image-source</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./grid-nine.svg<span class="token punctuation">)</span></span><span class="token punctuation">;</span>\n   <span class="token property">border-image-slice</span><span class="token punctuation">:</span> 54<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>border-image-source 属性的值是一个 <code class="language-text">&lt;image&gt;</code> 数据类型，所以 CSS 中所有图像类型都可以作为边框图片，例如常见的渐变图像，因此 border-image 属性可以实现渐变边框或者条纹边框效果。border-image-source 属性的语法和 background-image 属性类似，不再赘述，接下来我们重点关注一下 border-image-slice 属性，也就是源图像的划分。</p>\n<h3 id="理解-border-image-slice-属性"><a href="#%E7%90%86%E8%A7%A3-border-image-slice-%E5%B1%9E%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>理解 border-image-slice 属性</h3>\n<p>border-image-slice 属性的正式语法如下，表示支持 1 ～ 4 个数值或 1 ～ 4 个百分比值，后面可以带一个关键字 fill：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="77967966076450550000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`border-image-slice: <number-percentage>{1, 4} && fill?`, `77967966076450550000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">border-image-slice: &lt;number-percentage></span><span class="token punctuation">{</span>1<span class="token punctuation">,</span> 4<span class="token punctuation">}</span> &amp;&amp; fill?</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>border-image-slice 属性的作用是对原始的图像进行划分，划分的方位和顺序同 margin 属性、padding 属性一样，遵循上、右、下、左的顺序。例如 border-image-slice: 20 表示在距离源图像上方 20px、距离源图像右侧 20px、距离源图像下方 20px、距离源图像左侧 20px 的地方进行划分，划分线的位置如图 3-21 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-03-14-45-55-49f997b010a38cff803fd374f97061d4-e39cf.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 50.9009009009009%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABZUlEQVQoz4VQPU/CUBR9q//AH+Gkiz/ARCc3Pwbjb3A1DsREjcYdo4sGF5TIwoJGdLFiUKTSL6CtxUKAlIbS8mW1fdeWBtRY9Qzv3Zzzzj3vXgQD2Ng9r8t6UDIBW+b+I5AV7g22Wb2nG8AXsCDAdyDv6hvhHWAiVkLxViLCWSjQmwktPHbQUem40ARDsxqav3mYHJWNdf7VKdpbSSCqaYCVVEPH9jDA3wzYVTtr5zAVfqnXxuAgAAQccu3xPZtRPtv7mAe8MR+G0WCKoxBszkEUVonuyIadkP40u5KrkYV6PKk6BXOZblXrWg/C8aLfl38szJls8kpFBL6JSYB2YDaylLdRtHFSMh3Vwr/PjPvJu+nyYkpTZLW5fGaGHk5r3ekLWWy0vZ1gL2XQBQ2Zf/H1lZeEMmRWFCXDaCmKyjAcLzxXqjWKZnlRKhZllsvd3t1nsjRNswyby5DUU5bi8rwgiA7/AZUdHqi/TQ/kAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 03 14 45 55" title="" data-src="/static/2022-01-03-14-45-55-49f997b010a38cff803fd374f97061d4-fee1c.png" data-srcset="/static/2022-01-03-14-45-55-49f997b010a38cff803fd374f97061d4-a67b7.png 200w,\n/static/2022-01-03-14-45-55-49f997b010a38cff803fd374f97061d4-0b187.png 400w,\n/static/2022-01-03-14-45-55-49f997b010a38cff803fd374f97061d4-fee1c.png 800w,\n/static/2022-01-03-14-45-55-49f997b010a38cff803fd374f97061d4-e39cf.png 888w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>此时 4 个边角区域只有很小的一部分被划分，而剩余的上、下、左、右区域会被拉伸，因此，作用在 .example 元素上的效果就会如图 3-22 所示，其中增加的几根辅助线可以方便大家理解。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-03-14-47-52-bd3dfcc7023b410c3ac8714b8ff7ca2b-0c2fe.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 34.696016771488466%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsSAAALEgHS3X78AAAAyUlEQVQY06WPzQqCQBRG51Gj1wla9wLRI7hPnGYqQw0lGzNN0BLTEsx+nJlSIihn11l8i+/ew+UC3oKxOrULC5ZJZGWLvKpLLgD8mk0WD9pd34js7cd+xyriq9gHXGTT7MZGBi/LuhhqNCq4yBZfzstqgJKTf7yG54FyiPP7550vmTU0szeUMs5oP6a65BLJ64V3XlWsxWsN8D8AeKo6m22aZjs/MAzTdb2VTWziEMe1bTKWFYjn6kI3TQui2QTPEZ4pECGswgl+AtSFjkOyuBgTAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 03 14 47 52" title="" data-src="/static/2022-01-03-14-47-52-bd3dfcc7023b410c3ac8714b8ff7ca2b-fee1c.png" data-srcset="/static/2022-01-03-14-47-52-bd3dfcc7023b410c3ac8714b8ff7ca2b-a67b7.png 200w,\n/static/2022-01-03-14-47-52-bd3dfcc7023b410c3ac8714b8ff7ca2b-0b187.png 400w,\n/static/2022-01-03-14-47-52-bd3dfcc7023b410c3ac8714b8ff7ca2b-fee1c.png 800w,\n/static/2022-01-03-14-47-52-bd3dfcc7023b410c3ac8714b8ff7ca2b-0c2fe.png 954w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>默认情况下，源图像划分的中心位置是不参与填充的。如果想要有填充效果，可以额外使用 fill 关键字，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="47251179042199460000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.example {\n   border-image-source: url(./grid-nine.svg);\n   border-image-slice: 33.33% fill;\n}`, `47251179042199460000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.example</span> <span class="token punctuation">{</span>\n   <span class="token property">border-image-source</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./grid-nine.svg<span class="token punctuation">)</span></span><span class="token punctuation">;</span>\n   <span class="token property">border-image-slice</span><span class="token punctuation">:</span> 33.33% fill<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>结果如图 3-23 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-03-14-50-59-d5b9eda518380eb5934a7efa4b3acd7e-ad522.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 44.421052631578945%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsSAAALEgHS3X78AAABPUlEQVQoz4WQsUrDUBSGgy/gK/gIPoCTg6OCg04uorvo5OAigqM6WJwEZxWVQikiBU3T9NLelFJtEpo0LVioIS2pNK1t7z1HE6W2SOo/nOH89/sP9xdwRBDM9wFsm2jVP3A/yTfiTGvsVpG2fJPjmIS/sDOARQMLZhvX79n8ZV+qr1Yw4f4H/4gDPyLY5IdIVtgV+9qcUrDcIB7CYe57THdw6uQuGhNwT4CtnbdrnD4bRKj/gE2Ag2Bo93At6pWdJbydgYiGTdyMc/I6TA//M6CHeGx0bRe8c6V28IC1XqTS1zq/pYzB8H0QgPvBYHf5XAGp2sLlG5i96CQqCxrGbN9iHIYKKWy0AgYTfEFOZwyz7DgNy6pmlbxRMouq/vyi6npJLWpPkkwIVXL5DM2JovSYlNMkK6WImJIpVT4Bei3tbOwgBOwAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 03 14 50 59" title="" data-src="/static/2022-01-03-14-50-59-d5b9eda518380eb5934a7efa4b3acd7e-fee1c.png" data-srcset="/static/2022-01-03-14-50-59-d5b9eda518380eb5934a7efa4b3acd7e-a67b7.png 200w,\n/static/2022-01-03-14-50-59-d5b9eda518380eb5934a7efa4b3acd7e-0b187.png 400w,\n/static/2022-01-03-14-50-59-d5b9eda518380eb5934a7efa4b3acd7e-fee1c.png 800w,\n/static/2022-01-03-14-50-59-d5b9eda518380eb5934a7efa4b3acd7e-ad522.png 950w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>为了方便大家理解，我做了一个简单的原理示意图，如图 3-24 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-03-14-51-40-e8d170c4abe816b36d1bebce6d0d7420-082c3.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 36.38743455497382%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABk0lEQVQY002QO0/bUBzF/Q069SMAU8XWhQmpS6suTKx8hI4MSEhUFSoCsVQ8JjoggXiqqjoEUiAo0IDCIyFVggjYcRyu7fj6+tq5tu/1408IHXrGo99POjoSACQpnLXwfbHmq3bNT3icdsuqF6+3+Loer6IkgxhLuh3IfiSTEHIqk0nZDaQ48B9o+O420ObOGzN/3l+1ZRZ1uYmK92pTGz21B7POwNZdM3yWfz+6RyVKpvfVX/XVqinZlGAZWZOHs7Wfs9UfzlSu0yLCw+N/2VjBBuEVTfb22CsqSDUasF2rbOb6YWleycDnvIQJNlS9/O38++X+ykWmvFC0dSewjYmKO3ZiggjziA0dWCXNMgniWUXJlkdgbaNViJdLEkSi6fGPt1SbPlO/Fj7cWI3e7C8V8npDGc7Tvgx5s1PXerP3DLp3bcOnrLZbX3ywJOiFipR3QktFquUkz39Bk6fHTnrkwiGFSy/hL1iUuEEETcpp2ObxP/klXAjTMHzf7zAf6zrDZkgwaxsYPepIN9uWENH//BMWa2kdBKyfcgAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 03 14 51 40" title="" data-src="/static/2022-01-03-14-51-40-e8d170c4abe816b36d1bebce6d0d7420-fee1c.png" data-srcset="/static/2022-01-03-14-51-40-e8d170c4abe816b36d1bebce6d0d7420-a67b7.png 200w,\n/static/2022-01-03-14-51-40-e8d170c4abe816b36d1bebce6d0d7420-0b187.png 400w,\n/static/2022-01-03-14-51-40-e8d170c4abe816b36d1bebce6d0d7420-fee1c.png 800w,\n/static/2022-01-03-14-51-40-e8d170c4abe816b36d1bebce6d0d7420-082c3.png 1146w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>border-image-slice 属性的默认值是 100%，相当于把图 3-24 中左侧 33.33% 的线移动到右边缘，把右侧 33.33% 的线移动到左边缘，把上方 33.33% 的线移动到下边缘，把下方 33.33% 的线移动到上边缘。于是除了 4 个边角区域，其他区域都因为剪裁线发生反向交叉而不可见，这才有图 3-25 所示的效果。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-03-14-54-03-07584a422268ae6f4647c9b6546dee4e-2f0e6.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 61.29385964912281%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABQElEQVQoz52ScU+CQBjG+f6fpf5Il9PUthybWpBIIOiBoWGBGDoRJfDei7uYCaPVesaO7bn73fu8d8cRJmBDSEj70RerSPCpgYF+qYQNkaqoJbxv4bSYiiNnNAmhX3m6vLnz7lfUwwCM9h/8i2aneyVDgM9p7psFWrk73Ru8I0WZ+bV2GBOTf+uZYUBKK/9LRRiApsUFk7WA4TcYl8H4jzBlWaWCjdnUzzCQ9JjQJvZQYJ3Sst+MkKURGuvkUA6zTY8fhG+g2nVvpm5Z/9lVzbVdvdbv1CfxPnfRHGSiXhRD+9ZqVMUR2tFWMRwxbV+fHpoVsdV+DiPINmXKxU7SeAcceMk6Hzt9MdtV4kYQF2IrimbN5r6/dpceGiPHtp2Va03Qy+LVtheKqg1k1dR0UZYs0xipmqLqA0nWxxNpKH8Cv7aylPlOi4QAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 03 14 54 03" title="" data-src="/static/2022-01-03-14-54-03-07584a422268ae6f4647c9b6546dee4e-fee1c.png" data-srcset="/static/2022-01-03-14-54-03-07584a422268ae6f4647c9b6546dee4e-a67b7.png 200w,\n/static/2022-01-03-14-54-03-07584a422268ae6f4647c9b6546dee4e-0b187.png 400w,\n/static/2022-01-03-14-54-03-07584a422268ae6f4647c9b6546dee4e-fee1c.png 800w,\n/static/2022-01-03-14-54-03-07584a422268ae6f4647c9b6546dee4e-2f0e6.png 912w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/elobn8?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>如果 border-image-source 是渐变图像，则渐变图像的尺寸是按元素的 border-box 尺寸来计算的。</p>\n<p>理解了 border-image-slice 属性，border-image 属性的学习就算完成了一半，剩下的就是学会控制九宫格的尺寸了，而控制九宫格尺寸的 CSS 属性就是 border-image-width 和 border-image-outset。</p>\n<h3 id="了解-border-image-width-属性"><a href="#%E4%BA%86%E8%A7%A3-border-image-width-%E5%B1%9E%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>了解 border-image-width 属性</h3>\n<p>border-image-width 属性和 border-width 属性支持的参数个数是一样的，都是 1 ～ 4 个，不同数量的值所对应的方位规则也是一样的。但是，这两个属性支持的属性值类型却有较大区别，为了方便大家对比，如下表所示。</p>\n<table>\n<thead>\n<tr>\n<th align="left">值类型</th>\n<th align="left">border-width</th>\n<th align="left">border-image-width</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align="left">初始值</td>\n<td align="left">medium</td>\n<td align="left">1</td>\n</tr>\n<tr>\n<td align="left">长度值</td>\n<td align="left">√</td>\n<td align="left">√</td>\n</tr>\n<tr>\n<td align="left">数值</td>\n<td align="left">×</td>\n<td align="left">√</td>\n</tr>\n<tr>\n<td align="left">百分比值</td>\n<td align="left">×（暂时）</td>\n<td align="left">√</td>\n</tr>\n<tr>\n<td align="left">关键字属性值</td>\n<td align="left"><code class="language-text">thin | medium | thick</code></td>\n<td align="left">auto</td>\n</tr>\n</tbody>\n</table>\n<p>针对 border-image-width 和 border-width 属性值类型的对比，有以下几点说明。</p>\n<ol>\n<li>\n<p>border-image-width 属性支持使用数值作为属性值，这个数值会作为系数和 border-width 的宽度值相乘，最终的计算值作为边框图片宽度，也就是九宫格的宽度。因此，我们可以设置不同的数值来得到不同宽度的九宫格。图 3-26 所示的是设置 border-image-width 属性值分别为 0.75、1 和 1.5 的九宫格示意图和实际的渲染效果。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-03-15-05-10-32802a075247cc1c6551a7e5f9d2f5c2-ad2c1.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 64.22167889160554%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAC0UlEQVQoz1VSS2gTARBdUOi5WLyIoFA8ChXPBT149CQ9WSoVlXoTFCp4sFpsKRUURIv90NYqmFRjWpqkSfqnaZttmmQ/3WSTNE02m938Nr9udjfZ3XFbWsE5DMwMM7x57yFwFvpJYqLJOTxtx5lfGOfBDkJx3rWfXqR4O8l5qBR+kFnY5537vGPf6HOIfrZcj0Qhzw3Q4k1Xvp8odfulO/bDR4GjFgvfvl665q60/Y48DGvn54vN9lKTNX/JkUdA045Xw1TjzWsI4X3R+heqCA1RlOQXgfI9v9zpyYMkEjmxfaXwhKw3W7jeHf7uMn9lUUDIqsoWZPCEgmxWBRgkKyN0CRpHkqy82st3BORuTw5kkRbEWyu5HlK5OJvs83IdS6lWWwa5T1XH5qLw3NW1ylhztY9U5YaNG4wpT4O1dluyEy21mBK3UeX6arXVHOsiGudMbJNTQv4IF+YySGF4fd3ifinaIkMO3RVLKvWplDy6SX6Ki06mHBRkE9+Y3KEnaMHF19CyZi2AyRubpbK2IiD+6cDKvGeSdm6Mb3FbjAxQM9B/WwQiUQaQNK1mMLKwAeFE1RBD04whELjOpg2mkQfh4oQ1Bj2Ozk32R1YJ1wALVaDfq5rp9UzDUoKvCRUeu0ufsYEC2ATtagrKb9HvZqYtDUi1ocuyClW5Iqt146olDGvJU/UmMN0c0mfIYwNUFRjaKVKCfZzWiWxqlV2ejiD/TALqieSTGCxET00z7IURP3xAj8uyDM+WVF+Ge+cFQZK20pn3PkTTjEc0XdcbqiG4RuWUw8MqjPq11SSeklx59eeBAr0rlSlijNNtefUyA+XetZmZ2HUD9v/2hLgG6ZwClihs83Qd4nWgFQB3QiUFvwqiqlMGpTmpXKqHFUAi0YMwHRGEIkFSQZxMRmMsy1BZ5jDHUUEM3doOYTjOxlESw1DU59sL7u6iwSC656MJ/C8cioZ0WCQu6QAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 03 15 05 10" title="" data-src="/static/2022-01-03-15-05-10-32802a075247cc1c6551a7e5f9d2f5c2-fee1c.png" data-srcset="/static/2022-01-03-15-05-10-32802a075247cc1c6551a7e5f9d2f5c2-a67b7.png 200w,\n/static/2022-01-03-15-05-10-32802a075247cc1c6551a7e5f9d2f5c2-0b187.png 400w,\n/static/2022-01-03-15-05-10-32802a075247cc1c6551a7e5f9d2f5c2-fee1c.png 800w,\n/static/2022-01-03-15-05-10-32802a075247cc1c6551a7e5f9d2f5c2-b1a91.png 1200w,\n/static/2022-01-03-15-05-10-32802a075247cc1c6551a7e5f9d2f5c2-ad2c1.png 1227w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n<li>\n<p>如果 border-image-width 属性设置的是具体的长度值，如 60px、5em 等，则九宫格的宽度就和 border-width 属性没有关系了。但是，有一个特殊的情况，那就是在 border-width 的长度为 0 的时候。理论上来说，如果 border-image-width 的属性值是具体的长度值，此时就算将 border-width 属性设置为 0，也应该可以渲染边框图片，但是在 Chrome 浏览器中，边框图片却消失了，而 Firefox 浏览器则没有这个问题。因此，如果我们希望边框宽度为 0，且 border-image 属性能生效，可以试试将 border-width 属性的值设置为 0.02px（不小于 1/64 像素）。</p>\n</li>\n<li>\n<p>border-image-width 属性的百分比值是相对于元素自身的尺寸计算的，水平方位相对于宽度计算，垂直方位相对于高度计算。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="32056005317809630000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.example {\n  border-image: url(./grid-nine.svg) 54;\n  border-image-width: 50% 25%;\n}`, `32056005317809630000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.example</span> <span class="token punctuation">{</span>\n  <span class="token property">border-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./grid-nine.svg<span class="token punctuation">)</span></span> 54<span class="token punctuation">;</span>\n  <span class="token property">border-image-width</span><span class="token punctuation">:</span> 50% 25%<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>这段代码表示九宫格上下区域高度是 50%，左右区域高度是 25%，此时的九宫格和最终的效果如图 3-27 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-03-15-09-39-3178ea5520fd674dbf93e8bdae6b3250-66f68.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 33.652173913043484%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsSAAALEgHS3X78AAABpklEQVQY0yWOTWjTYBzGX3ZX2UWGsIF48ORtMOttBw8yryJ49CgIMvC+w4SBFy+CG3jxg3noSoYs3daq6L5KG9sY19Ymmn4kXbvWt4lN1nw0eR8T/V8e/j8eeH7kXc3EmnCU15dlYxwCCJsu5nNO4si7IYRzh+6C4J36EWcDj+2cAeIpXpSizp4JsvJZZ4tciivfPdCtIC79cHAupU9su1cylGyNLiflhhfzDEWiBPdWEuTJs7faggyirWbvgfuyncVD3h86TVUptHrX0nQq1Z3hBxc3OomsUfilKccSddlmtFzsYiVXD5CljAi8+ErO7O8JhZdCMA6YOyqb3tWtzoUde+aDdT5tzWZ6Ra3fU5XvFnukgT3N4+Z6Whwu6SCPP7VxZ+PNevl6vjscx3rVESaTzQnemdw9I+/tS6lG85/2Pg1uV+E/2MX089cf+/frICe2j7phjQLVwf+zQ3AmuN9IGtik4C04LOYBgxGFG0K3ohXTZyR6ewYtVyrWgLbbJ9+k41aj1fkpD1r1vqqoklgrCZVKtVZTcvmvkigViuIfx45NGPsLnqJU4Qz9p9AAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 03 15 09 39" title="" data-src="/static/2022-01-03-15-09-39-3178ea5520fd674dbf93e8bdae6b3250-fee1c.png" data-srcset="/static/2022-01-03-15-09-39-3178ea5520fd674dbf93e8bdae6b3250-a67b7.png 200w,\n/static/2022-01-03-15-09-39-3178ea5520fd674dbf93e8bdae6b3250-0b187.png 400w,\n/static/2022-01-03-15-09-39-3178ea5520fd674dbf93e8bdae6b3250-fee1c.png 800w,\n/static/2022-01-03-15-09-39-3178ea5520fd674dbf93e8bdae6b3250-66f68.png 1150w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n<li>\n<p>auto 关键字很有意思，会使用 border-image-slice 属性划分的尺寸作为九宫格宽度值。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="9262287282988036000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.example {\n  border-image: url(./grid-nine.svg) 54;\n  border-image-width: auto;\n}`, `9262287282988036000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.example</span> <span class="token punctuation">{</span>\n  <span class="token property">border-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./grid-nine.svg<span class="token punctuation">)</span></span> 54<span class="token punctuation">;</span>\n  <span class="token property">border-image-width</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>此时，border-image-width 属性值等同于 border-image-slice 属性设置的 54px。如果 border-image-slice 属性值是百分比值，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="92598341987740300000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.example {\n  border-image: url(./grid-nine.svg) 33.33%;\n  border-image-width: auto;\n}`, `92598341987740300000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.example</span> <span class="token punctuation">{</span>\n  <span class="token property">border-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./grid-nine.svg<span class="token punctuation">)</span></span> 33.33%<span class="token punctuation">;</span>\n  <span class="token property">border-image-width</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>则此时 border-image-width 的宽度值等于 grid-nine.svg 的对应方位的尺寸和 33.33%的计算值。</p>\n</li>\n<li>\n<p>border-image-width 属性和 border-width 属性都不支持负值。</p>\n</li>\n<li>\n<p>border-image-width 的宽度值很可能会超过元素自身的尺寸，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="90518176449499960000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.example {\n  border-image: url(./grid-nine.svg) 54;\n  border-image-width: 100% 50%;\n}\n\n.example {\n  border-image: url(./grid-nine.svg) 54;\n  border-image-width: 4 3 2 1;\n}`, `90518176449499960000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.example</span> <span class="token punctuation">{</span>\n  <span class="token property">border-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./grid-nine.svg<span class="token punctuation">)</span></span> 54<span class="token punctuation">;</span>\n  <span class="token property">border-image-width</span><span class="token punctuation">:</span> 100% 50%<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.example</span> <span class="token punctuation">{</span>\n  <span class="token property">border-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./grid-nine.svg<span class="token punctuation">)</span></span> 54<span class="token punctuation">;</span>\n  <span class="token property">border-image-width</span><span class="token punctuation">:</span> 4 3 2 1<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>这时候，border-image-width 属性的宽度表现遵循“等比例原则”和“百分百原则”，也就是九宫格宽度不超过元素对应方向的宽度，同时保持设置的数值比例。例如 border-image-width: 100% 50% 等同于 border-image-width: 50% 25%。那么，border-image-width: 4 3 2 1 等同于什么呢？这个需要计算一下，.example 元素宽高都是 160px，边框宽度是 40px，则一个方位上的最大比例系数应该是 4，此时垂直方向的总系数是 6（4+2），则所有数值都应该乘以 2/3（4/6），所以，border-image-width: 4 3 2 1 应该等同于 border-image-width: 2.6667 2 1.3333 0.6667。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/h85ql7?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n</li>\n</ol>\n<p>除了 border-image-width 属性，border-image-outset 属性也能控制九宫格的尺寸，只不过 border-image-width 属性控制的是九宫格的边框宽度，而 border-image-outset 属性控制的是九宫格中间区域的尺寸。</p>\n<h3 id="了解-border-image-outset-属性"><a href="#%E4%BA%86%E8%A7%A3-border-image-outset-%E5%B1%9E%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>了解 border-image-outset 属性</h3>\n<p>首先，大家千万不要弄错 border-image-outset 属性的拼写，该属性最后的单词是 outset，不是 offset。outset 是往外扩张的意思，它和 offset 的区别在于，offset 扩展的方向既能向外也能向内，反映在属性值上就是 offset 既支持正值也支持负值，例如 outline-offset、text-underline-offset 等 CSS 属性；但是 outset 只能是正值，只能向外扩张，使用负值会被认为是语法错误。</p>\n<p>下面来看一下 border-image-outset 属性的正式语法：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="74616345961838890000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`border-image-outset: [<length> | <number>]{1,4}`, `74616345961838890000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">border-image-outset: [&lt;length> | &lt;number>]</span><span class="token punctuation">{</span>1<span class="token punctuation">,</span>4<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>该属性支持 1 ～ 4 个数值，或者支持 1 ～ 4 个长度值，并且支持数值和长度值混合使用。因此，下面这些 CSS 声明都是合法的。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="93752430779147080000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`border-image-outset: 1rem; /* 长度值 */\nborder-image-outset: 1.5; /* 数值 */\nborder-image-outset: 1 0.5; /* 垂直 水平 */\nborder-image-outset: 30px 2 40px;\nborder-image-outset: 10px 15px 20px 25px;`, `93752430779147080000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">border-image-outset</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span> <span class="token comment">/* 长度值 */</span>\n<span class="token property">border-image-outset</span><span class="token punctuation">:</span> 1.5<span class="token punctuation">;</span> <span class="token comment">/* 数值 */</span>\n<span class="token property">border-image-outset</span><span class="token punctuation">:</span> 1 0.5<span class="token punctuation">;</span> <span class="token comment">/* 垂直 水平 */</span>\n<span class="token property">border-image-outset</span><span class="token punctuation">:</span> 30px 2 40px<span class="token punctuation">;</span>\n<span class="token property">border-image-outset</span><span class="token punctuation">:</span> 10px 15px 20px 25px<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>其中，数值是相对于 border-width 计算的，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="78648692790627530000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.example {\n   border-image: url(./grid-nine.svg) 54;\n   border-image-outset: 0.5;\n}`, `78648692790627530000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.example</span> <span class="token punctuation">{</span>\n   <span class="token property">border-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./grid-nine.svg<span class="token punctuation">)</span></span> 54<span class="token punctuation">;</span>\n   <span class="token property">border-image-outset</span><span class="token punctuation">:</span> 0.5<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>由于 .example 元素的边框宽度是 40px，因此上面的代码的运行效果和下面的代码的运行效果一样：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="83358919420398730000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.example {\n   border-image: url(./grid-nine.svg) 54;\n   border-image-outset: 20px;\n}`, `83358919420398730000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.example</span> <span class="token punctuation">{</span>\n   <span class="token property">border-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./grid-nine.svg<span class="token punctuation">)</span></span> 54<span class="token punctuation">;</span>\n   <span class="token property">border-image-outset</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>提醒一下，这里有一个细节，那就是元素扩展了 20px 指的是九宫格中间区域的上、右、下、左这 4 个方位的尺寸都扩大了 20px，所以九宫格中间序号为 9 的区域的高和宽最终增加了 40px，九宫格尺寸变化的过程和最终效果如图 3-28 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-03-15-25-55-652d78a33c30159b9199a422af46d100-4c90f.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 40.19014693171996%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAABvUlEQVQY01VRz0/TYBjuP6BHTh4ICSHGP8AD/4XxLAkH4g+MJp408YAhIYQbEIwnoxcVgyxEdKzAzBYIDMYCWztZN9du9Adtabeu7cfX9vteWtxB38NzePI87/u878vAP0UpjbEh6du8wlY1tmZuVbX9ioQ9P+bVALp+BHULOAO7QfMSmFUDF3+bsCGsSN2KE8aiyWp0Y925ncfDW+7gRmcw66s46fzegLzow1MW7qeU44tXCjAvStbHb5z35sezTGP9zI1VDyrkUbEHEQbTPJDsoVygoiQR2RRpzeqHtBB85hky/Sv3k30MaTSVxqxgGeK9Q+9JyQOapDhSnKE92D8VOZGHhyxZPOqbOYPcest82GyspoqlT+nFlXJBsAGisXL4vOQA8SFCJ7ozksNtBxMgdLkKh2rfrHswt8dMSe7adgtmdl4e65mLIObHy+HN793RXXR3B93JugMZX75M9F90WmgjeJ2DifQ5b8/GO/937Wss9ODdGVlQYF6FJZl8NahPEp7HoPQIZFuQElwT5R1gyPV7wiBsii1Z1Sy7Y6kK0jVsaN65HNpGR2lzHC/8aZ6WK3WhVtdlQsnfYVda8Jwts9wBowAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 03 15 25 55" title="" data-src="/static/2022-01-03-15-25-55-652d78a33c30159b9199a422af46d100-fee1c.png" data-srcset="/static/2022-01-03-15-25-55-652d78a33c30159b9199a422af46d100-a67b7.png 200w,\n/static/2022-01-03-15-25-55-652d78a33c30159b9199a422af46d100-0b187.png 400w,\n/static/2022-01-03-15-25-55-652d78a33c30159b9199a422af46d100-fee1c.png 800w,\n/static/2022-01-03-15-25-55-652d78a33c30159b9199a422af46d100-4c90f.png 1157w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/u22ym2?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>最后再告诉大家一个小知识，border-image-outset 属性扩展出去的和 outline 属性扩展出去的九宫格区域的轮廓一样，不会影响布局，也不会响应鼠标经过行为或者点击行为。</p>\n<p>我们现在回顾一下，border-image-slice 属性用于划分源图像，border-image-width 用于控制九宫格第一区到第八区的尺寸，border-image-outset 属性用于控制九宫格最中间第九区的尺寸。掌握这 3 个属性，就算完全理解 border-image 属性了。</p>\n<p>总而言之，border-image 属性的作用就是划分源图像，然后将其依次填充到九宫格区域中。等等，好像缺了什么？好像九宫格第五区到第八区的图形永远是被拉伸的状态，如果我希望这几块区域的图形是平铺的，有什么解决办法吗？这就是最后一个子属性 border-image-repeat 做的事情了。</p>\n<h3 id="了解-border-image-repeat-属性"><a href="#%E4%BA%86%E8%A7%A3-border-image-repeat-%E5%B1%9E%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>了解 border-image-repeat 属性</h3>\n<p>border-image-repeat 属性可以控制九宫格上、右、下、左 4 个区域（对应的区域序号是 5 ～ 8，我称这几个区域为平铺区）图形的平铺规则，如图 3-29 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-03-15-30-33-f2d09405f96f503db90b432ac5f37b9d-932f0.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 49.23798358733881%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAABfUlEQVQoz2P4DwN//4HIpts/tLc+8dxyO3nTmcwNJ/w2XbHd+sBp/8uPINl///6jAAY46w9YJvPiF4YFN7QXXfBesC907jbDhadk5pyRW3Ht/X+8mv+CpdqO3ZObdmTryesf3n96+e7zo4fPPOYdNl9y5tvP3yDd+DX3nrjt2L/y+N0Xv799efDg/u9//+PmbgtaeuDjr7+ENfedvOM0YfXx28/+//316uULoJb4edsCluz/+OsfYc2tJx7IzDy5/sT1F6/fP3r14da9J54Lj5svv/DtFwFng8jsi194Z51RX3DWbs5ev9nbdOefFJt5Sm71nff/CAQYiOy//8tj9+O4vfeyd14q3Xk+cdfNwF0PQk68/Yw1tP+Cwb9/UJOB6DdYAsj/A2YAuT///v3zGwT+AAGQDUQg+i/Dnbv3Hjx89PrNmxs3bl65cu3B/Ud379w5d+7i61evgSJXr904c+bc3n0Hzl+8cvzEqf37Dx4/eeb0mXMnT5+9cesOAPXgDKoBWF7hAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 03 15 30 33" title="" data-src="/static/2022-01-03-15-30-33-f2d09405f96f503db90b432ac5f37b9d-fee1c.png" data-srcset="/static/2022-01-03-15-30-33-f2d09405f96f503db90b432ac5f37b9d-a67b7.png 200w,\n/static/2022-01-03-15-30-33-f2d09405f96f503db90b432ac5f37b9d-0b187.png 400w,\n/static/2022-01-03-15-30-33-f2d09405f96f503db90b432ac5f37b9d-fee1c.png 800w,\n/static/2022-01-03-15-30-33-f2d09405f96f503db90b432ac5f37b9d-932f0.png 853w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>border-image-repeat 属性的正式语法如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="55494219345843330000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`border-image-repeat: [stretch | repeat | round | space]{1,2}`, `55494219345843330000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">border-image-repeat: [stretch | repeat | round | space]</span><span class="token punctuation">{</span>1<span class="token punctuation">,</span>2<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>从语法中我们可以看出该属性和 border-image 其他相关属性有一个明显的不同，即无论是 border-image-slice 属性还是 border-image-width 属性，其属性值数量都是 1 ～ 4 个，但是 border-image-repeat 属性最多只支持两个属性值同时使用。该属性强制规定水平方向的两条边的平铺规则必须是一样的，垂直方向的两条边的平铺规则也必须是一样的。</p>\n<p>接下来我们快速了解一下 border-image-repeat 属性支持的几个关键字属性值的含义，这几个关键字属性值的含义在整个 CSS 世界中都是通用的。</p>\n<ul>\n<li>stretch：默认值，让源图像拉伸以充满显示区域。</li>\n<li>repeat：让源图像紧密相连平铺，保持原始比例，平铺单元在边界位置处可能会被截断。</li>\n<li>round：让源图像紧密相连平铺，适当伸缩，以确保平铺单元在边界位置处不会被截断。</li>\n<li>space：让源图像保持原始尺寸，平铺时彼此保持适当的等宽间隙，以确保平铺单元在边界位置处不会被截断；如果区域的尺寸不足以呈现至少一个源图像单元，则会以空白呈现。目前在移动端有部分浏览器并不支持该关键字，IE 浏览器中的渲染和其他现代浏览器也不一样，因此这个关键字要谨慎使用。</li>\n</ul>\n<p>假设有如下 CSS 代码：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="95886349468386430000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.example {\n   border-image: url(./grid-nine.svg) 54;\n}`, `95886349468386430000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.example</span> <span class="token punctuation">{</span>\n   <span class="token property">border-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./grid-nine.svg<span class="token punctuation">)</span></span> 54<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>则不同 border-image-repeat 属性值的渲染过程和效果如图 3-30 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-03-15-34-28-334896895339200634c96955c3764a52-381aa.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 44.693701466781704%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsSAAALEgHS3X78AAABi0lEQVQoz2VRS9OUMBDkF/svtLx7sbx51bulllV+3rcU5YNdYB+wvGF5BbKEkKRN9uLBVCZJ90xPTXUs/L+kwCFAUZq3ejCXGGn2D/ohuk7fFtSDOIXY7eA845eNg0NePrHPoSkWUp/k1Y/lywNKA4fXT/zryYilgmFsT/aDmqmY560j6nsknXoDBLBxqb6dpV1qyIVadYuPnnKbuxYnEvn+trz4FDeskUpTzWHE2z/yQ1AV9wG4+QPe2PL9vprFIGDGffcsf9aFFrN+maqxOqVzRdZ5BZNIbnBsRBEaCsKRtvAcuC4KgmnDtYazg39AMVmiobQnGaalHuW4GLGpdhHHuC0gK/LBOBIedTXohrJH4COKdWsrYaIcVly6mKwNl3eump6jZaJj9biNXLVkQ7OIltVUdkK12qCaSSpSCWtV0I7o4EoJZRxaNdTBlU5tBkKPo1bJHv4Zu7k2WRP6qwBK6TmO27br+yFLs6qsoiTJyzLP8mt8PV+i367nh2EQmO3tD/7xOJJJC/8Czvf6IftaakgAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 03 15 34 28" title="" data-src="/static/2022-01-03-15-34-28-334896895339200634c96955c3764a52-fee1c.png" data-srcset="/static/2022-01-03-15-34-28-334896895339200634c96955c3764a52-a67b7.png 200w,\n/static/2022-01-03-15-34-28-334896895339200634c96955c3764a52-0b187.png 400w,\n/static/2022-01-03-15-34-28-334896895339200634c96955c3764a52-fee1c.png 800w,\n/static/2022-01-03-15-34-28-334896895339200634c96955c3764a52-381aa.png 1159w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/w8uspe?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>可以发现，无论是哪种平铺类型，最终 4 个对角处的图形和 4 个平铺区的图形是无法做到尺寸永远一致的，除非元素尺寸固定，同时元素的尺寸和源图像尺寸匹配，显然这样的场景有限。这就导致规律的边框装饰效果实际上是不适合使用 border-image 属性来实现的，这就是一开始提到的 border-image 属性自身的缺点——4 个尴尬的边角。</p>\n<p>当然，理论和现实有时候就是会有差异，如果边框图案比较小，同时元素尺寸比较大，则我们是可以使用 round 关键字实现近似规律的边框装饰效果的。因为此时，边角图案和平铺图案的尺寸差异会很小，乍一看是一样的尺寸，给用户的感觉是天衣无缝的平铺，如图 3-31 所示。图中使用的是 round 类型的平铺，乍一看各个菱形图案尺寸都是一样的，但实际上是有差异的，4 个边角的菱形尺寸比水平方向的菱形图案尺寸大，比垂直方向的菱形图案尺寸小，并不是严格意义上的平铺效果。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-03-15-37-18-e99d78a7f9bf25f38b1be467ae659012-fd0be.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 59.855769230769226%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB/ElEQVQoz2VRz2sTQRQe8Sr+HXrWQ0+iZxVvit6lnktPXgQR1N6KoNiLtWLbQ1uoFbGgNcR029AkTXdbNjEpEmpCbform9nNZnb3fb7ZTaLg4zHz3vB9870fgqDNDfHApuUT4KkRfajiZQEzNt5Y2mdtTqOPVTwxGDBsE4PZmCiimFzz6HwOj6ohht6FIyu4tYD7n3FvCXeXdHBzPhz9hqGpx9XwXI7BmsJEof+I1evvS/6eA6cLN8CpD6nQ8nXKwYkPP+DUqzmN6fKAIhDpm0pHODNGI1/1WxDpmpJ+GJV4EJfI+uK5BmtpEr3y+RjPo3ycvPaZ/3isgdIRvcijLy16FTS94NpsxONJlEPS6HDgUaLMAIYxOOH3yfsSlyfxqtBT/t+Sx9ebuDSJ326PHHcMxTuyOhsSmLLIqGPhB1Zq+LSrnYP5crTewFtrw6NnVkfFlL+rqsrobAqjlsKFiZB3c3UGdxZxYw7X53B7EVemw+FlXJx4aCmRQkVSUorozwt2Gw5fP0+p1UVD6vVwbwcujn1OiXdWc9o8MkkDinCcdpdNKVAonbanFBEpiqTfYfeCrvQ9Pjuq63LcalHHk67blmyuWDWye7/qzebh/sFhOmOYxe1KZdfeKX/PrBlr2UJ+K5vNpdPGlrljmdu5QvFLKrNqrBdNa7No/gFiiIQwNq2BkAAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 03 15 37 18" title="" data-src="/static/2022-01-03-15-37-18-e99d78a7f9bf25f38b1be467ae659012-fee1c.png" data-srcset="/static/2022-01-03-15-37-18-e99d78a7f9bf25f38b1be467ae659012-a67b7.png 200w,\n/static/2022-01-03-15-37-18-e99d78a7f9bf25f38b1be467ae659012-0b187.png 400w,\n/static/2022-01-03-15-37-18-e99d78a7f9bf25f38b1be467ae659012-fee1c.png 800w,\n/static/2022-01-03-15-37-18-e99d78a7f9bf25f38b1be467ae659012-fd0be.png 832w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>最后提示一下，关于 round 关键字和 space 关键字的更深入的细节参见之后与 background-repeat 属性相关部分的介绍。</p>\n<h3 id="精通-border-image-缩写语法"><a href="#%E7%B2%BE%E9%80%9A-border-image-%E7%BC%A9%E5%86%99%E8%AF%AD%E6%B3%95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>精通 border-image 缩写语法</h3>\n<p>border-image 属性缩写还是不缩写没什么本质区别，但是如果你想看懂别人写的代码，或者真正学会 border-image 属性，那么 border-image 属性的缩写语法是必学的。</p>\n<p>border-image 属性的正式语法如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="77226089238181350000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`border-image: <border-image-source> || <border-image-slice>[/ <border-image-width> | / <border-image-width>? /\n   <border-image-outset>]? || <border-image-repeat>;`, `77226089238181350000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">border-image</span><span class="token punctuation">:</span> &lt;border-image-source> || &lt;border-image-slice>[/ &lt;border-image-width> | / &lt;border-image-width>? /\n   &lt;border-image-outset>]? || &lt;border-image-repeat><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>语法被 || 符号分成了 3 部分，分别是资源引入、尺寸控制和平铺规则。这 3 个部分可以任意组合显示，这一点很容易理解，不展开讲解。</p>\n<p>语法关键的难点在于“尺寸控制”，不过如果你认真阅读过上面的内容，你就会发现，本书关于“尺寸控制”的剖析和缩写语法是完全一致的，即源图像的划分、九宫格边框宽度的控制、九宫格中间区域的尺寸控制。如果能够想到这一点，“尺寸控制”的语法顺序就变得很好记忆了。</p>\n<p>“尺寸控制”相关的 3 个 CSS 属性全部使用斜杠进行分隔，结合 2.2 节介绍的 CSS 属性值定义语法，我们就可以得到下面这些合法的 CSS 声明：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="53710732046345000000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* slice: 54 */\nborder-image: 54;\n/* slice: 54, width: 20px */\nborder-image: 54 / 20px;\n/* slice: 54, outset: 20px */\nborder-image: 54 / /20px;\n/* slice: 54, width: 20px, outset: 20px */\nborder-image: 54 / 20px / 20px;`, `53710732046345000000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* slice: 54 */</span>\n<span class="token property">border-image</span><span class="token punctuation">:</span> 54<span class="token punctuation">;</span>\n<span class="token comment">/* slice: 54, width: 20px */</span>\n<span class="token property">border-image</span><span class="token punctuation">:</span> 54 / 20px<span class="token punctuation">;</span>\n<span class="token comment">/* slice: 54, outset: 20px */</span>\n<span class="token property">border-image</span><span class="token punctuation">:</span> 54 / /20px<span class="token punctuation">;</span>\n<span class="token comment">/* slice: 54, width: 20px, outset: 20px */</span>\n<span class="token property">border-image</span><span class="token punctuation">:</span> 54 / 20px / 20px<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>其中，需要重点关注 <code class="language-text">54 / / 20px</code> 这个属性值，该属性值中出现了连续的斜杠。首先，这个写法是合法的；其次，为了便于大家理解，我在两个斜杠之间加了空格，实际上没有空格也是合法的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="26964873085460406000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 合法的 */\nborder-image: 54 // 20px;`, `26964873085460406000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title=""\n              >\n                \n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">/* 合法的 */\nborder-image: 54 // 20px;</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>所以如果大家在 border-image 的属性值中看到了双斜杠，千万不要误认为是多写了一个斜杠，这是遵循 border-image 属性的语法，把 <code class="language-text">&lt;border-image-width&gt;</code> 数据类型给省略了。因为在正式语法中，<code class="language-text">&lt;border-image-width&gt;</code> 数据类型的后面有一个问号，这就表明这个数据类型可以省略，但是斜杠后面并无问号，因此斜杠不能省略，于是就出现了双斜杠的场景。</p>\n<p>由于“尺寸控制”相关的 3 个 CSS 属性都支持 4 个方位的分别设置，因此 border-image 属性最复杂的缩写可能会有下面这么长。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="27883488468717044000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.example {\n   border-image: url(./grid-nine.svg) 54 33.33% 33.33% 54 / 10px 20px 30px 1 / 1 30px 20px 10px round space;\n}`, `27883488468717044000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.example</span> <span class="token punctuation">{</span>\n   <span class="token property">border-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./grid-nine.svg<span class="token punctuation">)</span></span> 54 33.33% 33.33% 54 / 10px 20px 30px 1 / 1 30px 20px 10px round space<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>显示的效果如图 3-32 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-03-15-52-15-25cd3b11b7d347d775fd1b32d327cb94-f2bb5.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 45.60496380558428%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABAElEQVQoz42Rz06DQBDGeVTP+iI+ghcbj148erGJ1qTRhpSF7WIN0pRdPIBhobYS+mfLjLCaVNSmzGF2Z7/vyy+TNfBPLT/U6D4Cf4ZeCl6KL1liy3yhag0aTqMxgRb5Ox5doyrre6lfuhzHcmfYE9Z9toIrr47Bdxj8DGTRjhwu8KSL6+2O3BPVCu3I2RI6DLd60B2eJMR5O7KY4/FNY+e7Q2QAKGsNIoWnIWwun/GclhcMz+zhbSS+HIA/zl9kXdWfxJWYrjFZwVuBcZHP1Qb/KYPYdBqIJJGCh4yN/cmUB9xz3UdCTDaKMxlEr6ZlEcuxCKXMdajbfxjYDh2Yw085lgMWuibJeAAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 03 15 52 15" title="" data-src="/static/2022-01-03-15-52-15-25cd3b11b7d347d775fd1b32d327cb94-fee1c.png" data-srcset="/static/2022-01-03-15-52-15-25cd3b11b7d347d775fd1b32d327cb94-a67b7.png 200w,\n/static/2022-01-03-15-52-15-25cd3b11b7d347d775fd1b32d327cb94-0b187.png 400w,\n/static/2022-01-03-15-52-15-25cd3b11b7d347d775fd1b32d327cb94-fee1c.png 800w,\n/static/2022-01-03-15-52-15-25cd3b11b7d347d775fd1b32d327cb94-f2bb5.png 967w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/b0pd9z?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<h2 id="border-image-属性与渐变边框"><a href="#border-image-%E5%B1%9E%E6%80%A7%E4%B8%8E%E6%B8%90%E5%8F%98%E8%BE%B9%E6%A1%86" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>border-image 属性与渐变边框</h2>\n<p>为什么 border-image 属性的渲染机制那么怪异？</p>\n<p>border-image 属性的规范出现得很早，浏览器也支持得很早。2008 年，Chrome 浏览器的第一个版本就已经支持 border-image 属性了（老语法）。在那个年代，所有图形效果全部都是使用图片实现的，例如圆角边框、圆角渐变选项卡等。</p>\n<p>开发者为了让选项卡背景或者按钮的边框高宽自适应，会把源图像尺寸做得很大，然后将边缘位置专门裁好放在图像的边缘，方便使用 background-position 属性进行控制。例如，图 3-33 展示的就是十几年前 CSS 开发所使用的选项卡背景图，可以看到右侧的边框部分被裁开了。</p>\n<p>实现的效果图。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-03-15-53-45-0948c7cf3c6f7ceffdf69b2b5096778a-11cd2.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 25.021720243266728%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsSAAALEgHS3X78AAAAoElEQVQY03VOaw+CMAzc//9vCozHBx/hmwlu7FE2BmObFolGYrxcL21z15R0TPRC8f9kvdRgHj+QeiB3Lt04Wev+0Rjn3PwdSy/tJZBbxwGsVINQgMdWbv1b0QSDTTusYSYUGd00zX72S4jRL4vHCjHEFHBGjSl+7Htgimx7raGqG8a4VOratjktT+cLrRpa1oesOGYFbrY+y6kxdn0+pScArhyKzH0qZAAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 03 15 53 45" title="" data-src="/static/2022-01-03-15-53-45-0948c7cf3c6f7ceffdf69b2b5096778a-fee1c.png" data-srcset="/static/2022-01-03-15-53-45-0948c7cf3c6f7ceffdf69b2b5096778a-a67b7.png 200w,\n/static/2022-01-03-15-53-45-0948c7cf3c6f7ceffdf69b2b5096778a-0b187.png 400w,\n/static/2022-01-03-15-53-45-0948c7cf3c6f7ceffdf69b2b5096778a-fee1c.png 800w,\n/static/2022-01-03-15-53-45-0948c7cf3c6f7ceffdf69b2b5096778a-11cd2.png 1151w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>通过内外两层便签分别定位左侧背景和右侧背景，就可以实现一个 1 ～ 7 个字的宽度自适应选项卡效果了，图 3-34 所示就是</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-03-15-54-28-46fa900608edeaaa14321133eb3273e2-99ffa.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 793px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 41.992433795712486%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAABVElEQVQY04WR207CQBCG+/4P4PEKb1VAo5F4JYYoBEEoPdGWnum29LxtFzQ9OIAYL0z8M5nMznz/ziZLFWWJVkGWr3OygcgygpyVKMlhmFiWPRyOfD/0vMBGDll/7Jk0I7br13VNFUXpeiGccZrD2FqiZrN9dHzSHwzv7h9Oz855QWy1by+vrv0ggh17EvZ9m51f5qXtdDqPjcbFa3/Q6720WjeaZnS7vafuc5Kkf5ihStJ8H2GMVd2c0oxpIdcLDMt2Vz7sjJMUH5gYZz/PLhwviBIc4xScEUAZIZtPyABBTnAGBfS30y2AgUYrMFdUvVNVVWVV1QdVO9X/iRqNJ8hxTXNJSE4z7Pt0NqGZhaKoqs5xwlyUGZanGaik6YxRVE0Q5bfxRJIXHC9QLMdHcRxFMZgZlpNkBQbwSZ7vy7JimBZ0wAkXQUbI0QyLn891w1Q1/QswxrLZNIr21QAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 03 15 54 28" title="" data-src="/static/2022-01-03-15-54-28-46fa900608edeaaa14321133eb3273e2-99ffa.png" data-srcset="/static/2022-01-03-15-54-28-46fa900608edeaaa14321133eb3273e2-e6b42.png 200w,\n/static/2022-01-03-15-54-28-46fa900608edeaaa14321133eb3273e2-2a82f.png 400w,\n/static/2022-01-03-15-54-28-46fa900608edeaaa14321133eb3273e2-99ffa.png 793w" data-sizes="(max-width: 793px) 100vw, 793px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>有没有觉得这种边缘划分再重新分配定位的套路有些熟悉？对，border-image 属性的作用机制就是源自这里，先划分再分配。或者我们可以这么认为，border-image 属性的设计初衷就是用来简化自适应边框或者自适应选项卡的开发的，因为这可以让源图像的体积大大减小，灵活性大大提升。例如，图 3-35 所示的 3 个 border-image 应用案例，源图像都是很小的图形。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-03-15-55-37-5ff620363aec11569336da79205d6bca-e07da.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 611px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 80.6873977086743%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAAsSAAALEgHS3X78AAADC0lEQVQoz01SCVPTUBDuX9bxQFFQUO6zY6UCgozI4CgMo8NVepe0lB6WHpQetE2TctiLJk2Tl/de4qbF0Z3Ny759u9+eJnp7ozhsiseFmGOdEl3XaVvEuSwpFXE+S2tVXCrgMkvYkppKoEhIjYRQMKCe/QJLE63ewgX/CuNouOesyR2cSVO2SHMZgCYci1NJHI+RzAU5T5JMmiTjavbCcAZj+KmUKpqmIVkTBUxwS5JqzWb97q4lCG2EWm2x1mg0BKEpinDWhRYoKSUmXaPgL4kCWMpOmzA+3KnX2cucY/dn0Otm8/lGrZ5PJeAa9h9HT/whxnfK+Ko3t4Tg+8hwApKGFIChBGKrPQZZRQg+YEPzV0CQo0bBmTabd7VqTVVVvQej0VaXBEGEJ0mSEELtdlv8SyBTSo2aCcYflz4PvZq0Hbr06m/9Mldhua1vP+w258+d3cMD++G+Y3Nj2/Lu46eVDbBcWVqfn7XGY8lutylZsKw8ejCwuLQuexzIMpuNJ/cPHOdnse2vm5HTUwAdHzOPjcyvrXxZtK4tf1jre/zafuTudVvPZHI/dvaCJ5Fe2pCVz3cSDEaB/UwoHD6LRGIA4XEH3G6/x+N3Oo95/urfqO5Jo5rRfP2u2eDZ4hVfrnCl60oZKlTkToVjb674HnNsUe5IRmSP48g8MXqeiPcQymxx4MlD8+TY/MTowtzMmxfPvm+sL8xNTwwNdpUj76bH3758/mlxwQSQw/19q9b3lrlp4rKr5in/4d762qpGMAeLqSj5bOblowdW86yqKhCzkE2XS4UKzwOQEXnn2+b464GAz6tjpN9eQ7bD/U8tM5PAVvMMBNnd2Vq2mCeGX72fmzb0s1Mjgy++rC6buoPVYOr3VXdb0KjXS4VLji2xxQJfZqFmudPh2RLIFa5snGUWY9XUNBZYhDWQpA4Y4e6qEEL1/4gQIohiR1YUBbUlSZYRUlVYIdORwx0MRTmOS6Uz8JZIpCLRWOAkFIsl0umLcCTm9R77mCDDBBwur+3ItW+zO91eHxNw+5g/HHoskGK7qqsAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 03 15 55 37" title="" data-src="/static/2022-01-03-15-55-37-5ff620363aec11569336da79205d6bca-e07da.png" data-srcset="/static/2022-01-03-15-55-37-5ff620363aec11569336da79205d6bca-20936.png 200w,\n/static/2022-01-03-15-55-37-5ff620363aec11569336da79205d6bca-da2be.png 400w,\n/static/2022-01-03-15-55-37-5ff620363aec11569336da79205d6bca-e07da.png 611w" data-sizes="(max-width: 611px) 100vw, 611px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/syreq9?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>但是，其他 CSS 新属性的崛起把 border-image 属性想要实现的效果用一种更好的方式实现了。图 3-35 所示的 3 个案例，使用 CSS 就完全可以实现，圆角可以使用 border-radius 属性模拟，多边框可以使用 box-shadow 模拟，并且这样做兼容性更好，IE9+ 版本均支持，而 border-image 属性在 IE11+ 版本才被支持。border-image 属性的竞争对手 background-image 属性更是 bug 一样的存在，使用它配合 CSS 渐变和多背景，任何规律的图形都可以模拟出来。</p>\n<p>以上这些原因导致 border-image 属性在众多 CSS 属性的竞争中逐渐没落，只在边框造型浮夸且不得不使用图片的场景中偶尔出现。然而，在 2012 年之后，随着各大浏览器对 border-image 属性开始了新的语法支持，border-image 属性又逐渐在实际项目开发中找到了属于自己的一片小天地，那就是和 CSS 渐变配合实现渐变边框、条纹边框。如果想要让某一个模块格外醒目，就可以使用渐变边框，代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="2302635088576710000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<p class=&quot;border-linear-gradient&quot;>上下渐变边框</p>\n<p class=&quot;border-radial-gradient&quot;>径向渐变边框</p>\n<style>\n   .border-linear-gradient {\n      border-style: solid;\n      border-image: linear-gradient(deepskyblue, deeppink) 20 / 10px;\n   }\n\n   .border-radial-gradient {\n      border-style: solid;\n      border-image: radial-gradient(deepskyblue, deeppink) 20 / 10px;\n   }\n</style>`, `2302635088576710000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>border-linear-gradient<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>上下渐变边框<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>border-radial-gradient<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>径向渐变边框<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n   <span class="token selector">.border-linear-gradient</span> <span class="token punctuation">{</span>\n      <span class="token property">border-style</span><span class="token punctuation">:</span> solid<span class="token punctuation">;</span>\n      <span class="token property">border-image</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>deepskyblue<span class="token punctuation">,</span> deeppink<span class="token punctuation">)</span> 20 / 10px<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">.border-radial-gradient</span> <span class="token punctuation">{</span>\n      <span class="token property">border-style</span><span class="token punctuation">:</span> solid<span class="token punctuation">;</span>\n      <span class="token property">border-image</span><span class="token punctuation">:</span> <span class="token function">radial-gradient</span><span class="token punctuation">(</span>deepskyblue<span class="token punctuation">,</span> deeppink<span class="token punctuation">)</span> 20 / 10px<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>最终效果如图 3-36 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-03-16-01-09-960099eb91d0796e84e0451ecfaa5df3-9c796.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 694px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 71.75792507204612%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsSAAALEgHS3X78AAACI0lEQVQoz6WR3W/SUBjGz79qvJLeOPXCmBjjLpaowc2BGVkIES+82IVXJrrFEoiEAS3rKl9tWbZRKKwflFH6CeecesoY4nbpm19Onr7Pe5LzPgUvqu6jsvuU9TaYNare4wh3QSTW3SesR1W8Z2UXvP+mmTaECPtzHNwyRyHCIQ6XEB2suTOI3QAlvmvgy4HsejD8txzb1jS115d7crcnX8iyfGcAIXzwtQcO06LvzKMG/utZ0+l4cq0M+t3uZb8n9wfK/ct0tgOYd5xn+ghiSI4A3oDnOITh6t0Y4ZUFAwRnaO7C2g4P9Oe/tAc/dIrWYrQao6+o3JDKDSh6QOUUilZidKRjNGkSiwyQMZ3KaQ+P9I08UDbL56/KYpz7vc2zyUZpr1XYb9Np4SgjHUaIRJDPwr5QSrWYZIPf4YU4d75Z6b0sgZO3nG9HO+NFvGgBDu/Wqn9jkb9zus2D6od6YM+W/mI9IoeDviCIUuesI0qSGKllore3EUTsXhMwiXpwL+2pNTYMVSdow5Ghjkzjftq1VAucvmYmF5Zr+lPdswx/YgZjM7AsZNuh7YRTB5PTttG1GRDLGpEx3zE8e+jwWzWg73LdLeYswTeS9ZNUs5JuFzNiISvRWekn4XOHiPwnsZgRiFVLNRsf651d/vINq8ZrIPyPAiHECJGsQlXVj8uMoly1xY7r+TzfqFZrzZbEshzDcvlCsdEUjstVwzAXOyMS7R+JhuRUV8nYnQAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 03 16 01 09" title="" data-src="/static/2022-01-03-16-01-09-960099eb91d0796e84e0451ecfaa5df3-9c796.png" data-srcset="/static/2022-01-03-16-01-09-960099eb91d0796e84e0451ecfaa5df3-fec2b.png 200w,\n/static/2022-01-03-16-01-09-960099eb91d0796e84e0451ecfaa5df3-1f263.png 400w,\n/static/2022-01-03-16-01-09-960099eb91d0796e84e0451ecfaa5df3-9c796.png 694w" data-sizes="(max-width: 694px) 100vw, 694px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>要想警示某一段内容存在风险，可以使用红色的条纹边框，代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="20989268778577720000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<div class=&quot;border-stripe&quot;>\n   我们可以使用红色条纹边框表示警示\n</div>\n<style>\n   .border-stripe {\n      border: 12px solid;\n      border-image: repeating-linear-gradient(-45deg, red, red 5px, transparent 5px transparent 10px) 12px;\n   }\n</style>`, `20989268778577720000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>border-stripe<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n   我们可以使用红色条纹边框表示警示\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n   <span class="token selector">.border-stripe</span> <span class="token punctuation">{</span>\n      <span class="token property">border</span><span class="token punctuation">:</span> 12px solid<span class="token punctuation">;</span>\n      <span class="token property">border-image</span><span class="token punctuation">:</span> <span class="token function">repeating-linear-gradient</span><span class="token punctuation">(</span>-45deg<span class="token punctuation">,</span> red<span class="token punctuation">,</span> red 5px<span class="token punctuation">,</span> transparent 5px transparent 10px<span class="token punctuation">)</span> 12px<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>最终效果如图 3-37 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-03-16-04-14-7d5b3b5b3b7030d8c1af90d9e31d3803-381aa.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 29.594477998274378%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsSAAALEgHS3X78AAABCUlEQVQY0z2MS2+CQBRG+f87Y9z41qUr1y54uKqCI6mxSlUKIwwwMIJFbYkJtzNonZxMzvfl3itBpwPNJgwGQtptIf0+DIdCOK2WiJxH5PR6Yr7bhXpdEjtZVuR5GoacLIq+4zh0nTSMzhE9kSCjNE+S+Ihjz2M+oS6+Mgb3O4xGUsmvFsW5+N14BLMUp6fPMDBt2yLB9uitXLz1yRrj5WH34fmWT9DuwC43ACjHYwlqNZhMYDoFTXsiyyAroKmlooioVsJLVRVjnIc0GhKYJsznT2Yz0HUBF8MAhASLBSyRKI2qf4GQBP+vrH6WX95dj91+XBqbtoP29urLfVtvdGvv0ESMleVr5Q+a/TUaXhGglQAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 03 16 04 14" title="" data-src="/static/2022-01-03-16-04-14-7d5b3b5b3b7030d8c1af90d9e31d3803-fee1c.png" data-srcset="/static/2022-01-03-16-04-14-7d5b3b5b3b7030d8c1af90d9e31d3803-a67b7.png 200w,\n/static/2022-01-03-16-04-14-7d5b3b5b3b7030d8c1af90d9e31d3803-0b187.png 400w,\n/static/2022-01-03-16-04-14-7d5b3b5b3b7030d8c1af90d9e31d3803-fee1c.png 800w,\n/static/2022-01-03-16-04-14-7d5b3b5b3b7030d8c1af90d9e31d3803-381aa.png 1159w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>我们甚至可以用 border-image 属性重新定义元素的虚线边框，虚线的尺寸和虚实比例都可以随意控制，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="42403486510743410000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<div class=&quot;border-dashed&quot;>\n   1: 1 的虚线\n</div>\n<style>\n   .border-dashed {\n      border: 1px dashed deepskyblue;\n      border-image: repeating-linear-gradient(135deg, deepskyblue, deepskyblue 5px, transparent 5px, transparent 10px) 1;\n   }\n</style>`, `42403486510743410000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>border-dashed<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n   1: 1 的虚线\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n   <span class="token selector">.border-dashed</span> <span class="token punctuation">{</span>\n      <span class="token property">border</span><span class="token punctuation">:</span> 1px dashed deepskyblue<span class="token punctuation">;</span>\n      <span class="token property">border-image</span><span class="token punctuation">:</span> <span class="token function">repeating-linear-gradient</span><span class="token punctuation">(</span>135deg<span class="token punctuation">,</span> deepskyblue<span class="token punctuation">,</span> deepskyblue 5px<span class="token punctuation">,</span> transparent 5px<span class="token punctuation">,</span> transparent 10px<span class="token punctuation">)</span> 1<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>图 3-38 展示的就是 Edge 浏览器、Chrome 浏览器和 Firefox 浏览器中的自定义虚线边框效果，可以看到，虽然各个浏览器默认的虚线边框不一样，但是自定义的虚线边框完成了统一。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-03-16-08-00-abb675b6bbd0c4ce2e832e0a97e11979-04367.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 28.57142857142857%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsSAAALEgHS3X78AAABKElEQVQY01VQ2W7CMBDM/39XKyjhEAj6QgvkhhyEFmI7JPZ0NmkfGmlje47d0Xo9+NU3YL8HnEPvwHKwciflegsEIXA8oW/UgAlnxdfxFUVAHMNSJ5j37Hsk5zNONMXZZTA82FVbNzTOywpBnCBKz4PBENfkORd5UQxcEMWQPhLGa/ivlUF5b1A3ho2A786NTVlfukV1V7g+NBQ5RUw8RnTaoBbfQ42DiHlZniNMM+TVFYcgQJaXNAAtp41civJ2Y8IUYZKhpUn4gvpjGOFSVENCKU3ca7kHKYkrJ8ON+5H9AeNOeT6t/Yf/caI3XQfz7KhhQxForbFcrZEwQcq088US2+07JpMZNpsdfL4/Pw7w5yu8vE7h+wtM33xMpjOsN1sopX4nOfwA3HPKuUHWUtcAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 03 16 08 00" title="" data-src="/static/2022-01-03-16-08-00-abb675b6bbd0c4ce2e832e0a97e11979-fee1c.png" data-srcset="/static/2022-01-03-16-08-00-abb675b6bbd0c4ce2e832e0a97e11979-a67b7.png 200w,\n/static/2022-01-03-16-08-00-abb675b6bbd0c4ce2e832e0a97e11979-0b187.png 400w,\n/static/2022-01-03-16-08-00-abb675b6bbd0c4ce2e832e0a97e11979-fee1c.png 800w,\n/static/2022-01-03-16-08-00-abb675b6bbd0c4ce2e832e0a97e11979-04367.png 1155w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/g9m1fc?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>border-image 属性最适合模拟宽度为 1px 的虚线边框。如果边框宽度比较大，实线的端点就会有明显的斜边，此时建议使用 background-image 属性和线性渐变语法进行模拟，或者干脆使用 SVG 元素配合 stroke-dasharray 实现更灵活的边框效果。</p>\n<h3 id="圆角渐变边框"><a href="#%E5%9C%86%E8%A7%92%E6%B8%90%E5%8F%98%E8%BE%B9%E6%A1%86" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>圆角渐变边框</h3>\n<p>有时候为了让渐变边框有圆角效果，我们的第一反应是使用 border-radius 属性，但事实是 border-radius 属性无法改变 border-image 属性生成的图形效果，我们需要使用其他的方法。</p>\n<ol>\n<li>\n<p>外层嵌套一层 <code class="language-text">&lt;div&gt;</code> 元素，然后设置圆角和溢出隐藏，代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="29096271610281587000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.father {\n  border-radius: 10px;\n  overflow: hidden;\n}`, `29096271610281587000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.father</span> <span class="token punctuation">{</span>\n  <span class="token property">border-radius</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>\n  <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>效果如图 3-39 所示。</p>\n</li>\n<li>\n<p>使用 clip-path 剪裁，该方法无须嵌套额外的元素，代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="92014694968511940000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.clip-path {\n  clip-path: inset(0 round 10px);\n}`, `92014694968511940000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.clip-path</span> <span class="token punctuation">{</span>\n  <span class="token property">clip-path</span><span class="token punctuation">:</span> <span class="token function">inset</span><span class="token punctuation">(</span>0 round 10px<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>实现的效果和图 3-39 所示的效果是一模一样的。</p>\n</li>\n</ol>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-03-16-12-17-193d2824663505735867b2bbac662dea-9afbc.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 37.30569948186529%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsSAAALEgHS3X78AAABEElEQVQY012Ou0/DMBCH/cfCgHhtHVBCWRELCyxsSDAxsDKhiKZNMrBQBh55SFhKSmLHLU7dOLGNk1IIPX3D3f0+6Q4YTrE5ZPse23X/2HHmDe4KZ95N91y27bCN+y9wchtXXCgpleigx7VaRbJFKdm7hOD6Kqp4qzYb1QYqfPOfx+MgDEJf44dR9Cv8oNT52Su4u3ipq/U7cRK/RwGcQBjDjwQm6PNf3Oo3x0/AO/IWGeOzkk8bSrLQiEIoJlUhpW4KIWhd5s1+6XBSVpRbWxZITx9Rz8KmjY0BNgfT/ogcDnPTXjYto6mmr3Eap9XwwUNi2KD7Tl3XhBBKaUFpkkywLoQRwmmaZQjlOBdCdP1vW/ByvT+S/Y8AAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 03 16 12 17" title="" data-src="/static/2022-01-03-16-12-17-193d2824663505735867b2bbac662dea-fee1c.png" data-srcset="/static/2022-01-03-16-12-17-193d2824663505735867b2bbac662dea-a67b7.png 200w,\n/static/2022-01-03-16-12-17-193d2824663505735867b2bbac662dea-0b187.png 400w,\n/static/2022-01-03-16-12-17-193d2824663505735867b2bbac662dea-fee1c.png 800w,\n/static/2022-01-03-16-12-17-193d2824663505735867b2bbac662dea-9afbc.png 1158w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/xxoz8k?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<h1 id="position-属性的增强"><a href="#position-%E5%B1%9E%E6%80%A7%E7%9A%84%E5%A2%9E%E5%BC%BA" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>position 属性的增强</h1>\n<p>本节主要介绍一个全新的 position 属性值——sticky，单词“sticky”的中文意思是“黏性的”，position: sticky 就是黏性定位。为了让接下来的描述更精准，我们不妨在这里先约定：黏性定位就是指元素应用了 position: sticky 声明；相对定位就是指元素应用了 position: relative 声明；绝对定位就是指元素应用了 position: absolute 声明；固定定位就是指元素应用了 position: fixed 声明。</p>\n<p>sticky 属性值刚出来的时候，在圈子里是引发过一阵小热度的。但是，在 2014 年至 2016 年这长达 3 年的时间里，Chrome 浏览器放弃了对它的支持，后来这个新特性就淡出了大众的视野。不知道出于什么原因，2017 年之后，Chrome 浏览器又重新开始支持黏性定位了。目前所有主流浏览器都已经支持黏性定位。</p>\n<p>黏性定位的兼容性如表 3-6 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-06-10-06-07-d8a641b45d6206daf5fdc2909274f573-244cb.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 30.116279069767444%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsSAAALEgHS3X78AAABQUlEQVQY0yXOSU+DQACGYX6+R+OtiUvUq4fGmzExTbWNdknswlIo+wAzAwVKGYYZYLCm3+m9PMknCSH6vs+yo2V7aZbL6k6WtY2szpe/urH3QDj9Way3iu0CEEJF1Q3TvpDzpIaRviGsJqKr26ZiLeeiY3Ul+pZx1vFSdITSUgjSckLrkrO6b1rO/onkYv/JRnHmvy21b90m5uK4fYUHczZ8ps5kZMWP86AlYDCDSwvwEuYnbeMNSXkocl9aw/BaR5Til/FqajjF7NO7H6CTd/t+V6PJh4FvJqCvo6uRP955PU/j9Hf49RCEASWRhCOzSp0scQJXTpAZRvswNBNkA19ByIkDNYcagib2VzjUktgGrubZauAraeJKCFoNTzE0jxmoShgFBqMxjIxTEZVFcGa0wijaVwRfglHM2aFh59vgDxQUQjqipHrqAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 06 10 06 07" title="" data-src="/static/2022-01-06-10-06-07-d8a641b45d6206daf5fdc2909274f573-fee1c.png" data-srcset="/static/2022-01-06-10-06-07-d8a641b45d6206daf5fdc2909274f573-a67b7.png 200w,\n/static/2022-01-06-10-06-07-d8a641b45d6206daf5fdc2909274f573-0b187.png 400w,\n/static/2022-01-06-10-06-07-d8a641b45d6206daf5fdc2909274f573-fee1c.png 800w,\n/static/2022-01-06-10-06-07-d8a641b45d6206daf5fdc2909274f573-244cb.png 860w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>可以说，黏性定位一定是日后高频使用的一个 CSS 新特性，所以大家务必要精通。</p>\n<h2 id="深入了解-sticky-属性值与黏性定位"><a href="#%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3-sticky-%E5%B1%9E%E6%80%A7%E5%80%BC%E4%B8%8E%E9%BB%8F%E6%80%A7%E5%AE%9A%E4%BD%8D" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>深入了解 sticky 属性值与黏性定位</h2>\n<p>过去，黏性定位效果一定是通过 JavaScript 代码实现的。这个效果常用在导航元素上，具体表现为：当导航元素在屏幕内的时候，导航元素滚动跟随；当导航元素就要滚出屏幕的时候，导航元素固定定位。</p>\n<p>sticky 属性值的设计初衷就是把原来 JavaScript 才能实现的黏性效果改由 CSS 实现。下面来看一个例子。</p>\n<p>滚动页面，大家就会发现，当导航元素距离上边缘距离为 0 的时候，就粘在了上边缘，效果如同固定定位的效果。这个效果的实现只需要几行 CSS 代码：</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/yxt3m2?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="56118315414789956000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`nav {\n   position: -webkit-sticky;\n   position: sticky;\n   top: 0;\n}`, `56118315414789956000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">nav</span> <span class="token punctuation">{</span>\n   <span class="token property">position</span><span class="token punctuation">:</span> -webkit-sticky<span class="token punctuation">;</span>\n   <span class="token property">position</span><span class="token punctuation">:</span> sticky<span class="token punctuation">;</span>\n   <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>该效果使用非常方便，且交互流畅，体验非常棒，谁用谁喜欢。</p>\n<p>人总是容易被视觉表象误导，黏性定位元素在“粘住”的时候，看起来效果跟固定定位一样。再加上传统的黏性定位效果是通过 JavaScript 计算滚动的位置，让 position 属性的值在 relative 和 fixed 之间切换来实现的，因此，很多 CSS 开发者误认为黏性定位就是相对定位和绝对定位的结合体。</p>\n<p>请注意，黏性定位效果底层的渲染规则和固定定位没有任何关系，而是相对定位的延伸。先说说黏性定位和相对定位相似的地方。</p>\n<ol>\n<li>元素发生偏移的时候，元素的原始位置是保留的。</li>\n<li>创建了新的绝对定位包含块，也就是黏性定位元素里面如果有绝对定位的子元素，那这个子元素设置 left 属性、top 属性、right 属性和 bottom 属性时的偏移计算是相对于当前黏性定位元素的。</li>\n<li>支持设置 z-index 属性值来改变元素的层叠顺序。</li>\n</ol>\n<p>再说说黏性定位和相对定位不一样的地方。</p>\n<ol>\n<li>偏移计算元素不一样。相对定位偏移计算的容器是父元素，而黏性定位偏移计算的元素是层级最近的可滚动元素（overflow 属性值不是 visible 的元素）。如果一个可滚动元素都没有，则相对浏览器视窗进行位置偏移。</li>\n<li>偏移定位计算规则不一样。黏性定位的计算规则比较复杂，涉及多个黏性定位专有的概念。</li>\n<li>重叠表现不一样。相对定位元素彼此独立，重叠的时候表现为堆叠；但是黏性定位元素在特定布局结构下，元素重叠的时候并不是表现为堆叠，而是会有 A 黏性定位元素推开 B 黏性定位元素的视觉表现。</li>\n</ol>\n<p>接下来深入讲解上面提到的 3 点不同之处，请大家务必重点阅读这些内容，否则使用黏性定位的时候很可能会感到困惑：明明设置了黏性定位样式，浏览器也支持，但是最终却没有黏性定位效果。</p>\n<h3 id="可滚动元素对黏性定位的影响"><a href="#%E5%8F%AF%E6%BB%9A%E5%8A%A8%E5%85%83%E7%B4%A0%E5%AF%B9%E9%BB%8F%E6%80%A7%E5%AE%9A%E4%BD%8D%E7%9A%84%E5%BD%B1%E5%93%8D" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>可滚动元素对黏性定位的影响</h3>\n<p>通常的 Web 页面都是窗体滚动的，而黏性定位偏移计算的元素是层级最近的那个滚动元素。因此，如果黏性定位元素的某个祖先元素的 overflow 属性值不是 visible，那么窗体滚动的时候就不会有黏性定位效果，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="14647066806423870000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<div>\n   <nav></nav>\n</div>\n<style>\n   div {\n      overflow: hidden;\n   }\n\n   nav {\n      position: sticky;\n      top: 0;\n   }\n</style>`, `14647066806423870000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>nav</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>nav</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n   <span class="token selector">div</span> <span class="token punctuation">{</span>\n      <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">nav</span> <span class="token punctuation">{</span>\n      <span class="token property">position</span><span class="token punctuation">:</span> sticky<span class="token punctuation">;</span>\n      <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>此时滚动页面，<code class="language-text">&lt;nav&gt;</code> 元素是没有黏性效果的。注意，这不是 bug，也不是 sticky 属性值没有渲染，而是因为此时 <code class="language-text">&lt;nav&gt;</code> 元素黏性定位的偏移计算是相对于父级 <code class="language-text">&lt;div&gt;</code> 元素计算的，黏性效果也只有在 <code class="language-text">&lt;div&gt;</code> 元素滚动的时候才能够体现。</p>\n<p>我们将 <code class="language-text">&lt;div&gt;</code> 元素样式微调一下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="65782847337540166000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`div {\n   height: 400px;\n   overflow: auto;\n}\n\ndiv::after {\n   content: \'\';\n   display: block;\n   height: 800px;\n}`, `65782847337540166000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">div</span> <span class="token punctuation">{</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 400px<span class="token punctuation">;</span>\n   <span class="token property">overflow</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">div::after</span> <span class="token punctuation">{</span>\n   <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">\'\'</span><span class="token punctuation">;</span>\n   <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 800px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>此时滚动 <code class="language-text">&lt;div&gt;</code> 元素，大家就会发现 <code class="language-text">&lt;nav&gt;</code> 元素没有跟着滚动，黏性定位效果表现得很好。因此，如果你的网页使用的是窗体滚动，又希望有黏性效果，那务必保证黏性定位元素的祖先元素中没有可滚动元素。</p>\n<h3 id="深入理解黏性定位的计算规则"><a href="#%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E9%BB%8F%E6%80%A7%E5%AE%9A%E4%BD%8D%E7%9A%84%E8%AE%A1%E7%AE%97%E8%A7%84%E5%88%99" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>深入理解黏性定位的计算规则</h3>\n<p>如果黏性定位元素的父元素的高度和黏性定位元素的高度相同，则垂直滚动的时候，黏性定位效果是不会出现的。要讲清楚这个问题，就必须深入理解黏性定位的计算规则。</p>\n<p>黏性定位中有一个“流盒”（flow box）的概念，指的是黏性定位元素最近的可滚动元素的尺寸盒子，如果没有可滚动元素，则表示浏览器视窗盒子。黏性定位中还有一个名为“黏性约束矩形”的概念，指的是黏性定位元素的包含块（通常是父元素）在文档流中呈现的矩形区域和流盒的 4 个边缘在应用黏性定位元素的 left、top、right 和 bottom 属性的偏移计算值后的新矩形的交集。由于滚动的时候流盒不变，而黏性定位元素的包含块跟着滚动，因此黏性约束矩形随着滚动的进行是实时变化的。假设我们的黏性定位元素只设置了 top 属性值，则黏性定位元素碰到黏性约束矩形的顶部时就开始向下移动，直到它完全被包含在黏性约束矩形中。</p>\n<p>上面就是黏性定位计算和渲染的规则，第一遍读下来肯定不知所云，不要急，对照下面这个例子，多看几次就知道什么意思了。</p>\n<p>有一个页面是窗体滚动，包含 <code class="language-text">&lt;div&gt;</code> 元素和 <code class="language-text">&lt;nav&gt;</code> 元素，这两个元素是父子关系，HTML 代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="86472349975012430000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<div>\n   <nav>\n      导航\n   </nav>\n</div>`, `86472349975012430000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>nav</span><span class="token punctuation">></span></span>\n      导航\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>nav</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>其中：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="11562811158757770000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`div {\n   height: 100px;\n   margin-top: 50px;\n   border: solid deepskyblue;\n}\n\nnav {\n   position: sticky;\n   top: 20px;\n   background: lightskyblue;\n}`, `11562811158757770000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">div</span> <span class="token punctuation">{</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>\n   <span class="token property">margin-top</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>\n   <span class="token property">border</span><span class="token punctuation">:</span> solid deepskyblue<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">nav</span> <span class="token punctuation">{</span>\n   <span class="token property">position</span><span class="token punctuation">:</span> sticky<span class="token punctuation">;</span>\n   <span class="token property">top</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>\n   <span class="token property">background</span><span class="token punctuation">:</span> lightskyblue<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>随着滚动的进行，<code class="language-text">&lt;nav&gt;</code> 元素的黏性约束矩形范围和实际的渲染表现如图 3-41 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-06-11-12-38-951a06cf41e0fb9d821641d457e967ee-40f0e.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 47.00352526439483%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsSAAALEgHS3X78AAACHElEQVQoz2P4//z536tX/588/u/Uqf8nT3y8cuXAoZM79hzbs//kvkOnH1y7eeLo6Ssnz106dub6pRuXjp5ZMGfjhk0nl60+fO/6XYb///+faWqdY2y1wtVnqZXj/qqabcFh2+yd9zh7bPUJPN7QON/OZbGj50Jzh62ZeU9qa+66ud8NDLrj5Pxq4UKQ5uMt7Sst7HZ5BWyyd9tWXX8tOvqJm9sTT48rQYHn6upfBAc/DQ157utzNyf7dnX16+ysF4UFL+LiHs6dC9J8p7PrgZPjS3+/h25ux6trr6elX46OvRwZdTE+4VpDw9PU1GcFBa/y8++Wld2urHwRH/80K+tpXNyd6dPBmts7Tzg4XQgNO+3idrKy6klhwbOUlOcZGY/T0q7V1z9KTHySm/skOvpWfv7N6mog4yEQ+fndnjIFpPl7V9c7V9cPCQkf3N2fNDa+Ky7+kp3zKSPjPVBPS8v7kJD3YWHvnZxe5OU9q6z84Ob21t//vbPzy5kzQZqXVFWVGRg0OTg0WFuXBQQ0enhWW1jUWFvXOjqWBwTU29rWWFk12NhUeXpW+fk1WFo2ODoW6+u3JCeDNC9aubK8ubl1woTm/v661tb2CROqWlvru7qaenpqW1pa+vvqurpaJ05s6Oiob2tr6utr7uvLq6pq7ugAaYaDH9++ffv67c+v30D2ty9fP77/AASfQOjj21dvPn349OvXL2T1AA+3StNCJ4N2AAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 06 11 12 38" title="" data-src="/static/2022-01-06-11-12-38-951a06cf41e0fb9d821641d457e967ee-fee1c.png" data-srcset="/static/2022-01-06-11-12-38-951a06cf41e0fb9d821641d457e967ee-a67b7.png 200w,\n/static/2022-01-06-11-12-38-951a06cf41e0fb9d821641d457e967ee-0b187.png 400w,\n/static/2022-01-06-11-12-38-951a06cf41e0fb9d821641d457e967ee-fee1c.png 800w,\n/static/2022-01-06-11-12-38-951a06cf41e0fb9d821641d457e967ee-40f0e.png 851w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>下面介绍一下详细的计算规则。</p>\n<p>由于 <code class="language-text">&lt;nav&gt;</code> 这个黏性定位元素的 top 偏移是 20px，因此，流盒矩形就是滚动窗口矩形再往下偏移 20px，也就是图 3-41 所示的红色区域。而 <code class="language-text">&lt;nav&gt;</code> 这个黏性定位元素的包含块就是其父元素 <code class="language-text">&lt;div&gt;</code>（设置了边框）。黏性约束矩形指的是流盒矩形和包含块的重叠区域，因此，图 3-41 所示的黏性约束矩形就是红色区域和方框区域重叠的矩形区域。</p>\n<p>在默认状态下（图 3-41 左一），由于 <code class="language-text">&lt;div&gt;</code> 元素设置了 <code class="language-text">margin-top: 50px</code>，因此，<code class="language-text">&lt;nav&gt;</code> 这个黏性定位元素的顶部距离黏性约束矩形的顶部还有 33px（即 30px 的距离加上 3px 的边框高度），此时不会有黏性效果。随着浏览器页面滚动，<code class="language-text">&lt;nav&gt;</code> 元素的顶部和黏性约束矩形的顶部距离越来越小，直到距离为 0。此时 <code class="language-text">&lt;nav&gt;</code> 元素开始下移，将自己约束在黏性约束矩形范围内，如图 3-41 左二所示。浏览器页面继续滚动，<code class="language-text">&lt;nav&gt;</code> 元素的底部也快要超出黏性约束矩形范围的限制了，如图 3-41 右二所示。最终，<code class="language-text">&lt;nav&gt;</code> 元素的底部和黏性约束矩形范围的底部重合。由于黏性定位元素不能超出黏性约束矩形范围的限制，因此此时黏性效果失效，<code class="language-text">&lt;nav&gt;</code> 元素跟着一起滚走了，如图 3-41 所示右一。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/2qcc91?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>明白了黏性定位的计算规则，也就明白了为什么黏性定位元素的父元素和自身高度计算值一样的时候没有黏性效果。因为此时包含块高度和黏性定位元素的高度相同，这导致黏性约束矩形的最大高度和黏性定位元素的高度相同，黏性定位元素已经完全没有了实现黏性效果的空间。</p>\n<h3 id="理解黏性定位的堆叠规则"><a href="#%E7%90%86%E8%A7%A3%E9%BB%8F%E6%80%A7%E5%AE%9A%E4%BD%8D%E7%9A%84%E5%A0%86%E5%8F%A0%E8%A7%84%E5%88%99" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>理解黏性定位的堆叠规则</h3>\n<p>黏性定位元素的偏移由容器决定，如果多个黏性定位元素在同一容器中，则这几个黏性定位元素会产生元素重叠的情况；如果黏性定位元素分布在不同的容器中，同时这些容器在布局上是上下紧密相连的，则视觉上会表现为新的黏性定位元素挤开原来的黏性定位元素，形成依次占位的效果。</p>\n<p>例如，有一个按字母排序的通讯录页面，希望在页面滚动的时候将 26 个字母依次定位在页面的顶部。下面两种 HTML 代码结构会有不同的黏性定位效果：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="10133681772069435000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<h6>A</h6>\n<ul>\n   <li>Alice</li>\n</ul>\n<h6>B</h6>\n<ul>\n   <li>贝贝王爷有点萌</li>\n</ul>\n---\n<dl>\n   <dt>A</dt>\n   <dd>Alice</dd>\n</dl>\n<dl>\n   <dt>B</dt>\n   <dd>贝贝王爷有点萌</dd>\n</dl>`, `10133681772069435000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h6</span><span class="token punctuation">></span></span>A<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h6</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>Alice<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h6</span><span class="token punctuation">></span></span>B<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h6</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>贝贝王爷有点萌<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span>\n---\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dl</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dt</span><span class="token punctuation">></span></span>A<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dt</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dd</span><span class="token punctuation">></span></span>Alice<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dd</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dl</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dl</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dt</span><span class="token punctuation">></span></span>B<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dt</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dd</span><span class="token punctuation">></span></span>贝贝王爷有点萌<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dd</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dl</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>其中，字母所在的元素设置了黏性定位的 CSS 声明：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="48862212752488870000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`h6,\ndt {\n   position: sticky;\n   top: 0;\n}`, `48862212752488870000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">h6,\ndt</span> <span class="token punctuation">{</span>\n   <span class="token property">position</span><span class="token punctuation">:</span> sticky<span class="token punctuation">;</span>\n   <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>在第一种 HTML 代码结构中，随着页面的滚动，A ～ Z 所在的字母元素是一个一个重叠上去的；在第二种 HTML 代码结构中，随着页面的滚动，A ～ Z 所在的字母元素是依次推上去的，如图 3-42 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-06-11-32-38-40388b571743c56899b7fc9fa95b1300-59b40.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 66.50306748466258%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAABiUlEQVQoz21SXZOCMAzk//89fHB8UVSapny1tAUKKLfQG+U8M4XppNlks0lS15UgoY1pdlbXdQhhHEdB1FR1s/6rpigapeKZjFlCSIZhaBrdbxaGIZ6h7x+PxzSOOYmG2ZxOmsgc0jZNbZq2x+N8OCyXSzLPM0oRCVBY/pnRmgslmM/ns2QFz3OzZbslwCil2s2cc8YgXiMdyq9go/EqiVADXH5TRvCyJH3fEVFRFkKILMuc92gVSERHMF6ZeflmoD2pQkkplSrKqpymef8MEkCyehN+0wZ4HENZFgB738WIPdhak99zlmxtCwq++xOzCgYvOFvn9ulxB3/FCv1DBWud3iyKMk3TCn4+HwohzHBjQnh7lYVC1toIuN6uUBTpMFEoEsVLur4nSSBWlhWWA/0NISAiCoY4qI2dybJL29qPvhKzDkZ3XYf0CHLocjcqZpmmaS4kpiU3zVHz3TM+1PHeYymB+RjGXtsvo3oNHaxoVRV70mbX2y3HXql7LtYDPQXBhbtz/gX+AeC96KDaoBi6AAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 06 11 32 38" title="" data-src="/static/2022-01-06-11-32-38-40388b571743c56899b7fc9fa95b1300-fee1c.png" data-srcset="/static/2022-01-06-11-32-38-40388b571743c56899b7fc9fa95b1300-a67b7.png 200w,\n/static/2022-01-06-11-32-38-40388b571743c56899b7fc9fa95b1300-0b187.png 400w,\n/static/2022-01-06-11-32-38-40388b571743c56899b7fc9fa95b1300-fee1c.png 800w,\n/static/2022-01-06-11-32-38-40388b571743c56899b7fc9fa95b1300-59b40.png 815w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/bj3orb?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>至于为什么黏性定位元素在同一个容器下会重叠，而在不同容器下则会依次推开，这和上面等高父元素没有黏性效果的原因一样，都是黏性定位计算规则下的样式表现。</p>\n<p>当我们的黏性定位元素分布在不同容器的时候，就会有多个不同的黏性约束矩形。这些黏性约束矩形正好一个一个排列得很整齐，于是在视觉上就表现为上一个黏性定位元素被滚走，下一个黏性定位元素正好开始有黏性效果。当我们的黏性定位元素都在一个容器里的时候，大家都共用一个巨大的黏性约束矩形，因此，滚动的时候元素会一个一个不断往上重叠。</p>\n<p>很显然，依次推送的黏性定位效果体验要更好。因此，在实际开发的时候，如果我们有多个并列的黏性定位元素，建议使用不同的容器元素分别将它们包起来。</p>\n<h3 id="其他细节"><a href="#%E5%85%B6%E4%BB%96%E7%BB%86%E8%8A%82" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>其他细节</h3>\n<p>Safari 浏览器中使用黏性定位需要添加 -webkit- 私有前缀。</p>\n<p>IE 浏览器可以使用 Polyfill 进行支持，可以兼容到 IE9+ 版本。</p>\n<p>同时设置 top 属性、bottom 属性的时候，上下两个方位的黏性效果会同时生效。水平方向的 left 属性、right 属性也是类似的，不过由于水平滚动场景不常见，因此，left 属性、right 属性并不常用。</p>\n<h2 id="position-sticky-声明的精彩应用层次滚动"><a href="#position-sticky-%E5%A3%B0%E6%98%8E%E7%9A%84%E7%B2%BE%E5%BD%A9%E5%BA%94%E7%94%A8%E5%B1%82%E6%AC%A1%E6%BB%9A%E5%8A%A8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>position: sticky 声明的精彩应用——层次滚动</h2>\n<p>黏性定位可以实现很多很棒的效果，例如巧妙配合 top 黏性定位和 bottom 黏性定位可以实现带有视差效果的层次滚动。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/v4l4oj?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>可以看到，随着页面的滚动，标题依次置顶，同时网友评论在恰当的时候从新闻内容的后面出现，如图 3-43 所示。</p>\n<p>图 3-43 所示的富有层次感的滚动效果就是借助黏性定位效果实现的，下面介绍一下具体的原理。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-06-11-40-59-2ae195dc56f5d0951600c4f61d38054b-1ccec.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 374px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 111.22994652406418%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAIAAABPIytRAAAACXBIWXMAAA7DAAAOwwHHb6hkAAADqUlEQVQ4y6XSX0hbVxwH8AN93p4G3daNDcvWhxCiYWCjibRIoVBfRk3FvsgGW2v+mpayJztYYQxbOx+6ybaWNtHqHNZq4qRqMtdkSXA2GmOaa3LzP9Yk3qvmj/feGL33t3tj3R829GGHD+f3vefcw3k4P3T9+ufqS2qDzqBVay62Xjx/vlmpVH544YKSJ0SlsrlSmveDUtnS0tLU1NTZ2YnUKq36I80V1VV9u1ahUIhEIolY3Pj+CYlIJJZKK2rENTXi6uqXs1gskUiqqqra2tqQ3W7p7f3SaOy5e697YOCOxXLf5R5btA/PTZicQ72uwW8Ej753jfzgGrzjGr3rco26XWMOx/DSkgOVyy/W1jy5nJ8kF/N5P8PgAOsCjoCMB17MQsoNxDxs+GBtAXJ+ALKCAMihXC6EYbZYzBkKPQ2H7dmsh+NiLBsVwIqAS7GQYrlERfLlFhtm2VVULODB4Ewi4Y5GHfGYkyQWAOLAxQRs9D/sbXER4FZRoYAvB2ficReOP43FncTfDx+kcpjawJKYLR2xp2POdMSxsTLLMUGWXj4EFWBLCRRtVeKyD3DFyaBUjMtrg/W1vuPvLL337kFOHF9887VIqxLhJ2WBo29gx972v/Lq86OvB4695UXoEEeOzCOEKxQoYrPO95m8gwPeoR+xR8PLIyNBi+UQ4+PY48dJpxMZrn12+ZJep7/WrtKeOXeu7tQp+enTB2tobJTW1qp0OnTVcEX18WWDWq9Xqc+ePSOXy+Tyun+ol8nr6ypke7mhQS6VVqtU7Wh9PRDApvHwrwHMmkq5CcLLMCGaDlYs0+WwYDdC70ZpLkbvxuidCM2EKAorlZJoKx/CMVsy6kyEHStx53rWwz8jt8s3QwIgKTQm36Hx3yA4A5gNMKvwyYSEd+Y7rFDOYJm5+KY/THijmz6CiQAUOSgAmwJIABUBOgSbPkg/g9VZyCzAJgYc39tFAAptmI3pB11Z0+2s8VbW1E30f03e+4q830XeMJDffkGabgn6uvfdJk3d5IObxHc3cj8/RJmumymNNtVhSOn1KX3HSochqdUJDIakTp/UaPdp/go6ffyTT7M9PQj+x0DAssBxQuTDXhbmSvg3fvwZWFa4OZfL88o7O9vb2zTD8CslpkTRdLFYFOYtitqiCnzZovK5AkVTeb4UipWbAcxjZvP4VCgc+33ume85xq9MT1nNE1NznoVp6y+j5onJJ7YnkzaLZfJh35Bp4Cdjf//UjJ3/7Q++A6rHi29QPwAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 06 11 40 59" title="" data-src="/static/2022-01-06-11-40-59-2ae195dc56f5d0951600c4f61d38054b-1ccec.png" data-srcset="/static/2022-01-06-11-40-59-2ae195dc56f5d0951600c4f61d38054b-66c87.png 200w,\n/static/2022-01-06-11-40-59-2ae195dc56f5d0951600c4f61d38054b-1ccec.png 374w" data-sizes="(max-width: 374px) 100vw, 374px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<ol>\n<li>\n<p>为标题和网友评论元素都设置黏性定位，网友评论元素同时设置 z-index: -1，将其藏在新闻内容元素的后面，CSS 代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="17208292645052880000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`h4 {\n  position: sticky;\n  top: 0;\n}\n\nfooter {\n  position: sticky;\n  bottom: 50vh;\n  /* 为了默认隐藏在其他元素后面 */\n  z-index: -1;\n}`, `17208292645052880000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">h4</span> <span class="token punctuation">{</span>\n  <span class="token property">position</span><span class="token punctuation">:</span> sticky<span class="token punctuation">;</span>\n  <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">footer</span> <span class="token punctuation">{</span>\n  <span class="token property">position</span><span class="token punctuation">:</span> sticky<span class="token punctuation">;</span>\n  <span class="token property">bottom</span><span class="token punctuation">:</span> 50vh<span class="token punctuation">;</span>\n  <span class="token comment">/* 为了默认隐藏在其他元素后面 */</span>\n  <span class="token property">z-index</span><span class="token punctuation">:</span> -1<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>每一段的标题和网友评论都使用一个 <code class="language-text">&lt;section&gt;</code> 元素包起来，让黏性定位元素隶属于不同的容器元素，这样就实现了依次置顶占位的效果。</p>\n</li>\n</ol>\n<p>上面的例子只是抛砖引玉，只要是符合标题、内容和辅助信息结构的内容布局，都非常适合使用这种层次滚动交互效果，通过几行简单 CSS 代码就可以实现，性价比极高，非常推荐使用。</p>\n<h1 id="font-family-属性和-font-face-规则新特性"><a href="#font-family-%E5%B1%9E%E6%80%A7%E5%92%8C-font-face-%E8%A7%84%E5%88%99%E6%96%B0%E7%89%B9%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>font-family 属性和 @font-face 规则新特性</h1>\n<p>本节主要介绍与字体相关的一些新特性，包括 font-family 属性的功能加强，以及 @font-face 自定义字体。</p>\n<h2 id="system-ui-等全新的通用字体族字体族"><a href="#system-ui-%E7%AD%89%E5%85%A8%E6%96%B0%E7%9A%84%E9%80%9A%E7%94%A8%E5%AD%97%E4%BD%93%E6%97%8F%E5%AD%97%E4%BD%93%E6%97%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>system-ui 等全新的通用字体族字体族</h2>\n<p>表示一个系列字体，而非单指具体某一个字体。字体族又分为普通字体族和通用字体族，例如 Arial 就是普通字体族。通用字体族数量有限，传统的通用字体族包括下面这些（对应的示意图均来自 CSS FontsModule Level 4 规范文档）。</p>\n<ul>\n<li>\n<p>serif：衬线字体，指笔画有粗有细，开始和结束带有装饰的字体。图 3-44 所示的就是衬线字体。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-08-16-00-24-5ba8a974cc3af18bf71d99f14b7aa6eb-dd64c.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 37.98449612403101%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAABCklEQVQY06VQy2qEQBCcf/cHBI+CCF68CHrQi+Ahht3FxSizvjUYdTDLxptBQXyk2SESwuaUOswU3V01NY22bSOE6Lre973v+1mWpWm6PcKyLHBGUeQ4DpBhGBBcmqYxDAMy0zQFQVBVFYrruj60MAyDZVmMsSiKCPwsy5IkyXVdcOF5nuM4KqagGkq6roNctm3LsqwoCqJ5pmmC9jzP4zgC3/7Acsduh16/ked5EARN0yRJEoYhBPM8D8gvPVTiOIZu27YIRsuyLIoC1gbLqKqqrmtwIaQBDo70wT3/+/UKA/hyaQhB2z+A9sXQz/T95/F0xji43T5efPz0fDg558PReauan1ukWb4AkE+2FyGzN9oAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 08 16 00 24" title="" data-src="/static/2022-01-08-16-00-24-5ba8a974cc3af18bf71d99f14b7aa6eb-fee1c.png" data-srcset="/static/2022-01-08-16-00-24-5ba8a974cc3af18bf71d99f14b7aa6eb-a67b7.png 200w,\n/static/2022-01-08-16-00-24-5ba8a974cc3af18bf71d99f14b7aa6eb-0b187.png 400w,\n/static/2022-01-08-16-00-24-5ba8a974cc3af18bf71d99f14b7aa6eb-fee1c.png 800w,\n/static/2022-01-08-16-00-24-5ba8a974cc3af18bf71d99f14b7aa6eb-dd64c.png 1032w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n<li>\n<p>sans-serif：无衬线字体，指笔画粗细均匀，没有额外装饰的字体。图 3-45 所示的就是无衬线字体。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-08-16-01-18-e577fd71846b96ddba94304341d75e9c-785eb.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 40.56147144240077%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAABGklEQVQY06VRsY6CQBTcP+RvLGnoLKwpLAjRhs6KwlhihYeJQgBZQEACCeES40UXcLlREuMlV1xyU0x2dmfevrdL+r7nnK9Wq6qqiqIwDGO9Xve/ATbwfD7f7/dZlp1OJwJt27YgCJqmmaYpiqIsy23bvtzvybIsR6PRdDpVFGU8Hj/ClmVJkqTr+mKxmEwmqqrWdY39+xNDbGBKwzCM0N1sNlsul2QofL1eu67j/H67sfP53P8NxHVdDJCmaZ7nlNI0y7DwfR8cRZHjOE3TvG5GR3Ecw58kCQzE8zzk4YYOggASL7Hb7ZCECcwYG0YAf9Y1jrbb7cdmg2FJ/w8Q/gZoxppDQPERl8vXMUkd1/MDeqBhFB+fvf/AN2sYs0hO+GBcAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 08 16 01 18" title="" data-src="/static/2022-01-08-16-01-18-e577fd71846b96ddba94304341d75e9c-fee1c.png" data-srcset="/static/2022-01-08-16-01-18-e577fd71846b96ddba94304341d75e9c-a67b7.png 200w,\n/static/2022-01-08-16-01-18-e577fd71846b96ddba94304341d75e9c-0b187.png 400w,\n/static/2022-01-08-16-01-18-e577fd71846b96ddba94304341d75e9c-fee1c.png 800w,\n/static/2022-01-08-16-01-18-e577fd71846b96ddba94304341d75e9c-785eb.png 1033w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n<li>\n<p>monospace：等宽字体，指所有字形具有相同的固定宽度的字体。图 3-46 所示的就是等宽字体。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-08-16-02-26-600d0a0bf97927eb83a98b0178166eb4-673a2.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 47.39696312364425%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsSAAALEgHS3X78AAABPklEQVQoz6VRy46CQBCcn+UH/ACuJnj2xF6NMYR4UVniI/EgB5eDiUJCDCxBnoosAQRBge04WeI+blunrpnqqeoeVH+Boihd14uikGW5LMv6L/T7fUVRoDgej6BBVVUBsW2bIIjxeBxFUbvdliQJDpsnsOZ2u5Ek2ev1wKPVagmCgLBiPp8Dmc1mLMuCYrPZPDfjYr1+63a7Lw90Op3BYIDw9eVyAUWWZWEYuq4LJr8zX6/X+/2e53mSJEEQAEWgq56AfZr6R3OapniK8gHEMAyk5ThuNBoNh0NRFGmankwmy+VytVqBVRN7t9ty3Ot0Ol0sFiDmeR45jmOaJuxgv9+rqno6nYBqmmZZlmEYOAVuhtE8z4PVgga27fs+qv8BVH1HXdWmZfv+OY7jc/ChvesH03JczziYeV4034bxCced6cND6f1tAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 08 16 02 26" title="" data-src="/static/2022-01-08-16-02-26-600d0a0bf97927eb83a98b0178166eb4-fee1c.png" data-srcset="/static/2022-01-08-16-02-26-600d0a0bf97927eb83a98b0178166eb4-a67b7.png 200w,\n/static/2022-01-08-16-02-26-600d0a0bf97927eb83a98b0178166eb4-0b187.png 400w,\n/static/2022-01-08-16-02-26-600d0a0bf97927eb83a98b0178166eb4-fee1c.png 800w,\n/static/2022-01-08-16-02-26-600d0a0bf97927eb83a98b0178166eb4-673a2.png 922w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n<li>\n<p>cursive：手写字体，中文中的楷体（font-family: Kaiti）就属于手写字体。图 3-47 所示的就是手写字体。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-08-16-03-19-6fcb554c4bd5be89f58b78c73b129535-0204f.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 52.613240418118465%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABYklEQVQoz51RwWrCQBDdf/Qn7BekORsqeshJ8OzZnlQ8iIIhIE12k5amBhuqaKwgOSRqihGjSZ+mhGDTS4dlGfbNm3lvloRhaFlWvV7v9/txHJ9Opzgvjsfjfr+/eSSe50mSVKlUhsNhFEWNRsM0TQDn8zmpSJJutzsajZD4vk8pbTYfL2QQWq1WqVQyDEPTNEgYj8cpByhu13U57r5arSKXZblQKPA8fyErijKdTmu1WqfTEUURr/P5PKUlLXRdLxbvBEEYDAaUsYdymeM4jTGiqirgxWJh2/ZkMoH/IAiyxpIuqkpXqxVsb7fb2WyGSTBLEux/QTabDXSu1+vlNXa7XTotOxzWsAtUOo4DCaiEBOK5LvYEJzCGZUB/LhlMFDDG8KPtdrvX66EFydWTkqNrlu2FFR4Ohx/Z0a/4yyGg9P+Q4CY3MNOe360Pe/np+1/6y6tKNRzjzXxSaHAdmB3wDcifVVeuTBpvAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 08 16 03 19" title="" data-src="/static/2022-01-08-16-03-19-6fcb554c4bd5be89f58b78c73b129535-fee1c.png" data-srcset="/static/2022-01-08-16-03-19-6fcb554c4bd5be89f58b78c73b129535-a67b7.png 200w,\n/static/2022-01-08-16-03-19-6fcb554c4bd5be89f58b78c73b129535-0b187.png 400w,\n/static/2022-01-08-16-03-19-6fcb554c4bd5be89f58b78c73b129535-fee1c.png 800w,\n/static/2022-01-08-16-03-19-6fcb554c4bd5be89f58b78c73b129535-0204f.png 861w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n<li>\n<p>fantasy：奇幻字体，主要用来装饰和表现效果，字形和原本字符可以没有关系。从这一点看，自定义的小图标字体就属于奇幻字体。图 3-48 所示的就是奇幻字体。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-08-16-04-18-903ddd96b2d06b0e3eb846de85a62225-38753.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 665px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 58.64661654135338%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAABXElEQVQoz41SwW6CQBTkj7x786P4ARMuHrzwCV4QQ5NGAhpqLYo0JsUVY5taJYQDQUJCwkEQFeyTtUqwNp3Dwg4z++a9hQijiCRJx3GiKErT9PgbML9arXieB9mFJ1zXLZfLkiRRFGXb9kVawHq9bjQanU7HNM12u401xGw2q1QqtVqtVCqpqgpUkiS3ZoSmijJSlKGqvnIcd65sGEa9Xq9WqzRN36sMzHw+h8Ce500mE1gxSeAHrpZmON4BlmHBOfbxH8g38mPOYn9lWCwW0PxyuUQIHQ6HvC4IAk3TYGC6roMMBtbLYFkWAR8YhoExCoLAsiysl+T4xff98Xgsy7IoiuCBC2s2m3AQ8ES+h5wnzaPQ6vWeC/s/BnaruQ5sE4bh6SdL9vs9lIJdHMebExcBs93Gu92ucMrVLPVepKc+murycAQepvXwpqFef8AL3a703OIe3z8+C9G+AY//lNoddWtSAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 08 16 04 18" title="" data-src="/static/2022-01-08-16-04-18-903ddd96b2d06b0e3eb846de85a62225-38753.png" data-srcset="/static/2022-01-08-16-04-18-903ddd96b2d06b0e3eb846de85a62225-a480d.png 200w,\n/static/2022-01-08-16-04-18-903ddd96b2d06b0e3eb846de85a62225-4026e.png 400w,\n/static/2022-01-08-16-04-18-903ddd96b2d06b0e3eb846de85a62225-38753.png 665w" data-sizes="(max-width: 665px) 100vw, 665px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n</ul>\n<p>传统的通用字体族在 CSS 世界一书已经详细介绍过了，这里不再赘述，我们把目光投向全新的通用字体族。全新的通用字体族包括以下几种。</p>\n<ul>\n<li>system-ui：系统 UI 字体。</li>\n<li>emoji：适用于 emoji 字符的字体家族。</li>\n<li>math：适用于数学表达式的字体家族。</li>\n<li>fangsong：中文字体中的仿宋字体家族。</li>\n</ul>\n<p>system-ui 和 emoji 这两种通用字体族尤其实用。下面我就对每一种通用字体族做一下详细的介绍。</p>\n<h3 id="system-ui-通用字体族"><a href="#system-ui-%E9%80%9A%E7%94%A8%E5%AD%97%E4%BD%93%E6%97%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>system-ui 通用字体族</h3>\n<p>在过去，如果想要使用系统字体，只能使用 font: menu、font: status-bar 等 CSS 声明。但是 menu、status-bar、small-caption 等 font 关键字属性值是包含字号的，不同操作系统中的字号会不一样，因此我们还需要通过设置 font-size 属性值重置字号大小，比较麻烦。</p>\n<p>system-ui 字体族的出现很好地解决了使用系统字体的需求。有人会有疑问：为什么要使用系统字体？这是因为所有网站都会设置通用字体，过去流行在网站中指定具体的字体，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="14247243495189731000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`body {\n   font-family: Helvetica, Segoe UI, Arial, \'PingFang SC\', \'Microsoft YaHei\', sans-serif;\n}`, `14247243495189731000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">body</span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> Helvetica<span class="token punctuation">,</span> Segoe UI<span class="token punctuation">,</span> Arial<span class="token punctuation">,</span> <span class="token string">\'PingFang SC\'</span><span class="token punctuation">,</span> <span class="token string">\'Microsoft YaHei\'</span><span class="token punctuation">,</span> sans-serif<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>指定具体的字体存在以下不足。</p>\n<ol>\n<li>\n<p>字体可能会相互冲突。例如，有些用户给自己的 Windows 操作系统安装了苹方字体，但显示器密度并没有跟上，导致网页里显示的字体效果很奇怪，文字瘦瘦的，边缘糊糊的，不利于阅读，如图 3-49 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-08-16-12-56-049d616770f4494e99b2f396070d7397-82c98.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 781px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 38.92445582586427%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAABNElEQVQY04VQa0/CMBTd//8zxsQPRkGCmr2gewArG0EQ4xfHSvfq1nbdxp1+Qkk8OWlvbs/NuT1a33V93xdZ5iInCDDGwSpY2rbr+/5mEzmuj5DjOw5N8/4PtJ9LSkkIOZETK1mWZydKv+KY0hSalNJjHBdF2bZt9+30e1gI/r7fhVGI0Hw+m5mWfUxiVrEIB3PHMw3TMKBpJSQBcdd3F8NKNXmeMcZIQo4DkrIspRRgm8ImKSDL86Ku6yvOFWPbaIPx+rDfh2HoIvfw8TmYXO55/c8g6tpONlI1TSMl51wp1f8HDcScCwhDCAF1oxTUkB9sKODkvK6BFbxy4AAxUAjGKm37tlssV6yqPH+1WAaut8Dr6P5h/Kpb0xd99DRFjmdYM4gNOrphP44m48mzbto3t3dnKw29UBhrKJMAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 08 16 12 56" title="" data-src="/static/2022-01-08-16-12-56-049d616770f4494e99b2f396070d7397-82c98.png" data-srcset="/static/2022-01-08-16-12-56-049d616770f4494e99b2f396070d7397-ee9e5.png 200w,\n/static/2022-01-08-16-12-56-049d616770f4494e99b2f396070d7397-b8c14.png 400w,\n/static/2022-01-08-16-12-56-049d616770f4494e99b2f396070d7397-82c98.png 781w" data-sizes="(max-width: 781px) 100vw, 781px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n<li>\n<p>系统升级后可能有了更适合网页的字体，但是由于网页指定了字体，因此并不能使用更适合网页的字体。例如 OS X 10.9 Mavericks 版本、OS X 10.10 Yosemite 版本和 OS X 10.11 El Capitan 版本分别使用了不同的默认字体，如下表所示</p>\n</li>\n</ol>\n<table>\n<thead>\n<tr>\n<th align="left">OS X 版本</th>\n<th align="left">系统字体</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align="left">10.11 Mavericks</td>\n<td align="left">San Francisco</td>\n</tr>\n<tr>\n<td align="left">10.10 Yosemite</td>\n<td align="left">Helvetica Neue</td>\n</tr>\n<tr>\n<td align="left">10.9 EI Capitan</td>\n<td align="left">Lucida Grande</td>\n</tr>\n</tbody>\n</table>\n<p>San Francisco 字体具有动态特性，更适合小屏幕，可以提升阅读体验。如果我们代码中指定了 Helvetica Neue 字体，则我们的页面就没办法跟着系统一起提升体验。</p>\n<p>综上所述，全局的字体设置应该随着系统字体变动，理论上只需要下面的 CSS 代码就可以实现：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="38249454398178210000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`body {\n   font-family: system-ui;\n}`, `38249454398178210000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">body</span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> system-ui<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>但是，由于兼容性问题的存在，实际开发过程中是不能直接使用上面的 CSS 代码的，还需要使用其他字体族兜底。</p>\n<h4 id="兼容性-3"><a href="#%E5%85%BC%E5%AE%B9%E6%80%A7-3" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>兼容性</h4>\n<p>system-ui 字体族的兼容性如表 3-8 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-08-16-21-43-046d6f76535efe35b9cb070409e45f62-66f68.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 28.8695652173913%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsSAAALEgHS3X78AAABRElEQVQY0x2K307CMBxG9+Q+gokvgCZ6oegNCSZGiUqCgoohhC4MBhuUld/aja3r/rRjbHPx5EvOd3G0KBJL04pETPaw3ToA1DDM38lsMkXf44lDAOnG8Gs80w2MyW63R2hu2bj+R6uUyFWspGgmZXysTqeyyFVSHtNGuRJ1lTRBVSanIs5kVBxlWcgs402snZseZvj6FX0gs1Ts0L/j85djGT532/jtCrne2ZPD+e5i4D4ip8o8CIc/q4dcRnEE2uWacgGdwVS37LrmduuGDnp1nd6Oujq63zLvvI/jiLRGuKdva+VvyGfnvU0pkQnTTgIHzPZhefBsRteEWX7g8GDnkQWFje+aCTM8aoUEcbp0wQRn7YNFYclD0JT0mGtlCRXc2TuGSxbN4QF23VUqCIV1klCf2TwgWUqBmDKlKmN5xgSHPwFHQKWQdLy5AAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 08 16 21 43" title="" data-src="/static/2022-01-08-16-21-43-046d6f76535efe35b9cb070409e45f62-fee1c.png" data-srcset="/static/2022-01-08-16-21-43-046d6f76535efe35b9cb070409e45f62-a67b7.png 200w,\n/static/2022-01-08-16-21-43-046d6f76535efe35b9cb070409e45f62-0b187.png 400w,\n/static/2022-01-08-16-21-43-046d6f76535efe35b9cb070409e45f62-fee1c.png 800w,\n/static/2022-01-08-16-21-43-046d6f76535efe35b9cb070409e45f62-66f68.png 1150w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>关于其他兜底字体的设置可以参考一些大型网站，例如 GitHub 站点的字体设置：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="55722656183120314000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`body {\n   font-family: -apple-system, BlinkMacSystemFont, Segoe UI, Helvetica, Arial, sans-serif, Apple Color Emoji,\n      Segoe UI Emoji;\n}`, `55722656183120314000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">body</span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> -apple-system<span class="token punctuation">,</span> BlinkMacSystemFont<span class="token punctuation">,</span> Segoe UI<span class="token punctuation">,</span> Helvetica<span class="token punctuation">,</span> Arial<span class="token punctuation">,</span> sans-serif<span class="token punctuation">,</span> Apple Color Emoji<span class="token punctuation">,</span>\n      Segoe UI Emoji<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>先具体分析一下这个字体设置的组成。</p>\n<ul>\n<li>\n<p>-apple-system 只在 macOS 中有效，是 system-ui 字体族还没出现之前的一种私有语法，可以让 Firefox 浏览器和 Safari 9.1 ～ Safari 10.1 浏览器使用系统字体。</p>\n</li>\n<li>\n<p>BlinkMacSystemFont 也只在 macOS 中有效，是 Chrome 53 ～ Chrome 55 浏览器使用系统字体的一种非标准语法。考虑到目前 system-ui 字体族的兼容性，并从适应未来的角度来看，BlinkMacSystemFont 可以删掉了。</p>\n</li>\n<li>\n<p>Segoe UI、Helvetica、Arial 是给不支持系统字体的浏览器兜底用的，如 IE 浏览器、Edge 浏览器等。其中需要注意以下 3 点。</p>\n<ul>\n<li>Segoe UI 是 Windows 操作系统从 Vista 版本开始默认的西文字体族，可以在 Windows 操作系统上以最佳的西文字体显示。</li>\n<li>Helvetica 是 macOS 和 iOS 中很常用的一款无衬线字体。</li>\n<li>Arial 是全平台都支持的一款无衬线字体，可以作为最后的兜底，例如较老版本的 Windows 操作系统。</li>\n</ul>\n<p>可能是 GitHub 的开发者不喜欢 Android 操作系统，这里的字体设置遗漏了 Roboto 字体。Roboto 字体是为 Android 操作系统设计的一款无衬线字体，可以在 Android 操作系统上以最佳的西文字体显示。</p>\n</li>\n<li>\n<p>Apple Color Emoji 和 Segoe UI Emoji 是 emoji 字体，此处同样遗漏了 Android 操作系统的 emoji 字体。关于 emoji 字体的更多内容后面会讲解，这里先不做介绍。</p>\n</li>\n</ul>\n<p>通过上面的分析讲解，我们可以去粗取精，得到一段最佳的系统字体设置代码（暂时不考虑 emoji 字体）：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="6535627239550102000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`body {\n   font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;\n}`, `6535627239550102000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">body</span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> system-ui<span class="token punctuation">,</span> -apple-system<span class="token punctuation">,</span> Segoe UI<span class="token punctuation">,</span> Roboto<span class="token punctuation">,</span> Helvetica<span class="token punctuation">,</span> Arial<span class="token punctuation">,</span> sans-serif<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>字体设置还没结束，上面的 CSS 代码还差对 emoji 字体的设置。</p>\n<h3 id="emoji-通用字体族"><a href="#emoji-%E9%80%9A%E7%94%A8%E5%AD%97%E4%BD%93%E6%97%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>emoji 通用字体族</h3>\n<p>目前主流的操作系统都已经内置 emoji 字体，如 macOS、iOS、Android 操作系统和 Windows 10 操作系统等。然而，虽然主流的操作系统内置了 emoji 字体，但是有些 emoji 字符并不会显示为彩色的图形，需要专门指定 emoji 字体，代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="74801919432725540000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.emoji {\n   font-family: Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol, Noto Color Emoji;\n}`, `74801919432725540000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.emoji</span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> Apple Color Emoji<span class="token punctuation">,</span> Segoe UI Emoji<span class="token punctuation">,</span> Segoe UI Symbol<span class="token punctuation">,</span> Noto Color Emoji<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>我先具体分析一下这个字体设置的组成。</p>\n<ul>\n<li>Apple Color Emoji 用在 Apple 的产品中的，如 iPhone（iOS）或者 Mac Pro（macOS）等。</li>\n<li>Segoe UI Emoji 是用在 Windows 操作系统中的 emoji 字体。</li>\n<li>Segoe UI Symbol 是在 Windows 7 操作系统中添加的一种新字体，是一种 Unicode 编码字体，显示的是单色图案，非彩色图形。</li>\n<li>Noto Color Emoji 是谷歌的 emoji 字体，用在 Android 和 Linux 操作系统中。</li>\n</ul>\n<p>以上 4 种字体涵盖了所有主流的操作系统。不过每次使用 emoji 字体都要指定 4 个元素有些麻烦，加上 Noto Color Emoji 直接作为 font-family 属性值没有效果，因此我们可以专门定义一个新的 emoji 字体来优化代码，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="5240150347941408000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`@font-face {\n   font-family: Emoji;\n   src: local(\'Apple Color Emoji\'), local(\'Segoe UI Emoji\'), local(\'Segoe UI Symbol\'), local(\'Noto Color Emoji\');\n}\n\n.emoji {\n   font-family: Emoji;\n}`, `5240150347941408000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token atrule"><span class="token rule">@font-face</span></span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> Emoji<span class="token punctuation">;</span>\n   <span class="token property">src</span><span class="token punctuation">:</span> <span class="token function">local</span><span class="token punctuation">(</span><span class="token string">\'Apple Color Emoji\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">local</span><span class="token punctuation">(</span><span class="token string">\'Segoe UI Emoji\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">local</span><span class="token punctuation">(</span><span class="token string">\'Segoe UI Symbol\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">local</span><span class="token punctuation">(</span><span class="token string">\'Noto Color Emoji\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.emoji</span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> Emoji<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>我们来看一下上面 emoji 字体设置的效果。下面是两段不同的 HTML 代码：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="52724781490674614000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<p>笑脸☺：\\263a、铅笔✏：\\270f、警示⚠：\\26a0</p>\n<p class=&quot;emoji&quot;>笑脸☺：\\263a、铅笔✏：\\270f、警示⚠：\\26a0</p>`, `52724781490674614000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>笑脸☺：\\263a、铅笔✏：\\270f、警示⚠：\\26a0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>emoji<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>笑脸☺：\\263a、铅笔✏：\\270f、警示⚠：\\26a0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>在 Windows 10 操作系统下的 Chrome 浏览器中为图 3-50 所示的效果。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-08-16-46-25-09459a146de70695cf7a684ff25620c3-e132d.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 24.651924651924652%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA+klEQVQY0yWOwW6DMBBE+f9bf6hKm0o9RK3SKgECZjF2TEgE2LFDsEPW1KjvsNKMdnY2olC8rd4prayznFVxnCglq4quP9YQTLuY6SHrpfz+2sRJ0ratNibe7wghkfd+CqCf5xkRn/8gWjtaN+ETPeLsF6bHgvdB4ZJAjLI8P6Rxtn65m3BdCVHfhgEACgBBNkZ16noVtdBXvd1uGat4+ersIGXPjzwKiUtzOsPnw92dc8aYMJVSl3MjWx5aghzHe+jsum646ea4mqbw1qi1jupTU3FhbiNjnFLW9TJNs0NGSFFCyQFoWMgJ/PzuSspE3ZS02cdpkmZ5AX+9lBIIHEs3bwAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 08 16 46 25" title="" data-src="/static/2022-01-08-16-46-25-09459a146de70695cf7a684ff25620c3-fee1c.png" data-srcset="/static/2022-01-08-16-46-25-09459a146de70695cf7a684ff25620c3-a67b7.png 200w,\n/static/2022-01-08-16-46-25-09459a146de70695cf7a684ff25620c3-0b187.png 400w,\n/static/2022-01-08-16-46-25-09459a146de70695cf7a684ff25620c3-fee1c.png 800w,\n/static/2022-01-08-16-46-25-09459a146de70695cf7a684ff25620c3-b1a91.png 1200w,\n/static/2022-01-08-16-46-25-09459a146de70695cf7a684ff25620c3-e132d.png 1221w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>在 Android 操作系统下的 Chrome 浏览器中为图 3-51 所示的效果。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-08-16-46-53-1a07cd5b7086cbfd77bcf3e2e435cbe8-98981.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 20.915032679738562%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAx0lEQVQI1x2Ny3KDMBRD+f/vaTdddttV00yhhDiEwcRPjG3utZ1xoS5nJWmkUbVt277vHRk/P14dfeHCNE1tjDl9nfu+B4C2bYUQdV133WWxnpAbIWQ/qBhXbu6eUQOGiCsAlgHnwqrHMwJiSCnCQQkRRPx3WAghVN/NlV3fkruYBbyz5dN7198HPf3kZMpV6S3L4r2/9YMV7ynIdUWttZSyyjlzPgNGDDjPRkg10kkqxYRmTFrnih5G+mDcWqeUpnQ6Cjrn3z8omN2fkpOFqgAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 08 16 46 53" title="" data-src="/static/2022-01-08-16-46-53-1a07cd5b7086cbfd77bcf3e2e435cbe8-fee1c.png" data-srcset="/static/2022-01-08-16-46-53-1a07cd5b7086cbfd77bcf3e2e435cbe8-a67b7.png 200w,\n/static/2022-01-08-16-46-53-1a07cd5b7086cbfd77bcf3e2e435cbe8-0b187.png 400w,\n/static/2022-01-08-16-46-53-1a07cd5b7086cbfd77bcf3e2e435cbe8-fee1c.png 800w,\n/static/2022-01-08-16-46-53-1a07cd5b7086cbfd77bcf3e2e435cbe8-b1a91.png 1200w,\n/static/2022-01-08-16-46-53-1a07cd5b7086cbfd77bcf3e2e435cbe8-98981.png 1224w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>可以看到，应用了 emoji 字体的那段文字的字符图案都变成了彩色的 emoji 图形。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/g76fln?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>如果我们仔细观察，就会发现 emoji 字体对普通文本的渲染也产生了影响。例如在 Windows 10 操作系统下的 Chrome 浏览器中，文字在应用 emoji 字体后显示的字体不再是微软雅黑；在 Android 操作系统下的 Chrome 浏览器中，在应用 emoji 字体后，数字和字母的字形变粗了，字宽加大了。这种效果肯定不是我们需要的，因此，在实际开发的时候，emoji 字体设置应该放在系统字体设置后面。结合前面的最佳系统字体设置代码</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="9832329883383450000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`@font-face {\n   font-family: Emoji;\n   src: local(\'Apple Color Emoji\'), local(\'Segoe UI Emoji\'), local(\'Segoe UI Symbol\'), local(\'Noto Color Emoji\');\n}\n\nbody {\n   font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Emoji;\n}`, `9832329883383450000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token atrule"><span class="token rule">@font-face</span></span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> Emoji<span class="token punctuation">;</span>\n   <span class="token property">src</span><span class="token punctuation">:</span> <span class="token function">local</span><span class="token punctuation">(</span><span class="token string">\'Apple Color Emoji\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">local</span><span class="token punctuation">(</span><span class="token string">\'Segoe UI Emoji\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">local</span><span class="token punctuation">(</span><span class="token string">\'Segoe UI Symbol\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">local</span><span class="token punctuation">(</span><span class="token string">\'Noto Color Emoji\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">body</span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> system-ui<span class="token punctuation">,</span> -apple-system<span class="token punctuation">,</span> Segoe UI<span class="token punctuation">,</span> Roboto<span class="token punctuation">,</span> Helvetica<span class="token punctuation">,</span> Arial<span class="token punctuation">,</span> sans-serif<span class="token punctuation">,</span> Emoji<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>实际效果如何？我们可以做一个测试：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="14958330304638400000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`p {\n   font: menu;\n}\n\n.emoji {\n   font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Emoji;\n}`, `14958330304638400000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">p</span> <span class="token punctuation">{</span>\n   <span class="token property">font</span><span class="token punctuation">:</span> menu<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.emoji</span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> system-ui<span class="token punctuation">,</span> -apple-system<span class="token punctuation">,</span> Segoe UI<span class="token punctuation">,</span> Roboto<span class="token punctuation">,</span> Helvetica<span class="token punctuation">,</span> Arial<span class="token punctuation">,</span> sans-serif<span class="token punctuation">,</span> Emoji<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>为了方便演示，我们在 HTML 代码中增加一个 Unicode 值为 1f600 的笑脸，代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="77353188548079900000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<p>笑脸：☺\\263a😀\\1f600、铅笔：✏\\270f、警示：⚠\\26a0</p>\n<p class=&quot;emoji&quot;>笑脸：☺\\263a😀\\1f600、铅笔：✏\\270f、警示：⚠\\26a0</p>`, `77353188548079900000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>笑脸：☺\\263a😀\\1f600、铅笔：✏\\270f、警示：⚠\\26a0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>emoji<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>笑脸：☺\\263a😀\\1f600、铅笔：✏\\270f、警示：⚠\\26a0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>在 Windows 10 操作系统和 macOS 下的 Chrome 浏览器中分别有图 3-52 和图 3-53 所示的效果。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-08-16-54-59-cd9d2782a07bab5a119d3d9babd4cdd1-7790f.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 52.40032546786006%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAAB3UlEQVQoz41S246bMBDl/7+l6lOfV2r3rVVVpQlJdsMdYsBgMDb3jXo64/zAIlkMw/HMmXPGK/IM/vmCaZpQFBkK0eL66wvy20/ESQ7ZNCiyHJfLlTAzhBDI8wKqbXH2zzDGolUKURRBygZe13WY5xmPx8MVnUaLTsaYpxHGWuz7TpcM5mXBNlvYQROe4nWF1hrbtmFdrbs7jiO82/sb6lo6QF3XEMQy/PMVvZKOyUKFwiBATd1NG6OtBRpip3WPgPLLMqHKX1BXAndRwmsa+jkMjo2LtUGvRxr/CUhp3L7XjmUhKmT53eVb1UF1PcWEu98pX6BtFTxFP1gHZtIRgI8xAxVvHCtuUlU1yrICYyuahrViHBfgnFK9y3NjD594WKd9//gMFN7p+BdJVuGhfkNG3xEkEmX4Chn/wPU9ImbCsfV934lelqVzlA05HA7ETmEgo8IwRJqmT5eNnfBvVVhMRfEM2xWYhxp2JNfJbXaQ12RdVieNJb1XMrGlHH+v60ZFB5f3jscjsiwlgTXebhGS4IQh/oYkzZ2LXOxIU7BmH0NIOxlAkJ5NI3GiPdy3CYt8QRKHxDKCx514FHaRz0hdbP8UXetnV14TdpVH031PbwOe7Imho3KH4539DwPB8V001RATAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 08 16 54 59" title="" data-src="/static/2022-01-08-16-54-59-cd9d2782a07bab5a119d3d9babd4cdd1-fee1c.png" data-srcset="/static/2022-01-08-16-54-59-cd9d2782a07bab5a119d3d9babd4cdd1-a67b7.png 200w,\n/static/2022-01-08-16-54-59-cd9d2782a07bab5a119d3d9babd4cdd1-0b187.png 400w,\n/static/2022-01-08-16-54-59-cd9d2782a07bab5a119d3d9babd4cdd1-fee1c.png 800w,\n/static/2022-01-08-16-54-59-cd9d2782a07bab5a119d3d9babd4cdd1-b1a91.png 1200w,\n/static/2022-01-08-16-54-59-cd9d2782a07bab5a119d3d9babd4cdd1-7790f.png 1229w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>在 Android 操作系统下的 Chrome 浏览器和 iOS 下的 Safari 浏览器中有图 3-54 和图 3-55 所示的效果。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-08-16-56-04-14768e35defef020357ac1954be1d829-0af45.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 44.841592201462234%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABnklEQVQozx1RyYrbUBDU/39KboEcAyGHHDIQSDweR7LkkbW8fd9ly5LTk0fTNPWq6K7uqmnq+jzcxTfUfKk7Np8+kf7Hqb5QSoZhOB6PMWWMSde2SqnD4QCZUt51Xd/3lZQy5+Wexuh4iDmoLkfjnF/KYo31PmzZlewBKaWAEvK2uhAcINX53DCuC/tKh18T4qT5rFj33g9AH8cBE/ZcmJPDNGPvHXQLIazuO55b4FScC2NMiDcpDdTTzMaJEsoIodY6QC79dB0QIFIqhAhYGKe5vw5cyMoYC1Fycs4qZZREYEoqwKzRRmvDKYZplYYvJYSwHzQphLTWVtu2wTDWh3VdtY0ev2T1V5lQSprnyVj3iJOzIqXMGBHK77ku9lWq8HisFcbI+bTH1spB6RDlm9eIcdhi5pyD+J5UcBw6p5goZcuS1tAY/WG2wghp45/utxcXaWIkP5OdhdS322KMjqnsN5k8CVCVAqd5PB5beJECwTqq5/83IompTDFMWLUdHHiEeH2rD8dT9z4izOvmfG4v1+v453DsRwqSfd//AQq+7rzG3njoAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 08 16 56 04" title="" data-src="/static/2022-01-08-16-56-04-14768e35defef020357ac1954be1d829-fee1c.png" data-srcset="/static/2022-01-08-16-56-04-14768e35defef020357ac1954be1d829-a67b7.png 200w,\n/static/2022-01-08-16-56-04-14768e35defef020357ac1954be1d829-0b187.png 400w,\n/static/2022-01-08-16-56-04-14768e35defef020357ac1954be1d829-fee1c.png 800w,\n/static/2022-01-08-16-56-04-14768e35defef020357ac1954be1d829-b1a91.png 1200w,\n/static/2022-01-08-16-56-04-14768e35defef020357ac1954be1d829-0af45.png 1231w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>很有意思，图 3-52 ～图 3-55 所示的 emoji 字体效果居然没有一个是一样的。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/s27bg3?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>很多开发者懵了，emoji 效果的出现难道没有规律的吗？emoji 字体放在后面居然让 emoji 图形还原成字符了？实际上，上面所有问题出现的原因都是 emoji 前面的那些字体的 Unicode 范围涵盖了 emoji 字符的 Unicode 范围。例如，😀 这个字符的 Unicode 值是 1f600，是非常靠后的字符，这种以 1f 开头的 5 位数的 Unicode 值都是非常安全的字符，常规字体的 Unicode 范围并未覆盖这么广。因此，大家可以看到，无论在哪个操作系统下或哪个浏览器中，😀 都能以 emoji 图形显示。</p>\n<p>但是，那些靠前的传统的 Unicode 字符就不是这样的。例如 ☺ 这个字符，其 Unicode 值是 263a，比较小，位置非常靠前，很多常见字体中就有这个字符的字体信息。例如，Helvetica 和 Arial 字体可以让 \\263a 笑脸以字符图案呈现而不是 emoji 图形，因此，无论是在 Windows 操作系统还是在 macOS 中，\\263a 笑脸都是字符效果。但是 \\263a 笑脸在 iOS 下 Safari 浏览器中显示的是 emoji 图形，这是因为 iOS 中的 system-ui 字体族包含了 emoji 字体，如果我们删掉 system-ui，类似下面的 CSS 代码：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="61149549413301930000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.emoji {\n   font-family: Helvetica, Arial, sans-serif, Emoji;\n}`, `61149549413301930000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.emoji</span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> Helvetica<span class="token punctuation">,</span> Arial<span class="token punctuation">,</span> sans-serif<span class="token punctuation">,</span> Emoji<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>大家可以发现，emoji 笑脸又变成单调的字符图案了。</p>\n<p>最后再说一下为何 \\263a 笑脸在 Android 操作系统下的 Chrome 浏览器中没有变成字符，这是因为 Android 浏览器并没有 Helvetica 和 Arial 这两个字体。所以，将 emoji 字体设置放在最后，出现部分字符没有变成 emoji 图形的情况，并不是 emoji 字体的问题，而是被为了兼容而设置的其他字体干扰的结果。</p>\n<p>于是，我想到了一种优化方法，那就是把 emoji 字体放在 Helvetica 和 Arial 这两个字体的前面，同时通过 unicode-range 属性调整 emoji 字体生效的 Unicode 范围：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="57901564188274030000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`@font-face {\n   font-family: Emoji;\n   src: local(\'Apple Color Emoji\'), local(\'Segoe UI Emoji\'), local(\'Segoe UI Symbol\'), local(\'Noto Color Emoji\');\n   unicode-range: U+1F000-1F644, U+203C-3299;\n}\n\n.emoji {\n   font-family: system-ui, -apple-system, Segoe UI, Roboto, Emoji, Helvetica, Arial, sans-serif;\n}`, `57901564188274030000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token atrule"><span class="token rule">@font-face</span></span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> Emoji<span class="token punctuation">;</span>\n   <span class="token property">src</span><span class="token punctuation">:</span> <span class="token function">local</span><span class="token punctuation">(</span><span class="token string">\'Apple Color Emoji\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">local</span><span class="token punctuation">(</span><span class="token string">\'Segoe UI Emoji\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">local</span><span class="token punctuation">(</span><span class="token string">\'Segoe UI Symbol\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">local</span><span class="token punctuation">(</span><span class="token string">\'Noto Color Emoji\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token property">unicode-range</span><span class="token punctuation">:</span> U+1F000-1F644<span class="token punctuation">,</span> U+203C-3299<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.emoji</span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> system-ui<span class="token punctuation">,</span> -apple-system<span class="token punctuation">,</span> Segoe UI<span class="token punctuation">,</span> Roboto<span class="token punctuation">,</span> Emoji<span class="token punctuation">,</span> Helvetica<span class="token punctuation">,</span> Arial<span class="token punctuation">,</span> sans-serif<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>此时，系统字体、emoji 字体和向下兼容字体达到了完美的平衡。</p>\n<p>假设有如下 HTML 代码：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="98912775969143110000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<p>&#x263a;\\263a&#x270f;\\270f&#x26a0;\\26a0&#x1f600;\\1f600&#x1f638;\\1f638&#x1f921;\\1f921</p>\n<p class=&quot;emoji&quot;>&#x263a;\\263a&#x270f;\\270f&#x26a0;\\26a0&#x1f600;\\1f600&#x1f638;\\1f638&#x1f921;\\1f921</p>`, `98912775969143110000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token entity" title="&#x263a;">&amp;#x263a;</span>\\263a<span class="token entity" title="&#x270f;">&amp;#x270f;</span>\\270f<span class="token entity" title="&#x26a0;">&amp;#x26a0;</span>\\26a0<span class="token entity" title="&#x1f600;">&amp;#x1f600;</span>\\1f600<span class="token entity" title="&#x1f638;">&amp;#x1f638;</span>\\1f638<span class="token entity" title="&#x1f921;">&amp;#x1f921;</span>\\1f921<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>emoji<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token entity" title="&#x263a;">&amp;#x263a;</span>\\263a<span class="token entity" title="&#x270f;">&amp;#x270f;</span>\\270f<span class="token entity" title="&#x26a0;">&amp;#x26a0;</span>\\26a0<span class="token entity" title="&#x1f600;">&amp;#x1f600;</span>\\1f600<span class="token entity" title="&#x1f638;">&amp;#x1f638;</span>\\1f638<span class="token entity" title="&#x1f921;">&amp;#x1f921;</span>\\1f921<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>这段代码在 Windows 10 操作系统下的 Chrome 浏览器中的效果会如图 3-56 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-08-17-11-24-e014f6168b9dcb5a0255b6a8a078b9f2-d086f.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 29.159935379644587%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsSAAALEgHS3X78AAABI0lEQVQY002PW07DMBBFs/9vFsAHYg1sIIgWAaJN2zwdvzJO3Lza2HHiVAUXhMSVRjp3dDTSeKPWjFKEEOdcAGCMmSNOEsSC5wca+5iWcRhs/UcBLEF5+PpONgEHhnHuXS6XeZ6tm3kxxtgbLdYubjf0YHTn6mTMqSnneZqt1Urp89kuN89L/DtgKWGCow9BIsYlzVdVsaZMptEmWd1DKTCF/dsTiXwQVZah5GUtCyAEe50kWg3GTKe+MaMyk21qWstcKdN3bV9zM01K67Y99l0zjqMex75t3bNKKa8QEkQ5DIOUDcqpOxwlaB9mmBAhKhDHum45L1KEwzhNM1RVEsoqitM4ybyv6/XrJ9e/OIYCEKaHQxzsws/t7hBGg1K/zn/5G3h1R9meZlWrAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 08 17 11 24" title="" data-src="/static/2022-01-08-17-11-24-e014f6168b9dcb5a0255b6a8a078b9f2-fee1c.png" data-srcset="/static/2022-01-08-17-11-24-e014f6168b9dcb5a0255b6a8a078b9f2-a67b7.png 200w,\n/static/2022-01-08-17-11-24-e014f6168b9dcb5a0255b6a8a078b9f2-0b187.png 400w,\n/static/2022-01-08-17-11-24-e014f6168b9dcb5a0255b6a8a078b9f2-fee1c.png 800w,\n/static/2022-01-08-17-11-24-e014f6168b9dcb5a0255b6a8a078b9f2-b1a91.png 1200w,\n/static/2022-01-08-17-11-24-e014f6168b9dcb5a0255b6a8a078b9f2-d086f.png 1238w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>其他操作系统下第二行内容中的 emoji 图形也都全部正常显示了。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/0xgyql?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>于是，我们就可以得到无衬线字体 CSS 最佳实践代码，这套 CSS 代码适合用于设置页面主体文字内容。大家可以看看自己的代码，如果还是传统的字体设置，就可以换成下面这段 CSS 代码：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="27874578417173200000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`@font-face {\n   font-family: Emoji;\n   src: local(\'Apple Color Emoji\'), local(\'Segoe UI Emoji\'), local(\'Segoe UI Symbol\'), local(\'Noto Color Emoji\');\n   unicode-range: U+1F000-1F644, U+203C-3299;\n}\n\nbody {\n   font-family: system-ui, -apple-system, Segoe UI, Roboto, Emoji, Helvetica, Arial, sans-serif;\n}`, `27874578417173200000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token atrule"><span class="token rule">@font-face</span></span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> Emoji<span class="token punctuation">;</span>\n   <span class="token property">src</span><span class="token punctuation">:</span> <span class="token function">local</span><span class="token punctuation">(</span><span class="token string">\'Apple Color Emoji\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">local</span><span class="token punctuation">(</span><span class="token string">\'Segoe UI Emoji\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">local</span><span class="token punctuation">(</span><span class="token string">\'Segoe UI Symbol\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">local</span><span class="token punctuation">(</span><span class="token string">\'Noto Color Emoji\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token property">unicode-range</span><span class="token punctuation">:</span> U+1F000-1F644<span class="token punctuation">,</span> U+203C-3299<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">body</span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> system-ui<span class="token punctuation">,</span> -apple-system<span class="token punctuation">,</span> Segoe UI<span class="token punctuation">,</span> Roboto<span class="token punctuation">,</span> Emoji<span class="token punctuation">,</span> Helvetica<span class="token punctuation">,</span> Arial<span class="token punctuation">,</span> sans-serif<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>下面附上我觉得不错的衬线字体和等宽字体的字体族设置代码：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="62845100065124650000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.font-serif {\n   font-family: Georgia, Cambria, \'Times New Roman\', Times, serif;\n}\n\n.font-mono {\n   font-family: Menlo, Monaco, Consolas, \'Liberation Mono\', \'Courier New\', monospace;\n}`, `62845100065124650000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.font-serif</span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> Georgia<span class="token punctuation">,</span> Cambria<span class="token punctuation">,</span> <span class="token string">\'Times New Roman\'</span><span class="token punctuation">,</span> Times<span class="token punctuation">,</span> serif<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.font-mono</span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> Menlo<span class="token punctuation">,</span> Monaco<span class="token punctuation">,</span> Consolas<span class="token punctuation">,</span> <span class="token string">\'Liberation Mono\'</span><span class="token punctuation">,</span> <span class="token string">\'Courier New\'</span><span class="token punctuation">,</span> monospace<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="math-通用字体族"><a href="#math-%E9%80%9A%E7%94%A8%E5%AD%97%E4%BD%93%E6%97%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>math 通用字体族</h3>\n<p>math 通用字体族的作用是方便在 Web 中展现数学公式。数学公式包含非常多的层次关系，需要特殊的字体进行支持。图 3-57 所示的就是一个相对比较复杂的数学公式。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-08-17-21-10-f5ae338d79a107b78b6113a07ae9ed48-9ac90.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 25.719267654751526%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsSAAALEgHS3X78AAAAu0lEQVQY02WPzQ6DIBCEff/X8epVvRjPGpWWVhOw9GBAEBXpBNOfpN+BzE52dpdoD3jvh2FI03RZFmitNYS1FjrLMkLIPM/btqE0xqzr6pxDGXVdV1UV5xxh9Akh2rbt+x7OOI5ohUkpbZqmLMu6rqHxMsaKoohsACPhxnEMF4ccx+EDu3NJkuR5DgfLcQ6ECyAV+TdKqWmaztvAmUcppTyn//on3/AHfJhcqFSKMX650od40ttda/Pf+QLvXxpE+VEMWgAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 08 17 21 10" title="" data-src="/static/2022-01-08-17-21-10-f5ae338d79a107b78b6113a07ae9ed48-fee1c.png" data-srcset="/static/2022-01-08-17-21-10-f5ae338d79a107b78b6113a07ae9ed48-a67b7.png 200w,\n/static/2022-01-08-17-21-10-f5ae338d79a107b78b6113a07ae9ed48-0b187.png 400w,\n/static/2022-01-08-17-21-10-f5ae338d79a107b78b6113a07ae9ed48-fee1c.png 800w,\n/static/2022-01-08-17-21-10-f5ae338d79a107b78b6113a07ae9ed48-9ac90.png 1147w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>有一种名为 MathML 的 XML 语言专门用来呈现富有层级关系的数学公式（对 MathML 的 <a href="https://www.zhangxinxu.com/wordpress/?p=8108" target="_blank" rel="nofollow noreferrer noopener">详细介绍</a>）。数学标签（如<code class="language-text">&lt;math&gt;</code>）背后使用的 font-family 就是 math 通用字体族。例如，Windows 操作系统中使用的字体是 Cambria Math，这种字体包括额外的数据信息（如 OpenType 数学表），可以帮助数学公式实现层次化的布局，如可以对一些数字和符号进行拉伸等字体变形。</p>\n<p>理论上在开发的时候，我们只要使用 MathML 语言进行数学公式书写就好了，无须关心背后的字体。但是，在实际操作中，Chrome 浏览器并不支持 MathML。为了兼容 Chrome 浏览器，我们需要对数学标签进行 CSS 重定义，此时就需要用到 math 通用字体族：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="1717187354639815400"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`math {\n   font-family: Cambria Math, Latin Modern Math;\n}`, `1717187354639815400`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">math</span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> Cambria Math<span class="token punctuation">,</span> Latin Modern Math<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>其中，Cambria Math 是 Windows 操作系统中的数学字体，Latin Modern Math 是 macOS 中的数学字体。</p>\n<p>其他数学字体还有很多，如 STIX Two Math、XITS Math、STIXMath、Libertinus Math、TeX Gyre Termes Math、Asana Math、Lucida Bright Math、Minion Math 等。不过这些字体在实际情况中一般都用不到，因此不必深究。</p>\n<h3 id="fangsong-通用字体族"><a href="#fangsong-%E9%80%9A%E7%94%A8%E5%AD%97%E4%BD%93%E6%97%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>fangsong 通用字体族</h3>\n<p>这个字体族来自中文字体“仿宋”，仿宋是介于宋体（衬线字体）和楷体（手写字体）之间的一种字体。和宋体相比，仿宋笔画的水平线通常是倾斜的，端点修饰较少，笔画宽度变化较小。一般非常正式的公告才会用到这个字体，平常开发项目中很少用到：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="44137596563965700000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`article {\n   font-family: fangsong;\n}`, `44137596563965700000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">article</span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> fangsong<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<h3 id="其他系统关键字"><a href="#%E5%85%B6%E4%BB%96%E7%B3%BB%E7%BB%9F%E5%85%B3%E9%94%AE%E5%AD%97" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>其他系统关键字</h3>\n<p>在未来的某个网站中可能会使用下面的系统关键字：</p>\n<ul>\n<li>ui-serif；</li>\n<li>ui-sans-serif；</li>\n<li>ui-monospace；</li>\n<li>ui-rounded。</li>\n</ul>\n<p>其中：</p>\n<ul>\n<li>font-family: ui-serif 表示使用和系统一样的衬线字体；</li>\n<li>font-family: ui-sans-serif 表示使用和系统一样的无衬线字体；</li>\n<li>font-family: ui-monospace 表示使用和系统一样的等宽字体；</li>\n<li>font-family: ui-rounded 表示使用和系统一样的圆形字体（边和角都很圆润的字体），如果系统中没有这样的字体，则不指向任何系统字体。</li>\n</ul>\n<p>目前 ui- 开头的这些系统字体只有 Safari 浏览器支持，不过在实际项目中也是可以用的，可以添加在传统的字体族关键字 serif、sans-serif 或 monospace 之前，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="12075104565229222000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`body {\n   font-family: system-ui, -apple-system, Segoe UI, Roboto, Emoji, Helvetica, Arial, ui-sans-serif, sans-serif;\n}\n\n.font-serif {\n   font-family: Georgia, Cambria, \'Times New Roman\', Times, ui-serif, serif;\n}\n\n.font-mono {\n   font-family: Menlo, Monaco, Consolas, \'Liberation Mono\', \'Courier New\', ui-monospace, monospace;\n}`, `12075104565229222000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">body</span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> system-ui<span class="token punctuation">,</span> -apple-system<span class="token punctuation">,</span> Segoe UI<span class="token punctuation">,</span> Roboto<span class="token punctuation">,</span> Emoji<span class="token punctuation">,</span> Helvetica<span class="token punctuation">,</span> Arial<span class="token punctuation">,</span> ui-sans-serif<span class="token punctuation">,</span> sans-serif<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.font-serif</span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> Georgia<span class="token punctuation">,</span> Cambria<span class="token punctuation">,</span> <span class="token string">\'Times New Roman\'</span><span class="token punctuation">,</span> Times<span class="token punctuation">,</span> ui-serif<span class="token punctuation">,</span> serif<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.font-mono</span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> Menlo<span class="token punctuation">,</span> Monaco<span class="token punctuation">,</span> Consolas<span class="token punctuation">,</span> <span class="token string">\'Liberation Mono\'</span><span class="token punctuation">,</span> <span class="token string">\'Courier New\'</span><span class="token punctuation">,</span> ui-monospace<span class="token punctuation">,</span> monospace<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="local-函数与系统字体的调用"><a href="#local-%E5%87%BD%E6%95%B0%E4%B8%8E%E7%B3%BB%E7%BB%9F%E5%AD%97%E4%BD%93%E7%9A%84%E8%B0%83%E7%94%A8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>local() 函数与系统字体的调用</h2>\n<p>从 IE9 浏览器开始，@font-face 规则开始支持使用 local() 函数调用系统安装的字体。使用 local() 函数主要有两大好处。</p>\n<ol>\n<li>\n<p>简化字体调用。例如我们要使用等宽字体，但是不同操作系统中的等宽字体不一样。为了兼容，我们需要一长串不同的字体名称作为 font-family 属性值，但是根本就记不住这么多字体，没关系，有了 local() 函数，使用这些字体的方法就一下子变得简单了：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="36368769933275136000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`@font-face {\n  font-family: Mono;\n  /* 单个单词可以不用加引号 */\n  src: local(\'Menlo\'), local(\'Monaco\'), local(\'Consolas\'), local(\'Liberation Mono\'), local(\'Courier New\'), local(\'monospace\');\n}\n\n.code {\n  font-family: Mono;\n}`, `36368769933275136000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token atrule"><span class="token rule">@font-face</span></span> <span class="token punctuation">{</span>\n  <span class="token property">font-family</span><span class="token punctuation">:</span> Mono<span class="token punctuation">;</span>\n  <span class="token comment">/* 单个单词可以不用加引号 */</span>\n  <span class="token property">src</span><span class="token punctuation">:</span> <span class="token function">local</span><span class="token punctuation">(</span><span class="token string">\'Menlo\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">local</span><span class="token punctuation">(</span><span class="token string">\'Monaco\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">local</span><span class="token punctuation">(</span><span class="token string">\'Consolas\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">local</span><span class="token punctuation">(</span><span class="token string">\'Liberation Mono\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">local</span><span class="token punctuation">(</span><span class="token string">\'Courier New\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">local</span><span class="token punctuation">(</span><span class="token string">\'monospace\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.code</span> <span class="token punctuation">{</span>\n  <span class="token property">font-family</span><span class="token punctuation">:</span> Mono<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>在自定义字体场景下提高性能。例如我们希望在各个平台都能使用 Roboto 字体，则可以像下面这样重新定义下 Roboto 字体：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="25124716768718012000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`@font-face {\n  font-family: Roboto;\n  font-style: normal;\n  font-weight: 400;\n  src: local(\'Roboto\'), local(\'Roboto-Regular\'), url(./Roboto.woff2) format(\'woff2\');\n}`, `25124716768718012000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token atrule"><span class="token rule">@font-face</span></span> <span class="token punctuation">{</span>\n  <span class="token property">font-family</span><span class="token punctuation">:</span> Roboto<span class="token punctuation">;</span>\n  <span class="token property">font-style</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>\n  <span class="token property">font-weight</span><span class="token punctuation">:</span> 400<span class="token punctuation">;</span>\n  <span class="token property">src</span><span class="token punctuation">:</span> <span class="token function">local</span><span class="token punctuation">(</span><span class="token string">\'Roboto\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">local</span><span class="token punctuation">(</span><span class="token string">\'Roboto-Regular\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./Roboto.woff2<span class="token punctuation">)</span></span> <span class="token function">format</span><span class="token punctuation">(</span><span class="token string">\'woff2\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>此时 local() 函数可以让已经安装了 Roboto 字体的用户无须发起额外的 Roboto 字体请求，优化了这部分用户的使用体验。</p>\n</li>\n</ol>\n<h2 id="unicode-range-属性的详细介绍"><a href="#unicode-range-%E5%B1%9E%E6%80%A7%E7%9A%84%E8%AF%A6%E7%BB%86%E4%BB%8B%E7%BB%8D" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>unicode-range 属性的详细介绍</h2>\n<p>我们在使用 @font-face 规则自定义字体的时候，还可以通过使用 unicode-range 属性来决定自定义的字体作用在哪些字符上。例如设置 emoji 字体的作用范围：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="86043310789181310000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`@font-face {\n   font-family: Emoji;\n   src: local(\'Apple Color Emoji\'), local(\'Segoe UI Emoji\'), local(\'Segoe UI Symbol\'), local(\'Noto Color Emoji\');\n   unicode-range: U+1F000-1F644, U+203C-3299;\n}`, `86043310789181310000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css{4}"\n              >\n                <span class="gatsby-code-button-language">css{4}</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight has-highlighted-lines" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token atrule"><span class="token rule">@font-face</span></span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> Emoji<span class="token punctuation">;</span>\n   <span class="token property">src</span><span class="token punctuation">:</span> <span class="token function">local</span><span class="token punctuation">(</span><span class="token string">\'Apple Color Emoji\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">local</span><span class="token punctuation">(</span><span class="token string">\'Segoe UI Emoji\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">local</span><span class="token punctuation">(</span><span class="token string">\'Segoe UI Symbol\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">local</span><span class="token punctuation">(</span><span class="token string">\'Noto Color Emoji\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="gatsby-highlight-code-line">   <span class="token property">unicode-range</span><span class="token punctuation">:</span> U+1F000-1F644<span class="token punctuation">,</span> U+203C-3299<span class="token punctuation">;</span></span><span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>上面演示了 unicode-range 属性的基本用法，下面详细展开讲一下 unicode-range 属性的值和语法。</p>\n<p>unicode-range 属性值的写法是“U+”加上目标字符的 Unicode 编码或者 Unicode 范围。初始值为 U+0-10FFFF，也就是所有字符集。其语法如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="68956853154109420000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 支持的值 */\nunicode-range: U+26; /* 单个字符编码 */\nunicode-range: U+0025-00FF; /* 字符编码区间 */\nunicode-range: U+4??; /* 通配符 */\nunicode-range: U+0025-00FF, U+4??; /* 多个值 */`, `68956853154109420000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 支持的值 */</span>\n<span class="token property">unicode-range</span><span class="token punctuation">:</span> U+26<span class="token punctuation">;</span> <span class="token comment">/* 单个字符编码 */</span>\n<span class="token property">unicode-range</span><span class="token punctuation">:</span> U+0025-00FF<span class="token punctuation">;</span> <span class="token comment">/* 字符编码区间 */</span>\n<span class="token property">unicode-range</span><span class="token punctuation">:</span> U+4??<span class="token punctuation">;</span> <span class="token comment">/* 通配符 */</span>\n<span class="token property">unicode-range</span><span class="token punctuation">:</span> U+0025-00FF<span class="token punctuation">,</span> U+4??<span class="token punctuation">;</span> <span class="token comment">/* 多个值 */</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>有些读者可能不知道 U+4?? 是什么意思，? 可以理解为占位符，表示 0-F 的值，因此 U+4?? 表示从 U+400 到 U+4FF。</p>\n<p>在前端领域，使用 Unicode 编码显示字符在各种语言中都是可以的，不过前缀各有不同。</p>\n<ol>\n<li>在 HTML 中，字符输出可以使用 &#x26;#x 加上 Unicode 编码。</li>\n<li>在 JavaScript 文件中，为了避免中文乱码需要转义，应使用 \\u 加上 Unicode 编码。</li>\n<li>在 CSS 文件中，如 CSS 伪元素的 content 属性，就直接使用 \\ 加上对应字符的 Unicode 编码值。</li>\n<li>unicode-range 属性则是使用 U+ 加上 Unicode 编码。</li>\n</ol>\n<h3 id="unicode-range-属性常用的-unicode-编码值"><a href="#unicode-range-%E5%B1%9E%E6%80%A7%E5%B8%B8%E7%94%A8%E7%9A%84-unicode-%E7%BC%96%E7%A0%81%E5%80%BC" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>unicode-range 属性常用的 Unicode 编码值</h3>\n<p>对中文用户而言，最常用的 Unicode 编码值有下面这些。</p>\n<ul>\n<li>基本二次汉字：[0x4e00, 0x9fa5]（或十进制[19968, 40869]）。</li>\n<li>数字：[0x30, 0x39]（或十进制[48, 57]）。</li>\n<li>小写字母：[0x61, 0x7a]（或十进制[97, 122]）。</li>\n<li>大写字母：[0x41, 0x5a]（或十进制[65, 90]）。</li>\n</ul>\n<p>如果想获取某一个具体字符的 Unicode 编码值，例如 \\263a 编码对应的笑脸字符 ☺，可以使用下面的 JavaScript 代码：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="23647750644004594000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`U = \'☺\'.codePointAt().toString(16);\n// U 的值是 263a`, `23647750644004594000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token constant">U</span> <span class="token operator">=</span> <span class="token string">\'☺\'</span><span class="token punctuation">.</span><span class="token function">codePointAt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">// U 的值是 263a</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>需要注意的是，IE 浏览器并不支持 codePointAt() 方法，要想兼容 IE 浏览器，需要先引入一段 Polyfill 代码。</p>\n<h3 id="结语"><a href="#%E7%BB%93%E8%AF%AD" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>结语</h3>\n<p>unicode-range 属性还是很实用的，大家一定要重视。当你遇到中文排版问题，或者需要对某些字符进行精修，一定要想到 unicode-range 属性，说不定爱上 CSS 这门语言就是从 unicode-range 属性开始的。</p>\n<h2 id="woffwoff2-字体"><a href="#woffwoff2-%E5%AD%97%E4%BD%93" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>woff/woff2 字体</h2>\n<p>为了方便在网页中高效使用自定义字体，woff 和 woff2 应运而生，它们是两个专门用在 Web 中的字体。其中，woff 字体在 2012 年 12 月被 WorldWide Web Consortium（W3C）推荐使用，IE9+ 浏览器支持该字体。woff2 字体最早在 2013 年 7 月的 Chrome Canary 版本上就可以使用了，发展到现在，几乎已经成为自定义图标字体使用的标准配置，目前浏览器对它的兼容性已经相当不错了。</p>\n<h3 id="兼容性-4"><a href="#%E5%85%BC%E5%AE%B9%E6%80%A7-4" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>兼容性</h3>\n<p>woff2 字体的兼容性如表 3-9 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-08-17-55-19-96f8114450ac9a20941dd75e52f900c0-9ac90.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 29.032258064516125%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsSAAALEgHS3X78AAABQ0lEQVQY0x2KO2/CMACE89s7dELqwtC9Szt0okOhqkAIVUKlQIEEEgjk4TiO7TyIwY+QR6PecLr77rS6rpumiTB2XJDnDABoWfZ6s12u9OlsHoT4d21Mvxcbw2wPvg/byfNh8y9N8rxWeeuFvCjBhLiUTSUkrwpeKNnypmJSsEKypmTimos2C1Gqq+C5Bgh4tClMguFy35sdZGTQ4dP1vJ989MDkGWXo7hPBCMxc9DBGeebfeOKQd9Mf38RZMyPYtTDjeLTYDZZ7FVi7TreIDy8//a3+mp7x/RCENJw7oDPyLjlUPNZPb/2vwZURjSBbJk5KXegbUWBicgLIxpFDoAWhTcJDGqwTfAp9g3orEh0RtLyj6R31EFoaRqeqTBPqZomvBEFwLzlOYy+mXnVL2io4ZeeAEqcqs5a3t7pKyyK5qfgPAkFBi80RC3UAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 08 17 55 19" title="" data-src="/static/2022-01-08-17-55-19-96f8114450ac9a20941dd75e52f900c0-fee1c.png" data-srcset="/static/2022-01-08-17-55-19-96f8114450ac9a20941dd75e52f900c0-a67b7.png 200w,\n/static/2022-01-08-17-55-19-96f8114450ac9a20941dd75e52f900c0-0b187.png 400w,\n/static/2022-01-08-17-55-19-96f8114450ac9a20941dd75e52f900c0-fee1c.png 800w,\n/static/2022-01-08-17-55-19-96f8114450ac9a20941dd75e52f900c0-9ac90.png 1147w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>woff2 字体最大的优点在于传输的体积小，借用 Google Chrome 官方的话：新的 woff 2.0 Web 字体压缩格式平均要比 woff 1.0 小 30%以上（某些情况下可以达到 50%）。图 3-58 展示了 woff 和 woff2 字体大小对比情况。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-08-17-56-06-4b9b0b0af0c74fa5deb5ae1655198dcf-c4455.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 79.2824074074074%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsSAAALEgHS3X78AAADKklEQVQ4y62T2W/bRhCH+c/3eGgLtGmb1I4cX5J8SrQO6qIk6qYoURSpW7JkxbbsNrYbO0GQh8b4utwEBgr0pUAX+DA7s+Tsb2dnlffv3jMejfnw7gP39w/cv33g9uaW/zo+fvjIp78eUYpuFdVIsls8Yid/wGZ2j2hNQ3MLqHaGmJMj1slKG22liPwLajtN1NRIdQooulMmaiRItHMk27oMpp0i28VDXuX3eJndZSMXYi21zYEZ59jSOLKSkmPfNpMc1uPy/0zXQOnO+sQLKTKNPPFKGq0mFloiqfB1yyAlfD+mNw16l2Pc89E/8ATWxKHWb9I59VD8zAkzS7iuErVSYucE+40TufuhVJQUx9JQxVqgEOaX3CbP9a0nfhV+sBbhyExIlMnylKSexuy2KDTLVOw6jV6LcrtO1TbJ1HQRa2CYVc7vrrm6f8Pq7R9P+P7k/BRvNmB+tUTxs6pmivXiLsHqMZvlfV4Wg9JulMLsNVQ2jDAHzTjP0gG+Un/k29jPfBN7Ju3XJz/xQijdLO3zSqCMFlNULYbl2hSbFaGqgTWwqbQb2MMuesWgLFRXWnXyjZJUdH1/I62cP9wwWs5wJh7zlVAYa2fQbJ21vK8wwlb5gI1i+Mlulw7YLh+yJXb36+nX7bvkc37QfpN8n3xBwAjJ0/ko/fmIRE6TaqqOiem1aI8dmj2b1tCh1e8IhVWqrkm9a1HzLJZ3KxZvLljcXHB2c8no9RRXdMv0co7i916knCCgh9gRvbdV3Gc9t8taZod1QSAXFH0YJJANSn+/diJrtV4IilqHpN0RJ/Dj8pYHFxO8syGGV6PcrZOxCngXY8bXcwarKcOrGZPfF4yuT2WsJ9bMWYfGzP5Ch/bcpSr6sDntoLRmXemE88fs5SOoFY2MVyLe0Uk6eRIdH/0JP5Zyi6QFn62BJr5JWjnyXgWlPBK1GbfI9csURkLl2CQinleoHpUN7rfNZ06+oMpH4OPPQ7WovKxsr0ROoPA/D+XT46OcnC1f0/X6zBdn3N79yWq1omU72I7HdDajNxjSdXs4rui3xZLBULzj3gCn6zIYTWSOR5Hrb45pMmZ4nddJAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 08 17 56 06" title="" data-src="/static/2022-01-08-17-56-06-4b9b0b0af0c74fa5deb5ae1655198dcf-fee1c.png" data-srcset="/static/2022-01-08-17-56-06-4b9b0b0af0c74fa5deb5ae1655198dcf-a67b7.png 200w,\n/static/2022-01-08-17-56-06-4b9b0b0af0c74fa5deb5ae1655198dcf-0b187.png 400w,\n/static/2022-01-08-17-56-06-4b9b0b0af0c74fa5deb5ae1655198dcf-fee1c.png 800w,\n/static/2022-01-08-17-56-06-4b9b0b0af0c74fa5deb5ae1655198dcf-c4455.png 864w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>如果你的项目无须兼容 IE8 浏览器，直接使用 woff2 和 woff 字体就可以了：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="36383768120361525000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`@font-face {\n   font-family: MyFont;\n   src: url(myfont.woff2) format(\'woff2\'), url(myfont.woff) format(\'woff\');\n}`, `36383768120361525000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token atrule"><span class="token rule">@font-face</span></span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> MyFont<span class="token punctuation">;</span>\n   <span class="token property">src</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>myfont.woff2<span class="token punctuation">)</span></span> <span class="token function">format</span><span class="token punctuation">(</span><span class="token string">\'woff2\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>myfont.woff<span class="token punctuation">)</span></span> <span class="token function">format</span><span class="token punctuation">(</span><span class="token string">\'woff\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>如果你的字体文件不是很大，也可以直接以 Base64 的形式将 woff 或 woff2 字体内嵌在 CSS 中，加载体验比外链字体时的加载体验要好一些，语法是类似的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="60067349817088030000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`@font-face {\n   font-family: MyFont;\n   src: url(\'data:font/woff2;base64,...\') format(\'woff2\'), url(\'data:font/woff;base64,...\') format(\'woff\');\n}`, `60067349817088030000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token atrule"><span class="token rule">@font-face</span></span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> MyFont<span class="token punctuation">;</span>\n   <span class="token property">src</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>\'data:font/woff2;base64,...\'<span class="token punctuation">)</span></span> <span class="token function">format</span><span class="token punctuation">(</span><span class="token string">\'woff2\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>\'data:font/woff;base64,...\'<span class="token punctuation">)</span></span> <span class="token function">format</span><span class="token punctuation">(</span><span class="token string">\'woff\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>起初我以为 woff2 和 woff 字体无法像 OpenType 字体（扩展名 otf）那样可以包含其他字体信息，也就是 woff2 和 woff 字体无法配合 font-feature-settings 属性呈现出不同的字体特征效果，结果我发现并不是这样的。woff2 和 woff 字体也是可以包含其他字体特征信息的，不过具体的实现细节我还不清楚。</p>\n<p>另外，woff2 字体没有必要再开启 GZIP，因为这个字体文本本身就是压缩过的。</p>\n<p>最后说一下 woff 字体的 MIME type 值。关于这一点有点小争议，拿 woff2 字体举例，Google 使用的是 font/woff2，而 W3C 则推荐使用 application/font-woff2。我个人的建议是，在 Web 中使用的时候采用 font/woff2，在服务器端进行 MIME type 配置的时候采用 application/font-woff2。</p>\n<p>为了方便大家学习，专门整理了一个关于各种字体类型及其用法的表，如下表所示</p>\n<table>\n<thead>\n<tr>\n<th align="left">格式</th>\n<th align="left">文件拓展名</th>\n<th align="left">MIME Type</th>\n<th align="left">补充信息</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align="left">Web Open Font Format 2</td>\n<td align="left">.woff2</td>\n<td align="left">font/woff2</td>\n<td align="left">Web 字体加载首选</td>\n</tr>\n<tr>\n<td align="left">Web Open Format</td>\n<td align="left">.woff</td>\n<td align="left">font/woff</td>\n<td align="left">Web 字体加载备选</td>\n</tr>\n<tr>\n<td align="left">TrueType</td>\n<td align="left">.ttf</td>\n<td align="left">font/ttf</td>\n<td align="left">没有在 Web 中使用的理由，请转换成 woff2 字体</td>\n</tr>\n<tr>\n<td align="left">OpenType</td>\n<td align="left">.otf</td>\n<td align="left">font/otf</td>\n<td align="left">支持更高级的排版功能，如小型大写字母、上标下标、连字等。但是由于缺乏包含高级排版的中文字体，因此中文场景没有使用的理由</td>\n</tr>\n<tr>\n<td align="left">Embedded OpenType</td>\n<td align="left">.eot</td>\n<td align="left">application/vnd.ms-fontobject</td>\n<td align="left">只有需要兼容 IE6 ~ IE8 浏览器的时候才用到</td>\n</tr>\n</tbody>\n</table>\n<h2 id="font-display-属性与自定义字体的加载渲染"><a href="#font-display-%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%87%AA%E5%AE%9A%E4%B9%89%E5%AD%97%E4%BD%93%E7%9A%84%E5%8A%A0%E8%BD%BD%E6%B8%B2%E6%9F%93" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>font-display 属性与自定义字体的加载渲染</h2>\n<p>假设我们定义一个名为 MyFont 的自定义字体，并且采用 url() 函数外链的方式引入，代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="46111461279889240000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`@font-face {\n   font-family: MyFont;\n   src: url(myfont.woff2) format(\'woff2\');\n}\n\nbody {\n   font-family: MyFont;\n}`, `46111461279889240000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token atrule"><span class="token rule">@font-face</span></span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> MyFont<span class="token punctuation">;</span>\n   <span class="token property">src</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>myfont.woff2<span class="token punctuation">)</span></span> <span class="token function">format</span><span class="token punctuation">(</span><span class="token string">\'woff2\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">body</span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> MyFont<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>这时浏览器的字体加载行为表现为，应用 MyFont 字体的文本会先被隐藏，直到字体加载结束才会显示，但是这个隐藏最多持续 3s，3s 后字体仍未加载结束则会使用其他字体代替。这种加载体验利弊参半。</p>\n<p>如果我们使用自定义字体的目的是实现图标字体功能，则这种加载行为就比较合适。因为渲染出来的小图标和小图标使用的真正字符往往外形差异巨大，那些用户看不懂的字符需要被隐藏起来，以此提升视觉体验。但是，如果我们使用自定义字体来呈现普通文本内容，则这种加载行为就不太合适。因为文字内容应该第一时间呈现给用户，而不应该出现长时间的空白，内容绝对比样式更重要。</p>\n<p>由于英文字体体积小，最多几百 KB，因此自定义字体的使用非常普遍。自定义字体加载时候空白的问题是一个普遍的现象，在这种背景下，font-display 属性出现了，font-display 属性可以控制字体加载和文本渲染之间的时间线关系。</p>\n<p>在对 font-display 属性值展开介绍之前，我先来讲一下字体显示时间线。</p>\n<h3 id="字体显示时间线"><a href="#%E5%AD%97%E4%BD%93%E6%98%BE%E7%A4%BA%E6%97%B6%E9%97%B4%E7%BA%BF" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>字体显示时间线</h3>\n<p>字体显示时间线开始于浏览器尝试下载字体的那一刻，整个时间线分为 3 个时段，浏览器会在这 3 个时段让元素表现出不同的字体渲染行为。</p>\n<ul>\n<li>字体阻塞时段：如果未加载字体，任何试图使用它的元素都必须以不可见的方式渲染后备字体；如果在此期间字体成功加载，则正常使用它。</li>\n<li>字体交换时段：如果未加载字体，任何试图使用它的元素都必须以可见的方式渲染后备字体；如果在此期间字体成功加载，则正常使用它。</li>\n<li>字体失败时段：如果未加载字体，则浏览器将其视为加载失败，并使用正常字体进行回退渲染。</li>\n</ul>\n<p>font-display 的属性值就是围绕字体显示时间线展开的。</p>\n<h3 id="正式语法"><a href="#%E6%AD%A3%E5%BC%8F%E8%AF%AD%E6%B3%95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>正式语法</h3>\n<p>font-display 的语法如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="22676546776818872000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`font-display: [auto | block | swap | fallback | optional];`, `22676546776818872000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">font-display</span><span class="token punctuation">:</span> [auto | block | swap | fallback | optional]<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>属性值的含义如下所示。</p>\n<ul>\n<li>auto：字体显示策略由浏览器决定，大多数浏览器的字体显示策略类似 block。</li>\n<li>block：字体阻塞时段较短（推荐 3s），字体交换时段无限。此值适合图标字体场景。</li>\n<li>swap：字体阻塞时段极短（不超过 100ms），字体交换时段无限。此值适合用在小段文本，同时文本内容对页面非常重要的场景。</li>\n<li>fallback：字体阻塞时段极短（不超过 100ms），字体交换时段较短（推荐 3s）。此值适合用于大段文本，例如文章正文，同时对字体效果比较看重的场景，例如广告页面、个人网站等。</li>\n<li>optional：字体阻塞时段极短（不超过 100ms），没有字体交换时段。此值的作用可以描述为，如果字体可以瞬间被加载（例如已经被缓存了），则浏览器使用该字体，否则使用回退字体。optional 是日常 Web 产品开发更推荐的属性值，因为无论任何时候，网页内容在用户第一次访问时快速呈现是最重要的，不能让用户等待很长时间后再看到你认为的完美效果。</li>\n</ul>\n<p>总结一下，如果你的自定义字体是用于字体呈现，就使用 optional，否则使用默认值。至于 swap 和 fallback，如果对你而言自定义字体的效果很重要，同时你能忍受页面字体突然变化的问题，就可以使用下面的设置：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="27969795658900165000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`@font-face {\n   font-family: MyFont;\n   src: url(myfont.woff2) format(\'woff2\');\n   font-display: swap;\n}\n\nbody {\n   font-family: MyFont;\n}`, `27969795658900165000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token atrule"><span class="token rule">@font-face</span></span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> MyFont<span class="token punctuation">;</span>\n   <span class="token property">src</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>myfont.woff2<span class="token punctuation">)</span></span> <span class="token function">format</span><span class="token punctuation">(</span><span class="token string">\'woff2\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token property">font-display</span><span class="token punctuation">:</span> swap<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">body</span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> MyFont<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="其他小的知识点"><a href="#%E5%85%B6%E4%BB%96%E5%B0%8F%E7%9A%84%E7%9F%A5%E8%AF%86%E7%82%B9" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>其他小的知识点</h3>\n<p>网上有不少资料会提到 FOIT（Flash of Invisible Text）、FOUT（Flashof Unstyled Text）和 FOFT（Flash of Faux Text）等概念。需要注意的是，千万别拿这些概念去理解 font-display 属性，W3C 官方没有这样的概念。这些是十几年前的开发者基于 font-display 属性外在表现提出的概念，请使用官网提供的字体显示时间线来理解 font-display 属性。</p>\n<p>如果自定义字体的大小在 30 KB 以内，建议直接用 Base64 将其内联在页面中。不过只有 woff2 字体采取内联处理，woff 字体依旧采用 url() 函数外链体验最佳，因为此时现代浏览器中的字体都是瞬间渲染，根本无须使用 font-display 属性进行字体加载优化。示意如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="80670966594119010000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`@font-face {\n   font-family: MyFont;\n   src: url(\'data:font/woff2;base64,...\') format(\'woff2\'), url(myfont.woff) format(\'woff\');\n}`, `80670966594119010000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token atrule"><span class="token rule">@font-face</span></span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> MyFont<span class="token punctuation">;</span>\n   <span class="token property">src</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>\'data:font/woff2;base64,...\'<span class="token punctuation">)</span></span> <span class="token function">format</span><span class="token punctuation">(</span><span class="token string">\'woff2\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>myfont.woff<span class="token punctuation">)</span></span> <span class="token function">format</span><span class="token punctuation">(</span><span class="token string">\'woff\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>我们还可以使用 <code class="language-text">&lt;link rel=&quot;preload&quot;&gt;</code> 对字体进行预加载，从而提高字体的加载体验：</p>\n<h1 id="字符单元的中断与换行"><a href="#%E5%AD%97%E7%AC%A6%E5%8D%95%E5%85%83%E7%9A%84%E4%B8%AD%E6%96%AD%E4%B8%8E%E6%8D%A2%E8%A1%8C" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>字符单元的中断与换行</h1>\n<p>CSS 这门语言在文字排版这一块的功能是非常强大的，例如有大量的 CSS 特性可以对字符单元的中断与换行进行精确控制。如果你想要成为文字排版的高手，本节的内容不容错过。本节会大量出现“CJK 文本”这个词，其中 CJK 是 Chinese/Japanese/Korean 的缩写，因此 CJK 文本指的是中文/日文/韩文这几种文字。</p>\n<p>字符单元默认的中断与换行规则如下。</p>\n<ul>\n<li>Space 普通空格、Enter（回车）空格和 Tab（制表符）空格这 3 种空格无论怎样组合都会合并为单个普通空格。</li>\n<li>文字可以在 CJK 文本、普通空格和短横线连字符处换行，连续英文单词和数字不换行。</li>\n</ul>\n<p>上面的排版规则有时候并不能实现我们想要的排版效果，怎么办呢？此时可以使用专门的 CSS 属性对排版进行控制。</p>\n<p>例如，我们不希望 Enter（回车）空格合并为普通空格，想保留换行效果，就可以使用 white-space 属性进行设置。这个在 CSS 世界一书已经详细介绍过了，这里不再展开讲解。又如，我们希望 CJK 文本不换行，但是空格处正常换行，怎么办呢？这就是接下来要介绍的 CSS 新特性。</p>\n<h2 id="使用-keep-all-属性值优化中文排版"><a href="#%E4%BD%BF%E7%94%A8-keep-all-%E5%B1%9E%E6%80%A7%E5%80%BC%E4%BC%98%E5%8C%96%E4%B8%AD%E6%96%87%E6%8E%92%E7%89%88" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>使用 keep-all 属性值优化中文排版</h2>\n<p>word-break 属性语法如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="80056222940151270000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`word-break: normal | break-all | keep-all | break-word;`, `80056222940151270000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">word-break</span><span class="token punctuation">:</span> normal | break-all | keep-all | break-word<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>不同的属性值对应不同的换行规则。keep-all 这个属性值可以让 CJK 文本不换行排版，同时又不影响非 CJK 文本的排版行为。</p>\n<p>CSS 中有些属性见得少、用得少，并不是因为它们不实用，而是因为知道的人少。keep-all 就是一个典型代表，其看起来是一个鲜为人知的属性值，但是在中文排版领域非常强大，一旦遇到合适的使用场景，效果就非常理想。</p>\n<p>中文虽然是一个字一个字拼起来的，但是有些文字的组合是固定的，不建议断开，如人的姓名、一些固定的词组等。然而默认的排版规则会断开这些姓名和词组，keep-all 属性值可以用来优化这个排版细节。我们看一个例子：有一个表格需要在移动端显示，而移动端设备的宽度是有限的，因此，如果我们不做任何处理，排版效果就会是图 3-59 所示的这样。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-09-10-56-26-2a96b9a0fe4c5be40afc843ab59169af-c384c.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 469px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 87.42004264392324%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAIAAABSJhvpAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACqUlEQVQ4y6VTW3eaQBDm//+P9qE/oCenSduk0RijooIgChIQuQUjl0X2wu7SQduHPrQvnTNnmf2+mVlgvlXEP4xzUVVivRZJIjAWmiaiSFiWQEh0HfDKX8uAzjIxmQjbFo7Tl+m6OBwEpT17MUX2mf3mGoDJaySlrEqZJLKqZJrIohDHTKAKmgIPOeAKZZDWwcraPrjGHCgpmegIoTSMKGvbruPwLrJruSC0BQRc2YfZ3bfHIDrau+DL3Y/b74MwyZ9G0+HLInCDcqqd3lGOaJzm+0P66kVhmucVPZXkVGLFD+IPHz8ZG7dA5OFxNNfW6MzuH4Y3tw9BkJSIQiVq+POLent3//nmq7pcn0mXV6SoiQIt9ZV1iN8xk8nbMa8wpHr7aOeFx7wuEKubFmHeUIlZB95QAUiNeXmmyvup9H0/L6oKnYvLo6wbz/PzPG9bAWBVVXlRZMcjrMAWRQkOVp+xkqZHz3uF3xBFiTqbmua6bohpGJ7ndV0XhvF2YzmOo2m6sVotlwtd03V9tVgs8rxUkvQIOzghDKNVjy5RjV9dd+M470URx2mWvfmep+vayljN5wvH3himud3a/clJmu33PiYkSVLTNNaWBWgYRadDUBWFF4RLVTWM1fh5rM5mGJN+yqIXAYNRpdmpRIjB59VA0QbTCuETqnkYs+0OoaahLWYct6JpBeXgkoAoaNsQpoA2QBWXufc6uWzbtuWES2jD3jIWJ8xx2dZh5po6LrUdWpYUtETbX9ru5SZ+u7wggvchiDE/yc1GmqYcP0vHlnNV7nY92HV/XAx5rRN93VXn4qJUXtc8jrnniTjpb4jvi7cM1Kp0/2HK43C0trb7/cF2XELIZKq6rqcuNMCHT88vU3Uym8/U5WAwGo+nlmUPhqOZOoepz+bLnwKqs0GvgfpWAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 09 10 56 26" title="" data-src="/static/2022-01-09-10-56-26-2a96b9a0fe4c5be40afc843ab59169af-c384c.png" data-srcset="/static/2022-01-09-10-56-26-2a96b9a0fe4c5be40afc843ab59169af-9bab7.png 200w,\n/static/2022-01-09-10-56-26-2a96b9a0fe4c5be40afc843ab59169af-a5cf9.png 400w,\n/static/2022-01-09-10-56-26-2a96b9a0fe4c5be40afc843ab59169af-c384c.png 469w" data-sizes="(max-width: 469px) 100vw, 469px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>“会议人员”里的“会议”是一个词，“人员”也是一个词，但是标题那里“人”和“员”两个字断开了，这种中断就非常不利于阅读。“会议人员”标题下方的列表项中的“王二麻子”是一个人名，结果也断开了，这种中断也是可以优化的排版细节。</p>\n<p>这种情况下，使用 keep-all 属性值就可以保护我们的中文词组不被断开。完整的代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="67958190493785285000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<table>\n   <thead>\n      <tr>\n         <th>会议时间</th>\n         <th>会议地点</th>\n         <th>会议人员(3)</th>\n         <th>会议内容</th>\n      </tr>\n   </thead>\n   <tbody>\n      <tr>\n         <td>2021 年 2 月 28 日</td>\n         <td>6 号楼 3 楼伏羲会议室</td>\n         <td class=&quot;keep-all&quot;>张三 李四 王二麻子</td>\n         <td>讨论字符单元的中断与换行，以及如何组织内容让表达效果最好</td>\n      </tr>\n   </tbody>\n</table>\n\n<style>\n   th,\n   td.keep-all {\n      word-break: keep-all;\n   }\n</style>`, `67958190493785285000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>thead</span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span>\n         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">></span></span>会议时间<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">></span></span>\n         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">></span></span>会议地点<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">></span></span>\n         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">></span></span>会议人员(3)<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">></span></span>\n         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">></span></span>会议内容<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>thead</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tbody</span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span>\n         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>2021 年 2 月 28 日<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>\n         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>6 号楼 3 楼伏羲会议室<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>\n         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>keep-all<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>张三 李四 王二麻子<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>\n         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>讨论字符单元的中断与换行，以及如何组织内容让表达效果最好<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tbody</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">></span></span>\n\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n   <span class="token selector">th,\n   td.keep-all</span> <span class="token punctuation">{</span>\n      <span class="token property">word-break</span><span class="token punctuation">:</span> keep-all<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>给表头还有“会议人员”所在的这一列的单元格设置了 word-break: keep-all 声明，此时的排版效果和阅读体验就得到了提升，如图 3-60 所示的箭头所指位置的效果。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-09-11-03-57-ed76ac2722507be4927b359a913d7a8e-f4ef4.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 705px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 58.29787234042553%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACH0lEQVQoz3VS6XKjMAzm/d9nj2bapFdCQqFcgYWEpCStyxVCuIxtbFilszO7f1ajkT9Zn0a2JKnnAxegIwDGhy93ZL0QYhjHUYgRTtZg9oFYlPTDlXZl9gJUyvI6PZXJ6XIq6hRwXibZ5VwRzw8U1djuj5a3a5ZaHaJzy5IrswR+2dCyYZLj+D8n0283E+XV1HT75u7++4+J6e7itJAVVdXXR5RdKlJ1Yh+iyd3D7H5xc/uYl11ZU+lckktNAYEtKlp3vGrYqcAdG6MkfzvGNRZFReqWN5g3nagxr9oe7DW5bjuMcV03HaFxktm2eXj/6CiHG4w7zjmh9FxUCKHNduu6v1zP2+32YRg2TSslSbZer33fi9PsnBeKstRNmzERbDemZXUd5Iv3D2QYhm7opmkZurZSXmx73TSNlKYnB/7t+ZT1h+O7LMuu7xPGg42vqVqLMaXQ5lTVXlTt1TRNx7HnC3k6nZ2LQvr8TKIoopRABd/fqJqKPlFHGLxzFwSGZaIsP+WF6zphePB8LwDZBZZlXS6ldKnatsWEEJjbZrtHUQzjhQ5ArGja0nHxq46SDMWJ4AIKsB76IIZhhF5IlHFIAwtKKIeahPYAei562Bzaw3rQtwMj7IsAoZ7SKwBXGv8jwzD8xYyNnP/j/4HXZHmp2I77djjESbJ60Tbb4OFxPrmdTe+fnp5liM6XCoxgpahwczd7fF6sHp4WUZz8BhfEj2SraT8nAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 09 11 03 57" title="" data-src="/static/2022-01-09-11-03-57-ed76ac2722507be4927b359a913d7a8e-f4ef4.png" data-srcset="/static/2022-01-09-11-03-57-ed76ac2722507be4927b359a913d7a8e-3d360.png 200w,\n/static/2022-01-09-11-03-57-ed76ac2722507be4927b359a913d7a8e-f7ff6.png 400w,\n/static/2022-01-09-11-03-57-ed76ac2722507be4927b359a913d7a8e-f4ef4.png 705w" data-sizes="(max-width: 705px) 100vw, 705px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/x5s6y2?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>keep-all 属性值的兼容性非常好，IE 浏览器也完全支持，之所以这个属性值不常用，完全是因为现代浏览器对其支持得较晚，普遍在 2015 年之后才开始支持。当然，现在大家可以放心使用这一属性值，因为就算浏览器不支持，也会采用默认的中文排版效果。</p>\n<h2 id="break-all-属性值的问题和-line-break-属性"><a href="#break-all-%E5%B1%9E%E6%80%A7%E5%80%BC%E7%9A%84%E9%97%AE%E9%A2%98%E5%92%8C-line-break-%E5%B1%9E%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>break-all 属性值的问题和 line-break 属性</h2>\n<p>与鲜为人知的 keep-all 属性值相比，word-break 属性的另外一个属性值 break-all 可就广为人知了，其经常会被用到。</p>\n<p>测试工程师喜欢输入一些连续的英文和数字进行内容测试，就会出现连续英文字符溢出容器的情况。这个时候设置 word-break: break-all 声明不仅解决了字符溢出问题，同时排版看起来也更整齐了，因此 break-all 属性值深受广大开发者喜爱，甚至有开发者会这样夸张地设置：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="29420905518353100000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`* {\n   word-break: break-all;\n}`, `29420905518353100000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">*</span> <span class="token punctuation">{</span>\n   <span class="token property">word-break</span><span class="token punctuation">:</span> break-all<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>这种通配符设置的做法确实有点过了，要知道应用 word-break: break-all 声明其实是为了少数场景下可能出现的排版问题，使用这种做法牺牲了大多数场景的阅读体验，并不是上佳之选。我们来看一个例子，有两段文字，第二段文字应用了 word-break: break-all 声明：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="4197256987246467000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<style>\n   p {\n      width: 150px;\n      padding: 10px;\n      border: solid deepskyblue;\n   }\n\n   .break-all {\n      word-break: break-all;\n   }\n</style>\n<p>本节会大量出现“CJK文本”这个词。</p>\n<p class=&quot;break-all&quot;>本节会大量出现“CJK文本”这个词。</p>`, `4197256987246467000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n   <span class="token selector">p</span> <span class="token punctuation">{</span>\n      <span class="token property">width</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>\n      <span class="token property">padding</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>\n      <span class="token property">border</span><span class="token punctuation">:</span> solid deepskyblue<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">.break-all</span> <span class="token punctuation">{</span>\n      <span class="token property">word-break</span><span class="token punctuation">:</span> break-all<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>本节会大量出现“CJK文本”这个词。<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>break-all<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>本节会大量出现“CJK文本”这个词。<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>最终的排版效果如图 3-61 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-09-11-18-18-fdca86fe80b92c86927797a33e92ed28-f4a80.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 631px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 59.11251980982567%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAABn0lEQVQoz31SDW+iQBDl//+qtrmmNeaoIggCy5eAimgEYVkWmOmsnknvrunkZTKzOzPv7YfmcUyagVUiukpCSKj7qBl2Pfoc2xHJAL83bddDGvie6zDXCX1Xn8+sxSKJE9ore6h/bs4lStFFcewz5rre4VCkaeqxAKaxHLAeHs0A/0PLBBz3u/PpXF0up7KUUlZVVde1YpZ4Yway75m33RQHjAtxz+FLrWq+M9NC3yPVNA1er9h12LbIuea0uBnQ7nB9gyOUt7jCqkVBY4QAEmKa6Dg4mymfJLhcomVpcYf5sQzy/fZQboujn2Zhtt8WpzMXWVa2po2XC5QlGgbqOn58KNAgQhBoucAkYBt3Y6/XzPd0/ffKMOIo6Xlb1Lzh/R/ZUiq1pJxA8TiSpzNDFkeMMbpkzvk9CKKIegqJ1c8XRrIPEncC9hJzASkf6Xtk3UQrUYd8hC/vDP88ukbxhDgCjJOaf0/x5qdHEcCD/G8J2vOv1zhO0jQXnLue77MgDENrbXvqz/i241JuGObb++zp5ZXSxdI0VubKtOZz/RNNV6dO44vyIQAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 09 11 18 18" title="" data-src="/static/2022-01-09-11-18-18-fdca86fe80b92c86927797a33e92ed28-f4a80.png" data-srcset="/static/2022-01-09-11-18-18-fdca86fe80b92c86927797a33e92ed28-0de09.png 200w,\n/static/2022-01-09-11-18-18-fdca86fe80b92c86927797a33e92ed28-e7891.png 400w,\n/static/2022-01-09-11-18-18-fdca86fe80b92c86927797a33e92ed28-f4a80.png 631w" data-sizes="(max-width: 631px) 100vw, 631px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>可以看到，第二段文字中 CJK 这个固定词组被分开了，这大大降低了阅读体验。因此，站在用户阅读体验的角度来看，使用 word-break: break-word（表现为尽量不断开单词）所带来的收益要大于 word-break: break-all。</p>\n<p>但是在大多数产品经理和设计师眼中，视觉上的愉悦要比阅读时的舒适更重要，因为 word-break: break-word 声明在有大段连续英文字符的情况下会留下较大的空白，例如，图 3-61 所示上面那个框内的右侧就有明显的空白。虽然上面一段文字阅读速度更快，但是空白的存在导致看上去文字内容没有左右居中，这种不和谐的视觉感受没有哪个设计师可以容忍。因此在现实世界中，只要文本内容是用户动态产生的，都是使用 word-break: break-all 声明。</p>\n<p>稍等，事情还没结束。照理说，按照字面意思，元素应用 word-break: break-all 声明后，任何文本内容都不会溢出元素，但是有几个意外情况，那就是连续的破折号、连续的点字符，以及避首标点在设置 word-break: break-all 声明后无法换行。还是根据图 3-61 所示的案例，我们修改一下 HTML 内容，在最后插入一段连续的破折号，代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="53338794039319760000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<p>本节会大量出现“CJK文本”这个词。——————————————————</p>\n<p class=&quot;break-all&quot;>本节会大量出现“CJK文本”这个词。——————————————————</p>`, `53338794039319760000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>本节会大量出现“CJK文本”这个词。——————————————————<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>break-all<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>本节会大量出现“CJK文本”这个词。——————————————————<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>在 Edge 浏览器中的效果如图 3-62 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-09-11-18-59-8851f8e13a0311222eeef3b9ea5a91fe-4be4c.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 684px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 48.68421052631579%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAABKUlEQVQoz41Qa2+DMAzs//9h06RJ7cqgXQcJj7XQQkuBBEicxB7tHl+mdrMty5J9ujvPiAjpEiNSVMv3uo2rJtofywEqQ/C5uxGzn0khFXUTh28sijbrVX2sJJJy+F/wtqoHIUBPCQ5AONLuL+Yv2Y7ybpCjltoIBb2CQqhOgbZ2NMZYew88OIp6l0rgnY4FJNJMZdKMwhA5R9+nsrzcIf6WjZqI74qEM86Y/+Kdqqo1TucFMUZFQXFMfX/P8+5Ynw775nza57kUXStHuc2ttYDoEP/wXGkU4FptO3CdtocBRmOdtWb6303PV/TUlLvw66sKRWRuPBm/VcwYTw5leT43nMdZmk2GGeNpkoRhlKZZEKwXi+VUwep1vvQeHp/mi2fPDzzP34TsAz7rQDzW76+tAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 09 11 18 59" title="" data-src="/static/2022-01-09-11-18-59-8851f8e13a0311222eeef3b9ea5a91fe-4be4c.png" data-srcset="/static/2022-01-09-11-18-59-8851f8e13a0311222eeef3b9ea5a91fe-b0b14.png 200w,\n/static/2022-01-09-11-18-59-8851f8e13a0311222eeef3b9ea5a91fe-4a75c.png 400w,\n/static/2022-01-09-11-18-59-8851f8e13a0311222eeef3b9ea5a91fe-4be4c.png 684w" data-sizes="(max-width: 684px) 100vw, 684px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>破折号不换行的问题在 Chrome 浏览器和 Firefox 浏览器中同样存在，想要让连续的破折号换行，可以使用 break-word 这个 CSS 属性值。</p>\n<p>CSS 中有 3 个属性都有 break-word 属性值，且它们的作用都是一样的，分别是：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="68118651869962310000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`word-break: break-word;\nword-wrap: break-word;\noverflow-wrap: break-word;`, `68118651869962310000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">word-break</span><span class="token punctuation">:</span> break-word<span class="token punctuation">;</span>\n<span class="token property">word-wrap</span><span class="token punctuation">:</span> break-word<span class="token punctuation">;</span>\n<span class="token property">overflow-wrap</span><span class="token punctuation">:</span> break-word<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>不过考虑到 IE 浏览器和 Edge 浏览器不支持 overflow-wrap 属性，以及 IE 浏览器和 Edge 浏览器虽然支持 word-break 属性，却不支持 word-break: break-word 声明，最终动态内容的换行控制可以写成下面这样的组合：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="76873306976457020000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`p {\n   /* 字符换行主力 */\n   word-break: break-all;\n   /* 兼容 IE 浏览器和 Edge 浏览器的破折号换行 */\n   word-wrap: break-word;\n}`, `76873306976457020000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">p</span> <span class="token punctuation">{</span>\n   <span class="token comment">/* 字符换行主力 */</span>\n   <span class="token property">word-break</span><span class="token punctuation">:</span> break-all<span class="token punctuation">;</span>\n   <span class="token comment">/* 兼容 IE 浏览器和 Edge 浏览器的破折号换行 */</span>\n   <span class="token property">word-wrap</span><span class="token punctuation">:</span> break-word<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>虽然上面的代码可以让连续英文和连续破折号换行，但是依然会在中文标点的前后留下空白，如图 3-63 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-09-11-28-55-516c525f435ce66dd4692d31a8992fc6-24f57.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 471px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 69.63906581740976%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsSAAALEgHS3X78AAAB8klEQVQoz4VSa3PaMBD0//857adMS4N5FDIDJJAQ1zYxGDB5YVuWJVt+aSsBhXaaaXduTqub2zudJOO1wJzDFXBy2BnsXBNHbTM8FHhrACmlEJjPsVzC9wEdwQHGJMWCFjuSbgl/TvMg4YqsI/qeV4H/8mBvsFrKOMZ6jd0OQfCH+DGHu9p4ru0tnI3vz+8mw++D6WgcBEF5N3N++JfcX6smB27cM8SiptH+aeG5rms7dkyS1dJbectIVJY4Jp+yL/pj5weObZSQKKSUJhqkrpsoDBmlaV5aaaMlokBRgFIwpi1JtBfCeBSwVpvXl+dTh3P58ZhPpq69RhTK7Raeh9lMBTGZYDqFbcOyjBkDEVWRZWnKGEvZaWF5FCbq2PmhWtPoznUNRVTpstS8qvTMey5yzrLfwLOsKERSSYsfxPgYWvzOi4zx9NDwaJSxjDFSNhfxeaLz5SnxjCPiOary78Ksxn86j6kck3rBG4dLl0vlHab9UyZvqZxSqUeWH8NQD7lvsK+xr/BWImwQSe3VVsVL/AtGQgintC4Lkekj8pSSMEwJKYVghIT7MCZEWRTHSUKJ+gbqK9BUWRzHhtnt9Icje+Hdz61ayqsvrU+fr75em8ObUbc/bJn9Vtts9wbf2p2b0W2nM2iZXdPs9XrDa7P/E3fwF0/t1208AAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 09 11 28 55" title="" data-src="/static/2022-01-09-11-28-55-516c525f435ce66dd4692d31a8992fc6-24f57.png" data-srcset="/static/2022-01-09-11-28-55-516c525f435ce66dd4692d31a8992fc6-ea629.png 200w,\n/static/2022-01-09-11-28-55-516c525f435ce66dd4692d31a8992fc6-c47ea.png 400w,\n/static/2022-01-09-11-28-55-516c525f435ce66dd4692d31a8992fc6-24f57.png 471w" data-sizes="(max-width: 471px) 100vw, 471px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>如果希望中文标点也能成为换行点，彻底告别空白，则可以使用 line-break 属性：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="38668980747486320000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`p {\n   /* 中文标点也能换行 */\n   line-break: anywhere;\n}`, `38668980747486320000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">p</span> <span class="token punctuation">{</span>\n   <span class="token comment">/* 中文标点也能换行 */</span>\n   <span class="token property">line-break</span><span class="token punctuation">:</span> anywhere<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-09-14-57-18-2ca8ba8cc2374fd6795252841eac7f25-7a334.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 673px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 38.484398216939084%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA+klEQVQY041Na0/CQBDs//9JhoQ20QZjaosK9IGFltNI+hBtr3uPvTuvoF+IUSaTye5MJuOYH+ijUmWCAz7uD08NDUgdvraLhkbdd3oG5+zvldl+DGSdbtbZdp2uHqI3QgpuUP9ZPqUdmoLi53u7r6qu76u6bto2B31ReVymUgB0lNqyJedsAxcv7wY0jCqF1tNaWc2H/8onMGUSakrQBTPlkfZIwfwKR0qp7AoiAAgp7ZhAxVAzNRKkArQOCiE4F6MKDsAY41acZZyW5GVHyNXEDcLoOc+zNI3CKE6yJE6Wi1UcJ7PbO9e7mbrXvj8Lwrnn+cH9fDL1vgCnBsmdtpYL0AAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 09 14 57 18" title="" data-src="/static/2022-01-09-14-57-18-2ca8ba8cc2374fd6795252841eac7f25-7a334.png" data-srcset="/static/2022-01-09-14-57-18-2ca8ba8cc2374fd6795252841eac7f25-6eafe.png 200w,\n/static/2022-01-09-14-57-18-2ca8ba8cc2374fd6795252841eac7f25-632fc.png 400w,\n/static/2022-01-09-14-57-18-2ca8ba8cc2374fd6795252841eac7f25-7a334.png 673w" data-sizes="(max-width: 673px) 100vw, 673px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/6motxw?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>从图 3-64 可以看出，布局空间被字符充分利用了。不过，虽然布局规整了，阅读体验却不一定好，例如避尾标点前引号出现在了一行的末尾，而避首标点句号出现了在一行的开头。因此，究竟要换行到何种程度，请大家根据实际项目场景自行判断。</p>\n<p>以上提到的换行处理技术非常适合动态内容。如果呈现的文本内容是静态的，我们有能力对其中每个字符进行精确调整，这时候可以试试更高级的排版技术。</p>\n<h2 id="hyphens-属性与连字符"><a href="#hyphens-%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%BF%9E%E5%AD%97%E7%AC%A6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>hyphens 属性与连字符</h2>\n<p>hyphens 是专为英文场景设计的一个属性，这个属性可以让英文单词断开换行的时候带上连字符（也就是短横线），这样可以让读者知道上一行的尾部和下一行的头部连起来是一个完整的单词。其语法如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="81201103840579450000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`hyphens: none | manual | auto;`, `81201103840579450000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">hyphens</span><span class="token punctuation">:</span> none | manual | auto<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>其中，属性值 auto 可以让英文单词在行尾自动换行，同时带上短横线。需要注意的是，英文单词换行不需要设置 word-break 或者 word-wrap 属性，hyphens 属性自带换行能力。如果你设置了 word-break: break-all 声明，反而不会有短横线效果。</p>\n<p>举个例子，假设页面的 <code class="language-text">&lt;html&gt;</code> 元素的 lang 属性值是 en，则下面的代码就会有图 3-65 所示的样式效果：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="96030169355690330000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<p class=&quot;hyphens&quot;>\n   hi, my name is zhangxinxu, how are you?\n</p>\n\n<style>\n   p {\n      width: 150px;\n      padding: 10px;\n      border: solid deepskyblue;\n   }\n\n   .hyphens {\n      hyphens: auto;\n   }\n</style>`, `96030169355690330000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>hyphens<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n   hi, my name is zhangxinxu, how are you?\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n   <span class="token selector">p</span> <span class="token punctuation">{</span>\n      <span class="token property">width</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>\n      <span class="token property">padding</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>\n      <span class="token property">border</span><span class="token punctuation">:</span> solid deepskyblue<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">.hyphens</span> <span class="token punctuation">{</span>\n      <span class="token property">hyphens</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-09-11-40-53-987120dfe72d8dd42db4cb034b4b3bc8-2936c.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 38.35294117647059%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABfUlEQVQY002Q626bQBCFef836AP0R5wqiU1dR01F7EDruLnUN2LHgBccX0TCzQZjFrN7upBWinRm9J3Rzu7sSFcRLjzUPTT8MpdQcaNi2S/VqIoCTl3+ackBlAFI2Ac5zcGOOGbgBViOIkNBeU6FzdOYJlvwY3WAMqC1Q1F2cyHp8Ua57ev68M+53LQXC7nZOruoy81vz6bZu3voqFrtpHZeb3w5rV22tdR56Z20ijAsm8XLPA6d5WobRa+u69i267pBEPq+HwSBKIq8Wa8sQrw375DnLE466qgwTEyn2GykxaDXlL9qypUzn3evv6vKD2IYPbWjtZUVsX6r7e6N4vth9Ucw/n9sSpGmkleAUJCUW/vCoXjJYWfcPnAng7Vn5CAsyIGbSTHfs+eEfV4fGWPvd0laxH9ueTeGkIBfO3R3eLf/VNnbSlqMcYoP2wayOJrro9flMgn8tTkj04kxHOoP9+ZEN/TxbDSwnsbWZDwb9qf9x6f+4M0Lqn3zv0JTrnihEGu6AAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 09 11 40 53" title="" data-src="/static/2022-01-09-11-40-53-987120dfe72d8dd42db4cb034b4b3bc8-fee1c.png" data-srcset="/static/2022-01-09-11-40-53-987120dfe72d8dd42db4cb034b4b3bc8-a67b7.png 200w,\n/static/2022-01-09-11-40-53-987120dfe72d8dd42db4cb034b4b3bc8-0b187.png 400w,\n/static/2022-01-09-11-40-53-987120dfe72d8dd42db4cb034b4b3bc8-fee1c.png 800w,\n/static/2022-01-09-11-40-53-987120dfe72d8dd42db4cb034b4b3bc8-2936c.png 850w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>乍一看，hyphens: auto 还是有点儿用的，但可惜的是，在中文场景中，hyphens: auto 一点儿用处都没有，具体原因有以下几条。</p>\n<ol>\n<li>需要在英语环境中，也就是需要祖先元素设置 lang=“en” 属性。</li>\n<li>由于中文语句中随时可以换行，因此在中文场景下，轮不到 hyphens 属性起作用。就算真的遇到长串的连续字母和数字，也不一定是英文单词，多半是 URL 网址或者特殊字符串，而在网址换行位置添加短横线是不可以的，因为增加一个短横线会导致原本正确的网址变成错误的网址。</li>\n<li>只有在 Android 操作系统下和 macOS 下的 Chrome 浏览器中才有效果，在用户量较大的 Windows 操作系统中无效。</li>\n</ol>\n<p>综上所述，在中文场景下，使用 hyphens 属性自动添加短横线是行不通的。这是不是就说明 hyphens 属性彻底无用呢？是的，彻底无用！我们没有在中文项目中使用 hyphens 属性的理由。但是，请注意，我们可以使用 hyphens 属性的默认特性来设置类似 auto 属性值的排版体验。hyphens 属性的默认值是 manual，表示单词在有换行机会的时候才换行，其中一个常见的换行机会就是连字符。</p>\n<p>很多人并不清楚，连字符总共分两种。一种是“硬连字符”（U+2010），称为可见的换行机会。这个字符就是我们键盘上的短横线“-”，是可见的。另一种是“软连字符”（U+00AD），称为不可见的换行机会。这个字符很有意思，通常情况是隐藏的，但是，如果浏览器觉得有必要在软连字符所在位置打断单词，则连字符又会变为可见。</p>\n<p>在这里，我们需要用到的就是软连字符。在 HTML 中，可以使用 <code class="language-text">&amp;shy;</code> 表示软连字符，单词 shy 的意思是害羞的，因此很好记忆，“害羞”的符号就是软连字符。当然，也可以使用 Unicode 编码表示，即 <code class="language-text">&amp;#x00AD;</code>。例如，下面这段 HTML 代码，在 zhangxinxu 每个汉字的拼音连接处插入了“害羞”的软连字符：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="37602433453900866000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<p>大家好，我叫zhang&shy;xin&shy;xu，感谢大家购买我的书。</p>`, `37602433453900866000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>大家好，我叫zhang<span class="token entity" title="&shy;">&amp;shy;</span>xin<span class="token entity" title="&shy;">&amp;shy;</span>xu，感谢大家购买我的书。<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>同时设置为两端对齐：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="1838525217248321300"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`p {\n   padding: 10px;\n   border: solid deepskyblue;\n   text-align: justify;\n   text-justify: inter-ideograph;\n}`, `1838525217248321300`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">p</span> <span class="token punctuation">{</span>\n   <span class="token property">padding</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>\n   <span class="token property">border</span><span class="token punctuation">:</span> solid deepskyblue<span class="token punctuation">;</span>\n   <span class="token property">text-align</span><span class="token punctuation">:</span> justify<span class="token punctuation">;</span>\n   <span class="token property">text-justify</span><span class="token punctuation">:</span> inter-ideograph<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>效果如图 3-66 所示，换行符在换行位置显示了，在非换行位置则不可见。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-09-13-44-52-e54c974e98a60820675717071f215ae0-4a060.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 354px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 93.22033898305084%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAIAAAAf7rriAAAACXBIWXMAAAsSAAALEgHS3X78AAAC4ElEQVQ4y6VTWW/bRhDm/89bHwrkJUCfghSOWztq4aSqIBmNHDWOREu8xEs8TYnkivct7WRoCTECtH3p4CMwO9wPM/PNDjMI4VMGH1O4y+HuybmNz/40hWl2Bt75jYBaUACK38mYYQRQZXEcbz2PBH6SpBj1XCcI/CgiURQlSZxlGa1Lszo+1D3nmTyJIQu2pmWuOE4S+JAQjCqSKMtryzYUVV2LIrdcbTZakJT2ix/ggX0mj2MoQl/Tdcx8oDQi4Wz2afGwNC1HVeXPXxY8zwsiP/97JpBirXmw0el6Da57Jqc7F8mbzSbPizSORElYCcJ251umqaiaqiiGaTiWIZFC/FZ2WWLvzHh/dGVJkgRdU+Ff7FSn2wCfUeQ8l41qR2nuJLkTpfv6kHQQtzRqafyMIx7LA+VzWOXfC3YV9DMYPOFdSN+F0COg109A/9rvnUFI3+zoLIGwocfjmc78EoBZg1yCVoNagVKBXIBSUvRP0BuqNYDQa9BKuE4hPPTpsXpmnEAVuJaucYu5zHNZkuAPgZ3LouCgTroqCytbVzbyWuKWtK11QSeCcmIzowgOZeaTvR8S07Icb5sXBUrtodqu67iPhmVZtiWI0sYwk7KQp2z06iewLUoIM47o3nNMu5+bJPHTj9PbyV/uo6up6mKxmH/+slzxmqauVsv7OWsoyn0NOyw7z6hpMpMEiGfvyB5FaLuubbuyrtvu0HRd0/ZWVGh113VV0wI9LlLqN/Sked9zvrXxMX83hH+yk8ZsBrsGzj3/GoBa4wDp8mmM/wG8IBQw3EPcnRMx+5ba5fGxpt/gNeDW9IRTxK3OjlNR0vaP7IizxszwP4zBBWaXnPO4JVFsO24YxRjVDFO3HNOyMaJqBouC43KY1pKTVM3c+T4umuNuGVydH1++mtze8bx4dT24Zzkkv/8wHNwMLy4uh3+O3g/Ho9Ht7zc3by+vXr++vHg7+GM0efPzxeye/QoNExUF7JBv6AAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 09 13 44 52" title="" data-src="/static/2022-01-09-13-44-52-e54c974e98a60820675717071f215ae0-4a060.png" data-srcset="/static/2022-01-09-13-44-52-e54c974e98a60820675717071f215ae0-ca453.png 200w,\n/static/2022-01-09-13-44-52-e54c974e98a60820675717071f215ae0-4a060.png 354w" data-sizes="(max-width: 354px) 100vw, 354px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>如果我们没有在文字中插入连字符，则效果如图 3-67 所示，第一行中文文字之间会有很大的间隙，排版效果看起来非常不自然。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-09-13-48-03-9420ed6c54175673590f4bbd2b55ed3b-65498.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 409px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 70.4156479217604%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB9klEQVQoz4VSC2/aMBDO//8v6zRNa1cxWjqeY20FIRQaYHkQ8rDzsJ0Xgdg3R5Uok4r2yTqfT/f5zp9PAQABDdIa+kTMU67SekZrldVayl9ykI5cMj4igtZwypdQTgdSw5LsjymNUECiMEb+vixlnOIgRDjD7ooUYUMWH5CTGvTs4LvOH9O2LMu0LEJThNDvx8eNYW301wXZRxfIgnKYx7k+m87U6fPT00pfMkr4UbZC8iwTZW4WAh0utM1q0OjRcLy1hzYedmKK830moBCQctgDvOYiukQuavgeQ5vBD9bYFoUWgZtQXGN+m8BNJNqJmGZN2onyr2C0qrI0z3OMcJllcRy/VcCBn+V5QSONVPh4gfzKqtD3AoQcZ+d5uyQhWcoM0zBN07a3q5fZIiriM83eBZNknR2szXoyVTVNs7e2rMYYXa9XnoTve7YpE6KPKgv5VQtaucZG13VnazOWnn/L226UcC64wjkXTYooa6GmYlnAogBp5xmXEzZPhbTNYtLnEybyWsgrJUfyFDhDc8f7CPwfim3bYRiXZZkQUh0OciQ9P5DTGYZR81CEoyj2g8DZuZ7rIRy6MoYwDiOpqfLp81V/OF4s9eeJWnMeBEFvMByOxp1O7+7+od3p3rbvB6Px3UO31f7Z7Q2uvnyT8V7/19fr1l97BBL/DnftSwAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 09 13 48 03" title="" data-src="/static/2022-01-09-13-48-03-9420ed6c54175673590f4bbd2b55ed3b-65498.png" data-srcset="/static/2022-01-09-13-48-03-9420ed6c54175673590f4bbd2b55ed3b-67408.png 200w,\n/static/2022-01-09-13-48-03-9420ed6c54175673590f4bbd2b55ed3b-5cbc3.png 400w,\n/static/2022-01-09-13-48-03-9420ed6c54175673590f4bbd2b55ed3b-65498.png 409w" data-sizes="(max-width: 409px) 100vw, 409px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/goztzc?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>由于软连字符需要提前手动插入，因此，这种排版优化只适合文本内容固定的静态场景。如果想要取消软连字符的换行特性，可以使用 hyphens: none，不过由于在 Chrome 浏览器中不支持 hyphens: none 这个声明，因此其没有实用价值。</p>\n<p>软连字符的兼容性是极好的，IE 浏览器已经完全支持，大家可以放心大胆使用。但是，软连字符实现换行只适合英文单词，类似 <a href="https://www.cssworld.cn" target="_blank" rel="nofollow noreferrer noopener">https://www.cssworld.cn</a> 这样的 URL 地址会因为连字符的出现而产生语义上的干扰，那有没有其他什么符号可以让连续的英文和数字出现换行机会，同时不会影响语义呢？还真有！</p>\n<h2 id="wbr-与精确换行的控制"><a href="#wbr-%E4%B8%8E%E7%B2%BE%E7%A1%AE%E6%8D%A2%E8%A1%8C%E7%9A%84%E6%8E%A7%E5%88%B6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code class="language-text">&lt;wbr&gt;</code> 与精确换行的控制</h2>\n<p>HTML 中有一个 <code class="language-text">&lt;wbr&gt;</code> 元素标签，可以实现连续英文和数字的精准换行，具体效果如下：如果宽度足够，不换行；如果宽度不足，则在 <code class="language-text">&lt;wbr&gt;</code> 元素所在的位置进行换行。也就是说，<code class="language-text">&lt;wbr&gt;</code> 元素提供了一个换行机会。</p>\n<p>借用图 3-66 所示对应的例子，如果我们把 <code class="language-text">&amp;shy;</code> 换成 <code class="language-text">&lt;wbr&gt;</code> 标签，代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="71769951697983570000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<p>大家好，我叫zhang<wbr />xin<wbr />xu，感谢大家购买我的书。</p>`, `71769951697983570000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>大家好，我叫zhang<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>wbr</span> <span class="token punctuation">/></span></span>xin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>wbr</span> <span class="token punctuation">/></span></span>xu，感谢大家购买我的书。<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>则会有图 3-68 所示的效果。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-09-13-54-56-e21247b6308c374e436e5d49737da3a3-571e1.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 584px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 57.02054794520548%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABmUlEQVQoz31SiW7aQBT0/38PbZooFQQkRCgiFpDG1/q+jY1tbMP62OlCm7RR2o5GT2+1b97OSCsAYLjg0IOkpavJceiXWUpkyTV0S5U92/G/bRCFLM/xHsKrmOUDRG9vqEp+LFVNU4huWNbLbqeHidVdBhjwT3HBsHUiR5WTOLxO/mLdM73hzcA+yN/ESFuMUiwqzAqMMzYtwMn7SYFNjf2A/7yMrMNTdlIcXwmS9NxJbkCivR5nJEzdQ6mIUqsRRBEoxWuI3+K8hxznTZ6ZRDN1w7FN+flZlaStKPLGCHNKW7zP/kfmATs3bOvjuakOSUzrqinypihOVdlVR+3Mzh98C+wKLua250ljFie/Q9DBbxG08Ck8irDFthxoz3NfMAzDzyq8remBhpNd/JcM3EgJVFfyI8VfIHx/kaM4cT2PUkpUntasyzIOAl59zyMa0RTVtW3DMPmkZbucsqRalkN0U7j5cs9/A784VvVsvpg8zA3bedpsLdu5H0/vxg+jm9vp/PHrZDb6fLtei4/L1ejT3XK1XixXPwAH72h/cwIN3AAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 09 13 54 56" title="" data-src="/static/2022-01-09-13-54-56-e21247b6308c374e436e5d49737da3a3-571e1.png" data-srcset="/static/2022-01-09-13-54-56-e21247b6308c374e436e5d49737da3a3-2fa92.png 200w,\n/static/2022-01-09-13-54-56-e21247b6308c374e436e5d49737da3a3-52932.png 400w,\n/static/2022-01-09-13-54-56-e21247b6308c374e436e5d49737da3a3-571e1.png 584w" data-sizes="(max-width: 584px) 100vw, 584px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/ol5675?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<h3 id="wbr-实现换行原理"><a href="#wbr-%E5%AE%9E%E7%8E%B0%E6%8D%A2%E8%A1%8C%E5%8E%9F%E7%90%86" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code class="language-text">&lt;wbr&gt;</code> 实现换行原理</h3>\n<p><code class="language-text">&lt;wbr&gt;</code> 之所以能够创造新的换行机会，是因为其创建了一个带有换行特性的宽度为 0px 的空格。该空格的 Unicode 编码是 U+200B，因此 <code class="language-text">&lt;wbr&gt;</code> 标签也可以替换为 <code class="language-text">&amp;#x200b;</code>，例如下面 HTML 代码实现的效果和图 3-68 所示的效果是一样的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="79051999215743090000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<p>大家好，我叫zhang&#x200B;xin&#x200B;xu，感谢大家购买我的书。</p>`, `79051999215743090000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>大家好，我叫zhang<span class="token entity" title="&#x200B;">&amp;#x200B;</span>xin<span class="token entity" title="&#x200B;">&amp;#x200B;</span>xu，感谢大家购买我的书。<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>不过 <code class="language-text">&amp;#x200b;</code> 的语义不太好，建议大家还是使用 <code class="language-text">&lt;wbr&gt;</code>。</p>\n<h3 id="ie-浏览器的兼容处理"><a href="#ie-%E6%B5%8F%E8%A7%88%E5%99%A8%E7%9A%84%E5%85%BC%E5%AE%B9%E5%A4%84%E7%90%86" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>IE 浏览器的兼容处理</h3>\n<p>IE 浏览器并不支持 <code class="language-text">&lt;wbr&gt;</code> 标签，不过好在有简单的方法使 IE 浏览器也兼容 <code class="language-text">&lt;wbr&gt;</code> 的换行特性，那就是加上以下 CSS 代码：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="36515411260931875000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`wbr:after {\n   content: \'\\00200B\';\n}`, `36515411260931875000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">wbr:after</span> <span class="token punctuation">{</span>\n   <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">\'\\00200B\'</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<h3 id="wbr-与-br-换行的区别"><a href="#wbr-%E4%B8%8E-br-%E6%8D%A2%E8%A1%8C%E7%9A%84%E5%8C%BA%E5%88%AB" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code class="language-text">&lt;wbr&gt;</code> 与 <code class="language-text">&lt;br&gt;</code> 换行的区别</h3>\n<p><code class="language-text">&lt;wbr&gt;</code> 是 “Word Break Opportunity” 的缩写，表示有机会就断开换行；而 <code class="language-text">&lt;br&gt;</code> 则是直接换行显示，无论宽度是否足够。</p>\n<h3 id="其他"><a href="#%E5%85%B6%E4%BB%96" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>其他</h3>\n<p><code class="language-text">&lt;wbr&gt;</code> 换行和 <code class="language-text">&amp;shy;</code> 换行的区别在于 <code class="language-text">&lt;wbr&gt;</code> 在换行的时候不会有额外的字符显现，因此，其非常适合用于非英文单词的内容换行，例如 URL 网址，或者长长的 API 名称等。例如，CanvasRenderingContext2D.globalCompositeOperation 就可以使用 <code class="language-text">&lt;wbr&gt;</code> 进行排版优化，保证换行在完整单词末尾处，提高阅读体验：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="49377358770685500000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`Canvas<wbr />Rendering<wbr />Context2D<wbr />.global<wbr />Composite<wbr />Operation`, `49377358770685500000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html">Canvas<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>wbr</span> <span class="token punctuation">/></span></span>Rendering<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>wbr</span> <span class="token punctuation">/></span></span>Context2D<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>wbr</span> <span class="token punctuation">/></span></span>.global<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>wbr</span> <span class="token punctuation">/></span></span>Composite<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>wbr</span> <span class="token punctuation">/></span></span>Operation</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>同样，由于 <code class="language-text">&lt;wbr&gt;</code> 需要提前插入，因此其更适合文本内容固定的静态场景。</p>\n<p>word-break: keep-all 声明可以让 CJK 文本不换行，我们可以在 CJK 文本中的恰当位置插入 <code class="language-text">&lt;wbr&gt;</code> 标签，实现在宽度不足的时候一行变两行的排版优化效果。在应用了 white-space: nowrap 声明的场景下也是类似的。和 <code class="language-text">&amp;shy;</code> 字符一样，<code class="language-text">&lt;wbr&gt;</code> 不能与 word-break: break-all 同时使用，因为这会使 <code class="language-text">&lt;wbr&gt;</code> 变得没有意义。</p>\n<p>最后，总结一下本节的内容。</p>\n<ul>\n<li>动态文本内容换行使用 word-break: break-all 和 word-wrap: break-word 组合代码，如果要彻底换行，还可以使用 line-break: anywhere。</li>\n<li>静态内容排版不建议使用 word-break 属性、word-wrap 属性或者 line-break 属性，如果是英文单词，则使用 <code class="language-text">&amp;shy;</code> 软连字符优化排版；如果是非英文单词，则使用 <code class="language-text">&lt;wbr&gt;</code> 标签优化排版。</li>\n</ul>\n<h2 id="overflow-wrap-anywhere-声明有什么用"><a href="#overflow-wrap-anywhere-%E5%A3%B0%E6%98%8E%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>overflow-wrap: anywhere 声明有什么用</h2>\n<p>overflow-wrap 属性就是以前的 word-wrap 属性，由于 overflow-wrap 属性在 IE 浏览器中不被支持，而其他现代浏览器依然支持 word-wrap 属性语法，因此，没有任何理由使用 overflow-wrap 属性。如果某一天 overflow-wrap 属性突然支持了一个新的属性值 anywhere，那时就有了使用 overflow-wrap 属性的理由。</p>\n<p>overflow-wrap 属性的正式语法如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="56238097692161110000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`overflow-wrap: normal | break-word | anywhere;`, `56238097692161110000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">overflow-wrap</span><span class="token punctuation">:</span> normal | break-word | anywhere<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>这里主要讲一下属性值 anywhere 的作用。在展开讲解之前，先给大家讲解一个概念，关于“硬换行”和“软换行”。硬换行会在文本的换行点处插入实际换行符；而软换行的文本实际上仍在同一行，但看起来它被分成了多行，例如通过 word-break: break-all 让长英文单词换行就属于软换行。</p>\n<p>属性值 anywhere 正常状态下的效果和属性值 break-word 类似，具体描述为：如果行中没有其他可接受的断点，则可以在任何点断开原本不可断开的字符串（如长单词或 URL），并且在断点处不插入连字符。</p>\n<p>属性值 anywhere 和属性值 break-word 的不同之处在于，overflow-wrap: anywhere 在计算最小内容尺寸的时候会考虑软换行，而 overflow-wrap: break-word 则不会考虑软换行。看下面这个例子：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="72776950451792690000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<p class=&quot;anywhere&quot;>I\'m zhangxinxu.</p>\n<p class=&quot;break-word&quot;>I\'m zhangxinxu.</p>\n<style>\n   p {\n      display: inline-block;\n      width: min-content;\n      padding: 10px;\n      border: solid deepskyblue;\n      vertical-align: top;\n   }\n\n   .anywhere {\n      overflow-wrap: anywhere;\n   }\n\n   .break-word {\n      overflow-wrap: break-word;\n   }\n</style>`, `72776950451792690000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>anywhere<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>I\'m zhangxinxu.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>break-word<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>I\'m zhangxinxu.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n   <span class="token selector">p</span> <span class="token punctuation">{</span>\n      <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>\n      <span class="token property">width</span><span class="token punctuation">:</span> min-content<span class="token punctuation">;</span>\n      <span class="token property">padding</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>\n      <span class="token property">border</span><span class="token punctuation">:</span> solid deepskyblue<span class="token punctuation">;</span>\n      <span class="token property">vertical-align</span><span class="token punctuation">:</span> top<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">.anywhere</span> <span class="token punctuation">{</span>\n      <span class="token property">overflow-wrap</span><span class="token punctuation">:</span> anywhere<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">.break-word</span> <span class="token punctuation">{</span>\n      <span class="token property">overflow-wrap</span><span class="token punctuation">:</span> break-word<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>在 Chrome 浏览器中的效果如图 3-69 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-09-14-14-05-829563723cf898f6118803290c412bf1-72b93.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 659px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 43.85432473444613%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsSAAALEgHS3X78AAAA2UlEQVQoz5WOWQuCUBCF/f//KIKIFtpsoU3N4rY85FJapt7yzp1JpeihjDowcBjOxzkKfRIQ6aFUvWR/iXcxOEn2xLeYUgSz4Do+3Xaux06R+xcskLZhcuCARz+JuMSPqWJ4EwnfO5NtoeOQEP/AROvg6l/idGxB6/fmWPiWS4xhEPwEpy2YN0miVQhHLohzLNicwQAScz35HJYS8DU4tQCQp6TM7oEo9UZTM0y23tqOq+mLuW7ohtlV+8PRaKaldmmaq8l0XipXWu1urdGqVOsddTCeznq94R22aQpHmgMitAAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 09 14 14 05" title="" data-src="/static/2022-01-09-14-14-05-829563723cf898f6118803290c412bf1-72b93.png" data-srcset="/static/2022-01-09-14-14-05-829563723cf898f6118803290c412bf1-6e9e4.png 200w,\n/static/2022-01-09-14-14-05-829563723cf898f6118803290c412bf1-8b598.png 400w,\n/static/2022-01-09-14-14-05-829563723cf898f6118803290c412bf1-72b93.png 659w" data-sizes="(max-width: 659px) 100vw, 659px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>大家可以看到，应用了 overflow-wrap: anywhere 声明的元素的最小宽度是把每一个英文单词都断开后的宽度，而应用了 overflow-wrap: break-word 声明的元素还是按照默认的最小宽度规则进行计算。也就是说，属性值 anywhere 和 break-word 均按照最小宽度渲染，都保留标点符号的避首规则和避尾规则，但是 anywhere 的换行点是单词的任意位置，而 break-word 的换行点是单词之间的空格。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/r45g7z?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>由此可见，overflow-wrap: anywhere 就像 overflow-wrap: break-word 和 word-break: break-all 声明的混合体，适合用在弹性布局中，即元素尺寸足够的时候尽量让长串的数字和英文完整显示，不随便中断；如果尺寸不够，那就能断则断。overflow-wrap: anywhere 的行为表现和 line-break: anywhere 是有明显区别的，line-break: anywhere 不管元素尺寸是否足够，都是能断则断。</p>\n<h3 id="兼容性-5"><a href="#%E5%85%BC%E5%AE%B9%E6%80%A7-5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>兼容性</h3>\n<p>overflow-wrap: anywhere 声明目前的兼容性还不算乐观，在 2021 年 2 月 Safari 浏览器还不支持，具体信息如表 3-11 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-09-14-20-10-aee82df06372fd200352ca4cdf7e2001-69fa0.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 29.42453854505972%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsSAAALEgHS3X78AAABRklEQVQY0x2OQU/CMBiG99P9A8aDB0/GRMLFmGiMJpqYiAcNmiAIjsHGxujovrZr2djWrh0DRC9P8uZ5D48FlOGY1HVNgKIIM8ZjDEsM0T8nU39oO8ORs4yp5wWD0dhxZ/NwYU9cLlaWkdne5JXMKrXWKqtMaXa1lNnOlFpJo/P99s9uTdZs1lKmusqbWjd1oWRmBRSdTBnPljdv44eeqxdfq9fLNPc7t23ev/sh7OgJlRm6+iYX3agpI1Mlg7CF2XSjuWUDPp9Rrejz57jrosLpu6dnRY5a79fYf5wn/LgTViXcj1D7Y75ToEp46bW6g15jhJWA16yRYAEgJwGfUJ+IiJGAg0dJyMEt2UQkAcd2Cg4lPmCXRH4cOSIJLQqB0eLwrhSTBRycKggjs5VYHCYBX0rKk1AkCyUpib11uqw1P8RXkv4CHP9AadwciOAAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 09 14 20 10" title="" data-src="/static/2022-01-09-14-20-10-aee82df06372fd200352ca4cdf7e2001-fee1c.png" data-srcset="/static/2022-01-09-14-20-10-aee82df06372fd200352ca4cdf7e2001-a67b7.png 200w,\n/static/2022-01-09-14-20-10-aee82df06372fd200352ca4cdf7e2001-0b187.png 400w,\n/static/2022-01-09-14-20-10-aee82df06372fd200352ca4cdf7e2001-fee1c.png 800w,\n/static/2022-01-09-14-20-10-aee82df06372fd200352ca4cdf7e2001-69fa0.png 921w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>由于 overflow-wrap: anywhere 的兼容性不佳，因此它目前的实用性远不及 line-break: anywhere，大家了解即可。</p>\n<h1 id="text-align-属性相关的新特性"><a href="#text-align-%E5%B1%9E%E6%80%A7%E7%9B%B8%E5%85%B3%E7%9A%84%E6%96%B0%E7%89%B9%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>text-align 属性相关的新特性</h1>\n<p>text-align 属性支持常用的属性值 left、right、center、justify，也支持逻辑属性值 start、end，除此之外，还新增了多个其他属性值。包括：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="36919655916804170000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`text-align: match-parent;\ntext-align: justify-all;\ntext-align: <string>;`, `36919655916804170000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">text-align</span><span class="token punctuation">:</span> match-parent<span class="token punctuation">;</span>\n<span class="token property">text-align</span><span class="token punctuation">:</span> justify-all<span class="token punctuation">;</span>\n<span class="token property">text-align</span><span class="token punctuation">:</span> &lt;string><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>不过这几个新增的属性值的兼容性都不太好，因此不适合在生产环境中使用，大家先简单了解一下即可。</p>\n<h2 id="match-parent-等新属性值"><a href="#match-parent-%E7%AD%89%E6%96%B0%E5%B1%9E%E6%80%A7%E5%80%BC" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>match-parent 等新属性值</h2>\n<p>先了解一下 match-parent 属性值。match-parent 视觉表现类似 inherit，由于 text-align 属性本身就具有继承性，因此，match-parent 不是用来改变视觉上的对齐效果的，而是用来改变“看不见”的对齐计算值。</p>\n<p>没错，match-parent 属性值的作用是有些奇怪，我们看一个例子来帮助我们理解这个属性值，HTML 代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="90491065214539200000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<section>\n   <p id=&quot;p1&quot;></p>\n</section>\n<section>\n   <p id=&quot;p2&quot;></p>\n</section>`, `90491065214539200000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>p1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>p2<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>有 p1 和 p2 两个元素，此时，我们给 p2 设置 text-align: match-parent，代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="73591299952013435000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`section {\n   direction: rtl;\n   text-align: start;\n}\n\n#p2 {\n   text-align: -webkit-match-parent;\n   text-align: match-parent;\n}`, `73591299952013435000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">section</span> <span class="token punctuation">{</span>\n   <span class="token property">direction</span><span class="token punctuation">:</span> rtl<span class="token punctuation">;</span>\n   <span class="token property">text-align</span><span class="token punctuation">:</span> start<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">#p2</span> <span class="token punctuation">{</span>\n   <span class="token property">text-align</span><span class="token punctuation">:</span> -webkit-match-parent<span class="token punctuation">;</span>\n   <span class="token property">text-align</span><span class="token punctuation">:</span> match-parent<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>此时，p1 和 p2 两个元素的对齐表现是一样的，但是如果我们使用 JavaScript 代码去获取 p1 和 p2 两个元素的 text-align 计算值，就会有不同的表现：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="5229201383532823000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 显示的是 start\nconsole.log(getComputedStyle(p1).textAlign);\n// 显示的是 right\nconsole.log(getComputedStyle(p2).textAlign);`, `5229201383532823000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// 显示的是 start</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">getComputedStyle</span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span><span class="token punctuation">.</span>textAlign<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">// 显示的是 right</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">getComputedStyle</span><span class="token punctuation">(</span>p2<span class="token punctuation">)</span><span class="token punctuation">.</span>textAlign<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>match-parent 的计算值是视觉上的 left 或者 right，哪怕继承自 start 或者 end 这类逻辑属性值。这样有助于我们在 JavaScript 应用中知道元素对齐的视觉方位。</p>\n<p>接下来了解一下 justify-all 属性值。justify-all 属性值的作用是实现两端对齐，它和 justify 属性值的区别在于 justify-all 属性值可以让最后一行也表现为两端对齐。可惜目前还没有浏览器支持 justify-all 属性值，因此要实现最后一行两端对齐，可以使用目前兼容性最好的 CSS 属性 text-align-last 属性，示意如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="39965976072055920000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`text-align-last: justify;`, `39965976072055920000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">text-align-last</span><span class="token punctuation">:</span> justify<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>可惜 Safari 浏览器一直到 Safari 14 版本都没有支持 text-align-last 属性。</p>\n<p>说到两端对齐，顺便提一下 text-justify 属性。在现代浏览器中，两端对齐的算法是：CJK 文本使用 letter-spacing 间隔算法，非 CJK 文本使用 word-spacing 间隔算法。如果我们希望非 CJK 文本也使用 letter-spacing 间隔算法，也就是每个字母彼此都可以拉开间隙，则可以使用：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="72087125682422300000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`text-justify: inter-character;`, `72087125682422300000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">text-justify</span><span class="token punctuation">:</span> inter-character<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>可惜 Safari 浏览器一直到 Safari 14 版本都没有支持 text-justify 属性。</p>\n<h2 id="text-align-属性的字符对齐特性"><a href="#text-align-%E5%B1%9E%E6%80%A7%E7%9A%84%E5%AD%97%E7%AC%A6%E5%AF%B9%E9%BD%90%E7%89%B9%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>text-align 属性的字符对齐特性</h2>\n<p>在 CSS Text Module Level 4 规范中，text-align 属性还新增了对字符属性值的支持。</p>\n<p>这个字符属性值必须是单个字符，否则会被忽略，同时只能作用在单元格中，让单元格基于这个指定的字符对齐。字符可以和关键字属性值一起使用，如果没有关键字属性值，字符会显示在右侧。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="53266974526996230000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`td {\n   text-align: \'.\' center;\n}`, `53266974526996230000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">td</span> <span class="token punctuation">{</span>\n   <span class="token property">text-align</span><span class="token punctuation">:</span> <span class="token string">\'.\'</span> center<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>HTML 如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="25156888013175525000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<table>\n<col width=&quot;40&quot;>\n<tr><th>长途电话费用\n<tr><td>¥1.30\n<tr><td>¥2.50\n<tr><td>¥10.80\n<tr><td>¥111.01\n<tr><td>¥85.\n<tr><td>N/A\n<tr><td>¥.05\n<tr><td>¥.06\n</table>`, `25156888013175525000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>col</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>40<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">></span></span>长途电话费用\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>¥1.30\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>¥2.50\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>¥10.80\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>¥111.01\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>¥85.\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>N/A\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>¥.05\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>¥.06\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>此时，单元格的数值会按照字符“.”进行对齐：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="99775624298612820000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`+---------------------+\n|     长途电话费用     |\n+---------------------+\n|         ¥1.30       |\n|         ¥2.50       |\n|        ¥10.80       |\n|       ¥111.01       |\n|        ¥85.         |\n|        N/A          |\n|          ¥.05       |\n|          ¥.06       |\n+---------------------+`, `99775624298612820000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title=""\n              >\n                \n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">+---------------------+\n|     长途电话费用     |\n+---------------------+\n|         ¥1.30       |\n|         ¥2.50       |\n|        ¥10.80       |\n|       ¥111.01       |\n|        ¥85.         |\n|        N/A          |\n|          ¥.05       |\n|          ¥.06       |\n+---------------------+</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>更细节的对齐规则（如边界和换行）这里做了省略</p>\n<h1 id="text-decoration-属性全新升级"><a href="#text-decoration-%E5%B1%9E%E6%80%A7%E5%85%A8%E6%96%B0%E5%8D%87%E7%BA%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>text-decoration 属性全新升级</h1>\n<p>顾名思义，text-decoration 就是“文字装饰”的意思，常见应用之一就是控制链接元素的下划线样式，代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="96083423860441300000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`a {\n   text-decoration: none;\n}\n\na:hover {\n   text-decoration: underline;\n}`, `96083423860441300000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">a</span> <span class="token punctuation">{</span>\n   <span class="token property">text-decoration</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">a:hover</span> <span class="token punctuation">{</span>\n   <span class="token property">text-decoration</span><span class="token punctuation">:</span> underline<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>还可以和 <code class="language-text">&lt;del&gt;</code> 元素一起使用以实现贯穿线删除效果：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="46693116480587915000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`del {\n   text-decoration: line-through;\n}`, `46693116480587915000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">del</span> <span class="token punctuation">{</span>\n   <span class="token property">text-decoration</span><span class="token punctuation">:</span> line-through<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>不少前端开发者对 text-decoration 属性的认识就只有上面这点信息，实际上 text-decoration 属性包含的细节知识还是比较多的。</p>\n<h2 id="text-decoration-属性现在是一种缩写"><a href="#text-decoration-%E5%B1%9E%E6%80%A7%E7%8E%B0%E5%9C%A8%E6%98%AF%E4%B8%80%E7%A7%8D%E7%BC%A9%E5%86%99" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>text-decoration 属性现在是一种缩写</h2>\n<p>在过去，text-decoration 属性就是一个单一的 CSS 属性。但是现在，text-decoration 属性则是一个 CSS 缩写属性，完整的 CSS 属性包括 text-decoration-line、text-decoration-style、text-decoration-color 和 text-decoration-thickness。</p>\n<ul>\n<li>\n<p>text-decoration-line：表示装饰线的类型。语法如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="70806905330661430000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 没有装饰线 */\ntext-decoration-line: none;\n/* 下装饰线 */\ntext-decoration-line: underline;\n/* 上装饰线 */\ntext-decoration-line: overline;\n/* 贯穿装饰线 */\ntext-decoration-line: line-through;`, `70806905330661430000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 没有装饰线 */</span>\n<span class="token property">text-decoration-line</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>\n<span class="token comment">/* 下装饰线 */</span>\n<span class="token property">text-decoration-line</span><span class="token punctuation">:</span> underline<span class="token punctuation">;</span>\n<span class="token comment">/* 上装饰线 */</span>\n<span class="token property">text-decoration-line</span><span class="token punctuation">:</span> overline<span class="token punctuation">;</span>\n<span class="token comment">/* 贯穿装饰线 */</span>\n<span class="token property">text-decoration-line</span><span class="token punctuation">:</span> line-through<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>text-decoration-line 属性支持多个值同时使用，例如</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="4673328180373048000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 上、下装饰线同时出现 */\ntext-decoration-line: underline overline;`, `4673328180373048000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 上、下装饰线同时出现 */</span>\n<span class="token property">text-decoration-line</span><span class="token punctuation">:</span> underline overline<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>text-decoration-style：表示装饰线的样式风格。语法如下</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="33437967338914020000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 实线 */\ntext-decoration-style: solid;\n/* 双实线 */\ntext-decoration-style: double;\n/* 点线 */\ntext-decoration-style: dotted;\n/* 虚线 */\ntext-decoration-style: dashed;\n/* 波浪线 */\ntext-decoration-style: wavy;`, `33437967338914020000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 实线 */</span>\n<span class="token property">text-decoration-style</span><span class="token punctuation">:</span> solid<span class="token punctuation">;</span>\n<span class="token comment">/* 双实线 */</span>\n<span class="token property">text-decoration-style</span><span class="token punctuation">:</span> double<span class="token punctuation">;</span>\n<span class="token comment">/* 点线 */</span>\n<span class="token property">text-decoration-style</span><span class="token punctuation">:</span> dotted<span class="token punctuation">;</span>\n<span class="token comment">/* 虚线 */</span>\n<span class="token property">text-decoration-style</span><span class="token punctuation">:</span> dashed<span class="token punctuation">;</span>\n<span class="token comment">/* 波浪线 */</span>\n<span class="token property">text-decoration-style</span><span class="token punctuation">:</span> wavy<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>不同的 text-decoration-style 属性值效果如图 3-71 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-11-12-08-01-7451f4e1967ba6d518bca8b442964b0e-284ba.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 653px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 56.04900459418071%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABnklEQVQoz1WSa4+aYBCF/f8/R0O/KF5wFdayXFTEQiWSKIrIVeo2xkufBdvGE/N6ZjIzZy407vf74/HwPE8URdu2e72eqn4H3W53PB67rvuuKNJQ8lbecDgUO50sy4ivsxr1X1EU2+02iqIgCPb7fRiGuwp44HgOhwMm/HK5PP6i8U+53W5bloX+ewXI2+iNXuBozufzwWAgK0qz2aRiLf5MpqqmaYvFwjTNWQXDMKbTKR4656Wurus4TcMs8vwlebPZyLK8Xq/RsSpACMXPq6qq768nkwm7UD9UZnxJxmbQJEmY7VghhEWHNE1pEhonMU74MT5+/v58mdn3/X6/T4eSJOkVIOisViuWryiy4zjMDBmNRizoRbksS8oXRU7tNEmzLMWkETqKK+R5zpFoBH69Xp/KNUOz1Wpp2ocgCGgOJEn4JnTEDgNjcgiWx8vaySf+drv9Vz6dTvVVqwEP3BPCD4Igal8r+GqtqOOfyro53Qa7svx1Pp9d11v++ImZZTlfShwnQbCL4oQ5dvtwsXQsezmzbN2YzS3bXjp/AMXQR5o0/XXFAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 11 12 08 01" title="" data-src="/static/2022-01-11-12-08-01-7451f4e1967ba6d518bca8b442964b0e-284ba.png" data-srcset="/static/2022-01-11-12-08-01-7451f4e1967ba6d518bca8b442964b0e-b5223.png 200w,\n/static/2022-01-11-12-08-01-7451f4e1967ba6d518bca8b442964b0e-dce0f.png 400w,\n/static/2022-01-11-12-08-01-7451f4e1967ba6d518bca8b442964b0e-284ba.png 653w" data-sizes="(max-width: 653px) 100vw, 653px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n<li>\n<p>text-decoration-color：表示装饰线的颜色。</p>\n</li>\n<li>\n<p>text-decoration-thickness：表示装饰线的粗细。</p>\n<p>缩写的正式语法如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="80832446001516270000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`text-decoration: <text-decoration-line> || <text-decoration-style> || <text-decoration-color> ||\n  <text-decoration-thickness>;`, `80832446001516270000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">text-decoration</span><span class="token punctuation">:</span> &lt;text-decoration-line> || &lt;text-decoration-style> || &lt;text-decoration-color> ||\n  &lt;text-decoration-thickness><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>意思就是，4 个子属性值位置随机、组合随机，因此下面这些语法都是合法的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="38691579288611710000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`text-decoration: underline;\ntext-decoration: dotted underline;\ntext-decoration: red underline dashed;\ntext-decoration: wavy underline 3px red;`, `38691579288611710000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">text-decoration</span><span class="token punctuation">:</span> underline<span class="token punctuation">;</span>\n<span class="token property">text-decoration</span><span class="token punctuation">:</span> dotted underline<span class="token punctuation">;</span>\n<span class="token property">text-decoration</span><span class="token punctuation">:</span> red underline dashed<span class="token punctuation">;</span>\n<span class="token property">text-decoration</span><span class="token punctuation">:</span> wavy underline 3px red<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>不过由于 text-decoration-thickness 属性是在 CSS Text DecorationModule Level 4 规范中加入的，因此兼容性要差一些，因此属性值 wavy underline 3px red 建议分开设置：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="10580426566275824000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`text-decoration: wavy underline red;\ntext-decoration-thickness: 3px;`, `10580426566275824000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">text-decoration</span><span class="token punctuation">:</span> wavy underline red<span class="token punctuation">;</span>\n<span class="token property">text-decoration-thickness</span><span class="token punctuation">:</span> 3px<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n</li>\n</ul>\n<h2 id="text-decoration-属性的累加特性"><a href="#text-decoration-%E5%B1%9E%E6%80%A7%E7%9A%84%E7%B4%AF%E5%8A%A0%E7%89%B9%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>text-decoration 属性的累加特性</h2>\n<p>text-decoration 最有意思的特性要数装饰线的累加特性了。</p>\n<p>过去我一直坚信，如果父元素和子元素使用相同的 CSS 属性，那么子元素的属性值一定会覆盖父元素的属性值。CSS 属性那么多，几乎都遵循了这个规律，然而，在这么多 CSS 属性中出现了一个异类，那就是 text-decoration 属性。当父元素和子元素同时设置 text-decoration 效果的时候，文字的装饰线效果是累加的，而不是覆盖的。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="5262332107357581000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<section>\n   <p>父元素设置了 text-decoration: dashed underline</p>\n   <p>子元素设置了 text-decoration: wavy overline</p>\n</section>\n<style>\n   section {\n      text-decoration: dashed underline;\n   }\n\n   p {\n      text-decoration: wavy overline;\n   }\n</style>`, `5262332107357581000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>父元素设置了 text-decoration: dashed underline<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>子元素设置了 text-decoration: wavy overline<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n   <span class="token selector">section</span> <span class="token punctuation">{</span>\n      <span class="token property">text-decoration</span><span class="token punctuation">:</span> dashed underline<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">p</span> <span class="token punctuation">{</span>\n      <span class="token property">text-decoration</span><span class="token punctuation">:</span> wavy overline<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>按照我们的日常开发经验，<code class="language-text">&lt;p&gt;</code> 元素是子元素，其设置的 text-decoration 属性值 wavy overline 应该覆盖 <code class="language-text">&lt;section&gt;</code> 父元素设置的 text-decoration 属性值 dashed underline，但是实际上，最终呈现的是两个属性值合并的效果，如图 3-72 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-11-19-53-44-4e0f95ced5ec994882c9b4eaea220cf1-e0314.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 27.102803738317753%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsSAAALEgHS3X78AAAA80lEQVQY0yWP3W6DMAyFef9n6sRFp04q0whNQn4hLAmJtKoEpNEiFdp5my8+HcU+znHWtBohVByP70VxOLxhjIUQUgrGmZSSUMK5EFxQShljIJWSNaUYE2tdFkLQWuNTRQmGZgzBGOO9h6VApbW11nRdo3WjlHXO2s6YVummNSYbUwJzB31j4M+mbb13fd+DExj6HgzAXx1CjME5/2ltjHHdtux8/iKEvOx2r/t9nucQrEJlzXiFEKWE4BMqK8FriAbHQGYYRuUHcL5es+dfres6pHS7Lff7fVkWEP/8nmd4H4YhjeM4TZdLSuMEw4/nY9u2H4o6BzUO0DgdAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 11 19 53 44" title="" data-src="/static/2022-01-11-19-53-44-4e0f95ced5ec994882c9b4eaea220cf1-fee1c.png" data-srcset="/static/2022-01-11-19-53-44-4e0f95ced5ec994882c9b4eaea220cf1-a67b7.png 200w,\n/static/2022-01-11-19-53-44-4e0f95ced5ec994882c9b4eaea220cf1-0b187.png 400w,\n/static/2022-01-11-19-53-44-4e0f95ced5ec994882c9b4eaea220cf1-fee1c.png 800w,\n/static/2022-01-11-19-53-44-4e0f95ced5ec994882c9b4eaea220cf1-e0314.png 856w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/dpo65u?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<h2 id="唯一实用的-wavy-波浪线"><a href="#%E5%94%AF%E4%B8%80%E5%AE%9E%E7%94%A8%E7%9A%84-wavy-%E6%B3%A2%E6%B5%AA%E7%BA%BF" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>唯一实用的 wavy 波浪线</h2>\n<p>text-decoration 属性虽然新增了多个装饰线样式，同时可以控制线条颜色和粗细，乍一看使人感觉这个属性非常强大，实际上 text-decoration 属性还没有 10 年前“混得好”，至少 10 年前还流行给链接加个下划线（现在链接都是通过颜色区分）。</p>\n<p>text-decoration 属性境遇尴尬的另外一个原因就是它竞争不过 border 属性：用 border 属性实现实线、双实线、点线或虚线效果很轻松，它对颜色和粗细的控制能力也很强，而且 border 属性配合 padding 属性还能灵活控制装饰线和文字之间的距离，也支持多行下划线（元素需要保持 inline 水平）；虽然新出现的 text-underline-offset 属性可以控制文字和下划线的距离，但是其兼容性比 border 属性差得多。所以无论怎么看都是 border 属性更有优势。</p>\n<p>好在 text-decoration 属性并非一无是处，它有一个特性要比 border 属性强，那就是可以实现波浪线装饰线效果，这个是 border 属性实现不了的。</p>\n<p>例如，想要绘制一个宽度 100% 的波浪线效果，可以自定义 wavy 标签，然后应用如下 CSS 代码：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="47041801776186130000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`wavy {\n   display: block;\n   height: 0.5em;\n   white-space: nowrap;\n   letter-spacing: 100vw;\n   padding-top: 0.5em;\n   overflow: hidden;\n}\n\nwavy::before {\n   content: \'\\2000\\2000\';\n   /* IE 浏览器用实线代替 */\n   text-decoration: overline;\n   /* 现代浏览器，Safari 浏览器不支持 text-decoration: overline wavy 缩写 */\n   text-decoration: overline wavy;\n}`, `47041801776186130000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">wavy</span> <span class="token punctuation">{</span>\n   <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 0.5em<span class="token punctuation">;</span>\n   <span class="token property">white-space</span><span class="token punctuation">:</span> nowrap<span class="token punctuation">;</span>\n   <span class="token property">letter-spacing</span><span class="token punctuation">:</span> 100vw<span class="token punctuation">;</span>\n   <span class="token property">padding-top</span><span class="token punctuation">:</span> 0.5em<span class="token punctuation">;</span>\n   <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">wavy::before</span> <span class="token punctuation">{</span>\n   <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">\'\\2000\\2000\'</span><span class="token punctuation">;</span>\n   <span class="token comment">/* IE 浏览器用实线代替 */</span>\n   <span class="token property">text-decoration</span><span class="token punctuation">:</span> overline<span class="token punctuation">;</span>\n   <span class="token comment">/* 现代浏览器，Safari 浏览器不支持 text-decoration: overline wavy 缩写 */</span>\n   <span class="token property">text-decoration</span><span class="token punctuation">:</span> overline wavy<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>此时，只要插入下面这段 HTML 代码，就会有波浪线效果了：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="42842448178628370000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<wavy></wavy>`, `42842448178628370000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>wavy</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>wavy</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>实现的原理很简单，伪元素生成两个空格，使用 letter-spacing 属性控制两个空格占据足够的宽度，这样空格字符的装饰线的尺寸一定可以充满整个容器，此时只要设置装饰线的类型是波浪线，宽度 100% 自适应的波浪线效果就实现了。最终效果如图 3-73 所示（截自 Chrome 浏览器）。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/1nezsp?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>与用图片实现的波浪线相比，这里借助 text-decoration 属性实现的波浪线更加灵活，颜色可以通过 color 属性控制，大小可以通过 font-size 控制。虽然使用 CSS 渐变也能生成波浪线效果，但是那个要难理解多了。总而言之，波浪线效果的最佳实现方法就是使用 text-decoration 属性，这也是 text-decoration 属性唯一无可替代的新特性。</p>\n<h2 id="可能需要-text-underline-position-under-声明"><a href="#%E5%8F%AF%E8%83%BD%E9%9C%80%E8%A6%81-text-underline-position-under-%E5%A3%B0%E6%98%8E" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>可能需要 text-underline-position: under 声明</h2>\n<p>text-underline-position 属性可以用来设置下划线的位置。text-underline-position 这个属性很有意思，虽然是最近几年现代浏览器才开始支持的 CSS 新属性，但是 IE 浏览器很早就支持这个 CSS 属性了，而且从 IE6 浏览器就开始支持了。</p>\n<p>但是，别高兴得太早，不要以为 IE 浏览器这次挣回了点面子，其实 IE 浏览器支持的那些属性值在 CSS 规范中压根就没被承认，而且一点也不实用。为了对比方便，我专门整理了一个表，把各个浏览器目前支持的 text-underline-position 属性值罗列到了一起，个中关系一目了然，如表所示。</p>\n<table>\n<thead>\n<tr>\n<th align="left">属性值/浏览器</th>\n<th align="left">IE/Edge</th>\n<th align="left">Chrome</th>\n<th align="left">Firefox</th>\n<th align="left">Safari(PC)</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align="left">auto（初始值）</td>\n<td align="left">√</td>\n<td align="left">√</td>\n<td align="left">√</td>\n<td align="left">√</td>\n</tr>\n<tr>\n<td align="left">above（非标准）</td>\n<td align="left">√</td>\n<td align="left">×</td>\n<td align="left">√</td>\n<td align="left">×</td>\n</tr>\n<tr>\n<td align="left">below（非标准）</td>\n<td align="left">√</td>\n<td align="left">×</td>\n<td align="left">√</td>\n<td align="left">×</td>\n</tr>\n<tr>\n<td align="left">under</td>\n<td align="left">×</td>\n<td align="left">√</td>\n<td align="left">√</td>\n<td align="left">√</td>\n</tr>\n<tr>\n<td align="left">left</td>\n<td align="left">×</td>\n<td align="left">√</td>\n<td align="left">√</td>\n<td align="left">×</td>\n</tr>\n<tr>\n<td align="left">right</td>\n<td align="left">×</td>\n<td align="left">√</td>\n<td align="left">√</td>\n<td align="left">×</td>\n</tr>\n<tr>\n<td align="left">from-font（Level 4 新增）</td>\n<td align="left">×</td>\n<td align="left">×</td>\n<td align="left">√</td>\n<td align="left">×</td>\n</tr>\n</tbody>\n</table>\n<p>虽然上表所示的 text-underline-position 支持的属性值很多，但是实用的属性值其实就只有一个，那就是 under。</p>\n<p>在默认状态下，下划线在基线位置附近显示，于是就会和“g”“q”这些下方有“小尾巴”的字符发生重叠，以及会和中文字体，尤其是那些字重偏下的中文字体（如微软雅黑）的下边缘重叠，这样的视觉体验很不好，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="95846176464584070000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<p>看看下划线的位置在哪里？</p>\n<style>\n   p {\n      text-decoration: underline;\n   }\n</style>`, `95846176464584070000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>看看下划线的位置在哪里？<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n   <span class="token selector">p</span> <span class="token punctuation">{</span>\n      <span class="token property">text-decoration</span><span class="token punctuation">:</span> underline<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>上面代码的效果如图 3-74 所示，可以看到很多汉字最下面的“横”笔画和下划线重叠在一起了，看起来很不舒服。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-12-10-44-41-c2c5843428ef8015b12fdb41ca4256be-6604a.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 17.924528301886795%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsSAAALEgHS3X78AAAA2klEQVQI1y2P3RKBUBSFe/83EDMy3TDTz5lB4YJBOupUUhpKiLyApr85LrIH+2LPt9Ze62IzijI2Cdnt3CAINB07jo2xvta0Lcau657CaDwazhcLi5C970sSWi2Xs9kU/CzLmU6blWTkef5GW/cHA4TkHsfxPC+K4kRVR4oKUoQSkhV10mLbgiBwXc4wyD25M3VdF0VRVVVZlrCAAfI8B1X8ofw5cKGUQhIq33DFNE0TxfEtebyy7HpLiOUYxDmG5zCKo/himPbeD9L06XmHrWlZNjxypvTdfOcD1aPGuG2w3RQAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 12 10 44 41" title="" data-src="/static/2022-01-12-10-44-41-c2c5843428ef8015b12fdb41ca4256be-fee1c.png" data-srcset="/static/2022-01-12-10-44-41-c2c5843428ef8015b12fdb41ca4256be-a67b7.png 200w,\n/static/2022-01-12-10-44-41-c2c5843428ef8015b12fdb41ca4256be-0b187.png 400w,\n/static/2022-01-12-10-44-41-c2c5843428ef8015b12fdb41ca4256be-fee1c.png 800w,\n/static/2022-01-12-10-44-41-c2c5843428ef8015b12fdb41ca4256be-6604a.png 848w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>text-underline-position: under 声明就是专门用来解决这个糟糕的视觉体验问题的，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="5391374811118044000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<p class=&quot;under&quot;>看看下划线的位置在哪里？</p>\n<style>\n   p {\n      text-decoration: underline;\n   }\n\n   .under {\n      text-underline-position: under;\n   }\n</style>`, `5391374811118044000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html{8}"\n              >\n                <span class="gatsby-code-button-language">html{8}</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight has-highlighted-lines" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>under<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>看看下划线的位置在哪里？<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n   <span class="token selector">p</span> <span class="token punctuation">{</span>\n      <span class="token property">text-decoration</span><span class="token punctuation">:</span> underline<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">.under</span> <span class="token punctuation">{</span>\n<span class="gatsby-highlight-code-line">      <span class="token property">text-underline-position</span><span class="token punctuation">:</span> under<span class="token punctuation">;</span></span>   <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>上面代码的效果如图 3-75 所示，可以看到汉字最下面的“横”笔画和下划线明显分开了，这个下划线效果看起来就舒服多了。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-12-10-46-23-30ce3a858d98b53808ad4df624d4f793-05a55.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 19.019138755980862%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA30lEQVQI1yWM0U6DMABF+f+/4IVkRhFTF5yUblGRUtvpgE7mZA/OadpCYxPcywzY6Xm4ubnJuc5kcu26LmMsIyTLMkrpVRhGEMZomtzdLpd8itBodJKmGOM0CIIwDD3PK0vedZ0TRdD3/aIotu87Rqn9gjE8PTufzW7ukwSnKYTwAgCrUvpwOR7HCAEA6npjjHGEEPIPpZSQommatm1tKiVtSimU/C9HtG611lb5+DziDMPwczhUq5e37e7LmMenHBNK6DwvuR3ZfIEJe603JX9ereuqWi9y/r3fW6vv+1/9ncbGfAe7eAAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 12 10 46 23" title="" data-src="/static/2022-01-12-10-46-23-30ce3a858d98b53808ad4df624d4f793-fee1c.png" data-srcset="/static/2022-01-12-10-46-23-30ce3a858d98b53808ad4df624d4f793-a67b7.png 200w,\n/static/2022-01-12-10-46-23-30ce3a858d98b53808ad4df624d4f793-0b187.png 400w,\n/static/2022-01-12-10-46-23-30ce3a858d98b53808ad4df624d4f793-fee1c.png 800w,\n/static/2022-01-12-10-46-23-30ce3a858d98b53808ad4df624d4f793-05a55.png 836w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/i5yo4t?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>如果是桌面端的网页项目，下面这段 CSS 语句务必引入：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="93857405131831440000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`a {\n   text-underline-position: under;\n}`, `93857405131831440000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">a</span> <span class="token punctuation">{</span>\n   <span class="token property">text-underline-position</span><span class="token punctuation">:</span> under<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>text-underline-position 属性除了支持 under，还支持 left、right 和 from-font 这几个 CSS 规范定义的属性值。</p>\n<ul>\n<li>left 和 right 这两个属性值平常根本用不到，只有在使用 writing-mode 属性让文字垂直排版，并且需要控制下划线左右位置的时候才会用到。</li>\n<li>from-font 是 CSS 文本装饰规范 Level 4 新增的属性值，表示优先使用字体文件中设置的下划线位置，如果字体没有设置下划线对齐信息，就使用 auto 效果。大家目前可以无视 from-font 这个属性值，因为就算不考虑其目前糟糕的兼容性，这个属性值也是非常不实用的，限制太多了。</li>\n</ul>\n<p>总而言之，如果使用了文字的下划线效果，你可能需要 text-underline-position: under 来优化下划线的显示位置。</p>\n<h2 id="更需要-text-underline-offset-属性"><a href="#%E6%9B%B4%E9%9C%80%E8%A6%81-text-underline-offset-%E5%B1%9E%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>更需要 text-underline-offset 属性</h2>\n<p>text-underline-position 属性虽然可以调整下划线的位置，但是调整的位置都是固定的，不能满足多变的开发需求。此时，你更需要 text-underline-offset 属性。</p>\n<p>text-underline-offset 属性可以用来设置下划线的位置，其偏移量支持数值和百分比值。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="92139780184283990000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<p class=&quot;under&quot;>看看下划线的位置在哪里？</p>\n<style>\n   p {\n      text-decoration: underline;\n   }\n\n   .under {\n      text-underline-offset: 1em;\n   }\n</style>`, `92139780184283990000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">&lt;p class="under">看看下划线的位置在哪里？&lt;/p>\n&lt;style>\n   p</span> <span class="token punctuation">{</span>\n      <span class="token property">text-decoration</span><span class="token punctuation">:</span> underline<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">.under</span> <span class="token punctuation">{</span>\n      <span class="token property">text-underline-offset</span><span class="token punctuation">:</span> 1em<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n&lt;/style></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>表示下划线从原来的位置继续向下偏移 1em，对应的效果如图 3-76 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-12-10-55-10-89b430ba21c315134fe9de14361c7386-877f4.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 26.190476190476193%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsSAAALEgHS3X78AAABEElEQVQY012QW0/CQBCF+///DIkGY8GEtEK59ApVfFJU7GXbYgKkLaUPn1MMifEkJzNz5szO7mp3/Vv0wYBer0ewCplOLILAw3VsRiODR2OEIZrnOawCH13XGY8nuK7Hff+G4cNQtAF+sKSsarSZNcGazTFMgyhWfBc71s8hjuNi2zaLuYUvi1bhkpf1E6ZpEixDNm8b7MUMz/ewrClxquigtW3L+Xymi3VdU59Ov1HYNA1VVV3ysiw5HI+cur5oXd3I3F9P19OSJCGKogvjOCZTijRN6fQsy8iFSrSiKC51l+e56HmOEt917ho1/iFJFPv9QW7diiHhK5IlctirPDHLd6gs53Mb8f6xJZfv+Y8fEo5smuIO8j4AAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 12 10 55 10" title="" data-src="/static/2022-01-12-10-55-10-89b430ba21c315134fe9de14361c7386-fee1c.png" data-srcset="/static/2022-01-12-10-55-10-89b430ba21c315134fe9de14361c7386-a67b7.png 200w,\n/static/2022-01-12-10-55-10-89b430ba21c315134fe9de14361c7386-0b187.png 400w,\n/static/2022-01-12-10-55-10-89b430ba21c315134fe9de14361c7386-fee1c.png 800w,\n/static/2022-01-12-10-55-10-89b430ba21c315134fe9de14361c7386-877f4.png 840w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/p28di0?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>百分比值表示偏移量相对于 1em 的大小。因此，text-underline-offset: 100% 等同于 text-underline-offset: 1em。</p>\n<p>text-underline-offset 支持负值，此时下划线就会向上偏移。</p>\n<p>text-underline-offset 属性只对下划线类型的装饰线有效，对删除线和上划线都无效。例如，对下面两种装饰线设置 text-underline-offset 属性是无效的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="25686417850386790000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 设置 text-underline-offset 属性无效 */\ntext-decoration: through;\ntext-decoration: overline;`, `25686417850386790000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 设置 text-underline-offset 属性无效 */</span>\n<span class="token property">text-decoration</span><span class="token punctuation">:</span> through<span class="token punctuation">;</span>\n<span class="token property">text-decoration</span><span class="token punctuation">:</span> overline<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>如果父元素设置了下划线，然后希望子元素的下划线位置偏移，下面的 CSS 语句是无效的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="35092794755880387000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`p {\n   text-decoration: underline;\n   text-underline-offset: 0.5em;\n}\n\np span {\n   text-underline-offset: 1.5em; /* 无效 */\n}`, `35092794755880387000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">p</span> <span class="token punctuation">{</span>\n   <span class="token property">text-decoration</span><span class="token punctuation">:</span> underline<span class="token punctuation">;</span>\n   <span class="token property">text-underline-offset</span><span class="token punctuation">:</span> 0.5em<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">p span</span> <span class="token punctuation">{</span>\n   <span class="token property">text-underline-offset</span><span class="token punctuation">:</span> 1.5em<span class="token punctuation">;</span> <span class="token comment">/* 无效 */</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>此时子元素明确声明具有下划线才有效，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="19049989632524845000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`p {\n   text-decoration: underline;\n   text-underline-offset: 0.5em;\n}\n\np span {\n   text-decoration: underline;\n   text-underline-offset: 1.5em; /* 有效 */\n}`, `19049989632524845000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css{7}"\n              >\n                <span class="gatsby-code-button-language">css{7}</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight has-highlighted-lines" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">p</span> <span class="token punctuation">{</span>\n   <span class="token property">text-decoration</span><span class="token punctuation">:</span> underline<span class="token punctuation">;</span>\n   <span class="token property">text-underline-offset</span><span class="token punctuation">:</span> 0.5em<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">p span</span> <span class="token punctuation">{</span>\n<span class="gatsby-highlight-code-line">   <span class="token property">text-decoration</span><span class="token punctuation">:</span> underline<span class="token punctuation">;</span></span>   <span class="token property">text-underline-offset</span><span class="token punctuation">:</span> 1.5em<span class="token punctuation">;</span> <span class="token comment">/* 有效 */</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>目前所有现代浏览器均已支持 text-underline-offset 属性，读者可以尝试使用。</p>\n<h2 id="讲一讲-text-decoration-skip-属性的故事"><a href="#%E8%AE%B2%E4%B8%80%E8%AE%B2-text-decoration-skip-%E5%B1%9E%E6%80%A7%E7%9A%84%E6%95%85%E4%BA%8B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>讲一讲 text-decoration-skip 属性的故事</h2>\n<p>text-decoration-skip 属性可以用来控制装饰线和文字之间的重叠关系，这里的装饰线专指下划线。因为一些英文字符（如“g”“q”）的“小尾巴”会和下划线重叠，所以需要使用 text-decoration-skip 属性设置装饰线是跳过文字，还是和文字连在一起。虽然删除线（text-decoration: line-through）也会和文字重叠，但是它并不是 text-decoration-skip 属性的目标装饰线，因为删除线必须贯穿文字。</p>\n<p>如果了解 text-decoration-skip 属性的历史，你会发现 text-decoration-skip 属性也是一个颇有故事的 CSS 属性。text-decoration-skip 属性最初是 Safari 浏览器的私有特性，从 Safari 8 开始被支持，语法如下所示：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="94236113432472730000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`-webkit-text-decoration-skip: none;\n-webkit-text-decoration-skip: auto;\n-webkit-text-decoration-skip: skip;\n-webkit-text-decoration-skip: ink;`, `94236113432472730000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">-webkit-text-decoration-skip</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>\n<span class="token property">-webkit-text-decoration-skip</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>\n<span class="token property">-webkit-text-decoration-skip</span><span class="token punctuation">:</span> skip<span class="token punctuation">;</span>\n<span class="token property">-webkit-text-decoration-skip</span><span class="token punctuation">:</span> ink<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>其中，auto、skip、ink 等值的表现都是一样的，就是下划线会跳过和字符重叠的部分，如图 3-77 所示的字母“g”和下划线的重叠效果（截自 Safari 浏览器）。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-12-11-18-23-8c5dd11913d520a341fd80af34b7b839-31afd.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 29.72651605231867%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABHUlEQVQY03VQTW+CUBDkR3vGk3gBwwUFI1XDlyaaGIwxXrwQ49k0BW1oizwa0XIhKQootGN7drLZzO6bmWwelWVZFEW6rl8ul9vtlud5mqbgRVGcz+ckSbBxXdf3fRDs/wXX6xViyrIsWZZbrZaiKMvl0jAMSZKQNZ/PO53ObDbr9Xq2bU8mE47jIG42m6vVajqdjsdjShCEbrcLBcuytVqtUqkwDNNut3meR8R6vaZp2jRNjPV6fTgcNhqNfr+PXq1Wqac/wK9pGjo4ggaDAZ5FUVwsFjBgibtUVYVgNBrhOvgxUj8PgI+I4xikLMtHmruZkMAnwXeSHA7h+4e33b5uNs8eCY6nr4B8kuBeYXj09gR4cXaOs3vz9jD+AsdZGu3Vj+P1AAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 12 11 18 23" title="" data-src="/static/2022-01-12-11-18-23-8c5dd11913d520a341fd80af34b7b839-fee1c.png" data-srcset="/static/2022-01-12-11-18-23-8c5dd11913d520a341fd80af34b7b839-a67b7.png 200w,\n/static/2022-01-12-11-18-23-8c5dd11913d520a341fd80af34b7b839-0b187.png 400w,\n/static/2022-01-12-11-18-23-8c5dd11913d520a341fd80af34b7b839-fee1c.png 800w,\n/static/2022-01-12-11-18-23-8c5dd11913d520a341fd80af34b7b839-31afd.png 841w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>因此，一些文档直接就认为 Safari 的 text-decoration-skip 属性仅仅支持 none 和 skip 这两个属性值，我觉得可以认为 Safari 的 text-decoration-skip 属性仅仅支持 none 和 ink 这两个属性值，因为属性值 ink 和 CSS 规范“走得更近”。</p>\n<p>随着时间的推移，Safari 浏览器从 12.1 版本开始取消了 -webkit- 私有前缀（iOS 的 Safari 是从 12.2 版本开始取消私有前缀的），因此现在 Safari 浏览器其实可以直接这么设置：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="51899906783078320000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`text-decoration-skip: none;\ntext-decoration-skip: ink;`, `51899906783078320000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">text-decoration-skip</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>\n<span class="token property">text-decoration-skip</span><span class="token punctuation">:</span> ink<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>在 Safari 浏览器取消私有前缀之前的一段时期，text-decoration-skip 属性成了 CSS Text Decoration 模块规范中的一员，正式成为 CSS 标准属性，并且一开始是在 Level 3 规范中的。那时候 text-decoration-skip 属性的语法是下面这样的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="19867114759031755000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`text-decoration-skip: objects;\ntext-decoration-skip: none;\ntext-decoration-skip: spaces;\ntext-decoration-skip: ink;\ntext-decoration-skip: edges;\ntext-decoration-skip: box-decoration;\ntext-decoration-skip: trailing-spaces;`, `19867114759031755000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">text-decoration-skip</span><span class="token punctuation">:</span> objects<span class="token punctuation">;</span>\n<span class="token property">text-decoration-skip</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>\n<span class="token property">text-decoration-skip</span><span class="token punctuation">:</span> spaces<span class="token punctuation">;</span>\n<span class="token property">text-decoration-skip</span><span class="token punctuation">:</span> ink<span class="token punctuation">;</span>\n<span class="token property">text-decoration-skip</span><span class="token punctuation">:</span> edges<span class="token punctuation">;</span>\n<span class="token property">text-decoration-skip</span><span class="token punctuation">:</span> box-decoration<span class="token punctuation">;</span>\n<span class="token property">text-decoration-skip</span><span class="token punctuation">:</span> trailing-spaces<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>先来看一下各个属性值的含义。</p>\n<ul>\n<li>objects 是默认值，表示装饰线跳过内联对象，如图片或者 inline-block 元素。</li>\n<li>none 表示装饰线穿过一切，包括本应跳过的内联对象。</li>\n<li>spaces 表示装饰线跳过空格或字符间分隔，以及 letter-spacing 或 word-spacing 形成的间距。</li>\n<li>ink 表示装饰线跳过符号或下沉字母。</li>\n<li>edges 表示装饰线起始于内容起始边缘的后面，结束于内容结束边缘的前面。这个属性值的目的是让两个靠在一起的下划线元素看上去是分离的。这对中文字体很有用，因为中文语境中会使用下划线作为一种标点符号（如使用下划线表示专有名词）。</li>\n<li>box-decoration 表示装饰线跳过继承的 margin、border 和 padding。</li>\n<li>trailing-spaces 表示装饰线跳过 pre 或 white-space: pre-wrap 里面前后的空格。</li>\n</ul>\n<p>理想的效果如图 3-78 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-12-11-23-41-83d9419ff148254ecf7faed9d46fbf41-447cf.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 680px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 71.32352941176471%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsSAAALEgHS3X78AAABdklEQVQoz6WSa2+CQBBF+f//y/jJWIu8RGR3eUh5Vm3iC6FHtjGakvRDb8iwLHPuzCwY/aCu6+I4VkoFQeC6rud5vu+vVivHcYqi0An9Lxn6drvd1uu1EIIIDEnEyLIsInySJJvNJs/zcTgMQ2BqrgexoDIuwLoF3h4Oh3GYnmEoRbRtGxgAEv59UFVVbduOw/QZRZEeGExKScSFsnoQ1iQ8z/8DY0kqeTRPC2ma6j7B2PEHYYcvjyPwfD5fLBZZlvF4vV4vl0s76DLofD4T2X/u3Hh8Kox1HX28lGJ+IkfAUP2YjMcK4+PxeDqdWJBd1/VkMmEQNv+GHyK1aZrZbDadTommae52u3G4e8WI+/2egsEgprDt+wdj1O5F90mN/h8yXM9Pt1lZ1VVdR3HCFceJkJGK4jwvNqEgIRRyaTn8AW+LpWlaluPc//0gNIRUzeeOk6LbvCiLovrIOeyyKKv94UsIKZRiXwjFuXt+gF0o1Xab4f4NS7MNCYHi+IwAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 12 11 23 41" title="" data-src="/static/2022-01-12-11-23-41-83d9419ff148254ecf7faed9d46fbf41-447cf.png" data-srcset="/static/2022-01-12-11-23-41-83d9419ff148254ecf7faed9d46fbf41-b658a.png 200w,\n/static/2022-01-12-11-23-41-83d9419ff148254ecf7faed9d46fbf41-8c3e5.png 400w,\n/static/2022-01-12-11-23-41-83d9419ff148254ecf7faed9d46fbf41-447cf.png 680w" data-sizes="(max-width: 680px) 100vw, 680px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>或许是因为存在诸多争议，所以图 3-78 中出现的属性值没有任何浏览器进行跟进支持，然后由于 text-decoration-skip 属性的规范文档需要大改，同时又不想影响 CSS Text Decoration Module Level 3 的发布，因此 text-decoration-skip 属性的规范文档就被移到了 CSS TextDecoration Module Level 4 中，规范内容也发生了巨大的变化。</p>\n<p>发生了什么变化呢？那就是 text-decoration-skip 从一个单一的 CSS 属性变成了 5 个 CSS 属性的缩写集合，这 5 个 CSS 属性分别如下：</p>\n<ul>\n<li>text-decoration-skip-self；</li>\n<li>text-decoration-skip-box；</li>\n<li>text-decoration-skip-inset；</li>\n<li>text-decoration-skip-spaces；</li>\n<li>text-decoration-skip-ink。</li>\n</ul>\n<p>其实这 5 个 CSS 属性分别对应一个 text-decoration-skip 之前的规范中的属性值：</p>\n<ul>\n<li>text-decoration-skip-self: objects 对应之前的 text-decoration-skip: objects</li>\n<li>text-decoration-skip-box: all 对应之前的 text-decoration-skip: box-decoration；</li>\n<li>text-decoration-skip-inset: auto 对应之前的 text-decoration-skip: edges；</li>\n<li>text-decoration-skip-spaces: all 对应之前的 text-decoration-skip: spaces；</li>\n<li>text-decoration-skip-ink: all 对应之前的 text-decoration-skip: ink。</li>\n</ul>\n<p>由于上面的很多 CSS 属性和属性值还在审查阶段，之后变动的可能性还很大，因此暂不展开介绍。不过，text-decoration-skip-ink 这个 CSS 属性除外，因为 Chrome 浏览器在 2018 年 1 月、Firefox 浏览器在 2019 年 10 月均对 text-decoration-skip-ink 属性进行了支持，它可以用来设置下划线是贯穿还是避让，语法如下所示：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="55001480981673590000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`text-decoration-skip-ink: auto; /* 初始值 */\ntext-decoration-skip-ink: none;`, `55001480981673590000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">text-decoration-skip-ink</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span> <span class="token comment">/* 初始值 */</span>\n<span class="token property">text-decoration-skip-ink</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>其中，text-decoration-skip-ink: auto 等同于 Safari 浏览器支持的 text-decoration-skip: ink，text-decoration-skip-ink: none 等同于 Safari 浏览器支持的 text-decoration-skip: none。</p>\n<p>于是，理论上所有现代浏览器都有控制下划线是否贯穿所有字母的能力。在默认状态下，现代浏览器的下划线都会避让“g”“q”等字母多出来的“小尾巴”，如果希望下划线直接贯穿这些字母，则可以这么设置：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="41550428236857836000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`p {\n   -webkit-text-decoration-skip: none;\n   text-decoration-skip: ink;\n}`, `41550428236857836000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">p</span> <span class="token punctuation">{</span>\n   <span class="token property">-webkit-text-decoration-skip</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>\n   <span class="token property">text-decoration-skip</span><span class="token punctuation">:</span> ink<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>在所有现代浏览器中均支持以上写法，不过问题在于，存在需要下划线贯穿字母的场景吗？考虑到目前下划线效果并不多见，因此我觉得 text-decoration-skip 属性使用的概率并不大，大家了解一下就可以了。</p>\n<h1 id="color-属性与颜色设置"><a href="#color-%E5%B1%9E%E6%80%A7%E4%B8%8E%E9%A2%9C%E8%89%B2%E8%AE%BE%E7%BD%AE" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>color 属性与颜色设置</h1>\n<p>color 属性支持的颜色关键字到现在已经发展了 4 个阶段。</p>\n<ul>\n<li>第一阶段只包含 16 种基本颜色，称为 VGA 颜色，因为它们提取自 VGA 图形卡上的一组可显示的颜色。</li>\n<li>第二阶段的 color 属性支持了 orange 颜色关键字和 RGB 颜色值，兼容性很好，且所有浏览器都支持，大家可以放心使用。</li>\n<li>第三阶段的 color 属性新增了 130 个源自“X11 颜色列表”的颜色关键字，同时支持 HSL 颜色、Alpha 透明通道，以及 transparent 和 currentColor 这两个关键字。其功能显著增强，且有 IE9+ 浏览器支持。</li>\n<li>第四阶段的 color 属性增加了对名为 rebeccapurple 的颜色关键字的支持，同时扩展了 RGB 颜色和 HSL 颜色的语法，这部分内容现代浏览器都支持了，本书会重点介绍。</li>\n</ul>\n<p>HWB 颜色、gray() 函数、color() 函数、device-cmyk() 函数目前还没有被浏览器支持，本书不予介绍。</p>\n<h2 id="148-个颜色关键字"><a href="#148-%E4%B8%AA%E9%A2%9C%E8%89%B2%E5%85%B3%E9%94%AE%E5%AD%97" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>148 个颜色关键字</h2>\n<p>目前 color 属性已经累计支持 148 个颜色关键字，我将它们按照字母顺序整理成了一个表格</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/vxemxq?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>这其中有一些知识并不是所有人都知道的。</p>\n<ol>\n<li>\n<p>HTML 中 color 属性算法和 CSS 中的 color 属性算法是不一样的。同样是一个无法识别的颜色关键字，在 HTML 中这个无法识别的颜色关键字会渲染成另外一个颜色，而在 CSS 中会直接忽略这个颜色关键字，具体案例参见 CSS 世界。</p>\n</li>\n<li>\n<p>颜色关键字设置的颜色都是实色，不带透明度。目前没有 CSS 语法可以直接让颜色关键字带有透明度，唯一可行的方式是借助 animation-delay 负值实现。</p>\n</li>\n<li>\n<p>颜色关键字不区分大小写。例如下面语法也是可以正常解析的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="76931535878537850000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.error {\n  color: RED;\n}`, `76931535878537850000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.error</span> <span class="token punctuation">{</span>\n  <span class="token property">color</span><span class="token punctuation">:</span> RED<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>有一些颜色关键字是互相等同的：</p>\n<ul>\n<li>aqua/cyan；</li>\n<li>fuchsia/magenta；</li>\n<li>darkgray/darkgrey；</li>\n<li>darkslategray/darkslategrey；</li>\n<li>dimgray/dimgrey；</li>\n<li>lightgray/lightgrey；</li>\n<li>lightslategray/lightslategrey；</li>\n<li>gray/grey；</li>\n<li>slategray/slategrey。</li>\n</ul>\n</li>\n<li>\n<p>所有颜色关键字中，只有两个颜色关键字是以 <code class="language-text">deep</code> 开头的，分别是深天蓝色 deepskyblue 和深粉色 deeppink，这是我最喜爱的两个颜色关键字。</p>\n</li>\n<li>\n<p>暗灰色 darkgray 的颜色要比灰色 gray 更浅，因此，并不是有 <code class="language-text">dark</code> 前缀的颜色关键字控制的颜色就更深。</p>\n</li>\n<li>\n<p>在 148 个颜色关键字中，只有 CSS Color Level 4 新增的颜色关键字 rebeccapurple 不是规范的颜色名词，有人或许会奇怪为什么会有这样“不规范”的命名，实际上，这个命名的背后有一段你不知道的温情故事。</p>\n</li>\n</ol>\n<h2 id="transparent-关键字"><a href="#transparent-%E5%85%B3%E9%94%AE%E5%AD%97" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>transparent 关键字</h2>\n<p>在 CSS3 之前，虽然 border-color 属性和 background-color 属性也支持 transparent 关键字，但是此时的 transparent 关键字还并不是一个真正的颜色，只是一个特殊的关键字，目的是方便重置 border-color 属性和 background-color 属性设置的纯色。一直到 IE9 浏览器，也就是 CSS3 时代，<code class="language-text">&lt;color&gt;</code> 数据类型开始支持 Alpha 通道，transparent 关键字才被重新定义为真正的颜色。因此 color: transparent 声明是从 IE9 浏览器才开始支持的，比很多开发者认为的要晚。</p>\n<p>在 CSS 的颜色渐变或者颜色过渡动画效果中，transparent 关键字可以和其他任意色值表现出良好的过渡效果。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="79275708647047320000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.gradient {\n   width: 300px;\n   height: 150px;\n   background: linear-gradient(transparent, red);\n}`, `79275708647047320000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.gradient</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>\n   <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>transparent<span class="token punctuation">,</span> red<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>此时的渐变效果如图 3-79 所示，很多人会认为出现图 3-79 所示的效果不是理所当然的。实际上，Web 视觉表现领域的三大语言 CSS、SVG 和 Canvas，也就只有 CSS 表现出图 3-79 所示的渐变渲染效果。说来话长，transparent 关键字其实是 rgba(0, 0, 0, 0) 的另外一种快捷书写方式，这是 CSS 规范文档中明确定义的，并且所有浏览器也遵循这个规范。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-15-15-53-41-f65c9708d6e301bbc22a54c49bf90f50-dd64c.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 63.275193798449614%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAABHUlEQVQoz6XSPWvCQBwG8P8Yq5/DTdFP4KToZ9DBlw/g5ODL6O5gwM+gmMHE2E0Q0UKhLVJaqUiCVkKi7dIpyZCndyJ2Pnv8+PMcPMcNd4R/LILnwXVvQ7AsGAZM8waE1QrzORYLYcslYTpFvw9FwXAoRlEIgwE6Hcgyul0xskzo9VCrodlEoyGgXkerRWi3kc+jXEapJKBYRKVCqFaRSiGbRSYjIJ1GLkcoFBCNIpFAPC4gFkMySfxaIoTDuAshdBFI0h+2PcM1sKYkIRIhzGb8nTQNqorRiNNUTCbcPZs6xmM+dZ0XWGZY+dykIAjYL13bzodzcnzfdr1Xy363j2vn9GYfN1/fz7vPl/3hcWs8mbuHzZaH/eHH89mpX5N1OuwGW9LsAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 15 15 53 41" title="" data-src="/static/2022-01-15-15-53-41-f65c9708d6e301bbc22a54c49bf90f50-fee1c.png" data-srcset="/static/2022-01-15-15-53-41-f65c9708d6e301bbc22a54c49bf90f50-a67b7.png 200w,\n/static/2022-01-15-15-53-41-f65c9708d6e301bbc22a54c49bf90f50-0b187.png 400w,\n/static/2022-01-15-15-53-41-f65c9708d6e301bbc22a54c49bf90f50-fee1c.png 800w,\n/static/2022-01-15-15-53-41-f65c9708d6e301bbc22a54c49bf90f50-dd64c.png 1032w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>下面以 background-color 属性为例，background-color 属性的初始值是 transparent，然后我们使用 JavaScript 代码获取对应的计算值，示意如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="750255335573890600"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`console.log(window.getComputedStyle(document.body).backgroundColor);\n// 输出是：rgba(0, 0, 0, 0)`, `750255335573890600`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span><span class="token function">getComputedStyle</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">.</span>backgroundColor<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">// 输出是：rgba(0, 0, 0, 0)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>transparent 到 red 的渐变效果本质上就是色值 rgba(0, 0, 0, 0)到 rgba(255, 0, 0, 1)的渐变效果。接下来我抛出一个问题，请问渐变 50% 位置的色值是什么？我敢肯定很多人的答案是 rgba(128, 0, 0, 0.5)。但是仔细一想就会发现这个答案肯定有问题，因为这个答案中的颜色已经与红色无关了。所以，transparent 关键字实现符合认知的渐变效果是需要特别的算法的，否则，如果只是按照字面上的色值进行纯数学的计算，最终的渐变效果就会变得“不干净”，例如透明到红色的渐变效果会渲染成透明 → 灰红色 → 红色的渐变效果，渐变中间会出现让人感觉很“脏”的红色。</p>\n<p>举个例子，使用如下 SVG 渐变代码：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="30238817964754493000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<svg style=&quot;border: 1px dotted;&quot;>\n   <defs>\n      <linearGradient id=&quot;myGradient&quot;>\n         <stop offset=&quot;0%&quot; stop-color=&quot;transparent&quot; />\n         <stop offset=&quot;100%&quot; stop-color=&quot;red&quot; />\n      </linearGradient>\n   </defs>\n   <circle cx=&quot;150&quot; cy=&quot;75&quot; r=&quot;70&quot; fill=&quot;url(#myGradient)&quot;></circle>\n</svg>`, `30238817964754493000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="svg"\n              >\n                <span class="gatsby-code-button-language">svg</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="svg"><pre style="counter-reset: linenumber NaN" class="language-svg line-numbers"><code class="language-svg"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">border</span><span class="token punctuation">:</span> 1px dotted<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>defs</span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>linearGradient</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>myGradient<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>stop</span> <span class="token attr-name">offset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0%<span class="token punctuation">"</span></span> <span class="token attr-name">stop-color</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>transparent<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>\n         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>stop</span> <span class="token attr-name">offset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>100%<span class="token punctuation">"</span></span> <span class="token attr-name">stop-color</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>red<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>linearGradient</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>defs</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>circle</span> <span class="token attr-name">cx</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>150<span class="token punctuation">"</span></span> <span class="token attr-name">cy</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>75<span class="token punctuation">"</span></span> <span class="token attr-name">r</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>70<span class="token punctuation">"</span></span> <span class="token attr-name">fill</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>url(#myGradient)<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>circle</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>得到的渐变效果如图 3-80 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-15-16-06-49-61fbe97259683500a9f5ff5d36bbb3e6-e973b.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 59.63391136801541%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAABi0lEQVQoz52SS4/BUBTHfQN8DisLe7GytMIkNpY2LLDwGUj0A1iLeHwCiUcnilk0KCZGW6Xj1cxoZFTb25a5NN6ZSOafk9x77jm/e859GHielyRpeyVRFCVZ/prNyGZzWCxynY4IALStIBxiJwmCYIDD/kFTimoUCqV4vBQMYm43E4tpHHcI7HbnHE3TbuFj7JvjWiiKZbMVBKlEItjLC26xLDyePQDX/AN8XJqxLFGv13O5SjJZCYcxr7dtt0/MZiWTOWSo6p+woigHGMPuYNZolAOB/8Imk+z3P4FVVb1v2+NpOxwTCMfj+vYXGL7N3VUvptN2rdbI56sIUo1G6z5fy2b7tFp38/mTC4MCsjzA8VomU04kyqHQq8vVczpFFNWJm6dar9cAwPyL4LGFzYbC8bd0uokgg1Tqh6Zhr7IE/44MjoITWNVw9oGigJMUVYXNQdMLqZoGJEm5kp5m0HugRgxJ0asVv1xyQ5JmxuxkwjKjMcOM+70++UESRL/beye6fQK6FL07nvwXk/5x0clfrnMAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 15 16 06 49" title="" data-src="/static/2022-01-15-16-06-49-61fbe97259683500a9f5ff5d36bbb3e6-fee1c.png" data-srcset="/static/2022-01-15-16-06-49-61fbe97259683500a9f5ff5d36bbb3e6-a67b7.png 200w,\n/static/2022-01-15-16-06-49-61fbe97259683500a9f5ff5d36bbb3e6-0b187.png 400w,\n/static/2022-01-15-16-06-49-61fbe97259683500a9f5ff5d36bbb3e6-fee1c.png 800w,\n/static/2022-01-15-16-06-49-61fbe97259683500a9f5ff5d36bbb3e6-e973b.png 1038w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>可以看到渐变图像中出现了大量的夹杂着灰红色，这种渐变效果绝不是开发者想要的。在 Canvas 中的透明渐变也有类似的渲染表现。</p>\n<p>CSS 和 SVG、Canvas 渐变渲染的不一致性有时候会影响实际的开发。例如 Web 中的截图功能都是通过将 Web 内容转换成 SVG 图像或 Canvas 图像实现的，如果截图内容正好包括一个透明渐变，你就会发现最终生成的截图会有一团莫名其妙的灰黑色，其原因就是 SVG 和 Canvas 中的透明渐变算法与 CSS 的渐变算法不一致。</p>\n<p>其实早期的 Safari 浏览器也有类似的渲染问题，使用 transparent 实现渐变或者颜色过渡动画效果的时候，图像都会先变黑，就是因为使用了和 SVG、Canvas 一样的算法。</p>\n<p>因此，为了安全，有些老一辈的前端开发者在实现透明到红色的渐变时还是习惯写成 <code class="language-text">linear-gradient(rgba(255, 0, 0, 0), red)</code>。其实大可不必，Safari 浏览器已经修复了这个问题，现在已经可以放心使用 transparent 关键字了。</p>\n<h2 id="currentcolor-关键字"><a href="#currentcolor-%E5%85%B3%E9%94%AE%E5%AD%97" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>currentColor 关键字</h2>\n<p>currentColor 关键字非常实用，且无可替代，它表示当前元素（或伪元素）所使用的 color 属性的计算值，currentColor 关键字从 IE9 浏览器开始被支持。比较常用的全局设置是：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="4985520164577805000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`body {\n   fill: currentColor;\n}`, `4985520164577805000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">body</span> <span class="token punctuation">{</span>\n   <span class="token property">fill</span><span class="token punctuation">:</span> currentColor<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>用在 SVG Sprites 图标使用场景中，表示图标的填充颜色使用的是当前的 color 属性的计算值，也就是说我们可以使用 color 属性直接设置图标的颜色，详见 14.2.1 节。</p>\n<p>需要注意的是，CSS 中很多属性的默认颜色就是 color 属性值，没有必要专门指定 currentColor 关键字，包括 border-color、outline-color、caret-color、text-shadow、box-shadow 等 CSS 属性。例如我们使用 box-shadow 模拟图形效果的时候，为了控制方便，会让盒阴影颜色跟着 color 属性变化，于是有些前端开发者会指定当前盒阴影颜色为 currentColor，如下所示：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="12624521436355197000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.example {\n   box-shadow: currentColor 0 2px;\n}`, `12624521436355197000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.example</span> <span class="token punctuation">{</span>\n   <span class="token property">box-shadow</span><span class="token punctuation">:</span> currentColor 0 2px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>实际上，上面 CSS 代码中的 currentColor 关键字是多余的，直接写成 <code class="language-text">box-shadow: 0 2px</code> 就可以了。</p>\n<p>currentColor 关键字主要还是用在背景颜色和背景渐变颜色中，例如实现一个背景颜色由 color 属性控制的按钮效果，我们就可以设置 background-color 属性值为 currentColor，CSS 代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="92333601664142570000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* IE9+ 浏览器均支持 */\n.button {\n   background-color: currentColor;\n}\n\n.button::first-line {\n   color: white;\n}`, `92333601664142570000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* IE9+ 浏览器均支持 */</span>\n<span class="token selector">.button</span> <span class="token punctuation">{</span>\n   <span class="token property">background-color</span><span class="token punctuation">:</span> currentColor<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.button::first-line</span> <span class="token punctuation">{</span>\n   <span class="token property">color</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>或者</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="93921946268237190000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 现代浏览器均支持 */\n.button {\n   -webkit-text-fill-color: white;\n   background-color: currentColor;\n}`, `93921946268237190000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 现代浏览器均支持 */</span>\n<span class="token selector">.button</span> <span class="token punctuation">{</span>\n   <span class="token property">-webkit-text-fill-color</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span>\n   <span class="token property">background-color</span><span class="token punctuation">:</span> currentColor<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="rgb-颜色和-hsl-颜色的新语法"><a href="#rgb-%E9%A2%9C%E8%89%B2%E5%92%8C-hsl-%E9%A2%9C%E8%89%B2%E7%9A%84%E6%96%B0%E8%AF%AD%E6%B3%95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>RGB 颜色和 HSL 颜色的新语法</h2>\n<p>从 IE9 浏览器开始，颜色新增了 3 种表示方法，分别是 HSL 颜色、RGBA 颜色和 HSLA 颜色。从 2016 年开始，现代浏览器开始陆续支持 #RRGGBBAA 颜色和其他新语法。</p>\n<h3 id="hsl-颜色"><a href="#hsl-%E9%A2%9C%E8%89%B2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>HSL 颜色</h3>\n<p>HSL 颜色是由色调（Hue）、饱和度（Saturation）和亮度（Lightness）这 3 个元素组成的。HSL 就是由这 3 个元素对应的英文单词的首字母组成的。</p>\n<p>色调值的大小是任意的，因为 CSS 世界中与色调相关的数值都是角度值，其单位是 deg，所以无论设置什么值，最终都会在 0 ～ 360deg 这个范围中解析，例如 −120deg=240deg、480deg=120deg。</p>\n<p>图 3-81 所示的是色值 hsl(0, 100%, 50%) 到 hsl(360, 100%, 50%) 的色值带，可以看出来 HSL 颜色色调从 0 ～ 360deg 大致按照红、橙、黄、绿、青、蓝、紫、红的颜色顺序分布。其中，红色、绿色和蓝色这 3 个颜色的色调值有时候会用到，大家可以专门记一下，分别是 red=0deg、green=120deg、blue=240deg。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-15-16-20-53-217df13bdc06342768af9f32b4c78fe0-4c90f.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 24.11408815903198%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsSAAALEgHS3X78AAABMElEQVQY01XLvUsCcRwH4O81RC9TSy/iuYVESzSEQ0QREbQlQUUUQTgWQmtQS3+BxZnVYF0UElIhFCkcDTWYgyFJVqKHZ2ip3El4Zt7vU0tDz/4QVk24tuRkPlDgN77Ms+gbYTNWrJs1kY/f86Fytwv9CxjuhdOMCx4qb8ByxzqWMeUgtkg447JJ8uXJWaUxtPew0VasUGmHorcUUJs30TUBaxvmiZ1wKFEdDRKjOQxNEpsmnHLKCx3lyKGTjbWY2ABnLFHBRRGJ/EVaY02D9c5Gw06GSCj+Zi7IyA7bOEHaRkr41ISk7g5j9xKHPgQOEPbUEnvqx/5b3RvDcRB+ETcevAqoCgzuLLZCOL8i/PmuGcqzqmX0SqmSiiT0vFZMZzLxWPrpQZEfk3L0vSzjvx8gVcY2om9emgAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 15 16 20 53" title="" data-src="/static/2022-01-15-16-20-53-217df13bdc06342768af9f32b4c78fe0-fee1c.png" data-srcset="/static/2022-01-15-16-20-53-217df13bdc06342768af9f32b4c78fe0-a67b7.png 200w,\n/static/2022-01-15-16-20-53-217df13bdc06342768af9f32b4c78fe0-0b187.png 400w,\n/static/2022-01-15-16-20-53-217df13bdc06342768af9f32b4c78fe0-fee1c.png 800w,\n/static/2022-01-15-16-20-53-217df13bdc06342768af9f32b4c78fe0-4c90f.png 1157w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>饱和度和亮度的值是任意的，最终解析的数值范围均在 0% ～ 100%，数值后面的百分号一定不能少，否则整个语句无效，所有浏览器中均是如此。</p>\n<p>日常开发的时候，前端开发者习惯使用 RGB 颜色，尤其喜欢使用 RGB 颜色中的十六进制格式，例如 #f0f0f0，毕竟其兼容性足够好。但是，如果你的项目不需要兼容 IE8 浏览器，则可以试试使用 HSL 颜色，它很适合用在颜色变化的场合。</p>\n<p>举个例子，对于一个临时项目，设计师在百忙之中出了一个视觉稿，结果视觉稿中的按钮只设计了默认状态，并没有设计按钮按下时候的颜色。此时，如果使用 HSL 颜色，那么在实现按钮按下的效果时直接把亮度值变小就可以了。假设按钮色值是 #2a80eb，则：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="24967131447172575000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.button {\n   background-color: hsl(213.3, 82.8%, 54.3%);\n}\n\n.button:active {\n   background-color: hsl(213.3, 82.8%, 50%);\n}`, `24967131447172575000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.button</span> <span class="token punctuation">{</span>\n   <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">hsl</span><span class="token punctuation">(</span>213.3<span class="token punctuation">,</span> 82.8%<span class="token punctuation">,</span> 54.3%<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.button:active</span> <span class="token punctuation">{</span>\n   <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">hsl</span><span class="token punctuation">(</span>213.3<span class="token punctuation">,</span> 82.8%<span class="token punctuation">,</span> 50%<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>亮度直接从 54.3% 降低到 50%。无须计算，无须取色，就能实现按钮按下时的颜色变化效果。</p>\n<p>试想下，如果按钮背景颜色使用传统的 #2a80eb 格式，想要获得更深一点色值是不是就很麻烦了？要么求助设计师，要么自己重新取色，这比使用 HSL 色值麻烦很多。</p>\n<p>和 RGB 颜色不同，控制 HSL 颜色的值可以是小数，但是包含小数的 RGB 颜色在 IE 浏览器中是无法识别的。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="60925814162490340000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`rgb(213.3, 82.8, 54.3) /* 在 IE 浏览器中无效 */\nhsl(213.3, 82.8%, 54.3%) /* 有效 */`, `60925814162490340000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token function">rgb</span><span class="token punctuation">(</span>213.3<span class="token punctuation">,</span> 82.8<span class="token punctuation">,</span> 54.3<span class="token punctuation">)</span> <span class="token comment">/* 在 IE 浏览器中无效 */</span>\n<span class="token function">hsl</span><span class="token punctuation">(</span>213.3<span class="token punctuation">,</span> 82.8%<span class="token punctuation">,</span> 54.3%<span class="token punctuation">)</span> <span class="token comment">/* 有效 */</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<h3 id="rgba-颜色和-hsla-颜色"><a href="#rgba-%E9%A2%9C%E8%89%B2%E5%92%8C-hsla-%E9%A2%9C%E8%89%B2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>RGBA 颜色和 HSLA 颜色</h3>\n<p>从 IE9 浏览器开始，支持设置颜色的透明度了，RGBA 和 HSLA 中的字母 A 指的就是 Alpha 透明通道，透明度取值范围任意，但是渲染范围是 0 ～ 1，也就是小于 0 的透明度会当作 0 渲染，大于 1 的透明度会当作 1 渲染。因此，下面的语法均是合法的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="18212866316646425000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 全部有效 */\nrgba(255, 0, 0, .9)\nrgba(255, 0, 0, 999999)\nrgba(100%, 0%, 0%, -999999)\nhsla(240, 100%, 50%, 0.5)`, `18212866316646425000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 全部有效 */</span>\n<span class="token function">rgba</span><span class="token punctuation">(</span>255<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> .9<span class="token punctuation">)</span>\n<span class="token function">rgba</span><span class="token punctuation">(</span>255<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 999999<span class="token punctuation">)</span>\n<span class="token function">rgba</span><span class="token punctuation">(</span>100%<span class="token punctuation">,</span> 0%<span class="token punctuation">,</span> 0%<span class="token punctuation">,</span> -999999<span class="token punctuation">)</span>\n<span class="token function">hsla</span><span class="token punctuation">(</span>240<span class="token punctuation">,</span> 100%<span class="token punctuation">,</span> 50%<span class="token punctuation">,</span> 0.5<span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>在开发中经常会设置白色半透明，此时，我就会使用 HSLA 颜色实现，而不是 RGBA 颜色，因为可以少写一些字符，如下所示：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="8183401645750555000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`hsla(0, 0%, 100%, .5);`, `8183401645750555000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token function">hsla</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0%<span class="token punctuation">,</span> 100%<span class="token punctuation">,</span> .5<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<h3 id="rrggbbaa-颜色"><a href="#rrggbbaa-%E9%A2%9C%E8%89%B2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>#RRGGBBAA 颜色</h3>\n<p>目前现代浏览器已经全面支持 #RRGGBBAA 颜色。其中 R、G、B 还是原来的十六进制表示的 RGB 色值，范围从 00 ～ FF，至于这里新出现的 AA，则表示透明度，范围也是 00 ～ FF。</p>\n<p><code class="language-text">#RRGGBBAA</code> 颜色虽然很实用，但是透明度的转换却没有 RGB 色值那么方便，因为透明度范围是 0%～ 100%，而 00 ～ FF 的十进制范围是 0 ～ 255，所以需要转换，如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="68185505551510330000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// Alpha 范围 0 ~ 1\nAA = (Alpha * 255).toString(16);`, `68185505551510330000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// Alpha 范围 0 ~ 1</span>\n<span class="token constant">AA</span> <span class="token operator">=</span> <span class="token punctuation">(</span>Alpha <span class="token operator">*</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>透明度 50% 就等于 <code class="language-text">(0.5 * 255).toString(16)</code>，结果是 <code class="language-text">7f.8</code>，约等于 80。因此 #FF000080 就表示透明度约为 50% 的红色。我专门整理了一个透明度百分比和十六进制值之间对应关系的数据表，如下表所示。</p>\n<table>\n<thead>\n<tr>\n<th align="left">透明度</th>\n<th align="left">十六进制值</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align="left">0%</td>\n<td align="left">00</td>\n</tr>\n<tr>\n<td align="left">5%</td>\n<td align="left">0D</td>\n</tr>\n<tr>\n<td align="left">10%</td>\n<td align="left">1A</td>\n</tr>\n<tr>\n<td align="left">15%</td>\n<td align="left">26</td>\n</tr>\n<tr>\n<td align="left">20%</td>\n<td align="left">33</td>\n</tr>\n<tr>\n<td align="left">25%</td>\n<td align="left">40</td>\n</tr>\n<tr>\n<td align="left">30%</td>\n<td align="left">4D</td>\n</tr>\n<tr>\n<td align="left">35%</td>\n<td align="left">59</td>\n</tr>\n<tr>\n<td align="left">40%</td>\n<td align="left">66</td>\n</tr>\n<tr>\n<td align="left">45%</td>\n<td align="left">73</td>\n</tr>\n<tr>\n<td align="left">50%</td>\n<td align="left">80</td>\n</tr>\n<tr>\n<td align="left">55%</td>\n<td align="left">8C</td>\n</tr>\n<tr>\n<td align="left">60%</td>\n<td align="left">99</td>\n</tr>\n<tr>\n<td align="left">65%</td>\n<td align="left">A6</td>\n</tr>\n<tr>\n<td align="left">70%</td>\n<td align="left">B3</td>\n</tr>\n<tr>\n<td align="left">75%</td>\n<td align="left">BF</td>\n</tr>\n<tr>\n<td align="left">80%</td>\n<td align="left">CC</td>\n</tr>\n<tr>\n<td align="left">85%</td>\n<td align="left">D9</td>\n</tr>\n<tr>\n<td align="left">90%</td>\n<td align="left">E6</td>\n</tr>\n<tr>\n<td align="left">95%</td>\n<td align="left">F2</td>\n</tr>\n<tr>\n<td align="left">100%</td>\n<td align="left">FF</td>\n</tr>\n</tbody>\n</table>\n<p>同样 #RRGGBBAA 颜色也支持缩写，例如 #308 等同于 #330088</p>\n<h3 id="极致自由的新语法"><a href="#%E6%9E%81%E8%87%B4%E8%87%AA%E7%94%B1%E7%9A%84%E6%96%B0%E8%AF%AD%E6%B3%95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>极致自由的新语法</h3>\n<p>在现代浏览器中，对 RGB 颜色和 HSL 颜色的语法的使用已经变得无比自由。</p>\n<ol>\n<li>\n<p>rgb() 和 rgba() 函数语法互通，即下面的语法也是可以解析的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="60924016989983110000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 有效 */\nrgb(0, 0, 0, 1)\nrgba(0, 0, 0)`, `60924016989983110000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 有效 */</span>\n<span class="token function">rgb</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 1<span class="token punctuation">)</span>\n<span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>hsl() 和 hsla() 函数语法互通，即下面的语法也是可以解析的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="98510696524105270000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 有效 */\nhsl(0, 0%, 0%, 1)\nhsla(0, 0%, 0%)`, `98510696524105270000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 有效 */</span>\n<span class="token function">hsl</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0%<span class="token punctuation">,</span> 0%<span class="token punctuation">,</span> 1<span class="token punctuation">)</span>\n<span class="token function">hsla</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0%<span class="token punctuation">,</span> 0%<span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>rgb() 函数中的数值可以是小数，即下面语法也是可以解析的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="43888722824449020000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 有效 */\nrgb(99.999, 102.5, 0)\nrgb(1e2, .5e1, .5e0, +.25e2%)`, `43888722824449020000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 有效 */</span>\n<span class="token function">rgb</span><span class="token punctuation">(</span>99.999<span class="token punctuation">,</span> 102.5<span class="token punctuation">,</span> 0<span class="token punctuation">)</span>\n<span class="token function">rgb</span><span class="token punctuation">(</span>1e2<span class="token punctuation">,</span> .5e1<span class="token punctuation">,</span> .5e0<span class="token punctuation">,</span> +.25e2%<span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>透明度可以使用百分比表示，即下面的语法也是可以解析的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="28271714283806970000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 有效 */\nrgb(0, 0, 0, 100%)\nhsla(0, 100%, 50%, 80%)`, `28271714283806970000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 有效 */</span>\n<span class="token function">rgb</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 100%<span class="token punctuation">)</span>\n<span class="token function">hsla</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 100%<span class="token punctuation">,</span> 50%<span class="token punctuation">,</span> 80%<span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>hsl() 函数中的色调可以使用任意角度单位，即下面的语法也是可以解析的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="15415956895122430000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 有效 */\nhsl(270deg, 60%, 70%)\nhsl(4.71239rad, 60%, 70%)\nhsl(.75turn, 60%, 70%)`, `15415956895122430000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 有效 */</span>\n<span class="token function">hsl</span><span class="token punctuation">(</span>270deg<span class="token punctuation">,</span> 60%<span class="token punctuation">,</span> 70%<span class="token punctuation">)</span>\n<span class="token function">hsl</span><span class="token punctuation">(</span>4.71239rad<span class="token punctuation">,</span> 60%<span class="token punctuation">,</span> 70%<span class="token punctuation">)</span>\n<span class="token function">hsl</span><span class="token punctuation">(</span>.75turn<span class="token punctuation">,</span> 60%<span class="token punctuation">,</span> 70%<span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>rgb() 和 hsl() 函数语法中的逗号可以忽略，即下面的语法也是可以解析的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="55971828751394220000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 有效 */\nrgb(255 0 0)\nhsl(270 60% 70%)`, `55971828751394220000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 有效 */</span>\n<span class="token function">rgb</span><span class="token punctuation">(</span>255 0 0<span class="token punctuation">)</span>\n<span class="token function">hsl</span><span class="token punctuation">(</span>270 60% 70%<span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n</li>\n</ol>\n<p>但以上所有语法在 IE 浏览器中均不被支持。</p>\n<h3 id="rgb-颜色和-hsl-颜色新语法"><a href="#rgb-%E9%A2%9C%E8%89%B2%E5%92%8C-hsl-%E9%A2%9C%E8%89%B2%E6%96%B0%E8%AF%AD%E6%B3%95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>RGB 颜色和 HSL 颜色新语法</h3>\n<p>现代浏览器还支持全新的空格加斜杠语法。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="28779558972109710000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`rgb(255 0 153 / 1)\nrgb(255 0 153 / 100%)\nrgba(51 170 51 / 0.4)\nrgba(51 170 51 / 40%)\nhsl(270 60% 50% / .15)\nhsl(270 60% 50% / 15%)`, `28779558972109710000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token function">rgb</span><span class="token punctuation">(</span>255 0 153 / 1<span class="token punctuation">)</span>\n<span class="token function">rgb</span><span class="token punctuation">(</span>255 0 153 / 100%<span class="token punctuation">)</span>\n<span class="token function">rgba</span><span class="token punctuation">(</span>51 170 51 / 0.4<span class="token punctuation">)</span>\n<span class="token function">rgba</span><span class="token punctuation">(</span>51 170 51 / 40%<span class="token punctuation">)</span>\n<span class="token function">hsl</span><span class="token punctuation">(</span>270 60% 50% / .15<span class="token punctuation">)</span>\n<span class="token function">hsl</span><span class="token punctuation">(</span>270 60% 50% / 15%<span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>也就是说，RGB 色值或者 HSL 色值之间使用空格分隔，透明度使用斜杠分隔。</p>\n<p>空格语法和传统的逗号语法相比，只是书写形式不同，唯一的优点是书写速度更快了，原因很简单，键盘上的 Space 键要大得多。</p>\n<h1 id="必学必会的-background-属性新特性"><a href="#%E5%BF%85%E5%AD%A6%E5%BF%85%E4%BC%9A%E7%9A%84-background-%E5%B1%9E%E6%80%A7%E6%96%B0%E7%89%B9%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>必学必会的 background 属性新特性</h1>\n<p>本节要介绍的 background 新特性都非常实用，兼容性强，IE9+ 浏览器均支持，是务必要牢牢掌握的。</p>\n<h2 id="最实用的当属-background-size-属性"><a href="#%E6%9C%80%E5%AE%9E%E7%94%A8%E7%9A%84%E5%BD%93%E5%B1%9E-background-size-%E5%B1%9E%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>最实用的当属 background-size 属性</h2>\n<p>所有 background 新特性相关的属性中，background-size 属性的使用率是最高的。因为现在的电子设备的屏幕密度普遍都很高，所以为了避免因为图像的像素点不够而造成渲染模糊，开发者会使用 2 倍图甚至 3 倍图作为背景图。</p>\n<p>把一张大图限制在一个小的区域里面就需要用到 background-size 属性。例如一个删除按钮，按钮元素的尺寸是 20px×20px，按钮元素使用 SVG 图标作为背景，这个 SVG 图标的原始尺寸是 2000px×2000px，此时，我们可以用多种语法将这个尺寸巨大的 SVG 图标限制在按钮元素范围内。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="39796646290729390000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`background-size: cover;\nbackground-size: contain;\nbackground-size: 100%;\nbackground-size: 20px;\nbackground-size: auto 100%;\nbackground-size: auto 20px;\nbackground-size: 100% 100%;\nbackground-size: 20px 20px;`, `39796646290729390000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">background-size</span><span class="token punctuation">:</span> cover<span class="token punctuation">;</span>\n<span class="token property">background-size</span><span class="token punctuation">:</span> contain<span class="token punctuation">;</span>\n<span class="token property">background-size</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>\n<span class="token property">background-size</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>\n<span class="token property">background-size</span><span class="token punctuation">:</span> auto 100%<span class="token punctuation">;</span>\n<span class="token property">background-size</span><span class="token punctuation">:</span> auto 20px<span class="token punctuation">;</span>\n<span class="token property">background-size</span><span class="token punctuation">:</span> 100% 100%<span class="token punctuation">;</span>\n<span class="token property">background-size</span><span class="token punctuation">:</span> 20px 20px<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>以上语法包含了 background-size 属性的常用用法。</p>\n<h3 id="cover-和-contain"><a href="#cover-%E5%92%8C-contain" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>cover 和 contain</h3>\n<p>cover 和 contain 是两个关键字属性值，两者都不会改变背景图的原始比例，非常适合背景图像高宽不确定的场景。</p>\n<p>cover 是覆盖的意思，表示背景图尽可能把当前元素完全覆盖，不留任何空白。contain 是包含的意思，表示背景图尽可能包含在当前元素区域内，同时没有任何剪裁。</p>\n<p>我们来看一个例子，一张 256px×192px 的图像需要在 128px×128px 的区域内显示，background-size 属性值分别是 cover 和 contain：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="23598755894375990000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.bg-cover,\n.bg-contain {\n   width: 128px;\n   height: 128px;\n   border: solid deepskyblue;\n   background: url(./1.jpg) no-repeat center;\n}\n\n.bg-cover {\n   background-size: cover;\n}\n\n.bg-contain {\n   background-size: contain;\n}`, `23598755894375990000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.bg-cover,\n.bg-contain</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 128px<span class="token punctuation">;</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 128px<span class="token punctuation">;</span>\n   <span class="token property">border</span><span class="token punctuation">:</span> solid deepskyblue<span class="token punctuation">;</span>\n   <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./1.jpg<span class="token punctuation">)</span></span> no-repeat center<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.bg-cover</span> <span class="token punctuation">{</span>\n   <span class="token property">background-size</span><span class="token punctuation">:</span> cover<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.bg-contain</span> <span class="token punctuation">{</span>\n   <span class="token property">background-size</span><span class="token punctuation">:</span> contain<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>结果如图 3-82 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-17-13-54-47-3823fd282814c9aae96f0bd8b6561cb5-1f825.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 552px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 66.48550724637681%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAADcElEQVQ4y32Tf0zUdRjHb25pIwgCIhU47g7dCMpVVjJam//oKv+wkkSFpB9nhEnHQTg512pJFBooQZl/cIsERH5Hsc6Qg+PQFhynHPeDHwrHKXp34GJyHiBwr74gbf3RerbXnr0/z7P359k+z0fkcjpJTUkm/QM5qcl7yPv8U5ZjYQ588/juzy1LjUbDvqQkFBmHyMpUsD95H7p27YPexQX+CdH4+DhvvC1H/sln7D6g4JAqj0WhMC1wV8Cz0lhbX8/213dxQKEkTZnNjsREzjU1My/UJr2zTM3Ns+DzIZq45+VYfjrVJbu4ULGX9qr36ahQoK3K4EqzklO579LWpcch3HLVPUO/24vxlpc+9yw3hcGcguEdgTEBt+Auck57KMuNw1YYyC31WkaLQ+nKCaRWHsDhHQE85y/ibOVP2KcnuVSuwNyYi7fnKH91qBhtyuFGSw7aokwqTx7BetuNyOXxcL4gHsOJCGwl0ZgLZBi+kHFqt5ikTZH4rX6IPHUdY7eNVBxcxa+5gQwUP0bfsSAa0h4lJd6P2OBVPL8xhC7rMCL3PQ+/ndyCIX89Az9IcVRJGCyMoiklkq4kKRkxD3NcXcONyX46vwzjUr4My3cyRtXRtColnN4m5tXox3kkTCIYXn9gqDsTz3B5OJbvpYx8I+FmkYS2vWJaEiVUb/WnobaeIaeJP74KxayWYi2R4DghwXQ4Cv1bYmpfWUesLIp2i2Douuvh9x+3MFgaTndcFOdjIihLiqBkazgtOyUcf8mPqqY6bA4TmoIwzEUbuPyklIIYMR9vDufoC5FkJKxF+pQM3bLhnIe2bxOwiiP4OVKK8mUx8vXhPB3yBNs2RBITtIbSc0sTGmlTrebquhAaXwyken8Qqlh/3tkcQOoza9j+bBjd1muCodfD5bhN9IQEUPdeMANfh6LdGczp14IofTMUVYKIxoZKrs+4uFZ+EGdhNr01mUx1ZDHRnMWdX7Jx12fSe/YIIy7hlSemvLTm5XLxjJyy4jR6NeloKz6kpzqdKzUf0VmWisnUyaiwc8PCntmXdk7II/cFVvKSNs/CuICI/4nFFf6tff9x7lth+etdaNXisDuwWW3MeL0Yeo3oOvXo9V0MDQ1jt9sxW6z0mcyMjTkYHBxiZGSUfrOFHoORP7sNdOj09PdbuKjV8Tc6rfIZxfE7cQAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 17 13 54 47" title="" data-src="/static/2022-01-17-13-54-47-3823fd282814c9aae96f0bd8b6561cb5-1f825.png" data-srcset="/static/2022-01-17-13-54-47-3823fd282814c9aae96f0bd8b6561cb5-632a9.png 200w,\n/static/2022-01-17-13-54-47-3823fd282814c9aae96f0bd8b6561cb5-cac39.png 400w,\n/static/2022-01-17-13-54-47-3823fd282814c9aae96f0bd8b6561cb5-1f825.png 552w" data-sizes="(max-width: 552px) 100vw, 552px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>大家可以看到，如果显示区域的比例和原始图像的比例不一致，那么 cover 属性值最终的表现效果就是有一部分图像被剪裁掉，而 contain 属性值的表现效果是图片有一部分的区域会留白。但是无论是 cover 属性值还是 contain 属性值，都至少有一个方向的元素边界和图像边界是重合的。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/e0u55c?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<h3 id="理解-auto-关键字下的尺寸渲染规则"><a href="#%E7%90%86%E8%A7%A3-auto-%E5%85%B3%E9%94%AE%E5%AD%97%E4%B8%8B%E7%9A%84%E5%B0%BA%E5%AF%B8%E6%B8%B2%E6%9F%93%E8%A7%84%E5%88%99" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>理解 auto 关键字下的尺寸渲染规则</h3>\n<p>在深入理解 auto 关键字的尺寸渲染规则之前，我们需要先了解一下常见图像的内在尺寸和内在比例。在 CSS 世界中，常见的图像有以下几种。</p>\n<ul>\n<li>位图。例如 JPG 或者 PNG 图片都属于位图，这些图像总是有自己的内在尺寸（原始图像大小）和内在比例（原始图像比例）。</li>\n<li>矢量图。例如 SVG 图像就属于矢量图，这些图像不一定具有内在尺寸。如果水平尺寸和垂直尺寸都设置了，那么它就具有内在的比例；如果没有设置尺寸，或者只设置了一个方向的尺寸，它可能有比例，也可能没有比例，要视 SVG 内部代码而定，如有些 SVG 元素内部只有 <code class="language-text">&lt;defs&gt;</code> 元素，此时矢量图就没有比例。</li>\n<li>渐变图像。就是使用 CSS 渐变语法绘制的图像，这些图像是没有内在尺寸和内在比例的。</li>\n<li>元素图像。例如使用 element() 函数把 DOM 元素作为背景图，此时的内在尺寸就是这个 DOM 元素的尺寸。</li>\n</ul>\n<p>下面讲一下 auto 关键字的尺寸渲染规则。</p>\n<p>如果 background-size 的属性值是 auto，或者 background-size 的属性值是 auto auto，又或者没有设置 background-size 属性（此时会使用初始值 auto auto），那么：</p>\n<ol>\n<li>\n<p>如果图像水平和垂直方向同时具有内在尺寸，则按照图像原始大小进行渲染。例如一个 PNG 图片尺寸是 800px×600px，那么背景图的尺寸就是 800px×600px，这就是多倍图一定要设置 background-size 属性的原因，否则只能显示部分图像内容。</p>\n</li>\n<li>\n<p>如果图像没有内在尺寸，也没有内在比例，则按照背景定位区域的大小进行渲染，等同于设置属性值为 100%。所以，CSS 渐变图像默认都是覆盖整个背景定位区域的，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="46809323107853130000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.bg-gradient {\n  width: 300px;\n  height: 100px;\n  background: linear-gradient(deepskyblue, deeppink);\n}`, `46809323107853130000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.bg-gradient</span> <span class="token punctuation">{</span>\n  <span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>\n  <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>\n  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>deepskyblue<span class="token punctuation">,</span> deeppink<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>此时的渐变背景的大小就是 300px×100px。</p>\n</li>\n<li>\n<p>如果图像没有内在尺寸，但具有内在比例，则渲染效果等同于设置属性值为 contain。例如，有一个名为 triangle.svg 的 SVG 文件，XML 源码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="26993835250439504000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<!-- triangle.svg -->\n<svg viewBox=&quot;0 0 1024 1024&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;>\n  <path d=&quot;M512 0L1024 1024L0 1024Z&quot;/>\n</svg>`, `26993835250439504000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="svg"\n              >\n                <span class="gatsby-code-button-language">svg</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="svg"><pre style="counter-reset: linenumber NaN" class="language-svg line-numbers"><code class="language-svg"><span class="token comment">&lt;!-- triangle.svg --></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">viewBox</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0 0 1024 1024<span class="token punctuation">"</span></span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.w3.org/2000/svg<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>path</span> <span class="token attr-name">d</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>M512 0L1024 1024L0 1024Z<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>其中，<code class="language-text">&lt;svg&gt;</code> 元素没有设置 width 属性和 height 属性，也就是没有设置内在尺寸。此时这个 SVG 文件作为背景图，我们无须指定 background-size 属性值，SVG 图像就能自动被包含在背景定位区域内。CSS 示意代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="8889678500416531000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.svg-nosize {\n  width: 40px;\n  height: 40px;\n  border: solid deepskyblue;\n  background: url(./triangle.svg);\n}`, `8889678500416531000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.svg-nosize</span> <span class="token punctuation">{</span>\n  <span class="token property">width</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>\n  <span class="token property">height</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>\n  <span class="token property">border</span><span class="token punctuation">:</span> solid deepskyblue<span class="token punctuation">;</span>\n  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./triangle.svg<span class="token punctuation">)</span></span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>结果如图 3-83 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-17-14-11-02-ec66c2e3be2ee84d90d05b3dfecea66c-08a78.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 574px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 24.21602787456446%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsSAAALEgHS3X78AAAAyklEQVQY021Nyw7BQBTtXmLrx/yKva9g6QdYsWgar1Y9qg8iVIvyB6avmRo6M65GIsJZnHtzzj3nSuIbvGDMxAzRlmqY+CP+QuL8bXP+WhkQy6kQzXavUi51NwG4eZ7zb4jiXvpTyBhQQ9artXrH8QuB/f+cZTdCMuimlKYvYIwJjPv9ATbBGKEQhWGSpkkCHomjOIpiiFyvSPK8w871IXMKLoZpW/Z663rH4OzuPdteDUaa0h/JymCxtMaaPjdMVZtO9LnlrGVl+ASXyhOSrxJz+QAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 17 14 11 02" title="" data-src="/static/2022-01-17-14-11-02-ec66c2e3be2ee84d90d05b3dfecea66c-08a78.png" data-srcset="/static/2022-01-17-14-11-02-ec66c2e3be2ee84d90d05b3dfecea66c-683d3.png 200w,\n/static/2022-01-17-14-11-02-ec66c2e3be2ee84d90d05b3dfecea66c-6bdc6.png 400w,\n/static/2022-01-17-14-11-02-ec66c2e3be2ee84d90d05b3dfecea66c-08a78.png 574w" data-sizes="(max-width: 574px) 100vw, 574px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/80gqpd?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n</li>\n<li>\n<p>如果图像只有一个方向有内在尺寸，但又具有内在比例，则图像会拉伸到该内在尺寸的大小，同时宽高比符合内在比例。例如，某个 SVG 图像的内在比例是 1:1，但是 SVG 图像源码中的 <code class="language-text">&lt;svg&gt;</code> 元素只设置了 width 属性，没有设置 height 属性，则最终的 SVG 图像会按照 width 属性设置的宽度渲染，高度和宽度保持 1:1 的比例进行渲染。</p>\n<p>例如上面的 triangle.svg 文件，我们对其设置 width 属性，而不设置 height 属性，如下所示：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="88876748666360550000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<svg width=&quot;30&quot; viewBox=&quot;0 0 1024 1024&quot;>\n  <path d=&quot;M512 0L1024 1024L0 1024Z&quot; />\n</svg>`, `88876748666360550000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="svg"\n              >\n                <span class="gatsby-code-button-language">svg</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="svg"><pre style="counter-reset: linenumber NaN" class="language-svg line-numbers"><code class="language-svg"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>30<span class="token punctuation">"</span></span> <span class="token attr-name">viewBox</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0 0 1024 1024<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>path</span> <span class="token attr-name">d</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>M512 0L1024 1024L0 1024Z<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>同样的 CSS 代码：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="93391509282673300000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.svg-one-size {\n  width: 40px;\n  height: 40px;\n  border: solid deepskyblue;\n  background: url(./triangle.svg);\n}`, `93391509282673300000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.svg-one-size</span> <span class="token punctuation">{</span>\n  <span class="token property">width</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>\n  <span class="token property">height</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>\n  <span class="token property">border</span><span class="token punctuation">:</span> solid deepskyblue<span class="token punctuation">;</span>\n  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./triangle.svg<span class="token punctuation">)</span></span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>结果如图 3-84 所示，图像展示的尺寸是 30px×30px。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-17-14-48-37-1593d5c1edc000dbd259c0899702a01e-37d31.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 624px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 23.557692307692307%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAvElEQVQY03WNyw6CMBBF+2d8pSt/wbVuJEYlFnkpIhpjNApx48ZI36UtVuIOOZmcTHIzc0HTwZivgycZTBbwVQtlmh6AaWlvfotSynrkp47jDMczLLUNtenSgD/NrS9IuOdHjpRuegFSSi6E/YMJoZTZWkII55xRqrRWtcQYvytUIWRzO4wzhDDjnDIGrtdbfjwJLqC/TrO8KEq4Du9FGcbbNNtn+cGDgbeCU3ceJ7sgjONku/RgGG2iZPMBgC4XtR3nhncAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 17 14 48 37" title="" data-src="/static/2022-01-17-14-48-37-1593d5c1edc000dbd259c0899702a01e-37d31.png" data-srcset="/static/2022-01-17-14-48-37-1593d5c1edc000dbd259c0899702a01e-89539.png 200w,\n/static/2022-01-17-14-48-37-1593d5c1edc000dbd259c0899702a01e-cb00c.png 400w,\n/static/2022-01-17-14-48-37-1593d5c1edc000dbd259c0899702a01e-37d31.png 624w" data-sizes="(max-width: 624px) 100vw, 624px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>然而，在 Edge 浏览器中，只有一个方向设置了尺寸的 SVG 图像还是按照 contain 属性值进行渲染的。因此在实际开发中，不建议 SVG 图像只设置一侧尺寸。</p>\n</li>\n<li>\n<p>如果图像只有一个方向有内在尺寸而没有内在比例，则图像有内在尺寸的一侧会拉伸到该内在尺寸大小，没有设置内在尺寸的一侧会拉伸到背景定位区域大小。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="98973523800291360000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<svg viewBox=&quot;0 0 200 50&quot; height=&quot;50&quot; preserveAspectRatio=&quot;none&quot;>\n  <text x=&quot;0&quot; y=&quot;30&quot;>只有一侧有内在尺寸，没有内在比例</text>\n</svg>`, `98973523800291360000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="svg"\n              >\n                <span class="gatsby-code-button-language">svg</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="svg"><pre style="counter-reset: linenumber NaN" class="language-svg line-numbers"><code class="language-svg"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">viewBox</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0 0 200 50<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>50<span class="token punctuation">"</span></span> <span class="token attr-name">preserveAspectRatio</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>none<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">x</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">y</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>30<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>只有一侧有内在尺寸，没有内在比例<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>preserveAspectRatio=“none” 可以去除 SVG 图像的内在比例，根据我的测试，除 Firefox 浏览器的渲染有问题外，IE、Edge 和 Chrome 浏览器都可以达到预期效果。</p>\n<p>如果 background-size 的属性值一个是 auto，另外一个值不是 auto，有如下两种情况。</p>\n<ul>\n<li>\n<p>如果图像有内在比例，则图像会拉伸到指定的尺寸，高宽依然保持原始的比例。</p>\n<p>假设 PNG 背景图片的尺寸是 800px×600px，则 background-size: 40px 的效果是将图片宽度拉伸到 40px，高度和宽度的比例保持原始的 4:3，所以高度值是 30px。类似的，background-size: auto 30px 表示宽度 auto，高度拉伸到 30px，由于图片内在比例是 4:3，因此最终的背景尺寸是 40px×30px。</p>\n</li>\n<li>\n<p>如果图像没有内在比例，则图像会拉伸到指定的尺寸。同时，如果图像有内在尺寸，则 auto 的计算尺寸就是图像的尺寸；如果图像没有内在尺寸，则 auto 的计算尺寸就是背景定位区域的尺寸。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="40341360527580310000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.bg-gradient {\n width: 300px;\n height: 100px;\n border: solid deepskyblue;\n background: linear-gradient(deepskyblue, nosize) no-repeat center;\n background-size: 150px;\n}`, `40341360527580310000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.bg-gradient</span> <span class="token punctuation">{</span>\n <span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>\n <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>\n <span class="token property">border</span><span class="token punctuation">:</span> solid deepskyblue<span class="token punctuation">;</span>\n <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>deepskyblue<span class="token punctuation">,</span> nosize<span class="token punctuation">)</span> no-repeat center<span class="token punctuation">;</span>\n <span class="token property">background-size</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>background-size: 150px 等同于 background-size: 150px auto。因此，背景图像的宽度会拉伸到 150px。渐变是没有内在尺寸的，因此 auto 的计算值是背景定位区域的高度，也就是 100px。于是，最终的渐变背景呈现的尺寸大小是 150px×100px，如图 3-85 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-17-15-10-48-eac178487de5f1fd59e7aa8df189c213-0204f.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 43.321718931475026%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsSAAALEgHS3X78AAABkklEQVQoz1WOSUvDQBSA+yMEQVC8CFqsd8GziFdxOYsHL9WjKOhBcLmLiNalWhdQL1q3g/tWNSoIpk26OKnVJm0KTTdjTSfP1+DSwgfDPL5v3pgeU3CbBFcC2Ax0s7TyVKu91MwXRVgutYqTr+EAdWfyJvpY2UUwAQDVIUfxhIGrVOmMXL0Yq7IXUbMUK5mOzj+r6GgUDBd2Ykas6fCFDwBM7kpNQ3zrmK9ltIi2cX/jILd1G0cHTc2InbHfzdSIN1dJT9dNf+99n5UpBCfWTtf5sZSXczotjHGzlsvHZ1PsZPPBbPuRrfWwkLmOo4mm/SdnMC/nfjZv/23WjZiMMC7LCtOwcVe/XghOrs0OaY1HR9eMTwLsYSxldfIBwTR9BXjuv2bKZx8sjgfzUhF1y0yZjbOx6AgpSlQIf8JCGEyCCnjBXsiC8PZB3IrAJf7xKAThFMLGSSRLsoasAlZ8BkwRUXwTBDWVlEIhzsO6eY8ovkdlUZYlWY6k00pElnx+3uf3BoWX15dAgOeJ16vEFfz5NzsZrPrPeiPEAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 17 15 10 48" title="" data-src="/static/2022-01-17-15-10-48-eac178487de5f1fd59e7aa8df189c213-fee1c.png" data-srcset="/static/2022-01-17-15-10-48-eac178487de5f1fd59e7aa8df189c213-a67b7.png 200w,\n/static/2022-01-17-15-10-48-eac178487de5f1fd59e7aa8df189c213-0b187.png 400w,\n/static/2022-01-17-15-10-48-eac178487de5f1fd59e7aa8df189c213-fee1c.png 800w,\n/static/2022-01-17-15-10-48-eac178487de5f1fd59e7aa8df189c213-0204f.png 861w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n</ul>\n</li>\n</ol>\n<h3 id="数值或百分比值"><a href="#%E6%95%B0%E5%80%BC%E6%88%96%E7%99%BE%E5%88%86%E6%AF%94%E5%80%BC" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>数值或百分比值</h3>\n<p>background-size 属性值无论是数值还是百分比值，都不能是负值，其中百分比值是相对于元素的背景定位区域计算的。背景定位区域是由 background-origin 属性决定的，默认值是 padding-box。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="2149025937688242700"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.bg-percent {\n   width: 100px;\n   height: 75px;\n   border: 20px solid rgba(0, 192, 255, 0.5);\n   padding: 20px;\n   background: url(./1.jpg) no-repeat;\n   background-size: 100% 100%;\n}`, `2149025937688242700`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.bg-percent</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 75px<span class="token punctuation">;</span>\n   <span class="token property">border</span><span class="token punctuation">:</span> 20px solid <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 192<span class="token punctuation">,</span> 255<span class="token punctuation">,</span> 0.5<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token property">padding</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>\n   <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./1.jpg<span class="token punctuation">)</span></span> no-repeat<span class="token punctuation">;</span>\n   <span class="token property">background-size</span><span class="token punctuation">:</span> 100% 100%<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>100% 是相对于 padding box 计算的，需要把设置的 padding: 20px 的大小计算在内，因此，此时背景图的尺寸是 140px×115px，效果如图 3-86 左图所示。如果我们设置 background-origin: content-box，则 100% 是相对于 content-box 计算的，在本例中，content-box 的尺寸是 100px×75px，因此，此时背景图的尺寸是 100px×75px，效果如图 3-86 右图所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-17-15-15-24-5deb39a9797993701c1dd7084903704d-1a5ee.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 799px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 47.559449311639554%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAACQklEQVQozz2QXUhTcRiHdxVEIVQSc9kcuwqDwjKyRlZIRUUXRYyMKV6EV11EddGVHyMlGs5Mm/sIdNTmhEIq6ANqXRiGzjxb2999uK+2s+3s7Jy5zbOzOed5O3PZy8PL7+bh9/IKvMGwzYHmMcyO3BjyrTLsBgBPgc0vOVw/bb/sCC05Xcjnn7NhTs+K3eVaxOxej9vt9giGA+xouDAeLY6FWT1e1ITz6kDeEOeIDTCQoCXgZaoCn3XJyh4j4F0GqiMwqG+alccx85nvwzJT36kH8mPd8nMDntyfEoxGuEShHM8yBMOQeSbNMlmWXchyhhgHXGUEX0ZaZnv2+sfqfz+uG7q2/4Rwl+SgaABleNlAAEP5rU9PByZbHCOyRzcaVfe6/AWYJLabZw2tmFrkm5RGtJIfXQ26s8JDYkk/ykRLoCdgjXQvDDcsaw44e8X9TbsVVy+681WZq8iftK1IWz93WTpxRTx+Say5IGo+Ku1zZSJbzTSJFpVCa9s+laz2/uEdd+VtaA2M/+VvumbPyZqPTbUq2R6FtOZW487zR+oGeZl/WAIKhQiu7lhWttteKD70Xp+f6PHnq/LW2dOmh++7219rOr4aO2eed759dlv/5M6gjwmtw1Bk05HjEAtoHbxFWFmHUBE+05w+xv2TjSRYGDBRYKZhOg0WuhJm0rC6CW/4TMFUCswkTFEVLBS8SoE1t91cLpfxaCyTySaTJEEkaZpOJAgcj1WJxxOpFEVRdAyPBYKhYDgcieI8pVKJl/8C0kO9d0Hf5zsAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 17 15 15 24" title="" data-src="/static/2022-01-17-15-15-24-5deb39a9797993701c1dd7084903704d-1a5ee.png" data-srcset="/static/2022-01-17-15-15-24-5deb39a9797993701c1dd7084903704d-2efd6.png 200w,\n/static/2022-01-17-15-15-24-5deb39a9797993701c1dd7084903704d-04e0a.png 400w,\n/static/2022-01-17-15-15-24-5deb39a9797993701c1dd7084903704d-1a5ee.png 799w" data-sizes="(max-width: 799px) 100vw, 799px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/77oou5?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>以上就是对 background-size 属性的不同类型属性值的介绍，下面介绍 background-size 其他的一些细节知识。</p>\n<p>background-size 属性值是可以作为缩写直接在 background 属性中设置的，但是需要注意的是，background-size 属性值只能写在 background-position 属性值的后面，并且使用斜杠分隔，其他写法都是无效的。例如下面的写法都是无效的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="29638644113419964000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 无效 */\nbackground: url(./1.jpg) no-repeat / 100%;\nbackground: url(./1.jpg) / 100%;\nbackground: url(./1.jpg) fixed / 100%;`, `29638644113419964000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 无效 */</span>\n<span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./1.jpg<span class="token punctuation">)</span></span> no-repeat / 100%<span class="token punctuation">;</span>\n<span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./1.jpg<span class="token punctuation">)</span></span> / 100%<span class="token punctuation">;</span>\n<span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./1.jpg<span class="token punctuation">)</span></span> fixed / 100%<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>下面这些写法都是有效的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="45440896594370314000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 有效 */\nbackground: url(./1.jpg) no-repeat center / 100%;\nbackground: 0 / 100% url(./1.jpg);\nbackground: linear-gradient(red, blue) round 100% / 100% scroll;`, `45440896594370314000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 有效 */</span>\n<span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./1.jpg<span class="token punctuation">)</span></span> no-repeat center / 100%<span class="token punctuation">;</span>\n<span class="token property">background</span><span class="token punctuation">:</span> 0 / 100% <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./1.jpg<span class="token punctuation">)</span></span><span class="token punctuation">;</span>\n<span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>red<span class="token punctuation">,</span> blue<span class="token punctuation">)</span> round 100% / 100% scroll<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>background-size 属性值作为缩写的语法是较近版本的浏览器才支持的，一些过时的浏览器是不支持的，主要体现在 2014 年之前的 iOS 和 Android 设备上。如果你的项目还需要兼容这些陈旧的浏览器，那么就需要将 background-size 属性分开写。</p>\n<h2 id="background-属性最成功的设计多背景"><a href="#background-%E5%B1%9E%E6%80%A7%E6%9C%80%E6%88%90%E5%8A%9F%E7%9A%84%E8%AE%BE%E8%AE%A1%E5%A4%9A%E8%83%8C%E6%99%AF" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>background 属性最成功的设计——多背景</h2>\n<p>background 多背景指的是一个 background 属性可以同时定位多个独立的背景图像，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="33583196026430497000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.multiple-backgrounds {\n   background: url(./1.jpg) no-repeat top, url(./2.jpg) no-repeat bottom;\n}`, `33583196026430497000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.multiple-backgrounds</span> <span class="token punctuation">{</span>\n   <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./1.jpg<span class="token punctuation">)</span></span> no-repeat top<span class="token punctuation">,</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./2.jpg<span class="token punctuation">)</span></span> no-repeat bottom<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>语法很简单，就是使用逗号分隔多个独立的背景定位语法。</p>\n<p>多背景原本的设计初衷是方便 PNG 背景图的定位，因为在那个年代，凡是装饰性的效果无一例外都是 PNG 小图片，想要实现尺寸自适应的背景图效果，需要嵌套多层 HTML 标签元素并将其一层一层定位，这种实现方法显然很麻烦。而多背景的出现很好地解决了这个问题，只需要一个 HTML 标签就可以实现任意个数的背景图的定位。</p>\n<p>然而人算不如天算，很快 Web 产品的设计趋势从拟物化设计转变成了扁平化设计，那种花哨的装饰背景变得越来越少，于是多背景一时间显得有些不实用了。</p>\n<p>好在这个时候有一个 CSS 新特性“横空出世”了，它改变了多背景的命运，这个 CSS 新特性就是 CSS 渐变。</p>\n<p>CSS 渐变本质上也是一种图像，它也可以作为 background-image 的属性值。为什么 CSS 渐变的出现让多背景重获新生了呢？有两个原因。</p>\n<ol>\n<li>CSS 渐变可以实现纯色效果，只要渐变起止颜色一样即可。</li>\n<li>background-size 属性也支持多背景，且可以任意控制尺寸。</li>\n</ol>\n<p>借助上面这两个特性，我们可以在元素的中心轻轻松松绘制一个深天蓝色的像素点，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="83115040191045270000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.pixel {\n   background: linear-gradient(deepskyblue, deepskyblue) no-repeat center / 1px 1px;\n}`, `83115040191045270000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.pixel</span> <span class="token punctuation">{</span>\n   <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>deepskyblue<span class="token punctuation">,</span> deepskyblue<span class="token punctuation">)</span> no-repeat center / 1px 1px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>既然任意像素点都可以实现，那么再配合 CSS 多背景，岂不是可以实现任意图形效果？毕竟所有图形都是由一个的像素点组成的。不过，我们在日常开发中不会使用拼接像素点的方法绘制图形，一是性能跟不上，二是实现的效果本质上还是位图，并不是矢量图，无法缩放自如。不过这个使用多背景拼接图形的原理在日常开发实践中是极其有用的。</p>\n<p>例如，要实现一个数值加减的图标按钮，使用 background 属性就可以轻松实现，这比使用 ::before 或 ::after 伪元素绘制简单多了，关键 CSS 代码示意如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="37666426484708704000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.btn-add,\n.btn-sub {\n   width: 1.5rem;\n   height: 1.5rem;\n   border: 1px solid gray;\n   background: linear-gradient(currentColor, currentColor) no-repeat center / 0.875em 2px, linear-gradient(\n            currentColor,\n            currentColor\n         ) no-repeat center / 2px 0.875em, ghostwhite;\n   color: dimgray;\n}\n\n.btn-sub {\n   background-size: 0.875em 2px, 0;\n}`, `37666426484708704000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.btn-add,\n.btn-sub</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 1.5rem<span class="token punctuation">;</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 1.5rem<span class="token punctuation">;</span>\n   <span class="token property">border</span><span class="token punctuation">:</span> 1px solid gray<span class="token punctuation">;</span>\n   <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>currentColor<span class="token punctuation">,</span> currentColor<span class="token punctuation">)</span> no-repeat center / 0.875em 2px<span class="token punctuation">,</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>\n            currentColor<span class="token punctuation">,</span>\n            currentColor\n         <span class="token punctuation">)</span> no-repeat center / 2px 0.875em<span class="token punctuation">,</span> ghostwhite<span class="token punctuation">;</span>\n   <span class="token property">color</span><span class="token punctuation">:</span> dimgray<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.btn-sub</span> <span class="token punctuation">{</span>\n   <span class="token property">background-size</span><span class="token punctuation">:</span> 0.875em 2px<span class="token punctuation">,</span> 0<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>实现的效果如图 3-87 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-18-10-21-04-6ffab863eb6f26d9728c0bc450f55867-ab313.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 677px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 35.89364844903989%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsSAAALEgHS3X78AAABBklEQVQY031QUW6DMAzl/qeo9lVpV0CadoCp0EBJQiEJCgGWsUFQOwIDZpVpYh/dk2O9PNuxHWe5YZ5n8EJklLI0lYxJQlLORZIwjNMkycAgBMpvMsBZNpBSTdNS1x9VVUOCUiUow/C1RoFImd8tVqrQut3vH3e7ByGKoqikLBhTrvvkus95rvO8+K/zOC6UcoTIMPx0vlxGY2zX2et1hOuf4pWtHlaC58vyHQwI57Aqk1K/6hYmAsIYh7RpmuYbnO2HWdu3bWtMZ4xpmqa3ff/ZAwEFAKK1djup43mIiwxKtH4j8RkTigk5pwwFpyCMThFGcOL45eCHYRRh6h8Dz0eExAfv+A0Ul4VFT5NCqQAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 18 10 21 04" title="" data-src="/static/2022-01-18-10-21-04-6ffab863eb6f26d9728c0bc450f55867-ab313.png" data-srcset="/static/2022-01-18-10-21-04-6ffab863eb6f26d9728c0bc450f55867-94813.png 200w,\n/static/2022-01-18-10-21-04-6ffab863eb6f26d9728c0bc450f55867-beb37.png 400w,\n/static/2022-01-18-10-21-04-6ffab863eb6f26d9728c0bc450f55867-ab313.png 677w" data-sizes="(max-width: 677px) 100vw, 677px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/mmvqpx?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>除了常规的图形效果，我们还可以借助多背景实现更复杂的背景纹理效果。例如，实现用来表示 PNG 透明背景的灰白网格效果，如图 3-88 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-18-10-24-04-3afc74bd954154a5282685a65ee8473f-54053.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 746px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.46648793565684%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAAA50lEQVQoz5VQWw6CMBDs/W9lVFQeiko0xhD4o60PLEShhBYXMFUBFSdtM5nMbmcXcc5v/yNJEngRFNdMSck72ooCStNUlSlfu1enB9Wx277Xgk8RHj83hnn1teP8Lu6zM6S23Tl2o12DP2fuzPldL2NfK4AE99ob5baFEFLKPM8FnCdkURSyQmUQNX+I1ZNlWRmb0mMUxZDlHIZA4igGQg/H0+lMCCWUBpgEAcaYYELhEAzigfMMMcYMy3Zd78KY5/srZ7Pb7ae6sVxvHGdrL9eGNZ/o1mA4Hmszw1yMtKlp2bo5Dy/sDs9HrNFFUNm8AAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 18 10 24 04" title="" data-src="/static/2022-01-18-10-24-04-3afc74bd954154a5282685a65ee8473f-54053.png" data-srcset="/static/2022-01-18-10-24-04-3afc74bd954154a5282685a65ee8473f-007e8.png 200w,\n/static/2022-01-18-10-24-04-3afc74bd954154a5282685a65ee8473f-4b2ab.png 400w,\n/static/2022-01-18-10-24-04-3afc74bd954154a5282685a65ee8473f-54053.png 746w" data-sizes="(max-width: 746px) 100vw, 746px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>实现的 CSS 代码如下，为了方便大家理解，CSS 背景相关属性都分开书写了：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="35094129467139035000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.square {\n   display: inline-block;\n   width: 304px;\n   height: 160px;\n   background-color: #fff;\n   background-image: linear-gradient(45deg, #eee 25%, transparent 25%, transparent 75%, #eee 75%), linear-gradient(45deg, #eee\n            25%, transparent 25%, transparent 75%, #eee 75%);\n   background-size: 16px 16px;\n   background-position: 0 0, 8px 8px;\n}`, `35094129467139035000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.square</span> <span class="token punctuation">{</span>\n   <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 304px<span class="token punctuation">;</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 160px<span class="token punctuation">;</span>\n   <span class="token property">background-color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>\n   <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>45deg<span class="token punctuation">,</span> #eee 25%<span class="token punctuation">,</span> transparent 25%<span class="token punctuation">,</span> transparent 75%<span class="token punctuation">,</span> #eee 75%<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>45deg<span class="token punctuation">,</span> #eee\n            25%<span class="token punctuation">,</span> transparent 25%<span class="token punctuation">,</span> transparent 75%<span class="token punctuation">,</span> #eee 75%<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token property">background-size</span><span class="token punctuation">:</span> 16px 16px<span class="token punctuation">;</span>\n   <span class="token property">background-position</span><span class="token punctuation">:</span> 0 0<span class="token punctuation">,</span> 8px 8px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>这里的方格效果的实现方法非常巧妙，利用线性渐变和元素的边角绘制两个等腰直角三角形，再利用 background-position 属性让两个三角单元视觉错位重合，以此实现方格效果，原理示意如图 3-89 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-18-10-30-57-e346bce07c23bf6a5310b025311c946e-3c344.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 36.18266978922717%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsSAAALEgHS3X78AAAA5ElEQVQY012QjZLCIAyE+/6vqOO12B+LFhFqgaZN3BbvzpFhmJDk2ywU8zyv6+q9t9YiwNUYE2OU30VEyIcQkF+WRT5Wke8oT9PEzIhBppRyMsuhByXw3zBmvpkQsBHwziDIrc45rTUkhDnn/2G4ncATBaLHOBIYNO1yGYYjc78n59YvFHAeJZeLKMXHI1cV1zVbK1o/tR7hBVoQul7ZGL7dZBgEVZzGFG8RDEEfvM1J9geDWWAnxvwo2f9gY/p+O7sO6sXnr56bdrD24f1PqdS5qZuubbuyUmW57cPpVPc6Ef0hL/9nlvtIuuGgAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 18 10 30 57" title="" data-src="/static/2022-01-18-10-30-57-e346bce07c23bf6a5310b025311c946e-fee1c.png" data-srcset="/static/2022-01-18-10-30-57-e346bce07c23bf6a5310b025311c946e-a67b7.png 200w,\n/static/2022-01-18-10-30-57-e346bce07c23bf6a5310b025311c946e-0b187.png 400w,\n/static/2022-01-18-10-30-57-e346bce07c23bf6a5310b025311c946e-fee1c.png 800w,\n/static/2022-01-18-10-30-57-e346bce07c23bf6a5310b025311c946e-3c344.png 854w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/wkiwtp?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/0psl82?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>正方形网格可以说是 CSS 渐变加多背景实现的比较基本的图案效果了，想看到更复杂、更“炫酷”的背景图案和纹理效果可以访问 Css3 Patterns Gallery 网站，部分效果如图 3-90 所示，有兴趣的读者可以研究一下相关的图案和纹理实现方法。另外，图案和纹理效果配合背景混合模式属性 background-blend-mode 还可以把视觉效果进一步升级。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-18-10-44-39-585d0113869c04170496abb334c3eabc-244cb.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 53.48837209302325%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACnklEQVQozyXPy0/TAAAG8HqUv8CESIj/gjEmHjxi4k09EYkSjEdwotEYQgyI46GRCZLgkAECGYNtBAaDuUehsK0Utj7Wbm3pY+1WNgYskcG6B9tsYvLlO/xO3wd44IkoKy7Z7IyobCIZ7DDLJBhS4dIYfWp18mJyaWOb4mRfnx6zWOesyx97ennpZAuKyUdngMHy8A8IvX/3Fgxiw7b0mj8F8xAowql173nPFwRGdYPjGyD84+bN1WetzW0v6+tv7ATpn+PbKCECB84dVlIW7SuCkll1QSgb54IY60c1hHd2paNT3OaR4+nA7n6EZEMU59oKxlMZXwBSMlng9YNx45jxel2daWb+VmND12c9fq8VudMyZ55tefEEXViLXrtNjZh7ZmzTSxtTi85ew5zDa299c9frdwLmLYSMScapae3YrHkxgFP8CsQugwQvOl2bknhET9gVNuFDiDDFoTHBF8BYOeHw2KXUMdD8tFlIcfETUFBkJJqklLNIRwfW3i6mTqVEEkGjug/9ri24qemRrrN7ZW192PAdCuwP9A8doATQ1fMpcZISTkLicRqm5KiSJfWDRN9AIpNVEnKEFoe+TQYOqFed3YYx044ftpgXUZL+pS1leMCx6d6DgvrnbVSY2POskFjob7Wm1qrLQVo36eM5OetwKAwfCGM0zS7sE1/dEC3Ibi8oyEfA8Miow2x53NiwveFyz48GfJu5fOlKzY+tIve7zPg+kRwa5P17c1Yr6PH1rbmbjb/hMGEymXAyBpznLstXlcvcRblSVdVCvlhWi6VCqawlly+UrioaFq8q+ULxv18UiqVy5eJS1RBQ82o0xqbSaVVVBUHEcUoU4jTDRqgYc8hhOEHTDBEhQ2Fc65jmZFSSk7VarVqt/gNrxPDMgaJefQAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 18 10 44 39" title="" data-src="/static/2022-01-18-10-44-39-585d0113869c04170496abb334c3eabc-fee1c.png" data-srcset="/static/2022-01-18-10-44-39-585d0113869c04170496abb334c3eabc-a67b7.png 200w,\n/static/2022-01-18-10-44-39-585d0113869c04170496abb334c3eabc-0b187.png 400w,\n/static/2022-01-18-10-44-39-585d0113869c04170496abb334c3eabc-fee1c.png 800w,\n/static/2022-01-18-10-44-39-585d0113869c04170496abb334c3eabc-244cb.png 860w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>最后讲一个关于多背景的小知识，那就是如果想要同时使用 CSS 渐变和 CSS 背景色，下面的语句是非法的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="40694100377132570000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 不合法 */\nbackground: deepskyblue linear-gradient(deepskyblue, deeppink);`, `40694100377132570000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 不合法 */</span>\n<span class="token property">background</span><span class="token punctuation">:</span> deepskyblue <span class="token function">linear-gradient</span><span class="token punctuation">(</span>deepskyblue<span class="token punctuation">,</span> deeppink<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>如果想让语句合法，则需要使用 CSS 多背景语法，并且颜色值必须放在最后，代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="53433646340591624000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 合法 */\nbackground: linear-gradient(deepskyblue, deeppink), deepskyblue;`, `53433646340591624000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 合法 */</span>\n<span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>deepskyblue<span class="token punctuation">,</span> deeppink<span class="token punctuation">)</span><span class="token punctuation">,</span> deepskyblue<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<h2 id="background-clip-属性与背景显示区域限制"><a href="#background-clip-%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%83%8C%E6%99%AF%E6%98%BE%E7%A4%BA%E5%8C%BA%E5%9F%9F%E9%99%90%E5%88%B6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>background-clip 属性与背景显示区域限制</h2>\n<p>先看一段 CSS 代码：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="87485376135873680000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.example {\n   width: 180px;\n   height: 80px;\n   border: 10px dashed deeppink;\n   background-color: deepskyblue;\n}`, `87485376135873680000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.example</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 180px<span class="token punctuation">;</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 80px<span class="token punctuation">;</span>\n   <span class="token property">border</span><span class="token punctuation">:</span> 10px dashed deeppink<span class="token punctuation">;</span>\n   <span class="token property">background-color</span><span class="token punctuation">:</span> deepskyblue<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>此时背景色会一直填充到虚线框的下方，如图 3-91 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-18-10-55-51-98efdf839b24baa55dbbe1aa9519f8d7-8b21d.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 518px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 63.51351351351351%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAACNElEQVQoz5WRTUwTQRiGZ4sn9YAnY+KFmIqCUjXeFCXRxCMHEw41nkSjYlDhwMEDxpMciMoFxEKJdKkSkPQ3srXbn7TU1v5R9ABtKBQo/YEWQkp3t7vzOXvgojGpyRyeed9vvnfmGwR3THBB2/Y5N/vACWfet05vy3BOo6azhsceaBhWT2Snns6BclBNZyaf+eDscPvohq7bD6oRxLV8ut8ZVtik+rGt5repwxbh9Mftq+9SR83cqfFCswx8na54/c3qERNfRxdJTa2hfHxyz3LDgF4MJWuNJeQFyoPRd6BcgDxAAP0bFATm4Iomg+DaREv/CpEO2SUFi5EDKBYToA4A/QF2XGPHJIy+zaDYXaZpKEM6EZXY1Sy5kQdedvjRQN+vE/pdsqHYag9TLCA3tPYnEag0N/uWkR9qqk8mlT7Q3zKhD6/mT9I7/5mMSXLb6wRydLjrtXn5zU5Zkm2XfCvk/AsOLIVDHtjznnkEl7Rh5ZhSV+i95wufp8mX9rb7/Bf1jSP5noeBkIpuHM13PQkuNIwTpaszFGqiLw9uPuqOlo4NIBzcBFsykirnfmTAtBRY5wrBLFgT0TUuF8qDJR5b49KRPJjjEaJEZOXnyn46ugXfyMAASiBiLPKABbIRK2VJKAGWKhwnCjyAJOxzWNwDLAplHovEAqnC4wqpR1iSbAzrC4Q9bu9OcXd9Iz1jtH6ZNprMszabIxSILcbjZstXg9HKMC6GYWemDKzTa7YyS4uJ3/VH+5yPH52JAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 18 10 55 51" title="" data-src="/static/2022-01-18-10-55-51-98efdf839b24baa55dbbe1aa9519f8d7-8b21d.png" data-srcset="/static/2022-01-18-10-55-51-98efdf839b24baa55dbbe1aa9519f8d7-ded9a.png 200w,\n/static/2022-01-18-10-55-51-98efdf839b24baa55dbbe1aa9519f8d7-33b16.png 400w,\n/static/2022-01-18-10-55-51-98efdf839b24baa55dbbe1aa9519f8d7-8b21d.png 518w" data-sizes="(max-width: 518px) 100vw, 518px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>出现此现象的原因是 background-clip 属性在起作用。background-clip 属性支持下面几个属性值：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="10931002490775255000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`background-clip: border-box;\nbackground-clip: padding-box;\nbackground-clip: content-box;\nbackground-clip: text;`, `10931002490775255000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">background-clip</span><span class="token punctuation">:</span> border-box<span class="token punctuation">;</span>\n<span class="token property">background-clip</span><span class="token punctuation">:</span> padding-box<span class="token punctuation">;</span>\n<span class="token property">background-clip</span><span class="token punctuation">:</span> content-box<span class="token punctuation">;</span>\n<span class="token property">background-clip</span><span class="token punctuation">:</span> text<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>其中 border-box 是默认值，表示背景图像或者背景颜色的显示区域是整个 border-box，也就是边框的下方也会显示背景内容。</p>\n<p>background-clip 属性最实用的应用场景之一就是控制背景颜色的显示范围。举个例子，我们想要模拟一个复选框效果，设计师设计的复选框尺寸只有 18px×18px，区域太小了，不容易点中，尤其是在移动端，此时我们就可以借助透明边框增大点击区域的范围，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="54684495180948310000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.checkbox {\n   width: 18px;\n   height: 18px;\n   border: 3px solid transparent;\n}`, `54684495180948310000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.checkbox</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 18px<span class="token punctuation">;</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 18px<span class="token punctuation">;</span>\n   <span class="token property">border</span><span class="token punctuation">:</span> 3px solid transparent<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>下面问题来了，复选框选中状态是有一个深色背景的，如何让透明边框区域不显示这个背景色呢？可以使用 background-clip 属性，我们设置 background-clip 属性的值为 content-box 或者 padding-box。完整代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="93495207925880390000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.checkbox {\n   display: inline-block;\n   width: 18px;\n   height: 18px;\n   border: 3px solid transparent;\n   box-shadow: inset 0 1px, inset -1px 0, inset 0 -1px, inset 1px 0;\n   color: gray;\n}\n\n.checkbox.checked {\n   color: deepskyblue;\n   background: currentColor;\n   background-clip: padding-box;\n}\n\n.checkbox.checked::before {\n   /* 选中效果略 */\n}`, `93495207925880390000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css{13}"\n              >\n                <span class="gatsby-code-button-language">css{13}</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight has-highlighted-lines" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.checkbox</span> <span class="token punctuation">{</span>\n   <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 18px<span class="token punctuation">;</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 18px<span class="token punctuation">;</span>\n   <span class="token property">border</span><span class="token punctuation">:</span> 3px solid transparent<span class="token punctuation">;</span>\n   <span class="token property">box-shadow</span><span class="token punctuation">:</span> inset 0 1px<span class="token punctuation">,</span> inset -1px 0<span class="token punctuation">,</span> inset 0 -1px<span class="token punctuation">,</span> inset 1px 0<span class="token punctuation">;</span>\n   <span class="token property">color</span><span class="token punctuation">:</span> gray<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.checkbox.checked</span> <span class="token punctuation">{</span>\n   <span class="token property">color</span><span class="token punctuation">:</span> deepskyblue<span class="token punctuation">;</span>\n   <span class="token property">background</span><span class="token punctuation">:</span> currentColor<span class="token punctuation">;</span>\n<span class="gatsby-highlight-code-line">   <span class="token property">background-clip</span><span class="token punctuation">:</span> padding-box<span class="token punctuation">;</span></span><span class="token punctuation">}</span>\n\n<span class="token selector">.checkbox.checked::before</span> <span class="token punctuation">{</span>\n   <span class="token comment">/* 选中效果略 */</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>此时，就可以得到一个视觉上是 18px×18px 大小，实际点击区域是 24px×24px 大小的复选框了，如图 3-92 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-18-11-14-36-1f07df6ba3b1b84385f122574cfa0c27-20538.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 33.941605839416056%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsSAAALEgHS3X78AAABHklEQVQoz5WR207CQBRF+5t+iv/kiyQ+GBQT4psPmIKU+0UCbaflIrTTmWq7nFLB8shJVvbZZyb7TDJWnucUpVONjCXyIEkiSRwnRFHJfm9miUJKdZ4VxLFCKWXOkrNaWZZRhCYqYbfa0bnrMnroYb8Jnl88nuor6obXV59Wa0Oz6dFouNRqnzjO3gTvEUKYpaVa/FWafrMNA4hC1p6L7wdHPK9U1xUXs8ILERIEwQXWbDLC6feRUcQidLl9/MBZLiBLUVqZRRqt9VlPfdVXsbptG2cwRMUR87Xg5n6K7brHV2dcX1bV5Jkm/zmYRl8VUvzBCevflO/ZbL4YDCdGt7iex7vdptN1GIzGLJcrev0h4/EEXwRMZ3PW5l419BcoUxUYmmVyHQAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 18 11 14 36" title="" data-src="/static/2022-01-18-11-14-36-1f07df6ba3b1b84385f122574cfa0c27-fee1c.png" data-srcset="/static/2022-01-18-11-14-36-1f07df6ba3b1b84385f122574cfa0c27-a67b7.png 200w,\n/static/2022-01-18-11-14-36-1f07df6ba3b1b84385f122574cfa0c27-0b187.png 400w,\n/static/2022-01-18-11-14-36-1f07df6ba3b1b84385f122574cfa0c27-fee1c.png 800w,\n/static/2022-01-18-11-14-36-1f07df6ba3b1b84385f122574cfa0c27-20538.png 822w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/uzwtw2?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>background-clip 属性的特点是剪裁。在 background-clip 属性值发生变化的时候，背景图像显示的尺寸是不会变的，变的是图像显示的范围。因此，background-clip 属性在一定程度上可以实现类似 clip-path 的效果，缺点是只能针对背景元素，优点是兼容性足够好，IE9+ 浏览器均支持。</p>\n<p>如果我们想要改变背景图像定位的范围，也就是定位的原点，可以使用 background-origin 属性。</p>\n<h2 id="background-clip-text-声明与渐变文字效果"><a href="#background-clip-text-%E5%A3%B0%E6%98%8E%E4%B8%8E%E6%B8%90%E5%8F%98%E6%96%87%E5%AD%97%E6%95%88%E6%9E%9C" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>background-clip: text 声明与渐变文字效果</h2>\n<p>background-clip: text 原本是 webkit 内核浏览器的私有声明，只在 Safari 浏览器和 Chrome 浏览器中有效。后来，因为这个特性还挺实用，所以其被加入了最新的 CSS 边框和背景模块规范，目前 Firefox 浏览器和 Edge15+ 浏览器也提供了支持。</p>\n<p>background-clip: text 可以让背景图像按照字符形状进行剪裁，此时我们只要隐藏文字，就可以看到字符形状的背景效果了。这个特性可以用来实现文字纹理效果和更常见的文字渐变效果，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="21092166171104055000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<p class=&quot;text-gradient&quot;>我是渐变文字</p>\n<style>\n   .text-gradient {\n      background: linear-gradient(deepskyblue, deeppink);\n      -webkit-background-clip: text;\n      background-clip: text;\n      color: transparent;\n   }\n</style>`, `21092166171104055000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text-gradient<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>我是渐变文字<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n   <span class="token selector">.text-gradient</span> <span class="token punctuation">{</span>\n      <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>deepskyblue<span class="token punctuation">,</span> deeppink<span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token property">-webkit-background-clip</span><span class="token punctuation">:</span> text<span class="token punctuation">;</span>\n      <span class="token property">background-clip</span><span class="token punctuation">:</span> text<span class="token punctuation">;</span>\n      <span class="token property">color</span><span class="token punctuation">:</span> transparent<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>效果如图 3-93 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-18-11-23-42-594536b34b8088f0598c2903462e20b0-932f0.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 24.970691676436108%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsSAAALEgHS3X78AAABB0lEQVQY013KyVLCMACA4b7/ezgePKgjbkU7FgF1HFw6FZLuG5RWSpM06ZaG6FX/4ze/MrXY3ZK+enWO+uOn8vSdOHk3sZgO6WfcONt2ZJCFx6KsnVt0Cqmfth8+U80KrhvleZrr41RTU9etHm432ih2IZ7r2/Fl4i7RYlE83qez2XdBBwjw0kRFxQEg6lUCVlhZTzZrLQku/N1LFt+E/pmHQBmqkX3iFF97FhL7CObzVFZdrEbhddhnbG8h59wnG6b0cTUw/ktNgPtd3bpI5I2gfNg1Anc8oZKKYdv0ERU156TjZTvglmdMSqnIvwkhLN8N4gRhAm3HtOCbYZhgtXLsf+fhIH8AB6QMei2fAVoAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 18 11 23 42" title="" data-src="/static/2022-01-18-11-23-42-594536b34b8088f0598c2903462e20b0-fee1c.png" data-srcset="/static/2022-01-18-11-23-42-594536b34b8088f0598c2903462e20b0-a67b7.png 200w,\n/static/2022-01-18-11-23-42-594536b34b8088f0598c2903462e20b0-0b187.png 400w,\n/static/2022-01-18-11-23-42-594536b34b8088f0598c2903462e20b0-fee1c.png 800w,\n/static/2022-01-18-11-23-42-594536b34b8088f0598c2903462e20b0-932f0.png 853w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>background-clip: text 声明实现渐变文字效果是一种侵入式的实现方式。如果你的项目还需要兼容 IE 浏览器，则建议使用 @supports 规则进行设置，这样可以保证在 IE 浏览器中文字依然可见，具体代码可参考对应的演示页面。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/wbdzbn?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>另外，如果使用 background-clip: text 声明实现渐变文字效果，那么原本彩色的 emoji 字符的颜色会丢失。</p>\n<h2 id="background-origin-属性与背景定位原点控制"><a href="#background-origin-%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%83%8C%E6%99%AF%E5%AE%9A%E4%BD%8D%E5%8E%9F%E7%82%B9%E6%8E%A7%E5%88%B6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>background-origin 属性与背景定位原点控制</h2>\n<p>先看一段代码，之前至少有两位同行请教过我类似的问题：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="86832683931561130000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.example {\n   width: 180px;\n   height: 70px;\n   border: 20px dashed;\n   background: linear-gradient(deepskyblue, deeppink);\n}`, `86832683931561130000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.example</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 180px<span class="token punctuation">;</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 70px<span class="token punctuation">;</span>\n   <span class="token property">border</span><span class="token punctuation">:</span> 20px dashed<span class="token punctuation">;</span>\n   <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>deepskyblue<span class="token punctuation">,</span> deeppink<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>此时，虚线框上边间隙的背景颜色为深粉色，虚线框下边间隙的背景颜色为深天蓝色，渐变图像并没有在整个元素区域完整显示，像被断开了，如图 3-94 所示，这显然不是我们想要的效果。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-18-22-43-06-8ff71f05f57db2c119533a0cf3ad55be-5e116.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 591px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 74.61928934010153%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsSAAALEgHS3X78AAACcklEQVQ4y62TW0gUYRTH5zF67amHItFcKixUNKnwrXvq5gWCiqDXMBJyFROiB6OLgxg+GIGbElKIty1dW9d0V1crwlBBDUV0wcvuqquQorgzv+ayTupqTx3mcM53zvf/z/fN+Y9A2GRZNuI2lyTUjjw8jNzfjzwwgLy8rNeU3lasasKuhFqiLf5uXlxEHhtDXliAtbVwW96bcGdDzaQtdck7FVHfidlGGAqFtFjztpqYk7G8Sn9ErfkFhxKjKL2ST71ZJDoplieXcvmYU4EpzkShpdDAbhIbhBsbG1q05N1DOJxAfMkASUW9CA/fcbzIRUrxd4T8Wo4WOkl9Oopw5ibnUhIMbARhKKRfpK5pEPP9bnLKZ7guTnJbnCVL9GIWp7glzpCt5Jnl05gLfvKszKVj1cHtJJTChI7aH5Sef489w4ntqp3mbDe2tM96nuWiOd2BPc1B5YVGrI/tBnbPKz8oyCNROEBD/Busia+p2neH6hNl1CRXYd1/F6vpOQ1nP3BDOEVK6ul/XVkfSpUylLjYKK4VV5L+spGk6INctpSTIX4i+dgRLuaWkFnhJM4UQ76lYO+h6JKQCT+aBpHCmlRfNjERISsDs5tsdtOUYevrEAyCKurfK7C6ugmI1GHEr6aKWJma5srJ1FFJ4+NIIyN6dLsVkXv1engYW13gP5swPTOLz+dXbrJCcGlJO1kwuMTcnA+/P0BgfoHJKS/+wDwB1ZW1Wlf7cwrOF94zr/isUhO+dLrp8fQx+mscT+835fOsMjg4hL2tHWdHF11uD3X1Tbi6e2nv6KTL1YNbyW0tbdgdHbS0tis9D319X2mytfIHynkdWHb8DK0AAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 18 22 43 06" title="" data-src="/static/2022-01-18-22-43-06-8ff71f05f57db2c119533a0cf3ad55be-5e116.png" data-srcset="/static/2022-01-18-22-43-06-8ff71f05f57db2c119533a0cf3ad55be-dd2a5.png 200w,\n/static/2022-01-18-22-43-06-8ff71f05f57db2c119533a0cf3ad55be-20405.png 400w,\n/static/2022-01-18-22-43-06-8ff71f05f57db2c119533a0cf3ad55be-5e116.png 591w" data-sizes="(max-width: 591px) 100vw, 591px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>之所以渐变图像会断开，是因为 background-origin 属性在起作用。background-origin 属性支持下面几个属性值：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="80131556295166510000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`background-origin: border-box;\nbackground-origin: padding-box;\nbackground-origin: content-box;`, `80131556295166510000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">background-origin</span><span class="token punctuation">:</span> border-box<span class="token punctuation">;</span>\n<span class="token property">background-origin</span><span class="token punctuation">:</span> padding-box<span class="token punctuation">;</span>\n<span class="token property">background-origin</span><span class="token punctuation">:</span> content-box<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>其中 padding-box 是默认值，表示背景图像定位的左上角位置是从 padding-box 开始的，默认的背景定位区域大小也是 padding-box 大小。因此，若希望渐变背景从边框位置开始就是一个完整的自上而下的渐变效果，只要设置 background-origin 属性值为 border-box 即可，代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="77291316861355330000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.example {\n   width: 180px;\n   height: 70px;\n   border: 20px dashed;\n   background: linear-gradient(deepskyblue, deeppink);\n   background-origin: border-box;\n}`, `77291316861355330000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.example</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 180px<span class="token punctuation">;</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 70px<span class="token punctuation">;</span>\n   <span class="token property">border</span><span class="token punctuation">:</span> 20px dashed<span class="token punctuation">;</span>\n   <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>deepskyblue<span class="token punctuation">,</span> deeppink<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token property">background-origin</span><span class="token punctuation">:</span> border-box<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>效果如图 3-95 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-18-22-54-03-4f6de61fdecf29f471632a86c64b8f58-f2909.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 768px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 58.072916666666664%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAACYElEQVQoz2OIiIjQ0tYxVJI2rZ5qde6/kWeQgZqigYqcSXGX1ZX/hp6BBurK+gqSJoXtVpf/GwVEGWsoq6qrd3d3////n0FPV5cBCLgE+OI6Zdb+YtV3Y+AVY+AW5g2rl930n1XPjYFPgoGDnyekRnbjfzazACYeYaDy3Lw8kGYdTVVmYSWnaU8dpzwGIofJjyDIccojZC5IZPJDpxkvrJuPAzXn5eaANAdEluvYF8a23o1uuhXddCO6+VZ0820wQuUCZRuvx7Tei6g5K6sd2t67GKR52qTHFYU3KgrOlOcTg05XFp0rK7i1bfNrkOb5pQfaAjZNiNk3MWbf5JgDE6L39UfvBSJ0bjSYG7NvQuzeJu+1e+ZfBmm2NrXV4zPc439gs/eOtZ6bt3nv2uGzB4igXB8Qd6fPni3eO9Z4bNrlu3+Z+ypOBu7qkmqQZk19LVFGwakGTRtNpp+xXrvAoGuKXuNk3Yb1JlPP26wHcqfqNU7SrV9rPOWszdplRv0t2kWg0M4Hh7YuJKoYGEp4/T7ILNRhkYVw0zidf8otV2MRh3BTeVy+yy41ZlFkYAZxc3NzQZqXLFnc293T2ddzYvLG/zOvLJ80r6+/v3dC/9GpG/7Pur5s4rz+CRO6J/QdmrLu/+zrayYt7JvY39XReeDAAZDmf//+/QeD3////f6PAD/+/fnxHyQFkf/z/9/nf7/+wBX//v3t+3eGazdvX7p87cOHD7du3jl94uyePfuPnzy9c/feY8dPHTxw9NDhY0eOHt+4ZduhQ8eOHjx27NjJPfsOHDh05OSp0+cvXgEAqPODtdT8As4AAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 18 22 54 03" title="" data-src="/static/2022-01-18-22-54-03-4f6de61fdecf29f471632a86c64b8f58-f2909.png" data-srcset="/static/2022-01-18-22-54-03-4f6de61fdecf29f471632a86c64b8f58-60902.png 200w,\n/static/2022-01-18-22-54-03-4f6de61fdecf29f471632a86c64b8f58-48de7.png 400w,\n/static/2022-01-18-22-54-03-4f6de61fdecf29f471632a86c64b8f58-f2909.png 768w" data-sizes="(max-width: 768px) 100vw, 768px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h2 id="space-和-round-平铺模式"><a href="#space-%E5%92%8C-round-%E5%B9%B3%E9%93%BA%E6%A8%A1%E5%BC%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>space 和 round 平铺模式</h2>\n<p>background-repeat 属性新增了 space 和 round 这两个关键字属性值，下面就具体介绍其作用。</p>\n<h3 id="space"><a href="#space" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>space</h3>\n<p>让背景图像尽可能地重复，而不进行剪裁，每个重复单元的尺寸不会变化。其中第一张和最后一张图像固定在元素的两边，然后通过拉伸空白区域让剩余的图像均匀分布，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="83029265834724490000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.space {\n   background: url(./1.jpg) center / auto 100%;\n   background-repeat: space;\n   outline: 1px dotted;\n}`, `83029265834724490000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.space</span> <span class="token punctuation">{</span>\n   <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./1.jpg<span class="token punctuation">)</span></span> center / auto 100%<span class="token punctuation">;</span>\n   <span class="token property">background-repeat</span><span class="token punctuation">:</span> space<span class="token punctuation">;</span>\n   <span class="token property">outline</span><span class="token punctuation">:</span> 1px dotted<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>效果如图 3-96 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-18-22-57-05-d4c2f5a9ad94496b077520c26693f28d-381aa.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 32.26919758412424%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsSAAALEgHS3X78AAABuUlEQVQY03WN3UtTAQBH71uf21goyjR1y0V+FbFeerpU5nIZRB+QMHfBmKJYWA8RC0dBVAtkOCWEpWtRDPYiBdKUVd4tc8qWOjZjbKMCI3oYMxUtI077B/w9HTgcfoLsvcZEv0jWZ2LWZcR9qxHbFZHUvEzI04E8KJJ5YSLsNOLsFrnfcZ7v6Qjj/eeIjpwm9ayZycdNPLKepM/SiBAbNTFlV5F1lxG5U0qPQc1+xS6mp97w2XsK+a6Sr0/LmOgp4XL1Hmoqq1hOhZhxaJlzFPNlWIPPXMyZKiUatQph8eUFFobLSdr1fOjVEbyo5VJtCZPBAN/GWph3aUjY9MjdOl6Zyjl7rJ50IkzS00DcqWXx9gHeXdXia64snGkQZrxNxFr24q8tordOhbVOyQn9TkJvx1l6LhI5vpuR+n10HVIi1ezAaKggk3xP9EEFH4+qGTisxnpQgXREgUGnQEgH7hG/0UrUI7E0KhF2WQg6zPzIRll+befTzVYS/nYS7namhwp+8Dq5n3EyTzqZs5lJ+iViQxbkgTYCDyUEtlk+/4u1jS3+FHh98y+rG7/Jr6yxsrpOLpfn3zbdf7CUQAGBA/rRAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 18 22 57 05" title="" data-src="/static/2022-01-18-22-57-05-d4c2f5a9ad94496b077520c26693f28d-fee1c.png" data-srcset="/static/2022-01-18-22-57-05-d4c2f5a9ad94496b077520c26693f28d-a67b7.png 200w,\n/static/2022-01-18-22-57-05-d4c2f5a9ad94496b077520c26693f28d-0b187.png 400w,\n/static/2022-01-18-22-57-05-d4c2f5a9ad94496b077520c26693f28d-fee1c.png 800w,\n/static/2022-01-18-22-57-05-d4c2f5a9ad94496b077520c26693f28d-381aa.png 1159w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>space 主要用来平铺小尺寸图像，但是凡事都有例外，万一背景图像的尺寸比背景定位区域的尺寸还要大，那么会有怎么样的效果呢？</p>\n<p>首先，原本无效的 background-position 属性此时就生效了，也就是背景显示区域只能显示一张图像的情况下，我们是使用 background-position 属性来控制这张图像的定位的。</p>\n<p>其次，如果背景显示区域尺寸比平铺图像尺寸小，则在不同浏览器中的渲染效果是不一样的，在 Chrome 浏览器和 Firefox 浏览器中，图像可以显示；但是在 IE 和 Edge 浏览器中，图像无法显示，一片空白。这个兼容性差异最终导致如果要使用 space 平铺，要么不在 IE 浏览器中渲染，要么保证元素尺寸比平铺图像的尺寸大，这在一定程度上限制了 space 平铺模式的普及。</p>\n<h3 id="round"><a href="#round" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>round</h3>\n<p>背景图像会被拉伸，并保证不留间隙。随着定位区域空间的增加，如果（假设图像都是原始尺寸下的）剩余空间大于图像宽度的一半，则添加另外一张图像。在添加下一张图像时，当前的所有图像都会压缩以留出空间放下这个新添加的图像，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="72482032497392710000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.round {\n   background: url(./1.jpg) left / auto 100%;\n   background-repeat: round;\n   outline: 1px dotted;\n}`, `72482032497392710000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.round</span> <span class="token punctuation">{</span>\n   <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./1.jpg<span class="token punctuation">)</span></span> left / auto 100%<span class="token punctuation">;</span>\n   <span class="token property">background-repeat</span><span class="token punctuation">:</span> round<span class="token punctuation">;</span>\n   <span class="token property">outline</span><span class="token punctuation">:</span> 1px dotted<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>效果如图 3-97 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-18-23-02-50-8b171e57f9857d5e8f28ec3132856294-8b318.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 668px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 92.51497005988024%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsSAAALEgHS3X78AAAD1klEQVQ4y42Te1CUVRiHtz+0GEKDFWQDZWl3xktmMKEgE2KTpTXjpOU/1VSM3GyKBBkVjCCiwQHUZgAlsLGBMJTCygJFiMtSq1wFlosrYJNYwrorsCwILLtP37K7CSbVd+Y35/vOvL/nvOe87yeqyHmL3y+8i7o4kvr8CApTQslPDuVibjiNRRH0l+1GVRhBpfCdF7+LkiNhVOaFoz4XSd93kTQVRHD2cBg5+9/m+rUORGWxC+nKWkpXxhI+f/Ux1i11wGeZA6XxLtQli+k97ooyXkzMBieWOT5MxPNO1CSJaU5fQk+mK2dCnNkmfxT3Rx6irqYaUcsxd7qzV9CTJkcZLuOrLVKCV0tQZMjoPCmn57Cc1kQZytdlRPt5ErrVk6vCuuqYnN4MOZejZJTvkBEsFVNZo0DUHLsIha8HqT5uvL9GTKSvmGdXL6LsUzc633DnzEo39q11YY+gV1Yt5p0tzrSlSagPlJC11uqJ9nNlvbcD1TU1iNp3Pk11VCDKtABKovwpEJQfG0T7kedo3r6JuvRgfvl4E6f3buTL94L4/lAw6uiN1L7pj/JoAD/u8edUjD+5u3zoa2tAZDRNYRlmYQYjmO6i6+/gZk87dzQqhgcE/aHCqO1g6lYHgz2t6Ab7mbaMaYvH5rPMZhMi7I/ZOk2O6ShLWUPRXgmd2VKuZUmpPbicL8I8eG29hM1POJCbkTgTazKZZmzme3ZEZrMZq0w24G1ajj2FMvVx2nKk9BdIUWd48fUOD5ICPVjusID4uA9nYqeNRu75rfo7QztwYlSLMtOXKyeldB+QU/6yN9+EeHPiBS9Ktst4Ue5EXII1w+npae5//gEc12uo/syL1pecqPR0onCbI4eecSD0yYXs9nNkq1xEdvL+/wO03oLROM6NhnwGi07QqziNpruYkdZiDO3fMtR8ihsXs4W1S3OSeCDQDrVxLXXn8g+pXK9IQn3+E85m7uNSVTn3J/CfGdp3vTt0k/MfedCW7khFjDPrFos4GPuBrRhT80LnBU7oB2nO8+XqcW/UiSs5GuBCcoK1uibh7uxV/dcjzwYa9APUp62gKsiNBB8JO70XkJJ0YA5w3iPP6SWTrdqTGlrjNqMI86MsYQO5IauoKsiwAef23+wTiubbyQKeHB9iYkInlH7YKtPkg2NnMUR288CghpERvaARDGNjwm9lZnLKKLSRmWH9GBrtEIO3tWi1Ov68NYBeP4pOd4dRg2FuhvYGrapWoOrook3ViVYINIyOzry3XmmnobGF+sYmfiotp7buV86VXqChqYWfq6rp6fvNeg024F92/MF5rJFFqAAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 18 23 02 50" title="" data-src="/static/2022-01-18-23-02-50-8b171e57f9857d5e8f28ec3132856294-8b318.png" data-srcset="/static/2022-01-18-23-02-50-8b171e57f9857d5e8f28ec3132856294-d09a1.png 200w,\n/static/2022-01-18-23-02-50-8b171e57f9857d5e8f28ec3132856294-9165c.png 400w,\n/static/2022-01-18-23-02-50-8b171e57f9857d5e8f28ec3132856294-8b318.png 668w" data-sizes="(max-width: 668px) 100vw, 668px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>在 Firefox 浏览器中，设置了 round 平铺后 background-position 属性是会被忽略的，这个其实是有问题的（以后的版本可能会修复此问题），而在 IE 浏览器、Edge 浏览器和 Chrome 浏览器中都没有这个问题。因此，为了保证兼容，我们在使用 round 平铺的时候，一定要设置 background-position 边缘定位，而不能设置居中定位。</p>\n<p>查看图 3-96 和图 3-97 所示的效果</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/zj6758?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>space 和 round 这两个关键字属性值除了可以设置背景图像的平铺方式，还改变了 background-repeat 属性的语法，那就是可以分别指定水平和垂直方向上的图像平铺方式。例如我们可以指定水平方向是 round 平铺，垂直方向是 space 平铺，语法如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="63463839418466206000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`background-repeat: round space;`, `63463839418466206000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">background-repeat</span><span class="token punctuation">:</span> round space<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>在 IE9 浏览器之前，background-repeat 只能使用一个关键字属性值。下表所示的是单个 background-repeat 属性值对应的双值语法。</p>\n<table>\n<thead>\n<tr>\n<th align="left">单值</th>\n<th align="left">等同的双值</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align="left">repeat-x</td>\n<td align="left">repeat no-repeat</td>\n</tr>\n<tr>\n<td align="left">repeat-y</td>\n<td align="left">no-repeat repeat</td>\n</tr>\n<tr>\n<td align="left">repeat</td>\n<td align="left">repeat repeat</td>\n</tr>\n<tr>\n<td align="left">space</td>\n<td align="left">space space</td>\n</tr>\n<tr>\n<td align="left">round</td>\n<td align="left">round round</td>\n</tr>\n<tr>\n<td align="left">no-repeat</td>\n<td align="left">no-repeat</td>\n</tr>\n</tbody>\n</table>\n<p>space 和 round 适合用在装饰性的背景图中，不过当下推崇扁平化设计，追求纯粹的色彩，并不推崇华丽的背景图案效果，因此 space 和 round 值在实际项目开发中用得并不多，这是 10 年前的我没有想到的。</p>\n<h2 id="可以指定-background-position-的起始方位了"><a href="#%E5%8F%AF%E4%BB%A5%E6%8C%87%E5%AE%9A-background-position-%E7%9A%84%E8%B5%B7%E5%A7%8B%E6%96%B9%E4%BD%8D%E4%BA%86" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>可以指定 background-position 的起始方位了</h2>\n<p>由于 background-position 的百分比定位的计算比较特殊，因此在过去，我们想要实现一个距离元素右下方特定距离的定位就不太容易，唯一的方法就是借助透明边框帮助定位。好在 IE9 浏览器已经开始支持指定 background-position 的起始位置了，于是我们想要让背景图像在距离右下方 20px 的位置就非常简单了：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="91676902896552840000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.example {\n   width: 300px;\n   height: 200px;\n   border: solid deepskyblue;\n   background: url(./1.jpg) no-repeat right 20px bottom 20px;\n}`, `91676902896552840000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.example</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>\n   <span class="token property">border</span><span class="token punctuation">:</span> solid deepskyblue<span class="token punctuation">;</span>\n   <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./1.jpg<span class="token punctuation">)</span></span> no-repeat right 20px bottom 20px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>效果如图 3-98 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-18-23-19-32-1fa58a8a65b566f49752369b5f528dda-51e2b.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 77.9582366589327%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAAsSAAALEgHS3X78AAACDElEQVQoz5WTTWgTURDHc/RSbcUSsJhN0wSl4sGLUDyIth5KpWrrQUF6UCjoxZvQSD3WKj2UelXc5CTqvSWQhpCapIltsuluNmysbQLGbr7I136+3TduUi2CpGmH/xuGgd/MPOY9E9WAb3XYOI426xCpwbtfYAIAHY5tKoYP+zBq8UeXYfIBfFhnjI3zr3Arox4J7jh2O1iq8vksWy9waiUtFdNKiUOldH4nVeUzCgayHYz1Zo5beUk+7Q0vDmbdF2Jvznuc9vkp+/QV8+snY4KqufbawVgzfNbrXJ7piiz0c28Jep5wTfVNDJrPdJ0YG7kuIb0DnPO/iM71xJbs3922PdLmmyZW7lofDJy6ee1GE+YPhX94nMGFbs7l2Lhj9T4mPk9avPess1dPj48Oi2onOOWZWXvVzQwNfHSce365b9xivn/x7JDj5O1bI6LyF/7/kWgteHvdGZ/oCV6yLc8SMWf/p4cW8pF1abLX/WzU6EzybVeFm0Wr2woXkDKh2m4Q8yH8MwS5MGS/Qo5SdPzeWFVSgEQDaOGPtloxIzZ9UoakBiyCFAJGaYpWYcvwMhjf6UseTBUENQQlWSsrWlnWKiouSqggKEZcEJWSpBZFZT8oy6goqhVVryBsIAi3xjYsQSVYhmWTKUkQAoG11VW/z+ePb1J0gs7s7MbjVDQSZWhmPRSu1xsHd/sNdo4/BNIIZLgAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 18 23 19 32" title="" data-src="/static/2022-01-18-23-19-32-1fa58a8a65b566f49752369b5f528dda-fee1c.png" data-srcset="/static/2022-01-18-23-19-32-1fa58a8a65b566f49752369b5f528dda-a67b7.png 200w,\n/static/2022-01-18-23-19-32-1fa58a8a65b566f49752369b5f528dda-0b187.png 400w,\n/static/2022-01-18-23-19-32-1fa58a8a65b566f49752369b5f528dda-fee1c.png 800w,\n/static/2022-01-18-23-19-32-1fa58a8a65b566f49752369b5f528dda-51e2b.png 862w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/2ev558?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>我多次看到有人是这样实现图 3-98 所示的效果的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="85260022541975490000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.example {\n   background: url(./1.jpg) no-repeat calc(100% - 20px) calc(100% - 20px);\n}`, `85260022541975490000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.example</span> <span class="token punctuation">{</span>\n   <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./1.jpg<span class="token punctuation">)</span></span> no-repeat <span class="token function">calc</span><span class="token punctuation">(</span>100% - 20px<span class="token punctuation">)</span> <span class="token function">calc</span><span class="token punctuation">(</span>100% - 20px<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>虽然这种写法也有效果，但是性能不够好，而且这种写法可能会让 IE9 浏览器崩溃。因此，请使用 background-position 属性的原生语法实现。</p>\n<p>下面逐个介绍 background-position 属性的具体语法。</p>\n<h3 id="1-个值语法"><a href="#1-%E4%B8%AA%E5%80%BC%E8%AF%AD%E6%B3%95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1 个值语法</h3>\n<p>如果只有 1 个值，无论是具体的数值、百分比值，还是关键字属性值，则另外一个值一定是 center，如下表所示</p>\n<table>\n<thead>\n<tr>\n<th align="left">单值</th>\n<th align="left">等同的双值</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align="left">20px</td>\n<td align="left">20px center</td>\n</tr>\n<tr>\n<td align="left">20%</td>\n<td align="left">20% center</td>\n</tr>\n<tr>\n<td align="left">top</td>\n<td align="left">top center</td>\n</tr>\n<tr>\n<td align="left">right</td>\n<td align="left">right center</td>\n</tr>\n<tr>\n<td align="left">bottom</td>\n<td align="left">bottom center</td>\n</tr>\n<tr>\n<td align="left">left</td>\n<td align="left">left center</td>\n</tr>\n<tr>\n<td align="left">center</td>\n<td align="left">center center</td>\n</tr>\n</tbody>\n</table>\n<h3 id="2-个值语法"><a href="#2-%E4%B8%AA%E5%80%BC%E8%AF%AD%E6%B3%95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2 个值语法</h3>\n<p>如果有 2 个值，则分 3 种情况</p>\n<ol>\n<li>2 个值都是关键字属性值。left 关键字和 right 关键字表示水平方向，top 关键字和 bottom 关键字表示垂直方向，因此 top right 和 right top 的效果是一样的。需要注意的是，不能包含对立的方位，也就是说 left right 和 top bottom 这样的语法是无效的。</li>\n<li>1 个值是关键字属性值，另外一个值是数值或百分比值。如果数值或百分比值是第一个值，则表示水平方向，另外一个关键字属性值就表示垂直方向。如果数值或百分比值是第二个值，则表示垂直方向，另外一个关键字属性值就表示水平方向。因此属性值 20px left 是非法的，因为 20px 是数值且是第一个值，此时第二个值应该表示垂直方向，但是 left 显然是水平方向关键字属性值，出现了对立方位，所以为无效语法。</li>\n<li>2 个值都是数值或百分比值。第一个值表示水平方向，第二个值表示垂直方向。因此 20px 20% 表示在距离默认定位原点（左上角）水平方向 20px、垂直方向 20% 的位置开始定位。</li>\n</ol>\n<p>background-position 属性的初始值是 2 个值，即 0% 0%，其等同于 left top。</p>\n<h3 id="3-个值和-4-个值语法"><a href="#3-%E4%B8%AA%E5%80%BC%E5%92%8C-4-%E4%B8%AA%E5%80%BC%E8%AF%AD%E6%B3%95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3 个值和 4 个值语法</h3>\n<p>数值和百分比值表示偏移量，第一个值一定要是关键字属性值，这个关键字属性值用来表示偏移是从哪个方向开始的。如果是 3 个值，则认为缺少的偏移量是 0。因此，20px left top 一定是不合法的，其第一个值不是关键字属性值。left 20px right 也是不合法的，因为 left 和 right 方位对立。left 20px top 就是合法的，其等同于 left 20px top 0px，表示距离左侧 20px，距离顶部 0。由于 background-position 默认的定位就是 left top，因此 left 20px top 0 也等同于 20px 0px。下面的 CSS 代码展示了相对于左上角偏移的各种语法和计算值：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="62312651558490325000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`background-position: left 10px top 15px; /* 10px 15px */\nbackground-position: left top; /* 0px 0px */\nbackground-position: 10px 15px; /* 10px 15px */\nbackground-position: left 15px; /* 0px 15px */\nbackground-position: 10px top; /* 10px 0px */\nbackground-position: left top 15px; /* 0px 15px */\nbackground-position: left l0px top; /* 10px 0px */`, `62312651558490325000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">background-position</span><span class="token punctuation">:</span> left 10px top 15px<span class="token punctuation">;</span> <span class="token comment">/* 10px 15px */</span>\n<span class="token property">background-position</span><span class="token punctuation">:</span> left top<span class="token punctuation">;</span> <span class="token comment">/* 0px 0px */</span>\n<span class="token property">background-position</span><span class="token punctuation">:</span> 10px 15px<span class="token punctuation">;</span> <span class="token comment">/* 10px 15px */</span>\n<span class="token property">background-position</span><span class="token punctuation">:</span> left 15px<span class="token punctuation">;</span> <span class="token comment">/* 0px 15px */</span>\n<span class="token property">background-position</span><span class="token punctuation">:</span> 10px top<span class="token punctuation">;</span> <span class="token comment">/* 10px 0px */</span>\n<span class="token property">background-position</span><span class="token punctuation">:</span> left top 15px<span class="token punctuation">;</span> <span class="token comment">/* 0px 15px */</span>\n<span class="token property">background-position</span><span class="token punctuation">:</span> left l0px top<span class="token punctuation">;</span> <span class="token comment">/* 10px 0px */</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>background-position 属性也可以用在多背景中，用于分别指定每一个背景图像的定位，如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="24317271111647363000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.example {\n   background-image: linear-gradient(deepskyblue, deeppink), url(./1.jpg);\n   background-position: 0 0, right 3em bottom 2em;\n}`, `24317271111647363000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.example</span> <span class="token punctuation">{</span>\n   <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>deepskyblue<span class="token punctuation">,</span> deeppink<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./1.jpg<span class="token punctuation">)</span></span><span class="token punctuation">;</span>\n   <span class="token property">background-position</span><span class="token punctuation">:</span> 0 0<span class="token punctuation">,</span> right 3em bottom 2em<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>总结一下，IE 浏览器从 IE9 版本开始就已经支持 background-position 属性的 3 值和 4 值语法，因此不要再使用 calc() 函数实现相对于右下方的定位了。</p>\n<h1 id="outline-相关新属性-outline-offset"><a href="#outline-%E7%9B%B8%E5%85%B3%E6%96%B0%E5%B1%9E%E6%80%A7-outline-offset" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>outline 相关新属性 outline-offset</h1>\n<p>outline-offset 属性用于改变 outline 属性设置的轮廓的偏移位置。</p>\n<p>以我的经验来看，outline-offset 属性使用负值来缩小轮廓的频率要比使用正值来扩大轮廓的频率高很多。</p>\n<p>默认情况下，我们给元素设置的 outline 轮廓都是紧贴元素外边缘的，但是，如果多个元素紧密相连，那么 outline 轮廓就会出现互相覆盖遮挡的情况，如图 3-99 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-18-23-42-17-e26dd31e261f311a6a0d05372cf1d9ba-01cf0.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 69.87399770904926%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsSAAALEgHS3X78AAADA0lEQVQoz23Sa0xScRQA8Lu2PrRVH1qtD61aba7Ht+xLa62tzd6tmq1WLVs+p9NhqyyLIjU1pFrOSKICwSds4YvEsASlTOR6IcW4PAIREUQegqEBF+6J68fs7Ozsf87Ob/8vB4GVQZJUHR0FsxksFlCrqcQwGB+nJigKCgUMDydbJE7ECYKIxZIl+YhHo0SCwiR4ZiE4D/MBcLvAPQN2K4zpwOUE1zSYcZi0gtOJrPw4RMBcDHwk+BLJJOcAwoEgTM9C4t9NRCzoqGMKKxlCcWOnmCe5fqdNpPeawzHUs6T1/tEHIroQOBzfSI8ovjhIBBWxkDIa6CUWzRQWvm5kFDHSj+SfOFxw7mjxxtSSLo0tshCyz3hds96g3x9ZiC7Nfvjjvh/z10XmXkW8nCVndTSgpDCqHOgWCFvY756WcfKya9Iy65qHzN9xuwqfxqwui8PtcC/4LYJFx61oqDY8Ux11s8O2yiWPnMJOg86okpswdHxML5cpH7I7yyTqt/LR9hFcjpkw3Ka3+RyjVV4s3W26G/xxKaC94VGfd5maKfzbaSBjCyEXbtAMqqQSToMgi9NzgyWu6xwUq7CBMVzzY6pPWtTbsr3p/d6J/tSvfft6JNsmxmspPKnumsJ1OpnoE5/Lr6ouvsmo6tZk1nZcqWgoedXK65Ibf829aykoZW54+GJnkyjlmSClon7TIMpaxuICGbOwraKc9+hxPZ1VRmeL1WaxxprTMJBG592sF/20+2qFxacL12QxttJqttCe77hcura9n0nhHtre1jNI84V1lYfWZ+/ZfHDXvgbZkEprvNeqOl/ReJbOLuFKL9CO7z6F7L+46lg+crJo9YEMhN/5gMJK7qOeJxnSyqyO8lwRPavmdmGLxthn83GGLS/7x241y3MEfSVcJuPltXJ2LouXy+Lnlb25qtK2U3jlhYUTECAgGIf5OBlKQBggCv8PhCSpqwsvhlVfh3CjacoxPe/zG/QTZqMJHUEVXxQa9YgW03Z9lH363K/WoBMGQ3I/saz+AjTvfaAfKRRSAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 18 23 42 17" title="" data-src="/static/2022-01-18-23-42-17-e26dd31e261f311a6a0d05372cf1d9ba-fee1c.png" data-srcset="/static/2022-01-18-23-42-17-e26dd31e261f311a6a0d05372cf1d9ba-a67b7.png 200w,\n/static/2022-01-18-23-42-17-e26dd31e261f311a6a0d05372cf1d9ba-0b187.png 400w,\n/static/2022-01-18-23-42-17-e26dd31e261f311a6a0d05372cf1d9ba-fee1c.png 800w,\n/static/2022-01-18-23-42-17-e26dd31e261f311a6a0d05372cf1d9ba-01cf0.png 873w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>此时就可以使用 outline-offset 属性优化这个小小的体验问题，CSS 代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="20568942329357490000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`img {\n   outline-offset: -3px;\n}`, `20568942329357490000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">img</span> <span class="token punctuation">{</span>\n   <span class="token property">outline-offset</span><span class="token punctuation">:</span> -3px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>借助 outline-offset 属性让轮廓范围收缩，这样轮廓就只会在图片所在区域显示，而不会有轮廓相互覆盖的问题了，如图 3-100 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-18-23-44-10-4f490b2ff9172f374d96550e591b2269-822e9.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 53.00261096605744%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAADEklEQVQoz22STUybBQBAPxOMS0w8acaBEDMTZ6JpPBidJi5xmYZMIZkxTNAtJCjrXLDOZkM3kBHRUgadA0ZL6voxko3KsKW0VTbkp4DFYhntCKzQFQr9oaP9oHVQwGU+eza+5F3f6QmnSqs5kl/JKXkdLapWPi6sIfdAI+LdJM74Nn3hNP3RNMOxNI74P/SGlkmEm3m0doW/pevsJDrZzpiOGdhaH0HQfHOB8o8qeOeNExQWnOHgW0pefK8Ox3yMB5JEMBInEl1Fiid4+NcWk6E5wgtVmaCGHUnL1qo2E/2RdKSBrbgVwSJ20HlZT5NKi7ysnuKj33PwUx03PCFGpgOM+sJMBqLcXYoSWUkx6vcSmlHwUKplM6FmM1LHzkoLGwu1bISNCJ4+M1ODN5me8jI05KStzURZrZHaXzwY+iexuee5dXueidkAc4tx7HfGWfr9EMlgDcl7J0l5Skh6ylj7s4jwdDPCo+0Um1KYoM+L2znGoK2Hi+1Gilv7ON1mzUQn6B7zMODx4Z0NIw7bGLXK6L0qw2F6mXvDrzE58Aoj1j14XF8jJFeDRLw3cVsM9OibaTr3FYqK85SKQ+RV6Ci/aKT+mh2DfRC/fwWNzYRa9xyV6lxa9Xuw9Oyl+drzNInZ9DkUCGPd7Vj1HXT9oMN4SY+2SkNNjZa28QAqywTvq4wcrtTxucbA7ZlF9GMDFJ7dTcnZbM405FDVksPpS88i/+4prtpOIvyqkNH9ZQFXjudTXVyE8oNPUH6h4rrLj/kPH+VGF6WNP3G0vgOL04fa3st++TO8K3+aDyuyKaneTem3uRQonqTF+BmCIU/AcOgxGvdnoZTtoijnCfbtfYnLQ3fodc2i7Byl6EInryoaOHBOz5vn1bxwOAtZvsC+I1nknXict4/v4vVjAnXiMQS3WY+7R8Rlymhux9klcsvUhSP6gPHM2IORDayLSX6eu0/XzAo3pucx9YuY+w1YfhOxO0RsGU0DOqZ8DgT+Q2RVQlpPkVpfI5VcJxaNElpaYsHvJ7K8TDCwwP3YGol4kv/jX+6ijOkfTCYPAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 18 23 44 10" title="" data-src="/static/2022-01-18-23-44-10-4f490b2ff9172f374d96550e591b2269-fee1c.png" data-srcset="/static/2022-01-18-23-44-10-4f490b2ff9172f374d96550e591b2269-a67b7.png 200w,\n/static/2022-01-18-23-44-10-4f490b2ff9172f374d96550e591b2269-0b187.png 400w,\n/static/2022-01-18-23-44-10-4f490b2ff9172f374d96550e591b2269-fee1c.png 800w,\n/static/2022-01-18-23-44-10-4f490b2ff9172f374d96550e591b2269-822e9.png 1149w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/uzx534?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>另外，让合适的 outline 尺寸配合合适的 outline-offset 负值，我们可以通过颜色覆盖的方式实现渐变边框效果，或者绘制一个加号图案，如下所示：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="13221256931812065000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.example {\n   width: 120px;\n   height: 120px;\n   background: linear-gradient(deepskyblue, deeppink);\n   outline: 40px solid #fff;\n   outline-offset: -92px;\n}`, `13221256931812065000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.example</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 120px<span class="token punctuation">;</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 120px<span class="token punctuation">;</span>\n   <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>deepskyblue<span class="token punctuation">,</span> deeppink<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token property">outline</span><span class="token punctuation">:</span> 40px solid #fff<span class="token punctuation">;</span>\n   <span class="token property">outline-offset</span><span class="token punctuation">:</span> -92px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>效果如图 3-101 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-18-23-48-47-8923c40c258b08e5a7705d98cc3ef14e-7e9bc.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 38.297872340425535%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAABLUlEQVQY02P4jwT+/AORW5//Md730/bgT6Nd3+0O/jTZ+/PE279wWWTAgKL5L0h+841v6n1PTCc8Ltz+TrfnkdaEp8ce/iCs+S9Y89HT79IqL6858Pr1+5/zt75IK7905eYnuCwBzdcOPJsWse/sktsfXn47MvXqlPB9Dy+8BYr/w6/5H9hlLzfd26+ycJ/+8mtZ+3erLzmovvj90WdwWZya/4PN/r3v0UfvtZ9CNn7wXvc5dNMnn/V/zr+Ey6Jo/vfv3+/fv/+Cwc+fP4Hcf/+hiv79/wsh//z5A1Tz69cvCOP3nz8QBsP9B48uXb766dPn8xcvb92+8/SZc2fPX7h09dqtu/eOnTx14szZfYePbN2+a+/+gxs2bd25a+/Bw0c3bt5+5NiJDZu3AQDEOKuBrAAWxQAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 18 23 48 47" title="" data-src="/static/2022-01-18-23-48-47-8923c40c258b08e5a7705d98cc3ef14e-fee1c.png" data-srcset="/static/2022-01-18-23-48-47-8923c40c258b08e5a7705d98cc3ef14e-a67b7.png 200w,\n/static/2022-01-18-23-48-47-8923c40c258b08e5a7705d98cc3ef14e-0b187.png 400w,\n/static/2022-01-18-23-48-47-8923c40c258b08e5a7705d98cc3ef14e-fee1c.png 800w,\n/static/2022-01-18-23-48-47-8923c40c258b08e5a7705d98cc3ef14e-7e9bc.png 846w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>虽然实现的方法很巧妙，但这并不是常用技巧，大家了解一下即可。</p>\n<p>Edge15+ 浏览器和现代浏览器均支持 outline-offset 属性，该属性的兼容性还算不错。</p>\n<h1 id="cursor-属性新增的手形效果"><a href="#cursor-%E5%B1%9E%E6%80%A7%E6%96%B0%E5%A2%9E%E7%9A%84%E6%89%8B%E5%BD%A2%E6%95%88%E6%9E%9C" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>cursor 属性新增的手形效果</h1>\n<p>本节介绍两组新增的手形效果，分别是缩放和抓取。</p>\n<h2 id="放大手形-zoom-in-和缩小手形-zoom-out-简介"><a href="#%E6%94%BE%E5%A4%A7%E6%89%8B%E5%BD%A2-zoom-in-%E5%92%8C%E7%BC%A9%E5%B0%8F%E6%89%8B%E5%BD%A2-zoom-out-%E7%AE%80%E4%BB%8B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>放大手形 zoom-in 和缩小手形 zoom-out 简介</h2>\n<p>cursor: zoom-in / cursor: zoom-out 的鼠标指针如图 3-102 所示，多用于在桌面端的网页中查看大图的交互场景中：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="88900733252439980000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.zoom-in {\n   /* 放大 */\n   cursor: zoom-in;\n}\n\n.zoom-out {\n   /* 缩小 */\n   cursor: zoom-out;\n}`, `88900733252439980000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.zoom-in</span> <span class="token punctuation">{</span>\n   <span class="token comment">/* 放大 */</span>\n   <span class="token property">cursor</span><span class="token punctuation">:</span> zoom-in<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.zoom-out</span> <span class="token punctuation">{</span>\n   <span class="token comment">/* 缩小 */</span>\n   <span class="token property">cursor</span><span class="token punctuation">:</span> zoom-out<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-18-23-56-02-5d6e0a5a5f5e06cdb5ad360a2279424f-166cd.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 54.98699045967042%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAACVklEQVQoz2PYM9H7QJ/54+W2Z/ut5hZbZzurXDp56MnxKcuKteaUWJ6eZvlktd2DZbbXptocabW+MdvmfL91f4TZxBiz9iQrhtNTDA43i9+ZLX+kWqHMSkKEiWHN+u3vTzavLeRYWSp/eoLy/bkyt6bJXu6S2ZAtuSBdItBC2F5JMNdaxElXnOHSXMsrcxSvNOluLjA/Hq0ao8a9fMPOz2fad1XxbmnW2tNjdnuawtUuxSvtijtL5PPspGwUxUSEhaVFheUlJBlOzDC4ECixUkeqQE80x0jSRo5hw6btXy+0nWgWONKmeKxN9mq/4sN5incmKh6vkF8XKHckVD5WR0JEUFBcWILhzuKoSzFup6Z6XOzz3NnstabQ/NGlU6+ON5/tErg8VeXGLKXrCxRvL1Z8tVzpUrXCKj/ZNQFyq73kIlXEpcQlGP6jgn9//wDJ+7vLjrQJnZuqfGOV4rVKxbMm8mfz5I8nym/3lTsTJb/GX9ZXV0xCShys+R+Y+AdCf/+ANF/fWrarXvD0POVr2QrHueTbxGRyLKSjtCSjNSVabKTjzSRdbcQ0laSw23xjR8WRaWJXstUvMSvvMFVckK00wVQhS0rGWFHKRVnGXEHKTEtSSUYOh7MPF5ysY7/GJ3HWRHROpOCdSaJXa8SOpYruyhTZmyO6NklkeYzwXD8MPwN1A4kPj3c83NnyZkXP26M9x1Z0vjvX/fJw1/N9Xe8PdL3d3/Vqd9fLnZ23N3ajaP73D+T7d+/ePX7y6sPXX2+/fLlx58mDx89v33/28fN3SLggAwBSvHtN6FmgTgAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 18 23 56 02" title="" data-src="/static/2022-01-18-23-56-02-5d6e0a5a5f5e06cdb5ad360a2279424f-fee1c.png" data-srcset="/static/2022-01-18-23-56-02-5d6e0a5a5f5e06cdb5ad360a2279424f-a67b7.png 200w,\n/static/2022-01-18-23-56-02-5d6e0a5a5f5e06cdb5ad360a2279424f-0b187.png 400w,\n/static/2022-01-18-23-56-02-5d6e0a5a5f5e06cdb5ad360a2279424f-fee1c.png 800w,\n/static/2022-01-18-23-56-02-5d6e0a5a5f5e06cdb5ad360a2279424f-166cd.png 1153w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/t27otd?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>Edge 浏览器从 Edge12 版本开始支持 zoom-in 和 zoom-out 效果，Chrome 和 Firefox 等浏览器也都支持。如果想要兼容 IE 浏览器，则需要制作两个放大和缩小的 cur 文件进行自定义，CSS 代码示意如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="87975235236501750000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.zoom-in {\n   cursor: url(zoom-in.cur);\n   cursor: zoom-in;\n}\n\n.zoom-out {\n   cursor: url(zoom-out.cur);\n   cursor: zoom-out;\n}`, `87975235236501750000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.zoom-in</span> <span class="token punctuation">{</span>\n   <span class="token property">cursor</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>zoom-in.cur<span class="token punctuation">)</span></span><span class="token punctuation">;</span>\n   <span class="token property">cursor</span><span class="token punctuation">:</span> zoom-in<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.zoom-out</span> <span class="token punctuation">{</span>\n   <span class="token property">cursor</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>zoom-out.cur<span class="token punctuation">)</span></span><span class="token punctuation">;</span>\n   <span class="token property">cursor</span><span class="token punctuation">:</span> zoom-out<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="抓取手形-grab-和放手手形-grabbing-简介"><a href="#%E6%8A%93%E5%8F%96%E6%89%8B%E5%BD%A2-grab-%E5%92%8C%E6%94%BE%E6%89%8B%E6%89%8B%E5%BD%A2-grabbing-%E7%AE%80%E4%BB%8B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>抓取手形 grab 和放手手形 grabbing 简介</h2>\n<p>cursor: grab 的鼠标指针是一个五指张开的手的形状，cursor: grabbing 的鼠标指针是一个五指收起的手的形状，它们多用在元素预览空间不足并需要拖动元素的交互场景中：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="42599039400251650000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.element {\n   /* 准备抓取 */\n   cursor: -webkit-grab;\n   cursor: -moz-grab;\n   cursor: grab;\n}\n\n.element:active {\n   /* 已经抓住 */\n   cursor: -webkit-grabbing;\n   cursor: -moz-grabbing;\n   cursor: grabbing;\n}`, `42599039400251650000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.element</span> <span class="token punctuation">{</span>\n   <span class="token comment">/* 准备抓取 */</span>\n   <span class="token property">cursor</span><span class="token punctuation">:</span> -webkit-grab<span class="token punctuation">;</span>\n   <span class="token property">cursor</span><span class="token punctuation">:</span> -moz-grab<span class="token punctuation">;</span>\n   <span class="token property">cursor</span><span class="token punctuation">:</span> grab<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.element:active</span> <span class="token punctuation">{</span>\n   <span class="token comment">/* 已经抓住 */</span>\n   <span class="token property">cursor</span><span class="token punctuation">:</span> -webkit-grabbing<span class="token punctuation">;</span>\n   <span class="token property">cursor</span><span class="token punctuation">:</span> -moz-grabbing<span class="token punctuation">;</span>\n   <span class="token property">cursor</span><span class="token punctuation">:</span> grabbing<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>两者的效果如图 3-103 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-19-00-03-43-bd2b27d9558869f762bbeb377b1ccb0c-88b8f.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 44.45407279029463%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAACe0lEQVQoz22Q20vTcRjGf0QYykrNs+Jvm4dIMKGL6KaUJMtzQkQRXtlFCAlGQZGYJmmhaOIBdZpTMY/gzKnLTHHTaR5zTrc5dfOQZHXVTVfBp+8f4AsPvLyHh+d5pC5tHk0FCbx5mkR1QRLGthQWelIFUphpTWOs8irjurdML+j43Bgv5mmYxc20JgWTwGBlMoW517kcf4XoxFSkcc1N9I/PoM0NpDc/AFttCHvNobgaQtiuDsOc78lI3UNmjRqmCrywV4axUxmEozSI9cJgzE+CqE/3p/2aDy8T1UiT7ZlMFgejL1IxXqLE3qhmuyUCR70aR10UK6V+GNryWDJrMZf4Y6kSu7aL7PfH4KpTYS9T039fZjIrjP57sUhTHRmYioMYLlIyVhLOcpUgrVFhq5CxlqpYfO7LeMsjLEtarLV+OJojWHsfiasngsMPKjbLlGjTw9BlhlCVGYM025PBankwJvE8VSIzW6pk450sVJ5jsykWW6EP8x15WJZbsTb54+yLYjVbZuWujPOVivVcJSbRT2SFMvXggiDsvoVNZLVWEyUURGBriBQQVnrjOBi+xHeNH6t9+VgsQmFLIOtZUZhPKdGpZVruyFTfCKcqQaY9XqjMjkMyaBKZe+2FucKfZWHJqhE5NfjxNccby4uzWJ+dZLo6hwVjI3PRJ5iVfCk/rSDrvILbagVp3p4EKDzICPUgOTYEacNpwmYZxGbV47QPse3Us7tlYGtglC3jKO7FIQ7dVo5c+7g79WwOGDBOGNB/GuVL90cMXTra+gV6B+jUjSBxTDlcP9j59Zuff/7i2D1iZv4ba/ZNVtxuNvYPWFqz4dzZ498xv/8BM0fduP3qZ4IAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 19 00 03 43" title="" data-src="/static/2022-01-19-00-03-43-bd2b27d9558869f762bbeb377b1ccb0c-fee1c.png" data-srcset="/static/2022-01-19-00-03-43-bd2b27d9558869f762bbeb377b1ccb0c-a67b7.png 200w,\n/static/2022-01-19-00-03-43-bd2b27d9558869f762bbeb377b1ccb0c-0b187.png 400w,\n/static/2022-01-19-00-03-43-bd2b27d9558869f762bbeb377b1ccb0c-fee1c.png 800w,\n/static/2022-01-19-00-03-43-bd2b27d9558869f762bbeb377b1ccb0c-88b8f.png 1154w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/7sr1sy?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>Edge 浏览器从 Edge15 版本开始支持 grab 和 grabbing，Chrome 和 Firefox 等浏览器也都支持，且最新的版本中已经不需要加私有前缀。不过由于浏览器支持无私有前缀语法的时间比较晚，为了安全起见，目前最好加上私有前缀，等到 2022 年之后就可以放心去除了。如果想要兼容 IE 浏览器，可以使用 move 属性值代替 grab 和 grabbing，CSS 代码示意如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="11142768259762459000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.element {\n   cursor: move;\n   cursor: grab;\n}\n\n.element:active {\n   cursor: grabbing;\n}`, `11142768259762459000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.element</span> <span class="token punctuation">{</span>\n   <span class="token property">cursor</span><span class="token punctuation">:</span> move<span class="token punctuation">;</span>\n   <span class="token property">cursor</span><span class="token punctuation">:</span> grab<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.element:active</span> <span class="token punctuation">{</span>\n   <span class="token property">cursor</span><span class="token punctuation">:</span> grabbing<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>',
excerpt:"CSS 新世界中有大量的 CSS 新特性源自对 CSS2.1 中已有的 CSS 属性的增强，本章内容所讲述的就是在已有 CSS 属性上新增的那些 CSS 新特性 贯穿全书的尺寸体系 在 CSS2.1 中，CSS 中的尺寸概念都隐藏在具体的 CSS…",frontmatter:{date:"2021-12-22 23:14:14",path:"/css-new-world-enhance-existing-css/",tags:"前端, CSS, CSS新世界, 读书笔记",title:"CSS新世界从增强已有的CSS属性开始",draft:null}},prePost:{html:'<p>本章介绍 CSS 渐变、CSS 3D 变换、CSS 过渡和 CSS 动画这 4 部分内容，如果没有专门说明，相关 CSS 属性均是被 IE10+ 浏览器支持的。本章介绍的这些 CSS 属性都非常实用，且细节众多，读者需要反复阅读才能理解。</p>\n<h1 id="css-渐变"><a href="#css-%E6%B8%90%E5%8F%98" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>CSS 渐变</h1>\n<p>CSS 渐变是 CSS 世界中第一次真正意义上使用纯 CSS 代码创建的图像。它可以应用在任何需要使用图像的场景，因此非常常用，读者一定要牢记相关语法。如果 CSS 的学习有期末考试的话，那么 CSS 渐变一定是必考内容。我们先从最简单的线性渐变学起。</p>\n<h2 id="深入了解-linear-gradient-线性渐变"><a href="#%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3-linear-gradient-%E7%BA%BF%E6%80%A7%E6%B8%90%E5%8F%98" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>深入了解 linear-gradient() 线性渐变</h2>\n<p>我们从最简单的表示自上而下、从白色到天蓝色的渐变的语法开始：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="13763290344864854000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`linear-gradient(white, skyblue);`, `13763290344864854000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token function">linear-gradient</span><span class="token punctuation">(</span>white<span class="token punctuation">,</span> skyblue<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>如果渐变方向是自上而下的，就无须专门指定角度，所以在所有线性渐变语法中，to bottom 一定是多余的，代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="28716792775081280000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* to bottom 是多余的 */\nlinear-gradient(to bottom, white, skyblue);`, `28716792775081280000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* to bottom 是多余的 */</span>\n<span class="token function">linear-gradient</span><span class="token punctuation">(</span>to bottom<span class="token punctuation">,</span> white<span class="token punctuation">,</span> skyblue<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>如果是其他渐变方向，则需要专门指定。渐变的方向共有两种表示方法，一种是使用关键字 to 加方位值，另一种是直接使用角度值，示意如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="36870966396744364000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 使用关键字 to 表示渐变方向 */\nlinear-gradient(to right, white, skyblue);\nlinear-gradient(to right bottom, white, skyblue);\n/* 使用角度值表示渐变方向 */\nlinear-gradient(45deg, white, skyblue);\nlinear-gradient(0.25turn, white, skyblue);`, `36870966396744364000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 使用关键字 to 表示渐变方向 */</span>\n<span class="token function">linear-gradient</span><span class="token punctuation">(</span>to right<span class="token punctuation">,</span> white<span class="token punctuation">,</span> skyblue<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token function">linear-gradient</span><span class="token punctuation">(</span>to right bottom<span class="token punctuation">,</span> white<span class="token punctuation">,</span> skyblue<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">/* 使用角度值表示渐变方向 */</span>\n<span class="token function">linear-gradient</span><span class="token punctuation">(</span>45deg<span class="token punctuation">,</span> white<span class="token punctuation">,</span> skyblue<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token function">linear-gradient</span><span class="token punctuation">(</span>0.25turn<span class="token punctuation">,</span> white<span class="token punctuation">,</span> skyblue<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>日常开发更多使用 <code class="language-text">to 方位值</code> 表示法，一方面是因为语义清晰，容易理解与记忆；另一方面是因为项目中的渐变效果要么是对角渐变，要么就是水平或垂直渐变，更适合使用 <code class="language-text">to 方位值</code> 表示法，这种方法实现的渐变不会受到元素的尺寸限制，适用性更广，也无须专门计算角度。例如，使用 CSS 渐变绘制两条对角线来表示没有数据的时候的占位效果，此时只有使用 <code class="language-text">to 方位值</code> 表示法才能适配任意尺寸，CSS 代码示意如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="66899160661520350000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`img:not([src]) {\n   background-color: #eee;\n   background-image: linear-gradient(\n         to right bottom,\n         transparent calc(50% - 1px),\n         #ccc calc(50% - 1px),\n         #ccc,\n         transparent calc(50% + 1px)\n      ), linear-gradient(to top right, transparent calc(50% - 1px), #ccc calc(50% - 1px), #ccc, transparent calc(50% +\n                  1px));\n}`, `66899160661520350000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">img:not([src])</span> <span class="token punctuation">{</span>\n   <span class="token property">background-color</span><span class="token punctuation">:</span> #eee<span class="token punctuation">;</span>\n   <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>\n         to right bottom<span class="token punctuation">,</span>\n         transparent <span class="token function">calc</span><span class="token punctuation">(</span>50% - 1px<span class="token punctuation">)</span><span class="token punctuation">,</span>\n         #ccc <span class="token function">calc</span><span class="token punctuation">(</span>50% - 1px<span class="token punctuation">)</span><span class="token punctuation">,</span>\n         #ccc<span class="token punctuation">,</span>\n         transparent <span class="token function">calc</span><span class="token punctuation">(</span>50% + 1px<span class="token punctuation">)</span>\n      <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>to top right<span class="token punctuation">,</span> transparent <span class="token function">calc</span><span class="token punctuation">(</span>50% - 1px<span class="token punctuation">)</span><span class="token punctuation">,</span> #ccc <span class="token function">calc</span><span class="token punctuation">(</span>50% - 1px<span class="token punctuation">)</span><span class="token punctuation">,</span> #ccc<span class="token punctuation">,</span> transparent <span class="token function">calc</span><span class="token punctuation">(</span>50% +\n                  1px<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>此时，无论元素的尺寸是多少，对角线都有符合预期的表现，如图 5-1 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-02-14-09-41-19-46ae267a6d499ab5fcaf9e52fc153405-4767d.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 37.995337995338%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAAAvklEQVQY012QAQ6CMAxFd/9zGTLIFFGJAkG8gWwDDNsCljXWhh8Cf+1/a4Mwxlhrh2GwTHiEltY6hLAsC69TWGAISyR+EcJQ5GPAgxGUxt7uLg4Tj+QfxpyO4lvsYDj2fU8BwffcbcHhcRwxQ2aD41/ZHvjicBP1/sk5BzwMBE+rYUbM8+yivPeY81EhCgyMXdeVFxGBt8BeVTfP7jVNn1NeVFXTtt25uCYySzN1SKQ65pdbKVMlM3V/1JBH6gshScYDLjmCNQAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 02 14 09 41 19" title="" data-src="/static/2022-02-14-09-41-19-46ae267a6d499ab5fcaf9e52fc153405-fee1c.png" data-srcset="/static/2022-02-14-09-41-19-46ae267a6d499ab5fcaf9e52fc153405-a67b7.png 200w,\n/static/2022-02-14-09-41-19-46ae267a6d499ab5fcaf9e52fc153405-0b187.png 400w,\n/static/2022-02-14-09-41-19-46ae267a6d499ab5fcaf9e52fc153405-fee1c.png 800w,\n/static/2022-02-14-09-41-19-46ae267a6d499ab5fcaf9e52fc153405-4767d.png 858w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/qgd68x?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>下面着重讲一讲不少人会比较困惑的角度值表示法。先看代码：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="94409383689087240000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.example {\n   width: 300px;\n   height: 150px;\n   border: solid deepskyblue;\n   background-image: linear-gradient(45deg, skyblue, white);\n}`, `94409383689087240000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.example</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>\n   <span class="token property">border</span><span class="token punctuation">:</span> solid deepskyblue<span class="token punctuation">;</span>\n   <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>45deg<span class="token punctuation">,</span> skyblue<span class="token punctuation">,</span> white<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>请问这段代码中的 45deg 表示的渐变起始方向是左上角、右上角、左下角还是右下角呢？正确答案是：45deg 表示的渐变的起始方向是左下角。上面代码对应的效果如图 5-2 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-02-14-09-56-39-a2adbdeec0c275a6f5b1c33c605966e3-54e16.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 599px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 61.93656093489148%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAACNElEQVQoz13R7UvbQBwH8PzdezfGkL3YhrAHxybomJMpU1CpYzoFFXVuamub58e2adM2TXLJPeQuSZOdrWVjx4/jXtyH+/I9YckgNQvsO/FhJzl24VkP/vTQ9RA3fCyOiRamFqCdhHqQjUkGaI5YkWZFVU5MXAqvdPzVAFtWsuMktTb83kU/XHTSx+cDfDUiN37aDKgUUR0wO2FdlHkkH5GcsKIFS2FRw1+0aMOIt61410727z087qHTProY4F8jUvfTVpAqETUAc5LM5R7nkObNZCK81PCaGn7WweY//mDmPXT5n4+ZA7MuzMI0r8cT4bmCVuTgoxqtz/2e89efefhyQOaezrwNsxHOrkEhPJPRezFYViLu+fsP+bnvzPN7eJb/lvuQyhHVAOtBdhUVwoKE3jbH78SQ+1U1Wpv6LSue9wePpv1dePhqeN/fHe8vpE5Mz4NcWBDhmzt/qRUsS+GqEq6p0YYOtkywY8c1JznoJEcuPO2hSw/9HuJbnzTHqRykbZBecPyohR7fBE/q4dN68OwufCGCRRG8lsCSAj5o8YqefDLhug03HbTdRrtdXHPJgUdPhnR3kAsSKhvJhPcup5WEK/57Eqk0Wqnz4Wd9uhvsYRRUyqg0SSlU01XkuS5J436vZCwcDjum4fd7tqa5tm0osqkoXcsUG422YViqWmTZTAlFWZZVRVkmypo38lOWjcPI7Q/2vh3eNJqW02nJiqRoLVmVNd2wHUUz+GVOJlX1B/8wd5O68xLJAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 02 14 09 56 39" title="" data-src="/static/2022-02-14-09-56-39-a2adbdeec0c275a6f5b1c33c605966e3-54e16.png" data-srcset="/static/2022-02-14-09-56-39-a2adbdeec0c275a6f5b1c33c605966e3-e3250.png 200w,\n/static/2022-02-14-09-56-39-a2adbdeec0c275a6f5b1c33c605966e3-a3cce.png 400w,\n/static/2022-02-14-09-56-39-a2adbdeec0c275a6f5b1c33c605966e3-54e16.png 599w" data-sizes="(max-width: 599px) 100vw, 599px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>这个问题回答错了不怪大家，因为 CSS 渐变中的角度值表示的方向和常见的各种设计软件中的渐变的角度值表示的方向不一样。</p>\n<p>假设有一个圆盘，圆盘有一个中心点，以这个中心点为起点创建一个指针，在各类设计软件（如 Adobe Photoshop 或者 Keynote）中，指针水平向右表示渐变角度是 0 度，逆时针旋转表示角度值递增，因此指针垂直朝上表示 90 度。图 5-3 所示的是 Adobe Photoshop 软件中渐变方位值和角度值之间的关系，可以看到垂直朝上是 90 度，朝右上方是 45 度，朝右下方是 −45 度。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-02-14-09-59-06-52c63f3b098a4e0b636fe8a82a49e063-2936c.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 37.76470588235294%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAAA20lEQVQY042QjW6EIBCEff+nu/aEepxtAeGwxB9YQKuJ2jWXNE1q05vAssPmyxCy7YfWdcUKAJRSpbSU0n5YrXXf99uRst+w954QUlWVEMIYg03XdY/CzrnT00lIyTlHGPObpvme/p+Mz0bmnoy1bdtHk0MIjDFj6ro21lo8APwxPM/zNE0QwjCMKQ0J97g3MQ4x7Q5HEKL3gCvGNI6fIUSAgDbzENquZ+Wrvhmlb1xIpTUhxTuXWu83OS2ez+ScU1pcistVVupavhE0rMy2P7QsS05enPOHX3XXF8eIyRD+oetCAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 02 14 09 59 06" title="" data-src="/static/2022-02-14-09-59-06-52c63f3b098a4e0b636fe8a82a49e063-fee1c.png" data-srcset="/static/2022-02-14-09-59-06-52c63f3b098a4e0b636fe8a82a49e063-a67b7.png 200w,\n/static/2022-02-14-09-59-06-52c63f3b098a4e0b636fe8a82a49e063-0b187.png 400w,\n/static/2022-02-14-09-59-06-52c63f3b098a4e0b636fe8a82a49e063-fee1c.png 800w,\n/static/2022-02-14-09-59-06-52c63f3b098a4e0b636fe8a82a49e063-2936c.png 850w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>CSS 中有着截然不同的渐变角度和渐变方位关系，规范中对此有专门的描述：</p>\n<p>using angles</p>\n<p>For the purpose of this argument, “0deg” points upward, andpositive angles represent clockwise rotation, so “90deg” pointtoward the right.（在这个参数中，0deg 表示向上，顺时针旋转是正角度，所以 90deg 表示向右。）</p>\n<p>为了便于读者理解，我整理了一个常规渐变和 CSS 渐变角度方位关系对比表，参见表 5-1。</p>\n<table>\n<thead>\n<tr>\n<th align="left">角度</th>\n<th align="left">常规渐变</th>\n<th align="left">css 渐变</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align="left">0 度</td>\n<td align="left">向右</td>\n<td align="left">向上</td>\n</tr>\n<tr>\n<td align="left">正角度</td>\n<td align="left">逆时针</td>\n<td align="left">顺时针</td>\n</tr>\n</tbody>\n</table>\n<p>借助图 5-2 所示的效果，我们可以把 CSS 渐变角度和方位关系标注一下，图 5-4 所示的箭头指向的位置就是 CSS 渐变中 45deg 渐变和 −45deg 渐变角度示意。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-02-14-10-49-50-4b3340a3d610d69d3d410cc7fa0d3e3c-08a1b.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 657px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.404870624048705%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABsUlEQVQoz31SXXOaQBT1/z/1tU+d6UMb03bamJhJFdRojLIgEBAlRr4XlBCRhAJKZLcb86I26Zm9D7vnnnvvnLslvIvnZ+z76OmpyDJsmIkghgAg10UEeY5XK7yP0t5tvcZRhGUJ0RQeymm/l7IA8zymKGzb2DRfqr8rJr3X+V2H1b+fec3ubQdonX5YawTn9WiiE5ZM8Lb4lYgteHpyRdcAf1QdfKsq5ROPavvCcNbjcJahd8dGKF1lkL8pf7n4dfy7XmlWPnykP32V6atRraWeU/PpNIrj3f6HnSPd+nzUKP+4rFa6Zz8b9GlLajBKi5leMksIw8fHt8V4+7T6k7C1HtvkpLbA1bsCda31pWmbnYnjl5T/uf1a0p+jAUc8zwCTAYBFAYsiThL0r2HoAEWxQWgTBHg8jgGIGQZrWpGkBVEWRUECbWOLw1XtYpPnm/3FHn4S3TCD4CFN08UitGyHHAe6nje7vw/c2dy0HNf1omUEofewWBDWMO07TbcdaBhWSbyR575PxJbjqOpEkhWdKKAnD0e9PisNFfV2EoZL07QByzPsQBmpLMeP1QlJ+AuWiZX6dwgGQAAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 02 14 10 49 50" title="" data-src="/static/2022-02-14-10-49-50-4b3340a3d610d69d3d410cc7fa0d3e3c-08a1b.png" data-srcset="/static/2022-02-14-10-49-50-4b3340a3d610d69d3d410cc7fa0d3e3c-45750.png 200w,\n/static/2022-02-14-10-49-50-4b3340a3d610d69d3d410cc7fa0d3e3c-c4772.png 400w,\n/static/2022-02-14-10-49-50-4b3340a3d610d69d3d410cc7fa0d3e3c-08a1b.png 657w" data-sizes="(max-width: 657px) 100vw, 657px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>从图 5-4 中可以明显看出，45deg 渐变的方向是自左下方而来、往右上方而去的，图 5-2 所示的渐变角度也就一目了然了。</p>\n<p>另外，如果渐变角度是 0deg，不建议简写成 0。例如，linear-gradient(0, skyblue, white) 这样的写法是不推荐的，因为 IE 浏览器和 Edge 浏览器会认为这是不合法的。</p>\n<h3 id="渐变的起点和终点"><a href="#%E6%B8%90%E5%8F%98%E7%9A%84%E8%B5%B7%E7%82%B9%E5%92%8C%E7%BB%88%E7%82%B9" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>渐变的起点和终点</h3>\n<p>明白了 CSS 线性渐变的角度值对应的方位，再弄清楚线性渐变的起点和终点的位置，理解线性渐变渲染表现就不成问题了。下面举例说明。例如，想一下下面的 CSS 渐变中 skyblue 100px 200px 对应的起止位置在哪里：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="61621102891877060000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.example {\n   width: 300px;\n   height: 150px;\n   border: solid deepskyblue;\n   background-image: linear-gradient(45deg, white 100px, skyblue 100px 200px, white 200px);\n}`, `61621102891877060000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.example</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>\n   <span class="token property">border</span><span class="token punctuation">:</span> solid deepskyblue<span class="token punctuation">;</span>\n   <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>45deg<span class="token punctuation">,</span> white 100px<span class="token punctuation">,</span> skyblue 100px 200px<span class="token punctuation">,</span> white 200px<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>这个 100px 的起点位置不是从端点开始的，也不是从元素的某一条边开始的，而是沿着渐变角度所在直线的垂直线开始的，该垂直线就是图 5-5 所示的虚线。因此，最终的线性渐变效果如图 5-6 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-02-14-10-56-15-6e48d95414d87a1b3c6e0cdffb5a1b66-cb87a.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 424px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 141.7452830188679%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAcCAIAAADuuAg3AAAACXBIWXMAAAsSAAALEgHS3X78AAAD9klEQVQ4y41UW3PbRBTWL+aB4dLSuiEpjd2E6fDA8AAP4JkGptALyTAhpEBpkzCpLcmW7fgi25JlR7Ys2ZJW1sWWpV12V7ITSpnpzjdnzkr77Tl7zrfLoNWAEMX/AUTYYoNms5k2nWInwl+jCC0W2DLoHQak/Mpx42SvgWwt7g+QICDTvCLPImgv0RrWEn8hjrmAFv6rG/aPB+Vyp6OOyHY4OISEHJN90c/DxWbZ/Lxm71St3aq1LVjfis4wgBpCqqpPXpe0ZYTz/qOr9UZjyoIMTHJCSArQkeJsFMY5dpzljBynb7H6L8M5nFqI59BySZfBwQJJQ03X8J6IWR+p6xPneBQ8OBTyP/z5MH+U33u+c9Q6PPg6DANSKrpM9qEXo4k+VlWVcV03XC4TckQ3f96fbZ0qD7jxzncv3su8v1n8fV8JYZwmqATIJesgcBzGcZyeouCgmIwzI0sg/FUPd18OvnqYv332zZ1C7aPTxhPJSkrTC5AXkXTTtG0A+ooiBTBO2o2HCQ6fZTOn+1vs5Y1XLz9+dZw57+3LM/xbmePIaf+Y5MAuAEd1ZbiIcR+A7onHe2Xt/KmKNnl7u+JuC+49wbrJTp4pXsVNIpPQTNo0hDQLlJXL2dAWf8v/LT2uWaOGOdCCOel5CC3afGNBtABX0mBQGKJSCUoycibDE/Fp/tHQOAkRlCati7HgzAENAt+qPIYcMgjwFjGNPwVAVbXrwowpVgOtqo7Sgr0x5vN5HMfvonlmHaHZaktyz7Jsz/d7Sr/RFEtCtSm2axeNVqvT7khC9aIldiu1ekRzvBYZQkWWx8NR4HmB749Ho54kd8S23JWajWa/p+DpRa1+2R/IkhxF8RUZLKG5RC6+OhDZEQFuKJ4uEPIoXAqfWg+SCwdozZkQoi87wYfF6S3evMGZN/kUHxSn3/d8eY6aLmz7SPSh6BG0PKLFFxbpNoP3qM/gQdfeKGi7vJHj9QRZbDm9MglSKa7rT23LIzpjcNNbPpk/6oCNon6/ZGzzBFneuMcZm6xeNHx6pQiNvEqUXF+Tmx6Z41vxUxd8SvlZSs5Re5fVOcpPLkYSuXEV2Uu/4hv7uEvi567zOQO/CmzC/z9ysjHmP6Hxc2/E53RWT/P/FzlJO6Z8LL5lDHH+dwq4Zlfnx5acn/LfcubrJcUC3pfAXXZ8f1V84nDGZ6zOU34zIYMwOrNiyYdt3EY3btNmtr247kRf1MEtzszw09sUGZ74n3DTv8bzEws6IX30A4hARIAF5MQEs0Rb2IdUXjBFojZAHSJPliu1RRFYtmPbQqmMVT01jFq1VnhdMCeT0aVaq1Qb9XpVqJS4EvbxL7bIdsTO6dn5P8Tl+Ewlt4qOAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 02 14 10 56 15" title="" data-src="/static/2022-02-14-10-56-15-6e48d95414d87a1b3c6e0cdffb5a1b66-cb87a.png" data-srcset="/static/2022-02-14-10-56-15-6e48d95414d87a1b3c6e0cdffb5a1b66-24421.png 200w,\n/static/2022-02-14-10-56-15-6e48d95414d87a1b3c6e0cdffb5a1b66-e4320.png 400w,\n/static/2022-02-14-10-56-15-6e48d95414d87a1b3c6e0cdffb5a1b66-cb87a.png 424w" data-sizes="(max-width: 424px) 100vw, 424px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>如果渐变断点中出现了百分比值，那么这个百分比值就是相对渐变的起点到终点的这段距离计算的。</p>\n<h3 id="关于渐变断点"><a href="#%E5%85%B3%E4%BA%8E%E6%B8%90%E5%8F%98%E6%96%AD%E7%82%B9" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>关于渐变断点</h3>\n<p><code class="language-text">&lt;color-stop-list&gt;</code> 数据类型也就是我们常说的渐变断点，包括众多你可能不知道的细节知识，这些细节知识对所有渐变类型均适用。</p>\n<ol>\n<li>\n<p>渐变断点至少有 2 个颜色值，因此下面这种写法是不合法的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="67208826520934850000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 不合法 */\nlinear-gradient(white);`, `67208826520934850000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 不合法 */</span>\n<span class="token function">linear-gradient</span><span class="token punctuation">(</span>white<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>断点语法中的颜色值和位置值的前后顺序是有要求的，位置值必须在颜色值的后面，因此下面这种写法是不合法的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="40407066452043310000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 不合法 */\nlinear-gradient(white, 50% skyblue);`, `40407066452043310000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 不合法 */</span>\n<span class="token function">linear-gradient</span><span class="token punctuation">(</span>white<span class="token punctuation">,</span> 50% skyblue<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>需要使用下面这种写法才可以：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="96599802490227830000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 合法 */\nlinear-gradient(white, skyblue 50%);`, `96599802490227830000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 合法 */</span>\n<span class="token function">linear-gradient</span><span class="token punctuation">(</span>white<span class="token punctuation">,</span> skyblue 50%<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>没有指定具体断点位置的时候，各个渐变颜色所形成的色块大小是自动等分的。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="41509426959858510000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`linear-gradient(red, orange, yellow, green);`, `41509426959858510000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token function">linear-gradient</span><span class="token punctuation">(</span>red<span class="token punctuation">,</span> orange<span class="token punctuation">,</span> yellow<span class="token punctuation">,</span> green<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>其中，red、orange、yellow、green 这 4 种颜色形成了 3 个渐变色块，因此等同于下面的写法：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="31484748528408990000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`linear-gradient(red 0%, orange 33.33%, yellow 66.66%, green 100%);`, `31484748528408990000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token function">linear-gradient</span><span class="token punctuation">(</span>red 0%<span class="token punctuation">,</span> orange 33.33%<span class="token punctuation">,</span> yellow 66.66%<span class="token punctuation">,</span> green 100%<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n</li>\n<li>\n<p>如果起点和终点的颜色与相邻断点的颜色值一样，则起点色值和终点色值是可以省略的。例如 25% ～ 75% 的渐变效果，不少人是这么写的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="31329196168438900000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`linear-gradient(white, white 25%, skyblue 75%, skyblue);`, `31329196168438900000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token function">linear-gradient</span><span class="token punctuation">(</span>white<span class="token punctuation">,</span> white 25%<span class="token punctuation">,</span> skyblue 75%<span class="token punctuation">,</span> skyblue<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>其实前后两个色值可以不用写，直接用下面的 CSS 代码即可：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="97440004681906060000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`linear-gradient(white 25%, skyblue 75%);`, `97440004681906060000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token function">linear-gradient</span><span class="token punctuation">(</span>white 25%<span class="token punctuation">,</span> skyblue 75%<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n</li>\n<li>\n<p>渐变的断点位置可以是负数，也可以大于 100%。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="99770924044986480000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`linear-gradient(white -50%, skyblue, white 110%)`, `99770924044986480000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token function">linear-gradient</span><span class="token punctuation">(</span>white -50%<span class="token punctuation">,</span> skyblue<span class="token punctuation">,</span> white 110%<span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n</li>\n<li>\n<p>在同一个渐变中，不同类型的断点位置值是可以同时使用的。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="8451651670936666000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`linear-gradient(white 100px, skyblue 50%);`, `8451651670936666000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token function">linear-gradient</span><span class="token punctuation">(</span>white 100px<span class="token punctuation">,</span> skyblue 50%<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>此时，如果渐变范围小于 200px，假设是 160px，则白色的位置（100px）反而会比天蓝色的位置（50% × 160px）靠后，不符合渐变逻辑，那么究竟该如何渲染呢？继续往下看。</p>\n</li>\n<li>\n<p>当存在多个渐变断点的时候，前面的渐变断点设置的位置值有时候比后面的渐变断点设置的位置值要大，这时后面的渐变断点位置值会按照前面的断点位置值计算。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="18868948287529165000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`linear-gradient(skyblue 20px, white 0px, skyblue 40px);`, `18868948287529165000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token function">linear-gradient</span><span class="token punctuation">(</span>skyblue 20px<span class="token punctuation">,</span> white 0px<span class="token punctuation">,</span> skyblue 40px<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>会按照下面的语法渲染：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="96841539449631360000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`linear-gradient(skyblue 20px, white 20px, skyblue 40px);`, `96841539449631360000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token function">linear-gradient</span><span class="token punctuation">(</span>skyblue 20px<span class="token punctuation">,</span> white 20px<span class="token punctuation">,</span> skyblue 40px<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n</li>\n<li>\n<p>渐变断点还支持一次性设置两个位置值。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="24355633064793846000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`linear-gradient(white 40%, skyblue 40% 60%, white 50%);`, `24355633064793846000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token function">linear-gradient</span><span class="token punctuation">(</span>white 40%<span class="token punctuation">,</span> skyblue 40% 60%<span class="token punctuation">,</span> white 50%<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>表示 40%～ 60% 这个范围内的颜色都是天蓝色。需要注意的是，这个语法是新语法，IE 浏览器和 Edge 浏览器是不支持的，其他现代浏览器也刚支持没多久，因此，建议大家在生产环境中还是使用传统语法：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="14373596320838523000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`linear-gradient(white 40%, skyblue 40%, skyblue 60%, white 50%);`, `14373596320838523000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token function">linear-gradient</span><span class="token punctuation">(</span>white 40%<span class="token punctuation">,</span> skyblue 40%<span class="token punctuation">,</span> skyblue 60%<span class="token punctuation">,</span> white 50%<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n</li>\n<li>\n<p>除渐变断点之外，我们还可以设置颜色的转换点位置，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="7104665720553771000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`linear-gradient(white, 70%, skyblue);`, `7104665720553771000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token function">linear-gradient</span><span class="token punctuation">(</span>white<span class="token punctuation">,</span> 70%<span class="token punctuation">,</span> skyblue<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>表示白色和天蓝色渐变的中心转换点位置在 70% 这里，上面代码的效果如图 5-7 所示。该方法可以用来模拟更符合真实世界的立体效果。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-02-14-11-29-57-4e609b95d9ce6db64b30af16525a8500-d9a94.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 386px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 64.76683937823834%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAABUUlEQVQoz5WSTU/CQBCG968b5Wb8DyZelMSDNzRo8COhQOkHJSAQRCSBVJZ2t9122+3sukW9t5Mnb96ZvHOaQe2D6hFl1KcTKGQQqRToUrIqUquCKQP0FkguIMyBVobkwAQ4FNDLAVhWHHgRVEaHKS8sAugJA07yLRO7yuiwz0Q/ANTyi1XI52G2qMMyzJ73At1tc9tnAz8x6zD0WWuXoetN1l7T+6/ooRZrertJ0eUqbc6C5jysxc0suFoydDFLTof7ho3P7IOmodXCJWV71NLj/yE+ZvDJEJ9PY7Rg0iKFx6QXKzeSbgSjWI5i9aeRnsujlx4rW53RRt/pPQakjpUQwiMKOYdCZDHNIiKSuNSUcRrmLBIxTcNAsAh4kpDwdwsVoN9Tuc7IGDi7b8xS/rH6dMcTy/YeO6+ON+n2h13THNiO0Tf7tmu5455p6xX9pT8ENMCin8Y7YgAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 02 14 11 29 57" title="" data-src="/static/2022-02-14-11-29-57-4e609b95d9ce6db64b30af16525a8500-d9a94.png" data-srcset="/static/2022-02-14-11-29-57-4e609b95d9ce6db64b30af16525a8500-300a8.png 200w,\n/static/2022-02-14-11-29-57-4e609b95d9ce6db64b30af16525a8500-d9a94.png 386w" data-sizes="(max-width: 386px) 100vw, 386px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>需要注意的是，IE 浏览器是不支持这个语法的，因此，在生产环境中要谨慎使用。</p>\n</li>\n<li>\n<p>如果不是高清显示器，则在 Chrome 浏览器中，不同颜色位于同一断点位置的时候，两个颜色连接处可能会有明显的锯齿。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="76576495536930650000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`linear-gradient(30deg, red 50%, skyblue 50%);`, `76576495536930650000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token function">linear-gradient</span><span class="token punctuation">(</span>30deg<span class="token punctuation">,</span> red 50%<span class="token punctuation">,</span> skyblue 50%<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>  锯齿效果如图 5-8 所示。</p>\n<p>  <html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-02-14-11-37-08-ca3f1a7f32a37ce2e660b4772f13b22e-d9352.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 39.585730724971235%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABvUlEQVQY02O4HBi9r6Ch5cqnuvt/2y6+a7/wru3SeyBqv/y+7vy7Q69/f/vxe9Kd7713f0y7+HrK5bfIiOGptuF/BobnGrorpqxsvPG96drXztMv2s++7Dj3quHE890f/v+/ce2yX+TUdSdq7v1tvvi+7fSL1rOvIYjhiZ4pUPM/JiYgecvBc/aaow23f7Ve+tB15mXDyed7wJr/sbP94uA4mlLYd/geULb93OuOs6+AJMMzIwuQZk7O/+xsQMYfbp4zyQWTj9xru/+n9fzb/R///7957R8X5z8GBqDsDynpAw39k88+77vyfsL5Vwy3NQ1/MjB8YWL6CiQZGL4zMgLVvRIQXZpdm7vm5NoHH96dOXNBXvusiMJZSdXLvBJXOYU3u4SXrruYcuYTw+Md+1+vWPNq1Xogerly3YuV656v2fRmyYrnM+fs2nlo74Vrxy9cmXzry9QHv6fe/znl4e+pj//OufZ+xt1vk5/+Z/iPG/z78/vrxw9fPn0EMrAqYPj35w8Q/f0Nkn788OH16zdfPn9x9vTZEydOXbx09dqNW+cvXj5x+vzx0+dOnbtw8+4DoLJff//9/vcfiABHuFfyBzNmFQAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 02 14 11 37 08" title="" data-src="/static/2022-02-14-11-37-08-ca3f1a7f32a37ce2e660b4772f13b22e-fee1c.png" data-srcset="/static/2022-02-14-11-37-08-ca3f1a7f32a37ce2e660b4772f13b22e-a67b7.png 200w,\n/static/2022-02-14-11-37-08-ca3f1a7f32a37ce2e660b4772f13b22e-0b187.png 400w,\n/static/2022-02-14-11-37-08-ca3f1a7f32a37ce2e660b4772f13b22e-fee1c.png 800w,\n/static/2022-02-14-11-37-08-ca3f1a7f32a37ce2e660b4772f13b22e-d9352.png 869w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>  此时，可以在颜色连接处留 1px 的过渡区间，优化视觉表现：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="31621675034822873000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`linear-gradient(30deg, red 50%, skyblue calc(50% + lpx));`, `31621675034822873000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token function">linear-gradient</span><span class="token punctuation">(</span>30deg<span class="token punctuation">,</span> red 50%<span class="token punctuation">,</span> skyblue <span class="token function">calc</span><span class="token punctuation">(</span>50% + lpx<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>  优化后的效果如图 5-9 所示。</p>\n<p>  <html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-02-14-11-55-20-42531e43f52db7fcf4a187a0a1045641-01cf0.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 39.404352806414664%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAABxklEQVQY03WLzWvTYBzHn3XIcINefNm8DAaibFePetL/w5MnX/CwXQYinW1ZaRFfdpgyU9jarXTKXthAZQcRqaNbmiZPkm6mraUM2zxJTJOshaZpnsdn4HU/vnz5wu/zAblHs3HZelHHcdFKwFZcsmgSkhUWWp+RR9rtbL768gQvHjvvReOdbNIsyuZSyaw7PUAAQNcnP75KzR115kqd2KE6z6IYp4XyzS3UJ39O7JtTX588jxb0Z4obZbUoi8IFfZ7TFcs9k/HgIO3q7XtM5ltIcSOiHWfV0IG6TeVmwx8do1/txtSn1+mI7ISP2jEWJYp6+b88PEKGhujwLw5z9x8ufC9Ha36EN3c1n8p49OoZEwjQbty5m13bS5Tst9D4bXcBBsANBHoAdAHwBgYoYY8ENx7MTK/vr1atdqUiT94SgtfglQl4aVy5EISXx5nHkae5Jmx5QE+mtVQWLWfQ8hpayTTS6zqzor5Z2Nv8ssNKB4VismQw5dMPis0ozlKlk1ScFN9k6m6tSwA577DfcayW+bfv9c5DAO55BBNDRZAXDVUTeTH3Y1+GEseLBV6AkiyIx0Uo/8yzh5zwq1qjjufjPqYS+Qex8FvHHbxAJQAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 02 14 11 55 20" title="" data-src="/static/2022-02-14-11-55-20-42531e43f52db7fcf4a187a0a1045641-fee1c.png" data-srcset="/static/2022-02-14-11-55-20-42531e43f52db7fcf4a187a0a1045641-a67b7.png 200w,\n/static/2022-02-14-11-55-20-42531e43f52db7fcf4a187a0a1045641-0b187.png 400w,\n/static/2022-02-14-11-55-20-42531e43f52db7fcf4a187a0a1045641-fee1c.png 800w,\n/static/2022-02-14-11-55-20-42531e43f52db7fcf4a187a0a1045641-01cf0.png 873w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n</ol>\n<h3 id="渐变与动画"><a href="#%E6%B8%90%E5%8F%98%E4%B8%8E%E5%8A%A8%E7%94%BB" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>渐变与动画</h3>\n<p>CSS 渐变中虽然有很多数值，例如角度值、断点位置值等，但是很遗憾，CSS 渐变本质上是一个 <code class="language-text">&lt;image&gt;</code> 图像，因此无法使用 transition 属性实现过渡效果，也无法使用 animation 属性实现动画效果。虽然我们无法直接让渐变背景不停地旋转，但是有间接的方法可以实现 CSS 渐变的动画效果，这个在最后有介绍，这里就不展开了。</p>\n<h2 id="深入了解-radial-gradient-径向渐变"><a href="#%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3-radial-gradient-%E5%BE%84%E5%90%91%E6%B8%90%E5%8F%98" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>深入了解 radial-gradient() 径向渐变</h2>\n<p>径向渐变指的是从一个中心点向四周扩散的渐变效果，光的扩散、波的扩散等都有径向渐变的特性。</p>\n<p>在 CSS 中，使用 radial-gradient() 函数表示径向渐变，其语法比较复杂，所以我就琢磨如何让大家比较容易地学习径向渐变的语法。最后我决定通过一个接一个的案例带领大家深入径向渐变的语法，因为每个案例都有对应的效果示意，更加直观，自然更加轻松易懂。</p>\n<p>学习这些案例还有一个好处，那就是非常实用。因为本节的径向渐变案例覆盖了几乎所有常见的径向渐变应用场景，所以如果大家在项目中需要使用径向渐变，但又记不清径向渐变的语法细节，就可以翻到本节，找个案例套用一下，就可以实现了。</p>\n<p>接下来介绍的这些案例，如果没有专门说明，径向渐变效果就都是作为 background-image 的属性值呈现的。</p>\n<h3 id="最简单的径向渐变语法"><a href="#%E6%9C%80%E7%AE%80%E5%8D%95%E7%9A%84%E5%BE%84%E5%90%91%E6%B8%90%E5%8F%98%E8%AF%AD%E6%B3%95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>最简单的径向渐变语法</h3>\n<p>先从最简单的径向渐变说起，CSS 代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="4648893893862804000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.example {\n   width: 300px;\n   height: 150px;\n   background-image: radial-gradient(white, deepskyblue);\n}`, `4648893893862804000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.example</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>\n   <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token function">radial-gradient</span><span class="token punctuation">(</span>white<span class="token punctuation">,</span> deepskyblue<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>效果如图 5-10 所示，是一个椭圆渐变效果。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-02-16-11-19-56-4d148cacbfdf2eb01fa45d035876388f-e07da.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 611px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 61.53846153846154%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAACE0lEQVQoz02S2WsTURTG55/Rt7747oIPYooIBjesWKu2aFtxV0yfFKzg8qLg/iA+iPrsAiouILjEpM0ymcxkUtqYVMcmaRPNYmrn5zlTKw7fw3fvPd893z3fGNtNVkRZN87GJNtMdmXoz3LA5qDDoZxCyKCjm70ZLZAyKRbJ1jTGhiTLPrAyzvoEm9P0Wuy3VXPC5VReIeRwTq+Toy1pQglWxVXSncDos1g7xg6TgSzHXc5McrnAtSJ3prn7VSFElrJ5dpKTrl7dY6pEjBjDDptSDNpE8lyY4maJBx6Py7yq8m5O8brKkzIPPW5Pc7GgZUMO4RRDNsYxV9tKz3OTXC9p0Ysq0TpuE+8XXod8k1idl1UefedGidEp7d+T4UguEAv7Ky6q+HmFaA23xUyHcoeJ1pLYU1+jgfmdi+LhRQ8OkQm1fSto/rTCm1ne1xRvZ3lW0bby+EsFRiYY/md7X1ZHLwnJs0/n9eIrX/R5975xP4AQWV4tcn6KkbwqZewi2WsFUS3/qNOX0Ut0MnxJVSxJSJEAQo66am2PpTlL2eq4SrqTGJJtV5Q1Y4TG/XDKl+Httvx+a2HQ9ocCCBnI+n0ZOdKCUMKXnLo+EZafpP6b2Xlq8zThxwI/fUUbWkto/oeGTwNqgUSEBsHXbrdSieRcpVytVGc8L/Y5lrNsR2DbuawjxLYsM5kWYplmsyH34Pv+H7z+Q05S0SLhAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 02 16 11 19 56" title="" data-src="/static/2022-02-16-11-19-56-4d148cacbfdf2eb01fa45d035876388f-e07da.png" data-srcset="/static/2022-02-16-11-19-56-4d148cacbfdf2eb01fa45d035876388f-20936.png 200w,\n/static/2022-02-16-11-19-56-4d148cacbfdf2eb01fa45d035876388f-da2be.png 400w,\n/static/2022-02-16-11-19-56-4d148cacbfdf2eb01fa45d035876388f-e07da.png 611w" data-sizes="(max-width: 611px) 100vw, 611px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>从图 5-10 可以看出，径向渐变的方向是由中心往外部的，默认终止于元素的边框内边缘，如图 5-11 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-02-16-11-21-55-971c333df20e77180920c04ee3a386b7-5e5c6.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 45.49707602339181%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAACOElEQVQoz1WS30tTYRzG/Qu67bLb7oNu7KbL8iKkiDCiCBMkg0iyEgqKKAKJIKgLTa1gGBb+CgdhZKXI3Fw7a3r8sbYz9Wxsc+qOOzubZ+/76d0mQV94Xr4vL+/D8zzfbwOq8q7klAZNCi1amWuazY1wgc6wRZe2S1dom9uqv6lZtGsFLmsO538LGoMwmBSKQVKR6pSShupl14XjfsGJGYuzAZvWxQqda5IHcXiyAU8VHqn+XhSuL7lcDDk0zVkc/VnidYpauRVFLESVECyl8Jx/jysRl+4YPF+HtynJ+BZMJPKMxnJ48zCUg1dpeLgJHQnlaCZLfyDMdi6rZFFDnbC0z6VggY41pcaQDCQl3qxAL8P3VYM3vf2Yi3/w+5bwzuq8n9Z5MbVMx5jO3Z4ViqEQ0udDfps+ICxXaAns0a4IH8clvaZkLCPw2RAJRPCPetHNXb6aNh9iBV4u73Ffd7gz/AvPoArSKSIyGWTcUIRSsFMWnPHbXFgocKtKaihrytY7Ze+zvsUXPcuQCr8vAz0mdKv3tmVB85TJyEo1REGlHiUNES3E9HyQwwMLHPkYpXGuyOl5Ra7tczWsJr4iaVuF1oiKRSvRHCxxctbi2A+LQzPwzDwYipD1KTu2zU7Bptdw6Ntw8ShVn9KCkc0i46bDZLLIpLI6mSoxoTCS2mdYKfVk6y4C+fraiNpUZD3D/6pSJm2oHSk7uAWLZDyGGY2SMgzS6wnSCYOtjQQ5BSql2hch5b/vfwGQpXOzYACRmQAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 02 16 11 21 55" title="" data-src="/static/2022-02-16-11-21-55-971c333df20e77180920c04ee3a386b7-fee1c.png" data-srcset="/static/2022-02-16-11-21-55-971c333df20e77180920c04ee3a386b7-a67b7.png 200w,\n/static/2022-02-16-11-21-55-971c333df20e77180920c04ee3a386b7-0b187.png 400w,\n/static/2022-02-16-11-21-55-971c333df20e77180920c04ee3a386b7-fee1c.png 800w,\n/static/2022-02-16-11-21-55-971c333df20e77180920c04ee3a386b7-5e5c6.png 855w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>所有径向渐变语法都是围绕改变径向渐变的半径值、中心点坐标，以及渐变颜色的起点和终点位置展开的。</p>\n<h3 id="设置渐变半径的大小"><a href="#%E8%AE%BE%E7%BD%AE%E6%B8%90%E5%8F%98%E5%8D%8A%E5%BE%84%E7%9A%84%E5%A4%A7%E5%B0%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>设置渐变半径的大小</h3>\n<p>如果希望图 5-10 所示的径向渐变的水平半径只有 50px，垂直半径还是默认大小，则可以设置 50px 50% 作为第一个参数，渐变代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="92746599576238900000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`radial-gradient(50px 50%, white, deepskyblue);`, `92746599576238900000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token function">radial-gradient</span><span class="token punctuation">(</span>50px 50%<span class="token punctuation">,</span> white<span class="token punctuation">,</span> deepskyblue<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>效果如图 5-12 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-02-16-11-32-40-85dde8410900c56b62caacc45ae2931e-e5c7b.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 612px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 61.274509803921575%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAABj0lEQVQoz42Ry0pCURSGt0d7gUgCu1MQlFFhiTWrYQVNoh4jSGjWrEHvUZPoDbpooJ68YupRM49moZWFlzQa6f5b+5hgkBD8HNZe6//W/jmbbccx4cWMH9MdmvLB7IMtiKUQzHT8PSXzuBcEsvkA2AWkK7BOOdDvgS0kYJPn9+hKM5/D4gdbCIqz3gmdJskJ5kSvCxsR2NOwq9iMwugS66S2h8zsEosEWjS4xfzIgUkvdtM4fsHJK/ZUEZV1GCQNXvgTpt209TCHUA23dRw9ivDS/2ErwQ+CjH0KePn/MMWmv01pT4s4K2JfxUygS2xrSLh7rqHXZLgWN/e7saXgICu0E4dJFk1D20NmQihd16cakbESxmoYYzfQObo81VqEG92crEMyH/QItYpRmc/6+ZxfFAPUb09JwzLvc/H1CFi9iQ+OShOVBqpN1IAqF52q1iw3RN0SjWrat3UkkJXfiwklViuXvj7rz/l8NBx+ymZzmTRJTaXeCoVM6p4KNZlMKspdXElEoqlE4i6mVErlb3+56yeZ8UKWAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 02 16 11 32 40" title="" data-src="/static/2022-02-16-11-32-40-85dde8410900c56b62caacc45ae2931e-e5c7b.png" data-srcset="/static/2022-02-16-11-32-40-85dde8410900c56b62caacc45ae2931e-ec56c.png 200w,\n/static/2022-02-16-11-32-40-85dde8410900c56b62caacc45ae2931e-73c25.png 400w,\n/static/2022-02-16-11-32-40-85dde8410900c56b62caacc45ae2931e-e5c7b.png 612w" data-sizes="(max-width: 612px) 100vw, 612px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>如果希望径向渐变的水平半径和垂直半径都是 50px，则无须设置为 50px 50px，直接设置为 50px，当作圆形径向渐变处理即可，代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="52735833759489650000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`radial-gradient(50px, white, deepskyblue);`, `52735833759489650000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token function">radial-gradient</span><span class="token punctuation">(</span>50px<span class="token punctuation">,</span> white<span class="token punctuation">,</span> deepskyblue<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>效果如图 5-13 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-02-16-11-34-24-023abacfa3b9fd6e766cf3fc6f8b71f0-d67a7.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 718px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 52.64623955431754%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABSklEQVQoz42QzUrDUBCF0+pGRV/AVdWNdmcRRMS1iDtfSFyJ7yGCP+BOaPPbNvGmSZMmupXa4MIqaosuXLQ5Tu5t2goKvXwZzsycQ2CkmzcsWlhmWPpN7nbA+FDYcgz+J+hJF21IMjIqpHEUXjUulNF8aLO6PHz1kqyzGjIplFmoYKuO/RAbLuaMZCJW2dTARPiSh8VIQI5tD8ctnLVx2MS6O1oNbX+ERZ0xcHCP61c8feP0GbsBpvUJwoIpDTseTlqgcxw9ojDhnweomC9js469AAUHs8b/4XO6dglZJT2sQOaoqUjnGQ4Js8PDxXesMORrCWucvJPoVcLmbSJisR3agi8ejuMYBH39PlUakaAG4vEVBh6M6bjX60kPzeij042iyA9Du+6bFlM0Q69YrucXS4qsVRvBneN5ZZPVHFer0N7WqWE1Ra/+AAaa0b6puhgxAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 02 16 11 34 24" title="" data-src="/static/2022-02-16-11-34-24-023abacfa3b9fd6e766cf3fc6f8b71f0-d67a7.png" data-srcset="/static/2022-02-16-11-34-24-023abacfa3b9fd6e766cf3fc6f8b71f0-8a0cc.png 200w,\n/static/2022-02-16-11-34-24-023abacfa3b9fd6e766cf3fc6f8b71f0-ca50d.png 400w,\n/static/2022-02-16-11-34-24-023abacfa3b9fd6e766cf3fc6f8b71f0-d67a7.png 718w" data-sizes="(max-width: 718px) 100vw, 718px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>但是要注意，水平半径和垂直半径合写的时候，只能是长度值，不能是百分比值，也就是说下面的语法是不合法的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="38373221794905630000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 不合法 */\nradial-gradient(50%, white, deepskyblue);`, `38373221794905630000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 不合法 */</span>\n<span class="token function">radial-gradient</span><span class="token punctuation">(</span>50%<span class="token punctuation">,</span> white<span class="token punctuation">,</span> deepskyblue<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>如果想要使用百分比值，就必须给出两个值。例如，下面的语法就是合法的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="39098446913339210000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 合法 */\nradial-gradient(50% 50%, white, deepskyblue);`, `39098446913339210000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 合法 */</span>\n<span class="token function">radial-gradient</span><span class="token punctuation">(</span>50% 50%<span class="token punctuation">,</span> white<span class="token punctuation">,</span> deepskyblue<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<h3 id="设置渐变中心点的位置"><a href="#%E8%AE%BE%E7%BD%AE%E6%B8%90%E5%8F%98%E4%B8%AD%E5%BF%83%E7%82%B9%E7%9A%84%E4%BD%8D%E7%BD%AE" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>设置渐变中心点的位置</h3>\n<p>如果想要改变中心点的位置，我们可以使用 <code class="language-text">at &lt;position&gt;</code> 语法。<code class="language-text">&lt;position&gt;</code> 这个数据类型在 background-position 那里已经详细介绍过了，已经忘记的读者可以翻回去再看看。</p>\n<p>例如，如果想让渐变的中心点在左上角，则下面两种写法都是可以的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="76864866636625150000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`radial-gradient(100px at 0 0, white, deepskyblue);\nradial-gradient(100px at left top, white, deepskyblue);`, `76864866636625150000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token function">radial-gradient</span><span class="token punctuation">(</span>100px at 0 0<span class="token punctuation">,</span> white<span class="token punctuation">,</span> deepskyblue<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token function">radial-gradient</span><span class="token punctuation">(</span>100px at left top<span class="token punctuation">,</span> white<span class="token punctuation">,</span> deepskyblue<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>效果如图 5-14 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-02-16-11-41-50-0df4fc4ce1ffca627fe339840ca0760d-e07da.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 611px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 61.374795417348615%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAABT0lEQVQoz42Su0oDQRSGJxtFbCwEBSFGCxEFK1GxUyxM4eUZbG0kT+AL2Aj6GhZip8Y16m4WL8leErOXJEUSCGxitSaFMPM7u0VgEZOFj5+ZM/MNM4chXz/Ie7hq46yOYwspDYsKZnNI/s98DlMSDnQQ1cNNB5dNpB3saVhQMCKCPAxC4HmH9XeQ6zYumjit4aiM7TwSEgQRsYHE+en32ODyeQMntm/uqlhWMJ4FEYcg9OW0jZSKrTyWFEw8DTdD8qGOORkzEsaykcyQvPoW9ECMaobklVdfHn1EPDJ8M8lg8wOEP5X3PZbx5xEReN5ijV95p4DpF5aUkZAx6ydLSH8IF5Mym3xm+/yTdCl6wDfz8YJxny6HBRkMQku8TkEYpVpB67hux233PM8yzbJR+jRKRdWoORW31ao6Fccym/VG1XYMTS+qulU2bdOklP4CqE3jv719hP4AAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 02 16 11 41 50" title="" data-src="/static/2022-02-16-11-41-50-0df4fc4ce1ffca627fe339840ca0760d-e07da.png" data-srcset="/static/2022-02-16-11-41-50-0df4fc4ce1ffca627fe339840ca0760d-20936.png 200w,\n/static/2022-02-16-11-41-50-0df4fc4ce1ffca627fe339840ca0760d-da2be.png 400w,\n/static/2022-02-16-11-41-50-0df4fc4ce1ffca627fe339840ca0760d-e07da.png 611w" data-sizes="(max-width: 611px) 100vw, 611px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>如果想让渐变的中心点在距离右边缘和下边缘 100px 的位置，则可以使用下面的 CSS 代码：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="7669847755933023000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`radial-gradient(100px at right 100px bottom 100px, white, deepskyblue);`, `7669847755933023000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token function">radial-gradient</span><span class="token punctuation">(</span>100px at right 100px bottom 100px<span class="token punctuation">,</span> white<span class="token punctuation">,</span> deepskyblue<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-02-16-11-45-04-38c2929accf3d5064f2eaed38d137fab-042f3.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 46.44607843137255%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsSAAALEgHS3X78AAABnklEQVQoz32Q30tTURzAT6skKuw9X7SXhJJC6B/orSCEwEfxpR9PEvhUIhUUvvQSQQ8RaaAPEgjik9nscgs1t8GYiWlC23S7d/dud2ObbnnXzqdzNhgG4eHzcL6c7+f744g/EnVms1xcpTfM1QZXwlyPcn+LsSQTNtMO7yyeJbi7ybUIczmtKFHUGvJbC7FAYBHR5DOdK/Sv8zzOjItR4IPL0zi31zn3lQnrX3lcyUFOGAQMjhm0mfRGdOc3aaIl8j6hIq9T3Nmka4WpzP9kZYoGxw0urzL4g5e7BPN8L/PR48UOAxt0LDFpHykrzi9xM8bwNq9S+lVVebDNjRinTd635OaHqVjtecrUAytOmpwx6QnRt8a9LYZ+6oFvrXEppNMmW2P7dWVLtZuYl4FPUhwmKNu/yAvLsvub7FqWZ00ZWJQqbTytlVpdirquQrjE8C9GEjxK8DCu0ZfG/XGSJ0lGm2FCp0X3taKaCsuy9vb2/WrlwHMruUzZsWpFT5YK1ZxbstO/Pbfs2FXP9Qu5StapFfN+0ctmMmnLdtzsX5/9qhG8oS7LAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 02 16 11 45 04" title="" data-src="/static/2022-02-16-11-45-04-38c2929accf3d5064f2eaed38d137fab-fee1c.png" data-srcset="/static/2022-02-16-11-45-04-38c2929accf3d5064f2eaed38d137fab-a67b7.png 200w,\n/static/2022-02-16-11-45-04-38c2929accf3d5064f2eaed38d137fab-0b187.png 400w,\n/static/2022-02-16-11-45-04-38c2929accf3d5064f2eaed38d137fab-fee1c.png 800w,\n/static/2022-02-16-11-45-04-38c2929accf3d5064f2eaed38d137fab-042f3.png 816w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h3 id="设置渐变终止点的位置"><a href="#%E8%AE%BE%E7%BD%AE%E6%B8%90%E5%8F%98%E7%BB%88%E6%AD%A2%E7%82%B9%E7%9A%84%E4%BD%8D%E7%BD%AE" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>设置渐变终止点的位置</h3>\n<p>如果渐变的中心点不在元素的中心位置，又希望渐变的结束位置在元素的某一侧边缘或某一个边角，那么渐变终止点该怎么设置呢？</p>\n<p>CSS 径向渐变语法中提供了专门的数据类型 <code class="language-text">&lt;extent-keyword&gt;</code>，该数据类型包含 4 个关键字，可以指定渐变终止点的位置，如表 5-2 所示。</p>\n<table>\n<thead>\n<tr>\n<th align="left">关键字</th>\n<th align="left">描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align="left">closest-side</td>\n<td align="left">渐变中心距离容器最近的边作为终止位置</td>\n</tr>\n<tr>\n<td align="left">closest-corner</td>\n<td align="left">渐变中心距离容器最近的角作为终止位置</td>\n</tr>\n<tr>\n<td align="left">farthest-side</td>\n<td align="left">渐变中心距离容器最远的边作为终止位置</td>\n</tr>\n<tr>\n<td align="left">farthest-corner</td>\n<td align="left">默认值，渐变中心距离容器最远的角作为终止位置</td>\n</tr>\n</tbody>\n</table>\n<p>各个关键字对应的位置如图 5-16 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-02-16-11-59-01-3dde9f09970f78475c63448d2a0a8396-932f0.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 48.18288393903869%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABtElEQVQoz41RTUsbURR9NLQIXXTnHyil2H9QXNid2G5EbFyEiv4AwV9QsumqhZS2dN+lP6AIGjRpKmT8mmjSiWPiJJmZTDITsJnR+cpk3unLhwmkGw8HLu/y7j33nktwBwoEdMhOSEOgIisH3OExf5YvXvgh1Q2j3W7btu26ruM4nucR9GsYPoo307/pcw5Ps5jhsCIgfuklckriTI2L7ptzxPZrDUWuVKuapqmqqus6uWYwLTjW+o5IfgYP90GSeJzGQg7fmsg08UvDdx2zJ4gW2DSU9mccgLA2DaMV/G2t7YpkO3iUBtnDkwwWC/hUtn6kpK0j47N0+4pHTOgtF9IxxmO/Fx2SpFNpRFKYSuHlKTaKQUKyv8jeZrHzgsNSfmjNWJk1YPYAYbwUkG0aSYLs9vhgD8+yYIJzPJgRLPOa/6948EbX/8qVF47stwKWzikTWcxjuYBVAe8ERP9gPocP1WHxCMT3fWadrChqtWJpcuDamPwzOuVkknS7XdM0Lcti1zOtm47fwb3R25kFw2jVtcatbdfrmlAUVZXFRk1WLsRS+UoqMZaly9IVo+O4GFwM+Ac9QAbA6pYnbAAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 02 16 11 59 01" title="" data-src="/static/2022-02-16-11-59-01-3dde9f09970f78475c63448d2a0a8396-fee1c.png" data-srcset="/static/2022-02-16-11-59-01-3dde9f09970f78475c63448d2a0a8396-a67b7.png 200w,\n/static/2022-02-16-11-59-01-3dde9f09970f78475c63448d2a0a8396-0b187.png 400w,\n/static/2022-02-16-11-59-01-3dde9f09970f78475c63448d2a0a8396-fee1c.png 800w,\n/static/2022-02-16-11-59-01-3dde9f09970f78475c63448d2a0a8396-932f0.png 853w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>我们试一下，看看使用关键字 farthest-corner 的渲染效果：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="69834382941358930000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`radial-gradient(farthest-corner circle at right 100px bottom 100px, white, deepskyblue);`, `69834382941358930000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token function">radial-gradient</span><span class="token punctuation">(</span>farthest-corner circle at right 100px bottom 100px<span class="token punctuation">,</span> white<span class="token punctuation">,</span> deepskyblue<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>效果如图 5-17 所示，可以看到白色到深天蓝色的渐变一直过渡到左下角。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-02-16-12-01-04-0c8b5a129f8b0246a226bb023f676973-284ba.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 653px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 60.949464012251156%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAACSUlEQVQoz12RWWtTURSF75/wDyiKoL74qBbHBxEfhAqCKCgo6EMRH7QoCmJxqgPUFuxobbWCI1JxqoqK1jatTdvMSZvm3uTmZmim3jTpZM/nOcEHETabw4Fvr73W1g772D3OIR8ng9SGuaJzN0anxfM077N8z/PLxlXEM8t4EYfNlzxvMvSkeJpCq3KyapAtTva6kINOhbgUoSFGV5Leab7mcdoESkyU8ZUYmuFTjhdpWkw6LLRdY6x3IPt+D8cD1E5yXac5zpM0fTmGbYWlFsgtEp/HW6J/hrdZuhI8TFTgdf/BBi1xnqX5mGPEZmqOwhLzgvSiWmFghndZupM8SqLtrMCyV7s5FuDMJNd07knlFH1ZtWeoRGKBzCKmVJ6lv6A8P0jQLZW3j7LWwbZR9rk54uf0BHURGmNqq9cZvknPRfwlgiVFOiqeX07TaqlQta1OVg9SVQlMZl4T4uIUtwzaLCUu7UleriqxnwU+51SKPUkaTWVNkzmvHGDTiDrYAS8ngpz952DyHr0ZdbMPWTXo1TSPU7TFqTcUr20cZsUPNgyxeYQ94xys8NL55Qh3oir2ThlsUqnJ3m7RZHIzyvkwV3W0HU6xZlBIfalc7RZHfaImJM6FRV1E3DZEkyla46IjLu5bot0SzaZoiIl6Q1yYEjcMoWV+k1pSlV4iL8gvU1jGrlRxmVlBSVDmb5UqJT9tQVGgRcJhXTfsQmGuXHaNuULBiVjUNKNmJpNJJpIJK6HrUZfL43F7A4GQ3x/wev1et08+DCP6B+EeWEsrxRTzAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 02 16 12 01 04" title="" data-src="/static/2022-02-16-12-01-04-0c8b5a129f8b0246a226bb023f676973-284ba.png" data-srcset="/static/2022-02-16-12-01-04-0c8b5a129f8b0246a226bb023f676973-b5223.png 200w,\n/static/2022-02-16-12-01-04-0c8b5a129f8b0246a226bb023f676973-dce0f.png 400w,\n/static/2022-02-16-12-01-04-0c8b5a129f8b0246a226bb023f676973-284ba.png 653w" data-sizes="(max-width: 653px) 100vw, 653px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>如果图 5-17 看得不是很清晰，我们可以稍微改变下，将渐变转换点位置调整到接近渐变结束点的位置，代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="34953697502047000000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`radial-gradient(farthest-corner circle at right 100px bottom 100px, white, 99%, deepskyblue);`, `34953697502047000000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token function">radial-gradient</span><span class="token punctuation">(</span>farthest-corner circle at right 100px bottom 100px<span class="token punctuation">,</span> white<span class="token punctuation">,</span> 99%<span class="token punctuation">,</span> deepskyblue<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>此时效果如图 5-18 所示，可以明显看到白色一直延伸到元素左下角位置，表明在这个例子中，farthest-corner 对应的位置就是左下角。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-02-16-12-04-07-161da4b77bbee27eb27896ce5348247d-c84fc.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 685px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 49.78102189781022%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABGElEQVQoz5WRzU6DQBCAeVQfwMTwAHAUUoxXeuDkRSQSLn0B/6BdtJYgh1JaxFZ74G8hHpoWWIeiMTUhkS+7m9md+bKTXaqqKkKI67oMw0iSJIpivwVIQQHLso7jgFKWJQUTIoSQLMsQFEVBWmhSqqrqun4gm6apKMqvvG/nD02lpmmGYbTIu13bzf+Qt1uCMVmvu8mX12otDwbE98lm00VG6Pziqj7Ks84P5k6nR8cnp8IZ3+vxHMf/wB0iCAJN07Ztf8tVCT9dL595HkdxHEdAGIVhVG/SNEn3YIyTJIFUlmVNC2BR9w968LaC+tl8jp4mluXc3N4NR+PxxPIWvjtbBMv35erDfw08zzfNZ8t6GaJHGMYIfQGT5QwY8ayQ0gAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 02 16 12 04 07" title="" data-src="/static/2022-02-16-12-04-07-161da4b77bbee27eb27896ce5348247d-c84fc.png" data-srcset="/static/2022-02-16-12-04-07-161da4b77bbee27eb27896ce5348247d-18514.png 200w,\n/static/2022-02-16-12-04-07-161da4b77bbee27eb27896ce5348247d-82fbc.png 400w,\n/static/2022-02-16-12-04-07-161da4b77bbee27eb27896ce5348247d-c84fc.png 685w" data-sizes="(max-width: 685px) 100vw, 685px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>上面的例子中出现了一个关键字 circle，它表示一个圆。与之对应的还有一个关键字 ellipse，它表示椭圆。由于径向渐变的默认形状就是椭圆，因此，没有任何一个场景必须要使用 ellipse 关键字。</p>\n<p>circle 关键字必须要出现的场景也不多，多用在需要使用 closest-side、closest-corner、farthest-side 或者 farthest-corner 关键字的场景。</p>\n<h3 id="径向渐变中的语法细节"><a href="#%E5%BE%84%E5%90%91%E6%B8%90%E5%8F%98%E4%B8%AD%E7%9A%84%E8%AF%AD%E6%B3%95%E7%BB%86%E8%8A%82" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>径向渐变中的语法细节</h3>\n<p>上面这些示例已经覆盖了常见的径向渐变的语法，是时候给出径向渐变的正式语法了，再看看是否还有遗漏的细节：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="74724690286310770000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`radial-gradient(\n   [\n      [ circle || <length> ] [ at <position> ]?, | [ ellipse || [ <length> | <percentage> ]{2} ] [ at <position> ]?, | [ [circle | ellipse ] || [ extent-keyword ] ] [ at <position> ]?, | at <position>,\n   ]?\n   <color-stop-list> [ , <color-stop-list> ]+\n)`, `74724690286310770000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title=""\n              >\n                \n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">radial-gradient(\n   [\n      [ circle || &lt;length&gt; ] [ at &lt;position&gt; ]?, | [ ellipse || [ &lt;length&gt; | &lt;percentage&gt; ]{2} ] [ at &lt;position&gt; ]?, | [ [circle | ellipse ] || [ extent-keyword ] ] [ at &lt;position&gt; ]?, | at &lt;position&gt;,\n   ]?\n   &lt;color-stop-list&gt; [ , &lt;color-stop-list&gt; ]+\n)</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>下面说明一下具体细节。</p>\n<ol>\n<li>\n<p>从 <code class="language-text">[ circle || &lt;length&gt; ]</code> 可以看出，如果只有 1 个值，或者出现了 circle 关键字，后面的值只能是长度值，不能是百分比值，因此下面的语法是不合法的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="77587838535784730000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 不合法 */\nradial-gradient(circle 50%, white, deepskyblue);`, `77587838535784730000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 不合法 */</span>\n<span class="token function">radial-gradient</span><span class="token punctuation">(</span>circle 50%<span class="token punctuation">,</span> white<span class="token punctuation">,</span> deepskyblue<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>circle 关键字和 ellipse 关键字在与半径值或者 <code class="language-text">&lt;extent-keyword&gt;</code> 一起使用的时候，前后顺序是没有要求的，也就是下面的语法都是合法的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="84183017209473610000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 合法 */\nradial-gradient(50px circle, white, deepskyblue);\nradial-gradient(circle farthest-side, white, deepskyblue);`, `84183017209473610000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 合法 */</span>\n<span class="token function">radial-gradient</span><span class="token punctuation">(</span>50px circle<span class="token punctuation">,</span> white<span class="token punctuation">,</span> deepskyblue<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token function">radial-gradient</span><span class="token punctuation">(</span>circle farthest-side<span class="token punctuation">,</span> white<span class="token punctuation">,</span> deepskyblue<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>但是 <code class="language-text">at &lt;position&gt;</code> 的位置是固定的，其一定是在半径值的后面、渐变断点的前面，否则语法就不合法。例如下面的语法都是不合法的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="38917342819339076000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 不合法 */\nradial-gradient(circle, white, deepskyblue, at center);\nradial-gradient(at 50%, farthest-side, white, deepskyblue);`, `38917342819339076000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 不合法 */</span>\n<span class="token function">radial-gradient</span><span class="token punctuation">(</span>circle<span class="token punctuation">,</span> white<span class="token punctuation">,</span> deepskyblue<span class="token punctuation">,</span> at center<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token function">radial-gradient</span><span class="token punctuation">(</span>at 50%<span class="token punctuation">,</span> farthest-side<span class="token punctuation">,</span> white<span class="token punctuation">,</span> deepskyblue<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n</li>\n</ol>\n<p>最后，如果能一眼就看出下面这些径向渐变代码的效果都是一样的，说明对径向渐变语法的学习合格了：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="69152661004496904000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`radial-gradient(white, deepskyblue);\nradial-gradient(ellipse, white, deepskyblue);\nradial-gradient(farthest-corner, white, deepskyblue);\nradial-gradient(ellipse farthest-corner, white, deepskyblue);\nradial-gradient(at center, white, deepskyblue);\nradial-gradient(ellipse at center, white, deepskyblue);\nradial-gradient(farthest-corner at center, white, deepskyblue);\nradial-gradient(ellipse farthest-corner at center, white, deepskyblue);`, `69152661004496904000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token function">radial-gradient</span><span class="token punctuation">(</span>white<span class="token punctuation">,</span> deepskyblue<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token function">radial-gradient</span><span class="token punctuation">(</span>ellipse<span class="token punctuation">,</span> white<span class="token punctuation">,</span> deepskyblue<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token function">radial-gradient</span><span class="token punctuation">(</span>farthest-corner<span class="token punctuation">,</span> white<span class="token punctuation">,</span> deepskyblue<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token function">radial-gradient</span><span class="token punctuation">(</span>ellipse farthest-corner<span class="token punctuation">,</span> white<span class="token punctuation">,</span> deepskyblue<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token function">radial-gradient</span><span class="token punctuation">(</span>at center<span class="token punctuation">,</span> white<span class="token punctuation">,</span> deepskyblue<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token function">radial-gradient</span><span class="token punctuation">(</span>ellipse at center<span class="token punctuation">,</span> white<span class="token punctuation">,</span> deepskyblue<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token function">radial-gradient</span><span class="token punctuation">(</span>farthest-corner at center<span class="token punctuation">,</span> white<span class="token punctuation">,</span> deepskyblue<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token function">radial-gradient</span><span class="token punctuation">(</span>ellipse farthest-corner at center<span class="token punctuation">,</span> white<span class="token punctuation">,</span> deepskyblue<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="径向渐变在实际开发中的应用举例"><a href="#%E5%BE%84%E5%90%91%E6%B8%90%E5%8F%98%E5%9C%A8%E5%AE%9E%E9%99%85%E5%BC%80%E5%8F%91%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8%E4%B8%BE%E4%BE%8B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>径向渐变在实际开发中的应用举例</h3>\n<p>在实际项目中，径向渐变除了用来实现元素本身的渐变效果，还被用来绘制各类圆形图案。例如，给按钮增加白色高光：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="13627196736644920000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`button {\n   color: #fff;\n   background-color: #2a80eb;\n   background-image: radial-gradient(160% 100% at 50% 0%, hsla(0, 0%, 100%, 0.3) 50%, hsla(0, 0%, 100%, 0) 52%);\n}`, `13627196736644920000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">button</span> <span class="token punctuation">{</span>\n   <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>\n   <span class="token property">background-color</span><span class="token punctuation">:</span> #2a80eb<span class="token punctuation">;</span>\n   <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token function">radial-gradient</span><span class="token punctuation">(</span>160% 100% at 50% 0%<span class="token punctuation">,</span> <span class="token function">hsla</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0%<span class="token punctuation">,</span> 100%<span class="token punctuation">,</span> 0.3<span class="token punctuation">)</span> 50%<span class="token punctuation">,</span> <span class="token function">hsla</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0%<span class="token punctuation">,</span> 100%<span class="token punctuation">,</span> 0<span class="token punctuation">)</span> 52%<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>效果如图 5-19 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-02-18-11-31-31-5fa71221b0668887dd9717edea22fbe2-310ee.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 415px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 58.554216867469876%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAACPUlEQVQoz61RS08TYRSd3+AWJD6iUSu48CeYuFI3xsSFCQUVX2gimypGLBQXgmKMhNQmFinFViwILa21jaMClYSYqDtUCNY+6LS0nXamFInmeO9MlOrKGCc5Od+95977ne+O0DpWRPuEArPv33HNq6AzoCCe+wahvl/GKaeMpkEZJyvQ9Cec61xZw8z9x+x5ROa/Qjg9JOO8u4BzDwtodhW0MzPHrDHO0pmbfsZanWu954Jb12cX1yActuZw3CHjBKFluID7kRL6Xqno9Cu4N1PC3Rcq7jxXMcBnUYWV4l6xBBvVXXwko3FARsODPA705iDOrULY3JrGHksGBnMaR/vzuBVW0R1S0OyWqVGFhXbcRjuyT5dwO6ygJ6TrXcEi9nctw9CeQS1h4yUJT96WIWy5ksZuSmwlPmjLoYF2coaeZaRb9/VkccSa115QT7GRLjzUl4PRkUcj7WxvRwbb2/T+TWRs/B0N3HaVHJJQS2BhBxXsMmc018ycr+vQXeykmB0ZiOssusZ5rmVj2sANLSnUXJZQbdLB1qsJVSadOVdVqZl+zzFqKM9zvO9p4PVAETdpJ4zuZ8z6jvj8V6DaG0FF+2FZ9TsE/OdPmPu4gMRSGivlMuLJFMqraygqJcQTKcISFqMxxIil9DKiXxKIxpKaJmWyv7TP0ThiSUkfaLM7IE6+RlZKYWb2DQrKCj58moc/EIZnZAyPPV5MBIIQX07DOejC8Mg4Rn1P4Rn1wjHkxtRkBD5/CGFxShv4AzhC7jPj+4nLAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 02 18 11 31 31" title="" data-src="/static/2022-02-18-11-31-31-5fa71221b0668887dd9717edea22fbe2-310ee.png" data-srcset="/static/2022-02-18-11-31-31-5fa71221b0668887dd9717edea22fbe2-b3bb4.png 200w,\n/static/2022-02-18-11-31-31-5fa71221b0668887dd9717edea22fbe2-9106d.png 400w,\n/static/2022-02-18-11-31-31-5fa71221b0668887dd9717edea22fbe2-310ee.png 415w" data-sizes="(max-width: 415px) 100vw, 415px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>径向渐变也可以让按钮背景呈现多彩的颜色融合效果：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="37346913807298550000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`button {\n   color: #fff;\n   background-color: #2a80eb;\n   background-image: radial-gradient(farthest-side at bottom left, rgba(255, 0, 255, 0.5), transparent), radial-gradient(farthest-corner\n            at bottom right, rgba(255, 255, 50, 0.5), transparent);\n}`, `37346913807298550000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">button</span> <span class="token punctuation">{</span>\n   <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>\n   <span class="token property">background-color</span><span class="token punctuation">:</span> #2a80eb<span class="token punctuation">;</span>\n   <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token function">radial-gradient</span><span class="token punctuation">(</span>farthest-side at bottom left<span class="token punctuation">,</span> <span class="token function">rgba</span><span class="token punctuation">(</span>255<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 255<span class="token punctuation">,</span> 0.5<span class="token punctuation">)</span><span class="token punctuation">,</span> transparent<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">radial-gradient</span><span class="token punctuation">(</span>farthest-corner\n            at bottom right<span class="token punctuation">,</span> <span class="token function">rgba</span><span class="token punctuation">(</span>255<span class="token punctuation">,</span> 255<span class="token punctuation">,</span> 50<span class="token punctuation">,</span> 0.5<span class="token punctuation">)</span><span class="token punctuation">,</span> transparent<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>效果如图 5-20 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-02-18-11-43-35-6fdb4e56bb36592795ca8f63c8d21a91-96dff.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 494px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 49.797570850202426%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAACi0lEQVQoz02P+y/bYRTG/Wv7cSoRZNklwkwWlpjMxOI2lrjNxDATVS3Slky0WNa5VKpal9SwatFWVctci7Yo36rbZ1+SpTvJc54n5ySf97xxiOXZvySp0Y+kfpfExi2SmjdJbvGR0rrOozY3j9tdPJE7eaZYIVWxTFrHEmmddtI7baIvkqm04T08v0MRd9cszggP8jeJL/YhKfXwsMRFfNkKkgo78VVWJJ/mia+fRdI0Q0LzFAlfzSS2mEiRmsUH77KRWd9hDGhzCqS+8fHi3TqZRW6KGzyUflmjsMlBucxBscxOcYeVQtU8BSoL77W/KNBOkdE1Kl43Kl46zOKWPwZ0LAvkZnvJz/WQl+vi+8AeRsM+cqWXEcMWKu0qPwwbDE646dU7GJxxoTTNkaMc4PW3QV51a1na3o0B15YEyjO8VGZ5qMheRV7rRdOxgVLmRtPjRi5bpEtlR62x0tozjXLIgkJnpFTdR4mmlwKNGsfedgzoXRCoS/bR8HSdxjQ39c9XqHtpoy5ngdo8C7VFk3z8ME5N9Sg1n3VUt/RTreilWq2mqq+LsgEprn1fDHiwFqU7fQdVxibKLC9dOW463jqQF9ppL1tAVjlLW90U0iYjUqkeaacOaU8/Um0vrTolrWMKdkL/ffmuoie3CIEbzgPXXIj54lTU2S2R8A1C+IrI+TUR4QpBuESIREVdEImKuoxweRP9hyHO7/dzGj4TlwKCqJvba0InIYLHAQ6PDu7z2fkZgVCQQOCI4+OTe4XD4XsPBUPiXNwFg/j9B8SN6PXYlh04nat4fX84OgowYZ7GaDYzNKJn2jLHwm8b+nETup/DTE7NYJ60YDRNMjZuZkJ0g9GM1WpnzGDiL2SPhxzx3qYqAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 02 18 11 43 35" title="" data-src="/static/2022-02-18-11-43-35-6fdb4e56bb36592795ca8f63c8d21a91-96dff.png" data-srcset="/static/2022-02-18-11-43-35-6fdb4e56bb36592795ca8f63c8d21a91-1a6e9.png 200w,\n/static/2022-02-18-11-43-35-6fdb4e56bb36592795ca8f63c8d21a91-b9533.png 400w,\n/static/2022-02-18-11-43-35-6fdb4e56bb36592795ca8f63c8d21a91-96dff.png 494w" data-sizes="(max-width: 494px) 100vw, 494px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>径向渐变还可以实现点击按钮的时候，出现一个圆形扩散的效果：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="77706213978064900000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`button {\n   color: #fff;\n   background-color: #2a80eb no-repeat center;\n   background-image: radial-gradient(\n      closest-side circle,\n      rgba(255, 70, 70, 0.9),\n      rgba(255, 70, 70, 0.9) 99%,\n      rgba(255, 70, 70, 0) 100%\n   );\n   background-size: 0% 0%;\n   transition: background-size 0.2s;\n}\n\nbutton:active {\n   background-size: 250% 250%;\n}`, `77706213978064900000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">button</span> <span class="token punctuation">{</span>\n   <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>\n   <span class="token property">background-color</span><span class="token punctuation">:</span> #2a80eb no-repeat center<span class="token punctuation">;</span>\n   <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token function">radial-gradient</span><span class="token punctuation">(</span>\n      closest-side circle<span class="token punctuation">,</span>\n      <span class="token function">rgba</span><span class="token punctuation">(</span>255<span class="token punctuation">,</span> 70<span class="token punctuation">,</span> 70<span class="token punctuation">,</span> 0.9<span class="token punctuation">)</span><span class="token punctuation">,</span>\n      <span class="token function">rgba</span><span class="token punctuation">(</span>255<span class="token punctuation">,</span> 70<span class="token punctuation">,</span> 70<span class="token punctuation">,</span> 0.9<span class="token punctuation">)</span> 99%<span class="token punctuation">,</span>\n      <span class="token function">rgba</span><span class="token punctuation">(</span>255<span class="token punctuation">,</span> 70<span class="token punctuation">,</span> 70<span class="token punctuation">,</span> 0<span class="token punctuation">)</span> 100%\n   <span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token property">background-size</span><span class="token punctuation">:</span> 0% 0%<span class="token punctuation">;</span>\n   <span class="token property">transition</span><span class="token punctuation">:</span> background-size 0.2s<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">button:active</span> <span class="token punctuation">{</span>\n   <span class="token property">background-size</span><span class="token punctuation">:</span> 250% 250%<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>效果如图 5-21 所示，这里为了方便示意，扩散的圆形使用了红色。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-02-18-11-46-57-d631ccb9477eadac1c5f4f2127a57818-08a78.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 574px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 56.09756097560976%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABvUlEQVQoz2P4jwf8+wci9+z5f+DA//Pn/5879//Wrf87d/6/efP/sWNAGYa/f///QaB///8CwT8o98+/P0Ald+78f/z4/6NHIMaXL/+vXv3/9u3/jx//f//O8B8/gFgOVPrgAdAwNEmGhce/Va7/1LD5c9WWH0tXXLsye+O6ZReqt34Hiaz7OPHwrx/HT/0/d/YfxCAIghnK4NT3VqjgOX/Fh9j4DfesfR5beTyy8iyMWMBX/l6k6LlO0+vnzz//B3rmHxZnMQTPeKdW/9qg6eX55lk/snLfVjR8zSl8O22Od/dz5brXDr1vXn76C3c+Fs0qta8t2l/da5/xs7b+xYy5z1q6vk6fEzrhmVLtG0f8mt0nvpUqfSFZ+7E4edUbe88HAdHHy2tbQidJ1H6UKXth1PrmxUeQZuzOnnnoa+6Kj8VrPuWs+bZyzvHrPQtWztiXv+ZL4epPeSs+tO/4/P0XOLCwxMM/SFT9wxNXQPQHmACQ3A1KCZDQfvP27eHjpx8+fv70xesvHz+dO3fh2LGTx0+ePXL89IUr10+eOXv4+MmjQJFTZ2/eun3y1JlTZ84eO3n64sXLl65cBwCbajIjgKZIKwAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 02 18 11 46 57" title="" data-src="/static/2022-02-18-11-46-57-d631ccb9477eadac1c5f4f2127a57818-08a78.png" data-srcset="/static/2022-02-18-11-46-57-d631ccb9477eadac1c5f4f2127a57818-683d3.png 200w,\n/static/2022-02-18-11-46-57-d631ccb9477eadac1c5f4f2127a57818-6bdc6.png 400w,\n/static/2022-02-18-11-46-57-d631ccb9477eadac1c5f4f2127a57818-08a78.png 574w" data-sizes="(max-width: 574px) 100vw, 574px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/khz3c4?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>径向渐变还可以用来绘制各种波形效果，例如绘制优惠券边缘的波形效果：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="30761218359343022000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<div class=&quot;radial-wave&quot;></div>\n<style>\n   .radial-wave {\n      width: 200px;\n      height: 100px;\n      background: linear-gradient(to top, transparent 10px, red 10px) no-repeat, radial-gradient(\n            20px 15px at left 50% bottom 10px,\n            red 10px,\n            transparent 11px\n         );\n      background-size: auto, 20px 10px;\n   }\n</style>`, `30761218359343022000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>radial-wave<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n   <span class="token selector">.radial-wave</span> <span class="token punctuation">{</span>\n      <span class="token property">width</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>\n      <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>\n      <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>to top<span class="token punctuation">,</span> transparent 10px<span class="token punctuation">,</span> red 10px<span class="token punctuation">)</span> no-repeat<span class="token punctuation">,</span> <span class="token function">radial-gradient</span><span class="token punctuation">(</span>\n            20px 15px at left 50% bottom 10px<span class="token punctuation">,</span>\n            red 10px<span class="token punctuation">,</span>\n            transparent 11px\n         <span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token property">background-size</span><span class="token punctuation">:</span> auto<span class="token punctuation">,</span> 20px 10px<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>效果如图 5-22 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-02-18-11-51-10-8c5d54dfe2bbb5fea0f8c99f6f0775c0-58792.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 385px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 58.18181818181818%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAABLklEQVQoz6VRy2rCUBANvtbuXPsEt4L/of6EH+Af6RcIUkqTam0MUdI8xKiJ0UQhqfhEslS50ztaSleVkmE4c84wh7ncYYBGrQa5HBSLUCg8SDqTyUCrha7rlcFSKgHDQDiM+HdGIoj1Oroul5u5UsFWNAqh0IOMxXCy0fhlLpcDbA5kDvTsQB9WrUIiAdksHiyVgnQaeTKJkh7mTihSns9DPA7N5vepCC2nE9nvyW4HxyNF5JRsNuRwQL7doqR476/XcD6ji5Db5p8gBP4TjKyNfN/3XM/zPqm2rLmiqIZpOfZqOjFUVbMXznikq+rQNGayrEjSx8yay4pm2UuGFyXX9fTxZOEsqVkQBy/s60Ad9vsS13l7eua4drfXE7jOe5cXKOUF0ZiaLNuWNf0Lc+PBGza3UXIAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 02 18 11 51 10" title="" data-src="/static/2022-02-18-11-51-10-8c5d54dfe2bbb5fea0f8c99f6f0775c0-58792.png" data-srcset="/static/2022-02-18-11-51-10-8c5d54dfe2bbb5fea0f8c99f6f0775c0-f436a.png 200w,\n/static/2022-02-18-11-51-10-8c5d54dfe2bbb5fea0f8c99f6f0775c0-58792.png 385w" data-sizes="(max-width: 385px) 100vw, 385px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/8sn1v1?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>径向渐变可以实现的图形效果非常多，就不一一举例了。总而言之，要想将径向渐变用得出神入化，一定要牢牢掌握其语法。</p>\n<h2 id="了解-conic-gradient-锥形渐变"><a href="#%E4%BA%86%E8%A7%A3-conic-gradient-%E9%94%A5%E5%BD%A2%E6%B8%90%E5%8F%98" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>了解 conic-gradient() 锥形渐变</h2>\n<p>锥形渐变是 CSS Images Module Level 4 规范中新定义的一种渐变，也很实用，但其兼容性不太好，IE 浏览器和 Edge 浏览器并不支持，因此只适合在移动端项目和中后台项目中使用。</p>\n<p>锥形渐变的语法比径向渐变要简单不少，正式语法如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="4737263809948611000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`conic-gradient([ from <angle> ]? [ at <position> ]?, <angular-color-stop-list>)`, `4737263809948611000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token function">conic-gradient</span><span class="token punctuation">(</span>[ from &lt;angle> ]? [ at &lt;position> ]?<span class="token punctuation">,</span> &lt;angular-color-stop-list><span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>可以看出锥形渐变由以下 3 部分组成：</p>\n<ul>\n<li>起始角度；</li>\n<li>中心位置；</li>\n<li>角渐变断点。</li>\n</ul>\n<p>其中起始角度和中心位置都是可以省略的，因此，最简单的锥形渐变用法如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="99725029323407790000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.example {\n   width: 300px;\n   height: 150px;\n   background-image: conic-gradient(white, deepskyblue);\n}`, `99725029323407790000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.example</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>\n   <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token function">conic-gradient</span><span class="token punctuation">(</span>white<span class="token punctuation">,</span> deepskyblue<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>效果如图 5-23 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-02-19-11-15-53-27b88bd7a4d68eda3056dedfb1057dfc-42e87.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 58.16917728852838%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAACMUlEQVQozzWSSWhTURSG38KFK3cu1IU4oSI4YKWO4FyV4oCCIG7sRnSl4M6Vols3ohtRQa1IBWdxrNROSZo5L0l9ea1JQ5O0GdrmpelLS5vPc1/t5efyFv/3n/PuOdrRECfCNIU5HOJAkH0Bdvlp8LHWzacickoz5GfI1EjXSNoMTmFWMar8tdHEtMHDOjdrXKx0saKXpd0s6UJr58WIgjPTDNmYU/RXiU4SrhCqELCIT6Jt8dLgZauXzX1s6mO9h1UulvewqIPWEWbrpGwGqsqqL2A+C6+FLvB2Hzv97PAhH9skwstGD6tdLP7N8xEmZ1VBfYHpK+Mp4yrTWyZooTX62Rtgt8iv/rbRCZKUZT08zZG2ldst7gm6J+hy1CkaV1nanoB6p/1BdYsOBjkU5EiIY2HupfkxxreSun86al/QrzEVqgnWFFIS9/EwzRFO65yPctngTorHWdryvC3wscjnIl9KfC2pOJH0osmEmh3mpIOdi3IhRssfrpncTnF/mCc5Wkd5PcqbAu8KfCiqEUpQ1ziaVDujKwkmBS/GaennaoIbA9xKqs4fZhQvj/dKIvIqQhp5X6BDYGn4lFPzrP4fvtTPFYPrJjcHuZtS/INhHklElmc5XjopbaN8L6F1Os/YM4G7gtvCY+GvEqoSkdnaGDXMGoOyW7IqMww5SyY7I1PITaMxf+bm0qZZymbsipVKGImInjQMI6LHw5FEPG7EYkY0Fo/oxXxevPV6fR76B1EvTEObwQzwAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 02 19 11 15 53" title="" data-src="/static/2022-02-19-11-15-53-27b88bd7a4d68eda3056dedfb1057dfc-fee1c.png" data-srcset="/static/2022-02-19-11-15-53-27b88bd7a4d68eda3056dedfb1057dfc-a67b7.png 200w,\n/static/2022-02-19-11-15-53-27b88bd7a4d68eda3056dedfb1057dfc-0b187.png 400w,\n/static/2022-02-19-11-15-53-27b88bd7a4d68eda3056dedfb1057dfc-fee1c.png 800w,\n/static/2022-02-19-11-15-53-27b88bd7a4d68eda3056dedfb1057dfc-42e87.png 863w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>图 5-23 所示的锥形渐变渲染的关键要素如图 5-24 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-02-19-11-16-27-b74fc2876f84f31fc0d93af9cb4c977d-1093f.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 553px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 66.72694394213381%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAACkUlEQVQoz6WSTWgTURDHcxAUPHpRsAcpeBGlQsUiimKL2F60VBQ86FUUBUVPvaqIIIIHixhr1WKLVsS0NmkbGk2zSbqbbLJp2jRJzUebbL42yWbz0TTZzt8kggevzmHe4837zX9m3tPgXyMQNVevh4xzWFqCx0OCAIZBINCK09+rGkMWWhFvE3gj4rWIVyKG1usvAspzPu4NhqVMJisrm/XtQrmaK5SzKqQa0jVUt1vw1WXsY3DAhv0M9jLYY1Z3DQs7dJLGiIkU1VVVELNmX8i/ScsVeIpwK2BlyteaNWhurOIwi2MOHOVwhMNBfaJ9odpmx84f9CWNOmG9BpMvYovnvGXwCjlLsJeRq7eUb/rRwaHLQZ08OhZKh+fzhxxot9FuM02kqajCWyRvhYzh9GKRFmVikxVuNZ6NpRAOa24HmrKneDrpRpeleNxa6nKi04226dRTy6pX3rIqsBYwE1MYdoUNJJl4kQmkpI0kxLjmbhAnnOhxUbeAM9bS2cXyOQEDXHVgyj+o57+GlZmUOitDt17Qr0nzeRhlGArNmTXLvr+G0y70uqlvBd1GsWc2csWHZyMm7fCM9juvm3NPcuHPOXzwpXTZ7WkJBglTGUputQY2GML5htQSLnlx2aP2m2LXl9VbfjwIbj+K0stIfTSLIY845AhN5qBL05SEbxm0YGjuBRsNo1dAn4ALXvTz1Ys/xWtC5U4QjbwPI/R4Of/EndSK9C6B0STGUk0fq7ZgvdT8GyMivU/QaILG0hiPbX0MSOPB7KdQXvcrY4jmrTLZZeIK5FSIb/gCyX+eCv9hTTidkSxWNrIeC0WiuYJiMltc7iXbooN18KzTZbOxnEOws06msXG6God2lgtHNxrgb0PMidryIbZRAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 02 19 11 16 27" title="" data-src="/static/2022-02-19-11-16-27-b74fc2876f84f31fc0d93af9cb4c977d-1093f.png" data-srcset="/static/2022-02-19-11-16-27-b74fc2876f84f31fc0d93af9cb4c977d-7baba.png 200w,\n/static/2022-02-19-11-16-27-b74fc2876f84f31fc0d93af9cb4c977d-2a76e.png 400w,\n/static/2022-02-19-11-16-27-b74fc2876f84f31fc0d93af9cb4c977d-1093f.png 553w" data-sizes="(max-width: 553px) 100vw, 553px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>我们可以改变起始角度和中心位置，让图 5-23 所示的锥形渐变效果发生变化，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="20686623629897260000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`conic-gradient(from 45deg at 25% 25%, white, deepskyblue);`, `20686623629897260000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token function">conic-gradient</span><span class="token punctuation">(</span>from 45deg at 25% 25%<span class="token punctuation">,</span> white<span class="token punctuation">,</span> deepskyblue<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>渐变起始角度改成 45 度，中心点位置移动到了相对元素左上角 25% 的位置，效果如图 5-25 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-02-19-11-18-45-cc319597309d31cfb85ab6a5c6d62198-4c6f5.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 607px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 61.94398682042834%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAAB+klEQVQoz12SS2sTURiGZ+8f8VeIK8GNaxF0IbhrF4IuBBfqQkVESEWo4AWvoNCFBalQi7bE2quZJJ3JXFJzm9xnMplbkiY58/qdk+miwsPhHIb3+d5zGGnBwpyOeQPXNFxScU7GmQyyARjgTTjuBM6YYwu6go5AulHkgfNZnM3g9DZObeBFA2OGzhFaYzRHqI9gjVATVIlhQmUI6W4JFxVcUXFZxYUcT4ZTlMU3onyS0smj9KCCqxrmDFw3cb+MFQdbHq+thCiE0AbQIxgDmFFCcZBwOID0pIp5E7cOca+EVA0fWvjmIN3HroeMj1yAfMhFKrkiaAI9SozSUws3i6Dyj6p4ZuF9C1+6WO1hw8Vvjyv++JADYQlwMBNFwhVCWqzj9l88rIAq0P5tC0sdfLXxvYd1F7/62CaFzxWZILHM6pBIohe6U8LjKlIWntfxpoXPbT6cLr/Ww08XaVFhx8Oej/1jS1YgvWzwzhReqPHJr5v42ObDl0We+v+gK/T5K5Bi1mJ3ZqEwzUnV4kWLvWrE75rxp3a81GbLHbbSZas2W3Om6z2Wdtmmy7b6bKfP9jy27zF5NnnEMGSYAEdEzKF/K0ay/geO12mMSQyJdmHgK4rq2LZjO1EYaropyzlDNw/yCm1kOavphlrQdN3I5RXdMAsFPYoGFPwHc7SAhbiBX7sAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 02 19 11 18 45" title="" data-src="/static/2022-02-19-11-18-45-cc319597309d31cfb85ab6a5c6d62198-4c6f5.png" data-srcset="/static/2022-02-19-11-18-45-cc319597309d31cfb85ab6a5c6d62198-3bd24.png 200w,\n/static/2022-02-19-11-18-45-cc319597309d31cfb85ab6a5c6d62198-52f0c.png 400w,\n/static/2022-02-19-11-18-45-cc319597309d31cfb85ab6a5c6d62198-4c6f5.png 607w" data-sizes="(max-width: 607px) 100vw, 607px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>最后说一下角渐变断点，它的数据类型是 <code class="language-text">&lt;angular-color-stop-list&gt;</code>。角渐变断点与线性渐变和径向渐变的区别在于角渐变断点不支持长度值，支持的是角度值。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="33561147771465638000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`conic-gradient(white, deepskyblue 45deg, white)`, `33561147771465638000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token function">conic-gradient</span><span class="token punctuation">(</span>white<span class="token punctuation">,</span> deepskyblue 45deg<span class="token punctuation">,</span> white<span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>效果如图 5-26 所示，可以明显看到 1 点钟方向的颜色最深。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-02-19-11-33-25-ba992e9859b64d4db0766e759f2369d5-3e989.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 605px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 61.48760330578512%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAACMUlEQVQoz32QSWhTURSG30ZFUSoOVKt1BMV5KIqCLsSN4kpUBBeCw8ZuxI0LCy5cuBHB6kIEJ6pViwMiKGqlthlt+jI1STOHmKYZ2qZNmra2ltzPe1+rSy8/l7M43/n/c7TwGK4RussERpF1bJyfv8hNUpxiSpCa4GmW+jD7dWqsLLOy0sZqG+vsrLejectYinSW0Edwj+AzRiTH6Z/kt6BnlOsJ9ujMakdrY3Y7czuYb6LKzEIzmgQ6hrEWsZfUCKeRQvLpCSYq/Chx3Mc8k4IXmBSw2MJSC9VGCq2rxLchvg/TPjwzRQJykdCYgp/lqDIxp4NFZpaYqbaw3EqNjRU2am1o0vDjIJ8LfCnwtUDrkJrVNoS5SHRc2Uqy1mhdJbe1s8bQWkOabHo/wIe/kvW7Ad708yrPnV6OeNmts83BZgebHGzsnNEGQ5oM/DrP2371t+R5kVNRH2VoTNOQ4FyQox4OutirU9fFzi62O9SsrQ62SLi1QHOOl3me52jK8jjDgz4ae7mZ5Gqci2FO+ZX/ITcHXOxzqsvX6ewyBmmfBnmY4UlW/ff7uNfL7ZQiG+JcjnI+qOBjXg67lf80LBfZISNIWN6mRQUWzTnRlBXKOS3upsStpLiRENfi4kpEXApVLgTF2R5xxl857RcnfeKEX91SEzCt6fev+P+rCCVNCNUfiyWisUS6L1Muj0bCEafb4/J4XR6fLxDs7vY7dXc4Eg8EQh63PxSOxhNJw0f8AdkrQWU/77/GAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 02 19 11 33 25" title="" data-src="/static/2022-02-19-11-33-25-ba992e9859b64d4db0766e759f2369d5-3e989.png" data-srcset="/static/2022-02-19-11-33-25-ba992e9859b64d4db0766e759f2369d5-4bd12.png 200w,\n/static/2022-02-19-11-33-25-ba992e9859b64d4db0766e759f2369d5-7acd9.png 400w,\n/static/2022-02-19-11-33-25-ba992e9859b64d4db0766e759f2369d5-3e989.png 605w" data-sizes="(max-width: 605px) 100vw, 605px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>需要注意的是，角渐变断点中设置的角度值是一个相对角度值，最终渲染的角度值是设置的角度值和起始角度累加的值，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="96554503905238930000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`conic-gradient(from 45deg, white, deepskyblue 45deg, white);`, `96554503905238930000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token function">conic-gradient</span><span class="token punctuation">(</span>from 45deg<span class="token punctuation">,</span> white<span class="token punctuation">,</span> deepskyblue 45deg<span class="token punctuation">,</span> white<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>此时 deepskyblue 实际渲染的坐标角度是 90deg（45deg + 45deg），效果如图 5-27 所示，可以明显看到 3 点钟方向的颜色最深。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-02-19-11-36-35-dfc9df035a0c7c14c7cce27fdd7931be-87f29.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 602px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 61.79401993355482%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAACVElEQVQozzWSWUjUURTG/xU9hLRZtPlg0EJBFNVD1ItRj/UUFBSEUNBLGRQJlYWRlEUbRGVgi+2kD0JQtEgu48xok5rj/Gd1NkdnRscZTR3H0Zn7696R4ONwDvd+53znu1f7keBTjC9xvsZpSNA0gnEUyxjWcdyThKaITTOWYVownVWlPPqeoHaIt1G0uiFqIryL8iFK7SD1MT4P0xDHNIp1An+KWJpUlnQWz6SivY7wIMRVH2U+tI+DPA/zKsKbXAtZ1g8pIc0jdI8TTJHMKHLnGO+j3OvjkpfTLo7bKXagyelV/VQP8CzMizA1YaWnLseXCv/OMJHhW5zKIGfcHNM5aGX/H3Z3sLcLTWp+GOJxv8KTftXo6QDVYV5GkHYYRjnnUbe3W9jYRqGJNUZWtrLUQKEZTQ6828f9HKQqmd/p43aQGwHO97KpnflNCvMamdvInP/QfrK4Ba1qgMoAt4JK2M0AFX7KfWqxs26O6OzqYF0bq1rJN7DQQF4LCySaVbvlBrRHIa77qQhwza88vOyl1EOJixMODvVQ1MU2i+IXmFhhJL+VJQYWtZDXzGojmlQrTb+Sm1baqzaUZp50cDTnTVEnOyxK/FozBUbFX5bjSwlyeU26Ve4TEmVecdErLnhEiUuccmaL7eJwjzjQLfZ1ij2/xU6L2NouNreLDebserMoNIktv9DkG84IMpCGlPxGqHwGlczGdA5T/+MskkK9ogYE/QGf158YHp5MJmWu23Sn7uz1eHSbTe+x23W73WrzOl0Om8PtcDltdo/LGQ1HJPEfFI4/qBGYHG4AAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 02 19 11 36 35" title="" data-src="/static/2022-02-19-11-36-35-dfc9df035a0c7c14c7cce27fdd7931be-87f29.png" data-srcset="/static/2022-02-19-11-36-35-dfc9df035a0c7c14c7cce27fdd7931be-38577.png 200w,\n/static/2022-02-19-11-36-35-dfc9df035a0c7c14c7cce27fdd7931be-26124.png 400w,\n/static/2022-02-19-11-36-35-dfc9df035a0c7c14c7cce27fdd7931be-87f29.png 602w" data-sizes="(max-width: 602px) 100vw, 602px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>由此可见，锥形渐变中颜色断点角度值和百分比值没有什么区别，两者可以互相转换。一个完整的旋转总共 360 度， 45deg 就等同于 12.5%，因此，下面两段 CSS 代码的效果是一模一样的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="28359969297277420000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 下面两段语句效果一样 */\nconic-gradient(white, deepskyblue 45deg, white);\nconic-gradient(white, deepskyblue 12.5%, white);`, `28359969297277420000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 下面两段语句效果一样 */</span>\n<span class="token function">conic-gradient</span><span class="token punctuation">(</span>white<span class="token punctuation">,</span> deepskyblue 45deg<span class="token punctuation">,</span> white<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token function">conic-gradient</span><span class="token punctuation">(</span>white<span class="token punctuation">,</span> deepskyblue 12.5%<span class="token punctuation">,</span> white<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>如果作为渐变转换点，角度值和百分比值也可以互相转换。例如，下面的两条语句都是合法的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="2111760985304189700"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 合法 */\nconic-gradient(white, 12.5%, deepskyblue);\n/* 合法 */\nconic-gradient(white, 45deg, deepskyblue);`, `2111760985304189700`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 合法 */</span>\n<span class="token function">conic-gradient</span><span class="token punctuation">(</span>white<span class="token punctuation">,</span> 12.5%<span class="token punctuation">,</span> deepskyblue<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">/* 合法 */</span>\n<span class="token function">conic-gradient</span><span class="token punctuation">(</span>white<span class="token punctuation">,</span> 45deg<span class="token punctuation">,</span> deepskyblue<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>效果如图 5-28 所示。由于把渐变转换点移动到了 12.5% 的位置（原来是在 50% 位置处），因此渐变的后半部分颜色就比较深。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-02-19-11-47-07-38dcff1b82aa8b385eb7676aeb81b8e0-58f3c.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 627px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 59.96810207336522%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAACPklEQVQoz02SWWgTURSGR5Raq6WIda+1uCGiID4I9kHRgvVBQa0WFyx1waXWKohFQbG4gD67IWpVBJcX8c0HaTIzma1Js9gkTZomJsU0tS3WB1+bfN47Igg/d869M99/7pxzlE8T1AdpjNAQYUeY7WG2hdkaYktQruHffJnk/RivR3lW4MkID/M8yHN/GM8kyuMRFA+VOhUa5RplKjNUpnlReijz8vknzwvczXE9w5U0l4ZoT0m1DPBuDEX4lassMplvUG0wz8dcH1U+ZmrM0fk4LlN1Zbma4XKaiykuuGod4IOAhfEslSUmC4x/vCH5Cl3CLwrcyUmsI0XbIGeTnE5yJsnROG9/uPBsjRqLxabM/1cLhYtPqjPN+RSnkpxMcNxVa4ITCZpjvBGw8K7UqLVYakoJF6FlFsstVjs0hGmK0hzncJwjrkTOYwPsi8oSKt0FqnTqbAnUukydxQqbNQ4beqkPsTPCnn75dVOMgzGZUxiJk5cCfjUqryeSrLRZZctAYGt7We9nU0DCon+7IuzuZ2+U/VEOxDgUk9tuAT8dYbpXVqvaLZgIxM/XmPIKqxzW+dkYYHOfdBFtF1MgxqHxqxyNR3nR41+0JGhLcW5Qru1uJzqGZEtFkTszXPvGjSw3s9zKcTsne35vmK6cHB6lVCpSKoErGbv6PxZvi+IEGbjbUnGK4pR4KD2qls4ODw5lxicmVMPy6oZmOo4/6NEt1Wc4geD3/Gg0nvQHQj2qTzNt0+716IY/GLKdvj/gnxVaLctVngAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 02 19 11 47 07" title="" data-src="/static/2022-02-19-11-47-07-38dcff1b82aa8b385eb7676aeb81b8e0-58f3c.png" data-srcset="/static/2022-02-19-11-47-07-38dcff1b82aa8b385eb7676aeb81b8e0-a8bea.png 200w,\n/static/2022-02-19-11-47-07-38dcff1b82aa8b385eb7676aeb81b8e0-f4947.png 400w,\n/static/2022-02-19-11-47-07-38dcff1b82aa8b385eb7676aeb81b8e0-58f3c.png 627w" data-sizes="(max-width: 627px) 100vw, 627px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h3 id="锥形渐变的应用举例"><a href="#%E9%94%A5%E5%BD%A2%E6%B8%90%E5%8F%98%E7%9A%84%E5%BA%94%E7%94%A8%E4%B8%BE%E4%BE%8B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>锥形渐变的应用举例</h3>\n<p>用锥形渐变可以非常方便地实现饼状图效果，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="92785070312950760000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.pie {\n   width: 150px;\n   height: 150px;\n   border-radius: 50%;\n   background: conic-gradient(yellowgreen 40%, gold 0deg 75%, deepskyblue 0deg);\n}`, `92785070312950760000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.pie</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>\n   <span class="token property">border-radius</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>\n   <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">conic-gradient</span><span class="token punctuation">(</span>yellowgreen 40%<span class="token punctuation">,</span> gold 0deg 75%<span class="token punctuation">,</span> deepskyblue 0deg<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>效果如图 5-29 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-02-19-11-50-20-306bef24a2e7a7457d1492b455b83717-fee7b.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 547px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 60.87751371115174%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABx0lEQVQoz3WSz0tbQRDHV1MrRehZD1JoEVTqD7BSCh6K51Joe/NUvHvqpYfixYOHQkEwirGt2v+g9tZIEvvS5r3dvMUYzTMxETQ5iIrRxh/V/THu2wdWn2YYlu8y85md2V0E103q9ZDJsSK8XBYz2VG79LF8uqlD0peMrm6EjhZOoBNLFIbAgnhvvp7CzV9oX2E/rHlxO+yV5VI+pxyF2d2YqI+dD5OBOdoVJB3Tdm/5dMPH/4e5puf3AC1AICpRBGoi4gMemLXbQ/TpOG4xNkddWPJbYZee3Nptijpt8WyLkWs1nBHy5qv9OGT3BnHr97W3vsmvzKxL/tv9VEmjo8z9SqbhLHMvtdwYtJ98pj1B3DafHazatgfDcQxWETi14CDPfy49nKDPxvEjqzRWtW2vgOpJFl/JNJLOHeHUwVrgxKn/Rh7MLPUfn21Xb/vyyvk+FF+456/UyJVaJUq57mIlffOpfbDHC5DnUPkBO+9gewjKIRB7OsD9n4QxLrRJbVpyZcKt4boiGJeMMZXBdEQhKlMplLCsXL6Qz28cHP5dXy9EY/FoZNGyqUWSJsFJO5lImBYhSZpSetEwMaG/4n9S6VXjt3kBUOFpYksp+sAAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 02 19 11 50 20" title="" data-src="/static/2022-02-19-11-50-20-306bef24a2e7a7457d1492b455b83717-fee7b.png" data-srcset="/static/2022-02-19-11-50-20-306bef24a2e7a7457d1492b455b83717-9b56f.png 200w,\n/static/2022-02-19-11-50-20-306bef24a2e7a7457d1492b455b83717-18701.png 400w,\n/static/2022-02-19-11-50-20-306bef24a2e7a7457d1492b455b83717-fee7b.png 547w" data-sizes="(max-width: 547px) 100vw, 547px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/b0kpx2?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>其中，可能有人会以为代码部分的 <code class="language-text">gold 0deg 75%</code> 是什么新语法，其实不是的，这个语法在线性渐变那里介绍过（渐变断点第八个细节点），就是颜色值后面紧跟着的两个值表示颜色范围，另外这里 0deg 换成 0% 也是一样的效果，并非必须使用角度值。</p>\n<p>注意，重点来了！理论上，这里设置的数值应该是 40%，或者 144deg，而不是 0deg，那为何这里设置 0deg 效果也是正常的呢？至于原因，同样在线性渐变那里介绍过（渐变断点第七个细节点），后面的渐变断点位置值比前面的渐变断点位置值小的时候，后面的渐变断点的位置值会按照前面较大的渐变断点位置值渲染。于是 <code class="language-text">gold 0deg 75%</code> 这里的 0deg 就会使用 <code class="language-text">yellowgreen 40%</code> 中的 40% 位置值进行渲染，同理，<code class="language-text">deepskyblue 0deg</code> 实际是按照 <code class="language-text">deepskyblue 75%</code> 渲染的。也就是说，如果我们想要 A、B 两种渐变颜色界限分明，只要设置 B 颜色的起始位置值为 0% 就可以了，无须动脑子去计算，这算是一个 CSS 实用小技巧。</p>\n<p>图 5-30 所示是使用锥形渐变实现的基于色相和饱和度的取色盘，CSS 代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="1155604654166308900"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.hs-wheel {\n   width: 150px;\n   height: 150px;\n   border-radius: 50%;\n   background: radial-gradient(closest-side, gray, transparent), conic-gradient(red, magenta, blue, aqua, lime, yellow, red);\n}`, `1155604654166308900`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.hs-wheel</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>\n   <span class="token property">border-radius</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>\n   <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">radial-gradient</span><span class="token punctuation">(</span>closest-side<span class="token punctuation">,</span> gray<span class="token punctuation">,</span> transparent<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">conic-gradient</span><span class="token punctuation">(</span>red<span class="token punctuation">,</span> magenta<span class="token punctuation">,</span> blue<span class="token punctuation">,</span> aqua<span class="token punctuation">,</span> lime<span class="token punctuation">,</span> yellow<span class="token punctuation">,</span> red<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-02-19-11-58-01-483a0fdc33af722d14525afbc4c3915b-94f8a.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 546px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 61.172161172161175%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB2UlEQVQoz2P4jwb+/QOR39782dr3I9Xvh1fU75ol/+++RUghAQZUnX+B8n+/XfmyWv9ZMts9E+G7YjpPOCM/Ss/6s+UNSMHff7g0//sPkvry7bnpw82857rMDkfZHLYNOm3ReFdi1WfRu//uglX9xab53/8/QPLN3+UnX7GcPGu8a6nrypKQ5eE52z1nH7c8dpLj6aPK3yBlf3BrPvK7tPcR37Tj1tPWBff3ZPbmtU6NWDHd4XCf6J0Nnt/BPsOm+S9Y84rf5WGPeRKOW8WtDcycWZ5TNzUhYmW83aEIkbtdXj9AyvBo3v9vo/xrFtOLZk67Y4PW9oVMW+2att3S/qwM69MZLSBn/8HhbFBw/fn/y+V7KMsjK8ML1TYnVtpuOmbSek7A856i1ZfnT//jtBmu/9n/N24/ethf9XE9Ocx95hH7jBd6LV9P3/yHEVNgzf+QYv8vSMHfn///rPv7qPT3y8J3v+Y/+PseFFL///xFT1AMv3//+fsPAf7+/fvnLwiAHPEP7BqgcSAxkBRQHqjmz58/EJUMBw8devj46c2btz9/+XLz1u39+48eOHD05Jmzp86ePX7u3OkLl46dOnP81Okjx0+ePX8RyDhz7sLBI8cuXb4CFAAAneRYrMeAI+MAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 02 19 11 58 01" title="" data-src="/static/2022-02-19-11-58-01-483a0fdc33af722d14525afbc4c3915b-94f8a.png" data-srcset="/static/2022-02-19-11-58-01-483a0fdc33af722d14525afbc4c3915b-e2b97.png 200w,\n/static/2022-02-19-11-58-01-483a0fdc33af722d14525afbc4c3915b-db056.png 400w,\n/static/2022-02-19-11-58-01-483a0fdc33af722d14525afbc4c3915b-94f8a.png 546w" data-sizes="(max-width: 546px) 100vw, 546px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/o3i6ck?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>之前演示过使用 CSS 多背景实现灰白网格效果（棋盘效果），如果使用锥形渐变来实现，只需要一行 CSS 代码就足够了：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="52567597516650610000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.checkerboard {\n   width: 200px;\n   height: 160px;\n   background: conic-gradient(#eee 25%, white 0deg 50%, #eee 0deg 75%, white 0deg) 0 / 20px 20px;\n}`, `52567597516650610000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.checkerboard</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 160px<span class="token punctuation">;</span>\n   <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">conic-gradient</span><span class="token punctuation">(</span>#eee 25%<span class="token punctuation">,</span> white 0deg 50%<span class="token punctuation">,</span> #eee 0deg 75%<span class="token punctuation">,</span> white 0deg<span class="token punctuation">)</span> 0 / 20px 20px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>效果如图 5-31 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-02-19-13-42-29-9bffef776e1705e9a13747492182762c-f5f2a.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 683px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 49.19472913616398%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAn0lEQVQoz8WRzQoCIQCEff9nqkOHsl01Xdq6WgQtVIfdg2n+bcJiPxoRdeg7iCMzDDigf8YYo5S6ZIRHrXViBokODiHE+RVSSu/9u3BoHnw5ofzT8P+avwn/9GHO2vtU2WbpVM45H7HWRtnHi7sxiIfTg6LEm+2ubTvOOSwwIQwhijGdzlC9WuNqCecIQsRYvW+a0XhSogXB7HA8EVpdAbgaQ+MtNlH1AAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 02 19 13 42 29" title="" data-src="/static/2022-02-19-13-42-29-9bffef776e1705e9a13747492182762c-f5f2a.png" data-srcset="/static/2022-02-19-13-42-29-9bffef776e1705e9a13747492182762c-d96b4.png 200w,\n/static/2022-02-19-13-42-29-9bffef776e1705e9a13747492182762c-b52f8.png 400w,\n/static/2022-02-19-13-42-29-9bffef776e1705e9a13747492182762c-f5f2a.png 683w" data-sizes="(max-width: 683px) 100vw, 683px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/72su1v?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>最后一个例子，演示如何借助锥形渐变实现很实用的加载效果，代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="49443542844342534000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.loading {\n   width: 100px;\n   height: 100px;\n   border-radius: 50%;\n   background: conic-gradient(deepskyblue, 30%, white);\n   --mask: radial-gradient(closest-side, transparent 75%, black 76%);\n   -webkit-mask-image: var(--mask);\n   mask-image: var(--mask);\n   animation: spin 1s linear infinite reverse;\n}\n\n@keyframes spin {\n   from {\n      transform: rotate(0deg);\n   }\n\n   to {\n      transform: rotate(360deg);\n   }\n}`, `49443542844342534000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.loading</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>\n   <span class="token property">border-radius</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>\n   <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">conic-gradient</span><span class="token punctuation">(</span>deepskyblue<span class="token punctuation">,</span> 30%<span class="token punctuation">,</span> white<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token property">--mask</span><span class="token punctuation">:</span> <span class="token function">radial-gradient</span><span class="token punctuation">(</span>closest-side<span class="token punctuation">,</span> transparent 75%<span class="token punctuation">,</span> black 76%<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token property">-webkit-mask-image</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--mask<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token property">mask-image</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--mask<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token property">animation</span><span class="token punctuation">:</span> spin 1s linear infinite reverse<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token atrule"><span class="token rule">@keyframes</span> spin</span> <span class="token punctuation">{</span>\n   <span class="token selector">from</span> <span class="token punctuation">{</span>\n      <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>0deg<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">to</span> <span class="token punctuation">{</span>\n      <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>360deg<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>效果如图 5-32 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-02-23-09-54-56-6b1305ca5dbee0c1eb122114c25b54ce-bb96f.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 512px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 49.0234375%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAABEUlEQVQoz42Qy07DMBBF88Xs+QSW/AUrFkioArWhL2hpUrWqAEF4lAJqRYkaV7GTOLFnsJ2oAYkonMXozniur2wLfwOm3lI8+sTjNU5ClIBVWD+bfO98gwcL7X+Nte4E/zDnAX6K+y8YZOWkR/AtKdu/zXmsvcE9T4sMUJq5yr9jtWZTZxQP34u78u3nSPtrzDsEYCKLVZLhDUUuq9+s9gCKe5UQAFSAn8KSwzxGJspYMBhRkbz7P4k1WFEUMxZxniqIZqsICKFhuDVNwrkQIk4SKSVjLAjULFQHymHde08P3uP6y18tVyenZ8PrUe9y0O5fDYZus2W3ul1nPBm5U1dVx73o9BsN2xlPm3Z7vvj4BjzmP2nrDPG7AAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 02 23 09 54 56" title="" data-src="/static/2022-02-23-09-54-56-6b1305ca5dbee0c1eb122114c25b54ce-bb96f.png" data-srcset="/static/2022-02-23-09-54-56-6b1305ca5dbee0c1eb122114c25b54ce-7728b.png 200w,\n/static/2022-02-23-09-54-56-6b1305ca5dbee0c1eb122114c25b54ce-23f96.png 400w,\n/static/2022-02-23-09-54-56-6b1305ca5dbee0c1eb122114c25b54ce-bb96f.png 512w" data-sizes="(max-width: 512px) 100vw, 512px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>原理很简单，图 5-32 所示的其实就是一个锥形渐变，使用 CSS 遮罩属性只让外圈 25% 的范围显示，于是 loading 的圆环效果就出现了。如果想要小尺寸的 loading 效果，直接修改上述 CSS 代码中的 width 属性值和 height 属性值即可。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/scjz23?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>本例 CSS 代码中出现了 CSS 自定义属性（指 —mask）、CSS 遮罩属性 mask-image 和 CSS 动画属性 animation，它们都是非常实用的 CSS 属性，均会在本书的后面着重介绍，敬请期待。</p>\n<h2 id="重复渐变"><a href="#%E9%87%8D%E5%A4%8D%E6%B8%90%E5%8F%98" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>重复渐变</h2>\n<p>线性渐变、径向渐变和锥形渐变都有对应的重复渐变函数，就是在各自的函数名前面添加 repeating- 前缀，示意如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="5560182430231264000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`repeating-linear-gradient(transparent, deepskyblue 40px);\nrepeating-radial-gradient(transparent, deepskyblue 40px);\nrepeating-conic-gradient(transparent, deepskyblue 40deg);`, `5560182430231264000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token function">repeating-linear-gradient</span><span class="token punctuation">(</span>transparent<span class="token punctuation">,</span> deepskyblue 40px<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token function">repeating-radial-gradient</span><span class="token punctuation">(</span>transparent<span class="token punctuation">,</span> deepskyblue 40px<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token function">repeating-conic-gradient</span><span class="token punctuation">(</span>transparent<span class="token punctuation">,</span> deepskyblue 40deg<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>假设上面的语句是作为 background-image 应用在尺寸为 200px×100px 的元素上的，则最终的效果如图 5-33 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-02-23-13-37-26-f7b7d86c4b337d596ad192091e236f1d-0204f.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 28.222996515679437%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsSAAALEgHS3X78AAABSUlEQVQY01WQSU8CQRCF+b8aDwSBiBGJUePNg3GJ8ejBuJw8Q1ATOMgiCDrADAjDbmQbMCj0Zw3DxUpeXnW9el3V7bpuw20HboTvhC9boE8g/AV7FTg24VRwIjioOH2DX7gS3pfzWR0Oq3AuHNDBtV5U+JfYKClWNcVjTxHtgVtqIUM0qW/pDtsLpIaKFQ12DMezLZpXeo9qcuGmTAlKEpQpIYGnCPG+4r6rWCuAT3RvWSDsLsFFXWHIC3bLCo/UA+Lxi+aT3F7GpVW7FHJltKJJwWiStxS9H4U5hWh7Sva1zLveJPf2wYM5QvsG1JzsGCL5BpmMQTxvolc7RPqyIRML+vJhoyFYgn8xh/GIRY/NzP7L1sDx2jy2FiXX3LEtYMfIGpNIpWl3utQaLcJPMRLZHPFkmthzSrQXkqkMrc7non+2hO2fKcUfAOKxBG1dREkAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 02 23 13 37 26" title="" data-src="/static/2022-02-23-13-37-26-f7b7d86c4b337d596ad192091e236f1d-fee1c.png" data-srcset="/static/2022-02-23-13-37-26-f7b7d86c4b337d596ad192091e236f1d-a67b7.png 200w,\n/static/2022-02-23-13-37-26-f7b7d86c4b337d596ad192091e236f1d-0b187.png 400w,\n/static/2022-02-23-13-37-26-f7b7d86c4b337d596ad192091e236f1d-fee1c.png 800w,\n/static/2022-02-23-13-37-26-f7b7d86c4b337d596ad192091e236f1d-0204f.png 861w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>无论是重复线性渐变、重复径向渐变还是重复锥形渐变，其语法和对应的非重复渐变语法是一模一样的，区别在渲染表现上，非重复渐变的起止颜色位置如果是 0% 和 100%，则可以省略，但是对于重复渐变，起止颜色位置需要明确定义。</p>\n<p>重复渐变就这么点内容，很多人会觉得重复渐变复杂难懂，这只是因为对基本的渐变特性了解还不够深入而已。</p>\n<p>重复渐变非常适合实现条纹效果。例如，使用 border-image 属性和重复线性渐变实现条纹边框效果，代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="34520469306534117000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.stripe-border {\n   width: 150px;\n   height: 200px;\n   border: 20px solid;\n   /* IE 旧语法 */\n   border-image: repeating-linear-gradient(135deg, deepskyblue, deepskyblue 6px, white 7px, white 12px) 20;\n   /* 新语法 */\n   border-image: repeating-linear-gradient(135deg, deepskyblue 0 6px, white 7px 12px) 20;\n}`, `34520469306534117000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.stripe-border</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>\n   <span class="token property">border</span><span class="token punctuation">:</span> 20px solid<span class="token punctuation">;</span>\n   <span class="token comment">/* IE 旧语法 */</span>\n   <span class="token property">border-image</span><span class="token punctuation">:</span> <span class="token function">repeating-linear-gradient</span><span class="token punctuation">(</span>135deg<span class="token punctuation">,</span> deepskyblue<span class="token punctuation">,</span> deepskyblue 6px<span class="token punctuation">,</span> white 7px<span class="token punctuation">,</span> white 12px<span class="token punctuation">)</span> 20<span class="token punctuation">;</span>\n   <span class="token comment">/* 新语法 */</span>\n   <span class="token property">border-image</span><span class="token punctuation">:</span> <span class="token function">repeating-linear-gradient</span><span class="token punctuation">(</span>135deg<span class="token punctuation">,</span> deepskyblue 0 6px<span class="token punctuation">,</span> white 7px 12px<span class="token punctuation">)</span> 20<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>效果如图 5-34 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-02-23-13-40-53-7e002c52bce34fab59b4072d7aa3235e-d7cef.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 329px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 133.1306990881459%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAbCAYAAAB836/YAAAACXBIWXMAAAsSAAALEgHS3X78AAACwUlEQVRIx61VWW8SURSe/+lW17o91j3GBxM17tr44hKNS3yxVksQyhIpIAMF0VrZaoEWKKWlWAqtbS3cz3O4MzA1JsLoTU7OmXvvfPN995w5VwGNSA24Pwc8L3X84yLwiOxFSfon8zJ+QOvPKH5K9pDmX5bkGs8tbAIKA75aBHbEgH0J4FgKOJAEjqSkcXyU/GGyQxQfnwL6k/KZ44Pa3lPTQL2hAb5bAnbFAXsFKNFXZtaB6R9Abl3GaYoLG0CWfJae8xtyndd4/l4BGPgGVLcMDJldYg2mxuUZ4FwaWNYBrcRwJzH8uio3bAmg2aXxuJkDTholj5SBPmIYrckNDfF3VsKw51YeOEGA339qgEMkeW+iw7DZJaAOemVWSm6foZ6USZOAd4jhADGs6YDDZZkUs5Jv5GTZtCW/0c4wbpLhVU1ym6GNJO8myV/q5gDvapJXdMDXi/KP+NwjoD6uaQyXdckWkryHGCZMSr5OZ3iWAFcbhsLmM/xkkuFgXhZ2u2yGNMlmz5CTcj5j+PW4Dlmy2SzfJoZn0oZfz/KPdchZPp021OEwSd5PgDEDQ9Gl6Vm+kDGUja0iJU/20G0aoqNkUGPYlvy2LDuvDtjrYMnb+uGIdoaBqpSdpEY7Ue/EXPDsOWk8n1qTnYmrgrv6JWqwF7PE8Pduw3cH1yODcxn1aZ7Zc3vr12I+b75TOOZ7hu8hQx0KfKgKki2oSQiMVgRlXbRYOyrsBX1QzvMee0UazzvJ25bke6EVgU06XKXZStX/McZSttWWwf+puLsoTyhWqwVWuxNTmVkUi0WMh6MolhZai6MuN0Lhj2RRRCITCASCsLtc8PpVjHkDcL8fg83hRiwWhxoMw2K1Q3G7HPD4VGRzBZTLZQRDEczNl1qA/AID8lwoFIXX54dfVaGOR+AjULfH29oTiycQUiNwujz4BbYw7woJkVSaAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 02 23 13 40 53" title="" data-src="/static/2022-02-23-13-40-53-7e002c52bce34fab59b4072d7aa3235e-d7cef.png" data-srcset="/static/2022-02-23-13-40-53-7e002c52bce34fab59b4072d7aa3235e-00827.png 200w,\n/static/2022-02-23-13-40-53-7e002c52bce34fab59b4072d7aa3235e-d7cef.png 329w" data-sizes="(max-width: 329px) 100vw, 329px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/3jntrm?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<h1 id="css-3d-变换"><a href="#css-3d-%E5%8F%98%E6%8D%A2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>CSS 3D 变换</h1>\n<p>在所有 3D 成像技术中，最容易学习且最容易上手的技术一定是 CSS 3D 变换技术，即使你不懂 JavaScript 也能实现 3D 效果。因此，不少优秀的设计师能使用 CSS 3D 变换实现很多酷酷的 3D 效果。</p>\n<h2 id="从常用的-3d-变换函数说起"><a href="#%E4%BB%8E%E5%B8%B8%E7%94%A8%E7%9A%84-3d-%E5%8F%98%E6%8D%A2%E5%87%BD%E6%95%B0%E8%AF%B4%E8%B5%B7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>从常用的 3D 变换函数说起</h2>\n<p>CSS 位移变换函数包括 translateX()、translateY() 和 translateZ()，其中 translateX() 和 translateY() 属于 2D 变换，translateZ() 属于 3D 变换。此外，CSS 缩放变换函数包括 scaleX()、scaleY() 和 scaleZ()，其中 scaleX() 和 scaleY() 属于 2D 变换，scaleZ() 属于 3D 变换。</p>\n<p>于是，就有不少人想当然地认为 CSS 斜切变换函数也包括 skewX()、skewY() 和 skewZ()，其中 skewZ() 属于 3D 函数。这种想法是不正确的，事实上，CSS 斜切变换没有 3D 函数，也就是说 skewZ() 函数是不存在的，自然也不存在 skew3d() 函数，因此下面的写法是不合法的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="78643411422293900000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 不合法 */\ntransform: skewZ(45deg);\ntransform: skew3d(0deg, 0deg, 45deg);`, `78643411422293900000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 不合法 */</span>\n<span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">skewZ</span><span class="token punctuation">(</span>45deg<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">skew3d</span><span class="token punctuation">(</span>0deg<span class="token punctuation">,</span> 0deg<span class="token punctuation">,</span> 45deg<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>也有不少人想当然地认为 CSS 旋转变换函数包括 rotateX()、rotateY() 和 rotateZ()，其中 rotateX() 和 rotateY() 属于 2D 变换，rotateZ() 则属于 3D 变换。这种想法也是不正确的，这回倒不是不存在上面 3 种函数，而是 rotateX()、rotateY() 和 rotateZ() 均属于 3D 变换。</p>\n<p>加上各种变换的 3D 合法语法，可以得到下面这些属于 3D 变换的 CSS 函数（这些函数不区分大小写）：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="84727149190719440000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`translateZ(0);\ntranslate3d(0, 0, 0);\nrotateX(0deg)\nrotateY(0deg)\nrotateZ(0deg);\nrotate3d(1, 1, 1, 45deg);\nscaleZ(1);\nscale3d(1, 1, 1);\nmatrix3d(\n   1, 0, 0, 0,\n   0, 1, 0, 0,\n   0, 0, 1, 0,\n   0, 0, 0, 1\n);`, `84727149190719440000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token function">translateZ</span><span class="token punctuation">(</span>0<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token function">translate3d</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token function">rotateX</span><span class="token punctuation">(</span>0deg<span class="token punctuation">)</span>\n<span class="token function">rotateY</span><span class="token punctuation">(</span>0deg<span class="token punctuation">)</span>\n<span class="token function">rotateZ</span><span class="token punctuation">(</span>0deg<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token function">rotate3d</span><span class="token punctuation">(</span>1<span class="token punctuation">,</span> 1<span class="token punctuation">,</span> 1<span class="token punctuation">,</span> 45deg<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token function">scaleZ</span><span class="token punctuation">(</span>1<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token function">scale3d</span><span class="token punctuation">(</span>1<span class="token punctuation">,</span> 1<span class="token punctuation">,</span> 1<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token function">matrix3d</span><span class="token punctuation">(</span>\n   1<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span>\n   0<span class="token punctuation">,</span> 1<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span>\n   0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 1<span class="token punctuation">,</span> 0<span class="token punctuation">,</span>\n   0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 1\n<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>其中，matrix3d() 函数表示使用 3D 矩阵表示 3D 变换效果，共需要 16 个参数，由于过于复杂且使用概率较小，因此本书不做介绍。rotate3d() 函数的语法比较特别，这里专门讲一下。</p>\n<p>在展开介绍 rotate3d() 函数之前，我们有必要先了解一下 CSS 中的 3D 坐标。CSS 中的 3D 坐标如图 5-35 所示，横向为 x 轴，垂直为 y 轴，纵向为 z 轴，箭头所指的方向为偏移正值对应的方向。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-02-25-14-31-51-784e8a2f1deaffbff364497c123c6276-79f9e.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 372px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 86.02150537634408%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAIAAABSJhvpAAAACXBIWXMAAAsSAAALEgHS3X78AAABHklEQVQ4y6WSbUvDMBDH8/2/huBgojDEKXOzmwiKMK34RrY3a+fsmrTpUzJr21y9dejck7TbnyNcwv24P3ch+aosm37GcV5OZJkC4JGNTJCyOlxI2RTSdF/Y8xcW9oI5z5U6AM6yefNtsdA/sHeAbceBMAIh10IFIVAWF9oJZ5RugeUM4dymfhDIP4tcgSH+Ui4vsuq28XuAEIV7VXFgAOlgOB91aS3hWMrZ1M6riPw6EUJExTDWvMHG5n7sA9lVUaqzYYzN8XuSJC7n3PPwKQqjD2uKW4mEoJQxx7Upw/CDECscl1Pm4HUysUitfnpx2cLq/pOuv7wi/DYYdrRe/1kfGWbz6rp9022cN0/OGq22hqH17u4fHjvd26Pj+jegeuD0Y343bAAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 02 25 14 31 51" title="" data-src="/static/2022-02-25-14-31-51-784e8a2f1deaffbff364497c123c6276-79f9e.png" data-srcset="/static/2022-02-25-14-31-51-784e8a2f1deaffbff364497c123c6276-bedfe.png 200w,\n/static/2022-02-25-14-31-51-784e8a2f1deaffbff364497c123c6276-79f9e.png 372w" data-sizes="(max-width: 372px) 100vw, 372px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>下面正式开始介绍 rotate3d() 函数，rotate3d() 函数的语法如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="73343319646865450000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`rotate3d(x, y, z, angle);`, `73343319646865450000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token function">rotate3d</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">,</span> angle<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>其中，参数 x、y、z 分别表示旋转向量的 x 轴、y 轴、z 轴的坐标。参数 angle 表示围绕该旋转向量旋转的角度值，如果为正，则顺时针方向旋转；如果为负，则逆时针方向旋转。有不少人看到“向量”就想起了大学时候被数学支配的恐惧，不过这里 3D 旋转的向量很简单，就是一条以坐标原点为起点，以坐标 (x, y, z) 为终点的直线，所谓 3D 旋转就是元素绕着这条直线旋转而已，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="54125253780654694000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`transform: rotate3d(1, 1, 1, 45deg);`, `54125253780654694000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate3d</span><span class="token punctuation">(</span>1<span class="token punctuation">,</span> 1<span class="token punctuation">,</span> 1<span class="token punctuation">,</span> 45deg<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>表示元素绕着坐标 (0, 0, 0) 和坐标 (1, 1, 1) 连成的向量线旋转 45 度，图 5-36 中蓝色箭头所示即向量。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-02-25-14-39-50-eceee8a00410ae7cb0b264dd271b7f48-58f3c.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 627px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 51.355661881977674%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAAAxklEQVQoz52R6wqCQBSEe/83K+2imWVBUdlFRNPdZN3bbFtCRAVa36/D2Z0zMNMzHwCgWWY60DPf1KYo/hfrsjRCGsHvh5pzHcWQEnkupUqPGZT+0VnK+pSUaZHvE8MYOFeE1Ix1c+Zc5xfUzJQFhIQQYExw3k1MCKoKGlCqJTCbBR40JVmYjVrrZ21vvC6/OCvo5kd7VQNnuNvH682WUNp3huOJH86jOD5Qej2fk3ARLaKV5wcDd2QHP7CPS3c0mQahN53dAAGNSchFxx9LAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 02 25 14 39 50" title="" data-src="/static/2022-02-25-14-39-50-eceee8a00410ae7cb0b264dd271b7f48-58f3c.png" data-srcset="/static/2022-02-25-14-39-50-eceee8a00410ae7cb0b264dd271b7f48-a8bea.png 200w,\n/static/2022-02-25-14-39-50-eceee8a00410ae7cb0b264dd271b7f48-f4947.png 400w,\n/static/2022-02-25-14-39-50-eceee8a00410ae7cb0b264dd271b7f48-58f3c.png 627w" data-sizes="(max-width: 627px) 100vw, 627px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>如果此时有一个正面印有数字 1、上下分别印有数字 5 和 6、左右分别印有数字 4 和 3 的立方体应用 rotate3d(1, 1, 1, 45deg)，那么它的 3D 旋转效果如图 5-37 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-02-25-14-42-28-44dfcaa06a8552a538007ccdee8b7e12-cd472.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 557px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 58.707360861759426%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABsElEQVQoz2P4jwH+/fsLJLdu3X/48FogDyzy7z82wIChE0RMn3ElMSm/rs5j3rz6p09v49KPovnvX5CKidMv2dvMqa+LbWtLrKoKaWgI3bN3yY9fXzGNYEDTefvRe/3gHR7xXS2tIY31MbNm1bR2RBcXuqya24tP8x+w5gnLrkp6rnWtTI9uCqjrSl28qKmxKKw6xP/4ps1gC/5i0Qwx8duvP7YpO6Jtl/WndofUh0X3x3WW5dT7B3XGJ3x4/QqnzRA3X7v+ptZy8RabNfu9D8wKnpWTk1aVHFoVHrSmrw+kE9VaFGeDdP/993Tfg02RW/ak796ZuueA3uqtel3N7uG3z5/DdDNGVIEd9ePjjzNTz6x2XXVGesUTu/1P5l748+83UfEM0g824t2FV1/PvfmPI3lANf/58+f3799AJ/398+fnz18/geDHz2+fv/359/fXvz8/vv348eX7t+/ff/3+/eMnRBKo6heY/Yvh9t17t+/c/fTp881bd44eO3ng0JENm7aeOXthz96Du/bsP3Do8J59B9dv3LJz914gd8fuves3bt23/9DuvQeOHD8JAE8MZ0Rf7y6gAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 02 25 14 42 28" title="" data-src="/static/2022-02-25-14-42-28-44dfcaa06a8552a538007ccdee8b7e12-cd472.png" data-srcset="/static/2022-02-25-14-42-28-44dfcaa06a8552a538007ccdee8b7e12-8e829.png 200w,\n/static/2022-02-25-14-42-28-44dfcaa06a8552a538007ccdee8b7e12-2b773.png 400w,\n/static/2022-02-25-14-42-28-44dfcaa06a8552a538007ccdee8b7e12-cd472.png 557w" data-sizes="(max-width: 557px) 100vw, 557px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>按照我多年实践的经验，rotate3d() 函数很少会被用到，因为大多数的 3D 效果都是很简单的旋转效果，开发者往往使用更简单的 rotateX()、rotateY() 和 rotateZ() 函数。其中 rotateY() 函数是所有 3D 变换函数中最高频使用的函数之一，因此，本书就以 3D 旋转为切入点，带领大家快速进入 3D 变换的世界。</p>\n<p>3D 旋转变换有下面 3 个函数：</p>\n<ul>\n<li>rotateX(angle)；</li>\n<li>rotateY(angle)；</li>\n<li>rotateZ(angle)。</li>\n</ul>\n<p>它们分别表示绕着三维坐标的 x 轴、y 轴和 z 轴旋转。其中，rotateX() 函数的表现反映在现实世界中，就如体操运动员的单杠旋转；rotateY() 函数的表现反映在现实世界中，就如旋转木马围绕中心柱旋转；rotateZ() 函数的表现反映在现实世界中，就如正面观察摩天轮的旋转。</p>\n<p>使用简单的图形演示以上 3 个旋转函数，就有图 5-38 所示的效果。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-02-25-14-44-10-56034bcb95127e9e06574c4f3d9fff4c-e2f03.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 42.19653179190751%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAABgElEQVQY012QyU7DMBCG81xwoCyVoGURLQha4AgH6A0IAsqNwhMgUDkhUZYLbwHcWFr12BOljd3EcWITOw0OjNkEWCNZ+jz//J7fiN/+nDjWQHEetduxUpp8P2hOqV8+fu10NFHKCKWMoNX3obqMv0YR8KBet+YX7O0iPTySMOVDHjJmF3daQ0myW+pSCtBg19dkpUDMDbK65pgbkWVBn6jVUHoUT03j4RFZq2kbz3OKO2gkhWdm8fiEW9qLHMdwTysolcb5uU4ub2Wy4u5ei6tVNDqGZ3N4MiPqdSB+ufw8MIhzeZzJgt5Kpd29fQOtmyjRr0em0q2eXnZ5+SUG58kMGkqKT2fHsU0T2sADzOzlQrfZNOjVFatU/LMzdn7hnZwEN7d654fHNnxnccnZ3JJPTfURW0iIvbb+3JfogBIhvXP8k+fvVBmLGo23MPzPCeEHB6rV0gDShksKSV0qg0AKQSl9eQm6SnEoITzPZ5wzxqnn2bbt+owI6XIOEhC+A8SwiJXXBaTIAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 02 25 14 44 10" title="" data-src="/static/2022-02-25-14-44-10-56034bcb95127e9e06574c4f3d9fff4c-fee1c.png" data-srcset="/static/2022-02-25-14-44-10-56034bcb95127e9e06574c4f3d9fff4c-a67b7.png 200w,\n/static/2022-02-25-14-44-10-56034bcb95127e9e06574c4f3d9fff4c-0b187.png 400w,\n/static/2022-02-25-14-44-10-56034bcb95127e9e06574c4f3d9fff4c-fee1c.png 800w,\n/static/2022-02-25-14-44-10-56034bcb95127e9e06574c4f3d9fff4c-e2f03.png 865w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h2 id="必不可少的-perspective-属性"><a href="#%E5%BF%85%E4%B8%8D%E5%8F%AF%E5%B0%91%E7%9A%84-perspective-%E5%B1%9E%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>必不可少的 perspective 属性</h2>\n<p>perspective 的中文意思是透视、视角。perspective 属性的存在与否决定了你所看到的画面是二维的还是三维的，这不难理解，即没有透视，不成 3D。学美术或者学建筑的读者肯定接触过透视的一些东西。例如，图 5-39 所示的透视效果。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-02-25-14-46-31-956b429ea63086610bf6d50cea39b0a3-2ab3c.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 676px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 54.585798816568044%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABTUlEQVQoz32SS2+CQBSF+f8/pt24ctXEVqNp97aaVEERcHjNIAzvfmEC1qTpWQyXc8+ZOXfASpIkCIIwDOM4tm37fD73fS+l9H0/HkA3TVNIGMdxkhG0LB51XfcDiqLArEudqYzakGVZKqXqpnFdN89zQzZNE0XRg/l2u6GDhdRaG7KqKpOOFoIHM5HIQ6PUmiS8UhOPnh6A0724rMxiSLYQQsBYbdtiPp1OnuexPdlwEm+323ERURhut1slFeOgEQPQoySR1Y8oh3jX65VeXhSsmKVS3CKnocZGNDyTxeq6jsO7AdM8WZaJKDrYzvd+fwl8JSX3Mgkmi4VODZAjqCHTJHHm8+NsxpxG81tgcI99hzmBr/L81L8ueiHu5CP+MDfjFG1VNVq3dQ0D/jObkfg3lqv14Wi7F+/za/+yWC7eVpv3j/XmI03lJDP4AT+ycxi/gg87AAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 02 25 14 46 31" title="" data-src="/static/2022-02-25-14-46-31-956b429ea63086610bf6d50cea39b0a3-2ab3c.png" data-srcset="/static/2022-02-25-14-46-31-956b429ea63086610bf6d50cea39b0a3-8739e.png 200w,\n/static/2022-02-25-14-46-31-956b429ea63086610bf6d50cea39b0a3-cfbeb.png 400w,\n/static/2022-02-25-14-46-31-956b429ea63086610bf6d50cea39b0a3-2ab3c.png 676w" data-sizes="(max-width: 676px) 100vw, 676px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>不过，CSS 3D 变换的透视点与图 5-39 所示的有所不同，CSS 3D 变换的透视点在显示器的前方。例如，显示器宽度是 1680px，浏览器中有一个 <code class="language-text">&lt;img&gt;</code> 元素设置了下面的 CSS 代码：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="15933545405410298000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`img {\n   perspective: 2000px;\n}`, `15933545405410298000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">img</span> <span class="token punctuation">{</span>\n   <span class="token property">perspective</span><span class="token punctuation">:</span> 2000px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>这就意味着这张图片的 3D 视觉效果和本人在距离 1.2 个显示器宽度远的地方（1680×1.2≈2000）所看到的真实效果是一致的，如图 5-40 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-02-25-14-48-02-0c1c11fc354aa823602fe8a172b422d9-ca80e.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 595px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.18487394957983%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAABR0lEQVQoz51Sy26CQBTlS/kBv4IFWxJNDLFpeKw0bFzbQMKOlRsWAiURGQpYpi54xQiCvTKW0qZpY89iMnPunHsuZ6AuA7Rte/kVTdPAulo9bbdb2FCXe3A+n2GdzR6Wy+VVDG5NB9jkeU7K/SA9hmJRFDmO+3QmZYzx6XT601mUpMlkchWnaWoYhqqqnuclSVJVVd/OcZz1em2a5uFwIAwRy7I8nU6vYkVRxuMxwzCLxULX9TiO3zrAFJCK67qbzQYhBHpgoHtRFDzP38TgrGnafD6Hq1DOsqyu66oDCYJMS5jj8QjHxw7//GZJkliWvaVddwAfGGmY9jcQg7IsIerRaBSGIfXlYT5utD+B9IWMQEzTtCAId/wkpG8UhfAKlmVBilTP7vzAR0EU72GwJMG285xgDIxlOyh48XbIdlxv58f7117yDqAymrQSr8mdAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 02 25 14 48 02" title="" data-src="/static/2022-02-25-14-48-02-0c1c11fc354aa823602fe8a172b422d9-ca80e.png" data-srcset="/static/2022-02-25-14-48-02-0c1c11fc354aa823602fe8a172b422d9-54e17.png 200w,\n/static/2022-02-25-14-48-02-0c1c11fc354aa823602fe8a172b422d9-1e5c4.png 400w,\n/static/2022-02-25-14-48-02-0c1c11fc354aa823602fe8a172b422d9-ca80e.png 595w" data-sizes="(max-width: 595px) 100vw, 595px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h2 id="用-translatez-函数寻找透视位置"><a href="#%E7%94%A8-translatez-%E5%87%BD%E6%95%B0%E5%AF%BB%E6%89%BE%E9%80%8F%E8%A7%86%E4%BD%8D%E7%BD%AE" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>用 translateZ() 函数寻找透视位置</h2>\n<p>如果说 rotateX()、rotateY() 和 rotateZ() 可以帮你理解三维坐标，那么 translateZ() 则可以帮你理解透视位置。我们都知道“近大远小”的道理，translateZ() 函数的功能就是控制元素在视觉上的远近距离。例如，如果我们设置容器元素的 perspective 属性值为 201px：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="39519897356633550000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.container {\n   perspective: 201px;\n}`, `39519897356633550000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.container</span> <span class="token punctuation">{</span>\n   <span class="token property">perspective</span><span class="token punctuation">:</span> 201px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>那么就会有以下几种情况。</p>\n<ul>\n<li>子元素设置的 translateZ() 函数值越小，则子元素的视觉大小越小，因为子元素在视觉上远去，我们眼睛看到的子元素的视觉尺寸就会变小。</li>\n<li>子元素设置的 translateZ() 函数值越大，该元素的视觉大小也会越大，因为元素在视觉上越近，看上去也就越大。</li>\n<li>当子元素设置的 translateZ() 函数值非常接近 201 像素，但是不超过 201 像素的时候（如 200 像素），该元素就会撑满整个屏幕（如果父元素没有类似 overflow: hidden 的限制的话）。因为这个时候，子元素正好移到了你的眼睛前面，看起来非常大，所谓“一叶障目，不见泰山”，就是这么回事。</li>\n<li>当子元素设置的 translateZ() 函数值再变大，即超过 201 像素的时候，就看不见该元素了——这很好理解，我们是看不见眼睛后面的东西的！</li>\n</ul>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/y25bfm?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>拖动滑杆控制子元素的 translateZ() 函数值，大家会发现当值为 −100 的时候视觉尺寸最小；随着值慢慢变大（例如值为 40 的时候），子元素的视觉尺寸明显变大；等到值继续增加到 200 的时候，会发现子元素充满了整个屏幕；而值是 250 的时候，由于子元素已经在透视点之外，因此是看不见子元素的，子元素如消失一般。整个视觉变化过程如图 5-41 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-02-28-14-03-10-bd383a0001897f258bf1568fd214531a-40f0e.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 31.25734430082256%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsSAAALEgHS3X78AAABTklEQVQY0xVPS0vDQBjML9P/YO3Bil7UXKx4UQT1TwiKVw8KHnposUIr6kFa8CQo9lChj7wfm5im2c1md7P7GS8DM8yD0XqvwyBOmJSkYAXnhMnBtzEy3RIgzzDrPuLb+/jm7u3kXHbaWbyYRIWblr3h13hqaJUrYNIjwiuUQ6XBwDX8aPDuu8hOC3JwmK3VcWOLb27ne7plhRMKs2VpM+ULpXkKiOUUV9dYlH4hQwDeasnVFdp/CiTQ07NS10WzyXSdHh2j4DcDwFJhCUkJmskhzij6mUZc2VQ6AMnH5+LiMh6NbSzwfjOv1fKNBlmvk51d10GBAsQkEhBw0BYClgowQCqrSiDqn/7XV5+FUM8vst2RD90KVa+PSV7pRKm0hKxaBoCCUsswcZYRgiMUoiAMPG8+m5mGZUXRHMUGiq04mXp+GCLTNF3H4ZxXwT/LhziANQ9NVQAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 02 28 14 03 10" title="" data-src="/static/2022-02-28-14-03-10-bd383a0001897f258bf1568fd214531a-fee1c.png" data-srcset="/static/2022-02-28-14-03-10-bd383a0001897f258bf1568fd214531a-a67b7.png 200w,\n/static/2022-02-28-14-03-10-bd383a0001897f258bf1568fd214531a-0b187.png 400w,\n/static/2022-02-28-14-03-10-bd383a0001897f258bf1568fd214531a-fee1c.png 800w,\n/static/2022-02-28-14-03-10-bd383a0001897f258bf1568fd214531a-40f0e.png 851w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>此时，我们再换一个视角，从侧面观察 translateZ() 函数的作用原理，如图 5-42 所示，可以更清楚地明白为什么 translateZ() 函数值会影响元素的视觉尺寸。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-02-28-14-04-15-a614c5f45a8812cabb934e65e632c953-0f06a.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 643px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 84.44790046656298%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAIAAABSJhvpAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB4UlEQVQ4y31S227aQBD1n/elD/mPPvWxD01VoabFSaAkKCqxDRsMLlGJr8RgfAHfdnPwBBe7Skcra3Z9zlzOjCTeNs45voZlPRjGA2OGYeR5fgqQCGHb9mKxME0zTVOilWWZFwX8D7athaEoiizPCdwmO44zm808zwMfL2EYIklZId6Pxze+D6dsMv+Sd7udpmlZltF1u93CJ/I7Rfn5+ChWq3K1EqYpLEs8P7+S6zDgF0XBK4uiqM58puu3hgFOCWYcC/SVZW0yCOiT/LSyDD1z/tE0p0lyEOIfRaVa1c1ms9/vi0qk9XoNFZIkicJwwhh+HWAIDSSdFhkiQbAgCDCS+Xyuqqqu63Ec46U1oUbmlmWVgYZCDoPwvJh0cl2xXIqnJxT2Jrm1JK7r7kDACB2nJMGOhUg1Dh1CMH5i1P+tqlrVbBApjGN6bMwZRSqKgmnlRwOINuzTaKR7HqHRf3acU6NsdNjaPrqOGHOrDaMcjcw1yPd9TAjFAwHlo8r2acomE8s0SULLstrkOjOYtB7w8cEB9M9yibiQA+8Id1qdxDkX/zUC8OaVXKnzrTudzua/F8E2uPt1r03YzfBOHbPvcvfzl86P7rV81etcdHuDoSz3e/2BfHl9/vUCTn8wfAHZ99CL5LAROwAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 02 28 14 04 15" title="" data-src="/static/2022-02-28-14-04-15-a614c5f45a8812cabb934e65e632c953-0f06a.png" data-srcset="/static/2022-02-28-14-04-15-a614c5f45a8812cabb934e65e632c953-66246.png 200w,\n/static/2022-02-28-14-04-15-a614c5f45a8812cabb934e65e632c953-2dbe7.png 400w,\n/static/2022-02-28-14-04-15-a614c5f45a8812cabb934e65e632c953-0f06a.png 643w" data-sizes="(max-width: 643px) 100vw, 643px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h2 id="指定-perspective-透视点的两种写法"><a href="#%E6%8C%87%E5%AE%9A-perspective-%E9%80%8F%E8%A7%86%E7%82%B9%E7%9A%84%E4%B8%A4%E7%A7%8D%E5%86%99%E6%B3%95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>指定 perspective 透视点的两种写法</h2>\n<p>有两种书写形式可以指定元素的透视点，一种设置在舞台元素上，也就是设置在 3D 渲染元素的共同父元素上；第二种是设置在当前 3D 渲染元素上，与 transform 其他变换属性值写在一起，代码示例如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="89343256774097910000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.stage {\n   perspective: 600px;\n}\n\n.box {\n   transform: rotateY(45deg);\n}`, `89343256774097910000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.stage</span> <span class="token punctuation">{</span>\n   <span class="token property">perspective</span><span class="token punctuation">:</span> 600px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.box</span> <span class="token punctuation">{</span>\n   <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotateY</span><span class="token punctuation">(</span>45deg<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>第二种：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="70894206081095870000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.stage .box {\n   transform: perspective(600px) rotateY(45deg);\n}`, `70894206081095870000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.stage .box</span> <span class="token punctuation">{</span>\n   <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">perspective</span><span class="token punctuation">(</span>600px<span class="token punctuation">)</span> <span class="token function">rotateY</span><span class="token punctuation">(</span>45deg<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/zjp7lo?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>看到的效果如图 5-43 所示，其中左侧的是 perspective 属性写法，右侧的是 perspective() 函数写法。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-02-28-14-10-21-29e80f106500a86d13e4988f4564d980-08a78.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 574px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 65.33101045296168%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACGUlEQVQoz9WRW08TQRiG99d4UUMkLdsDtLulXLUJhmhCMCb+AO6JRLSJ8VIDKW1tVVroVjFB8QpqSjSGQ2lLW6yGmIJQD0tIiglkd9mdw87uOi1GEv+BX96rmXm+N3mGQRim0qX7D/Iv5qu5t18KmwfN5i9ZVhGCCELdsnYWF9+Hwx8FobG83FxbP97bOzs5RQgDABgItbHx3KXLD+3OiMMVcXvjHm/85q2XkgwwBNA0S1NTj222Zyw7w7Jpj2eO4+eDQeXoSEOIwRhO3MvbndP8wBOvP0nT444NDmUkCRKMkGVVYrEUy2YDAYHnaea8Xhrl8BAS0obv3M1390R8/ck+PkFhZ29s6LpwAUejMw6H4PdnOK4dny/D821Y1/97mOunthJ0BRV+bTgryVD/B+b5TMeZEAj8gXVqO7xid0b5gad9fLKXS3Sz08HBWUkCtBlTOB7/a5vWzrrdaZdLFkVEbQOgjt1esl155PHFuEAidDU1fCM7PpGTZQ1qGiDG5uRkoqsrRX+I9z8PhV6NjCyNjiqt1pmmMYToK+8ar998qm2Lu7stUTxRFGCZJj3XsW5allgs7iwsiOXycaNx+uOnJknEMAghGGPGuhj60jwfCLFOCEIIAKjTRZ1rwzR1YlDGNIxzgOkwliIrq+ul/YPvX/e/qaq6tlEsV7a3qrVCoVip1iuVWrVaXf2wUa9/Lpa3VE2zOj2/Ady1CXHMBZvtAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 02 28 14 10 21" title="" data-src="/static/2022-02-28-14-10-21-29e80f106500a86d13e4988f4564d980-08a78.png" data-srcset="/static/2022-02-28-14-10-21-29e80f106500a86d13e4988f4564d980-683d3.png 200w,\n/static/2022-02-28-14-10-21-29e80f106500a86d13e4988f4564d980-6bdc6.png 400w,\n/static/2022-02-28-14-10-21-29e80f106500a86d13e4988f4564d980-08a78.png 574w" data-sizes="(max-width: 574px) 100vw, 574px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>仔细对比图 5-43 左右两侧图形的效果，会发现虽然透视点设置的方法不一样，但是效果貌似是一样的。果真是这样吗？其实不然，图 5-43 左右两侧图形的效果之所以会一样，是因为舞台上只有一个元素，因此，两种书写形式的表现正好一样。如果舞台上有多个元素，那么两种书写形式的表现差异就会立刻显示出来，如图 5-44 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-02-28-14-11-13-56ca0fa6a9d163c87d8d9ad65e2d87bc-7517b.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 756px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 66.13756613756614%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAAC90lEQVQozz2RWU8TURSA54/44BKUAhW6Ca0p0NKQSOQFTQhQi2BA1BgjCpFgiIpKjLKUglJQthZkadgKLZVVlhiIKEuhpaVM9wGm0zJ02qFF8PYB7tP9zjnfPefeCz19Pnjvfs+L0pFX5Zq+/lVZx2/h3c7SMtW7ijGdDrHZsNy87uKS4db2RZI8PDk5efP2R2HRkE6PHB8fQRlCOZVew4irvRzx6Va6TCyZi4yuYrIl58M+dPeuoCjBYteFUytvpDb7fAEg5xUozl14PzC4DvaQMLvzGqcugd/AYkty83sln+cZsbWJAimNJR5Uru/tebm8LyCVntnh9weB8PBxf8TVKtWoPiSLcr6H5KQG4NzJ6a4/lcE4fQNaNCSHzr2dLj+TKdTKYZUuJKdnyqIZNaw4MZ1ZVfBIUSOZjYyujOWIacwq5YjWieyz2LXUmI8ZWTKCIIGQm98TdqVCpQZjH0NjY7rx0ZXVjd1N8z7q9q38NauHl7V61GTDCTK460Q16jWt3uV0+QNH/0jvwfycYW3T5QscB4NByIvY1Q/yxgufTJUUu00mbMs4JMqcKCr8WfYSRxB4ZkaZLZwsfjZT/ppwe3TK4UFRFsBf1dXEwQG0t2X6xrneyGCKL17anphANzfrKZGNTFY9JQJZXgYRgFIGUxpD85jNGwpFXTilITpGnpzsdWGQC4blAkEbj9dIp1tmZ10Gw1cWqz0pqZnN3tNq4cnJEPJ4bQkJuNWq6+trYjBa4+N70tIItxvCYFjG57dyuQ1RUebpacxobKLTQSko2lldhaemAIJsC5u9b7EAuZFGa+FwulJvEhgGoSZTW2IiaNXC5doWFnbX16U0WrtAACLgCkaNRkqnA+xIScGdzrWuLjBgO58/IBIRHg/kx3Hb4iJqNHpdKPgJH4ZZFxZAE7/HA9CLIM4/S/tWK4njAHGrzb605AZZHA+99snpIklyG7agbo8/EIDtDrsTMRhN2xabA3VZEcSB7NjtTrPdcRgMnin/ARLJ/SPw8X9kAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 02 28 14 11 13" title="" data-src="/static/2022-02-28-14-11-13-56ca0fa6a9d163c87d8d9ad65e2d87bc-7517b.png" data-srcset="/static/2022-02-28-14-11-13-56ca0fa6a9d163c87d8d9ad65e2d87bc-0f6be.png 200w,\n/static/2022-02-28-14-11-13-56ca0fa6a9d163c87d8d9ad65e2d87bc-091cf.png 400w,\n/static/2022-02-28-14-11-13-56ca0fa6a9d163c87d8d9ad65e2d87bc-7517b.png 756w" data-sizes="(max-width: 756px) 100vw, 756px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>图 5-44 所示的效果其实不难理解。图 5-44 上面一排元素把整个舞台作为透视元素，也就是我们看到的每个子元素都共用同一个透视点，因此每一个子元素的视觉形状都不一样，这个效果比较符合现实世界的 3D 透视效果。例如视线前方有一排人，远处的人只能被看到侧脸，近处的人可以被看到正脸。而图 5-44 下面一排元素中的每个子元素都有一个自己独立的透视点，加上旋转的角度又是一样的，因此每个元素看上去也就一模一样了。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/soqnjm?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<h2 id="理解-perspective-origin-属性"><a href="#%E7%90%86%E8%A7%A3-perspective-origin-%E5%B1%9E%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>理解 perspective-origin 属性</h2>\n<p>perspective-origin 属性很好理解，表示我们的眼睛相对 3D 变换元素的位置，你可以通过改变眼睛的位置来改变元素的 3D 渲染效果，原理如图 5-45 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-02-28-14-13-19-4e82aaafd45866aeacff26e75e462f7d-c7bf1.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 54.5774647887324%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABT0lEQVQoz3VRSW6DQBDk//f8Im/g4iWHYGRWEQwBIwEGs+9rSJmxcBySPoxmurumuqqpMAwFQaiqapqmrzmm5xiGwbZtXddFUVQURZbltm1JiYqiSJKkPM/7vu+6bphjHEdywV9N01wuF8/zcKZpCjJ03sGEkDxwAQA1gif5vm33uh4kydIJDoKnplWgY2EGNeZ+2e3sMEQJeZzQiBF+M69/QaGr69ft1pvBpLMsS8j8m3lt2H6zCa7Xm4S+Bx7gZFZxA9d1Teb5DwxHkx+a4XZRFHcwbIzjGDYgS5Tigj7wwGrwYJdBEBAYzizLHpqxLcuykHIcByTYJMdxLMuqqoqk7/sMw/A8jyVLc9A0jZ2bpvmkGVTggZnDzLnscxxGJIlP+A4zQwXIH24bhqGoWprljuuqJ90wz7bjap+GKMqHI/9x0t7eD+yRM87WQvYNafp0Uo+8UZ0AAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 02 28 14 13 19" title="" data-src="/static/2022-02-28-14-13-19-4e82aaafd45866aeacff26e75e462f7d-fee1c.png" data-srcset="/static/2022-02-28-14-13-19-4e82aaafd45866aeacff26e75e462f7d-a67b7.png 200w,\n/static/2022-02-28-14-13-19-4e82aaafd45866aeacff26e75e462f7d-0b187.png 400w,\n/static/2022-02-28-14-13-19-4e82aaafd45866aeacff26e75e462f7d-fee1c.png 800w,\n/static/2022-02-28-14-13-19-4e82aaafd45866aeacff26e75e462f7d-c7bf1.png 852w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>正式语法如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="86293792183302850000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`perspective-origin: <position>;`, `86293792183302850000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">perspective-origin</span><span class="token punctuation">:</span> &lt;position><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>一看到 <code class="language-text">&lt;position&gt;</code> 数据类型，就应该赶快回想起 background-position 属性支持哪些值，也就知道了 perspective-origin 属性支持哪些值。例如，下面这些语句都是合法的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="74428743995698430000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`perspective-origin: top left;\nperspective-origin: right 20px bottom 40%;\nperspective-origin: 50% 50%;\nperspective-origin: -200% 200%;\nperspective-origin: 20cm 100ch;`, `74428743995698430000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">perspective-origin</span><span class="token punctuation">:</span> top left<span class="token punctuation">;</span>\n<span class="token property">perspective-origin</span><span class="token punctuation">:</span> right 20px bottom 40%<span class="token punctuation">;</span>\n<span class="token property">perspective-origin</span><span class="token punctuation">:</span> 50% 50%<span class="token punctuation">;</span>\n<span class="token property">perspective-origin</span><span class="token punctuation">:</span> -200% 200%<span class="token punctuation">;</span>\n<span class="token property">perspective-origin</span><span class="token punctuation">:</span> 20cm 100ch<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>perspective-origin 属性初始值是 50% 50%，表示默认的透视点是舞台或元素的中心。但是有时候，需要让变换的元素不在舞台的中心，或让透视角度偏上或者偏下，此时就可以通过设置 perspective-origin 属性值实现。</p>\n<p>图 5-46 所示的就是一个立方体应用 perspective-origin: 25% 75% 声明后的透视效果图。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-02-28-14-18-33-e55962f5e6ad49aa940dc30a9dc21807-f79be.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 567px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 54.4973544973545%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABfUlEQVQoz2P4jwT+/vkDJG8sWb/HNOKoW/phl9TDLilHXNIPWEac6WoHqfj3D1k9A4rm37+B5LUJ8w4zWJwR9jnJ4XSKy+W0oM8JZbEzNfF/idF8fe6iQzy256W9b4VV38rsPm6oetKT80xDGkHNIGdfX7TkAK/dfXXfF21Ln22Yc9yV55Qr75n6VAKa/0E0L1lyUcnovorpFV/fZxsmnXDjP+XKQ4TmPyBn31i69I2z9P9AyfsJBvfKg0/6ip524z3bmEbQZpDmK3PnP5WR+2OsfUdL8Zyu8Ak70cPmjMcrIQH2F7fmvyCD3924/Wrx9ver9r9fufftmt2v1+54uG7V07PHIUpwaiYVMPz48eMPCPz+B/bPPzD48+sXKOT/Ahm///358+vHj+/fvwMV/QKDnz+B6OevX78ZNm7afvP2nQsXL335+u3S1SsXL189dx5IXL9y7fq9+w+v37p58dLlAwcPb9+979ix4zv3Hti3/8D2HfuOnTi978BhAB1VKWCTQfmVAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 02 28 14 18 33" title="" data-src="/static/2022-02-28-14-18-33-e55962f5e6ad49aa940dc30a9dc21807-f79be.png" data-srcset="/static/2022-02-28-14-18-33-e55962f5e6ad49aa940dc30a9dc21807-5ae21.png 200w,\n/static/2022-02-28-14-18-33-e55962f5e6ad49aa940dc30a9dc21807-d9cbe.png 400w,\n/static/2022-02-28-14-18-33-e55962f5e6ad49aa940dc30a9dc21807-f79be.png 567w" data-sizes="(max-width: 567px) 100vw, 567px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h2 id="transform-style-preserve-3d-声明的含义"><a href="#transform-style-preserve-3d-%E5%A3%B0%E6%98%8E%E7%9A%84%E5%90%AB%E4%B9%89" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>transform-style: preserve-3d 声明的含义</h2>\n<p>transform-style 支持两个关键字属性值，分别是 preserve-3d 和 flat，语法如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="88169288782386530000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`transform-style: preserve-3d;\ntransform-style: flat;`, `88169288782386530000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">transform-style</span><span class="token punctuation">:</span> preserve-3d<span class="token punctuation">;</span>\n<span class="token property">transform-style</span><span class="token punctuation">:</span> flat<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>先讲一下这一语法中的几个关键点。</p>\n<ul>\n<li>preserve-3d 表示应用 3D 变换的元素位于三维空间中，preserve-3d 属性值的渲染表现更符合真实世界的 3D 表现。</li>\n<li>flat 是默认值，表示应用 3D 变换的元素位于舞台或元素的平面中，其渲染表现类似“二向箔”，把三维空间压缩在舞台元素的二维空间中。</li>\n</ul>\n<p>我们通过一个例子直观地了解一下 preserve-3d 和 flat 这两个属性值的区别，HTML 和 CSS 代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="11710867629715450000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<section class=&quot;stage preserve-3d&quot;>\n   <div class=&quot;box&quot;></div>\n</section>\n\n<section class=&quot;stage&quot;>\n   <div class=&quot;box&quot;></div>\n</section>\n\n<style>\n   .stage {\n      width: 150px;\n      height: 150px;\n      background-color: rgba(0, 191, 255, 0.75);\n      perspective: 600px;\n   }\n\n   .box {\n      height: 100%;\n      opacity: 0.75;\n      background-color: darkred;\n      transform: rotateY(45deg);\n   }\n\n   .preserve-3d {\n      transform-style: preserve-3d;\n   }\n</style>`, `11710867629715450000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stage preserve-3d<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span>\n\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stage<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span>\n\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n   <span class="token selector">.stage</span> <span class="token punctuation">{</span>\n      <span class="token property">width</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>\n      <span class="token property">height</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>\n      <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 191<span class="token punctuation">,</span> 255<span class="token punctuation">,</span> 0.75<span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token property">perspective</span><span class="token punctuation">:</span> 600px<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">.box</span> <span class="token punctuation">{</span>\n      <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>\n      <span class="token property">opacity</span><span class="token punctuation">:</span> 0.75<span class="token punctuation">;</span>\n      <span class="token property">background-color</span><span class="token punctuation">:</span> darkred<span class="token punctuation">;</span>\n      <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotateY</span><span class="token punctuation">(</span>45deg<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">.preserve-3d</span> <span class="token punctuation">{</span>\n      <span class="token property">transform-style</span><span class="token punctuation">:</span> preserve-3d<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>应用了 transform-style: preserve-3d 声明的 3D 变换元素有部分区域藏到了舞台元素的后面，因为此时整个舞台按照真实的三维空间渲染，自然看不到旋转到后面的图形区域，如图 5-47 左侧图形所示。默认情况下，元素无论怎么变换，其 3D 效果都会被渲染在舞台元素所在的二维平面之上，因此没有视觉上的穿透效果，如图 5-47 右侧图形所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-02-28-14-24-42-9364bfca5fc8a9bcb9f9c514c6439bc0-6f9e6.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 692px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 52.312138728323696%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAAB+klEQVQoz2P4DwS/fv2/ceP/lSv/bt74ffXK/4sX/9+5/f/2rf8PH/y/eeP/o0d/Llz4e/bs/4cP/z9+/P/h4/9Xr/7/9g2ojwGI//37///Pn1///088/qDDLWBOaHTL1NXZh5/lnnwz4+n/Da//NSYWTvMNnpdbOq+qderkJeVXvj3+CdIH1gzCf7/+/x+/+0GOoX2lqr57apvUvEsyS28l3/rf/uh/dEBGhbphga5VsaphnqmLya5XV9A0A92RsfdBkYlTg555YG6PxpJrWqvv5Nz+3/f4f1JwVp2eRYWFa5WxfalLsMPe19cwNafvfVBo4lSvaxaQ0622+KrGqjvZt//3Pv6fGJxVq2tebuZcaWhT6hhgh1UzyGZTZJvvkmLzvofFVh4N+hZgm69orLwNsTk5PK/e0LrC3KXKwLrM3td+D0zzv3///gKDG6w5Z/edPE2zBj2ziKIJRqtumm58WHTn/ySgsz3jazSNauw86xz9SqOy3Q+/v/EdqPkvyOb/0Oj6//rT1wdHjr68eu3V208v//x/+fffuz//gbHw4NyF5+cvfHjy9P2XH6//A8X//wYp/8/w5OnTt+/ef/v27ceP71+/fP729y8wwn/++PHlw/u3r15+/vD+xbNnbz98fPnuwxsg+erli6dPPr178+bN25cvXwEAENOz9kiP6XMAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 02 28 14 24 42" title="" data-src="/static/2022-02-28-14-24-42-9364bfca5fc8a9bcb9f9c514c6439bc0-6f9e6.png" data-srcset="/static/2022-02-28-14-24-42-9364bfca5fc8a9bcb9f9c514c6439bc0-2b38f.png 200w,\n/static/2022-02-28-14-24-42-9364bfca5fc8a9bcb9f9c514c6439bc0-438f0.png 400w,\n/static/2022-02-28-14-24-42-9364bfca5fc8a9bcb9f9c514c6439bc0-6f9e6.png 692w" data-sizes="(max-width: 692px) 100vw, 692px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/zgw557?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>需要注意的是，transform-style 属性需要用在 3D 变换元素的父元素上，也就是舞台元素上才有效果。</p>\n<h2 id="backface-visibility-属性的作用"><a href="#backface-visibility-%E5%B1%9E%E6%80%A7%E7%9A%84%E4%BD%9C%E7%94%A8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>backface-visibility 属性的作用</h2>\n<p>在 CSS 世界中，一个元素的背面表现为其正面图像的镜像，因此，当我们使用翻转效果使其背面展示在用户面前的时候，显示的是该元素正面图像的镜像。</p>\n<p>这一特性和现实中的 3D 效果并不一致，例如我们要实现扑克牌翻转的 3D 效果，很显然，扑克牌的背面一定是花纹，不可能是正面的牌号。因此，当我们对扑克牌进行翻转使其背面展示在用户面前的时候，显示扑克牌的正面镜像显然是不合理的。我们需要隐藏扑克牌元素的背面，至于扑克牌背面花纹的效果，我们可以使用其他元素进行模拟，然后让前后两个元素互相配合来实现 3D 扑克牌翻转效果。这个控制扑克牌的背面不显示的 CSS 属性就是 backface-visibility。</p>\n<p>backface-visibility 属性语法如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="28136753457890595000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`backface-visibility: hidden;\nbackface-visibility: visible;`, `28136753457890595000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">backface-visibility</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>\n<span class="token property">backface-visibility</span><span class="token punctuation">:</span> visible<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>其中，visible 是默认值，也就是元素翻转时背面是可见的；如果 backface-visibility 的属性值是 hidden，则表示元素翻转时背面是不可见的。</p>\n<p>我们通过一个例子直观地了解一下 hidden 和 visible 这两个属性值的区别，HTML 和 CSS 代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="4550601250845410000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<section class=&quot;stage backface-hidden&quot;>\n   <div class=&quot;box&quot;></div>\n   <div class=&quot;box&quot;></div>\n</section>\n\n<section class=&quot;stage&quot;>\n   <div class=&quot;box&quot;></div>\n   <div class=&quot;box&quot;></div>\n</section>\n\n<style>\n   .stage {\n      width: 150px;\n      height: 150px;\n      border: 1px solid darkgray;\n      perspective: 600px;\n      transform-style: preserve-3d;\n   }\n\n   .box {\n      width: inherit;\n      height: inherit;\n      opacity: 0.75;\n      background-color: darkred;\n      transform: rotateY(225deg);\n   }\n\n   .box:first-child {\n      transform: rotateY(-45deg);\n      background-color: darkblue;\n      position: absolute;\n   }\n\n   .backface-hidden .box {\n      backface-visibility: hidden;\n   }\n</style>`, `4550601250845410000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stage backface-hidden<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span>\n\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stage<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span>\n\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n   <span class="token selector">.stage</span> <span class="token punctuation">{</span>\n      <span class="token property">width</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>\n      <span class="token property">height</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>\n      <span class="token property">border</span><span class="token punctuation">:</span> 1px solid darkgray<span class="token punctuation">;</span>\n      <span class="token property">perspective</span><span class="token punctuation">:</span> 600px<span class="token punctuation">;</span>\n      <span class="token property">transform-style</span><span class="token punctuation">:</span> preserve-3d<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">.box</span> <span class="token punctuation">{</span>\n      <span class="token property">width</span><span class="token punctuation">:</span> inherit<span class="token punctuation">;</span>\n      <span class="token property">height</span><span class="token punctuation">:</span> inherit<span class="token punctuation">;</span>\n      <span class="token property">opacity</span><span class="token punctuation">:</span> 0.75<span class="token punctuation">;</span>\n      <span class="token property">background-color</span><span class="token punctuation">:</span> darkred<span class="token punctuation">;</span>\n      <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotateY</span><span class="token punctuation">(</span>225deg<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">.box:first-child</span> <span class="token punctuation">{</span>\n      <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotateY</span><span class="token punctuation">(</span>-45deg<span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token property">background-color</span><span class="token punctuation">:</span> darkblue<span class="token punctuation">;</span>\n      <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">.backface-hidden .box</span> <span class="token punctuation">{</span>\n      <span class="token property">backface-visibility</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>设置了 backface-visibility: hidden 后，绕 y 轴旋转 225 度后元素被隐藏了，因为 rotateY 值在大于 180 度、小于 360 度的时候，我们看到的就是元素的背面了，如图 5-48 左侧所示；而 backface-visibility 属性值是 visible 的元素绕 y 轴旋转 225 度后依然清晰可见，效果如图 5-48 右侧所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-03-02-14-02-45-88106d15a0d51892d082e675caf22edc-95b2a.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 724px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABsklEQVQoz2P4DwGPHv27evX/00f/Hz34ffb8p/PXnu49/efO3b8PH3zZt/f3lUu/b9/5eur8s6OXfly88v/pE4gmBgj19+/ff///rFt/KzdvT1LKDg+vtcEhGz9/+/Xz04f5rv696mZFVjmW2v2uVrPuP3gPVP/v3z+E5j9//gLJqqrD2trzbG2XW1gs8fdf/+Xrrz/fPk0ycS1hkgri9pJhKbFS73rw8ANWzf+am4+bmS1xcVllY7MsMGADSPPXT1Mt3Cu45CNEApV4Km20e3Fp/t/UdMzEZLGzM4rmKebuFRzy4cIBStwVNlo9+Gw2N1/i6rra1haoeT3MZo9KLoVI0UAVXrw2V1QcUlGZDdRvaLjQy2sNRHO/vkM+g7APs4soQ4GJYtuDBxiagYH99+/vY8ceT558urn5aGbmrtTUHV++/vz5+ePamOSlgTETU3sSQpfFhKx8iGwzhMIEYOP+/f3z59+f32iCQL0Q/Qynz5y7ffveixcvHz16fPnKtes37jx6/PTWndvXb968cu3azTt3z56/dOr0OSA6efrMqdOnT5w6c+HS5avXbhw/cRoAN5zBJ/MzfR0AAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 03 02 14 02 45" title="" data-src="/static/2022-03-02-14-02-45-88106d15a0d51892d082e675caf22edc-95b2a.png" data-srcset="/static/2022-03-02-14-02-45-88106d15a0d51892d082e675caf22edc-9e4f1.png 200w,\n/static/2022-03-02-14-02-45-88106d15a0d51892d082e675caf22edc-4a316.png 400w,\n/static/2022-03-02-14-02-45-88106d15a0d51892d082e675caf22edc-95b2a.png 724w" data-sizes="(max-width: 724px) 100vw, 724px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/3ty0kq?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<h2 id="值得学习的旋转木马案例"><a href="#%E5%80%BC%E5%BE%97%E5%AD%A6%E4%B9%A0%E7%9A%84%E6%97%8B%E8%BD%AC%E6%9C%A8%E9%A9%AC%E6%A1%88%E4%BE%8B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>值得学习的旋转木马案例</h2>\n<p>这里举一个图片列表旋转木马效果案例，它可以用来替换常见的 2D 轮播效果，如果读者能弄明白这个例子，那么对 CSS 3D 变换的学习就算是合格了。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/mnzyke?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>实现的效果如图 5-49 所示，点击任意图片可以看到图片列表的旋转木马效果。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-03-02-14-12-33-28765ec2ba96025d7a9c970bf5dbb253-31a59.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 37.951105937136205%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAACQElEQVQoz12NW0gTcBSH/wnRW1FBRUUIoiBqKApmZXlhleEwyua84KUcoTPbJvM2LYvaKJpiypLykteZEuREtHxJKEKhhW7anGKmi64PiRk5YV/THoI+OPwOPzjfETp9I2pdDakXS5HKlLy1zfLd/pT5V/WMmfN5bkzB8ewuM4MGLNX5qJOjGW42MDT6miOpWWTkFXNZf5tSkwlzvwUhRBhiSzhiWzgBkSlYRy24hrUMVEYyUnuSCXMm0+ZcPg+V8aT4GIl+PjSqUtE+7EWE+HvvAhH+wd49kGDZKa8wSIGvRE3RnWZqWyz0dV3B9ULFRFsBXYVRvLx3noGbiYzWp9GqPErawe20FiWjqTMhFBI2SxLxiU1CXDiDpCIHkXGtCYP3m8rYib6hj1xtAt3GE4zVZjN4XUpDoQStPJIxUzqdqjjOBmylWXMaza0SRHQYPnmx+Bmk7KyMIV4mRZTrTTS2dFB9vwVzx2OSciXU6Y4zYkinvyoZZdJhSuQSesrSqcmKJT3Cn4qcOBTl8Yjd+9gUfoD9yj2IQ3sJTfB2Te3d9PZ00/KojYobRiyDQ7Qbr6KTn6TqUgYaRSYKuYxzMdEkREUQFRRAQW4WD8zNXuEOdsWE4KcOwlcdSnZZMQI8rLrdLC3/5MPHr/xedeNaWMRuszM1NYXT6WR2xsmkfQK7d6zWN7yfm+PH0jL2GQefvn1heekXHo+HdcTf+IfbvYpjeoaFRRcrKyu8czixjtuYX3Bt9OO2yY10r63xP+vSPzvOpo0x1mKvAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 03 02 14 12 33" title="" data-src="/static/2022-03-02-14-12-33-28765ec2ba96025d7a9c970bf5dbb253-fee1c.png" data-srcset="/static/2022-03-02-14-12-33-28765ec2ba96025d7a9c970bf5dbb253-a67b7.png 200w,\n/static/2022-03-02-14-12-33-28765ec2ba96025d7a9c970bf5dbb253-0b187.png 400w,\n/static/2022-03-02-14-12-33-28765ec2ba96025d7a9c970bf5dbb253-fee1c.png 800w,\n/static/2022-03-02-14-12-33-28765ec2ba96025d7a9c970bf5dbb253-31a59.png 859w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h3 id="实现原理"><a href="#%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>实现原理</h3>\n<p>这个案例用到的 CSS 属性就是前面提到的几个常用 CSS 属性，包括透视、3D 变换和三维空间设置。</p>\n<p>首先，HTML 代码结构如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="12062212134371774000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`舞台\n   容器\n      图片\n      图片\n      图片\n      ......`, `12062212134371774000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title=""\n              >\n                \n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">舞台\n   容器\n      图片\n      图片\n      图片\n      ......</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>相关 HTML 代码是：</p>\n<html><head></head><body><div class="gatsby-code-button-container" data-toaster-id="4116105650876078600" data-toaster-class="gatsby-code-button-toaster" data-toaster-text-class="gatsby-code-button-toaster-text" data-toaster-text="复制成功" data-toaster-duration="3500" onclick="copyToClipboard(`<div class=&quot;stage&quot;>\n   <div id=&quot;container&quot; class=&quot;container&quot;>\n      <img class=&quot;piece&quot; data-src=&quot;1.jpg&quot; style=&quot;--index:0;&quot; />\n      <img class=&quot;piece&quot; src=&quot;2.jpg&quot; style=&quot;--index:1;&quot; />\n      <img class=&quot;piece&quot; src=&quot;3.jpg&quot; style=&quot;--index:2;&quot; />\n      <img class=&quot;piece&quot; src=&quot;4.jpg&quot; style=&quot;--index:3;&quot; />\n      <img class=&quot;piece&quot; src=&quot;5.jpg&quot; style=&quot;--index:4;&quot; />\n      <img class=&quot;piece&quot; src=&quot;6.jpg&quot; style=&quot;--index:5;&quot; />\n      <img class=&quot;piece&quot; src=&quot;7.jpg&quot; style=&quot;--index:6;&quot; />\n      <img class=&quot;piece&quot; src=&quot;8.jpg&quot; style=&quot;--index:7;&quot; />\n      <img class=&quot;piece&quot; src=&quot;9.jpg&quot; style=&quot;--index:8;&quot; />\n   </div>\n</div>`, `4116105650876078600`)">\n              <div class="gatsby-code-button" title="html">\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div></body></html>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stage<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>piece<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1.jpg<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">--index</span><span class="token punctuation">:</span>0<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>piece<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>2.jpg<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">--index</span><span class="token punctuation">:</span>1<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>piece<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>3.jpg<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">--index</span><span class="token punctuation">:</span>2<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>piece<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>4.jpg<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">--index</span><span class="token punctuation">:</span>3<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>piece<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>5.jpg<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">--index</span><span class="token punctuation">:</span>4<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>piece<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>6.jpg<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">--index</span><span class="token punctuation">:</span>5<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>piece<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>7.jpg<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">--index</span><span class="token punctuation">:</span>6<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>piece<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>8.jpg<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">--index</span><span class="token punctuation">:</span>7<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>piece<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>9.jpg<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">--index</span><span class="token punctuation">:</span>8<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>对于舞台，需要为其设置视距，例如设置为 800px：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="75871350690640640000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.stage {\n   perspective: 800px;\n}`, `75871350690640640000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.stage</span> <span class="token punctuation">{</span>\n   <span class="token property">perspective</span><span class="token punctuation">:</span> 800px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>对于容器，需要为其添加 3D 视图声明：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="15450204072125673000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.container {\n   transform-style: preserve-3d;\n}`, `15450204072125673000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.container</span> <span class="token punctuation">{</span>\n   <span class="token property">transform-style</span><span class="token punctuation">:</span> preserve-3d<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>然后就是图片元素了，为了方便定位，我们让所有图片应用 position: absolute 声明，共用一个 3D 变换中心点。</p>\n<p>显然，图片旋转木马的运动方式需要应用的 3D 变换函数是 rotateY() 函数。因此，图片元素需要设置的 rotateY() 函数值就是 360 度除以图片数量后的计算值，这里有 9 张图片，则每张图片的旋转角度比前一张图片多 40 度（360 / 9 = 40）。如果需要兼容 IE 浏览器，我们可以这样书写：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="34252249307205652000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`img:nth-child(1) {\n   transform: rotateY(0deg);\n}\n\nimg:nth-child(2) {\n   transform: rotateY(40deg);\n}\n\nimg:nth-child(3) {\n   transform: rotateY(80deg);\n}\n\nimg:nth-child(4) {\n   transform: rotateY(120deg);\n}\n\nimg:nth-child(5) {\n   transform: rotateY(160deg);\n}\n\nimg:nth-child(6) {\n   transform: rotateY(200deg);\n}\n\nimg:nth-child(7) {\n   transform: rotateY(240deg);\n}\n\nimg:nth-child(8) {\n   transform: rotateY(280deg);\n}\n\nimg:nth-child(9) {\n   transform: rotateY(320deg);\n}`, `34252249307205652000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">img:nth-child(1)</span> <span class="token punctuation">{</span>\n   <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotateY</span><span class="token punctuation">(</span>0deg<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">img:nth-child(2)</span> <span class="token punctuation">{</span>\n   <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotateY</span><span class="token punctuation">(</span>40deg<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">img:nth-child(3)</span> <span class="token punctuation">{</span>\n   <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotateY</span><span class="token punctuation">(</span>80deg<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">img:nth-child(4)</span> <span class="token punctuation">{</span>\n   <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotateY</span><span class="token punctuation">(</span>120deg<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">img:nth-child(5)</span> <span class="token punctuation">{</span>\n   <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotateY</span><span class="token punctuation">(</span>160deg<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">img:nth-child(6)</span> <span class="token punctuation">{</span>\n   <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotateY</span><span class="token punctuation">(</span>200deg<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">img:nth-child(7)</span> <span class="token punctuation">{</span>\n   <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotateY</span><span class="token punctuation">(</span>240deg<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">img:nth-child(8)</span> <span class="token punctuation">{</span>\n   <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotateY</span><span class="token punctuation">(</span>280deg<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">img:nth-child(9)</span> <span class="token punctuation">{</span>\n   <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotateY</span><span class="token punctuation">(</span>320deg<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>如果无须兼容 IE 浏览器，我们可以使用 CSS 自定义属性实现：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="34336483745241250000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`img {\n   transform: rotateY(calc(var(--index) * 40deg));\n}`, `34336483745241250000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">img</span> <span class="token punctuation">{</span>\n   <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotateY</span><span class="token punctuation">(</span><span class="token function">calc</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--index<span class="token punctuation">)</span> * 40deg<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>虽然 9 张图片的方位都不一样，但由于它们共用一个 3D 变换中心点，因此一定会挤成一团，如图 5-50 所示，图片挤成一团的效果显然不是我们需要的，我们需要拉开图片之间的距离。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-03-02-14-29-42-aaa3cd414cbe32d657bf2c74d2de1afa-4fbc8.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 431px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 84.68677494199537%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsSAAALEgHS3X78AAAETElEQVQ4y63T+1PUVRjHcWpyYrqhIjgTJF5Wd2VZBAQCg1UTRJFgKAgEQ/EGiRAjBGRIEQiiNpIiFw1QaxFIwcu6uwa73FwFtUYTjQQzLgvCAgpMeWGmd1+bafYf6PnhnJnznHnNOWfOxwyheoYGqVXqUDb1o7/1jPOKY1Tlp1FdlM9A+3EmH9/gQIWChF25VJUrSU8vYl/WXh5equT+2SK62xoYeWh8TmH2fKiqbyYjt4T8E79RVPOIzG0xBM4xY72rNUMtWzHcy+WFd1yYIZGzzisGV0kIMavWYDwUzC9JblzO3o6uvdUEKhv0fF+tEuY+zjWNUrQzjsjFlmSGOjLZnkZfZw5TA31wXRNMYXQ6W/xi2RUWxtVUVwqiHVBlxaO9qTeBlcpmCspqadTfR9XYS0lSOBvdrUj2FTHaGE1vewqvBPkiDw1EE5/I/pAYkpd7cSrOmZKMAMoSwlG36Uyguq6F4xVnuHatnavXfxLAMD7xnknC0lkYlCH0XI/n5XA/Vm8IwJAYTmlgKGlyVzqL13H1m0gOfuTPqSaNCTx7oYmS8hp+btNzXnMMReZWNrlYkOznwI0KL1pr32bKtmAiNvlwJ8gbucNSlro78W2sjENbpaSGrURRrzaB1SotB49U0NZYz5m6M5RlbmSjswU7fKSoSlxQlIt5KSkYN18P0lyWCOAyxFIZqyNsiYi1x89FSuHpShOYuucAMUlZ6LU1aLQKDqd8SLTzdNIDnCnb70jOURH2xwJwcHFlxUJfbOf7IhY7InafyhyZNYtm23Gg8jsTuD4pg+2pX6FTl3Pyh1xKPhWuJxNA/0Xs3ikl5YgV/sUSxBJ34hx8iFj4LitlDljYmCMSWSKZZUPuiVITmL73IDsz86ivy6JG+TkZ20IIktmSskJGfJyI0M8shX+4AP+5Mlocvdkn9SZ8ngTzGS8ye8E05tq8SXbpUROYnV9AVOwO8o4EUV0bRVzUKrb4eJC9NoDIKAn+ia9jHrQAT5kbp6VeHBUvYbOdCEu7KUgdp2M/5y3hWYpN4NcFhazftIUTVctQnPZhQ7gcT+lCVi/xQO5nw7J4c2bseoOZTh68b+/NByIPIt1kfBw1j4S181ksmkVe8WETeLKqmi+z00n8wpbdpWLeWyPFztoaJ8l8nLxeY/kGK17dPJNpEjFykSciKxkrvRdxKM+TnCRnIYrz2FtU+B/4NxMTf9JtMHCz6xJ3+66j1aqo//EiHXfu0Nyq4Y++Dn7t7OScTsft9g40ai1anRaD4Rbdv1+j+/49Ho2Nm074f5aZoX+AIeMwT54+xThsZHLyGWNjYwwMDtE/8ICBB4OMjAwLvREGh4yMj08I/XF6ew2MjI7S19f77z7j8DDDI6OYqTV16C+30dPTi7ahmb8eP6GrswtVXb2QcR26hhautLZxqeUKF9QXud1xl667XWiEdDULa+cvqNA26WkVDE1dA/8AlJahf5l2tPUAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 03 02 14 29 42" title="" data-src="/static/2022-03-02-14-29-42-aaa3cd414cbe32d657bf2c74d2de1afa-4fbc8.png" data-srcset="/static/2022-03-02-14-29-42-aaa3cd414cbe32d657bf2c74d2de1afa-3b445.png 200w,\n/static/2022-03-02-14-29-42-aaa3cd414cbe32d657bf2c74d2de1afa-b6b36.png 400w,\n/static/2022-03-02-14-29-42-aaa3cd414cbe32d657bf2c74d2de1afa-4fbc8.png 431w" data-sizes="(max-width: 431px) 100vw, 431px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>如何拉开距离呢？其实很简单。我们可以把 9 张图片想象成 9 个人，现在这 9 个人站在一起分别面朝不同的方位，这 9 个人是不是只要每个人向前走 4 ～ 5 步，彼此之间的距离就拉开了？不妨想象一下夜空中礼花绽开的场景。这里的向前走 4 ～ 5 步的行为，就相当于应用 translateZ() 函数的行为，当 translateZ() 函数值为正值的时候，元素会向其面对的方向走去。</p>\n<p>现在只剩下一个问题了：要向前走多远呢？这个距离是有计算公式的！这 9 张图片宽度均是 128px，因此就有图 5-51 所示的理想方位效果。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-03-02-14-33-56-bb7cdc086a5e1169431b6962c6520539-284ba.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 653px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 83.46094946401224%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAIAAABSJhvpAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB40lEQVQ4y3WT3XLaMBCF/f6v1DSZppm2TOiQ0GlnyvQG0hCDjbFk4/hHMv2ktRRyUV2AvN6ze/acdXIOx1rbtq1SKsuyoii01l3XjeN4/v9J5I/U4/FYVdUwDMYYMH3fS/B0OrkMX2XsOmvMO3DTNHmemxAFHxvSHCIUkkdTlkPbvoHJOxwO/A7+XILBMAuPTCHZo9aGWSIYqnVdy4NkQ2EIJw4l5AE3VdWHeLLf7+kDRroBoMRms2EWP6k7lDvkuaOt1N/1+jUwT4QzAJGKQx/oXPYnoWRaGlTVmbhX1IGJvrkFwlqVprVS/mqjhFR0CSQT9wI5MMbKjeweJ2BRFEhqvFSCh1eplANDPkRo7sD4IZzdayak3GtrgwTEmV8Es1qPPk3iCVuFydFY1w0VkCDYTtJut5tKQ95fxNppSXBSBHeqwHAwQ+iAonFJrPc5Fp3Wk/7gqTIgWllar/6prkFOm+epWaW2T09iCpAkSk0T+Cut98/PeZbhAsgo+Dm0w/DVasUrVmsCy8yNP+vNZrvdcmkv1vjy40vTVF4lMWSNjbLJJazX5JlfRBw07z4M/h4elssfv7YvaaX11fWnxWL5e/Vndj+/uf3y4erm4/Xt4/Ln9/ni893Xb7P72WyudAXqH4BC288YhxSsAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 03 02 14 33 56" title="" data-src="/static/2022-03-02-14-33-56-bb7cdc086a5e1169431b6962c6520539-284ba.png" data-srcset="/static/2022-03-02-14-33-56-bb7cdc086a5e1169431b6962c6520539-b5223.png 200w,\n/static/2022-03-02-14-33-56-bb7cdc086a5e1169431b6962c6520539-dce0f.png 400w,\n/static/2022-03-02-14-33-56-bb7cdc086a5e1169431b6962c6520539-284ba.png 653w" data-sizes="(max-width: 653px) 100vw, 653px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>图 5-51 中使用红色标注的 r 就是图片需要设置的 translateZ() 函数的理想值，使用该值可以让所有图片无缝围在一起。</p>\n<p>r 的计算比较简单：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>r</mi><mo>=</mo><mn>6</mn><mn>4</mn><mi mathvariant="normal">/</mi><mi>t</mi><mi>a</mi><mi>n</mi><mo>(</mo><mn>2</mn><msup><mn>0</mn><mo>∘</mo></msup><mo>)</mo><mo>≈</mo><mn>1</mn><mn>7</mn><mn>5</mn><mi mathvariant="normal">.</mi><mn>8</mn></mrow><annotation encoding="application/x-tex">r = 64 / tan(20 ^ \\circ) \\approx 175.8</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="mord">6</span><span class="mord">4</span><span class="mord">/</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathit">n</span><span class="mopen">(</span><span class="mord">2</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.674115em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∘</span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≈</span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="mord">1</span><span class="mord">7</span><span class="mord">5</span><span class="mord">.</span><span class="mord">8</span></span></span></span></p>\n<p>为了好看，图片左右两边可以留点间距，例如 20px，最终得到需要使用的 translateZ() 函数值为 175.8 + 20 = 195.8。于是，最终图片元素设置的 transform 属性值是：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="34625427009083863000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`transform: rotateY(calc(var(--index) * 40deg)) translateZ(195.839px);`, `34625427009083863000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotateY</span><span class="token punctuation">(</span><span class="token function">calc</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--index<span class="token punctuation">)</span> * 40deg<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token function">translateZ</span><span class="token punctuation">(</span>195.839px<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>最后，要让图片旋转起来，只要让容器每次旋转 40 度就可以了，这个可以使用 CSS 动画完成，或者使用 JavaScript 设置也是可以的。理解了旋转木马 3D 效果实现原理，其他 3D 效果基本上就都可以轻松驾驭了。</p>\n<h2 id="3d-变换与-gpu-加速"><a href="#3d-%E5%8F%98%E6%8D%A2%E4%B8%8E-gpu-%E5%8A%A0%E9%80%9F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3D 变换与 GPU 加速</h2>\n<p>3D 变换除了用来实现 3D 效果，还经常被用来开启 GPU 加速，例如实现左位移 100px，下面两种写法都是有效的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="4539622712975588400"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`transform: translate(-100px, 0);\ntransform: translate3d(-100px, 0, 0);`, `4539622712975588400`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate</span><span class="token punctuation">(</span>-100px<span class="token punctuation">,</span> 0<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate3d</span><span class="token punctuation">(</span>-100px<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>但是，使用 translate3d() 函数的变换效果性能要更高，因为使用该函数会开启 GPU 加速。然后问题就来了，很多开发者一看到“性能更好”就激动了，遇到了元素变换效果就使用 3D 变换，甚至实现其他简单的图形表现时也会添加一段无关紧要的 CSS 3D 变换代码，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="82635762012820240000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`transform: translateZ(0);`, `82635762012820240000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateZ</span><span class="token punctuation">(</span>0<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>这是一个很糟糕的做法，Web 网页是如此简单，2D 变换原本的性能就很高，根本就没有任何必要去开启 GPU 加速，没有遇到任何一个场景非得使用 3D 变换才不卡顿的。要知道，不必要的 GPU 加速会增加内存的使用，这会影响移动设备的电池寿命。因此，我直接就下结论了：单纯的 2D 变换请一定使用 2D 变换函数，没有任何理由需要使用 3D 变换函数，此时让 GPU 加速是一种糟糕的做法。</p>\n<h1 id="css-过渡"><a href="#css-%E8%BF%87%E6%B8%A1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>CSS 过渡</h1>\n<p>使用 transition 属性可以实现元素 A 状态到 B 状态的过渡效果，经常使用 :hover 伪类或者 :active 伪类触发。</p>\n<p>目前，我们已经无须给 transition 属性增加私有前缀了，无论是什么项目都不需要。IE 浏览器从 IE10 版本开始，就从未支持过 -ms- 私有前缀，完全没有任何需要添加 -ms- 私有前缀的理由。</p>\n<p>至于添加 -moz- 和 -webkit- 私有前缀也是很多年以前的事情了，目前已经无须再添加。即使有个别用户使用的是非常古老的浏览器也没有关系，因为 transition 是一个体验增强的 CSS 属性，即使浏览器不支持，也只会导致一些交互效果生硬一点，对页面功能没有任何影响。</p>\n<p>transition 是一个常用属性，相信基础的知识大家都比较了解，因此，接下来我只会介绍一些我认为读者可能不知道的关于 transition 属性的知识。</p>\n<h2 id="你可能不知道的-transition-属性知识"><a href="#%E4%BD%A0%E5%8F%AF%E8%83%BD%E4%B8%8D%E7%9F%A5%E9%81%93%E7%9A%84-transition-%E5%B1%9E%E6%80%A7%E7%9F%A5%E8%AF%86" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>你可能不知道的 transition 属性知识</h2>\n<p>transition 属性是一个缩写属性，它是 transition-duration、transition-delay、transition-property、transition-timing-function 这 4 个 CSS 属性的缩写，每一个 CSS 属性的背后都有大家所不知道的细节。</p>\n<h3 id="transition-duration-属性"><a href="#transition-duration-%E5%B1%9E%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>transition-duration 属性</h3>\n<p>transition-duration 属性表示过渡时间，它的值可以是 0，但是不能是负值，其他就没什么好说的……真的是这样吗？请看下面这段 CSS 声明：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="44626697865406760000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`transition: 1s 0.5s;`, `44626697865406760000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">transition</span><span class="token punctuation">:</span> 1s 0.5s<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>很多开发者都知道，第一个时间值 1s 表示过渡时间，第二个时间值表示延时时间（transition-delay），这两个时间值的顺序是固定的，绝对不能调换，否则含义会颠倒过来。久而久之大家容易陷入一个误区，认为 transition 属性如果设置了两个时间值，其顺序必须是固定的，其实不然！有一种场景下 transition 属性的两个时间值的顺序是可以任意调换的。什么场景呢？就是其中一个时间值是负值的时候。例如，下面两句 CSS 声明都是合法的，且含义一模一样：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="4754512799671540000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 效果一样 */\ntransition: 2s -1s;\ntransition: -1s 2s;`, `4754512799671540000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 效果一样 */</span>\n<span class="token property">transition</span><span class="token punctuation">:</span> 2s -1s<span class="token punctuation">;</span>\n<span class="token property">transition</span><span class="token punctuation">:</span> -1s 2s<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>原因就在于不起眼的“transition-duration 不能是负值”的特性，所以上面代码中的 −1s 只能是 transition-delay 的属性值，两个值就可以无序排列。</p>\n<h3 id="transition-delay-属性"><a href="#transition-delay-%E5%B1%9E%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>transition-delay 属性</h3>\n<p>transition-delay 属性用来指定延时过渡效果执行的时间，单位是 s（秒）或者 ms（毫秒），其值可以是负值，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="69910121155389080000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`transition-delay: 200ms;\ntransition-delay: 2s;\ntransition-delay: -0.5s;`, `69910121155389080000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">transition-delay</span><span class="token punctuation">:</span> 200ms<span class="token punctuation">;</span>\n<span class="token property">transition-delay</span><span class="token punctuation">:</span> 2s<span class="token punctuation">;</span>\n<span class="token property">transition-delay</span><span class="token punctuation">:</span> -0.5s<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>当 transition-delay 属性值为负值的时候，会带来一个很有意思的现象，那就是可以省略部分动画进程，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="13595753881214945000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.example {\n   transform: translateX(0);\n   transition-duration: 1s;\n   transition-delay: -0.5s;\n}\n\n.example:hover {\n   transform: translateX(100px);\n}`, `13595753881214945000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.example</span> <span class="token punctuation">{</span>\n   <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>0<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token property">transition-duration</span><span class="token punctuation">:</span> 1s<span class="token punctuation">;</span>\n   <span class="token property">transition-delay</span><span class="token punctuation">:</span> -0.5s<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.example:hover</span> <span class="token punctuation">{</span>\n   <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>100px<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>此时当鼠标经过 .example 元素的时候，元素的 transform 位移位置不是从 0 开始，而是从靠近 50px 的位置开始的，且过渡效果执行的时间不是 1s，而是 0.5s，因为最终过渡执行的时间等于动画过程时间加动画延时时间，也就是 <code class="language-text">1s + (−0.5s) = 0.5s</code>。</p>\n<p>transition-delay 属性有一个隐蔽的但却很实在的作用，那就是可以提高用户的交互体验。例如，使用 :hover 伪类实现的浮层是一种很常见的交互效果，传统的效果都是鼠标指针一旦经过元素，浮层立即出现。这其实是有问题的，因为鼠标非常容易误触该交互效果。优秀的交互体验是会增加一定的延时判断的，也就是如果鼠标指针快速经过元素，会被认为是不小心经过，浮层就不会出现。</p>\n<p>想要实现这个交互效果，目前只能使用 transition-delay 属性，请看下面这个具体的案例：</p>\n<html><head></head><body><div class="gatsby-code-button-container" data-toaster-id="89139051465238680000" data-toaster-class="gatsby-code-button-toaster" data-toaster-text-class="gatsby-code-button-toaster-text" data-toaster-text="复制成功" data-toaster-duration="3500" onclick="copyToClipboard(`<a href class=&quot;target&quot;>显示图片</a> <img data-src=&quot;1.jpg&quot; />`, `89139051465238680000`)">\n              <div class="gatsby-code-button" title="html">\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div></body></html>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>target<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>显示图片<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1.jpg<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>当鼠标指针经过“显示图片”这个链接的时候，浮层图片在鼠标指针停留在元素上一定的时间后才会显示，使用的 CSS 代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="52348444462563280000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.target + img {\n   transition-delay: 0.2s;\n   visibility: hidden;\n}\n\n.target:hover + img {\n   visibility: visible;\n}`, `52348444462563280000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.target + img</span> <span class="token punctuation">{</span>\n   <span class="token property">transition-delay</span><span class="token punctuation">:</span> 0.2s<span class="token punctuation">;</span>\n   <span class="token property">visibility</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.target:hover + img</span> <span class="token punctuation">{</span>\n   <span class="token property">visibility</span><span class="token punctuation">:</span> visible<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>此时鼠标指针悬停在 <code class="language-text">显示图片</code> 上 200ms 之后浮层图片才会显示，效果如图 5-52 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-03-03-15-29-22-ac150c826ba43146fc8f6cc92b188e42-66417.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 441px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 72.56235827664399%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsSAAALEgHS3X78AAADcElEQVQ4y62Ta0zbVRiHm0F0cTG2UC6lt3+bjLmJyfhiom5LjB80qItDTdRs8bKNiYuMjOEHXUxWndAGMhZx0SDoZJNYRwU67KjAuI2bTq4rA9aWi20ZMAbIACnt459CTEbwmyd5c07ec35Pfu8555UEg0FWhn/xHotzd5n/a5rFe9MEl2aZm5mgq6uXxtZuevoGxdxMaG9udprZmWnx7F2WlxZD+hXOSkgCAX8o0Ws5xoU0DfnvP471VALu4p24ihMZPBdPW1Eq9pw36MyN50ZeInmv7CBrbwInk5TYSvJD+sDy8iowuAYcKHuX8hNbKMlQUmOIw/mNmltfqxj4QsUfp5WYU2IpTVNw6Fk5T2llpO+KYd/2cPLPZIf0y8v++4FO62HsJ2VUntLRZNTS/5WOvrMCPUaBrmwBS5qat5+MRR8TycPSCNSKaOSbw8k1mVaB/nUOR64cptkgpdogUGvQcF2E3soXGBChDoMW+zE1P72sovE1DW8lxCCXR7FJsomsz42rb7ARsMMko/OMns48LT0iqP87AU+FDo84N2dq+D5JxQ8vqCh+TklyvILo8DBO/xdwpeS2bBkdX+pxFIjOftTR/akWx8cCo3k6OlK12JLV1L2uoeZVDcan1WgeCsOQvXqH/vV3eLPskFiqlFZR3HtR4MZHAu0xamzbRFdvqkLuCvYoqd2n5uKLKg7siSNCFkau0bj2KOscdpoPUvXJI7QX6ulOE0veoqFIquTAzjje2a7gGWUUu4Uo3kuM5aVHo9krAuM1D2AymjYG9v6cQtO5SLo/3Erfg3qqY7VUHhEwH9FRsENNujqOJ/QKnt+qZJdWwe7HlCikm8nJytkYOFi1n5bPwuiJjMahisScLMWcKmWyUE5LegS/fRDB1aOy0NqaIqXioJzzSRI6zmetfWz//Z1y21FEv+Uow2czmbJl0FCYTsuFdGbbTuC0HGe0PIMxMXzlx/FYMhi9lMnNb1P587rt304JBAJI+J+HxOv1Mb+wwMTkBP6lv8Wmn8HlcjE0NITT6WJszMf4+G18Xi8+nw+3282dyUkxN47X4wmduTM1hUfkuIeGkdRebWB4ZJTW9t+Zn19gaHiESpudy79UUWIupa6+ifrGZixll7nW3EZpmZXq2noar7VwxV7DJUsFdQ1N/FpTh1XU/ANuEnjd33+l7wAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 03 03 15 29 22" title="" data-src="/static/2022-03-03-15-29-22-ac150c826ba43146fc8f6cc92b188e42-66417.png" data-srcset="/static/2022-03-03-15-29-22-ac150c826ba43146fc8f6cc92b188e42-d16fa.png 200w,\n/static/2022-03-03-15-29-22-ac150c826ba43146fc8f6cc92b188e42-9fd5a.png 400w,\n/static/2022-03-03-15-29-22-ac150c826ba43146fc8f6cc92b188e42-66417.png 441w" data-sizes="(max-width: 441px) 100vw, 441px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/hnvu1d?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<h3 id="transition-property-属性"><a href="#transition-property-%E5%B1%9E%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>transition-property 属性</h3>\n<p>transition-property 属性用来设置应用过渡效果的 CSS 属性，其初始值是 all，表示默认所有 CSS 属性都应用过渡效果。</p>\n<p>不知道“初始值是 all”有没有让你意识到什么。我已经记不清有多少次见到过下面的 CSS 代码了：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="2074177980191560400"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`transition: all 0.2s;`, `2074177980191560400`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">transition</span><span class="token punctuation">:</span> all 0.2s<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>上面这段 CSS 代码的语法和功能都没有问题，表示所有 CSS 属性都执行 0.2s 的过渡效果，那问题在哪里呢？问题就在于其中的 all 完全是多余的，直接写成下面的 CSS 代码就可以了：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="24714174736862106000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`transition: 0.2s;`, `24714174736862106000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">transition</span><span class="token punctuation">:</span> 0.2s<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>也就是我们只需要指定过渡时间就可以了。</p>\n<p>不过不是所有 CSS 属性都支持过渡效果，例如 display 属性就不支持过渡效果，而且，不支持也就罢了，有时候还会“搞破坏”。例如设置了 transition 过渡效果的元素应用 display: none 时，过渡效果会被瞬间中断，导致 transitionend 事件不会被触发。</p>\n<p>因此，如果希望元素有过渡效果，同时可以隐藏，请使用 visibility 属性，visibility 属性在 CSS Transition 过渡效果中很实用，后面会专门对此进行介绍。</p>\n<p>transition-property 支持任意 <code class="language-text">&lt;custom-ident&gt;</code> 数据类型值，不需要是合法的 CSS 属性名称，例如下面语句也是合法的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="24267923428484338000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 合法 */\ntransition-property: 笑脸-©;`, `24267923428484338000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 合法 */</span>\n<span class="token property">transition-property</span><span class="token punctuation">:</span> 笑脸-©<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>但是该属性不支持以数字或引号开头的数据类型，关于 <code class="language-text">&lt;custom-ident&gt;</code> 数据类型的深入介绍参见之后章节。</p>\n<p>最后，我们可以同时设置多个参与过渡效果的 CSS 属性，使用逗号分隔，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="40238703396147814000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`transition-property: color, background-color, opacity, transform;`, `40238703396147814000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">transition-property</span><span class="token punctuation">:</span> color<span class="token punctuation">,</span> background-color<span class="token punctuation">,</span> opacity<span class="token punctuation">,</span> transform<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>下面讲一下属性值列表的长度不同时的样式计算规则。用一句话概括就是“有缺则补，多之则除”。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="37771275093492230000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`div {\n   transition-property: opacity, left, top;\n   transition-duration: 3s, 5s;\n}\n\ndiv {\n   transition-property: opacity, left, top, height;\n   transition-duration: 3s, 5s;\n}`, `37771275093492230000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">div</span> <span class="token punctuation">{</span>\n   <span class="token property">transition-property</span><span class="token punctuation">:</span> opacity<span class="token punctuation">,</span> left<span class="token punctuation">,</span> top<span class="token punctuation">;</span>\n   <span class="token property">transition-duration</span><span class="token punctuation">:</span> 3s<span class="token punctuation">,</span> 5s<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">div</span> <span class="token punctuation">{</span>\n   <span class="token property">transition-property</span><span class="token punctuation">:</span> opacity<span class="token punctuation">,</span> left<span class="token punctuation">,</span> top<span class="token punctuation">,</span> height<span class="token punctuation">;</span>\n   <span class="token property">transition-duration</span><span class="token punctuation">:</span> 3s<span class="token punctuation">,</span> 5s<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>等同于：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="33260707279786893000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`div {\n   transition-property: opacity, left, top;\n   transition-duration: 3s, 5s, 3s;\n}\n\ndiv {\n   transition-property: opacity, left, top, height;\n   transition-duration: 3s, 5s, 3s, 5s;\n}`, `33260707279786893000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">div</span> <span class="token punctuation">{</span>\n   <span class="token property">transition-property</span><span class="token punctuation">:</span> opacity<span class="token punctuation">,</span> left<span class="token punctuation">,</span> top<span class="token punctuation">;</span>\n   <span class="token property">transition-duration</span><span class="token punctuation">:</span> 3s<span class="token punctuation">,</span> 5s<span class="token punctuation">,</span> 3s<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">div</span> <span class="token punctuation">{</span>\n   <span class="token property">transition-property</span><span class="token punctuation">:</span> opacity<span class="token punctuation">,</span> left<span class="token punctuation">,</span> top<span class="token punctuation">,</span> height<span class="token punctuation">;</span>\n   <span class="token property">transition-duration</span><span class="token punctuation">:</span> 3s<span class="token punctuation">,</span> 5s<span class="token punctuation">,</span> 3s<span class="token punctuation">,</span> 5s<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>如果 transition-property 的属性值列表长度过短，则其他过渡属性多余的列表值会被忽略。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="53720646222727720000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`div {\n   transition-property: opacity, left;\n   transition-duration: 3s, 5s, 2s, 1s;\n}`, `53720646222727720000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">div</span> <span class="token punctuation">{</span>\n   <span class="token property">transition-property</span><span class="token punctuation">:</span> opacity<span class="token punctuation">,</span> left<span class="token punctuation">;</span>\n   <span class="token property">transition-duration</span><span class="token punctuation">:</span> 3s<span class="token punctuation">,</span> 5s<span class="token punctuation">,</span> 2s<span class="token punctuation">,</span> 1s<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>等同于：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="79163898884899950000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`div {\n   transition-property: opacity, left;\n   transition-duration: 3s, 5s;\n}`, `79163898884899950000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">div</span> <span class="token punctuation">{</span>\n   <span class="token property">transition-property</span><span class="token punctuation">:</span> opacity<span class="token punctuation">,</span> left<span class="token punctuation">;</span>\n   <span class="token property">transition-duration</span><span class="token punctuation">:</span> 3s<span class="token punctuation">,</span> 5s<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>子属性支持逗号分隔，自然 transition 缩写属性也支持逗号分隔多个独立的过渡效果设置。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="67686218716575560000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.example {\n   transition: opacity 0.2s, transform 0.5s;\n}`, `67686218716575560000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.example</span> <span class="token punctuation">{</span>\n   <span class="token property">transition</span><span class="token punctuation">:</span> opacity 0.2s<span class="token punctuation">,</span> transform 0.5s<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<h3 id="transition-timing-function-属性"><a href="#transition-timing-function-%E5%B1%9E%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>transition-timing-function 属性</h3>\n<p>transition-timing-function 属性通过设置过渡时间函数来影响过渡效果的过渡速率，transition-timing-function 属性和 animation-timing-function 支持的属性值类型一致，总共分为三大类。</p>\n<ul>\n<li>线性运动类型：使用 linear 表示。</li>\n<li>三次贝塞尔时间函数类型：ease、ease-in、ease-out、ease-in-out 等关键字和 cubic-bezier() 函数。</li>\n<li>步进时间函数类型：step-start、step-start 等关键字和 steps() 函数。</li>\n</ul>\n<p>transition-timing-function 属性平常用得很少，因为默认值 ease 就可以应付几乎所有场景了。</p>\n<p>例如我写了 10 多年 CSS 代码，在 CSS Transition 过渡效果中从未使用过线性运动类型和步进时间函数类型（对天发誓一次都没有用过），不过我倒是在 CSS 动画效果中经常用到它们，因此这部分内容会在 5.4 节深入介绍。至于贝塞尔时间函数类型，则偶尔会在 CSS Transition 过渡效果中用到，因此，可以在这里详细介绍一下。</p>\n<h2 id="了解三次贝塞尔时间函数类型"><a href="#%E4%BA%86%E8%A7%A3%E4%B8%89%E6%AC%A1%E8%B4%9D%E5%A1%9E%E5%B0%94%E6%97%B6%E9%97%B4%E5%87%BD%E6%95%B0%E7%B1%BB%E5%9E%8B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>了解三次贝塞尔时间函数类型</h2>\n<p>“贝塞尔”源于著名的法国工程师 Pierre Bézier 的名字，Pierre Bézier 最杰出的贡献是发明了贝塞尔曲线，奠定了计算机矢量图形学的基础，因为有了贝塞尔曲线之后，无论是直线或曲线都能在数学上予以描述。</p>\n<p>三次贝塞尔时间函数类型写作 <code class="language-text">&lt;cubic-bezier-timing-function&gt;</code>，其正式语法如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="42314225988330740000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<cubic-bezier-timing-function> = ease | ease-in | ease-out | ease-in-out | cubic-bezier(<number>, <number>, <number>, <number>)`, `42314225988330740000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css">&lt;cubic-bezier-timing-function> = ease | ease-in | ease-out | ease-in-out | <span class="token function">cubic-bezier</span><span class="token punctuation">(</span>&lt;number><span class="token punctuation">,</span> &lt;number><span class="token punctuation">,</span> &lt;number><span class="token punctuation">,</span> &lt;number><span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>其中，ease、ease-in、ease-out、ease-in-out 这几个关键字是计算机领域通用的运动函数关键字，其贝塞尔函数值是固定的，在其他图形语言中也是适用的，具体分析如下。</p>\n<ul>\n<li>\n<p>ease：等同于 cubic-bezier(0.25, 0.1, 0.25, 1.0)，是 transition-timing-function 属性的默认值，表示过渡的时候先加速再减速。该时间函数曲线如图 5-53 所示，横坐标是时间，纵坐标是进程，曲线越陡速率越快，曲线越缓速率越慢。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-03-03-16-13-36-6ab767735806636e91329bc072e4935d-1857e.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 448px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 83.92857142857143%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAIAAABSJhvpAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABv0lEQVQ4y51Sa0/CMBTl//8NozEmM8IY88Ujg4kiMSQMmZion4TSbcDeK9vwuAaismniydbc297Tc3rb0maLNE3jJEGgr9yDyRtz3aVtr1arKIqWy6Wu6+12u9frua67o5R2UZIktm2zMDQd99W0PMdBCqamadVqtdFovGTwfT+f7DhOGIZRGMUMm4SbdNPpdBRF8TwPBXw1ydzlK/sZ4A2pqqrdbhdLmCGEgIxgvV7nk8FhjAVBgHQ8HrdaLc60LAviLLMTx3GhbTBRAQuiKIKG1DRNMHF4xL8pc2OI4XY4HCKglMIOtgsy/EGGN1yMLMso5W6hGW6ByULboCHo9/uDwQCCuGSutgP2yldGHb/YmlSbE4LSr5qFynhbGNEYLI80raUquErf84M95JyZk2HSoPRUKtObCTsZ+SkL9viFZMyey+fqbdebLdzHdz8KIP4DP8+cZuAJxNHtz+alaVKAXfG3hv0DpemM4IMfapjYlbcUDmczQuZzahj4MWIVGV74dEoWi4VhWJSaJbEqX9cVlN7dP4CsPz3Xm0pbvb24vD6rSFLtoiJfCeXKZV1pNpVTQTw8Ek4E4Vgon5WlDyJRwvVhonrbAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 03 03 16 13 36" title="" data-src="/static/2022-03-03-16-13-36-6ab767735806636e91329bc072e4935d-1857e.png" data-srcset="/static/2022-03-03-16-13-36-6ab767735806636e91329bc072e4935d-15195.png 200w,\n/static/2022-03-03-16-13-36-6ab767735806636e91329bc072e4935d-82e6d.png 400w,\n/static/2022-03-03-16-13-36-6ab767735806636e91329bc072e4935d-1857e.png 448w" data-sizes="(max-width: 448px) 100vw, 448px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n<li>\n<p>ease-in：等同于 cubic-bezier(0.42, 0, 1.0, 1.0)，表示过渡速度刚开始慢，然后过渡速度逐渐加快。单词 in 表示进入的意思，非常符合先慢后快，例如剑插入剑鞘，线穿进针里，都是先慢慢瞄准，再快速进入的。该时间函数曲线如图 5-54 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-03-03-16-18-42-460ea4451f59caad135ce514fabefd60-7ace1.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 483px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 76.39751552795032%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABTElEQVQoz41Qf0/CMBTk+38ZEv+AZTMoIGUVMIvBsSEmrsA0bBNRxmQ/PWwGNVnFW9I1r3fv7r1aUSLP8zRNCzmSJFm4L4nAqYniMAx3Vdhut+g7Go36us6ZFWLwvqoQx/FqtWo0GriIWc6LUUSiVqvlOI5oWxE7+g0+iGEYlFIQ0EvqLIq5J6Z1XVdV1f1+jyLOf8UGdfMDRVHW6zVWjcqZmbknTghwapqGUbMs42uXOqM3fPAMEr9gSZZl4enYUeqMZ8/z+JLeNxt4WqaJ+nERfzlD7Ps+qHA7pGVMVJ4RY2bGWL1eV5rNpf/6eT/fXTxERRKFu6NYGhtA4yAIcMmKPH4Ls8VHzruWKA5fWYD49CABVn3KVvL4v9bu9MzJ47PDprMn5BuPTXs6my9d2572CL3uEqLftok+GAyHd0af0Eut3bkhOh1cdfVvymlbGaVQRUwAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 03 03 16 18 42" title="" data-src="/static/2022-03-03-16-18-42-460ea4451f59caad135ce514fabefd60-7ace1.png" data-srcset="/static/2022-03-03-16-18-42-460ea4451f59caad135ce514fabefd60-7e8e5.png 200w,\n/static/2022-03-03-16-18-42-460ea4451f59caad135ce514fabefd60-0f3db.png 400w,\n/static/2022-03-03-16-18-42-460ea4451f59caad135ce514fabefd60-7ace1.png 483w" data-sizes="(max-width: 483px) 100vw, 483px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n<li>\n<p>ease-out：等同于 cubic-bezier(0, 0, 0.58, 1.0)，表示过渡刚开始速度快，然后速度逐渐变慢。单词 out 表示移出的意思，非常符合先快后慢，例如拔剑是先快后慢。该时间函数曲线如图 5-55 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-03-03-16-19-34-d25d89e23d0100cf9f92a00d089df640-28759.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 500px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABc0lEQVQoz41SaW+CQBT0//+LfmzStJVqLJdS75K2pvaiar+QBnBVLkXktCNEQi90Asvj7U5m3ttX2uYQhmEWR3GMtSprdyqJvc3DYNBoNEzTRDJOtoBSnuwkWO/hrFaO55HZnOc4URRlWfY8L3/+GxkE13U3CRBHUTQnhKFpRVGQATNv7V9yyiSE1Go1WF3BguMgf4CcAiKWZTEMo+v6crlMmcgHQXCAnNpmWVZV1UwTjg6QcQJHEfT7fUmS0v6lzHQtsg0dlDoajbrd7q7bCTNDERkbtmWjPTRNG4aR+ndzKLLt+761XvF1fjKZhFGY3dlRysCjcNu+aYEJ/+tfQBU/lfejtsVXPxHNTxLEoe/5f6JIOT+3x6CkaVPbXuJBVVEYuUmtGBJoo22z+cIyMS/2QjcME7/zhb6L8Nq2XSpT1eHT65v0rmhTtLoutIfPL+Pxh3g/aLW7VOWaYXiOFSoVrtfrcELzkro6PSufX1DNTu8L9G1XAoeUOgoAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 03 03 16 19 34" title="" data-src="/static/2022-03-03-16-19-34-d25d89e23d0100cf9f92a00d089df640-28759.png" data-srcset="/static/2022-03-03-16-19-34-d25d89e23d0100cf9f92a00d089df640-6ac48.png 200w,\n/static/2022-03-03-16-19-34-d25d89e23d0100cf9f92a00d089df640-4b8bf.png 400w,\n/static/2022-03-03-16-19-34-d25d89e23d0100cf9f92a00d089df640-28759.png 500w" data-sizes="(max-width: 500px) 100vw, 500px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n<li>\n<p>ease-in-out：等同于 cubic-bezier(0.42, 0, 0.58, 1.0)，表示过渡刚开始速度慢，然后速度逐渐加快，最后再变慢。该时间函数曲线如图 5-56 所示。ease-in-out 是一个对称曲线，因此非常适合用在钟摆运动中。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-03-03-16-20-28-2bc3e878a98139817e34e1adbee3fdb6-8163f.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 537px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 69.45996275605214%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABT0lEQVQoz42Si2qDMBSGff83kmy4KvVSpWvHhsiQWsvGYDpdovUe99dUcWO0/VFIDuc7txypn4lz3rYtH9R2HSzqR2Qc3vu6etxsVFUty1K4CX9pDoNkjBUzZXmOKNvt1jCMKIq6IeKkv3CWZeUowEjieZ6u61VV1XV9HRY5j8cjgDiOCSEiIoxX4KlswHBVFCUMQ9hxvRXO8xwF+76PVmEX5K0wikSpsizjiuKn+V2C4Qdv5GmaBjkxKpF2GuElOE1TSik8gAHmHRdV3ApDrutiTnjhsqmLsdv/y57WBcJLmqZ5R8hnEievb7nsFW0157EwfNgwoV+ZxczO4eq2p1V/UVIcf6EZBD9hI4+BDXiTpGly+tHNN6UMH2PZeKYSIUoQhC+uR1mGg2U7u2C/2x98f7d5erbt9ULTrZVj6I7jrFe2pWjL+wdNWxoLdfkDOFchEq0BVhgAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 03 03 16 20 28" title="" data-src="/static/2022-03-03-16-20-28-2bc3e878a98139817e34e1adbee3fdb6-8163f.png" data-srcset="/static/2022-03-03-16-20-28-2bc3e878a98139817e34e1adbee3fdb6-e0dce.png 200w,\n/static/2022-03-03-16-20-28-2bc3e878a98139817e34e1adbee3fdb6-184d7.png 400w,\n/static/2022-03-03-16-20-28-2bc3e878a98139817e34e1adbee3fdb6-8163f.png 537w" data-sizes="(max-width: 537px) 100vw, 537px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n</ul>\n<h3 id="cubic-bezier-函数"><a href="#cubic-bezier-%E5%87%BD%E6%95%B0" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>cubic-bezier() 函数</h3>\n<p>贝塞尔曲线种类很多，包括线性贝塞尔曲线、二次方贝塞尔曲线、三次方贝塞尔曲线、四次方贝塞尔曲线、五次方贝塞尔曲线等。cubic-bezier() 函数是三次方贝塞尔曲线函数。所有三次方贝塞尔曲线都是由起点、终点和两个控制点组成，在 SVG 或者 Canvas 中，三次方贝塞尔曲线的所有控制点都是不固定的。但是在 CSS 的 cubic-bezier() 函数中，起点和终点的坐标是固定的，分别是 (0, 0) 和 (1, 1)，因此，cubic-bezier() 函数支持的参数值只有 4 个，代表了两个控制点的坐标，语法如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="3765896344599828500"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`cubic-bezier(x1, y1, x2, y2);`, `3765896344599828500`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token function">cubic-bezier</span><span class="token punctuation">(</span>x1<span class="token punctuation">,</span> y1<span class="token punctuation">,</span> x2<span class="token punctuation">,</span> y2<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>其中坐标 (x1, y1) 表示控制点 1 的坐标，坐标 (x2, y2) 表示控制点 2 的坐标。</p>\n<p>例如 ease 关键字对应的贝塞尔曲线函数 cubic-bezier(0.25, 0.1, 0.25, 1.0) 的曲线图就是根据 (0.25, 0.1) 和 (0.25, 1.0) 这两个控制点坐标生成的，如图 5-57 所示。</p>\n<p>有一个网站（cubic-bezier）专门用来调试 CSS 的贝塞尔曲线函数值，图 5-57 所示的曲线图就是使用这个网站生成的。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-03-03-16-30-38-05a53b80cdb4da3cd52fb9fc9b2f1520-8682f.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 556px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 67.62589928057554%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABlklEQVQoz42S+0/CMBDH+f//I3/wkel0AntJphAC2gFOwOlgfazb2vodiw+iAS/X5nK9T+96vY6BaN3sjBnLMv2+GQxMFJn53Ewme6dQKU1dm0/pfFkKXs7es03vacbSVOR5miR3g4HneevXVzMe6zA0cWwo/brxG67rmgnBpExzKqtqMp3edruEkMVikef5Ll6bfdmHGROcG6VIHLuuW5Yl57woivpHqYdgKWWWZY7jgISBnIBhH4GVUpRS7EEQJElCdwISyY/DyIzQNH3zXI/RnCKnEHhFA6PJh2GQqDl6uJ/Ej1IpUZatcinLA29um8gZWy5fHMsWZCVncfGyLFYrqEjTarM5VrY2ttsfhcOiNxX2pfB9EYZQPhqV+N6/4fb3CMFgZb1e9fxcNxfpZm9Va/UL07v1CaOw9dpkWTOD/5YO5qL9XlxfaY0Obbd5I5QyzjGtm+2WY/I4h1KEMo5zeOHsDIdjMpszymaEuF7geuHZhXVp31g3jusHMC4su+/5J6fn1tX1tXPr+2FwFzlONxqOPwBExh/GtYqV3AAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 03 03 16 30 38" title="" data-src="/static/2022-03-03-16-30-38-05a53b80cdb4da3cd52fb9fc9b2f1520-8682f.png" data-srcset="/static/2022-03-03-16-30-38-05a53b80cdb4da3cd52fb9fc9b2f1520-7747b.png 200w,\n/static/2022-03-03-16-30-38-05a53b80cdb4da3cd52fb9fc9b2f1520-f30a5.png 400w,\n/static/2022-03-03-16-30-38-05a53b80cdb4da3cd52fb9fc9b2f1520-8682f.png 556w" data-sizes="(max-width: 556px) 100vw, 556px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>在初期的时候，cubic-bezier() 函数值的取值范围是 0 ～ 1，如果超过 1 会被认为是不合法的，不过现在浏览器早已放开了这个限制，因此，我们可以使用 cubic-bezier() 函数实现回弹效果。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="86870416895423580000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.target {\n   transition: 1s cubic-bezier(0.16, 0.67, 0.28, 1.46);\n}\n\n.target.run {\n   transform: translateX(200px);\n}`, `86870416895423580000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.target</span> <span class="token punctuation">{</span>\n   <span class="token property">transition</span><span class="token punctuation">:</span> 1s <span class="token function">cubic-bezier</span><span class="token punctuation">(</span>0.16<span class="token punctuation">,</span> 0.67<span class="token punctuation">,</span> 0.28<span class="token punctuation">,</span> 1.46<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.target.run</span> <span class="token punctuation">{</span>\n   <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>200px<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>.target 元素的运动轨迹如图 5-58 所示，元素会运动到超出 200px 的位置，然后回到 200px 的位置，形成回弹效果。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-03-03-16-33-28-ea743ce7136bf50babd83cb976e93219-715c5.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 658px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 56.99088145896657%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABL0lEQVQoz42RuU7DQBCG/QrQ8Ez08ABI1KkjngKJAhqoIDQIahqEoCMREjQkXjvEweeydhJfi7MXXid2HCQM/zSrmf+bQ6uIUjwPISZxGJGvuFAURRhjx3EghNLAuViXUqKywKyZ37qanTwyISghtJT4RSXMJEz0T3OzjXZOq0zZmTfCCxMmWXdMgFySGoG/fxke3i8b5Txh9Y4/4foWcwCtrQO0e7aCeePkpa+AeUbnfY/a0wWTXL/A7WN8+1a/SBF/qrDGnZ650U46PZmh7B8wkSZ8p6K9i/TmlQUJT7K1tXmDiPyk6PzJUFrh0YO8hbCqmL8aJxen8QkmzyZHcZVZTdb0oeN5EKE0xaZt+0HgOnl4eU7T3wcq+HBcGE4t1wW5dTjqD1QVaCNjDID+De/1dAyxYZ6HAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 03 03 16 33 28" title="" data-src="/static/2022-03-03-16-33-28-ea743ce7136bf50babd83cb976e93219-715c5.png" data-srcset="/static/2022-03-03-16-33-28-ea743ce7136bf50babd83cb976e93219-c456f.png 200w,\n/static/2022-03-03-16-33-28-ea743ce7136bf50babd83cb976e93219-60786.png 400w,\n/static/2022-03-03-16-33-28-ea743ce7136bf50babd83cb976e93219-715c5.png 658w" data-sizes="(max-width: 658px) 100vw, 658px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>最后，附上其他一些非 CSS 标准，但也属于常用缓动类型的贝塞尔曲线值，为了方便调用，这里使用了 CSS 自定义属性表示，具体如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="10248384050650982000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`:root {\n   --ease-in-quad: cubic-bezier(0.55, 0.085, 0.68, 0.53);\n   --ease-in-cubic: cubic-bezier(0.55, 0.055, 0.675, 0.19);\n   --ease-in-quart: cubic-bezier(0.895, 0.03, 0.685, 0.22);\n   --ease-in-quint: cubic-bezier(0.755, 0.05, 0.855, 0.06);\n   --ease-in-expo: cubic-bezier(0.95, 0.05, 0.795, 0.035);\n   --ease-in-circ: cubic-bezier(0.6, 0.04, 0.98, 0.335);\n   --ease-out-quad: cubic-bezier(0.25, 0.46, 0.45, 0.94);\n   --ease-out-cubic: cubic-bezier(0.215, 0.61, 0.355, 1);\n   --ease-out-quart: cubic-bezier(0.165, 0.84, 0.44, 1);\n   --ease-out-quint: cubic-bezier(0.23, 1, 0.32, 1);\n   --ease-out-expo: cubic-bezier(0.19, 1, 0.22, 1);\n   --ease-out-circ: cubic-bezier(0.075, 0.82, 0.165, 1);\n   --ease-in-out-quad: cubic-bezier(0.455, 0.03, 0.515, 0.955);\n   --ease-in-out-cubic: cubic-bezier(0.645, 0.045, 0.355, 1);\n   --ease-in-out-quart: cubic-bezier(0.77, 0, 0.175, 1);\n   --ease-in-out-quint: cubic-bezier(0.86, 0, 0.07, 1);\n   --ease-in-out-expo: cubic-bezier(1, 0, 0, 1);\n   --ease-in-out-circ: cubic-bezier(0.785, 0.135, 0.15, 0.86);\n}`, `10248384050650982000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">:root</span> <span class="token punctuation">{</span>\n   <span class="token property">--ease-in-quad</span><span class="token punctuation">:</span> <span class="token function">cubic-bezier</span><span class="token punctuation">(</span>0.55<span class="token punctuation">,</span> 0.085<span class="token punctuation">,</span> 0.68<span class="token punctuation">,</span> 0.53<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token property">--ease-in-cubic</span><span class="token punctuation">:</span> <span class="token function">cubic-bezier</span><span class="token punctuation">(</span>0.55<span class="token punctuation">,</span> 0.055<span class="token punctuation">,</span> 0.675<span class="token punctuation">,</span> 0.19<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token property">--ease-in-quart</span><span class="token punctuation">:</span> <span class="token function">cubic-bezier</span><span class="token punctuation">(</span>0.895<span class="token punctuation">,</span> 0.03<span class="token punctuation">,</span> 0.685<span class="token punctuation">,</span> 0.22<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token property">--ease-in-quint</span><span class="token punctuation">:</span> <span class="token function">cubic-bezier</span><span class="token punctuation">(</span>0.755<span class="token punctuation">,</span> 0.05<span class="token punctuation">,</span> 0.855<span class="token punctuation">,</span> 0.06<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token property">--ease-in-expo</span><span class="token punctuation">:</span> <span class="token function">cubic-bezier</span><span class="token punctuation">(</span>0.95<span class="token punctuation">,</span> 0.05<span class="token punctuation">,</span> 0.795<span class="token punctuation">,</span> 0.035<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token property">--ease-in-circ</span><span class="token punctuation">:</span> <span class="token function">cubic-bezier</span><span class="token punctuation">(</span>0.6<span class="token punctuation">,</span> 0.04<span class="token punctuation">,</span> 0.98<span class="token punctuation">,</span> 0.335<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token property">--ease-out-quad</span><span class="token punctuation">:</span> <span class="token function">cubic-bezier</span><span class="token punctuation">(</span>0.25<span class="token punctuation">,</span> 0.46<span class="token punctuation">,</span> 0.45<span class="token punctuation">,</span> 0.94<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token property">--ease-out-cubic</span><span class="token punctuation">:</span> <span class="token function">cubic-bezier</span><span class="token punctuation">(</span>0.215<span class="token punctuation">,</span> 0.61<span class="token punctuation">,</span> 0.355<span class="token punctuation">,</span> 1<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token property">--ease-out-quart</span><span class="token punctuation">:</span> <span class="token function">cubic-bezier</span><span class="token punctuation">(</span>0.165<span class="token punctuation">,</span> 0.84<span class="token punctuation">,</span> 0.44<span class="token punctuation">,</span> 1<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token property">--ease-out-quint</span><span class="token punctuation">:</span> <span class="token function">cubic-bezier</span><span class="token punctuation">(</span>0.23<span class="token punctuation">,</span> 1<span class="token punctuation">,</span> 0.32<span class="token punctuation">,</span> 1<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token property">--ease-out-expo</span><span class="token punctuation">:</span> <span class="token function">cubic-bezier</span><span class="token punctuation">(</span>0.19<span class="token punctuation">,</span> 1<span class="token punctuation">,</span> 0.22<span class="token punctuation">,</span> 1<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token property">--ease-out-circ</span><span class="token punctuation">:</span> <span class="token function">cubic-bezier</span><span class="token punctuation">(</span>0.075<span class="token punctuation">,</span> 0.82<span class="token punctuation">,</span> 0.165<span class="token punctuation">,</span> 1<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token property">--ease-in-out-quad</span><span class="token punctuation">:</span> <span class="token function">cubic-bezier</span><span class="token punctuation">(</span>0.455<span class="token punctuation">,</span> 0.03<span class="token punctuation">,</span> 0.515<span class="token punctuation">,</span> 0.955<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token property">--ease-in-out-cubic</span><span class="token punctuation">:</span> <span class="token function">cubic-bezier</span><span class="token punctuation">(</span>0.645<span class="token punctuation">,</span> 0.045<span class="token punctuation">,</span> 0.355<span class="token punctuation">,</span> 1<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token property">--ease-in-out-quart</span><span class="token punctuation">:</span> <span class="token function">cubic-bezier</span><span class="token punctuation">(</span>0.77<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.175<span class="token punctuation">,</span> 1<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token property">--ease-in-out-quint</span><span class="token punctuation">:</span> <span class="token function">cubic-bezier</span><span class="token punctuation">(</span>0.86<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.07<span class="token punctuation">,</span> 1<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token property">--ease-in-out-expo</span><span class="token punctuation">:</span> <span class="token function">cubic-bezier</span><span class="token punctuation">(</span>1<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 1<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token property">--ease-in-out-circ</span><span class="token punctuation">:</span> <span class="token function">cubic-bezier</span><span class="token punctuation">(</span>0.785<span class="token punctuation">,</span> 0.135<span class="token punctuation">,</span> 0.15<span class="token punctuation">,</span> 0.86<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="transition-与-visibility-属性的应用指南"><a href="#transition-%E4%B8%8E-visibility-%E5%B1%9E%E6%80%A7%E7%9A%84%E5%BA%94%E7%94%A8%E6%8C%87%E5%8D%97" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>transition 与 visibility 属性的应用指南</h2>\n<p>如果希望元素在出现和隐藏时有淡入淡出或者移入移出效果，则建议使用 visibility 属性对元素进行隐藏与控制。原因很简单，因为 visibility 属性是支持 CSS 过渡效果和 CSS 动画效果的。</p>\n<p>这里举一个移动端经常使用的底部 Popup 浮层的案例，实现遮罩层淡入淡出，底部内容移入移出的效果，HTML 代码结构如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="39625956821271530000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<div class=&quot;popup&quot;>\n   <div class=&quot;content&quot;>底部浮层</div>\n</div>`, `39625956821271530000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>popup<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>content<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>底部浮层<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>淡入淡出效果是使用 opacity 属性实现的，但是 opacity: 0 仅仅是在视觉上让浮层元素不可见，浮层元素依然覆盖在页面上，影响正常的交互，因此，需要使用其他方法来真正隐藏浮层元素。由于 display: none 不支持过渡效果，因此只能使用 visibility: hidden 声明来实现，核心 CSS 代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="38780220299105395000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.popup {\n   position: fixed;\n   left: 0;\n   right: 0;\n   bottom: 0;\n   top: 0;\n   background: rgba(0, 0, 0, 0.5);\n   overflow: hidden;\n   /* 显隐控制关键 css 代码 */\n   opacity: 0;\n   visibility: hidden;\n   transition: opacity 0.2s, visibility 0.2s;\n}\n\n.content {\n   /* 底部浮层移入移出控制关键 css 代码 */\n   transform: translateY(100%);\n   transition: transform 0.2s;\n}\n\n/* 通过切换 “active” 类名实现交互效果 */\n.popup.active {\n   transition-property: opacity;\n   opacity: 1;\n   visibility: visible;\n}\n\n.active > .content {\n   transform: translateY(0%);\n}`, `38780220299105395000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.popup</span> <span class="token punctuation">{</span>\n   <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>\n   <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n   <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n   <span class="token property">bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n   <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n   <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.5<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>\n   <span class="token comment">/* 显隐控制关键 css 代码 */</span>\n   <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n   <span class="token property">visibility</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>\n   <span class="token property">transition</span><span class="token punctuation">:</span> opacity 0.2s<span class="token punctuation">,</span> visibility 0.2s<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.content</span> <span class="token punctuation">{</span>\n   <span class="token comment">/* 底部浮层移入移出控制关键 css 代码 */</span>\n   <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateY</span><span class="token punctuation">(</span>100%<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token property">transition</span><span class="token punctuation">:</span> transform 0.2s<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">/* 通过切换 “active” 类名实现交互效果 */</span>\n<span class="token selector">.popup.active</span> <span class="token punctuation">{</span>\n   <span class="token property">transition-property</span><span class="token punctuation">:</span> opacity<span class="token punctuation">;</span>\n   <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>\n   <span class="token property">visibility</span><span class="token punctuation">:</span> visible<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.active > .content</span> <span class="token punctuation">{</span>\n   <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateY</span><span class="token punctuation">(</span>0%<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>淡入淡出和移入移出没什么好讲的，就是属性的变化，这里比较有意思的是 visibility 对元素显隐的控制。根据定义，当过渡时间函数的值在 0 ～ 1 的时候，visibility 的计算值是 visible，也就是显示；如果时间函数大于 1 或者小于 0，则 visibility 属性的计算值由设置的起止点值决定，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="15459365609606523000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.popup {\n   visibility: hidden;\n   transition: visibility 2s cubic-bezier(0.25, 0.5, 0, -1);\n}\n\n.popup.active {\n   visibility: visible;\n}`, `15459365609606523000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.popup</span> <span class="token punctuation">{</span>\n   <span class="token property">visibility</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>\n   <span class="token property">transition</span><span class="token punctuation">:</span> visibility 2s <span class="token function">cubic-bezier</span><span class="token punctuation">(</span>0.25<span class="token punctuation">,</span> 0.5<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> -1<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.popup.active</span> <span class="token punctuation">{</span>\n   <span class="token property">visibility</span><span class="token punctuation">:</span> visible<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>此时，.popup 元素会出现先显示，再隐藏，再显示的过渡效果。因为 <code class="language-text">cubic-bezier(0.25, 0.5, 0, -1)</code> 时间函数曲线的一部分在时间轴的下方，这段时间内会按照设置的过渡效果的起始状态，也就是 visibility: hidden 渲染，如图 5-59 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-03-03-17-47-20-7a5c4d677857bef9ef4d5abf418dca4c-f1168.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 796px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 39.321608040201%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAtUlEQVQY05WQXwuCMBTF/f6fKMjSlLQ5zELKIp+KiaDsIaOx/y2rl5hkh8HutvO7h11HD0hKSSklhDRNM+Rxhh6ElOR6r+saY2yOSqlR8Mt36zp0KiuEGOd/J0vO8eVM21bbMn/AT54xTYgWYiysepmCCcF67HOhv35uaqffLF25UmZmRtaJvJMBhMWxRKja5jvfC92ZP50vwmiVJGm4jPbFIYhBFIN0nQFoFsw2uesFxjZxvQfAJ87Z028zJwAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 03 03 17 47 20" title="" data-src="/static/2022-03-03-17-47-20-7a5c4d677857bef9ef4d5abf418dca4c-f1168.png" data-srcset="/static/2022-03-03-17-47-20-7a5c4d677857bef9ef4d5abf418dca4c-ad772.png 200w,\n/static/2022-03-03-17-47-20-7a5c4d677857bef9ef4d5abf418dca4c-4f4c3.png 400w,\n/static/2022-03-03-17-47-20-7a5c4d677857bef9ef4d5abf418dca4c-f1168.png 796w" data-sizes="(max-width: 796px) 100vw, 796px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>由于在实际开发中时间函数的值小于 0 的情况很罕见，因此，我们可以认定 visibility 属性的过渡效果是显示的时候立即显示，隐藏的时候遵循 transition-duration 设置的时间延时隐藏。于是理论上，我们只需要一行 transition 属性代码就可以实现想要的效果，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="54599412247556686000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.popup {\n   opacity: 0;\n   visibility: hidden;\n   /* transition 如下设置即可 */\n   transition: opacity 0.2s, visibility 0.2s;\n}\n\n.popup.active {\n   opacity: 1;\n   visibility: visible;\n}`, `54599412247556686000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.popup</span> <span class="token punctuation">{</span>\n   <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n   <span class="token property">visibility</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>\n   <span class="token comment">/* transition 如下设置即可 */</span>\n   <span class="token property">transition</span><span class="token punctuation">:</span> opacity 0.2s<span class="token punctuation">,</span> visibility 0.2s<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.popup.active</span> <span class="token punctuation">{</span>\n   <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>\n   <span class="token property">visibility</span><span class="token punctuation">:</span> visible<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>但是，不知道是浏览器故意为之还是其他什么原因，在过去的 Chrome 浏览器和现在的 Firefox 浏览器中，通过类名增减触发 transition 过渡效果的时候，元素是在 transition-duration 设置的时间结束的时候才突然显示，而通过 :hover 伪类触发的过渡行为则没有此问题。</p>\n<p>因此，在实际开发的时候，为了安全考虑，需要在触发结束状态的 CSS 代码那里重置下 transition-property 值，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="18787851876038398000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.popup.active {\n   /* visibility 属性不参与过渡效果，因此元素会立即显示 */\n   transition-property: opacity;\n   opacity: 1;\n   visibility: visible;\n}`, `18787851876038398000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.popup.active</span> <span class="token punctuation">{</span>\n   <span class="token comment">/* visibility 属性不参与过渡效果，因此元素会立即显示 */</span>\n   <span class="token property">transition-property</span><span class="token punctuation">:</span> opacity<span class="token punctuation">;</span>\n   <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>\n   <span class="token property">visibility</span><span class="token punctuation">:</span> visible<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>点击演示页面中心的按钮即可体验，效果如图 5-60 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-03-03-17-54-04-721f145409e12926e43b8c32e0cbd7e7-effe6.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 421px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 85.03562945368171%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAIAAABSJhvpAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB5klEQVQ4y5WQ3WvTUBjG87cJ3viBiOiFsgt10AvbtN1Jcprs5CRFUObUKW4mYVQG4tQEBFH2gZu2xLUUhsPhzZq7ki4fqwPXSZNiMw8pjurFUn8cXs457/vwPOdQR0NEUUTqu6WPd6aVmdln9x+Xph7O33tUuj31dOHFm+OBY6jhQ7/fJ/XBk9LpC2MXr6bOXxk/e3n8zKXrp85dm5i8Gw8kiReeL95I3cqzfI7h86yQBfBmKjM9MzuSs67rEEKMMcMwAACERAgLiqIkiAc9wzB4nkcIZTKZdDpN9oIgaJo2kvPiy1d0No+QPIkkFC8AuLk5ZdTYYALIskySY1GSJJmYq2qycxSLjVyO46DAQshBHkCGztKaqo3obNA0+TBZFLGIkYgxy7KqqiaJ455uGCwHi8WiFEPy/8eH6a91Js/IUvxmjIm+UCgkOw96ruM2vjWshrXT2CFYlkVqs9lMEP9DGIZBEJwwQJGog6dGMYPww/z6s4n+hlyc5JwIZdv2ruP1ej3H9YKwRxw6ncNutxsE4Y+Dg13HJcv329/b+67ne96e3Wq5/p7n+XbLoZZXV8pmzbZby6trncOf++32h/XK1va2uVGtb26WKxvkvmJWv2x9Nat183Pt7ful9U+VWrW+slb+DYziYXDRq6yqAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 03 03 17 54 04" title="" data-src="/static/2022-03-03-17-54-04-721f145409e12926e43b8c32e0cbd7e7-effe6.png" data-srcset="/static/2022-03-03-17-54-04-721f145409e12926e43b8c32e0cbd7e7-94cd7.png 200w,\n/static/2022-03-03-17-54-04-721f145409e12926e43b8c32e0cbd7e7-851bf.png 400w,\n/static/2022-03-03-17-54-04-721f145409e12926e43b8c32e0cbd7e7-effe6.png 421w" data-sizes="(max-width: 421px) 100vw, 421px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/821nfn?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<h1 id="css-动画"><a href="#css-%E5%8A%A8%E7%94%BB" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>CSS 动画</h1>\n<p>本节深入介绍 CSS 动画相关知识，知识量较大，但都很重要，相信大家一定可以学到很多东西。</p>\n<p>先从常用的淡出动画效果说起：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="46269206231820935000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.fade-in {\n   animation: fadeIn 0.25s;\n}\n\n@keyframes fadeIn {\n   from {\n      opacity: 0;\n   }\n\n   to {\n      opacity: 1;\n   }\n}`, `46269206231820935000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.fade-in</span> <span class="token punctuation">{</span>\n   <span class="token property">animation</span><span class="token punctuation">:</span> fadeIn 0.25s<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token atrule"><span class="token rule">@keyframes</span> fadeIn</span> <span class="token punctuation">{</span>\n   <span class="token selector">from</span> <span class="token punctuation">{</span>\n      <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">to</span> <span class="token punctuation">{</span>\n      <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>下面逐一分析上述代码中的项。</p>\n<ul>\n<li>fadeIn 是开发者自己定义的动画名称，命名限制不多，具体命名规则在下面有介绍。</li>\n<li>.25s 是 0.25s 的简写，表示动画执行的时间。</li>\n<li>animation 是调用自定义动画规则的 CSS 属性。</li>\n<li>@keyframes 规则用来定义动画的关键帧。</li>\n</ul>\n<p>一个 CSS 动画效果要想出现，动画名称、动画时间、animation 属性和 @keyframes 规则是必不可少的基本单元。CSS 动画自然还包括其他特性，例如动画次数、动画顺序的控制等，但是这些特性不是必需的，因此，单从入门和上手这个角度看，CSS 动画算是简单的。但是，上手简单并不代表 CSS 动画是简单的，随着本节学习内容的逐渐深入，你一定会发现 CSS 动画可以做的事情远远超出了你的想象。下面就先从最基本的 animation 属性说起。</p>\n<h2 id="初识-animation-属性"><a href="#%E5%88%9D%E8%AF%86-animation-%E5%B1%9E%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>初识 animation 属性</h2>\n<p>animation 属性是多个 CSS 属性的缩写，这些属性包括 animation-name、animation-duration、animation-timing-function、animation-delay、animation-iteration-count、animation-direction、animation-fill-mode 和 animation-play-state。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="22169495231701107000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* animation: name | duration | timing-function | delay | iteration-count | direction | fill-mode | play-state */\nanimation: fadeIn 3s ease-in 1s 2 reverse both paused;`, `22169495231701107000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* animation: name | duration | timing-function | delay | iteration-count | direction | fill-mode | play-state */</span>\n<span class="token property">animation</span><span class="token punctuation">:</span> fadeIn 3s ease-in 1s 2 reverse both paused<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>animation 属性支持同时应用多个动画规则，例如实现元素淡出和右侧划入同时进行的动画效果。正确做法是分隔设置，而不是设置在一个动画规则中，也就是不推荐使用下面的 CSS 代码：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="78122294218850470000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.element {\n   animation: fadeInSlideInRight 0.2s;\n}\n\n@keyframes fadeInSlideInRight {\n   from {\n      opacity: 0;\n      transform: translateX(100%);\n   }\n\n   to {\n      opacity: 1;\n      transform: translateX(0%);\n   }\n}`, `78122294218850470000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.element</span> <span class="token punctuation">{</span>\n   <span class="token property">animation</span><span class="token punctuation">:</span> fadeInSlideInRight 0.2s<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token atrule"><span class="token rule">@keyframes</span> fadeInSlideInRight</span> <span class="token punctuation">{</span>\n   <span class="token selector">from</span> <span class="token punctuation">{</span>\n      <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n      <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>100%<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">to</span> <span class="token punctuation">{</span>\n      <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>\n      <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>0%<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>而是推荐将代码分隔成多个独立的动画规则，CSS 代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="89866898523510870000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.element {\n   animation: fadeIn 0.2s, slideInRight 0.2s;\n}\n\n@keyframes fadeIn {\n   from {\n      opacity: 0;\n   }\n\n   to {\n      opacity: 1;\n   }\n}\n\n@keyframes slideInRight {\n   from {\n      transform: translateX(100%);\n   }\n\n   to {\n      transform: translateX(0%);\n   }\n}`, `89866898523510870000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.element</span> <span class="token punctuation">{</span>\n   <span class="token property">animation</span><span class="token punctuation">:</span> fadeIn 0.2s<span class="token punctuation">,</span> slideInRight 0.2s<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token atrule"><span class="token rule">@keyframes</span> fadeIn</span> <span class="token punctuation">{</span>\n   <span class="token selector">from</span> <span class="token punctuation">{</span>\n      <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">to</span> <span class="token punctuation">{</span>\n      <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token atrule"><span class="token rule">@keyframes</span> slideInRight</span> <span class="token punctuation">{</span>\n   <span class="token selector">from</span> <span class="token punctuation">{</span>\n      <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>100%<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">to</span> <span class="token punctuation">{</span>\n      <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>0%<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>这样做的好处在于我们自定义的动画规则可以在其他场合重复利用，例如希望弹框在出现的时候有淡出动画效果，并且我们无须再额外定义淡出动画规则，直接复用即可：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="39765912100009435000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`dialog {\n   animation: fadeIn 0.2s;\n}`, `39765912100009435000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">dialog</span> <span class="token punctuation">{</span>\n   <span class="token property">animation</span><span class="token punctuation">:</span> fadeIn 0.2s<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<h2 id="keyframes-规则的语法和特性"><a href="#keyframes-%E8%A7%84%E5%88%99%E7%9A%84%E8%AF%AD%E6%B3%95%E5%92%8C%E7%89%B9%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>@keyframes 规则的语法和特性</h2>\n<p>首先 @keyframes 的后面有个“s”，因为动画效果不可能只有 1 个关键帧。@keyframes 规则的语法如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="82943885768104000000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`@keyframes <keyframes-name> {\n   <keyframe-block-list>\n}`, `82943885768104000000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token atrule"><span class="token rule">@keyframes</span> &lt;keyframes-name></span> <span class="token punctuation">{</span>\n   &lt;keyframe-block-list>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>其中 <code class="language-text">&lt;keyframe-block-list&gt;</code> 指的是定义的关键帧列表，每个关键帧由关键帧选择器和对应的 CSS 样式组成。</p>\n<p>关键帧选择器用来指定当前关键帧在整个动画过程中的位置，其支持 from、to 这两个关键字和百分比值。from 关键字等同于 0%，to 关键字等同于 100%。</p>\n<p>也就是说，下面两段 CSS 代码的作用是一样的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="70905920713064650000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`@keyframes fadeIn {\n   from {\n      opacity: 0;\n   }\n\n   to {\n      opacity: 1;\n   }\n}\n\n@keyframes fadeIn {\n   0% {\n      opacity: 0;\n   }\n\n   100% {\n      opacity: 1;\n   }\n}`, `70905920713064650000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token atrule"><span class="token rule">@keyframes</span> fadeIn</span> <span class="token punctuation">{</span>\n   <span class="token selector">from</span> <span class="token punctuation">{</span>\n      <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">to</span> <span class="token punctuation">{</span>\n      <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token atrule"><span class="token rule">@keyframes</span> fadeIn</span> <span class="token punctuation">{</span>\n   <span class="token selector">0%</span> <span class="token punctuation">{</span>\n      <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">100%</span> <span class="token punctuation">{</span>\n      <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>下面讲一下 @keyframes 规则中你可能不知道的一些特性。</p>\n<h3 id="起止关键帧可以不设置"><a href="#%E8%B5%B7%E6%AD%A2%E5%85%B3%E9%94%AE%E5%B8%A7%E5%8F%AF%E4%BB%A5%E4%B8%8D%E8%AE%BE%E7%BD%AE" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>起止关键帧可以不设置</h3>\n<p>例如定义淡出效果，可以这样设置：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="81114863721930670000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`@keyframes fadeInBy {\n   100% {\n      opacity: 1;\n   }\n}`, `81114863721930670000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token atrule"><span class="token rule">@keyframes</span> fadeInBy</span> <span class="token punctuation">{</span>\n   <span class="token selector">100%</span> <span class="token punctuation">{</span>\n      <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>此时动画初始状态的透明度就是当前元素的透明度，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="36832705139893740000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.element {\n   opacity: 0.5;\n}\n\n.element.active {\n   animation: fadeInBy 0.2s;\n}`, `36832705139893740000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.element</span> <span class="token punctuation">{</span>\n   <span class="token property">opacity</span><span class="token punctuation">:</span> 0.5<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.element.active</span> <span class="token punctuation">{</span>\n   <span class="token property">animation</span><span class="token punctuation">:</span> fadeInBy 0.2s<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>.element 元素在匹配 .active 类名之后会有透明度从 0.5（初始状态的透明度）变化到透明度 1 的效果。</p>\n<p>但是，这种做法在实际开发的时候并不常见，因为通常会使用更加方便快捷的 transition 属性实现类似的效果。</p>\n<h3 id="关键帧列表可以合并"><a href="#%E5%85%B3%E9%94%AE%E5%B8%A7%E5%88%97%E8%A1%A8%E5%8F%AF%E4%BB%A5%E5%90%88%E5%B9%B6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>关键帧列表可以合并</h3>\n<p>如果关键帧对应的 CSS 样式是一样的，则可以合并在一起书写，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="34917544418702164000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`@keyframes blink {\n   0%,\n   50%,\n   100% {\n      opacity: 0;\n   }\n\n   25%,\n   75% {\n      opacity: 1;\n   }\n}`, `34917544418702164000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token atrule"><span class="token rule">@keyframes</span> blink</span> <span class="token punctuation">{</span>\n   <span class="token selector">0%,\n   50%,\n   100%</span> <span class="token punctuation">{</span>\n      <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">25%,\n   75%</span> <span class="token punctuation">{</span>\n      <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="不同的关键帧选择器是无序的"><a href="#%E4%B8%8D%E5%90%8C%E7%9A%84%E5%85%B3%E9%94%AE%E5%B8%A7%E9%80%89%E6%8B%A9%E5%99%A8%E6%98%AF%E6%97%A0%E5%BA%8F%E7%9A%84" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>不同的关键帧选择器是无序的</h3>\n<p>虽然动画的执行是有顺序的，从 0% 到 100%，但是在代码层面，不同的关键帧选择器是不分先后顺序的。例如，下面两段 CSS 的效果是一样的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="39803082251014770000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`@keyframes fadeIn {\n   0% {\n      opacity: 0;\n   }\n\n   100% {\n      opacity: 1;\n   }\n}\n\n@keyframes fadeIn {\n   100% {\n      opacity: 1;\n   }\n\n   0% {\n      opacity: 0;\n   }\n}`, `39803082251014770000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token atrule"><span class="token rule">@keyframes</span> fadeIn</span> <span class="token punctuation">{</span>\n   <span class="token selector">0%</span> <span class="token punctuation">{</span>\n      <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">100%</span> <span class="token punctuation">{</span>\n      <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token atrule"><span class="token rule">@keyframes</span> fadeIn</span> <span class="token punctuation">{</span>\n   <span class="token selector">100%</span> <span class="token punctuation">{</span>\n      <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">0%</span> <span class="token punctuation">{</span>\n      <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="重复定义的关键帧不是完全被覆盖的"><a href="#%E9%87%8D%E5%A4%8D%E5%AE%9A%E4%B9%89%E7%9A%84%E5%85%B3%E9%94%AE%E5%B8%A7%E4%B8%8D%E6%98%AF%E5%AE%8C%E5%85%A8%E8%A2%AB%E8%A6%86%E7%9B%96%E7%9A%84" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>重复定义的关键帧不是完全被覆盖的</h3>\n<p>例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="70937042339068350000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`@keyframes identifier {\n   50% {\n      top: 30px;\n      left: 20px;\n   }\n\n   50% {\n      top: 10px;\n   }\n}`, `70937042339068350000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token atrule"><span class="token rule">@keyframes</span> identifier</span> <span class="token punctuation">{</span>\n   <span class="token selector">50%</span> <span class="token punctuation">{</span>\n      <span class="token property">top</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>\n      <span class="token property">left</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">50%</span> <span class="token punctuation">{</span>\n      <span class="token property">top</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>最终在 50% 这一帧用来动画的 CSS 样式是 top: 10px 和 left: 20px。也就是说，如果关键帧重复定义，则不同的 CSS 样式是累加的，而相同的 CSS 样式是后面的样式覆盖前面的样式，和普通的 CSS 选择器的样式计算规则一致。</p>\n<h3 id="关键帧中的样式可以不连续"><a href="#%E5%85%B3%E9%94%AE%E5%B8%A7%E4%B8%AD%E7%9A%84%E6%A0%B7%E5%BC%8F%E5%8F%AF%E4%BB%A5%E4%B8%8D%E8%BF%9E%E7%BB%AD" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>关键帧中的样式可以不连续</h3>\n<p>前后关键帧的 CSS 属性无须保持一致，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="30810678165350367000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`@keyframes identifier {\n   0% {\n      top: 0;\n      left: 0;\n   }\n\n   30% {\n      top: 50px;\n   }\n\n   60%,\n   90% {\n      left: 50px;\n   }\n\n   100% {\n      top: 100px;\n      left: 100%;\n   }\n}`, `30810678165350367000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token atrule"><span class="token rule">@keyframes</span> identifier</span> <span class="token punctuation">{</span>\n   <span class="token selector">0%</span> <span class="token punctuation">{</span>\n      <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n      <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">30%</span> <span class="token punctuation">{</span>\n      <span class="token property">top</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">60%,\n   90%</span> <span class="token punctuation">{</span>\n      <span class="token property">left</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">100%</span> <span class="token punctuation">{</span>\n      <span class="token property">top</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>\n      <span class="token property">left</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>这里，top 属性应用动画的帧是 0%、30% 和 100%，left 属性应用动画的帧是 0%、60%、90% 和 100%。</p>\n<h3 id="important-无效"><a href="#important-%E6%97%A0%E6%95%88" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>!important 无效</h3>\n<p>例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="42128444638080320000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`@keyframes identifier {\n   0% {\n      top: 30px;\n      /* 无效 */\n      left: 20px !important;\n   }\n\n   100% {\n      top: 10px;\n   }\n}`, `42128444638080320000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token atrule"><span class="token rule">@keyframes</span> identifier</span> <span class="token punctuation">{</span>\n   <span class="token selector">0%</span> <span class="token punctuation">{</span>\n      <span class="token property">top</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>\n      <span class="token comment">/* 无效 */</span>\n      <span class="token property">left</span><span class="token punctuation">:</span> 20px <span class="token important">!important</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">100%</span> <span class="token punctuation">{</span>\n      <span class="token property">top</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>其中 left: 20px 这句 CSS 声明是没有任何效果的。其实，根本就没有必要在 @keyframes 规则语句中使用 !important 提高权重，因为当 CSS 动画执行的时候，关键帧中定义的 CSS 优先级就是最高的。</p>\n<h3 id="优先级最高"><a href="#%E4%BC%98%E5%85%88%E7%BA%A7%E6%9C%80%E9%AB%98" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>优先级最高</h3>\n<p>请看下面这个例子：</p>\n<html><head></head><body><div class="gatsby-code-button-container" data-toaster-id="92702867931778140000" data-toaster-class="gatsby-code-button-toaster" data-toaster-text-class="gatsby-code-button-toaster-text" data-toaster-text="复制成功" data-toaster-duration="3500" onclick="copyToClipboard(`<img data-src=&quot;1.jpg&quot; style=&quot;opacity: 0.5;&quot; />\n<style>\n   img {\n      animation: fadeIn 1s;\n   }\n\n   @keyframes fadeIn {\n      0% {\n         opacity: 0;\n      }\n\n      100% {\n         opacity: 1;\n      }\n   }\n</style>`, `92702867931778140000`)">\n              <div class="gatsby-code-button" title="html">\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div></body></html>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1.jpg<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">opacity</span><span class="token punctuation">:</span> 0.5<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n   <span class="token selector">img</span> <span class="token punctuation">{</span>\n      <span class="token property">animation</span><span class="token punctuation">:</span> fadeIn 1s<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token atrule"><span class="token rule">@keyframes</span> fadeIn</span> <span class="token punctuation">{</span>\n      <span class="token selector">0%</span> <span class="token punctuation">{</span>\n         <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n      <span class="token punctuation">}</span>\n\n      <span class="token selector">100%</span> <span class="token punctuation">{</span>\n         <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>\n      <span class="token punctuation">}</span>\n   <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><code class="language-text">&lt;img&gt;</code> 元素出现了透明度从 0 到 1 的动画效果，这就表明 @keyframes 规则中的 CSS 优先级要比 style 属性设置的 CSS 属性的优先级要高。接下来我们更进一步，使用 CSS 世界中优先级最高的 !important 语法：</p>\n<html><head></head><body><div class="gatsby-code-button-container" data-toaster-id="47184513249258120000" data-toaster-class="gatsby-code-button-toaster" data-toaster-text-class="gatsby-code-button-toaster-text" data-toaster-text="复制成功" data-toaster-duration="3500" onclick="copyToClipboard(`<img data-src=&quot;1.jpg&quot; style=&quot;opacity: 0.5!important&quot; />`, `47184513249258120000`)">\n              <div class="gatsby-code-button" title="html">\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div></body></html>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1.jpg<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">opacity</span><span class="token punctuation">:</span> 0.5<span class="token important">!important</span></span><span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>结果是 Chrome 浏览器、IE 浏览器、Edge 浏览器和 Safari 浏览器均出现了透明度动画效果，只有 Firefox 浏览器中的 <code class="language-text">&lt;img&gt;</code> 元素一直保持 0.5 的透明度。这表明在 Firefox 浏览器中，@keyframes 规则中的 CSS 优先级大于 style 设置的 CSS 属性，小于 !important 语法中的 CSS 属性，而其他所有浏览器 @keyframes 规则中的 CSS 优先级最高。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/0dpt35?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>根据以往的经验，规范中没有定义到的特性会随着浏览器版本的升级而进行调整，因此说不定过几年 Firefox 浏览器也会把 @keyframes 规则中的 CSS 优先级调至最高。</p>\n<p>@keyframes 规则优先级最高的这个特性为重置页面中第三方 JavaScript 设置的内联样式提供了一种新的思路。不过，此方法也有局限，就是不支持动画的 CSS 属性是无法重置的，例如我们无法在 @keyframes 规则中设置 display: block 去重置 display: none，因此对于 Adblock 这类去广告插件还是无解。</p>\n<h2 id="动画命名与-custom-ident-数据类型"><a href="#%E5%8A%A8%E7%94%BB%E5%91%BD%E5%90%8D%E4%B8%8E-custom-ident-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>动画命名与 <code class="language-text">&lt;custom-ident&gt;</code> 数据类型</h2>\n<p>按照规范，动画的名称可以是下面两种数据类型：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="74973555550764000000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<custom-ident> | <string>`, `74973555550764000000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css">&lt;custom-ident> | &lt;string></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>其中，<code class="language-text">&lt;string&gt;</code> 数据类型表示需要带引号的字符串，例如，下面 CSS 代码中的 <code class="language-text">&#39;...&#39;</code> 和 <code class="language-text">&#39;Microsoft Yahei&#39;</code> 就是 <code class="language-text">&lt;string&gt;</code> 数据类型：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="63514568013775905000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`content: \'...\';\nfont-family: \'Microsoft Yahei\';`, `63514568013775905000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">\'...\'</span><span class="token punctuation">;</span>\n<span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">\'Microsoft Yahei\'</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>因此，理论上 CSS 动画也是支持使用引号命名的动画效果的，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="88380467840801500000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.element {\n   animation: \'hello world\' 2s;\n}\n\n@keyframes \'hello world\' {\n   0% {\n      opacity: 0;\n   }\n\n   100% {\n      opacity: 1;\n   }\n}`, `88380467840801500000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.element</span> <span class="token punctuation">{</span>\n   <span class="token property">animation</span><span class="token punctuation">:</span> <span class="token string">\'hello world\'</span> 2s<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token atrule"><span class="token rule">@keyframes</span> <span class="token string">\'hello world\'</span></span> <span class="token punctuation">{</span>\n   <span class="token selector">0%</span> <span class="token punctuation">{</span>\n      <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">100%</span> <span class="token punctuation">{</span>\n      <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>实际测试下来，仅 Firefox 浏览器支持 <code class="language-text">&lt;string&gt;</code> 数据类型的 CSS 动画名称，Chrome 浏览器和 IE 浏览器均认为这是不合法的语法。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/20bshq?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>因此，我们的注意力还是放在兼容性更好的 <code class="language-text">&lt;custom-ident&gt;</code> 数据类型上。CSS 中可以自定义的名称均是 <code class="language-text">&lt;custom-ident&gt;</code> 数据类型，例如 counter-reset 和 counter-increment 属性中自定义的计数器，CSS 网格布局中对行和列的命名等。故 <code class="language-text">&lt;custom-ident&gt;</code> 数据类型是一学百用的。</p>\n<h3 id="custom-ident-数据类型语法"><a href="#custom-ident-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E8%AF%AD%E6%B3%95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code class="language-text">&lt;custom-ident&gt;</code> 数据类型语法</h3>\n<p><code class="language-text">&lt;custom-ident&gt;</code> 数据类型的语法和 CSS 的标识符（例如，CSS 属性就属于 CSS 标识符）很相似，区别就在于 <code class="language-text">&lt;custom-ident&gt;</code> 数据类型是区分大小写的。<code class="language-text">&lt;custom-ident&gt;</code> 数据类型可以由下面这些字符进行组合：</p>\n<ul>\n<li>任意字母（a ～ z 或 A ～ Z）；</li>\n<li>数字（0 ～ 9）；</li>\n<li>短横线（-）；</li>\n<li>下划线（_）；</li>\n<li>转义字符（使用反斜杠 \\ 转义）；</li>\n<li>Unicode 字符（反斜杠 \\ 后面跟十六进制数字）。</li>\n</ul>\n<p>由于 <code class="language-text">&lt;custom-ident&gt;</code> 数据类型区分大小写，因此 id1、Id1、ID1 和 iD1 是不同的名称。而一些看起来差异很大的名称却是相同的，例如，☺ 和 \\263a 其实是相同的，因此，下面 CSS 代码中的 CSS 动画是可以执行的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="84064908915463140000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.element {\n   animation: ☺ 2s;\n}\n\n@keyframes \\263a {\n   0% {\n      opacity: 0;\n   }\n\n   100% {\n      opacity: 1;\n   }\n}`, `84064908915463140000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.element</span> <span class="token punctuation">{</span>\n   <span class="token property">animation</span><span class="token punctuation">:</span> ☺ 2s<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token atrule"><span class="token rule">@keyframes</span> \\263a</span> <span class="token punctuation">{</span>\n   <span class="token selector">0%</span> <span class="token punctuation">{</span>\n      <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">100%</span> <span class="token punctuation">{</span>\n      <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>下面通过案例说一说 <code class="language-text">&lt;custom-ident&gt;</code> 数据类型的合法性。</p>\n<ol>\n<li>\n<p>不能是 CSS 属性本身支持的关键字，例如 animation 属性支持关键字 none，也支持全局关键字 unset、initial 和 inherit。因此，在 CSS 动画中，不能把动画名称定义为 none、unset、initial 或 inherit。</p>\n</li>\n<li>\n<p>不能以十进制数字开头。例如，下面的名称就是不合法的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="58786149369462670000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 不合法 */\n2333fadeIn`, `58786149369462670000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">/* 不合法 */</span>\n<span class="token number">2333</span>fadeIn</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>可以使用短横线作为开头，但是短横线后面不能是十进制数字，也就是说，下面的名称是合法的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="56503050521877430000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 合法 */\n-fadeIn;`, `56503050521877430000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">/* 合法 */</span>\n<span class="token operator">-</span>fadeIn<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>而下面这个名称就不合法：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="26233647142844617000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 不合法 */\n-2333fadeIn`, `26233647142844617000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">/* 不合法 */</span>\n<span class="token operator">-</span><span class="token number">2333</span>fadeIn</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>除短横线和下划线之外的英文标点字符（包括空格）都需要转义。例如，下面的名称是合法的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="59910095909531710000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 合法 */\nexample\\.png\nhello\\ world`, `59910095909531710000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">/* 合法 */</span>\nexample\\<span class="token punctuation">.</span>png\nhello\\ world</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>而下面这个名称就不合法：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="83321291401926200000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 不合法 */\nexample.png\nhello world`, `83321291401926200000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">/* 不合法 */</span>\nexample<span class="token punctuation">.</span>png\nhello world</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>连续短横线开头的名称在 MDN 文档中被认为是不合法的，但是根据我的测试，除了 IE 浏览器不支持，其他浏览器都认为连续短横线的动画名称是合法的，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="87823726148792990000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 除 IE 浏览器外均合法，即使和 CSS 自定义属性名称一致 */\n.element {\n  --fadeIn: 2;\n  animation: --fadeIn 2s;\n}\n\n@keyframes --fadeIn {\n  0% {\n     opacity: 0;\n  }\n\n  100% {\n     opacity: 1;\n  }\n}`, `87823726148792990000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 除 IE 浏览器外均合法，即使和 CSS 自定义属性名称一致 */</span>\n<span class="token selector">.element</span> <span class="token punctuation">{</span>\n  <span class="token property">--fadeIn</span><span class="token punctuation">:</span> 2<span class="token punctuation">;</span>\n  <span class="token property">animation</span><span class="token punctuation">:</span> --fadeIn 2s<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token atrule"><span class="token rule">@keyframes</span> --fadeIn</span> <span class="token punctuation">{</span>\n  <span class="token selector">0%</span> <span class="token punctuation">{</span>\n     <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token selector">100%</span> <span class="token punctuation">{</span>\n     <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>因此，我认为连续短横线开头的名称是合法的。</p>\n</li>\n<li>\n<p>如果是 Unicode 编码转义字符，记得在后面添加一个空格，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="94569946407468020000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 合法 */\n\\233 haha`, `94569946407468020000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 合法 */</span>\n\\233 haha</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n</li>\n</ol>\n<h2 id="负延时与即时播放效果"><a href="#%E8%B4%9F%E5%BB%B6%E6%97%B6%E4%B8%8E%E5%8D%B3%E6%97%B6%E6%92%AD%E6%94%BE%E6%95%88%E6%9E%9C" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>负延时与即时播放效果</h2>\n<p>animation-delay 可以让动画延时播放，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="48908254034148960000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`animation-delay: 300ms;`, `48908254034148960000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">animation-delay</span><span class="token punctuation">:</span> 300ms<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>表示动画延时 300ms 播放。</p>\n<p>需要注意的是，如果动画是无限循环的，设置的延时不会跟着循环，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="80030319157136540000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.loading {\n   animation: spin 1s infinite;\n   animation-delay: 300ms;\n}\n\n@keyframes spin {\n   0% {\n      transform: rotate(0deg);\n   }\n\n   100% {\n      transform: rotate(360deg);\n   }\n}`, `80030319157136540000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.loading</span> <span class="token punctuation">{</span>\n   <span class="token property">animation</span><span class="token punctuation">:</span> spin 1s infinite<span class="token punctuation">;</span>\n   <span class="token property">animation-delay</span><span class="token punctuation">:</span> 300ms<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token atrule"><span class="token rule">@keyframes</span> spin</span> <span class="token punctuation">{</span>\n   <span class="token selector">0%</span> <span class="token punctuation">{</span>\n      <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>0deg<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">100%</span> <span class="token punctuation">{</span>\n      <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>360deg<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>此时 .loading 元素会在延时 300ms 后不断旋转，而不是在延时 300ms 后旋转一圈，再在延时 300ms 后旋转一圈，不断循环。</p>\n<p>想要实现每次动画循环都有延时效果，常用的方法是在自定义动画关键帧处进行设置，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="65853061046310750000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.loading {\n   animation: spin 1s infinite;\n}\n\n@keyframes spin {\n   0%,\n   30% {\n      transform: rotate(0deg);\n   }\n\n   100% {\n      transform: rotate(360deg);\n   }\n}`, `65853061046310750000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.loading</span> <span class="token punctuation">{</span>\n   <span class="token property">animation</span><span class="token punctuation">:</span> spin 1s infinite<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token atrule"><span class="token rule">@keyframes</span> spin</span> <span class="token punctuation">{</span>\n   <span class="token selector">0%,\n   30%</span> <span class="token punctuation">{</span>\n      <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>0deg<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">100%</span> <span class="token punctuation">{</span>\n      <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>360deg<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>animation-delay 属性比较经典的应用就是通过设置负值让动画即时播放，播放的位置为动画中间的某一阶段。</p>\n<p>举一个音频波形动画的案例，实现图 5-61 所示的效果，可以用来表示音频文件处于加载态或者播放态。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-03-12-00-29-19-2322d0818e8c1b04bda974a3e623ae83-45fc4.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 522px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 81.4176245210728%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB70lEQVQoz42S304TQRTGJ9ELJRETrgg+gRpCBK6Ib8FLkJiIBjXRxHtfwIRwwYXSSiu2UhBITKGsQem2JoSi2BZKiOXfbrHtzG63hd1+znEr2NCanmwmc/bM75w5Zz7mVCHth4mbUaRKWBcI5XBmMmhX0cyYT4PKCWaL2LHwKI3bUQqUHZw2x2RJmZTd+oLhJLIVsCWCn2yhN0bh/jgCOvYreJmty/JvQtYTw4M0suUa/HgLd2J0oi0CzyGCGi4vwnBw4sByCHC7mNLwLAPWrWK4EXxdweQRQjraFEhqcINC0tYErfeS6FCaw+0K3hxhWseVZXLvfiVAdsHCNNfnGdz43AJ8dZkqD8QxtIn8KUUPKni6ja6V1iqfVPFiF+P7dGHLpvV+Cp0S7lEbD+zaH3g2R1lM53zOri4SBhaO/z7Vz7On2kZfvFZ5dI/OfTdrwMVXZ0NJjO0hY9XgkRRkOmmfCnSdhsy5SNysawYuRUhn3kM8TNdJornMwNyYYWOlAGHX9Vb9D+fCF0XXujFN0zkXtm2bJct2HLnhnBc5LxSLRS5MsyQ/LoR0hTDkv1/5vGEa0i2XK8zj9YfDkfXEt+iqyo3ScU5/5fG9C868DUzPzM5/WPgYXlKCobkJr1/ufFPvA8HQqhp77fUnNjZ/A5chSyDyMFyYAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 03 12 00 29 19" title="" data-src="/static/2022-03-12-00-29-19-2322d0818e8c1b04bda974a3e623ae83-45fc4.png" data-srcset="/static/2022-03-12-00-29-19-2322d0818e8c1b04bda974a3e623ae83-31b3a.png 200w,\n/static/2022-03-12-00-29-19-2322d0818e8c1b04bda974a3e623ae83-60bb2.png 400w,\n/static/2022-03-12-00-29-19-2322d0818e8c1b04bda974a3e623ae83-45fc4.png 522w" data-sizes="(max-width: 522px) 100vw, 522px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>音频波形由一个一个的矩形组成，每一个矩形都会有垂直缩放的动画效果。想要形成此起彼伏的波形运动效果，最好的方法就是给每一个矩形的动画设置延时，例如（这里使用 4 个矩形示意）：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="33251100308672156000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<div class=&quot;loading&quot;>\n   <i></i>\n   <i></i>\n   <i></i>\n   <i></i>\n</div>\n<style>\n   .loading i {\n      display: inline-block;\n      border-left: 2px solid deepskyblue;\n      height: 2px;\n      animation: scaleUp 4s linear infinite alternate;\n      margin: 0 1px;\n   }\n\n   .loading i:nth-child(2) {\n      animation-delay: 1s;\n   }\n\n   .loading i:nth-child(3) {\n      animation-delay: 2s;\n   }\n\n   .loading i:nth-child(4) {\n      animation-delay: 3s;\n   }\n\n   @keyframes scaleUp {\n      to {\n         transform: scaleY(10);\n      }\n   }\n</style>`, `33251100308672156000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>loading<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n   <span class="token selector">.loading i</span> <span class="token punctuation">{</span>\n      <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>\n      <span class="token property">border-left</span><span class="token punctuation">:</span> 2px solid deepskyblue<span class="token punctuation">;</span>\n      <span class="token property">height</span><span class="token punctuation">:</span> 2px<span class="token punctuation">;</span>\n      <span class="token property">animation</span><span class="token punctuation">:</span> scaleUp 4s linear infinite alternate<span class="token punctuation">;</span>\n      <span class="token property">margin</span><span class="token punctuation">:</span> 0 1px<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">.loading i:nth-child(2)</span> <span class="token punctuation">{</span>\n      <span class="token property">animation-delay</span><span class="token punctuation">:</span> 1s<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">.loading i:nth-child(3)</span> <span class="token punctuation">{</span>\n      <span class="token property">animation-delay</span><span class="token punctuation">:</span> 2s<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">.loading i:nth-child(4)</span> <span class="token punctuation">{</span>\n      <span class="token property">animation-delay</span><span class="token punctuation">:</span> 3s<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token atrule"><span class="token rule">@keyframes</span> scaleUp</span> <span class="token punctuation">{</span>\n      <span class="token selector">to</span> <span class="token punctuation">{</span>\n         <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scaleY</span><span class="token punctuation">(</span>10<span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token punctuation">}</span>\n   <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>然而，真正运行的时候却发现一个比较严重的问题，由于设置了延时，动画开始执行的时候，后面的矩形都是默认的高度，如图 5-62 所示。这显然不符合预期，矩形的初始高度应该参差不齐才对。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-03-12-00-35-12-7115b36ecdad88df51252e6af9b6e313-ba470.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 649px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 67.64252696456087%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABjklEQVQoz42Se0vCUBTA/d4RQR+k/jGhxAiiUvOBEBVWVKAOndbS3O5ed8tlbvfZvXO+yKzL4XDO2f3tvG6KcyaFUc457msEGEhpkuFAaNRRUKuB1DYBQ6y90GCEX3tCs3EQPT9S10otw8S2iG3Kex4kgzc8HAgREepD6nvsMxAGw4ihCPVUAp0ZnMj8iN9Jl7oO7qpxYPlrclZhmT/WlEjS8yaVsqgzhunPmynG2GrypAVR+aRcFKWuIWeSWhNlNLq+CqsV+uFvICU8inDckHTYdGzA8La3ULMhSVk/+xXOKbYEGF/MLPziDuAUb8iZwMeKYwTRTq0fEnrUcg4a1oSy3VtThZN4xhvhbMv2Q7z3ZCJKq5p/+eKHhOw/gsFH+Dec70LZWlL2bMnTzTIaTyEx5vYCZuu2/88jVsXFa9O0/ij4hJ4fhhHB2IHQMIBuAMuyx+OxrgMATMd1hWua9grsQTedyaq913r93nE9XX/PnZyeXRRLldrd/YPS7uTz5XTm8LxQur65vSiU5vA3ysgiwQEEb/oAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 03 12 00 35 12" title="" data-src="/static/2022-03-12-00-35-12-7115b36ecdad88df51252e6af9b6e313-ba470.png" data-srcset="/static/2022-03-12-00-35-12-7115b36ecdad88df51252e6af9b6e313-47540.png 200w,\n/static/2022-03-12-00-35-12-7115b36ecdad88df51252e6af9b6e313-ee316.png 400w,\n/static/2022-03-12-00-35-12-7115b36ecdad88df51252e6af9b6e313-ba470.png 649w" data-sizes="(max-width: 649px) 100vw, 649px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>要解决这个问题其实很简单，只要把延时的时间全部换成负数即可，代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="49368641588013440000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.negative i:nth-child(2) {\n   animation-delay: -1s;\n}\n\n.negative i:nth-child(3) {\n   animation-delay: -2s;\n}\n\n.negative i:nth-child(4) {\n   animation-delay: -3s;\n}`, `49368641588013440000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.negative i:nth-child(2)</span> <span class="token punctuation">{</span>\n   <span class="token property">animation-delay</span><span class="token punctuation">:</span> -1s<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.negative i:nth-child(3)</span> <span class="token punctuation">{</span>\n   <span class="token property">animation-delay</span><span class="token punctuation">:</span> -2s<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.negative i:nth-child(4)</span> <span class="token punctuation">{</span>\n   <span class="token property">animation-delay</span><span class="token punctuation">:</span> -3s<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>这样既保留了各个元素动画的时间差，又实现了动画效果的立即播放，且不会带来各个矩形初始状态尺寸相同的问题。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/q6crqc?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<h3 id="准确理解-animation-delay-负值"><a href="#%E5%87%86%E7%A1%AE%E7%90%86%E8%A7%A3-animation-delay-%E8%B4%9F%E5%80%BC" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>准确理解 animation-delay 负值</h3>\n<p>提个问题，下面代码的透明度变化是 0.75→1 还是 0.25→1？</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="1203707958346433800"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`element {\n   animation: fadeIn 1s linear -0.25s;\n}\n\n@keyframes fadeIn {\n   0% {\n      opacity: 0;\n   }\n\n   100% {\n      opacity: 1;\n   }\n}`, `1203707958346433800`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">element</span> <span class="token punctuation">{</span>\n   <span class="token property">animation</span><span class="token punctuation">:</span> fadeIn 1s linear -0.25s<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token atrule"><span class="token rule">@keyframes</span> fadeIn</span> <span class="token punctuation">{</span>\n   <span class="token selector">0%</span> <span class="token punctuation">{</span>\n      <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">100%</span> <span class="token punctuation">{</span>\n      <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>相信很多人都会搞错，因为容易受 JavaScript 中 splice() 或者 slice() 函数负值的作用误导。</p>\n<p>在很多语言中，负值表示序列的序号前移，或者时间线往前，于是，很多人就认为 animation-delay: -.25s 就是在整个播放时间线上往前移动 0.25s，因此透明度变化应该是 0.75→1。但实际上并不是这样，其实透明度变化是 0.25→1。</p>\n<p>以上变化其实不难理解，关键点就是理解何为“延时”，例如 animation-delay: 0.25s 表示动画在 0.25s 之后从 0% 开始播放，那 animation-delay: -0.25s 显然就表示在 0.25s 之前就已经从 0% 开始播放，即动画真正播放的时候动画已经执行了 0.25s，因此，我们可见的变化就是 0.25→1 这段过程。</p>\n<h2 id="reverse-和-alternate-关键字的区别和应用"><a href="#reverse-%E5%92%8C-alternate-%E5%85%B3%E9%94%AE%E5%AD%97%E7%9A%84%E5%8C%BA%E5%88%AB%E5%92%8C%E5%BA%94%E7%94%A8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>reverse 和 alternate 关键字的区别和应用</h2>\n<p>animation-direction 属性可以用来控制动画的方向，其本质上是通过控制 @keyframes 规则中定义的动画关键帧执行的方向来实现的。该属性语法如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="72335157420360280000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`animation-direction: normal; /* 初始值 */\nanimation-direction: reverse;\nanimation-direction: alternate;\nanimation-direction: alternate-reverse;`, `72335157420360280000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">animation-direction</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span> <span class="token comment">/* 初始值 */</span>\n<span class="token property">animation-direction</span><span class="token punctuation">:</span> reverse<span class="token punctuation">;</span>\n<span class="token property">animation-direction</span><span class="token punctuation">:</span> alternate<span class="token punctuation">;</span>\n<span class="token property">animation-direction</span><span class="token punctuation">:</span> alternate-reverse<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>其中，reverse 和 alternate 这两个关键字都有“相反”的意思，不同之处在于，reverse 关键字是让每一轮动画执行的方向相反，而 alternate 关键字是让下一轮动画的执行方向和上一轮动画的执行方向相反。</p>\n<p>举个例子，实现一个常见的淡入淡出动画效果，这里设置动画播放 2 次：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="48528203373734715000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.element {\n   /* fadeIn 动画执行 2 次 */\n   animation: fadeIn 1s 2;\n}\n\n@keyframes fadeIn {\n   0% {\n      opacity: 0;\n   }\n\n   100% {\n      opacity: 1;\n   }\n}`, `48528203373734715000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.element</span> <span class="token punctuation">{</span>\n   <span class="token comment">/* fadeIn 动画执行 2 次 */</span>\n   <span class="token property">animation</span><span class="token punctuation">:</span> fadeIn 1s 2<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token atrule"><span class="token rule">@keyframes</span> fadeIn</span> <span class="token punctuation">{</span>\n   <span class="token selector">0%</span> <span class="token punctuation">{</span>\n      <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">100%</span> <span class="token punctuation">{</span>\n      <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>先讲一下这一语法中的几个关键点。</p>\n<ul>\n<li>animation-direction 属性值如果是 normal，那么动画执行的方向是 0%→100%、0%→100%，每一轮的动画方向都是正常的。</li>\n<li>animation-direction 属性值如果是 reverse，那么动画执行的方向是 100%→0%、100%→0%，每一轮的动画方向都是相反的。</li>\n<li>animation-direction 属性值如果是 alternate，那么动画执行的方向是 0%→100%、100%→0%，每 2n + 1 轮的动画方向是相反的。</li>\n<li>animation-direction 属性值如果是 alternate-reverse，那么动画执行的方向是 100%→0%，0%→100%，每 2n 轮的动画方向是相反的。</li>\n</ul>\n<p>由此可见，reverse 和 alternate 关键字的区别是让动画反向播放的轮数不同。从效果表现来看，alternate 关键字的动画效果表现为来回交替播放，这也是为什么 alternate 关键字要被命名为 “alternate”（交替的、来回的）。</p>\n<h3 id="reverse-关键字的应用场景"><a href="#reverse-%E5%85%B3%E9%94%AE%E5%AD%97%E7%9A%84%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>reverse 关键字的应用场景</h3>\n<p>我有个朋友以前做过一件很傻的事情，就是在一个项目中，有的图形需要顺时针旋转，有的图形需要逆时针旋转（类似图 5-32 所示使用锥形渐变实现的加载图形），于是，我这个朋友就定义了两个旋转动画：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="27874046433450750000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`@keyframes spin {\n   from {\n      transform: rotate(0deg);\n   }\n\n   to {\n      transform: rotate(360deg);\n   }\n}\n\n@keyframes spin2 {\n   from {\n      transform: rotate(360deg);\n   }\n\n   to {\n      transform: rotate(0deg);\n   }\n}`, `27874046433450750000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token atrule"><span class="token rule">@keyframes</span> spin</span> <span class="token punctuation">{</span>\n   <span class="token selector">from</span> <span class="token punctuation">{</span>\n      <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>0deg<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">to</span> <span class="token punctuation">{</span>\n      <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>360deg<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token atrule"><span class="token rule">@keyframes</span> spin2</span> <span class="token punctuation">{</span>\n   <span class="token selector">from</span> <span class="token punctuation">{</span>\n      <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>360deg<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">to</span> <span class="token punctuation">{</span>\n      <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>0deg<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>然后：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="58386584768811870000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.turntable {\n   animation: spin 5s 5;\n}\n\n.loading {\n   animation: spin2 1s infinite;\n}`, `58386584768811870000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.turntable</span> <span class="token punctuation">{</span>\n   <span class="token property">animation</span><span class="token punctuation">:</span> spin 5s 5<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.loading</span> <span class="token punctuation">{</span>\n   <span class="token property">animation</span><span class="token punctuation">:</span> spin2 1s infinite<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>这就是 CSS 动画相关知识不扎实的体现，虽然效果是正常的，但代码实在烦琐。其实无须再额外定义一个逆时针动画，直接使用 reverse 关键字即可，代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="8010020784539296000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.turntable {\n   animation: spin 5s 5;\n}\n\n.loading {\n   animation: spin 1s reverse infinite;\n}\n\n@keyframes spin {\n   from {\n      transform: rotate(0deg);\n   }\n\n   to {\n      transform: rotate(360deg);\n   }\n}`, `8010020784539296000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.turntable</span> <span class="token punctuation">{</span>\n   <span class="token property">animation</span><span class="token punctuation">:</span> spin 5s 5<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.loading</span> <span class="token punctuation">{</span>\n   <span class="token property">animation</span><span class="token punctuation">:</span> spin 1s reverse infinite<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token atrule"><span class="token rule">@keyframes</span> spin</span> <span class="token punctuation">{</span>\n   <span class="token selector">from</span> <span class="token punctuation">{</span>\n      <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>0deg<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">to</span> <span class="token punctuation">{</span>\n      <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>360deg<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="alternate-关键字的应用场景"><a href="#alternate-%E5%85%B3%E9%94%AE%E5%AD%97%E7%9A%84%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>alternate 关键字的应用场景</h3>\n<p>先看反例，实现一个钟摆运动。有一些对 CSS 动画不太熟悉的开发者会通过自定义动画关键帧来实现：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="20475213895129740000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.clock-pendulum {\n   transform-origin: top;\n   animation: pendulum 2s infinite;\n}\n\n@keyframes pendulum {\n   0%,\n   100% {\n      transform: rotate(10deg);\n   }\n\n   50% {\n      transform: rotate(-10deg);\n   }\n}`, `20475213895129740000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.clock-pendulum</span> <span class="token punctuation">{</span>\n   <span class="token property">transform-origin</span><span class="token punctuation">:</span> top<span class="token punctuation">;</span>\n   <span class="token property">animation</span><span class="token punctuation">:</span> pendulum 2s infinite<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token atrule"><span class="token rule">@keyframes</span> pendulum</span> <span class="token punctuation">{</span>\n   <span class="token selector">0%,\n   100%</span> <span class="token punctuation">{</span>\n      <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>10deg<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">50%</span> <span class="token punctuation">{</span>\n      <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>-10deg<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>乍一看好像效果还行，其实是有问题的，除了代码烦琐且需要额外计算之外，最大的问题在于运动效果并不准确，因为此时一个动画周期是 10deg→−10deg→10deg。对于钟摆运动，元素两次到达 0deg 的位置时运动速度最快，但是目前的 CSS 时间函数是无法同时指定两处加速点的，因此，上面这种自以为是的用法是无论如何也不可能实现真实的钟摆运动的。</p>\n<p>唯一且最佳的实现方法就是使用 alternate 关键字，同时使用 ease-in-out 作为时间函数，要知道钟摆运动是使用 ease-in-out 时间函数最具代表性的案例。代码示意如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="27853587156950077000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.clock-pendulum {\n   transform-origin: top;\n   animation: pendulum 1s infinite alternate ease-in-out;\n}\n\n@keyframes pendulum {\n   0% {\n      transform: rotate(-10deg);\n   }\n\n   100% {\n      transform: rotate(10deg);\n   }\n}`, `27853587156950077000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.clock-pendulum</span> <span class="token punctuation">{</span>\n   <span class="token property">transform-origin</span><span class="token punctuation">:</span> top<span class="token punctuation">;</span>\n   <span class="token property">animation</span><span class="token punctuation">:</span> pendulum 1s infinite alternate ease-in-out<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token atrule"><span class="token rule">@keyframes</span> pendulum</span> <span class="token punctuation">{</span>\n   <span class="token selector">0%</span> <span class="token punctuation">{</span>\n      <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>-10deg<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">100%</span> <span class="token punctuation">{</span>\n      <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>10deg<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/k93e74?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>不过，凡事无绝对，有些动画需要通过在动画帧中自定义实现，而无法通过 alternate 关键字实现。那么，什么类型的动画无法通过 alternate 关键字实现呢？就是那种来回时间不一致的动画，典型代表就是“呼吸动画”，人的呼吸是吸气快，呼气慢，时间为 3 ～ 7s。这一类模拟人体呼吸节奏的动画都是通过调整 @keyframes 自定义关键帧中间状态的时间来实现的。例如，下面 opacity: 1 的状态就不在 50% 的位置，而是在 70% 的位置：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="93451379148826080000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.breath {\n   animation: breath 7s infinite;\n}\n\n@keyframes breath {\n   0%,\n   100% {\n      opacity: 0;\n   }\n\n   70% {\n      opacity: 1;\n   }\n}`, `93451379148826080000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.breath</span> <span class="token punctuation">{</span>\n   <span class="token property">animation</span><span class="token punctuation">:</span> breath 7s infinite<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token atrule"><span class="token rule">@keyframes</span> breath</span> <span class="token punctuation">{</span>\n   <span class="token selector">0%,\n   100%</span> <span class="token punctuation">{</span>\n      <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">70%</span> <span class="token punctuation">{</span>\n      <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="关于-alternate-reverse"><a href="#%E5%85%B3%E4%BA%8E-alternate-reverse" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>关于 alternate-reverse</h3>\n<p>alternate-reverse 关键字的作用是让动画第一次反向播放，然后不断来回播放。</p>\n<p>alternate-reverse 关键字不能写作 reverse-alternate，这样写是不合法的。至于为何将“alternate”写在“reverse”的前面，可能是按照首字母排序的吧。</p>\n<h2 id="动画播放次数可以是小数"><a href="#%E5%8A%A8%E7%94%BB%E6%92%AD%E6%94%BE%E6%AC%A1%E6%95%B0%E5%8F%AF%E4%BB%A5%E6%98%AF%E5%B0%8F%E6%95%B0" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>动画播放次数可以是小数</h2>\n<p>动画播放的次数是可以任意指定的，很多人并不知道。我们可以使用 animation-iteration-count 属性任意指定动画播放的次数，甚至是小数。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="13538235964336165000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.element {\n   animation: fadeIn 1s linear both;\n   animation-iteration-count: 1.5;\n}\n\n@keyframes fadeIn {\n   0% {\n      opacity: 0;\n   }\n\n   100% {\n      opacity: 1;\n   }\n}`, `13538235964336165000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.element</span> <span class="token punctuation">{</span>\n   <span class="token property">animation</span><span class="token punctuation">:</span> fadeIn 1s linear both<span class="token punctuation">;</span>\n   <span class="token property">animation-iteration-count</span><span class="token punctuation">:</span> 1.5<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token atrule"><span class="token rule">@keyframes</span> fadeIn</span> <span class="token punctuation">{</span>\n   <span class="token selector">0%</span> <span class="token punctuation">{</span>\n      <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">100%</span> <span class="token punctuation">{</span>\n      <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>动画播放的进度为 0%→100%、0%→50%，也就是在第二轮播放的时候，播放到一半就会停止，此时元素的透明度是 0.5。</p>\n<p>大家千万不要误认为 animation-iteration-count 的属性值不能为小数，该属性对小数也是可以精确解析的，这一点和 z-index 属性不一样。对比两个属性的正式语法就可以看出差别了：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="14605355603609293000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`animation-iteration-count: infinite | <number>\nz-index: auto | <integer>`, `14605355603609293000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">animation-iteration-count</span><span class="token punctuation">:</span> infinite | &lt;number>\n<span class="token property">z-index</span><span class="token punctuation">:</span> auto | &lt;integer></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>animation-iteration-count 支持的是 <code class="language-text">&lt;number&gt;</code> 数值类型，而 z-index 支持的是 <code class="language-text">&lt;integer&gt;</code> 整数类型。animation-iteration-count 的中文意思是“动画—迭代—数目”，初始值是 1，表示动画播放 1 次就结束了。</p>\n<h3 id="小数值的作用"><a href="#%E5%B0%8F%E6%95%B0%E5%80%BC%E7%9A%84%E4%BD%9C%E7%94%A8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>小数值的作用</h3>\n<p>小数值的应用场景虽然不多，但是一旦用起来，会让人非常愉悦，因为这非常体现 CSS 技术。例如，淡出效果的 CSS 关键帧代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="60570878994242470000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`@keyframes fadeIn {\n   0% {\n      opacity: 0;\n   }\n\n   100% {\n      opacity: 1;\n   }\n}`, `60570878994242470000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token atrule"><span class="token rule">@keyframes</span> fadeIn</span> <span class="token punctuation">{</span>\n   <span class="token selector">0%</span> <span class="token punctuation">{</span>\n      <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">100%</span> <span class="token punctuation">{</span>\n      <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>页面中有些元素处于禁用态，透明度只有 40%，此时，使用完整的 fadeIn 动画就不合适（因为动画帧中的样式优先级太高，会覆盖 40% 透明度）。于是不少人会重新定义一个禁用元素的淡出动画：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="68411735400341090000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`@keyframes disableFadeIn {\n   0% {\n      opacity: 0;\n   }\n\n   100% {\n      opacity: 0.4;\n   }\n}`, `68411735400341090000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token atrule"><span class="token rule">@keyframes</span> disableFadeIn</span> <span class="token punctuation">{</span>\n   <span class="token selector">0%</span> <span class="token punctuation">{</span>\n      <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">100%</span> <span class="token punctuation">{</span>\n      <span class="token property">opacity</span><span class="token punctuation">:</span> 0.4<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>其实大可不必，还是使用 fadeIn 动画，只要把播放次数调整为小数即可。对于 ease 时间函数，透明度提高到 40% 只需要 25% 的完整动画时间，因此，我们只需要播放 0.25 次即可，CSS 代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="12401533994594849000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.visible {\n   animation: fadeIn 0.25s both;\n}\n\n.visible:disabled {\n   animation: fadeIn 1s 0.25 both;\n}`, `12401533994594849000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.visible</span> <span class="token punctuation">{</span>\n   <span class="token property">animation</span><span class="token punctuation">:</span> fadeIn 0.25s both<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.visible:disabled</span> <span class="token punctuation">{</span>\n   <span class="token property">animation</span><span class="token punctuation">:</span> fadeIn 1s 0.25 both<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>HTML 代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="99365728251237270000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<input value=&quot;可用&quot; /> <input value=&quot;禁用&quot; disabled />`, `99365728251237270000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>可用<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>禁用<span class="token punctuation">"</span></span> <span class="token attr-name">disabled</span> <span class="token punctuation">/></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>效果如图 5-63 所示，可以看到禁用态输入框的透明度只有 40%。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-03-12-01-20-27-03d398bd2629344ea81f6ac2d0b60a4b-115a3.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 55.68039950062422%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABCElEQVQoz5WR4U6DMBSFef83MuuAwjLn0F+LoCbKMrOQuWJChQKlBQ90LhnJUE9uSG/v+Wg5WF3Xaa055+WgqqrKScEAMxCAloGFEGEYEkKiKDI73XWBv4DxyiRJ4jhmjGGnbdt/wEVR4AlGKYVZPSljPsEQmKaRTS+J5W+lDGWZS+Y5L4q/Vp5n5rvOcLbfv+922+PxUFW4Fxfi61rhpDHM2CFNP7LscwL7gS9PLktR12VdIyr8STEqTEftCZZSIjqle0nZSJNan9+Q3tD3BqXNAKPeNjTWjLhPzy+vb1vG0rlDXW9hO97cdqm/JDZ1qI+Ff7vebB49f7kK7ld3wc3MWQcPDl18A7zcdP98JCaXAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 03 12 01 20 27" title="" data-src="/static/2022-03-12-01-20-27-03d398bd2629344ea81f6ac2d0b60a4b-fee1c.png" data-srcset="/static/2022-03-12-01-20-27-03d398bd2629344ea81f6ac2d0b60a4b-a67b7.png 200w,\n/static/2022-03-12-01-20-27-03d398bd2629344ea81f6ac2d0b60a4b-0b187.png 400w,\n/static/2022-03-12-01-20-27-03d398bd2629344ea81f6ac2d0b60a4b-fee1c.png 800w,\n/static/2022-03-12-01-20-27-03d398bd2629344ea81f6ac2d0b60a4b-115a3.png 801w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/s60jty?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>如果只希望使用淡出动画的后半截，则使用 animation-iteration-count 小数值的方法就不管用了。</p>\n<p>此时可以使用 animation-delay 负属性值实现我们想要的效果：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="63129153667233860000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.visible-second-half {\n   animation: fadeIn 1s -0.25s;\n}`, `63129153667233860000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.visible-second-half</span> <span class="token punctuation">{</span>\n   <span class="token property">animation</span><span class="token punctuation">:</span> fadeIn 1s -0.25s<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>如果只希望使用淡出动画的中间部分，可以同时使用 animation-iteration-count 小数值和 animation-delay 负时间值。例如，选取中间 50% 的时间区域：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="56518698275121970000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.visible-middle-part {\n   animation: fadeIn 1s -0.25s 0.75;\n}`, `56518698275121970000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.visible-middle-part</span> <span class="token punctuation">{</span>\n   <span class="token property">animation</span><span class="token punctuation">:</span> fadeIn 1s -0.25s 0.75<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<h3 id="关于-infinite"><a href="#%E5%85%B3%E4%BA%8E-infinite" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>关于 infinite</h3>\n<p>关键字属性值 infinite 表示无限，作用是让动画一刻不停地无限播放，钟摆运动或者 loading 旋转就属于这样的动画。</p>\n<h3 id="关于值范围"><a href="#%E5%85%B3%E4%BA%8E%E5%80%BC%E8%8C%83%E5%9B%B4" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>关于值范围</h3>\n<p>animation-iteration-count 的属性值不能是负数，否则会被认为不合法，但是可以是 0，表示动画一次也不播放。因此，如果想要重置 animation 属性，可以使用 animation: 0，比使用 animation: none 的代码少。</p>\n<h2 id="forwards-和-backwards-属性值究竟是什么意思"><a href="#forwards-%E5%92%8C-backwards-%E5%B1%9E%E6%80%A7%E5%80%BC%E7%A9%B6%E7%AB%9F%E6%98%AF%E4%BB%80%E4%B9%88%E6%84%8F%E6%80%9D" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>forwards 和 backwards 属性值究竟是什么意思</h2>\n<p>animation-fill-mode 属性的字面意思是“动画填充模式”，主要用来定义动画在执行时间之外应用的值。</p>\n<p>animation-fill-mode 属性的语法如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="9999182309232046000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`animation-fill-mode: none; /* 默认值 */\nanimation-fill-mode: forwards;\nanimation-fill-mode: backwards;\nanimation-fill-mode: both;`, `9999182309232046000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">animation-fill-mode</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span> <span class="token comment">/* 默认值 */</span>\n<span class="token property">animation-fill-mode</span><span class="token punctuation">:</span> forwards<span class="token punctuation">;</span>\n<span class="token property">animation-fill-mode</span><span class="token punctuation">:</span> backwards<span class="token punctuation">;</span>\n<span class="token property">animation-fill-mode</span><span class="token punctuation">:</span> both<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>其中 none 是默认值，表示动画开始之前和动画结束之后不会对元素应用 @keyframes 规则中定义的任何样式。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="24702385595369546000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.element {\n   opacity: 0.5;\n   animation: fadeIn 2s 1s;\n}\n\n@keyframes fadeIn {\n   0% {\n      opacity: 0;\n   }\n\n   100% {\n      opacity: 1;\n   }\n}`, `24702385595369546000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.element</span> <span class="token punctuation">{</span>\n   <span class="token property">opacity</span><span class="token punctuation">:</span> 0.5<span class="token punctuation">;</span>\n   <span class="token property">animation</span><span class="token punctuation">:</span> fadeIn 2s 1s<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token atrule"><span class="token rule">@keyframes</span> fadeIn</span> <span class="token punctuation">{</span>\n   <span class="token selector">0%</span> <span class="token punctuation">{</span>\n      <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">100%</span> <span class="token punctuation">{</span>\n      <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>此时的 .element 元素的透明度变化过程如下。</p>\n<ol>\n<li>透明度 0.5 保持 1s。</li>\n<li>透明度从 0.5 突变到 0，然后透明度从 0 逐渐过渡到 1，过程持续 2s。</li>\n<li>透明度从 1 突变到 0.5，并保持不变。</li>\n</ol>\n<p>实际上，这里的 .element 元素的透明度无论设置为多少，都会有透明度突变的糟糕体验，这显然不是我们想要的，因此需要使用 animation-fill-mode 属性优化动画效果。但 forwards 和 backwards 这两个关键字属性值不太好理解，下面详细讲解一下。</p>\n<h3 id="forwards-和-backwards-的含义"><a href="#forwards-%E5%92%8C-backwards-%E7%9A%84%E5%90%AB%E4%B9%89" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>forwards 和 backwards 的含义</h3>\n<p>forwards 是“前进”的意思，表示动画结束后（什么时候结束由 animation-iteration-count 属性决定），元素将应用当前动画结束时的属性值。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="20952974880642650000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.element {\n   opacity: 0.5;\n   animation: fadeIn 2s 1s forwards;\n}\n\n@keyframes fadeIn {\n   0% {\n      opacity: 0;\n   }\n\n   100% {\n      opacity: 1;\n   }\n}`, `20952974880642650000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.element</span> <span class="token punctuation">{</span>\n   <span class="token property">opacity</span><span class="token punctuation">:</span> 0.5<span class="token punctuation">;</span>\n   <span class="token property">animation</span><span class="token punctuation">:</span> fadeIn 2s 1s forwards<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token atrule"><span class="token rule">@keyframes</span> fadeIn</span> <span class="token punctuation">{</span>\n   <span class="token selector">0%</span> <span class="token punctuation">{</span>\n      <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">100%</span> <span class="token punctuation">{</span>\n      <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>此时的 .element 元素在动画结束之后会使用 100% 这一帧的透明度属性值，因此透明度变化过程如下。</p>\n<ol>\n<li>透明度 0.5 保持 1s。</li>\n<li>透明度从 0.5 突变到 0，然后透明度从 0 逐渐过渡到 1，过程持续 2s。</li>\n<li>透明度一直保持为 1（forwards 的作用）。</li>\n</ol>\n<p>backwards 是“后退”的意思，表示在动画开始之前，元素将应用当前动画第一轮播放的第一帧的属性值。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="53248729223349950000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.element {\n   opacity: 0.5;\n   animation: fadeIn 2s 1s backwards;\n}\n\n@keyframes fadeIn {\n   0% {\n      opacity: 0;\n   }\n\n   100% {\n      opacity: 1;\n   }\n}`, `53248729223349950000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.element</span> <span class="token punctuation">{</span>\n   <span class="token property">opacity</span><span class="token punctuation">:</span> 0.5<span class="token punctuation">;</span>\n   <span class="token property">animation</span><span class="token punctuation">:</span> fadeIn 2s 1s backwards<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token atrule"><span class="token rule">@keyframes</span> fadeIn</span> <span class="token punctuation">{</span>\n   <span class="token selector">0%</span> <span class="token punctuation">{</span>\n      <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">100%</span> <span class="token punctuation">{</span>\n      <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>此时的 .element 元素在动画开始执行之前会使用 0% 这一帧的透明度属性值，因此透明度变化过程如下。</p>\n<ol>\n<li>透明度为 0 并保持 1s 不变（backwards 的作用）。</li>\n<li>透明度由 0 逐渐过渡到 1，过程持续 2s。</li>\n<li>透明度从 1 突变到 0.5，并保持不变。</li>\n</ol>\n<p>有人可能会奇怪，forwards 语义包含“前”，为什么应用的却是最后一帧样式？而 backwards 语义包含“后”，为什么应用的却是第一帧样式？</p>\n<p>这是因为这里的 forwards 指动画向前，backwards 指动画向后。如果把时间画在一把尺子上，则动画所经过的时间就是这把尺子的一部分，如图 5-64 红色部分所示，可以看到，动画向前的方向是动画的结束位置；动画向后的方向是动画的开始位置。也就是说 forwards 表示动画的结束，backwards 表示动画的开始。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-03-12-01-37-50-03d6a08610d6409d370a812153320915-8abf3.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 20.242214532871973%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsSAAALEgHS3X78AAAAvElEQVQI122OwQqCQBRF/f8fKFE3LrQvEHXjDxS0U4iiTEhy9L2ZeTNjFE4a1Kpzt+fAdeyP18uWpa1r+3zav7StrapF++IgIgDgMuwZ64oC8hzSdEgS2GwgiiBJhjSFLLvned918PGXBNERUnIhFCmtNXFOcUzrlfF95XsUBDoIlOdp39OuS2GohTDjSERzIomcaZrmA1LS8XRmHWPG3MbHGfmph9aYRqqaiwMbDqy/Cnmpm+1uD8jnZA7fUSPYT9c++0UAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 03 12 01 37 50" title="" data-src="/static/2022-03-12-01-37-50-03d6a08610d6409d370a812153320915-fee1c.png" data-srcset="/static/2022-03-12-01-37-50-03d6a08610d6409d370a812153320915-a67b7.png 200w,\n/static/2022-03-12-01-37-50-03d6a08610d6409d370a812153320915-0b187.png 400w,\n/static/2022-03-12-01-37-50-03d6a08610d6409d370a812153320915-fee1c.png 800w,\n/static/2022-03-12-01-37-50-03d6a08610d6409d370a812153320915-8abf3.png 1156w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>因此，forwards 的“前进”指的是最后一帧继续前进的样式，backwards 的“后退”指的是第一帧还要后退的样式。</p>\n<h3 id="forwards-和-backwards-的细节"><a href="#forwards-%E5%92%8C-backwards-%E7%9A%84%E7%BB%86%E8%8A%82" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>forwards 和 backwards 的细节</h3>\n<p>由于动画的最后一帧是由 animation-direction 和 animation-iteration-count 属性共同决定的，因此 forwards 有时候对应的是 @keyframes 规则中的 to 或 100% 对应的帧，有时候对应的是 @keyframes 规则中的 from 或 0% 对应的帧，具体对应细节如下表。</p>\n<table>\n<thead>\n<tr>\n<th align="left">animation-direction</th>\n<th align="left">animation-iteration-count</th>\n<th align="left">最后一个关键帧</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align="left">normal</td>\n<td align="left">奇数或偶数（不包括 0）</td>\n<td align="left">100% 或 to</td>\n</tr>\n<tr>\n<td align="left">reverse</td>\n<td align="left">奇数或偶数（不包括 0）</td>\n<td align="left">0% 或 from</td>\n</tr>\n<tr>\n<td align="left">alternate</td>\n<td align="left">正偶数</td>\n<td align="left">0% 或 from</td>\n</tr>\n<tr>\n<td align="left">alternate</td>\n<td align="left">奇数</td>\n<td align="left">100% 或 to</td>\n</tr>\n<tr>\n<td align="left">alternate-reverse</td>\n<td align="left">正偶数</td>\n<td align="left">100% 或 to</td>\n</tr>\n<tr>\n<td align="left">alternate-reverse</td>\n<td align="left">奇数</td>\n<td align="left">0% 或 from</td>\n</tr>\n<tr>\n<td align="left">normal 或 alternate</td>\n<td align="left">0</td>\n<td align="left">0% 或 from</td>\n</tr>\n<tr>\n<td align="left">reverse 或 alternate-reverse</td>\n<td align="left">0</td>\n<td align="left">100% 或 to</td>\n</tr>\n</tbody>\n</table>\n<p>而 backwards 只取决于 animation-direction 的属性值，因为 backwards 设置的是动画第一次播放的第一帧的状态，与 animation-iteration-count 次数没有任何关系，具体对应细节如下表所示。</p>\n<table>\n<thead>\n<tr>\n<th align="left">animation-direction</th>\n<th align="left">第一个关键帧</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align="left">normal 或 alternate</td>\n<td align="left">0% 或 from</td>\n</tr>\n<tr>\n<td align="left">reverse 或 alternate-reverse</td>\n<td align="left">100% 或 to</td>\n</tr>\n</tbody>\n</table>\n<p>可以看出，其实 animation-iteration-count 的属性值为 0 的时候，forwards 等同于 backwards。</p>\n<h3 id="记不住-forwards-和-backwards-怎么办"><a href="#%E8%AE%B0%E4%B8%8D%E4%BD%8F-forwards-%E5%92%8C-backwards-%E6%80%8E%E4%B9%88%E5%8A%9E" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>记不住 forwards 和 backwards 怎么办</h3>\n<p>一个知识点往往需要反复阅读与实践才能记忆深刻，所以如果不常写 CSS 代码，则一段时间后记不清应该使用 forwards 还是 backwards 是很正常的，这个时候干脆就使用 both 关键字代替。</p>\n<p>animation-fill-mode: both 可以让元素的动画在延时等待时保持第一帧的样式，在动画结束后保持最后一帧的样式，适用于绝大多数的开发场景。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="2400282528102848500"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.element {\n   opacity: 0.5;\n   animation: fadeIn 2s 1s both;\n}\n\n@keyframes fadeIn {\n   0% {\n      opacity: 0;\n   }\n\n   100% {\n      opacity: 1;\n   }\n}`, `2400282528102848500`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.element</span> <span class="token punctuation">{</span>\n   <span class="token property">opacity</span><span class="token punctuation">:</span> 0.5<span class="token punctuation">;</span>\n   <span class="token property">animation</span><span class="token punctuation">:</span> fadeIn 2s 1s both<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token atrule"><span class="token rule">@keyframes</span> fadeIn</span> <span class="token punctuation">{</span>\n   <span class="token selector">0%</span> <span class="token punctuation">{</span>\n      <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">100%</span> <span class="token punctuation">{</span>\n      <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>此时的 .element 元素的透明度变化过程如下。</p>\n<ol>\n<li>透明度为 0 并保持 1s 不变（等同于 backwards 的作用）。</li>\n<li>透明度从 0 逐渐过渡到 1，时间持续 2s。</li>\n<li>透明度保持为 1 不变（等同于 forwards 的作用）。</li>\n</ol>\n<p>可以看到元素的透明度变化过程很流畅、很自然。</p>\n<p>还有一点小小的建议，依赖 CSS 动画保持元素的显隐状态有功能上的风险，例如动画如果没执行，元素就永远显示不出来。因此，常规的 CSS 语句里的元素样式也要同步变化，例如下面的元素显示是通过添加类名 .active 触发的，此时需要同时设置 opacity: 1，代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="32794668500613054000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.element {\n   opacity: 0;\n}\n\n.element.active {\n   opacity: 1;\n   animation: fadeIn 2s 1s both;\n}\n\n@keyframes fadeIn {\n   0% {\n      opacity: 0;\n   }\n\n   100% {\n      opacity: 1;\n   }\n}`, `32794668500613054000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.element</span> <span class="token punctuation">{</span>\n   <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.element.active</span> <span class="token punctuation">{</span>\n   <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>\n   <span class="token property">animation</span><span class="token punctuation">:</span> fadeIn 2s 1s both<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token atrule"><span class="token rule">@keyframes</span> fadeIn</span> <span class="token punctuation">{</span>\n   <span class="token selector">0%</span> <span class="token punctuation">{</span>\n      <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">100%</span> <span class="token punctuation">{</span>\n      <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="如何暂停和重启-css-动画"><a href="#%E5%A6%82%E4%BD%95%E6%9A%82%E5%81%9C%E5%92%8C%E9%87%8D%E5%90%AF-css-%E5%8A%A8%E7%94%BB" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>如何暂停和重启 CSS 动画</h2>\n<p>CSS 动画是可以暂停的。</p>\n<p>使用 animation-play-state 属性可以控制 CSS 动画的播放和暂停，语法如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="9778843318937702000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 播放 */\nanimation-play-state: running;\n/* 暂停 */\nanimation-play-state: paused;`, `9778843318937702000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 播放 */</span>\n<span class="token property">animation-play-state</span><span class="token punctuation">:</span> running<span class="token punctuation">;</span>\n<span class="token comment">/* 暂停 */</span>\n<span class="token property">animation-play-state</span><span class="token punctuation">:</span> paused<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>只要设置 animation-play-state 的属性值为 paused 就可以让一个正在播放的 CSS 动画暂停。举个例子，使用 CSS Sprites 背景图和 animation 属性实现一个可暂停的动图效果，CSS 代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="66716270503764410000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.love {\n   width: 100px;\n   height: 100px;\n   background: url(heart-animation.png) no-repeat;\n   background-size: 2900%;\n   animation: heart-burst steps(28) 0.8s infinite both;\n}\n\n.stop {\n   animation-play-state: paused;\n}\n\n@keyframes heart-burst {\n   0% {\n      background-position: 0%;\n   }\n\n   100% {\n      background-position: 100%;\n   }\n}`, `66716270503764410000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.love</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>\n   <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>heart-animation.png<span class="token punctuation">)</span></span> no-repeat<span class="token punctuation">;</span>\n   <span class="token property">background-size</span><span class="token punctuation">:</span> 2900%<span class="token punctuation">;</span>\n   <span class="token property">animation</span><span class="token punctuation">:</span> heart-burst <span class="token function">steps</span><span class="token punctuation">(</span>28<span class="token punctuation">)</span> 0.8s infinite both<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.stop</span> <span class="token punctuation">{</span>\n   <span class="token property">animation-play-state</span><span class="token punctuation">:</span> paused<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token atrule"><span class="token rule">@keyframes</span> heart-burst</span> <span class="token punctuation">{</span>\n   <span class="token selector">0%</span> <span class="token punctuation">{</span>\n      <span class="token property">background-position</span><span class="token punctuation">:</span> 0%<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">100%</span> <span class="token punctuation">{</span>\n      <span class="token property">background-position</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/r7bnpv?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>点击演示页面中间区域的按钮，会给 .love 元素添加类名 .stop，此时就会看到类似 GIF 动图的“心花怒放”效果动画瞬间被暂停了，如图 5-65 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-03-12-15-07-20-0ea6f63de575cd1c9197e1b9bf052f63-b25dc.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 42.78892072588347%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA5ElEQVQoz41RQW7CMBDk+Uh9A1I59AEceAQqNKRBtQ1pQQQIJZQYm4CJvZtuyA1U1SN7NSN5tKNxq3oAOkCHDaNb/Y3WvRPr1/tub/v0jFjipYBcwiHH89nDDI7W/bz003aHJCgFWYZFgWX5v/m2HOiUTWIAl+1oesUGAGstuQnuRkBKtNbLrJQy5jKffwkhzPV60hqM8S1MHqXSKv6MoyjSJ02yqdC3bUpO0zoHDcOqLuHhR2pzslofcvnBeBBGSbKazuLNJt2m34vFkggX07cgHLyOxuGEccH4bDgKhqTeJ4zxX+3TCXRNtmfQAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 03 12 15 07 20" title="" data-src="/static/2022-03-12-15-07-20-0ea6f63de575cd1c9197e1b9bf052f63-fee1c.png" data-srcset="/static/2022-03-12-15-07-20-0ea6f63de575cd1c9197e1b9bf052f63-a67b7.png 200w,\n/static/2022-03-12-15-07-20-0ea6f63de575cd1c9197e1b9bf052f63-0b187.png 400w,\n/static/2022-03-12-15-07-20-0ea6f63de575cd1c9197e1b9bf052f63-fee1c.png 800w,\n/static/2022-03-12-15-07-20-0ea6f63de575cd1c9197e1b9bf052f63-b25dc.png 1047w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>相比传统的 GIF 动图，这种使用 animation 实现的动图效果，支持无损 PNG，图像质量更高，而且可以随时播放和暂停。</p>\n<p>配合 animation-delay 负值，动画暂停可以让元素停留在动画的任一时段，我们可以利用这一特性解决一些 CSS 难题。例如，希望设置 50% 透明度的 deepskyblue 色值就可以这样处理：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="45261661545305420000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`p {\n   animation: opacityColor 1s -0.5s linear paused;\n}\n\n@keyframes opacityColor {\n   0% {\n      color: transparent;\n   }\n\n   100% {\n      color: deepskyblue;\n   }\n}`, `45261661545305420000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">p</span> <span class="token punctuation">{</span>\n   <span class="token property">animation</span><span class="token punctuation">:</span> opacityColor 1s -0.5s linear paused<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token atrule"><span class="token rule">@keyframes</span> opacityColor</span> <span class="token punctuation">{</span>\n   <span class="token selector">0%</span> <span class="token punctuation">{</span>\n      <span class="token property">color</span><span class="token punctuation">:</span> transparent<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">100%</span> <span class="token punctuation">{</span>\n      <span class="token property">color</span><span class="token punctuation">:</span> deepskyblue<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>此时 <code class="language-text">&lt;p&gt;</code> 元素的 color 色值就是 50% 透明度的 deepskyblue。</p>\n<h3 id="css-动画重启"><a href="#css-%E5%8A%A8%E7%94%BB%E9%87%8D%E5%90%AF" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>CSS 动画重启</h3>\n<p>这里顺便讲一下如何重启 CSS 动画，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="70629631914016650000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<div class=&quot;element active&quot;></div>\n<style>\n   .element.active {\n      animation: fadeIn 2s 1s both;\n   }\n\n   @keyframes fadeIn {\n      0% {\n         opacity: 0;\n      }\n\n      100% {\n         opacity: 1;\n      }\n   }\n</style>`, `70629631914016650000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>element active<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n   <span class="token selector">.element.active</span> <span class="token punctuation">{</span>\n      <span class="token property">animation</span><span class="token punctuation">:</span> fadeIn 2s 1s both<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token atrule"><span class="token rule">@keyframes</span> fadeIn</span> <span class="token punctuation">{</span>\n      <span class="token selector">0%</span> <span class="token punctuation">{</span>\n         <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n      <span class="token punctuation">}</span>\n\n      <span class="token selector">100%</span> <span class="token punctuation">{</span>\n         <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>\n      <span class="token punctuation">}</span>\n   <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>想要 CSS 动画重新执行一遍，可以使用下面的 JavaScript 代码（假设 .element 元素的 DOM 对象是 ele）：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="29047477844309920000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`ele.classList.remove(\'active\');\nele.offsetWidth; // 触发重绘\nele.classlist.add(\'active\');`, `29047477844309920000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js">ele<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">\'active\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nele<span class="token punctuation">.</span>offsetWidth<span class="token punctuation">;</span> <span class="token comment">// 触发重绘</span>\nele<span class="token punctuation">.</span>classlist<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">\'active\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>如果不是重新执行动画，而是让已经暂停的动画继续播放，则设置 animation-play-state 属性值为 running 即可。</p>\n<h2 id="深入理解-steps-函数"><a href="#%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3-steps-%E5%87%BD%E6%95%B0" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>深入理解 steps() 函数</h2>\n<p>animation-timing-function 的属性值由 cubic-bezier() 函数和 steps() 函数组成。steps() 函数可以让动画效果不连续，就像楼梯，与之相对应的 cubic-bezier() 函数则更像是平滑的无障碍坡道，如图 5-66 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-03-12-15-18-09-bde74fdcdfd5662f4285ba254a76f14c-9ce72.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 49.25816023738873%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABlUlEQVQoz2P4DwN///4Fklu3bk6ICZk/u3fDygV7tm3YvHH1/r1bD+3fdOb4zgf3rvxHBQxw1p8/f4Dk+nWrbe3NK4uzd06bWFmcl5uX0dfRvHT6pGlTeo8c2gNS9+8fFs0Qmzdt2hAdGrShq6O9uiK/MHdiX9u22dMWT+1raKiaN282TpshmjdsWB8XElhZkJeSkdze0bh3zvSlk3oam6tKS/NnzJpGQPOxE8dDI0JTU+KbW6p3TJuwatqEhpbqlubawpKiKVMnEdB88ODBzOzM1vaGg0vnL53QVddQXltTVl1XXViU39VeT0Dz0WPHMnKzZnQ0r5rUX1lbUVtbVlldUdtQm54a09XeQEDz/gMHcgvyq6vK8gqyS8sKyspLCouL8nIzE+LDe/u6cGr+B46Djx8/PXz48Nmzpw8e3H/06OHjx48eAFn37t2/f//Fi+fomi9evnLn7r13794/ffb8zt3712/cOn/x8rXrN69cvf7t2/fnL189e/4ShF68vHX77olTZ27eunP6zLnjJ8+cO3cRALZt3KSTTzUAAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 03 12 15 18 09" title="" data-src="/static/2022-03-12-15-18-09-bde74fdcdfd5662f4285ba254a76f14c-fee1c.png" data-srcset="/static/2022-03-12-15-18-09-bde74fdcdfd5662f4285ba254a76f14c-a67b7.png 200w,\n/static/2022-03-12-15-18-09-bde74fdcdfd5662f4285ba254a76f14c-0b187.png 400w,\n/static/2022-03-12-15-18-09-bde74fdcdfd5662f4285ba254a76f14c-fee1c.png 800w,\n/static/2022-03-12-15-18-09-bde74fdcdfd5662f4285ba254a76f14c-9ce72.png 1011w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>cubic-bezier() 函数在 5.3.2 节已经详细介绍过，这里专门深入介绍 steps() 函数及其相对应的关键字。</p>\n<p>学习 steps() 函数有一定的难度，主要是容易分不清楚 start 和 end。</p>\n<p>常见的 steps() 函数用法示例如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="39980789426966634000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`steps(5, end);\nsteps(2, start);`, `39980789426966634000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token function">steps</span><span class="token punctuation">(</span>5<span class="token punctuation">,</span> end<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token function">steps</span><span class="token punctuation">(</span>2<span class="token punctuation">,</span> start<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>语法表示就是：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="40352341021319320000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`steps(number, position);`, `40352341021319320000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token function">steps</span><span class="token punctuation">(</span>number<span class="token punctuation">,</span> position<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>先讲一下这一语法中的几个关键点。</p>\n<ul>\n<li>\n<p>number 指数值，且是整数值，这个很好理解，表示把动画分成了多少段。假设有如下 @keyframes 规则，定义了一段从 0 ～ 100px 的位移：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="26039693058819100000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`@keyframes move {\n  0% {\n     left: 0;\n  }\n\n  100% {\n     left: 100px;\n  }\n}`, `26039693058819100000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token atrule"><span class="token rule">@keyframes</span> move</span> <span class="token punctuation">{</span>\n  <span class="token selector">0%</span> <span class="token punctuation">{</span>\n     <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token selector">100%</span> <span class="token punctuation">{</span>\n     <span class="token property">left</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>同时 number 参数的值是 5，则相当于把这段移动的距离分成了 5 段，如图 5-67 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-03-12-15-25-07-d0288e1c2cbb49392873c5147c343650-5fff1.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 27.2644098810613%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAyUlEQVQY042Oy26DMBBF/f8f1SwqkQVSHjXCxI9CU8mIRDwNeGwyUKddZtOzOrr3jjRkW1f/wPfkdu9h2zalzUE2C66I61G1UpsQVi3s03tjfPCTamjeBUFEUtf19fr9wRSXnwmlXObJJb9wTinNRMFVcT6fQsVEkTLG0jSTX5nIpRDhnkRRJARHXKy18zwDWO/+dPYOHMA0TRascxDS4I9lUUrudm9xHBOttTHP3/7POI5VVZVlSV67rusD/hcAGAbTtG3fD6/LH4FYGOiMhabRAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 03 12 15 25 07" title="" data-src="/static/2022-03-12-15-25-07-d0288e1c2cbb49392873c5147c343650-fee1c.png" data-srcset="/static/2022-03-12-15-25-07-d0288e1c2cbb49392873c5147c343650-a67b7.png 200w,\n/static/2022-03-12-15-25-07-d0288e1c2cbb49392873c5147c343650-0b187.png 400w,\n/static/2022-03-12-15-25-07-d0288e1c2cbb49392873c5147c343650-fee1c.png 800w,\n/static/2022-03-12-15-25-07-d0288e1c2cbb49392873c5147c343650-5fff1.png 1093w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n<li>\n<p>position 指关键字属性值，是可选参数，表示动画跳跃执行是在时间段的开始还是结束。其支持众多关键字值，这里先了解一下传统的 start 和 end 关键字。</p>\n</li>\n<li>\n<p>start 表示在时间段的开头处跳跃。</p>\n</li>\n<li>\n<p>end 表示在时间段的结束处跳跃，是默认值。</p>\n</li>\n</ul>\n<h3 id="深入理解-start-和-end-关键字"><a href="#%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3-start-%E5%92%8C-end-%E5%85%B3%E9%94%AE%E5%AD%97" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>深入理解 start 和 end 关键字</h3>\n<p>steps() 函数本质上是一个阶跃函数，阶跃函数是一种特殊的连续时间函数，可以实现从 0 突变到 1 的过程。图 5-68 所示的 steps(1, start)、steps(1, end)、steps(3, start)、steps(3, end) 就是阶跃函数。</p>\n<p>通过分析图 5-68 所示内容，我们可以得到对 start 和 end 关键字的进一步解释。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-03-12-15-38-46-3e158fb310ea4d6035e0d732876b9f8c-a3fce.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 515px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 129.51456310679612%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAaCAIAAAA44esqAAAACXBIWXMAAAsSAAALEgHS3X78AAAC5UlEQVQ4y51U23LTMBDV/38KQ6fD8MQAbSlPMKQlGSCXNnVsJ77JN8mWL/IlHFuOmzalD+xoZFnao909uysiy/xmbplu4oXCDbpBw8yw+WIT7vf7tm0x+75fVdX+IG0/r82Y4GPRRORSVnUph1GUdV7WI5hzXhTF/qn4cd6BWVo2Tbt/SRQ4z3G3fHaUCEkopZ7P/gWGpGlqWVZZls/3M0kYi2nAXwHDrOd5p24nAOMTJ0X9qtvFS25z0YPBcw6KajBa1epTVQqm5pglERNV3YJLNWMEIAy36jvqB2EcRbvdbrvdxnEMPzEPWWnr1YO92EQ0yrYuu9s4TiBsP9W2IYGppmmUJ1EUKQw2xyBxit8h/kxQz1VrKUuifIOA9ul0mvQyao+Rw/28KOaLBbwD/+pqMkTPuaZpuq4DiWMhxClzjuNABxHBQVjqwPBKsXJwsq2aFluyao42m9NEgDkCB4IgGK8IWD7546G2f6+DkW3YUUXSDtKB51pIFE9jkFXdcFE+yzOiOK0wnvaEhREYbk03RSchB0hJD3sEZ1kGblVQGNMVhdrWTQjo8VwHaqjViBdNH/CxBcYYiDy4PfRTIbsUk7atZ0tLt5nhcJHJMbBjtoCH5ayoZ3edTTS/OlL9LArZyKo9rfChtousqSV0bNqlEJqPYMdPGE9QPUpQA8i26gQFtr1Yt+KQFw5lZZFDBwroNpJlwqFRKjLVeqgEhIciRdmo69EpKH4nyNBGLo1R/uAPeOSIHHuItwoYLBDnk0frQAF8ggF1hJkcqlyapjmZTHDfaesrChnjs9nMMAzogMIuZnWAOG3bBgwuUd9HDArT9NL2KxSi47pRH1EYho+N8X+CN4zf3P7UDRPvwXyxgh1K/fWDtlje3a+1+WKJBXbCrtcZzFq2s9no09mvIIwIfs7O3/+Y3C5X9x8+XuD5Ngzz4uoa68+X1zh68/b808XV5Zev2Pn2fTK5mUL57dk7baP/BR8Z1439FXj8AAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 03 12 15 38 46" title="" data-src="/static/2022-03-12-15-38-46-3e158fb310ea4d6035e0d732876b9f8c-a3fce.png" data-srcset="/static/2022-03-12-15-38-46-3e158fb310ea4d6035e0d732876b9f8c-96d1c.png 200w,\n/static/2022-03-12-15-38-46-3e158fb310ea4d6035e0d732876b9f8c-2b9d0.png 400w,\n/static/2022-03-12-15-38-46-3e158fb310ea4d6035e0d732876b9f8c-a3fce.png 515w" data-sizes="(max-width: 515px) 100vw, 515px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<ul>\n<li>\n<p>start：表示直接开始，也就是时间段才开始，就已经执行了一个距离段。动画执行的 5 个分段点是下面这 5 个，起始点被忽略，因为时间一开始直接就到了第二个点，如图 5-69 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-03-12-15-43-15-08a4a2e8d1f51723afbddc1bfec03a4e-0f56a.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 47.142857142857146%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAABkklEQVQoz42SS2/aUBCF/c+ziiJlk+zaVdWKVSlNG3YNpHlBSpQ44BCitHJBMcYvAjbEsjE2/uqHrApUVTnS1b0687gzZ0YgQbxapRdhv0/YbhN3u8xPTnAmk4yP45jXQigSpiGLwQBPkgjEW4zTUyxNy5xWqT1J+pojFI8UwXSKKoroUgez0yYIgrXfVxvVbNadJSwMiulShM8jsPy/jpq9YOYn6aIQN4hRpwuWQZhFGrMl4/kSXuZ5y77vYTszGg8m3eMLuqUPiOc3tO6G3Fc+0zuscv1oICXc7ft3dM5atHoaYvmA3qePXD+MuKpfcVcqoV9eIsiyzK+fjzzPbKRKhaOdHXq1I7RBn7P9fb7v7aEqT8jHdb5tbyN+/cJYH/Hj7Rvqu7s8/Za5r9c43NriplxGaDabqKqaaxBF2IpCmNwp3GQoM00vBMIZDpNWc2F828HRc5uS8LVqlYtGI9ewmOT/Jf83NldqbcpRUplhmjiJpp7n4bouk8mU0UjDMExM08IaP2NZ44xPuTCM1lbrDyqOo2UckIbjAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 03 12 15 43 15" title="" data-src="/static/2022-03-12-15-43-15-08a4a2e8d1f51723afbddc1bfec03a4e-fee1c.png" data-srcset="/static/2022-03-12-15-43-15-08a4a2e8d1f51723afbddc1bfec03a4e-a67b7.png 200w,\n/static/2022-03-12-15-43-15-08a4a2e8d1f51723afbddc1bfec03a4e-0b187.png 400w,\n/static/2022-03-12-15-43-15-08a4a2e8d1f51723afbddc1bfec03a4e-fee1c.png 800w,\n/static/2022-03-12-15-43-15-08a4a2e8d1f51723afbddc1bfec03a4e-0f56a.png 1050w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n<li>\n<p>end：表示戛然而止，也就是时间段一结束，当前动画执行就停止。于是，动画执行的 5 个分段点是下面这 5 个，结束点被忽略，因为在要执行结束点的时候已经没时间了，如图 5-70 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-03-12-15-44-26-39b42c1756a91bbd1c41dd3628feb83d-7ea00.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 41.527001862197395%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAABSklEQVQY05VQTW+CQBTcv+zNePTipT2aeGwTj5peGntr0QLWD0SMBZHyIYjIYi1EqARYtiv04KlJ3+lldmbezAKc5xhjdDql0ykWxZBlfU0jSF7gfw/ACJXiaD6PJ1M4ZOFKuoizrGTkhFAaEb+CfCUmIMZReHYWS6go1lw4Hr7Ko99xGicXizRDUZxmBUqQ6JyUuYAvCPvxhJEOlhMcWVpbb0daaDCjzzdmKMKFaHuvffVdpWXfnC0hQ89kT9D97JIrB+Nm86nRUGV5RVGdSoVtty0XPt/cPtbriiiuKapbq7H3dzvHoVuth2pV4jjDNHmeRwiBl06n3+2SKmkcuxwXeB7JE+52riSRcEkB+hASwsm2HZ4ncXVd7/V6g8EAoKLzf4d0TpIE/K7FB5imtd+7YRgGfrDZWMqHalpbw9hYW5ss5NW27WuLHyn9tg0e7JJuAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 03 12 15 44 26" title="" data-src="/static/2022-03-12-15-44-26-39b42c1756a91bbd1c41dd3628feb83d-fee1c.png" data-srcset="/static/2022-03-12-15-44-26-39b42c1756a91bbd1c41dd3628feb83d-a67b7.png 200w,\n/static/2022-03-12-15-44-26-39b42c1756a91bbd1c41dd3628feb83d-0b187.png 400w,\n/static/2022-03-12-15-44-26-39b42c1756a91bbd1c41dd3628feb83d-fee1c.png 800w,\n/static/2022-03-12-15-44-26-39b42c1756a91bbd1c41dd3628feb83d-7ea00.png 1074w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n</ul>\n<p>然而，上述的分析是站在函数的角度和时间的角度进行的，虽然仔细琢磨一下也能理解，但是由于这并不符合人的主观视角和实际感知，一段时间后，认知就会发生混乱。</p>\n<p>混乱的原因在于认知失调。steps(5) 是把动画时间段分成 5 段，对这个点的认识应该都没有问题，关键是对 steps(5, start) 的认识，看到这里是 start，几乎所有人的第一反应就是动画应用的样式是对应时间段开始的样式，不然怎么叫作“start”呢？可现实真是残酷，steps(5, start) 应用的样式不是 5 个时间段的 start 样式，而是 5 个时间段的 end 样式，例如 left: 0 到 left: 100px 的位移，最终元素表现出来的位移是 20px、40px、60px、80px 和 100px。</p>\n<p>steps(5, end) 也是反直觉的表现，其应用的是 5 个时间段的 start 样式，而不是字面上的 end 样式，例如 left: 0 到 left: 100px 的位移，最终元素表现出来的位移是 0px、20px、40px、60px 和 80px。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/e2u1f2?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>大家可以看到，以 20px 为一个分段，start 的位置在分段的结束处，而 end 的位置在分段的开始处，图 5-71 所示的就是执行 5 次 step() 的位置示意图。</p>\n<p>因此，为了避免认知混乱，当需要用到 steps() 函数的时候，无须思考过于抽象的阶跃函数及其准确含义，只需要记住符合直觉认知的这么一句话：“一切都是反的。start 不是开始，而是结束；end 不是结束，而是开始。”</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-03-12-15-53-41-ae3bb14280e9a3c1a53d23713de591fa-88b8f.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 25.99653379549394%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsSAAALEgHS3X78AAAA8UlEQVQY0xWNy26DMBRE+f/P6iKbKmqTGBqH8LLxA1/7Gr8g2ZVoNmd0RpqqF+p0IS29M86lFF+/5PpHpRBi5j+3+kSoUopzXhPyXdNOaDnzGyHtg54HWZlYqPbBY0jpveVGobC+5FRyXhzW+sMx5YiuN56vec/JIUaPV5MqZnDontM0OWcluJq2M5vAWkR3bihnzB0CTPNo7wNLqweAvns23biArQi+1hC996+SWdjuJpSw5lK2km9L1Bhe+75vRflIIL0POpJCa9PkS+WMAbDHQGtjDXxewEqlHXrQ2oLthvGoUirBuZBqGCfGxXIoA/8odg9ryNF7WwAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 03 12 15 53 41" title="" data-src="/static/2022-03-12-15-53-41-ae3bb14280e9a3c1a53d23713de591fa-fee1c.png" data-srcset="/static/2022-03-12-15-53-41-ae3bb14280e9a3c1a53d23713de591fa-a67b7.png 200w,\n/static/2022-03-12-15-53-41-ae3bb14280e9a3c1a53d23713de591fa-0b187.png 400w,\n/static/2022-03-12-15-53-41-ae3bb14280e9a3c1a53d23713de591fa-fee1c.png 800w,\n/static/2022-03-12-15-53-41-ae3bb14280e9a3c1a53d23713de591fa-88b8f.png 1154w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>这样，至少使用 start 和 end 关键字的时候不会犯错，至于相反的原因，可以参考图 5-68 所示的 steps() 阶跃函数慢慢理解。</p>\n<h2 id="animation-fill-mode-属性与-steps-函数同时设置会怎样"><a href="#animation-fill-mode-%E5%B1%9E%E6%80%A7%E4%B8%8E-steps-%E5%87%BD%E6%95%B0%E5%90%8C%E6%97%B6%E8%AE%BE%E7%BD%AE%E4%BC%9A%E6%80%8E%E6%A0%B7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>animation-fill-mode 属性与 steps() 函数同时设置会怎样</h2>\n<p>animation-fill-mode 属性和 steps() 函数同时使用，可能会影响元素的断点表现。例如，下面这个语句：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="49329815930938210000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`animation: move 5s forwards steps(5, end);`, `49329815930938210000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">animation</span><span class="token punctuation">:</span> move 5s forwards <span class="token function">steps</span><span class="token punctuation">(</span>5<span class="token punctuation">,</span> end<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>forwards 关键字会使动画停留在动画关键帧最后一帧的状态。于是，图 5-72 所示的 6 个分段点都会执行，整个动画停止在第六个分段点上，也就是由于设置了 animation-fill-mode，因此虽然将时间分成了 5 段，但是视觉表现上却是元素总共移动了 6 个位置。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-03-12-15-57-11-a90adbd85f2a65764973bb54c3ddec53-cc2b6.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 40.03639672429482%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAABZklEQVQY052OO2+CYBiF+cNOLg7MTl3axNXNxEabxhibNrSk9X5Hrip8gAqiIoKAUBDFfsaka5Oe4eRJzjl5X+Typ+IY2mm/DwgiGo0ikjwRxK7RcFcrJD6fbzH0X45vfNueTtexZXrE0K/Xg9rXhSa1ZtOUZQQG5zjWLT84XkuufzQP4XUXX0wncLwjxDA6rw13M19slQVDjqfY5yT/CNvICse3DNsCjsKJ2tvLmJlRsj17x2cfOL1wp/xKKZckatqSXHVI2/0uoxwmQBdyORtexlIpPJNRdJ2rVJ6TSRLDNHVZvbt7TacXmgZ6vUoi0S4W16ZZe7gvoyhgWaHTKaEoXSgglXx+2G7DP799T1cUz/PD6OhYlm1ZYRgGQWAsl45th1Hk6PoaAAg8zz9ls81qFYkv/xeiqkuWmxjGbjIVOt0+zwOGHfOCJEryfK5QNFutNwUgUjQHYUBQgigRI6rbG2z07Q+enqsnBd9BEwAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 03 12 15 57 11" title="" data-src="/static/2022-03-12-15-57-11-a90adbd85f2a65764973bb54c3ddec53-fee1c.png" data-srcset="/static/2022-03-12-15-57-11-a90adbd85f2a65764973bb54c3ddec53-a67b7.png 200w,\n/static/2022-03-12-15-57-11-a90adbd85f2a65764973bb54c3ddec53-0b187.png 400w,\n/static/2022-03-12-15-57-11-a90adbd85f2a65764973bb54c3ddec53-fee1c.png 800w,\n/static/2022-03-12-15-57-11-a90adbd85f2a65764973bb54c3ddec53-cc2b6.png 1099w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>这显然不是我们想要的，怎么处理呢？可以减少分段个数和减小动画运动的跨度，调整如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="32740746857300574000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`@keyframes move {\n   0% {\n      left: 0;\n   }\n\n   100% {\n      left: 80px;\n   }\n}`, `32740746857300574000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token atrule"><span class="token rule">@keyframes</span> move</span> <span class="token punctuation">{</span>\n   <span class="token selector">0%</span> <span class="token punctuation">{</span>\n      <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">100%</span> <span class="token punctuation">{</span>\n      <span class="token property">left</span><span class="token punctuation">:</span> 80px<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>也就是将终点从 100px 改成 80px，同时将 CSS 调用改成：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="44311745511555680000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`animation: move 5s forwards steps(4, end);`, `44311745511555680000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">animation</span><span class="token punctuation">:</span> move 5s forwards <span class="token function">steps</span><span class="token punctuation">(</span>4<span class="token punctuation">,</span> end<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>也就是将原来的 steps(5, end) 改成 steps(4, end)，最后将 100% 这一帧交给 forwards。</p>\n<h3 id="step-start-和-step-end-关键字"><a href="#step-start-%E5%92%8C-step-end-%E5%85%B3%E9%94%AE%E5%AD%97" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>step-start 和 step-end 关键字</h3>\n<p>step-start 和 step-end 是 steps() 函数的简化关键字，注意，是 step-*，step 后面没有 s。step-start 等同于 steps(1, start)，表示“一步到位”；step-end 等同于 steps(1, end) 或者 steps(1)，表示“延时到位”。</p>\n<p>之所以专门设置两个关键字 step-start 和 step-end，不是因为这两个关键字常用，而是因为这两个关键字实用。它们可以让动画按照设定的关键帧步进变化，特别适合非等分的步进场景。例如实现一个打点动画，CSS 代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="57760243362288110000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`正在加载中<dot>...</dot>\n<style>\n   dot {\n      display: inline-block;\n      height: 1em;\n      line-height: 1;\n      vertical-align: -0.25em;\n      overflow: hidden;\n   }\n\n   dot::before {\n      display: block;\n      content: \'...\\A..\\A.\';\n      white-space: pre-wrap;\n      animation: dot 3s infinite step-start both;\n   }\n\n   @keyframes dot {\n      33% {\n         transform: translateY(-2em);\n      }\n\n      66% {\n         transform: translateY(-1em);\n      }\n   }\n</style>`, `57760243362288110000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html">正在加载中<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dot</span><span class="token punctuation">></span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dot</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n   <span class="token selector">dot</span> <span class="token punctuation">{</span>\n      <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>\n      <span class="token property">height</span><span class="token punctuation">:</span> 1em<span class="token punctuation">;</span>\n      <span class="token property">line-height</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>\n      <span class="token property">vertical-align</span><span class="token punctuation">:</span> -0.25em<span class="token punctuation">;</span>\n      <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">dot::before</span> <span class="token punctuation">{</span>\n      <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>\n      <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">\'...\\A..\\A.\'</span><span class="token punctuation">;</span>\n      <span class="token property">white-space</span><span class="token punctuation">:</span> pre-wrap<span class="token punctuation">;</span>\n      <span class="token property">animation</span><span class="token punctuation">:</span> dot 3s infinite step-start both<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token atrule"><span class="token rule">@keyframes</span> dot</span> <span class="token punctuation">{</span>\n      <span class="token selector">33%</span> <span class="token punctuation">{</span>\n         <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateY</span><span class="token punctuation">(</span>-2em<span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token punctuation">}</span>\n\n      <span class="token selector">66%</span> <span class="token punctuation">{</span>\n         <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateY</span><span class="token punctuation">(</span>-1em<span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token punctuation">}</span>\n   <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>效果如图 5-73 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-03-12-16-05-40-d82d7dc81918fe2823e652e588059072-72de5.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 648px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 29.32098765432099%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAvElEQVQY06WNyw6CMBBF+/9/Y2JiovGBmggiArIDFGl4a3nUIrJosWBwY3TjWUwmN+fOgOYLpCSe55mmWWD8zQGfEWOsLZMbhNCyrV9lSinreTX7cvvZtq0sz985d2k7abdT0PwB8P3gitLqXmV5we8VBSakrKoH7kAoDcIwimPuoDRLkiROLmcXIoSCMALjyUxWNG6cHLeua1XTZVk5Ou5e1XXdkGRlOhe4I0o7nojidrneDIajg2EshNUTRClT3M2oYDwAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 03 12 16 05 40" title="" data-src="/static/2022-03-12-16-05-40-d82d7dc81918fe2823e652e588059072-72de5.png" data-srcset="/static/2022-03-12-16-05-40-d82d7dc81918fe2823e652e588059072-bb436.png 200w,\n/static/2022-03-12-16-05-40-d82d7dc81918fe2823e652e588059072-c5634.png 400w,\n/static/2022-03-12-16-05-40-d82d7dc81918fe2823e652e588059072-72de5.png 648w" data-sizes="(max-width: 648px) 100vw, 648px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/vxnscm?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>在这个例子中，如果你想通过在 @keyframes 规则中设置好 0% 和 100% 的位置，再使用 steps(2) 或 steps(3) 进行位置划分实现这个效果，你会发现位置总是对不上。其实完全不用这么麻烦的，手动设置好断点的位置，然后使用一个 step-start 关键字就搞定了，无须计算，无须微调，就算把 33% 改成 50% 功能也是正常的，只是打点速度不均匀而已，定位字符点绝对没问题。</p>\n<p>这就是 step-start 和 step-end 关键字的精妙作用，可以让任意自定义的 CSS 关键帧步进呈现，很实用。</p>\n<h3 id="新的-jump-start、jump-end、jump-none-和-jump-both-关键字"><a href="#%E6%96%B0%E7%9A%84-jump-start%E3%80%81jump-end%E3%80%81jump-none-%E5%92%8C-jump-both-%E5%85%B3%E9%94%AE%E5%AD%97" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>新的 jump-start、jump-end、jump-none 和 jump-both 关键字</h3>\n<p>从 2019 年开始，Chrome 浏览器和 Firefox 浏览器开始陆续支持 jump- 开头的用在 steps() 函数中的关键字。下面先介绍一下 jump-start、jump-end、jump-none 和 jump-both 关键字的含义。</p>\n<ul>\n<li>jump-start：动画开始时就发生跳跃，和 start 关键字的表现一样。</li>\n<li>jump-end：动画结束时发生跳跃，和 end 关键字的表现一样。</li>\n<li>jump-none：动画开始时和结束时都不发生跳跃，然后中间部分等分跳跃。</li>\n<li>jump-both：动画开始时和结束时都发生跳跃。</li>\n</ul>\n<p>假设时间函数分为 3 段，则 jump-start、jump-end、jump-none 和 jump-both 关键字对应的阶跃函数如图 5-74 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-03-12-16-12-40-21123e24930facbe35f64c5afe0214bb-925e2.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 59.33098591549296%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABNklEQVQoz4VSa0/DMAzc//9rCCEQaGMgrR1sGQ15N4nzanGXfWBlbFYURU7Odzl7MZ5HSimEALHsaW99woz3fphi5BpyGX4/XszAzjkhzbeEmHKthZlSBq7AuDh7PAeHmAjViESucmT0HqhwqodxHG6AY0y9dUJwKRXqxwyTtmNKSuGsm9RfAVflSiljdMkn5VprzgUA3GDOOZeCmpHQV8NiSvXKQyrXDUsxor0xDcaG+mcAX0pBq7Hcueo/YPC+763QIcSTZtNbhDE179Ml5pSldhASmo2BGcqtMrXV/4PrHTJSbsihY4xVh1AIZ6zrOmPMrMQFt3HGYgjTYB0bi/zTzAGgHXPmx6dn2lHG+GbTttvP3Y5M52a72xNCDrg3zZYcvlavb+v1e9t+4FouV3f3Dy/L1Q851bzNEzwzewAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 03 12 16 12 40" title="" data-src="/static/2022-03-12-16-12-40-21123e24930facbe35f64c5afe0214bb-fee1c.png" data-srcset="/static/2022-03-12-16-12-40-21123e24930facbe35f64c5afe0214bb-a67b7.png 200w,\n/static/2022-03-12-16-12-40-21123e24930facbe35f64c5afe0214bb-0b187.png 400w,\n/static/2022-03-12-16-12-40-21123e24930facbe35f64c5afe0214bb-fee1c.png 800w,\n/static/2022-03-12-16-12-40-21123e24930facbe35f64c5afe0214bb-925e2.png 1136w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>目前 jump-开头的这几个关键字的兼容性还不太好，在生产环境中还无法使用，就不进一步展开讲解了。</p>\n<h3 id="标签嵌套与动画实现的小技巧"><a href="#%E6%A0%87%E7%AD%BE%E5%B5%8C%E5%A5%97%E4%B8%8E%E5%8A%A8%E7%94%BB%E5%AE%9E%E7%8E%B0%E7%9A%84%E5%B0%8F%E6%8A%80%E5%B7%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>标签嵌套与动画实现的小技巧</h3>\n<p>遇到某些属性被占用，或者动画场景复杂的情况，可以试试使用标签嵌套来实现。例如，某个悬浮提示框的居中定位是使用 transform 属性实现的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="10171532024507668000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.toast {\n   position: absolute;\n   left: 50%;\n   top: 50%;\n   transform: translate(-50%, -50%);\n}`, `10171532024507668000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.toast</span> <span class="token punctuation">{</span>\n   <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n   <span class="token property">left</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>\n   <span class="token property">top</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>\n   <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate</span><span class="token punctuation">(</span>-50%<span class="token punctuation">,</span> -50%<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>同时希望提示框出现的时候有放大的动画效果，也就是应用下面的 CSS 动画：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="91546259204189630000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`@keyframes scaleUp {\n   from {\n      transform: scale(0);\n   }\n\n   to {\n      transform: scale(1);\n   }\n}`, `91546259204189630000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token atrule"><span class="token rule">@keyframes</span> scaleUp</span> <span class="token punctuation">{</span>\n   <span class="token selector">from</span> <span class="token punctuation">{</span>\n      <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>0<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">to</span> <span class="token punctuation">{</span>\n      <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>1<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>很显然，此时 transform 属性冲突了，怎么办？很简单，使用标签进行嵌套就好了：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="52257223690465900000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<div class=&quot;toast&quot;>\n   <div class-=&quot;content&quot;>提示内容</div>\n</div>\n<style>\n   .toast {\n      position: absolute;\n      left: 50%;\n      top: 50%;\n      transform: translate(-50%, -50%);\n   }\n\n   .content {\n      color: #fff;\n      background-color: rgba(0, 0, 0, 0.75);\n      animation: scaleUp 300ms;\n   }\n</style>`, `52257223690465900000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>toast<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class-</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>content<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>提示内容<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n   <span class="token selector">.toast</span> <span class="token punctuation">{</span>\n      <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n      <span class="token property">left</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>\n      <span class="token property">top</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>\n      <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate</span><span class="token punctuation">(</span>-50%<span class="token punctuation">,</span> -50%<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">.content</span> <span class="token punctuation">{</span>\n      <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>\n      <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.75<span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token property">animation</span><span class="token punctuation">:</span> scaleUp 300ms<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>同样，我们还可以通过元素嵌套，分别应用动画实现更复杂的动画效果，典型的例子就是动画时间函数分解实现抛物线运动效果。</p>\n<p>在页面中点击“加入购物车”按钮，就会看到有商品以抛物线运动的方式飞向购物车，效果如图 5-75 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-03-12-16-19-46-56b00e19de07d2604e642d7b3b175187-4032d.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 48.43205574912892%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAABRklEQVQoz2N4Ep70PC3/WVbJU8/gh9v3n7z26Ne37/+B4N8/IPr39y+IgNLogOFxRcPd7kmv6lpfJeXc3LJ369GrP758Bep9+vTVsvWHP3/8AjbnH5jA0Pzn9+8fP3/+//kLpOLfX4htQA2fPny+duPBr+8/gOyjp66dv3QXyADa/x8JMPzHD0B2/j99/taV6w9I0/zvHyoHgojV/Pfv39+/gQjI+P7l67rNRx/cewrU//fX73+//wAFCTkbyeLLj958/PEHxMZv898/IEVnpkxf4OS+2C9olU/gWp/ALQEh630DVwPZ/sHLHd0uzp3PgMMekOlPjx0/PX3mqbnzL86Zd3n2vIuz5kLQpdnzzk2Z/uzkKQa40ufPXzx69PjTp0+v37y5c/f+9Ru3rt+9d+/588ev3zx49frei5cPX73+9fs3sh0AEv4jrIsjQ3wAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 03 12 16 19 46" title="" data-src="/static/2022-03-12-16-19-46-56b00e19de07d2604e642d7b3b175187-fee1c.png" data-srcset="/static/2022-03-12-16-19-46-56b00e19de07d2604e642d7b3b175187-a67b7.png 200w,\n/static/2022-03-12-16-19-46-56b00e19de07d2604e642d7b3b175187-0b187.png 400w,\n/static/2022-03-12-16-19-46-56b00e19de07d2604e642d7b3b175187-fee1c.png 800w,\n/static/2022-03-12-16-19-46-56b00e19de07d2604e642d7b3b175187-4032d.png 1148w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/kqn6xv?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>假设飞出去的元素的 HTML 代码结构如下：</p>\n<html><head></head><body><div class="gatsby-code-button-container" data-toaster-id="80461868324998400000" data-toaster-class="gatsby-code-button-toaster" data-toaster-text-class="gatsby-code-button-toaster-text" data-toaster-text="复制成功" data-toaster-duration="3500" onclick="copyToClipboard(`<div class=&quot;fly-item&quot;>\n   <img data-src=&quot;./book.jpg&quot; />\n</div>`, `80461868324998400000`)">\n              <div class="gatsby-code-button" title="html">\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div></body></html>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>fly-item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>./book.jpg<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>实现抛物线效果的关键 CSS 代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="58087680442756670000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.fly-item,\n.fly-item > img {\n   position: absolute;\n   transition: transform 0.5s;\n}\n\n.fly-item {\n   transition-timing-function: linear;\n}\n\n.fly-item > img {\n   transition-timing-function: cubic-bezier(0.55, 0, 0.85, 0.36);\n}`, `58087680442756670000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.fly-item,\n.fly-item > img</span> <span class="token punctuation">{</span>\n   <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n   <span class="token property">transition</span><span class="token punctuation">:</span> transform 0.5s<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.fly-item</span> <span class="token punctuation">{</span>\n   <span class="token property">transition-timing-function</span><span class="token punctuation">:</span> linear<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.fly-item > img</span> <span class="token punctuation">{</span>\n   <span class="token property">transition-timing-function</span><span class="token punctuation">:</span> <span class="token function">cubic-bezier</span><span class="token punctuation">(</span>0.55<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.85<span class="token punctuation">,</span> 0.36<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>其中，父元素 .fly-item 只负责横向线性运动，子元素 <code class="language-text">&lt;img&gt;</code> 只负责纵向运动，只不过纵向运动是先慢后快的。</p>\n<p>将纵向运动和横向运动合并，就产生了抛物线运动的视觉效果。大家可以想象一下扔铅球，铅球水平飞行的速度其实近似匀速，但是受到重力的影响，铅球下落的速度是越来越快的，于是抛物线效果就产生了。</p>\n<p>类似的通过标签嵌套实现动画效果的例子还有很多，在这里就不一一列举了，重要的是思路和意识，希望大家遇到类似场景时能够想到这样的小技巧。</p>',
excerpt:"本章介绍 CSS 渐变、CSS 3D 变换、CSS 过渡和 CSS 动画这 4 部分内容，如果没有专门说明，相关 CSS 属性均是被 IE10+ 浏览器支持的。本章介绍的这些 CSS 属性都非常实用，且细节众多，读者需要反复阅读才能理解。 CSS 渐变 CSS 渐变是 CSS…",frontmatter:{date:"2022-02-13 00:55:25",path:"/css-new-world-stronger-visual-performance/",tags:"前端, CSS, CSS新世界, 读书笔记",title:"CSS新世界更强的视觉表现",draft:null}}},pathContext:{mainPostPath:"/css-new-world-detailed-style-performance/",nextPostPath:"/css-new-world-enhance-existing-css/",prePostPath:"/css-new-world-stronger-visual-performance/"}}}});