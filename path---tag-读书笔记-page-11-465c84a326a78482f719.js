webpackJsonp([90852120444786],{1609:function(n,a){n.exports={data:{site:{siteMetadata:{title:"女王控的博客",description:'前端工程师，黑猫女王控，欢迎勾搭，技术相关<a href="https://github.com/towavephone" target="_blank">@towavephone</a>，QQ闲聊<a href="tencent://AddContact/?fromId=45&fromSubId=1&subcmd=all&uin=634407147&website=www.oicqzone.com">@towave</a>，bili关注<a href="https://space.bilibili.com/11507708#/" target="_blank">@towave</a>',siteUrl:"https://blog.towavephone.com"}}},pathContext:{posts:[{excerpt:"模板方法模式(Template Method) 定义一个操作中的算法的骨架，而将一些步骤延迟到子类中。TemplateMethod 使得子类可以不改变一个算法的结构即可重定义该算法的某些特定步骤。 模式背景 题目抄错，会做也白搭 学生甲和学生乙的试卷类非常类似，除了答案不同，没什么区别，如果老师修改题目，…",html:'<h2 id="模板方法模式template-method"><a href="#%E6%A8%A1%E6%9D%BF%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8Ftemplate-method" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模板方法模式(Template Method)</h2>\n<p>定义一个操作中的算法的骨架，而将一些步骤延迟到子类中。TemplateMethod 使得子类可以不改变一个算法的结构即可重定义该算法的某些特定步骤。</p>\n<h3 id="模式背景"><a href="#%E6%A8%A1%E5%BC%8F%E8%83%8C%E6%99%AF" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式背景</h3>\n<p>题目抄错，会做也白搭</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="20854222016825940000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`class TestPaperA\n{\n    //试题1\n    public void TestQuestion1()\n    {\n        Console.WriteLine(&quot; 杨过得到，后来给了郭靖，炼成倚天剑、屠龙刀的玄铁可能是[ ] a.球磨铸铁 b.马口铁 c.高速合金钢 d.碳素纤维 &quot;);\n        Console.WriteLine(&quot;答案：b&quot;);\n    }\n    //试题2\n    public void TestQuestion2()\n    {\n        Console.WriteLine(&quot; 杨过、程英、陆无双铲除了情花，造成[ ] a.使这种植物不再害人b.使一种珍稀物种灭绝 c.破坏了那个生物圈的生态平衡 d.造成该地区沙漠化  &quot;);\n        Console.WriteLine(&quot;答案：a&quot;);\n    }\n    //试题3\n    public void TestQuestion3()\n    {\n        Console.WriteLine(&quot; 蓝凤凰的致使华山师徒、桃谷六仙呕吐不止,如果你是大夫,会给他们开什么药[ ] a.阿司匹林 b.牛黄解毒片 c.氟哌酸 d.让他们喝大量的生牛奶 e.以上全不对   &quot;);\n        Console.WriteLine(&quot;答案：c&quot;);\n    }\n}\n\nclass TestPaperB\n{\n    //试题1\n    public void TestQuestion1()\n    {\n        Console.WriteLine(&quot; 杨过得到，后来给了郭靖，炼成倚天剑、屠龙刀的玄铁可能是[ ] a.球磨铸铁 b.马口铁 c.高速合金钢 d.碳素纤维 &quot;);\n        Console.WriteLine(&quot;答案：d&quot;);\n    }\n    //试题2\n    public void TestQuestion2()\n    {\n        Console.WriteLine(&quot; 杨过、程英、陆无双铲除了情花，造成[ ] a.使这种植物不再害人b.使一种珍稀物种灭绝 c.破坏了那个生物圈的生态平衡 d.造成该地区沙漠化  &quot;);\n        Console.WriteLine(&quot;答案：b&quot;);\n    }\n    //试题3\n    public void TestQuestion3()\n    {\n        Console.WriteLine(&quot; 蓝凤凰的致使华山师徒、桃谷六仙呕吐不止,如果你是大夫,会给他们开什么药[ ] a.阿司匹林 b.牛黄解毒片 c.氟哌酸 d.让他们喝大量的生牛奶 e.以上全不对   &quot;);\n        Console.WriteLine(&quot;答案：a&quot;);\n    }\n}\n\nstatic void Main(string[] args)\n{\n    Console.WriteLine(&quot;学生甲的试卷：&quot;);\n    TestPaperA studentA = new TestPaperA();\n    studentA.TestQuestion1();\n    studentA.TestQuestion2();\n    studentA.TestQuestion3();\n\n    Console.WriteLine(&quot;学生乙的试卷：&quot;);\n    TestPaperB studentB = new TestPaperB();\n    studentB.TestQuestion1();\n    studentB.TestQuestion2();\n    studentB.TestQuestion3();\n\n    Console.Read();\n}`, `20854222016825940000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="cpp"\n              >\n                <span class="gatsby-code-button-language">cpp</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="cpp"><pre style="counter-reset: linenumber NaN" class="language-cpp line-numbers"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">TestPaperA</span>\n<span class="token punctuation">{</span>\n    <span class="token comment">//试题1</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">TestQuestion1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">" 杨过得到，后来给了郭靖，炼成倚天剑、屠龙刀的玄铁可能是[ ] a.球磨铸铁 b.马口铁 c.高速合金钢 d.碳素纤维 "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"答案：b"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token comment">//试题2</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">TestQuestion2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">" 杨过、程英、陆无双铲除了情花，造成[ ] a.使这种植物不再害人b.使一种珍稀物种灭绝 c.破坏了那个生物圈的生态平衡 d.造成该地区沙漠化  "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"答案：a"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token comment">//试题3</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">TestQuestion3</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">" 蓝凤凰的致使华山师徒、桃谷六仙呕吐不止,如果你是大夫,会给他们开什么药[ ] a.阿司匹林 b.牛黄解毒片 c.氟哌酸 d.让他们喝大量的生牛奶 e.以上全不对   "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"答案：c"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">class</span> <span class="token class-name">TestPaperB</span>\n<span class="token punctuation">{</span>\n    <span class="token comment">//试题1</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">TestQuestion1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">" 杨过得到，后来给了郭靖，炼成倚天剑、屠龙刀的玄铁可能是[ ] a.球磨铸铁 b.马口铁 c.高速合金钢 d.碳素纤维 "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"答案：d"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token comment">//试题2</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">TestQuestion2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">" 杨过、程英、陆无双铲除了情花，造成[ ] a.使这种植物不再害人b.使一种珍稀物种灭绝 c.破坏了那个生物圈的生态平衡 d.造成该地区沙漠化  "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"答案：b"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token comment">//试题3</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">TestQuestion3</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">" 蓝凤凰的致使华山师徒、桃谷六仙呕吐不止,如果你是大夫,会给他们开什么药[ ] a.阿司匹林 b.牛黄解毒片 c.氟哌酸 d.让他们喝大量的生牛奶 e.以上全不对   "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"答案：a"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Main</span><span class="token punctuation">(</span>string<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"学生甲的试卷："</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    TestPaperA studentA <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">TestPaperA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    studentA<span class="token punctuation">.</span><span class="token function">TestQuestion1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    studentA<span class="token punctuation">.</span><span class="token function">TestQuestion2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    studentA<span class="token punctuation">.</span><span class="token function">TestQuestion3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"学生乙的试卷："</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    TestPaperB studentB <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">TestPaperB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    studentB<span class="token punctuation">.</span><span class="token function">TestQuestion1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    studentB<span class="token punctuation">.</span><span class="token function">TestQuestion2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    studentB<span class="token punctuation">.</span><span class="token function">TestQuestion3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    Console<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>学生甲和学生乙的试卷类非常类似，除了答案不同，没什么区别，如果老师修改题目，2 个类都需要修改。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="32476226380142780000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`class TestPaper\n{\n    //试题1\n    public void TestQuestion1()\n    {\n        Console.WriteLine(&quot; 杨过得到，后来给了郭靖，炼成倚天剑、屠龙刀的玄铁可能是[ ] a.球磨铸铁 b.马口铁 c.高速合金钢 d.碳素纤维 &quot;);\n        Console.WriteLine(&quot;答案：b&quot;);\n    }\n    //试题2\n    public void TestQuestion2()\n    {\n        Console.WriteLine(&quot; 杨过、程英、陆无双铲除了情花，造成[ ] a.使这种植物不再害人 b.使一种珍稀物种灭绝 c.破坏了那个生物圈的生态平衡 d.造成该地区沙漠化  &quot;);\n        Console.WriteLine(&quot;答案：a&quot;);\n    }\n    //试题3\n    public void TestQuestion3()\n    {\n        Console.WriteLine(&quot; 蓝凤凰的致使华山师徒、桃谷六仙呕吐不止,如果你是大夫,会给他们开什么药[ ] a.阿司匹林 b.牛黄解毒片 c.氟哌酸 d.让他们喝大量的生牛奶 e.以上全不对   &quot;);\n        Console.WriteLine(&quot;答案：c&quot;);\n    }\n}\n\nclass TestPaperA : TestPaper\n{\n    public new void TestQuestion1()\n    {\n        base.TestQuestion1();\n        Console.WriteLine(&quot;答案：c&quot;);\n    }\n\n    public new void TestQuestion2()\n    {\n        base.TestQuestion2();\n        Console.WriteLine(&quot;答案：b&quot;);\n    }\n\n    public new void TestQuestion3()\n    {\n        base.TestQuestion3();\n        Console.WriteLine(&quot;答案：a&quot;);\n    }\n}\n\nclass TestPaperB : TestPaper\n{\n    public new void TestQuestion1()\n    {\n        base.TestQuestion1();\n        Console.WriteLine(&quot;答案：d&quot;);\n    }\n\n    public new void TestQuestion2()\n    {\n        base.TestQuestion2();\n        Console.WriteLine(&quot;答案：c&quot;);\n    }\n\n    public new void TestQuestion3()\n    {\n        base.TestQuestion3();\n        Console.WriteLine(&quot;答案：a&quot;);\n    }\n}`, `32476226380142780000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="cpp"\n              >\n                <span class="gatsby-code-button-language">cpp</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="cpp"><pre style="counter-reset: linenumber NaN" class="language-cpp line-numbers"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">TestPaper</span>\n<span class="token punctuation">{</span>\n    <span class="token comment">//试题1</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">TestQuestion1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">" 杨过得到，后来给了郭靖，炼成倚天剑、屠龙刀的玄铁可能是[ ] a.球磨铸铁 b.马口铁 c.高速合金钢 d.碳素纤维 "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"答案：b"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token comment">//试题2</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">TestQuestion2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">" 杨过、程英、陆无双铲除了情花，造成[ ] a.使这种植物不再害人 b.使一种珍稀物种灭绝 c.破坏了那个生物圈的生态平衡 d.造成该地区沙漠化  "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"答案：a"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token comment">//试题3</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">TestQuestion3</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">" 蓝凤凰的致使华山师徒、桃谷六仙呕吐不止,如果你是大夫,会给他们开什么药[ ] a.阿司匹林 b.牛黄解毒片 c.氟哌酸 d.让他们喝大量的生牛奶 e.以上全不对   "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"答案：c"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">class</span> <span class="token class-name">TestPaperA</span> <span class="token operator">:</span> TestPaper\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token keyword">new</span> <span class="token keyword">void</span> <span class="token function">TestQuestion1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        base<span class="token punctuation">.</span><span class="token function">TestQuestion1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"答案：c"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">public</span> <span class="token keyword">new</span> <span class="token keyword">void</span> <span class="token function">TestQuestion2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        base<span class="token punctuation">.</span><span class="token function">TestQuestion2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"答案：b"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">public</span> <span class="token keyword">new</span> <span class="token keyword">void</span> <span class="token function">TestQuestion3</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        base<span class="token punctuation">.</span><span class="token function">TestQuestion3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"答案：a"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">class</span> <span class="token class-name">TestPaperB</span> <span class="token operator">:</span> TestPaper\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token keyword">new</span> <span class="token keyword">void</span> <span class="token function">TestQuestion1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        base<span class="token punctuation">.</span><span class="token function">TestQuestion1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"答案：d"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">public</span> <span class="token keyword">new</span> <span class="token keyword">void</span> <span class="token function">TestQuestion2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        base<span class="token punctuation">.</span><span class="token function">TestQuestion2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"答案：c"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">public</span> <span class="token keyword">new</span> <span class="token keyword">void</span> <span class="token function">TestQuestion3</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        base<span class="token punctuation">.</span><span class="token function">TestQuestion3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"答案：a"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>是不是可以进一步的优化？</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="8774592321583063000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`class TestPaper\n{\n    public void TestQuestion1()\n    {\n        Console.WriteLine(&quot; 杨过得到，后来给了郭靖，炼成倚天剑、屠龙刀的玄铁可能是[ ] a.球磨铸铁 b.马口铁 c.高速合金钢 d.碳素纤维 &quot;);\n        Console.WriteLine(&quot;答案：&quot; + Answer1());\n    }\n\n    protected virtual string Answer1()\n    {\n        return &quot;&quot;;\n    }\n}\n\n//学生甲抄的试卷\nclass TestPaperA : TestPaper\n{\n    protected override string Answer1()\n    {\n        return &quot;b&quot;;\n    }\n\n    protected override string Answer2()\n    {\n        return &quot;c&quot;;\n    }\n\n    protected override string Answer3()\n    {\n        return &quot;a&quot;;\n    }\n}\n\n//学生乙抄的试卷\nclass TestPaperB : TestPaper\n{\n    protected override string Answer1()\n    {\n        return &quot;c&quot;;\n    }\n\n    protected override string Answer2()\n    {\n        return &quot;a&quot;;\n    }\n\n    protected override string Answer3()\n    {\n        return &quot;a&quot;;\n    }\n}\n\nstatic void Main(string[] args)\n{\n    Console.WriteLine(&quot;学生甲抄的试卷：&quot;);\n    TestPaper studentA = new TestPaperA();\n    studentA.TestQuestion1();\n    studentA.TestQuestion2();\n    studentA.TestQuestion3();\n\n    Console.WriteLine(&quot;学生乙抄的试卷：&quot;);\n    TestPaper studentB = new TestPaperB();\n    studentB.TestQuestion1();\n    studentB.TestQuestion2();\n    studentB.TestQuestion3();\n\n    Console.Read();\n}`, `8774592321583063000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="cpp"\n              >\n                <span class="gatsby-code-button-language">cpp</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="cpp"><pre style="counter-reset: linenumber NaN" class="language-cpp line-numbers"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">TestPaper</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">TestQuestion1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">" 杨过得到，后来给了郭靖，炼成倚天剑、屠龙刀的玄铁可能是[ ] a.球磨铸铁 b.马口铁 c.高速合金钢 d.碳素纤维 "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"答案："</span> <span class="token operator">+</span> <span class="token function">Answer1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">protected</span> <span class="token keyword">virtual</span> string <span class="token function">Answer1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">return</span> <span class="token string">""</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">//学生甲抄的试卷</span>\n<span class="token keyword">class</span> <span class="token class-name">TestPaperA</span> <span class="token operator">:</span> TestPaper\n<span class="token punctuation">{</span>\n    <span class="token keyword">protected</span> override string <span class="token function">Answer1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">return</span> <span class="token string">"b"</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">protected</span> override string <span class="token function">Answer2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">return</span> <span class="token string">"c"</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">protected</span> override string <span class="token function">Answer3</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">return</span> <span class="token string">"a"</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">//学生乙抄的试卷</span>\n<span class="token keyword">class</span> <span class="token class-name">TestPaperB</span> <span class="token operator">:</span> TestPaper\n<span class="token punctuation">{</span>\n    <span class="token keyword">protected</span> override string <span class="token function">Answer1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">return</span> <span class="token string">"c"</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">protected</span> override string <span class="token function">Answer2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">return</span> <span class="token string">"a"</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">protected</span> override string <span class="token function">Answer3</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">return</span> <span class="token string">"a"</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Main</span><span class="token punctuation">(</span>string<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"学生甲抄的试卷："</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    TestPaper studentA <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">TestPaperA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    studentA<span class="token punctuation">.</span><span class="token function">TestQuestion1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    studentA<span class="token punctuation">.</span><span class="token function">TestQuestion2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    studentA<span class="token punctuation">.</span><span class="token function">TestQuestion3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"学生乙抄的试卷："</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    TestPaper studentB <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">TestPaperB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    studentB<span class="token punctuation">.</span><span class="token function">TestQuestion1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    studentB<span class="token punctuation">.</span><span class="token function">TestQuestion2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    studentB<span class="token punctuation">.</span><span class="token function">TestQuestion3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    Console<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="模式动机"><a href="#%E6%A8%A1%E5%BC%8F%E5%8A%A8%E6%9C%BA" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式动机</h3>\n<ul>\n<li>准备一个抽象类，将部分逻辑以具体方法以及具体构造函数的形式实现，然后声明一些抽象方法来迫使子类实现剩余的逻辑。不同的子类可以以不同的方式实现这些抽象方法，从而对剩余的逻辑有不同的实现。这就是模版方法模式的用意。</li>\n<li>很多人可能没有想到，模版方法模式实际上是所有模式中最为常见的几个模式之一，而且很多人可能使用过模版方法模式而没有意识到自己已经使用了这个模式。模版方法模式是基于继承的代码复用的基本技术，模版方法模式的结构和用法也是面向对象设计的核心。</li>\n<li>模版方法模式需要开发抽象类和具体子类的设计师之间的协作。一个设计师负责给出一个算法的轮廓和骨架，另一些设计师则负责给出这个算法的各个逻辑步骤。代表这些具体逻辑步骤的方法称做基本方法（primitive method）；而将这些基本法方法总汇起来的方法叫做模版方法（template method），这个设计模式的名字就是从此而来。</li>\n</ul>\n<h3 id="模式定义"><a href="#%E6%A8%A1%E5%BC%8F%E5%AE%9A%E4%B9%89" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式定义</h3>\n<p>定义一个操作中算法的骨架，而将一些步骤延迟到子类中。模板方法使得子类可以不改变一个算法的结构即可重定义该算法的某些特定步骤。模板方法是一种类行为型模式。</p>\n<h3 id="模式结构"><a href="#%E6%A8%A1%E5%BC%8F%E7%BB%93%E6%9E%84" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式结构</h3>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180418114919-af1442a585d54a2fe07eb0c6166e5848-02abd.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 715px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 111.88811188811188%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAAAsSAAALEgHS3X78AAADY0lEQVQ4y51UyU4bQRD1TKQcQJlE+IoQ4gac+A/OwBEEXLjkG/IFkbgG5xAhOAWJeAGZIIjAGA9g2cYB42UwyGxmtRnA9nim86rjZmJikigtPfVW9bqquqocDodDAuT/AOn9PtbX16fOzs4ix8fHoYODAzUajaqapqnJZJLPOzs76u7urprJZFS6h1wQ+B4IBN6Tvq7r8szMjE0IhSSrjWKxyGKxGMvlcgyEDITs8PCQz+l0mkGZWZbFZSH3lfSxlP1+v024tbUVIcF8Pl+5uLioXl1dVS8vLzme7mtn5YeHB6aqqpv0DcOQ3W63TRiPx2P04v39vXl3d8cIWHOIPYGsr8Eg+Ugk4hUWzs/P24SIRYxcRJxM4SYe4UDc2N7eHkskEuz8/JzBQoJRLpfJQm9DC0EUI2uy2ax5enrK4BK5z2MHd/maiGiYpskqlQq3EI89Wri6umoT4lfDpHhyclIGiUEWYG/gEwz8Jj1i4M5AJhj4ZQP7EhHC8i+CcHl5uS6G2VoMeazEIKtoD4sYuUiDPk+s8eA3QbiysmIT+ny+d+Fw+BMOJwAXft21sbExsbS09HFubk6ls1Ao5AoGgy64RvcfENMppMpb0ocX0uTkpOOvo7u7u316ejqApfM5GVjX8FAGXjwBvdo8NDTUjk95+YyMLEjriPv7+6XR0VFpeHhYGhkZkQYHB6Xx8XGpVqsKyQwMDDzeC/T19XH9sbExR29vr+Nfh/Kny6ampobnzTVFpaWlRens7FQ6OjqUtra2N06ns62np+dVV1eX0traqgg54DXxNWRDCflub29z19fX6aOjI40G8i2DRNeQGtnMz6EhRzUkvQa5FJCnbCB9NAvZ6/XahEjQhMg9yrP9/X0GQoZE5jMe4eVIa5GDNNCl/OJTFxcXbULkXISKnioC9WoioU1YYtKaZoI4wyOECiU8+igv4FKpJM/Ozta5HKVqgBvmzc0Nr1+sWaFQYLQn0J5Qu0c/MBgM4X6ivmWPx2MTrq2tRanbIF5VuG/BNQvxsra3ty3EzoK7fKazVCpFe6NarTJUl0e4jGqr6zZxspC6DLUo0Q/pkV8tpPjSPSzkLRvEvobdZnNzM4TAG7CiCAt01KaOvY6moUOJAx+l4wEdHtBcIANw/1kQLiwsPPL9ALoH/gTE35QlAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180418114919" title="" data-src="/static/微信截图_20180418114919-af1442a585d54a2fe07eb0c6166e5848-02abd.png" data-srcset="/static/微信截图_20180418114919-af1442a585d54a2fe07eb0c6166e5848-c2d90.png 200w,\n/static/微信截图_20180418114919-af1442a585d54a2fe07eb0c6166e5848-3b989.png 400w,\n/static/微信截图_20180418114919-af1442a585d54a2fe07eb0c6166e5848-02abd.png 715w" data-sizes="(max-width: 715px) 100vw, 715px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<ul>\n<li>AbstractClass：抽象类</li>\n<li>ConcreteClass：具体子类</li>\n</ul>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="10812945017682930000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`public abstract class AbstractCar\n{\n    protected abstract string StartUp();\n    protected abstract string Run();\n    protected abstract string Stop();\n\n    public void DriveOnTheRoad()\n    {\n        Console.WriteLine(StartUp());\n        Console.WriteLine(Run());\n        Console.WriteLine(Stop());\n    }\n}\npublic class BORA : AbstractCar\n{\n    protected override string StartUp()\n    {\n        return &quot;BORA is StartUp&quot;;\n    }\n\n    protected override string Run()\n    {\n        return &quot;BORA is Running&quot;;\n    }\n\n    protected override string Stop()\n    {\n        return &quot;BORA is Stoped&quot;;\n    }\n}\n\nstatic void Main(string[] args)\n{\n     AbstractCar car = new BORA();\n     car.DriveOnTheRoad();\n     Console.Read();\n}`, `10812945017682930000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="cpp"\n              >\n                <span class="gatsby-code-button-language">cpp</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="cpp"><pre style="counter-reset: linenumber NaN" class="language-cpp line-numbers"><code class="language-cpp"><span class="token keyword">public</span> abstract <span class="token keyword">class</span> <span class="token class-name">AbstractCar</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">protected</span> abstract string <span class="token function">StartUp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">protected</span> abstract string <span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">protected</span> abstract string <span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">DriveOnTheRoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token function">StartUp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BORA</span> <span class="token operator">:</span> AbstractCar\n<span class="token punctuation">{</span>\n    <span class="token keyword">protected</span> override string <span class="token function">StartUp</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">return</span> <span class="token string">"BORA is StartUp"</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">protected</span> override string <span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">return</span> <span class="token string">"BORA is Running"</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">protected</span> override string <span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">return</span> <span class="token string">"BORA is Stoped"</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Main</span><span class="token punctuation">(</span>string<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n     AbstractCar car <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">BORA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n     car<span class="token punctuation">.</span><span class="token function">DriveOnTheRoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n     Console<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>AbstractCar 中的 DriveOnTheRoad 方法叫做 template method（模板方法），template method 用 primitive operation 定义一个算法，是相对稳定的部分。（子类中重新定义 primitive operation）。</p>\n<p>在这段代码中，抽象方法 StartUp、Run、Stop 叫做 primitive operation（原语操作），它们是在子类中的扩展点。</p>\n<h3 id="优缺点"><a href="#%E4%BC%98%E7%BC%BA%E7%82%B9" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>优缺点</h3>\n<ul>\n<li>\n<p>优点</p>\n<ul>\n<li>模板方法模式在一个类中形式化地定义算法，而由它的子类实现细节的处理。模板方法模式的优势是，在子类定义详细的处理算法时不会改变算法的结构。</li>\n<li>模板方法是一种代码复用的基本技术，它们在类库中尤为重要，它们提取了类库中的公共行为。</li>\n<li>模板方法导致一种反向的控制结构，一个父类调用一个子类的操作，而不是相反。</li>\n</ul>\n</li>\n<li>\n<p>缺点</p>\n<ul>\n<li>每个不同的实现都需要定义一个子类，这会导致类的个数增加，但是更加符合类职责的分配原则，使得类的内聚性得以提高。</li>\n</ul>\n</li>\n</ul>\n<h3 id="模式使用"><a href="#%E6%A8%A1%E5%BC%8F%E4%BD%BF%E7%94%A8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式使用</h3>\n<ul>\n<li>一次性实现一个算法的不变的部分，并将可变的行为留给子类来实现。</li>\n<li>各子类中公共的行为应被提取出来并集中到一个公共父类中以避免代码重复。</li>\n<li>对一些复杂的算法进行分割，将其算法中固定不变的部分设计为模板方法和父类具体方法，而一些可以改变的细节由其子类来实现。</li>\n</ul>\n<h3 id="模式应用"><a href="#%E6%A8%A1%E5%BC%8F%E5%BA%94%E7%94%A8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式应用</h3>\n<ul>\n<li>模板方法模式主要应用于框架设计，以确保父类控制处理流程的逻辑顺序（如框架的初始化）。</li>\n<li>模板方法模式鼓励我们恰当使用继承，此模式可以用来改写一些拥有相同功能的相关类，将可复用的一般性的行为代码移到父类里面，而将特殊化的行为代码移到子类里面。这也进一步说明，虽然继承复用存在一些问题，但是在某些情况下还是可以给开发人员带来方便，模板方法模式就是体现继承优势的模式之一。</li>\n<li>在模板方法模式中，子类不显式调用父类的方法，而是通过覆盖父类的方法来实现某些具体的业务逻辑，父类控制对子类的调用，这种机制被称为好莱坞原则(Hollywood Principle)，即“不要给我们打电话，我们会给你打电话(Don‘t call us, we’ll call you)”。</li>\n<li>在模板方法模式中，好莱坞原则体现在：子类不需要调用父类，而通过父类来调用子类，将某些步骤的实现写在子类中，由父类来控制整个过程。</li>\n</ul>\n<h2 id="访问者模式visitor"><a href="#%E8%AE%BF%E9%97%AE%E8%80%85%E6%A8%A1%E5%BC%8Fvisitor" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>访问者模式(Visitor)</h2>\n<p>表示一个作用于某对象结构中的各元素的操作，它使你可以在不改变各元素的类的前提下定义作用于这些元素的新操作。</p>\n<h3 id="模式背景-1"><a href="#%E6%A8%A1%E5%BC%8F%E8%83%8C%E6%99%AF-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式背景</h3>\n<p>学校有教师和工程师</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="72713405242927620000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`abstract class Employee\n{\n    private string name;\n    private double income;\n    private int vacationDays;\n\n    public string Name\n    {\n        get { return name; }\n        set { name = value; }\n    }\n    public double Income\n    {\n        get { return income; }\n        set { income = value; }\n    }\n    public int VacationDays\n    {\n        get { return vacationDays; }\n        set { vacationDays = value; }\n    }\n}\n\nclass Teacher : Employee\n{\n    public Teacher(string name, double income,int vacationDays)\n    {\n        Name = name;\n        Income = income;\n        VacationDays = vacationDays;\n    }\n}\n\nclass Engineer : Employee\n{\n    public Engineer(string name, double income,int vacationDays)\n    {\n        Name = name;\n        Income = income;\n        VacationDays = vacationDays;\n    }\n}\n\nstatic void Main(string[] args)\n{\n    Teacher zhangsan = new Teacher(&quot;张三&quot;, 2500.0, 14);\n    Engineer lisi    = new Engineer(&quot;李四&quot;, 3500.0, 16);\n\n    Console.WriteLine(zhangsan.Name + &quot;的收入是&quot;+ zhangsan.Income +\n                                &quot;, 假期是&quot;+ zhangsan.VacationDays);\n\n    Console.WriteLine(lisi.Name + &quot;的收入是&quot; + lisi.Income + \v                                       &quot;, 假期是&quot; + lisi.VacationDays);\n\n    Console.ReadKey();\n}`, `72713405242927620000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="cpp"\n              >\n                <span class="gatsby-code-button-language">cpp</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="cpp"><pre style="counter-reset: linenumber NaN" class="language-cpp line-numbers"><code class="language-cpp">abstract <span class="token keyword">class</span> <span class="token class-name">Employee</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">private</span> string name<span class="token punctuation">;</span>\n    <span class="token keyword">private</span> <span class="token keyword">double</span> income<span class="token punctuation">;</span>\n    <span class="token keyword">private</span> <span class="token keyword">int</span> vacationDays<span class="token punctuation">;</span>\n\n    <span class="token keyword">public</span> string Name\n    <span class="token punctuation">{</span>\n        get <span class="token punctuation">{</span> <span class="token keyword">return</span> name<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n        set <span class="token punctuation">{</span> name <span class="token operator">=</span> value<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token keyword">double</span> Income\n    <span class="token punctuation">{</span>\n        get <span class="token punctuation">{</span> <span class="token keyword">return</span> income<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n        set <span class="token punctuation">{</span> income <span class="token operator">=</span> value<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token keyword">int</span> VacationDays\n    <span class="token punctuation">{</span>\n        get <span class="token punctuation">{</span> <span class="token keyword">return</span> vacationDays<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n        set <span class="token punctuation">{</span> vacationDays <span class="token operator">=</span> value<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">class</span> <span class="token class-name">Teacher</span> <span class="token operator">:</span> Employee\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token function">Teacher</span><span class="token punctuation">(</span>string name<span class="token punctuation">,</span> <span class="token keyword">double</span> income<span class="token punctuation">,</span><span class="token keyword">int</span> vacationDays<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Name <span class="token operator">=</span> name<span class="token punctuation">;</span>\n        Income <span class="token operator">=</span> income<span class="token punctuation">;</span>\n        VacationDays <span class="token operator">=</span> vacationDays<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">class</span> <span class="token class-name">Engineer</span> <span class="token operator">:</span> Employee\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token function">Engineer</span><span class="token punctuation">(</span>string name<span class="token punctuation">,</span> <span class="token keyword">double</span> income<span class="token punctuation">,</span><span class="token keyword">int</span> vacationDays<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Name <span class="token operator">=</span> name<span class="token punctuation">;</span>\n        Income <span class="token operator">=</span> income<span class="token punctuation">;</span>\n        VacationDays <span class="token operator">=</span> vacationDays<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Main</span><span class="token punctuation">(</span>string<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    Teacher zhangsan <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Teacher</span><span class="token punctuation">(</span><span class="token string">"张三"</span><span class="token punctuation">,</span> <span class="token number">2500.0</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    Engineer lisi    <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Engineer</span><span class="token punctuation">(</span><span class="token string">"李四"</span><span class="token punctuation">,</span> <span class="token number">3500.0</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>zhangsan<span class="token punctuation">.</span>Name <span class="token operator">+</span> <span class="token string">"的收入是"</span><span class="token operator">+</span> zhangsan<span class="token punctuation">.</span>Income <span class="token operator">+</span>\n                                <span class="token string">", 假期是"</span><span class="token operator">+</span> zhangsan<span class="token punctuation">.</span>VacationDays<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>lisi<span class="token punctuation">.</span>Name <span class="token operator">+</span> <span class="token string">"的收入是"</span> <span class="token operator">+</span> lisi<span class="token punctuation">.</span>Income <span class="token operator">+</span> \v                                       <span class="token string">", 假期是"</span> <span class="token operator">+</span> lisi<span class="token punctuation">.</span>VacationDays<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>如何批量给员工加薪，加假期？</p>\n<h3 id="模式动机-1"><a href="#%E6%A8%A1%E5%BC%8F%E5%8A%A8%E6%9C%BA-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式动机</h3>\n<ul>\n<li>对于系统中的某些对象，它们存储在同一个集合中，且具有不同的类型，而且对于该集合中的对象，可以接受一类称为访问者的对象来访问，而且不同的访问者其访问方式有所不同，访问者模式为解决这类问题而诞生。</li>\n<li>在实际使用时，对同一集合对象的操作并不是唯一的，对相同的元素对象可能存在多种不同的操作方式。</li>\n<li>而且这些操作方式并不稳定，可能还需要增加新的操作，以满足新的业务需求。</li>\n<li>此时，访问者模式就是一个值得考虑的解决方案。</li>\n</ul>\n<h3 id="模式定义-1"><a href="#%E6%A8%A1%E5%BC%8F%E5%AE%9A%E4%B9%89-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式定义</h3>\n<p>表示一个作用于某对象结构中的各元素的操作。它使我们可以在不改变各元素的类的前提下定义作用于这些元素的新操作。访问者模式是一种对象行为型模式。</p>\n<h3 id="模式结构-1"><a href="#%E6%A8%A1%E5%BC%8F%E7%BB%93%E6%9E%84-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式结构</h3>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180418121437-7aaf7784d19284f5a20c67fede80d417-6cf7b.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 69.29196499602227%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAACpElEQVQ4y51UTWjSYRjX6fzokJcgQujSpUNDsU5bEAUSRHprNGKIHcJ77FaYh6SFLdwoWFBuYDq77DC2wxaD/EBExW26+TWn6ZzOMT/G/EDm3n7vP41la0QPvPzf932+fs/ved4/q1AojCQSiWfxePx5qVQa0el051iQgYEBtsFg4ND92tra9WKx+GVvb+/z5uamZX9/34L9TDAYvEb14XCYzerI4eEh6cjR0RHRarWX6L1EIuFqNBo+3ft8vkcnbToCEPepPhqNcpRK5c+A6XT6IVCqdnZ21Pl8fshkMvHoPezZWL10DyR9kUhkHI5Gr9c7s7GxYYStMZlMXm3b9lJ71t+k2Wz2sP5DmKCxWGwSGc3r6+uWTCYzOT8/f54qs9nsvVwu9x73o6FQaCyVSo2jCh3KF+3u7r7c2toygtsx+L5Che+gv8NEhRFptVrk+PiYgHhitVoZDtGoD6RLKpUKcTqdl+m3I9SXyvb29igTEAj6Qe4toLgNtP3T09P8Nm+DOM+iq1NAYUKCT0DyOhAICHB+i/uP0FPdFBDPIqDiLC5+O0ulUrbf7xfPzc2JbTbbFYfDIXa73WKo2H/4lcvlHrPZzJHL5QKVSsUTCoVc6DgymYyr1+sF1HBlZeUBLavRaBB0l6BpTKlAeLfdRG43iF8iEomYrBMTEz2Li4tM+R6P5ybG5hvK+opmeRB0Gd9lNOUG1SMwD3r2P5d8UhQKxYUzx6ZbQDZziYwyNOsJxmQYnKmB5jGQDC4sLPDxHUIT1S6XSw0uh6kdmtN3ahaUQzlkYa7eUN7QQWbVajWCuSzb7XYxRq1RrVYJ3jNB6czY4NVoTw2I7EzA1dXVF9QYTsV6vV7BauCnEFtaWroI9N/xCOoHBwcVNKpI3zf4fUr9fgAHpiUDS60gxAAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180418121437" title="" data-src="/static/微信截图_20180418121437-7aaf7784d19284f5a20c67fede80d417-fee1c.png" data-srcset="/static/微信截图_20180418121437-7aaf7784d19284f5a20c67fede80d417-a67b7.png 200w,\n/static/微信截图_20180418121437-7aaf7784d19284f5a20c67fede80d417-0b187.png 400w,\n/static/微信截图_20180418121437-7aaf7784d19284f5a20c67fede80d417-fee1c.png 800w,\n/static/微信截图_20180418121437-7aaf7784d19284f5a20c67fede80d417-b1a91.png 1200w,\n/static/微信截图_20180418121437-7aaf7784d19284f5a20c67fede80d417-6cf7b.png 1257w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<ul>\n<li>Vistor：抽象访问者</li>\n<li>ConcreteVisitor：具体访问者</li>\n<li>Element：抽象元素</li>\n<li>ConcreteElement：具体元素</li>\n<li>ObjectStructure：对象结构</li>\n</ul>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180418121632-b766c48a9dbf6a5d6ff4d82234c7bc00-6cf69.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 69.25872093023257%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAAClUlEQVQ4y4VU3WuSURj33fR1GUF3C4QugkkwKJDBLgYRhUEQJF00DCZJf0LWVbbCi0aMwTYm7a5GLXKMYd56oaB44cTvr+nUbX7N5gfT5pibb7/nTcc+cj1weM57fs95znN+z++8gkKh8Gp9ff1NIpHQ7ezsvNbr9RIBTC6X9+h0ul6a+3y+oXK5bAT+DbGLpVJpEfPvfr9/kPBIJMIIOlav17mOHRwccOPj49doXSaTsSqVqo/mTqdT3Yk5Ojo6jo9Go48Ih+9Vq9V/E25ubqq2t7efZzKZF/l8/tny8jJL64hnMEQ0D4VCt9bW1mbj8fiM2+3+gQQz2DOdSqVutmNFFC/oZq1Wqzt4gfFJweEnnPgVFSyCp3mTyXSFwK2trYfVanUuGAxOgMMpVD+Ty+XeOxyOq9jzYWNjY9rj8Uyh6glUO5dOp+/xWfFxzEulUuGQkOcwmUzOc2cMB3BIeP0k77gN77PZ7Ec+ISoYwSl3UcV9VDqysrIipvVAIDCKjpowFtDFBRzwpVgsTq6urvYhbhaq+IzBY6j+JxI+voiLU98ajYZBIqnRaJQuLS3dsFqtUnReCog5t+/w8LDHYDAIh4eHLyuVSjHLstRZ4cDAgEir1V6iQJfLNUq01Go1Djxy+/v7XLPZJNk8IByY8GwRgvZpjEQi4T2J2mw2i9s6vIPNdkjLiuHCFcnbvF7vEOGghT0l7v9d+aQpFIr+blgsFjufFJ1m2s/pNuShgahV9FJQ0Rik9QQcitGMp5DNmM1mU2NNBUwTDocHu4laSB6vYLIjFeiTlwauWrHb7VL4JskF75nHyRD/7p8JESBsy+YtxM39gu3t7ZV/w/BTCFssln5cLQ2stru7W240GoRTs17Svj8VUCYpZCIF6AAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180418121632" title="" data-src="/static/微信截图_20180418121632-b766c48a9dbf6a5d6ff4d82234c7bc00-fee1c.png" data-srcset="/static/微信截图_20180418121632-b766c48a9dbf6a5d6ff4d82234c7bc00-a67b7.png 200w,\n/static/微信截图_20180418121632-b766c48a9dbf6a5d6ff4d82234c7bc00-0b187.png 400w,\n/static/微信截图_20180418121632-b766c48a9dbf6a5d6ff4d82234c7bc00-fee1c.png 800w,\n/static/微信截图_20180418121632-b766c48a9dbf6a5d6ff4d82234c7bc00-b1a91.png 1200w,\n/static/微信截图_20180418121632-b766c48a9dbf6a5d6ff4d82234c7bc00-6cf69.png 1376w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="66906511241063195000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`abstract class Employee\n{\n    private string name;\n    private double income;\n    private int vacationDays;\n\n    public string Name\n    {\n        get { return name; }\n        set { name = value; }\n    }\n    public double Income\n    {\n        get { return income; }\n        set { income = value; }\n    }\n    public int VacationDays\n    {\n        get { return vacationDays; }\n        set { vacationDays = value; }\n    }\n\n    abstract public void Accept(Visitor visitor);\n}\nclass Teacher : Employee\n{\n    public Teacher(string name, double income,int vacationDays)\n    {\n        Name = name;\n        Income = income;\n        VacationDays = vacationDays;\n    }\n    public override void Accept(Visitor visitor)\n    {\n        visitor.Visit(this);\n    }\n}\nclass Engineer : Employee\n{\n    public Engineer(string name, double income,int vacationDays)\n    {\n        Name = name;\n        Income = income;\n        VacationDays = vacationDays;\n    }\n    public override void Accept(Visitor visitor)\n    {\n        visitor.Visit(this);\n    }\n}\n\nabstract class Visitor\n{\n    abstract public void Visit(Employee element);\n}\n\nclass IncomeVisitor : Visitor\n{\n    public override void Visit(Employee element)\n    {\n        element.Income *= 1.10;\n        Console.WriteLine(element.Name + &quot;的新工资是: &quot; + element.Income);\n    }\n}\n\nclass VacationVisitor : Visitor\n{\n    public override void Visit(Employee element)\n    {\n        element.VacationDays += 3;\n        Console.WriteLine(element.Name + &quot;的新假期是&quot; + element.VacationDays);\n    }\n}\n\nclass Employees\n{\n    private ArrayList employees = new ArrayList();\n    public void Attach(Employee employee)\n    {\n        employees.Add(employee);\n    }\n    public void Detach(Employee employee)\n    {\n        employees.Remove(employee);\n    }\n    public void Accept(Visitor visitor)\n    {\n        foreach (Employee e in employees)\n            e.Accept(visitor);\n    }\n}\n\nstatic void Main(string[] args)\n{\n    Teacher zhangsan = new Teacher(&quot;张三&quot;, 2500.0, 14);\n    Engineer lisi    = new Engineer(&quot;李四&quot;, 3500.0, 16);\n\n    Employees e = new Employees();\n    e.Attach(zhangsan);\n    e.Attach(lisi);\n\n    IncomeVisitor v1 = new IncomeVisitor();\n    VacationVisitor v2 = new VacationVisitor();\n\n    e.Accept(v1);\n    e.Accept(v2);\n    Console.Read();\n}`, `66906511241063195000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="cpp"\n              >\n                <span class="gatsby-code-button-language">cpp</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="cpp"><pre style="counter-reset: linenumber NaN" class="language-cpp line-numbers"><code class="language-cpp">abstract <span class="token keyword">class</span> <span class="token class-name">Employee</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">private</span> string name<span class="token punctuation">;</span>\n    <span class="token keyword">private</span> <span class="token keyword">double</span> income<span class="token punctuation">;</span>\n    <span class="token keyword">private</span> <span class="token keyword">int</span> vacationDays<span class="token punctuation">;</span>\n\n    <span class="token keyword">public</span> string Name\n    <span class="token punctuation">{</span>\n        get <span class="token punctuation">{</span> <span class="token keyword">return</span> name<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n        set <span class="token punctuation">{</span> name <span class="token operator">=</span> value<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token keyword">double</span> Income\n    <span class="token punctuation">{</span>\n        get <span class="token punctuation">{</span> <span class="token keyword">return</span> income<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n        set <span class="token punctuation">{</span> income <span class="token operator">=</span> value<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token keyword">int</span> VacationDays\n    <span class="token punctuation">{</span>\n        get <span class="token punctuation">{</span> <span class="token keyword">return</span> vacationDays<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n        set <span class="token punctuation">{</span> vacationDays <span class="token operator">=</span> value<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n\n    abstract <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Accept</span><span class="token punctuation">(</span>Visitor visitor<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">class</span> <span class="token class-name">Teacher</span> <span class="token operator">:</span> Employee\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token function">Teacher</span><span class="token punctuation">(</span>string name<span class="token punctuation">,</span> <span class="token keyword">double</span> income<span class="token punctuation">,</span><span class="token keyword">int</span> vacationDays<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Name <span class="token operator">=</span> name<span class="token punctuation">;</span>\n        Income <span class="token operator">=</span> income<span class="token punctuation">;</span>\n        VacationDays <span class="token operator">=</span> vacationDays<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> override <span class="token keyword">void</span> <span class="token function">Accept</span><span class="token punctuation">(</span>Visitor visitor<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        visitor<span class="token punctuation">.</span><span class="token function">Visit</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">class</span> <span class="token class-name">Engineer</span> <span class="token operator">:</span> Employee\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token function">Engineer</span><span class="token punctuation">(</span>string name<span class="token punctuation">,</span> <span class="token keyword">double</span> income<span class="token punctuation">,</span><span class="token keyword">int</span> vacationDays<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Name <span class="token operator">=</span> name<span class="token punctuation">;</span>\n        Income <span class="token operator">=</span> income<span class="token punctuation">;</span>\n        VacationDays <span class="token operator">=</span> vacationDays<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> override <span class="token keyword">void</span> <span class="token function">Accept</span><span class="token punctuation">(</span>Visitor visitor<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        visitor<span class="token punctuation">.</span><span class="token function">Visit</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\nabstract <span class="token keyword">class</span> <span class="token class-name">Visitor</span>\n<span class="token punctuation">{</span>\n    abstract <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Visit</span><span class="token punctuation">(</span>Employee element<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">class</span> <span class="token class-name">IncomeVisitor</span> <span class="token operator">:</span> Visitor\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> override <span class="token keyword">void</span> <span class="token function">Visit</span><span class="token punctuation">(</span>Employee element<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        element<span class="token punctuation">.</span>Income <span class="token operator">*=</span> <span class="token number">1.10</span><span class="token punctuation">;</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>element<span class="token punctuation">.</span>Name <span class="token operator">+</span> <span class="token string">"的新工资是: "</span> <span class="token operator">+</span> element<span class="token punctuation">.</span>Income<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">class</span> <span class="token class-name">VacationVisitor</span> <span class="token operator">:</span> Visitor\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> override <span class="token keyword">void</span> <span class="token function">Visit</span><span class="token punctuation">(</span>Employee element<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        element<span class="token punctuation">.</span>VacationDays <span class="token operator">+=</span> <span class="token number">3</span><span class="token punctuation">;</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>element<span class="token punctuation">.</span>Name <span class="token operator">+</span> <span class="token string">"的新假期是"</span> <span class="token operator">+</span> element<span class="token punctuation">.</span>VacationDays<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">class</span> <span class="token class-name">Employees</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">private</span> ArrayList employees <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Attach</span><span class="token punctuation">(</span>Employee employee<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        employees<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>employee<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Detach</span><span class="token punctuation">(</span>Employee employee<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        employees<span class="token punctuation">.</span><span class="token function">Remove</span><span class="token punctuation">(</span>employee<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Accept</span><span class="token punctuation">(</span>Visitor visitor<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        foreach <span class="token punctuation">(</span>Employee e in employees<span class="token punctuation">)</span>\n            e<span class="token punctuation">.</span><span class="token function">Accept</span><span class="token punctuation">(</span>visitor<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Main</span><span class="token punctuation">(</span>string<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    Teacher zhangsan <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Teacher</span><span class="token punctuation">(</span><span class="token string">"张三"</span><span class="token punctuation">,</span> <span class="token number">2500.0</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    Engineer lisi    <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Engineer</span><span class="token punctuation">(</span><span class="token string">"李四"</span><span class="token punctuation">,</span> <span class="token number">3500.0</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    Employees e <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Employees</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    e<span class="token punctuation">.</span><span class="token function">Attach</span><span class="token punctuation">(</span>zhangsan<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    e<span class="token punctuation">.</span><span class="token function">Attach</span><span class="token punctuation">(</span>lisi<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    IncomeVisitor v1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">IncomeVisitor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    VacationVisitor v2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">VacationVisitor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    e<span class="token punctuation">.</span><span class="token function">Accept</span><span class="token punctuation">(</span>v1<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    e<span class="token punctuation">.</span><span class="token function">Accept</span><span class="token punctuation">(</span>v2<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    Console<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="优缺点-1"><a href="#%E4%BC%98%E7%BC%BA%E7%82%B9-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>优缺点</h3>\n<ul>\n<li>\n<p>优点</p>\n<ul>\n<li>使得增加新的操作变得很容易。如果一些操作依赖于一个复杂的结构对象的话，那么一般而言，增加新的操作会很复杂。而使用访问者模式，增加新的操作就意味着增加一个新的访问者类，因此将变得很容易。</li>\n<li>将有关的行为集中到一个访问者对象中，而不是分散到一个个的节点类中。</li>\n<li>可以跨过几个类的等级结构访问属于不同的等级结构的成员类。</li>\n</ul>\n</li>\n<li>\n<p>缺点</p>\n<ul>\n<li>破坏封装。访问者模式要求访问者对象访问并调用每一个节点对象的操作，这隐含了一个对所有节点对象的要求：它们必须暴露一些自己的操作和内部状态。不然，访问者的访问就变得没有意义。由于访问者对象自己会积累访问操作所需的状态，从而使这些状态不再存储在节点对象中，这也是破坏封装的。</li>\n<li>增加新的节点类变得很困难。每增加一个新的节点都意味着要在抽象访问者角色中增加一个新的抽象操作，并在每一个具体访问者类中增加相应的具体操作。</li>\n</ul>\n</li>\n</ul>\n<h3 id="模式使用-1"><a href="#%E6%A8%A1%E5%BC%8F%E4%BD%BF%E7%94%A8-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式使用</h3>\n<ul>\n<li>定义对象结构的类很少改变，但经常需要在此结构上定义新的操作。</li>\n<li>对象需要添加很多不同的并且不相关的操作，而我们想避免让这些操作“污染”这些对象的类。访问者模式使得我们可以将相关的操作集中起来定义在一个类中。当该对象结构被很多应用共享时，用访问者模式让每个应用仅包含需要用到的操作。</li>\n</ul>\n<h3 id="模式应用-1"><a href="#%E6%A8%A1%E5%BC%8F%E5%BA%94%E7%94%A8-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式应用</h3>\n<ul>\n<li>访问者模式中对象结构存储了不同类型的元素对象，以供不同访问者访问。访问者模式包括两个层次结构，一个是访问者层次结构，提供了抽象访问者和具体访问者，一个是元素层次结构，提供了抽象元素和具体元素。相同的访问者可以以不同的方式访问不同的元素，相同的元素可以接受不同访问者以不同访问方式访问。</li>\n<li>在访问者模式中，增加新的访问者无须修改原有系统，系统具有较好的可扩展性。</li>\n</ul>\n<h3 id="模式小结"><a href="#%E6%A8%A1%E5%BC%8F%E5%B0%8F%E7%BB%93" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式小结</h3>\n<p>访问者模式的主要优点在于使得增加新的访问操作变得很容易，将有关元素对象的访问行为集中到一个访问者对象中，而不是分散到一个个的元素类中，还可以跨过类的等级结构访问属于不同的等级结构的元素类，让用户能够在不修改现有类层次结构的情况下，定义该类层次结构的操作；其主要缺点在于增加新的元素类很困难，而且在一定程度上破坏系统的封装性。</p>\n<h2 id="解释器模式interpreter"><a href="#%E8%A7%A3%E9%87%8A%E5%99%A8%E6%A8%A1%E5%BC%8Finterpreter" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>解释器模式(Interpreter)</h2>\n<p>给定一个语言，定义它的文法的一种表示，并定义一个解释器，这个解释器使用该表示来解释语言中的句子。</p>\n<h3 id="模式背景-2"><a href="#%E6%A8%A1%E5%BC%8F%E8%83%8C%E6%99%AF-2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式背景</h3>\n<p>设计与实现一个四则算术运算解释器</p>\n<ul>\n<li>可以分析任意+、-、*、/表达式，并计算其数值</li>\n<li>输入表达式为一个字符串表达式</li>\n<li>输出结果为双精度浮点数(Double)</li>\n</ul>\n<p>输入是一个用字符串表达的四则运算，比如 1 + 2 * 3 。目的是试图去理解这个字符串表达的运算指令，然后计算出结果 7。之所以是一个解释器 Interpreter，而不是一个编译器 Compiler，是因为程序是去理解指令并且执行指令，而不是把指令编译成机器代码来运行；后者是编译器的目标。</p>\n<p>第一个部分，是截取输入字符串，然后返回单元指令。比如，对于指令 1 + 2 * 3 – 4 / 5，就需要被分解成如下所示的单元指令集：</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180418123729-35bd13c91a76cd6fd56ce4b2041e0375-dc56b.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 58.307210031347964%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAACWElEQVQoz33T60tTcRzH8f0thU96UOG8kXlLc22aprOS6EYP0jAECaehUkJCiamkW7qVuvCytqmEWuLTRtnFIDIfWJvaRWjlREzKbed9+u3Mmi7rBx/O7/w4vPjy+36Pam0NVlf/FTkq8NMvI8lbExCRRaxWWVLJchBJCiARCeJMVj4iKjJf3O94Yrcx6bQzOejg2ZATl82G2zWBbQBZJW/o0dm8JElSzlYWFzHptNxISqRxXxINe/eI7KYuJobBU3oGeoOonr+ewD5qZGjcrOT+aDuuqZEt6G9wyePBojtE74lirEWFdGQdwJSeSmtCAhNlZ+kPgRcbEjh/JZaSq2pK6+M4V7sLo6M0DG5ABMNX4Jufw5Kro+eonq6CIxgz0mhLSaZJrWa89HQYNLSkU9uWQ02bVjx1GFoysD40KIB3eZnPXi9rfn+4wjkP5hwtPceKBJiPKTNDAW9uBmtuaahrzxNYLvW39QLMpHusEml9HffYCLMPhpkVTViamcb38QOWEBiqsDBS4RbQ0JxOdUs21a0Hudyq4VJTahj0B/BOv+Hr22kWXzxneWEe38ICZq1GAe/m59GelvI3WH49norG/SLJIimUNcTSI8DtOu+bi9xht74gUmGcAC+cCYOdjgrMToNIJRZnFSZbOTMelwIEgwGlMdKmptw5nMO94uN0F+npyM7CKLrcnJjIo5KTYfB/c/hnv9Htb263ApjFLHZqsmmOV9Mk5vDazh08rq/CMSyHQLZd0cMdev+xssLUQD+vxC8Rysu+Pqb6+3ja1cX3T++xO2V+AReR7TNmSzUZAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180418123729" title="" data-src="/static/微信截图_20180418123729-35bd13c91a76cd6fd56ce4b2041e0375-fee1c.png" data-srcset="/static/微信截图_20180418123729-35bd13c91a76cd6fd56ce4b2041e0375-a67b7.png 200w,\n/static/微信截图_20180418123729-35bd13c91a76cd6fd56ce4b2041e0375-0b187.png 400w,\n/static/微信截图_20180418123729-35bd13c91a76cd6fd56ce4b2041e0375-fee1c.png 800w,\n/static/微信截图_20180418123729-35bd13c91a76cd6fd56ce4b2041e0375-dc56b.png 957w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>第二个部分，把单元指令集组成一个树结构，称之为 Abstract Syntax Tree。按照将来需要解释的顺序，优先执行的指令放在树的叶的位置，最后执行的指令是树根 Root。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180418123855-e72b27707daa5c0ce22d015829a0e5b5-5bcb1.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 49.184339314845026%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAACDElEQVQoz21S/UtTYRS+/0kg/RqJSRBIfkVgNPqmPyj6KXJMm6twohBRrlIrclAZk1i53WU4E5xMmXcuN1x3d/f76316977X64IOHM45nMNzznPOEeQWCLiQY8fxAUMnMAwESgIFdGotE5BVDz8khed1QkyToEWxhLZsoPgxTdbevELh/VusvU6h9mszgPY7fXAiJIzrbRWJ3BYs2wrncRwCQUy9I7HBAUyMDJEH5/tx73QPstFxXuL5tIz8ox0x6FimaTJf03TYlsUS1BAh/2IBycgVzN6+ianRYUT7epGfinPqjhPO5hOf2dnCNrLlKvNdnzdY3NjBcmmfERLyL5cwfXUMM7duID48iIdnz4SADUmCrap0Ui/cwPbhEeR2m4Ve0ORA1rDXaIK4DHART8cuI3ktgkdDFxmg+CQBl9La//wJe8sfoNUOobsKMuvPGcDKjoSvuwfML5TSkH5vwrYVfBHn6Q7nlzBzPYK5u3co5RFEz/UiF5/klChl13XZHXRLwVYlw0GqR/hZrTO/XBPRaFVguzrWSysQvj9LYXLgAhKXRjHe34f7PacgPk4ER/G6rsvlj9KAqbXg0d+pNyV0C6Hlwm6+iCyl+C05jdWJGDL0ws1ymRf43Vfm+1rdmEOlXoRhqUjnYpSBHTwwgWn5ECwH/5XjF+FgJ7FDATw6eSd2HCvMdwA73/MXWkzH/NQg28MAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180418123855" title="" data-src="/static/微信截图_20180418123855-e72b27707daa5c0ce22d015829a0e5b5-fee1c.png" data-srcset="/static/微信截图_20180418123855-e72b27707daa5c0ce22d015829a0e5b5-a67b7.png 200w,\n/static/微信截图_20180418123855-e72b27707daa5c0ce22d015829a0e5b5-0b187.png 400w,\n/static/微信截图_20180418123855-e72b27707daa5c0ce22d015829a0e5b5-fee1c.png 800w,\n/static/微信截图_20180418123855-e72b27707daa5c0ce22d015829a0e5b5-b1a91.png 1200w,\n/static/微信截图_20180418123855-e72b27707daa5c0ce22d015829a0e5b5-5bcb1.png 1226w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>程序只有 2 种单元指令：操作数 NumExpression 和 运算符 OpExpression 。</p>\n<p>定义了一个抽象类，叫做 Expression，然后 NumExpression 和 OpExpression 继承了该抽象类。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180418123939-de0ca154ab4a3405d2000e83fa83eb6e-88ef2.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 51.751751751751755%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAAB5klEQVQoz41Sy2sacRDeuH9BSCDgIZBTrkloSMmhARHUU48xgdISA/Uf8eSpeJZ4ifEQtV48iOIDfIIYfIIoPvD9QkWj624yndmupUJJMzAws/PtN9/M/BhGMpVKxQCAGNdqtSeMoVKpQK/Xg0ajQSkUi8VHqmPIKhQK5k3TaDR/CDudToAIeJ7n0IXVarWkHBvdSYQypVL5NqFarSbgFsWlUsk3nU6h2+3O0Z/RZ/P5HPL5vHmtkAT80xAsG41GbC6XY6mzyWTaCoVCh9ls9tjj8Xxyu90//H7/UTqdPvX5fAc0BeHq9TqL6tlWqyWTmjDvMVYul+//D7RBFo1GL+PxuA5VfPN6vfpEInGTTCZ16Lcul2uXMDabbS+VShFGFwwGdYFAQI/1r5lM5ns4HL4gDKr9TdhsNse0n3K5DP1+H4bDIYzHY1gsFhCLxT4QBkc95zgO2u024IiAKwI8nHh5HP3n+lAiYaFQqBEAyXh8IgI6PxgMhGq1KuAOjwmDSs/wRw6bvVBdwnGz2Qxwt/cbhKhQfGSo6JVULJdLei6iykgkciIp/DiZTAT6jvU1TqD/sPHDBqHFYvnsdDqv7Xa7du2Ya61Wq9ZoNG4TxmAw7OAeLx0Ox9VfOMq/mM3mc8LgHUS+X8S6n8voAQ//AAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180418123939" title="" data-src="/static/微信截图_20180418123939-de0ca154ab4a3405d2000e83fa83eb6e-fee1c.png" data-srcset="/static/微信截图_20180418123939-de0ca154ab4a3405d2000e83fa83eb6e-a67b7.png 200w,\n/static/微信截图_20180418123939-de0ca154ab4a3405d2000e83fa83eb6e-0b187.png 400w,\n/static/微信截图_20180418123939-de0ca154ab4a3405d2000e83fa83eb6e-fee1c.png 800w,\n/static/微信截图_20180418123939-de0ca154ab4a3405d2000e83fa83eb6e-88ef2.png 999w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="77703665697771770000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`abstract class Expression\n{\n    abstract public double Interpreter(Syntax root);\n}\n\nclass NumExpression : Expression\n{\n    private double _value;\n\n    public NumExpression(double value)\n    {\n        this._value = value;\n    }\n    public double Value\n    {\n        get { return this._value; }\n    }\n    public override double Interpreter(Syntax root)\n    {\n        return ((NumExpression)(root.Expression)).Value;\n    }\n}\n\nenum Op : int\n{\n    Plus = \'+\',\n    Minus = \'-\',\n    Multiply = \'*\',\n    Divide = \'/\'\n}\nenum Prioirty\n{\n    Lv2 = 2,\n    Lv1 = 1,\n    Lv0 = 0\n}\n\nclass OpExpression : Expression\n{\n    private Op _value;\n    ……\n    public override double Interpreter(Syntax root)\n    {\n        double lvalue, rvalue;\n        if (root.LeftChild == null)\n            lvalue = 0;\n        else\n            lvalue = ((Expression)root.LeftChild.Expression).Interpreter(root.LeftChild);\n\n        if (root.RightChild == null)\n            rvalue = 0;\n        else\n            rvalue = ((Expression)root.RightChild.Expression).Interpreter(root.RightChild);\n        switch (((OpExpression)root.Expression).Value)\n        {\n            case Op.Plus:\n                return lvalue + rvalue;\n            case Op.Minus:\n                return lvalue - rvalue;\n            case Op.Multiply:\n                return lvalue * rvalue;\n            case Op.Divide:\n                return lvalue / rvalue;\n            default:\n                return 0;\n        }\n    }\n}\n\nclass Syntax\n{\n    private Expression _Expression;\n    private Syntax _left;\n    private Syntax _right;\n    public Syntax(Expression Expression)\n    {\n        this._Expression = Expression;\n        this._left = null;\n        this._right = null;\n    }\n    public Expression Expression\n    {\n        get { return this._Expression; }\n    }\n    public Syntax LeftChild\n    {\n        get { return this._left; }\n        set { this._left = value; }\n    }\n    public Syntax RightChild\n    {\n        get { return this._right; }\n        set { this._right = value; }\n    }\n}\n\nclass SyntaxTree\n{\n    private Syntax _root;\n    private int _count;\n\n    public SyntaxTree()\n    {\n        this._root = null;\n        this._count = 0;\n    }\n    public Syntax Root\n    {\n        get { return this._root; }\n    }\n    public void Append(Expression Expression)\n    {\n        this._root = this.Append(this._root, Expression);\n        this._count++;\n    }\n    private Syntax Append(Syntax root, Expression Expression)\n    {\n        ……\n    }\n}\n\nclass Interpreter\n{\n    private Expressionizer Expressionizer = new Expressionizer();\n\n    public SyntaxTree Eval(String expr)\n    {\n        Expression[] Expressions = Expressionizer.Parse(expr);\n        SyntaxTree astree = new SyntaxTree();\n\n        foreach (Expression Expression in Expressions)\n        {\n            astree.Append(Expression);\n        }\n        return astree;\n    }\n}`, `77703665697771770000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="cpp"\n              >\n                <span class="gatsby-code-button-language">cpp</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="cpp"><pre style="counter-reset: linenumber NaN" class="language-cpp line-numbers"><code class="language-cpp">abstract <span class="token keyword">class</span> <span class="token class-name">Expression</span>\n<span class="token punctuation">{</span>\n    abstract <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">Interpreter</span><span class="token punctuation">(</span>Syntax root<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">class</span> <span class="token class-name">NumExpression</span> <span class="token operator">:</span> Expression\n<span class="token punctuation">{</span>\n    <span class="token keyword">private</span> <span class="token keyword">double</span> _value<span class="token punctuation">;</span>\n\n    <span class="token keyword">public</span> <span class="token function">NumExpression</span><span class="token punctuation">(</span><span class="token keyword">double</span> value<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">this</span><span class="token punctuation">.</span>_value <span class="token operator">=</span> value<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token keyword">double</span> Value\n    <span class="token punctuation">{</span>\n        get <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_value<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> override <span class="token keyword">double</span> <span class="token function">Interpreter</span><span class="token punctuation">(</span>Syntax root<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>NumExpression<span class="token punctuation">)</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>Expression<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Value<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">enum</span> <span class="token class-name">Op</span> <span class="token operator">:</span> <span class="token keyword">int</span>\n<span class="token punctuation">{</span>\n    Plus <span class="token operator">=</span> <span class="token string">\'+\'</span><span class="token punctuation">,</span>\n    Minus <span class="token operator">=</span> <span class="token string">\'-\'</span><span class="token punctuation">,</span>\n    Multiply <span class="token operator">=</span> <span class="token string">\'*\'</span><span class="token punctuation">,</span>\n    Divide <span class="token operator">=</span> <span class="token string">\'/\'</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">enum</span> <span class="token class-name">Prioirty</span>\n<span class="token punctuation">{</span>\n    Lv2 <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span>\n    Lv1 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>\n    Lv0 <span class="token operator">=</span> <span class="token number">0</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">class</span> <span class="token class-name">OpExpression</span> <span class="token operator">:</span> Expression\n<span class="token punctuation">{</span>\n    <span class="token keyword">private</span> Op _value<span class="token punctuation">;</span>\n    ……\n    <span class="token keyword">public</span> override <span class="token keyword">double</span> <span class="token function">Interpreter</span><span class="token punctuation">(</span>Syntax root<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">double</span> lvalue<span class="token punctuation">,</span> rvalue<span class="token punctuation">;</span>\n        <span class="token keyword">if</span> <span class="token punctuation">(</span>root<span class="token punctuation">.</span>LeftChild <span class="token operator">==</span> null<span class="token punctuation">)</span>\n            lvalue <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n        <span class="token keyword">else</span>\n            lvalue <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>Expression<span class="token punctuation">)</span>root<span class="token punctuation">.</span>LeftChild<span class="token punctuation">.</span>Expression<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Interpreter</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>LeftChild<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n        <span class="token keyword">if</span> <span class="token punctuation">(</span>root<span class="token punctuation">.</span>RightChild <span class="token operator">==</span> null<span class="token punctuation">)</span>\n            rvalue <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n        <span class="token keyword">else</span>\n            rvalue <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>Expression<span class="token punctuation">)</span>root<span class="token punctuation">.</span>RightChild<span class="token punctuation">.</span>Expression<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Interpreter</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>RightChild<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">switch</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>OpExpression<span class="token punctuation">)</span>root<span class="token punctuation">.</span>Expression<span class="token punctuation">)</span><span class="token punctuation">.</span>Value<span class="token punctuation">)</span>\n        <span class="token punctuation">{</span>\n            <span class="token keyword">case</span> Op<span class="token punctuation">.</span>Plus<span class="token operator">:</span>\n                <span class="token keyword">return</span> lvalue <span class="token operator">+</span> rvalue<span class="token punctuation">;</span>\n            <span class="token keyword">case</span> Op<span class="token punctuation">.</span>Minus<span class="token operator">:</span>\n                <span class="token keyword">return</span> lvalue <span class="token operator">-</span> rvalue<span class="token punctuation">;</span>\n            <span class="token keyword">case</span> Op<span class="token punctuation">.</span>Multiply<span class="token operator">:</span>\n                <span class="token keyword">return</span> lvalue <span class="token operator">*</span> rvalue<span class="token punctuation">;</span>\n            <span class="token keyword">case</span> Op<span class="token punctuation">.</span>Divide<span class="token operator">:</span>\n                <span class="token keyword">return</span> lvalue <span class="token operator">/</span> rvalue<span class="token punctuation">;</span>\n            <span class="token keyword">default</span><span class="token operator">:</span>\n                <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">class</span> <span class="token class-name">Syntax</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">private</span> Expression _Expression<span class="token punctuation">;</span>\n    <span class="token keyword">private</span> Syntax _left<span class="token punctuation">;</span>\n    <span class="token keyword">private</span> Syntax _right<span class="token punctuation">;</span>\n    <span class="token keyword">public</span> <span class="token function">Syntax</span><span class="token punctuation">(</span>Expression Expression<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">this</span><span class="token punctuation">.</span>_Expression <span class="token operator">=</span> Expression<span class="token punctuation">;</span>\n        <span class="token keyword">this</span><span class="token punctuation">.</span>_left <span class="token operator">=</span> null<span class="token punctuation">;</span>\n        <span class="token keyword">this</span><span class="token punctuation">.</span>_right <span class="token operator">=</span> null<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> Expression Expression\n    <span class="token punctuation">{</span>\n        get <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_Expression<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> Syntax LeftChild\n    <span class="token punctuation">{</span>\n        get <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_left<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n        set <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_left <span class="token operator">=</span> value<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> Syntax RightChild\n    <span class="token punctuation">{</span>\n        get <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_right<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n        set <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_right <span class="token operator">=</span> value<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">class</span> <span class="token class-name">SyntaxTree</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">private</span> Syntax _root<span class="token punctuation">;</span>\n    <span class="token keyword">private</span> <span class="token keyword">int</span> _count<span class="token punctuation">;</span>\n\n    <span class="token keyword">public</span> <span class="token function">SyntaxTree</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">this</span><span class="token punctuation">.</span>_root <span class="token operator">=</span> null<span class="token punctuation">;</span>\n        <span class="token keyword">this</span><span class="token punctuation">.</span>_count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> Syntax Root\n    <span class="token punctuation">{</span>\n        get <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_root<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Append</span><span class="token punctuation">(</span>Expression Expression<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">this</span><span class="token punctuation">.</span>_root <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">Append</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_root<span class="token punctuation">,</span> Expression<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">this</span><span class="token punctuation">.</span>_count<span class="token operator">++</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">private</span> Syntax <span class="token function">Append</span><span class="token punctuation">(</span>Syntax root<span class="token punctuation">,</span> Expression Expression<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        ……\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">class</span> <span class="token class-name">Interpreter</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">private</span> Expressionizer Expressionizer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Expressionizer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">public</span> SyntaxTree <span class="token function">Eval</span><span class="token punctuation">(</span>String expr<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Expression<span class="token punctuation">[</span><span class="token punctuation">]</span> Expressions <span class="token operator">=</span> Expressionizer<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>expr<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        SyntaxTree astree <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">SyntaxTree</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n        foreach <span class="token punctuation">(</span>Expression Expression in Expressions<span class="token punctuation">)</span>\n        <span class="token punctuation">{</span>\n            astree<span class="token punctuation">.</span><span class="token function">Append</span><span class="token punctuation">(</span>Expression<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n        <span class="token keyword">return</span> astree<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="模式动机-2"><a href="#%E6%A8%A1%E5%BC%8F%E5%8A%A8%E6%9C%BA-2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式动机</h3>\n<ul>\n<li>如果在系统中某一特定类型的问题发生的频率很高，此时可以考虑将这些问题的实例表述为一个语言中的句子，因此可以构建一个解释器，该解释器通过解释这些句子来解决这些问题。</li>\n<li>解释器模式描述了如何构成一个简单的语言解释器，主要应用在使用面向对象语言开发的编译器中。</li>\n</ul>\n<h3 id="模式定义-2"><a href="#%E6%A8%A1%E5%BC%8F%E5%AE%9A%E4%B9%89-2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式定义</h3>\n<p>定义语言的文法，并且建立一个解释器来解释该语言中的句子，这里的“语言”意思是使用规定格式和语法的代码，它是一种类行为型模式。</p>\n<h3 id="模式结构-2"><a href="#%E6%A8%A1%E5%BC%8F%E7%BB%93%E6%9E%84-2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式结构</h3>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180418124653-b6b18a22bd36fb5991155aea9f4641b1-5f38b.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.904498816101025%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAACvElEQVQ4y31TS0wTURQd21IgrRsWunDpwqVx7caF/AyJmIi4YYlxZVgYF8YEVu6MEoUoG2Mpv4rYghVaxn4pSsp0SqG10JaZ/tuB8imUCZS+65uZCkRSb3Im8+45c+flnPcIQqhuIIgeuHAW+lVQCFQsj97sA4A/s180eyNoIcUXl3gAUwJ1CrwtA3LiXElDqjDkf/HEBNUCRW9CXwIP9GwBuPMAVg7Agf8wHoVHAm+I/zMQa4m72oLsen9RIa3RSV+o+Sy65syiO+Zkqd7AHjVMREv1n6PQrAmjKwI/wgBRofAuT9/FpyZwtne+dCw630znoea9KVL7ynGgCm6WauxxqAbYP+HZ3JHSvpxS2wJZ1ayfU1EcqEjmUD25Lnn83Cb6L0EcyAO9EM7Q9rWMx7sNK3NZZH4xh9S9TpCV+Wf+2EbI7otQpI+hp70sZWHzqzYO7gl8hJd05SwIAnsMLEagDGMSoS4rquvUFUSzPWlek8N93w4AheHcxAHhtY6FpwL/QI/D68a77SkPtmVQmykFbVMJuP8lhtpHWWjpXT5NzhzJ3xh1r3eMLcQej7lTXW8dofYPi5mOTwxcFfiXiydHTVHRbOP4iOzjtEs25ggp/heKZckvt5LfZa8Ni/KmgbQyyfMywsUhuZMDRf/ynqzSh9qJtHJgPKfs+5qt0hi3qy/eXK2oJVJ7UjoHAEp2o3B7xuFu1k6STYNGe+MQSbVYmYNbLpD8ASiJWu4QLpFz3lY9Od849M3SqJ2Zbx38QbfZ43wDweaReNZiBbiME4V0EYezXQI6h8CH15bU8da7AKgFTXgHiRYweXh4hIMJ7ZYgsCPdol84OQ9uEk5mVxz4M3Vc54jkqCl6PTS5kg6OUtHfWk+C0YX52YEM1AoaZ1xK3hXn6+1r2bSBZv16rB2mosFhXzaoj5WCfwBG1uyfYF85RQAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180418124653" title="" data-src="/static/微信截图_20180418124653-b6b18a22bd36fb5991155aea9f4641b1-fee1c.png" data-srcset="/static/微信截图_20180418124653-b6b18a22bd36fb5991155aea9f4641b1-a67b7.png 200w,\n/static/微信截图_20180418124653-b6b18a22bd36fb5991155aea9f4641b1-0b187.png 400w,\n/static/微信截图_20180418124653-b6b18a22bd36fb5991155aea9f4641b1-fee1c.png 800w,\n/static/微信截图_20180418124653-b6b18a22bd36fb5991155aea9f4641b1-b1a91.png 1200w,\n/static/微信截图_20180418124653-b6b18a22bd36fb5991155aea9f4641b1-5f38b.png 1267w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<ul>\n<li>AbstractExpression: 抽象表达式</li>\n<li>TerminalExpression: 终结符表达式</li>\n<li>NonterminalExpression: 非终结符表达式</li>\n<li>Context: 环境类</li>\n<li>Client: 客户类</li>\n</ul>\n<h3 id="模式分析"><a href="#%E6%A8%A1%E5%BC%8F%E5%88%86%E6%9E%90" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式分析</h3>\n<p>解释器模式描述了如何为简单的语言定义一个文法，如何在该语言中表示一个句子，以及如何解释这些句子。</p>\n<p>文法规则实例：</p>\n<ul>\n<li>expression ::= value | symbol</li>\n<li>symbol ::= expression ’+’ expression | expression ’-‘</li>\n<li>value ::= an integer //一个整数值</li>\n<li>在文法规则定义中可以使用一些符号来表示不同的含义，如使用“|”表示或，使用“{”和“}”表示组合，使用“*”表示出现 0 次或多次等。</li>\n</ul>\n<p>抽象语法树：</p>\n<p>除了使用文法规则来定义一个语言，在解释器模式中还可以通过一种称之为抽象语法树(Abstract Syntax Tree, AST)的图形方式来直观地表示语言的构成，每一棵抽象语法树对应一个语言实例。</p>\n<ul>\n<li>抽象语法树描述了如何构成一个复杂的句子，通过对抽象语法树的分析，可以识别出语言中的终结符和非终结符类。</li>\n<li>在解释器模式中，每一种终结符和非终结符都有一个具体类与之对应，正因为使用类来表示每一个语法规则，使得系统具有较好的扩展性和灵活性。</li>\n</ul>\n<h3 id="优缺点-2"><a href="#%E4%BC%98%E7%BC%BA%E7%82%B9-2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>优缺点</h3>\n<ul>\n<li>\n<p>优点</p>\n<ul>\n<li>易于改变和扩展文法。</li>\n<li>易于实现文法。</li>\n<li>增加了新的解释表达式的方式。</li>\n</ul>\n</li>\n<li>\n<p>缺点</p>\n<ul>\n<li>对于复杂文法难以维护。</li>\n<li>执行效率较低。</li>\n<li>应用场景很有限。</li>\n</ul>\n</li>\n</ul>\n<h3 id="模式使用-2"><a href="#%E6%A8%A1%E5%BC%8F%E4%BD%BF%E7%94%A8-2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式使用</h3>\n<ul>\n<li>可以将一个需要解释执行的语言中的句子表示为一个抽象语法树。</li>\n<li>一些重复出现的问题可以用一种简单的语言来进行表达。</li>\n<li>文法较为简单。</li>\n<li>效率不是关键问题。</li>\n</ul>\n<h3 id="模式应用-2"><a href="#%E6%A8%A1%E5%BC%8F%E5%BA%94%E7%94%A8-2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式应用</h3>\n<ul>\n<li>解释器模式在使用面向对象语言实现的编译器中得到了广泛的应用，如 Smalltalk 语言的编译器。</li>\n<li>目前有一些基于 Java 抽象语法树的源代码处理工具，如在 Eclipse 中就提供了 Eclipse AST，它是 Eclipse JDT 的一个重要组成部分，用来表示 Java 语言的语法结构，用户可以通过扩展其功能，创建自己的文法规则。</li>\n<li>可以使用解释器模式，通过 C++、Java、C#等面向对象语言开发简单的编译器，如数学表达式解析器、正则表达式解析器等，用于增强这些语言的功能，使之增加一些新的文法规则，用于解释一些特定类型的语句。</li>\n<li>在实际项目开发中如果需要解析数学公式，无须再运用解释器模式进行设计，可以直接使用一些第三方解析工具包，它们可以统称为数学表达式解析器(Math Expression Parser, MEP)，如 Expression4J、Jep、JbcParser、Symja、Math Expression String Parser(MESP)等来取代解释器模式，它们可以方便地解释一些较为复杂的文法，功能强大，且使用简单，效率较好。</li>\n<li>Expression4J：Expression4J 是一个基于 Java 的开源框架，它用于对数学表达式进行操作，是一个数学公式解析器，在 Expression4J 中可以将数学表达式存储在字符串对象中。Expression4J 是高度定制的，用户可以自定义文法，其主要功能包括实数和复数的基本数学运算，支持基本数学函数、复杂函数以及用户使用 Java 语言自定义的函数和文法，还可以定义函数目录（函数集）、支持 XML 配置文件等。</li>\n</ul>\n<h3 id="模式总结"><a href="#%E6%A8%A1%E5%BC%8F%E6%80%BB%E7%BB%93" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式总结</h3>\n<ul>\n<li>解释器模式定义语言的文法，并且建立一个解释器来解释该语言中的句子，这里的“语言”意思是使用规定格式和语法的代码，它是一种类行为型模式。</li>\n<li>解释器模式描述了如何为简单的语言定义一个文法，如何在该语言中表示一个句子，以及如何解释这些句子。</li>\n<li>解释器模式主要包含如下四个角色：在抽象表达式中声明了抽象的解释操作，它是所有的终结符表达式和非终结符表达式的公共父类；终结符表达式是抽象表达式的子类，它实现了与文法中的终结符相关联的解释操作；非终结符表达式也是抽象表达式的子类，它实现了文法中非终结符的解释操作；环境类又称为上下文类，它用于存储解释器之外的一些全局信息。</li>\n<li>对于一个简单的语言可以使用一些文法规则来进行定义，还可以通过抽象语法树的图形方式来直观地表示语言的构成，每一棵抽象语法树对应一个语言实例。</li>\n<li>解释器模式的主要优点包括易于改变和扩展文法，易于实现文法并增加了新的解释表达式的方式；其主要缺点是对于复杂文法难以维护，执行效率较低且应用场景很有限。</li>\n<li>解释器模式适用情况包括：可以将一个需要解释执行的语言中的句子表示为一个抽象语法树；一些重复出现的问题可以用一种简单的语言来进行表达；文法较为简单且效率不是关键问题。</li>\n</ul>',
id:"/home/runner/work/GatsbyBlog/GatsbyBlog/blog/设计模式之行为型模式（三）/index.md absPath of file >>> MarkdownRemark",timeToRead:11,frontmatter:{date:"2018-04-19 00:04:46",path:"/design-pattern-behavior-3/",tags:"面试, 设计模式, 读书笔记",title:"设计模式之行为型模式（三）",draft:null}},{excerpt:"备忘录模式(Memento…",html:'<h2 id="备忘录模式memento"><a href="#%E5%A4%87%E5%BF%98%E5%BD%95%E6%A8%A1%E5%BC%8Fmemento" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>备忘录模式(Memento)</h2>\n<p>在不破坏封装性的前提下，捕获一个对象的内部状态，并在该对象之外保存这个状态。这样以后就可将该对象恢复到原先保存的状态。</p>\n<h3 id="模式背景"><a href="#%E6%A8%A1%E5%BC%8F%E8%83%8C%E6%99%AF" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式背景</h3>\n<p>我要保存游戏进度</p>\n<ul>\n<li>游戏角色，生命力、攻击力、防御力</li>\n<li>模拟战斗代码，读取进度</li>\n</ul>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="7854839991937412000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`class GameRole\n{\n    //生命力\n    private int vit;\n    public int Vitality\n    {\n        get { return vit; }\n        set { vit = value; }\n    }\n\n    //攻击力\n    private int atk;\n    public int Attack\n    {\n        get { return atk; }\n        set { atk = value; }\n    }\n\n    //防御力\n    private int def;\n    public int Defense\n    {\n        get { return def; }\n        set { def = value; }\n    }\n    //状态显示\n    public void StateDisplay()\n    {\n        Console.WriteLine(&quot;角色当前状态：&quot;);\n        Console.WriteLine(&quot;体力：{0}&quot;, this.vit);\n        Console.WriteLine(&quot;攻击力：{0}&quot;, this.atk);\n        Console.WriteLine(&quot;防御力：{0}&quot;, this.def);\n        Console.WriteLine(&quot;&quot;);\n    }\n\n    //获得初始状态\n    public void GetInitState()\n    {\n        this.vit = 100;\n        this.atk = 100;\n        this.def = 100;\n    }\n\n    //战斗\n    public void Fight()\n    {\n        this.vit = 0;\n        this.atk = 0;\n        this.def = 0;\n    }\n}\n\nstatic void Main(string[] args)\n{\n    //大战Boss前\n    GameRole lixiaoyao = new GameRole();\n    lixiaoyao.GetInitState();\n    lixiaoyao.StateDisplay();\n\n    //保存进度\n    GameRole backup = new GameRole();\n    backup.Vitality = lixiaoyao.Vitality;\n    backup.Attack = lixiaoyao.Attack;\n    backup.Defense = lixiaoyao.Defense;\n\n    //大战Boss时，损耗严重\n    lixiaoyao.Fight();\n    lixiaoyao.StateDisplay();\n\n    //恢复之前状态\n    lixiaoyao.Vitality = backup.Vitality;\n    lixiaoyao.Attack = backup.Attack;\n    lixiaoyao.Defense = backup.Defense;\n\n    lixiaoyao.StateDisplay();\n    Console.Read();\n}`, `7854839991937412000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="cpp"\n              >\n                <span class="gatsby-code-button-language">cpp</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="cpp"><pre style="counter-reset: linenumber NaN" class="language-cpp line-numbers"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">GameRole</span>\n<span class="token punctuation">{</span>\n    <span class="token comment">//生命力</span>\n    <span class="token keyword">private</span> <span class="token keyword">int</span> vit<span class="token punctuation">;</span>\n    <span class="token keyword">public</span> <span class="token keyword">int</span> Vitality\n    <span class="token punctuation">{</span>\n        get <span class="token punctuation">{</span> <span class="token keyword">return</span> vit<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n        set <span class="token punctuation">{</span> vit <span class="token operator">=</span> value<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token comment">//攻击力</span>\n    <span class="token keyword">private</span> <span class="token keyword">int</span> atk<span class="token punctuation">;</span>\n    <span class="token keyword">public</span> <span class="token keyword">int</span> Attack\n    <span class="token punctuation">{</span>\n        get <span class="token punctuation">{</span> <span class="token keyword">return</span> atk<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n        set <span class="token punctuation">{</span> atk <span class="token operator">=</span> value<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token comment">//防御力</span>\n    <span class="token keyword">private</span> <span class="token keyword">int</span> def<span class="token punctuation">;</span>\n    <span class="token keyword">public</span> <span class="token keyword">int</span> Defense\n    <span class="token punctuation">{</span>\n        get <span class="token punctuation">{</span> <span class="token keyword">return</span> def<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n        set <span class="token punctuation">{</span> def <span class="token operator">=</span> value<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n    <span class="token comment">//状态显示</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">StateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"角色当前状态："</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"体力：{0}"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>vit<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"攻击力：{0}"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>atk<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"防御力：{0}"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>def<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token comment">//获得初始状态</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">GetInitState</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>\n        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>\n        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token comment">//战斗</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Fight</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Main</span><span class="token punctuation">(</span>string<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    <span class="token comment">//大战Boss前</span>\n    GameRole lixiaoyao <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">GameRole</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    lixiaoyao<span class="token punctuation">.</span><span class="token function">GetInitState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    lixiaoyao<span class="token punctuation">.</span><span class="token function">StateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token comment">//保存进度</span>\n    GameRole backup <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">GameRole</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    backup<span class="token punctuation">.</span>Vitality <span class="token operator">=</span> lixiaoyao<span class="token punctuation">.</span>Vitality<span class="token punctuation">;</span>\n    backup<span class="token punctuation">.</span>Attack <span class="token operator">=</span> lixiaoyao<span class="token punctuation">.</span>Attack<span class="token punctuation">;</span>\n    backup<span class="token punctuation">.</span>Defense <span class="token operator">=</span> lixiaoyao<span class="token punctuation">.</span>Defense<span class="token punctuation">;</span>\n\n    <span class="token comment">//大战Boss时，损耗严重</span>\n    lixiaoyao<span class="token punctuation">.</span><span class="token function">Fight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    lixiaoyao<span class="token punctuation">.</span><span class="token function">StateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token comment">//恢复之前状态</span>\n    lixiaoyao<span class="token punctuation">.</span>Vitality <span class="token operator">=</span> backup<span class="token punctuation">.</span>Vitality<span class="token punctuation">;</span>\n    lixiaoyao<span class="token punctuation">.</span>Attack <span class="token operator">=</span> backup<span class="token punctuation">.</span>Attack<span class="token punctuation">;</span>\n    lixiaoyao<span class="token punctuation">.</span>Defense <span class="token operator">=</span> backup<span class="token punctuation">.</span>Defense<span class="token punctuation">;</span>\n\n    lixiaoyao<span class="token punctuation">.</span><span class="token function">StateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    Console<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="模式动机"><a href="#%E6%A8%A1%E5%BC%8F%E5%8A%A8%E6%9C%BA" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式动机</h3>\n<ul>\n<li>在应用软件的开发过程中，有时我们有必要记录一个对象的内部状态。为了允许用户取消不确定的操作或从错误中恢复过来，需要实现备份点和撤销机制，而要实现这些机制，我们必须事先将状态信息保存在某处，这样状态才能将对象恢复到它们原先的状态。</li>\n<li>但是对象通常封装了其部分或所有的状态信息，使得其状态不能被其它对象访问，也就不可能在该对象之外保存其状态，而暴露其内部状态又将违反封装的原则，可能有损系统的可靠性和可扩展性。</li>\n</ul>\n<h3 id="模式定义"><a href="#%E6%A8%A1%E5%BC%8F%E5%AE%9A%E4%B9%89" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式定义</h3>\n<p>在不破坏封装的前提下，捕获一个对象的内部状态，并在该对象之外保存这个状态，这样可以在以后将对象恢复到原先保存的状态。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180417173923-8c2d72c9d305bb03e4230ba0093768ed-63d95.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 33.365477338476374%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsSAAALEgHS3X78AAAAv0lEQVQY06WQyQ6DMAxE8/9/1xNI7IsIidgRYad9IrdWPVT1IXLGMx7b4vlHiHEc8zwvy5Jk33eg67ps7TN5F2dZhrhpmmEY5nkGquva8zzXdeM4XtcV5DiObduodl3Xti0JX0DhOA5KPBFP0wTb9/2iKGDw1VpDklKmaRqG4eOOKIqSJIEvgiAgs814oTII5sYYFsEKZ3iASqmqqiixI/NSFUxIS6BlWezYmJObO+wVvh6s73vWoA2C8zx/uvYLlveS030aG1QAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180417173923" title="" data-src="/static/微信截图_20180417173923-8c2d72c9d305bb03e4230ba0093768ed-fee1c.png" data-srcset="/static/微信截图_20180417173923-8c2d72c9d305bb03e4230ba0093768ed-a67b7.png 200w,\n/static/微信截图_20180417173923-8c2d72c9d305bb03e4230ba0093768ed-0b187.png 400w,\n/static/微信截图_20180417173923-8c2d72c9d305bb03e4230ba0093768ed-fee1c.png 800w,\n/static/微信截图_20180417173923-8c2d72c9d305bb03e4230ba0093768ed-63d95.png 1037w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="76232082365265820000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`class GameRole\n{\n    ……\n\n    //保存角色状态\n    public RoleStateMemento SaveState()\n    {\n        return (new RoleStateMemento(vit, atk, def));\n    }\n\n    //恢复角色状态\n    public void RecoveryState(RoleStateMemento memento)\n    {\n        this.vit = memento.Vitality;\n        this.atk = memento.Attack;\n        this.def = memento.Defense;\n    }\n\n    ……\n}\n\nclass RoleStateMemento    //角色状态存储箱\n{\n    private int vit;\n    private int atk;\n    private int def;\n\n    public RoleStateMemento(int vit, int atk, int def)\n    {\n        this.vit = vit;\n        this.atk = atk;\n        this.def = def;\n    }\n\n    public int Vitality   //生命力\n    {\n        get { return vit; }\n        set { vit = value; }\n    }\n\n    public int Attack   //攻击力\n    {\n        get { return atk; }\n        set { atk = value; }\n    }\n\n    public int Defense    //防御力\n    {\n        get { return def; }\n        set { def = value; }\n    }\n}\n//角色状态管理者\nclass RoleStateCaretaker\n{\n    private RoleStateMemento memento;\n\n    public void ImportState(RoleStateMemento Record)\n    {\n        memento = Record;\n    }\n\n    public RoleStateMemento ExportState()\n    {\n        return memento;\n    }\n}\n\nstatic void Main(string[] args)\n{\n    //大战Boss前\n    GameRole lixiaoyao = new GameRole();\n    lixiaoyao.GetInitState();\n    lixiaoyao.StateDisplay();\n\n    //保存进度\n    RoleStateCaretaker stateAdmin = new RoleStateCaretaker();\n    stateAdmin.ImportState(lixiaoyao.SaveState());\n\n    //大战Boss时，损耗严重\n    lixiaoyao.Fight();\n    lixiaoyao.StateDisplay();\n\n    //恢复之前状态\n    lixiaoyao.RecoveryState(stateAdmin.ExportState());\n    lixiaoyao.StateDisplay();\n\n    Console.Read();\n}`, `76232082365265820000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="cpp"\n              >\n                <span class="gatsby-code-button-language">cpp</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="cpp"><pre style="counter-reset: linenumber NaN" class="language-cpp line-numbers"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">GameRole</span>\n<span class="token punctuation">{</span>\n    ……\n\n    <span class="token comment">//保存角色状态</span>\n    <span class="token keyword">public</span> RoleStateMemento <span class="token function">SaveState</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token function">RoleStateMemento</span><span class="token punctuation">(</span>vit<span class="token punctuation">,</span> atk<span class="token punctuation">,</span> def<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token comment">//恢复角色状态</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">RecoveryState</span><span class="token punctuation">(</span>RoleStateMemento memento<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> memento<span class="token punctuation">.</span>Vitality<span class="token punctuation">;</span>\n        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> memento<span class="token punctuation">.</span>Attack<span class="token punctuation">;</span>\n        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> memento<span class="token punctuation">.</span>Defense<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    ……\n<span class="token punctuation">}</span>\n\n<span class="token keyword">class</span> <span class="token class-name">RoleStateMemento</span>    <span class="token comment">//角色状态存储箱</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">private</span> <span class="token keyword">int</span> vit<span class="token punctuation">;</span>\n    <span class="token keyword">private</span> <span class="token keyword">int</span> atk<span class="token punctuation">;</span>\n    <span class="token keyword">private</span> <span class="token keyword">int</span> def<span class="token punctuation">;</span>\n\n    <span class="token keyword">public</span> <span class="token function">RoleStateMemento</span><span class="token punctuation">(</span><span class="token keyword">int</span> vit<span class="token punctuation">,</span> <span class="token keyword">int</span> atk<span class="token punctuation">,</span> <span class="token keyword">int</span> def<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> vit<span class="token punctuation">;</span>\n        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> atk<span class="token punctuation">;</span>\n        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> def<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">public</span> <span class="token keyword">int</span> Vitality   <span class="token comment">//生命力</span>\n    <span class="token punctuation">{</span>\n        get <span class="token punctuation">{</span> <span class="token keyword">return</span> vit<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n        set <span class="token punctuation">{</span> vit <span class="token operator">=</span> value<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">public</span> <span class="token keyword">int</span> Attack   <span class="token comment">//攻击力</span>\n    <span class="token punctuation">{</span>\n        get <span class="token punctuation">{</span> <span class="token keyword">return</span> atk<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n        set <span class="token punctuation">{</span> atk <span class="token operator">=</span> value<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">public</span> <span class="token keyword">int</span> Defense    <span class="token comment">//防御力</span>\n    <span class="token punctuation">{</span>\n        get <span class="token punctuation">{</span> <span class="token keyword">return</span> def<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n        set <span class="token punctuation">{</span> def <span class="token operator">=</span> value<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token comment">//角色状态管理者</span>\n<span class="token keyword">class</span> <span class="token class-name">RoleStateCaretaker</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">private</span> RoleStateMemento memento<span class="token punctuation">;</span>\n\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">ImportState</span><span class="token punctuation">(</span>RoleStateMemento Record<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        memento <span class="token operator">=</span> Record<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">public</span> RoleStateMemento <span class="token function">ExportState</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">return</span> memento<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Main</span><span class="token punctuation">(</span>string<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    <span class="token comment">//大战Boss前</span>\n    GameRole lixiaoyao <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">GameRole</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    lixiaoyao<span class="token punctuation">.</span><span class="token function">GetInitState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    lixiaoyao<span class="token punctuation">.</span><span class="token function">StateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token comment">//保存进度</span>\n    RoleStateCaretaker stateAdmin <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">RoleStateCaretaker</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    stateAdmin<span class="token punctuation">.</span><span class="token function">ImportState</span><span class="token punctuation">(</span>lixiaoyao<span class="token punctuation">.</span><span class="token function">SaveState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token comment">//大战Boss时，损耗严重</span>\n    lixiaoyao<span class="token punctuation">.</span><span class="token function">Fight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    lixiaoyao<span class="token punctuation">.</span><span class="token function">StateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token comment">//恢复之前状态</span>\n    lixiaoyao<span class="token punctuation">.</span><span class="token function">RecoveryState</span><span class="token punctuation">(</span>stateAdmin<span class="token punctuation">.</span><span class="token function">ExportState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    lixiaoyao<span class="token punctuation">.</span><span class="token function">StateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    Console<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="模式结构"><a href="#%E6%A8%A1%E5%BC%8F%E7%BB%93%E6%9E%84" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式结构</h3>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180417174524-52f671782513e30f5913fd12dd7937a3-9074e.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 15.852442671984049%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsSAAALEgHS3X78AAAA20lEQVQI12N4+PBh/82bN2cdO3Zs+u3bt+c9efKkpqSkhJkBCK5cuWJ68uTJnEuXLmUD1VgxQAFQj9udO3dyTp06lQIUzwCyo8LCwhjBktevX//39evX/58/f/4PAo8ePbqbkpLCDZK7fPny1J8/f4LFr127tgoklp+fLwpkXwWJvXjx4v/379//P3369NPMmTNZwAYCTX917969v0CX/fj79+//jx8/nikrK2OHurDo+fPnj96+fXv/6tWr9SAxDQ0NVqCBc4Hi91++fHkRSN+6e/funq6uLrCvAFzyl5JE92WZAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180417174524" title="" data-src="/static/微信截图_20180417174524-52f671782513e30f5913fd12dd7937a3-fee1c.png" data-srcset="/static/微信截图_20180417174524-52f671782513e30f5913fd12dd7937a3-a67b7.png 200w,\n/static/微信截图_20180417174524-52f671782513e30f5913fd12dd7937a3-0b187.png 400w,\n/static/微信截图_20180417174524-52f671782513e30f5913fd12dd7937a3-fee1c.png 800w,\n/static/微信截图_20180417174524-52f671782513e30f5913fd12dd7937a3-9074e.png 1003w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<ul>\n<li>Originator：原发器</li>\n<li>Memento：备忘录</li>\n<li>Caretaker：负责人</li>\n</ul>\n<h3 id="优缺点"><a href="#%E4%BC%98%E7%BC%BA%E7%82%B9" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>优缺点</h3>\n<ul>\n<li>\n<p>优点</p>\n<ul>\n<li>备忘录模式提供了一种状态恢复的实现机制，使得用户可以方便地回到一个特定的历史步骤，当新的状态无效或者存在问题时，可以使用暂时存储起来的备忘录将状态复原。</li>\n<li>备忘录模式保存了封装的边界信息，Memento 对象是原发器对象的表示，不会被其它代码改动，这种模式简化了原发器对象，Memento 只保存原发器的状态，采用堆栈来存储备忘录对象可以实现多次取消操作。</li>\n</ul>\n</li>\n<li>\n<p>缺点</p>\n<ul>\n<li>资源消耗过大，如果类的成员变量太多，就不可避免占用大量的内存了，而且每保存一次对象的状态都需要消耗内存资源，如果知道这一点大家就容易理解为什么一些提供了 Undo 功能的软件在运行时需要的内存和硬盘空间比较大了。</li>\n</ul>\n</li>\n</ul>\n<h3 id="模式使用"><a href="#%E6%A8%A1%E5%BC%8F%E4%BD%BF%E7%94%A8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式使用</h3>\n<ul>\n<li>必须保存一个对象在某一个时刻的状态/部分状态，这样以后需要时它能够恢复到先前的状态。</li>\n<li>如果一个用接口来让其它对象得到这些状态，将会暴露对象的实现细节并破坏对象的封装性。</li>\n</ul>\n<h3 id="模式应用"><a href="#%E6%A8%A1%E5%BC%8F%E5%BA%94%E7%94%A8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式应用</h3>\n<ul>\n<li>Undo 功能</li>\n<li>配置文件</li>\n<li>Cookie Session 对象</li>\n</ul>\n<h2 id="观察者模式observer"><a href="#%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8Fobserver" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>观察者模式(Observer)</h2>\n<p>定义对象间的一种一对多的依赖关系，当一个对象的状态发生改变时，所有依赖于它的对象都得到通知并被自动更新。</p>\n<h3 id="模式背景-1"><a href="#%E6%A8%A1%E5%BC%8F%E8%83%8C%E6%99%AF-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式背景</h3>\n<p>晕，老板回来了，我不知道</p>\n<ul>\n<li>股市特别火，同事在上班期间偷偷看股票行情</li>\n<li>如果老板出门回来，公司前台 MM 电话事先通知</li>\n<li>可是…..</li>\n<li>老板今天刚一回来，让前台 MM 去打印资料了</li>\n<li>同事背对着大门大喊了一声“耶！我的股票涨停啦！”</li>\n<li>程序模拟发生的事情</li>\n</ul>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="18202513688552390000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`class Secretary   //前台秘书类\n{\n    //同事列表\n    private IList<StockObserver> observers = new List<StockObserver>();\n    private string action;\n    //增加\n    public void Attach(StockObserver observer)\n    {\n        observers.Add(observer);\n    }\n    //减少\n    public void Detach(StockObserver observer)\n    {\n        observers.Remove(observer);\n    }\n    //通知\n    public void Notify()\n    {\n        foreach (StockObserver o in observers)\n            o.Update();\n    }\n    //前台状态\n    public string SecretaryAction\n    {\n        get { return action; }\n        set { action = value; }\n    }\n}\n//看股票的同事\nclass StockObserver\n{\n    private string name;\n    private Secretary sub;\n\n    public StockObserver(string name, Secretary sub)\n    {\n        this.name = name;\n        this.sub = sub;\n    }\n\n    public void Update()\n    {\n        Console.WriteLine(&quot;{0} {1} 关闭股票行情，继续工作！&quot;, sub.SecretaryAction, name);\n    }\n}\nstatic void Main(string[] args)\n{\n    //前台秘书MM\n    Secretary MM = new Secretary();\n    //看股票的同事\n    StockObserver tongshi1 = new StockObserver(&quot;魏关姹&quot;, MM);\n    StockObserver tongshi2 = new StockObserver(&quot;易管查&quot;, MM);\n\n    //前台记下了两位同事\n    MM.Attach(tongshi1);\n    MM.Attach(tongshi2);\n    //发现老板回来\n    MM.SecretaryAction = &quot;老板回来了！&quot;;\n    //通知两个同事\n    MM.Notify();\n\n    Console.Read();\n}`, `18202513688552390000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="cpp"\n              >\n                <span class="gatsby-code-button-language">cpp</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="cpp"><pre style="counter-reset: linenumber NaN" class="language-cpp line-numbers"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Secretary</span>   <span class="token comment">//前台秘书类</span>\n<span class="token punctuation">{</span>\n    <span class="token comment">//同事列表</span>\n    <span class="token keyword">private</span> IList<span class="token operator">&lt;</span>StockObserver<span class="token operator">></span> observers <span class="token operator">=</span> <span class="token keyword">new</span> List<span class="token operator">&lt;</span>StockObserver<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">private</span> string action<span class="token punctuation">;</span>\n    <span class="token comment">//增加</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Attach</span><span class="token punctuation">(</span>StockObserver observer<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        observers<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>observer<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token comment">//减少</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Detach</span><span class="token punctuation">(</span>StockObserver observer<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        observers<span class="token punctuation">.</span><span class="token function">Remove</span><span class="token punctuation">(</span>observer<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token comment">//通知</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        foreach <span class="token punctuation">(</span>StockObserver o in observers<span class="token punctuation">)</span>\n            o<span class="token punctuation">.</span><span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token comment">//前台状态</span>\n    <span class="token keyword">public</span> string SecretaryAction\n    <span class="token punctuation">{</span>\n        get <span class="token punctuation">{</span> <span class="token keyword">return</span> action<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n        set <span class="token punctuation">{</span> action <span class="token operator">=</span> value<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token comment">//看股票的同事</span>\n<span class="token keyword">class</span> <span class="token class-name">StockObserver</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">private</span> string name<span class="token punctuation">;</span>\n    <span class="token keyword">private</span> Secretary sub<span class="token punctuation">;</span>\n\n    <span class="token keyword">public</span> <span class="token function">StockObserver</span><span class="token punctuation">(</span>string name<span class="token punctuation">,</span> Secretary sub<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>\n        <span class="token keyword">this</span><span class="token punctuation">.</span>sub <span class="token operator">=</span> sub<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"{0} {1} 关闭股票行情，继续工作！"</span><span class="token punctuation">,</span> sub<span class="token punctuation">.</span>SecretaryAction<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Main</span><span class="token punctuation">(</span>string<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    <span class="token comment">//前台秘书MM</span>\n    Secretary MM <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Secretary</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token comment">//看股票的同事</span>\n    StockObserver tongshi1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">StockObserver</span><span class="token punctuation">(</span><span class="token string">"魏关姹"</span><span class="token punctuation">,</span> MM<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    StockObserver tongshi2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">StockObserver</span><span class="token punctuation">(</span><span class="token string">"易管查"</span><span class="token punctuation">,</span> MM<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token comment">//前台记下了两位同事</span>\n    MM<span class="token punctuation">.</span><span class="token function">Attach</span><span class="token punctuation">(</span>tongshi1<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    MM<span class="token punctuation">.</span><span class="token function">Attach</span><span class="token punctuation">(</span>tongshi2<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token comment">//发现老板回来</span>\n    MM<span class="token punctuation">.</span>SecretaryAction <span class="token operator">=</span> <span class="token string">"老板回来了！"</span><span class="token punctuation">;</span>\n    <span class="token comment">//通知两个同事</span>\n    MM<span class="token punctuation">.</span><span class="token function">Notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    Console<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>如果有人聊 QQ，有人看 NBA 都需要通知，如何修改？思考：违背了那些原则？</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="58946035393848770000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`//抽象观察者\nabstract class Observer\n{\n    protected string name;\n    protected Secretary sub;\n\n    public Observer(string name, Secretary sub)\n    {\n        this.name = name;\n        this.sub = sub;\n    }\n\n    public abstract void Update();\n}\n//看股票的同事\nclass StockObserver : Observer\n{\n    public StockObserver(string name, Secretary sub) : base(name, sub)\n    {\n    }\n    public override void Update()\n    {\n        Console.WriteLine(&quot;{0} {1} 关闭股票行情，继续工作！&quot;, sub.SecretaryAction, name);\n    }\n}\n\n//看NBA的同事\nclass NBAObserver : Observer\n{\n    public NBAObserver(string name, Secretary sub)  : base(name, sub)\n    {\n    }\n    public override void Update()\n    {\n        Console.WriteLine(&quot;{0} {1} 关闭NBA直播，继续工作！&quot;, sub.SecretaryAction, name);\n    }\n}\n\nclass Secretary    //前台秘书类\n{\n    //同事列表\n    private IList<Observer> observers = new List<Observer>();\n    private string action;\n\n    //增加\n    public void Attach(Observer observer)\n    {\n        observers.Add(observer);\n    }\n\n    //减少\n    public void Detach(Observer observer)\n    {\n        observers.Remove(observer);\n    }\n\n    //通知\n    public void Notify()\n    {\n        foreach (Observer o in observers)\n            o.Update();\n        …..\n    }\n}`, `58946035393848770000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="cpp"\n              >\n                <span class="gatsby-code-button-language">cpp</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="cpp"><pre style="counter-reset: linenumber NaN" class="language-cpp line-numbers"><code class="language-cpp"><span class="token comment">//抽象观察者</span>\nabstract <span class="token keyword">class</span> <span class="token class-name">Observer</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">protected</span> string name<span class="token punctuation">;</span>\n    <span class="token keyword">protected</span> Secretary sub<span class="token punctuation">;</span>\n\n    <span class="token keyword">public</span> <span class="token function">Observer</span><span class="token punctuation">(</span>string name<span class="token punctuation">,</span> Secretary sub<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>\n        <span class="token keyword">this</span><span class="token punctuation">.</span>sub <span class="token operator">=</span> sub<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">public</span> abstract <span class="token keyword">void</span> <span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token comment">//看股票的同事</span>\n<span class="token keyword">class</span> <span class="token class-name">StockObserver</span> <span class="token operator">:</span> Observer\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token function">StockObserver</span><span class="token punctuation">(</span>string name<span class="token punctuation">,</span> Secretary sub<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">base</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> sub<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> override <span class="token keyword">void</span> <span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"{0} {1} 关闭股票行情，继续工作！"</span><span class="token punctuation">,</span> sub<span class="token punctuation">.</span>SecretaryAction<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">//看NBA的同事</span>\n<span class="token keyword">class</span> <span class="token class-name">NBAObserver</span> <span class="token operator">:</span> Observer\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token function">NBAObserver</span><span class="token punctuation">(</span>string name<span class="token punctuation">,</span> Secretary sub<span class="token punctuation">)</span>  <span class="token operator">:</span> <span class="token function">base</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> sub<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> override <span class="token keyword">void</span> <span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"{0} {1} 关闭NBA直播，继续工作！"</span><span class="token punctuation">,</span> sub<span class="token punctuation">.</span>SecretaryAction<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">class</span> <span class="token class-name">Secretary</span>    <span class="token comment">//前台秘书类</span>\n<span class="token punctuation">{</span>\n    <span class="token comment">//同事列表</span>\n    <span class="token keyword">private</span> IList<span class="token operator">&lt;</span>Observer<span class="token operator">></span> observers <span class="token operator">=</span> <span class="token keyword">new</span> List<span class="token operator">&lt;</span>Observer<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">private</span> string action<span class="token punctuation">;</span>\n\n    <span class="token comment">//增加</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Attach</span><span class="token punctuation">(</span>Observer observer<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        observers<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>observer<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token comment">//减少</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Detach</span><span class="token punctuation">(</span>Observer observer<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        observers<span class="token punctuation">.</span><span class="token function">Remove</span><span class="token punctuation">(</span>observer<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token comment">//通知</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        foreach <span class="token punctuation">(</span>Observer o in observers<span class="token punctuation">)</span>\n            o<span class="token punctuation">.</span><span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        …<span class="token punctuation">.</span><span class="token punctuation">.</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>其实作为通知者，老板、秘书、所有人都可以成为通知者，应该抽象出来</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="25675700011129577000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`//通知者接口\ninterface Subject\n{\n    void Attach(Observer observer);\n    void Detach(Observer observer);\n    void Notify();\n    string SubjectState\n    {\n        get;\n        set;\n    }\n}\nclass Secretary : Subject\n{\n    //同事列表\n    private IList<Observer> observers = new List<Observer>();\n    private string action;\n    //增加\n    public void Attach(Observer observer)\n    {\n        observers.Add(observer);\n    }\n    //减少\n    public void Detach(Observer observer)\n    {\n        observers.Remove(observer);\n    }\n    //通知\n    public void Notify()\n    {\n        foreach (Observer o in observers)\n            o.Update();\n    }\n    //前台状态\n    public string SubjectState\n    {\n        get { return action; }\n        set { action = value; }\n    }\n}\nclass Boss : Subject\n{\n    //同事列表\n    private IList<Observer> observers = new List<Observer>();\n    private string action;\n    //增加\n    public void Attach(Observer observer)\n    {\n        observers.Add(observer);\n    }\n    //减少\n    public void Detach(Observer observer)\n    {\n        observers.Remove(observer);\n    }\n    //通知\n    public void Notify()\n    {\n        foreach (Observer o in observers)\n            o.Update();\n    }\n    //老板状态\n    public string SubjectState\n    {\n        get { return action; }\n        set { action = value; }\n    }\n}\nstatic void Main(string[] args)\n{\n    //老板胡汉三\n    Boss huhansan = new Boss();\n\n    //看股票的同事\n    StockObserver tongshi1 = new StockObserver(&quot;魏关姹&quot;, huhansan);\n    //看NBA的同事\n    NBAObserver tongshi2 = new NBAObserver(&quot;易管查&quot;, huhansan);\n\n    huhansan.Attach(tongshi1);\n    huhansan.Attach(tongshi2);\n\n    huhansan.Detach(tongshi1);\n\n    //老板回来\n    huhansan.SubjectState = &quot;我胡汉三回来了！&quot;;\n    //发出通知\n    huhansan.Notify();\n\n    Console.Read();\n}`, `25675700011129577000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="cpp"\n              >\n                <span class="gatsby-code-button-language">cpp</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="cpp"><pre style="counter-reset: linenumber NaN" class="language-cpp line-numbers"><code class="language-cpp"><span class="token comment">//通知者接口</span>\ninterface Subject\n<span class="token punctuation">{</span>\n    <span class="token keyword">void</span> <span class="token function">Attach</span><span class="token punctuation">(</span>Observer observer<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">void</span> <span class="token function">Detach</span><span class="token punctuation">(</span>Observer observer<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">void</span> <span class="token function">Notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    string SubjectState\n    <span class="token punctuation">{</span>\n        get<span class="token punctuation">;</span>\n        set<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">class</span> <span class="token class-name">Secretary</span> <span class="token operator">:</span> Subject\n<span class="token punctuation">{</span>\n    <span class="token comment">//同事列表</span>\n    <span class="token keyword">private</span> IList<span class="token operator">&lt;</span>Observer<span class="token operator">></span> observers <span class="token operator">=</span> <span class="token keyword">new</span> List<span class="token operator">&lt;</span>Observer<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">private</span> string action<span class="token punctuation">;</span>\n    <span class="token comment">//增加</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Attach</span><span class="token punctuation">(</span>Observer observer<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        observers<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>observer<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token comment">//减少</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Detach</span><span class="token punctuation">(</span>Observer observer<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        observers<span class="token punctuation">.</span><span class="token function">Remove</span><span class="token punctuation">(</span>observer<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token comment">//通知</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        foreach <span class="token punctuation">(</span>Observer o in observers<span class="token punctuation">)</span>\n            o<span class="token punctuation">.</span><span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token comment">//前台状态</span>\n    <span class="token keyword">public</span> string SubjectState\n    <span class="token punctuation">{</span>\n        get <span class="token punctuation">{</span> <span class="token keyword">return</span> action<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n        set <span class="token punctuation">{</span> action <span class="token operator">=</span> value<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">class</span> <span class="token class-name">Boss</span> <span class="token operator">:</span> Subject\n<span class="token punctuation">{</span>\n    <span class="token comment">//同事列表</span>\n    <span class="token keyword">private</span> IList<span class="token operator">&lt;</span>Observer<span class="token operator">></span> observers <span class="token operator">=</span> <span class="token keyword">new</span> List<span class="token operator">&lt;</span>Observer<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">private</span> string action<span class="token punctuation">;</span>\n    <span class="token comment">//增加</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Attach</span><span class="token punctuation">(</span>Observer observer<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        observers<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>observer<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token comment">//减少</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Detach</span><span class="token punctuation">(</span>Observer observer<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        observers<span class="token punctuation">.</span><span class="token function">Remove</span><span class="token punctuation">(</span>observer<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token comment">//通知</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        foreach <span class="token punctuation">(</span>Observer o in observers<span class="token punctuation">)</span>\n            o<span class="token punctuation">.</span><span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token comment">//老板状态</span>\n    <span class="token keyword">public</span> string SubjectState\n    <span class="token punctuation">{</span>\n        get <span class="token punctuation">{</span> <span class="token keyword">return</span> action<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n        set <span class="token punctuation">{</span> action <span class="token operator">=</span> value<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Main</span><span class="token punctuation">(</span>string<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    <span class="token comment">//老板胡汉三</span>\n    Boss huhansan <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Boss</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token comment">//看股票的同事</span>\n    StockObserver tongshi1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">StockObserver</span><span class="token punctuation">(</span><span class="token string">"魏关姹"</span><span class="token punctuation">,</span> huhansan<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token comment">//看NBA的同事</span>\n    NBAObserver tongshi2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">NBAObserver</span><span class="token punctuation">(</span><span class="token string">"易管查"</span><span class="token punctuation">,</span> huhansan<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    huhansan<span class="token punctuation">.</span><span class="token function">Attach</span><span class="token punctuation">(</span>tongshi1<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    huhansan<span class="token punctuation">.</span><span class="token function">Attach</span><span class="token punctuation">(</span>tongshi2<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    huhansan<span class="token punctuation">.</span><span class="token function">Detach</span><span class="token punctuation">(</span>tongshi1<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token comment">//老板回来</span>\n    huhansan<span class="token punctuation">.</span>SubjectState <span class="token operator">=</span> <span class="token string">"我胡汉三回来了！"</span><span class="token punctuation">;</span>\n    <span class="token comment">//发出通知</span>\n    huhansan<span class="token punctuation">.</span><span class="token function">Notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    Console<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180417181530-c009e3c87ab98c61b60bac60be8af6cd-2b001.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 38.95169578622816%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABwUlEQVQoz41SO0iCURS+pRGEWxEE4dBiSI+hrQYHQ4OQnBpdAmlzanRrbLQoaHNxiQYbxBJUEBHFN77w/cy3pEmmcfvu5R9qiQ78nHO/c/5zvvudSyqViojAyuWyrt1uf/p8vk4ikRj0+/1X+E2Wo5TOCZ45UqvVVpHTut1ubTqdPmq1WrxHNpslJJlM8kMsFjsfDod0Op1SZuPxmLpcrj2WU6lUi3BivV6/KNSelEolWigUKIiMisWihOHACMlkMgvsEA6HT+Px+Fun00mhWanb7RZtNtsWy6nV6iW4BYVCwWuBrzudzjMwPfZ6vbpUKiUGU1EgECC/TKPRLAuhWCaTSX7mDAbDPPmPobMczLYtFstutVqVRyKRNVxFCmzLbDbvIN6BVhus1uPxSKPR6JXdbr8JhUKXjUZD6ff7TQ6H4xosL7jGAN9HoxEFfa5dLpe7R+xkMfT5EvyT0HAfkvA6DJ+huXEymfAz9KtxhgAHrOFU2Ea9Xr8NBoPPs9mM4vtgWLPZfGS1JpNpBeyU+XxehddxYLVapXgVSpA6xAC+QAKqA/xAMYk37PV6d9jiC9v4RBiP+IHVGo3GP3VkV/4GIPRdhKKEG3sAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180417181530" title="" data-src="/static/微信截图_20180417181530-c009e3c87ab98c61b60bac60be8af6cd-fee1c.png" data-srcset="/static/微信截图_20180417181530-c009e3c87ab98c61b60bac60be8af6cd-a67b7.png 200w,\n/static/微信截图_20180417181530-c009e3c87ab98c61b60bac60be8af6cd-0b187.png 400w,\n/static/微信截图_20180417181530-c009e3c87ab98c61b60bac60be8af6cd-fee1c.png 800w,\n/static/微信截图_20180417181530-c009e3c87ab98c61b60bac60be8af6cd-2b001.png 973w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h3 id="模式动机-1"><a href="#%E6%A8%A1%E5%BC%8F%E5%8A%A8%E6%9C%BA-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式动机</h3>\n<p>建立一种对象与对象之间的依赖关系，一个对象发生改变时将自动通知其他对象，其他对象将相应做出反应。在此，发生改变的对象称为观察目标，而被通知的对象称为观察者，一个观察目标可以对应多个观察者，而且这些观察者之间没有相互联系，可以根据需要增加和删除观察者，使得系统更易于扩展，这就是观察者模式的模式动机。</p>\n<h3 id="模式定义-1"><a href="#%E6%A8%A1%E5%BC%8F%E5%AE%9A%E4%B9%89-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式定义</h3>\n<ul>\n<li>观察者模式(Observer Pattern)：定义对象间的一种一对多依赖关系，使得每当一个对象状态发生改变时，其相关依赖对象皆得到通知并被自动更新。</li>\n<li>观察者模式又叫做发布-订阅（Publish/Subscribe）模式、模型-视图（Model/View）模式、源-监听器（Source/Listener）模式或从属者（Dependents）模式。观察者模式是一种对象行为型模式。</li>\n</ul>\n<h3 id="模式结构-1"><a href="#%E6%A8%A1%E5%BC%8F%E7%BB%93%E6%9E%84-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式结构</h3>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180417235401-e31fe0c4c3b06091a79067b2dfafe02a-6b9f0.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 56.75074183976261%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAACJElEQVQoz31TOYhaURT96ozjZEwfBiYEglVAnMAEbCQhoAYEK7uUlpZikdaZImBlilSCaCEB0UIRRFRUUERwFxHBcVfc4oIL+vXlXhk/xiwXLu/+9887d3nnUaVS6Uun03nIZDL6VCqlb7Va97VaTR+LxV5SYIQQ6tTgDDcSifATicRVLpfjx+NxHoMFgi0EZLVakcVigSGhaZoA4QcEaTSac1jY6DqdDmOqWCze1+v1cTqdfgT7Wa1WfzCElUql3+12yWw2o9fr9QaId9PplA6FQu8RJBaLL2G5QFcoFM9wL5/P2w6J0Xq9XpohhGyPkGE2mUxmm81mAaDxcrkcl8vld08g1qHVQ/vRaFQKbT4kk0lLs9n8CtjPzH+bzXbj9XqvzWbzndVq/eR2u1/Y7fZXRqMRq6JUKtVv8/P7/ayjz+enyU7tGExZLBYmVqvVzCGsGi7mTCAQ8CBmg3MYUhg+Z7fbcbRaLVcqlV4hAPbOfD7f/nAwGNyv0AVVKBQOt8xyOp0ckUjEn8/n7HA4zPpflYwZDIY/9kwm01+xDBno6E02mxUGAoFbyHoH30IYshC0ePmvRNDBNeDeOhwOxN/CJb1mSEFP08FgQBqNBoGYtNttMhwOicfj+YgguVyOl4P6O1cqlbwnwu/9fp/ACAhKDpQSOdZhbzQaoZZoIN6CBrcA3rlcrj2hRCLBSrnoMplsXzW8qG9ICI9iiY8BivAfCH8BPsSL1U0K6eQAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180417235401" title="" data-src="/static/微信截图_20180417235401-e31fe0c4c3b06091a79067b2dfafe02a-fee1c.png" data-srcset="/static/微信截图_20180417235401-e31fe0c4c3b06091a79067b2dfafe02a-a67b7.png 200w,\n/static/微信截图_20180417235401-e31fe0c4c3b06091a79067b2dfafe02a-0b187.png 400w,\n/static/微信截图_20180417235401-e31fe0c4c3b06091a79067b2dfafe02a-fee1c.png 800w,\n/static/微信截图_20180417235401-e31fe0c4c3b06091a79067b2dfafe02a-b1a91.png 1200w,\n/static/微信截图_20180417235401-e31fe0c4c3b06091a79067b2dfafe02a-6b9f0.png 1348w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<ul>\n<li>Subject：目标（被观察对象）</li>\n<li>ConcreteSubject：具体目标</li>\n<li>Observer：观察者</li>\n<li>ConcreteObserver：具体观察者</li>\n</ul>\n<p>注册的投资者在股票市场发生变化时，可以自动得到通知</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="30829099807205028000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`abstract class Stock\n{\n    // Fields\n    protected string symbol;\n    protected double price;\n    private ArrayList investors = new ArrayList();\n\n    // Constructor\n    public Stock( string symbol, double price )\n    {\n        this.symbol = symbol;\n        this.price = price;\n    }\n\n    // Properties\n    public double Price\n    {\n        get{ return price; }\n        set\n        {\n            price = value;\n            Notify();\n        }\n    }\n\n    public string Symbol\n    {\n        get{ return symbol; }\n        set{ symbol = value; }\n    }\n\n    // Methods\n    public void Attach( Investor investor )\n    {\n        investors.Add( investor );\n    }\n\n    public void Detach( Investor investor )\n    {\n        investors.Remove( investor );\n    }\n\n    public void Notify()\n    {\n        foreach( Investor i in investors )\n        i.Update( this );\n    }\n\n}\n\n\n// &quot;ConcreteSubject&quot;\nclass IBM : Stock\n{\n    // Constructor\n    public IBM( string symbol, double price )\n        : base( symbol, price ) {}\n}\n\n// &quot;Observer&quot;\ninterface IInvestor\n{\n    // Methods\n    void Update( Stock stock );\n}\n\n// &quot;ConcreteObserver&quot;\nclass Investor : IInvestor\n{\n    // Fields\n    private string name;\n    private string observerState;\n    private Stock stock;\n\n    // Constructors\n    public Investor( string name )\n    {\n        this.name = name;\n    }\n\n    // Methods\n    public void Update( Stock stock )\n    {\n        Console.WriteLine( &quot;Notified investor {0} of {1}\'s change to {2:C}&quot;,\n        name, stock.Symbol, stock.Price );\n    }\n\n    // Properties\n    public Stock Stock\n    {\n        get{ return stock; }\n        set{ stock = value; }\n    }\n}\n\npublic static void Main( string[] args )\n{\n    // Create investors\n    Investor s = new Investor( &quot;Sorros&quot; );\n    Investor b = new Investor( &quot;Berkshire&quot; );\n\n    // Create IBM stock and attach investors\n    IBM ibm = new IBM( &quot;IBM&quot;, 120.00 );\n    ibm.Attach( s );\n    ibm.Attach( b );\n\n    // Change price, which notifies investors\n    ibm.Price = 120.10;\n    ibm.Price = 121.00;\n    ibm.Price = 120.50;\n    ibm.Price = 120.75;\n}`, `30829099807205028000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="cpp"\n              >\n                <span class="gatsby-code-button-language">cpp</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="cpp"><pre style="counter-reset: linenumber NaN" class="language-cpp line-numbers"><code class="language-cpp">abstract <span class="token keyword">class</span> <span class="token class-name">Stock</span>\n<span class="token punctuation">{</span>\n    <span class="token comment">// Fields</span>\n    <span class="token keyword">protected</span> string symbol<span class="token punctuation">;</span>\n    <span class="token keyword">protected</span> <span class="token keyword">double</span> price<span class="token punctuation">;</span>\n    <span class="token keyword">private</span> ArrayList investors <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// Constructor</span>\n    <span class="token keyword">public</span> <span class="token function">Stock</span><span class="token punctuation">(</span> string symbol<span class="token punctuation">,</span> <span class="token keyword">double</span> price <span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">this</span><span class="token punctuation">.</span>symbol <span class="token operator">=</span> symbol<span class="token punctuation">;</span>\n        <span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token comment">// Properties</span>\n    <span class="token keyword">public</span> <span class="token keyword">double</span> Price\n    <span class="token punctuation">{</span>\n        get<span class="token punctuation">{</span> <span class="token keyword">return</span> price<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n        set\n        <span class="token punctuation">{</span>\n            price <span class="token operator">=</span> value<span class="token punctuation">;</span>\n            <span class="token function">Notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">public</span> string Symbol\n    <span class="token punctuation">{</span>\n        get<span class="token punctuation">{</span> <span class="token keyword">return</span> symbol<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n        set<span class="token punctuation">{</span> symbol <span class="token operator">=</span> value<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token comment">// Methods</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Attach</span><span class="token punctuation">(</span> Investor investor <span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        investors<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span> investor <span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Detach</span><span class="token punctuation">(</span> Investor investor <span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        investors<span class="token punctuation">.</span><span class="token function">Remove</span><span class="token punctuation">(</span> investor <span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token function">foreach</span><span class="token punctuation">(</span> Investor i in investors <span class="token punctuation">)</span>\n        i<span class="token punctuation">.</span><span class="token function">Update</span><span class="token punctuation">(</span> <span class="token keyword">this</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n<span class="token punctuation">}</span>\n\n\n<span class="token comment">// "ConcreteSubject"</span>\n<span class="token keyword">class</span> <span class="token class-name">IBM</span> <span class="token operator">:</span> Stock\n<span class="token punctuation">{</span>\n    <span class="token comment">// Constructor</span>\n    <span class="token keyword">public</span> <span class="token function">IBM</span><span class="token punctuation">(</span> string symbol<span class="token punctuation">,</span> <span class="token keyword">double</span> price <span class="token punctuation">)</span>\n        <span class="token operator">:</span> <span class="token function">base</span><span class="token punctuation">(</span> symbol<span class="token punctuation">,</span> price <span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">// "Observer"</span>\ninterface IInvestor\n<span class="token punctuation">{</span>\n    <span class="token comment">// Methods</span>\n    <span class="token keyword">void</span> <span class="token function">Update</span><span class="token punctuation">(</span> Stock stock <span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">// "ConcreteObserver"</span>\n<span class="token keyword">class</span> <span class="token class-name">Investor</span> <span class="token operator">:</span> IInvestor\n<span class="token punctuation">{</span>\n    <span class="token comment">// Fields</span>\n    <span class="token keyword">private</span> string name<span class="token punctuation">;</span>\n    <span class="token keyword">private</span> string observerState<span class="token punctuation">;</span>\n    <span class="token keyword">private</span> Stock stock<span class="token punctuation">;</span>\n\n    <span class="token comment">// Constructors</span>\n    <span class="token keyword">public</span> <span class="token function">Investor</span><span class="token punctuation">(</span> string name <span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token comment">// Methods</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Update</span><span class="token punctuation">(</span> Stock stock <span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span> <span class="token string">"Notified investor {0} of {1}\'s change to {2:C}"</span><span class="token punctuation">,</span>\n        name<span class="token punctuation">,</span> stock<span class="token punctuation">.</span>Symbol<span class="token punctuation">,</span> stock<span class="token punctuation">.</span>Price <span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token comment">// Properties</span>\n    <span class="token keyword">public</span> Stock Stock\n    <span class="token punctuation">{</span>\n        get<span class="token punctuation">{</span> <span class="token keyword">return</span> stock<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n        set<span class="token punctuation">{</span> stock <span class="token operator">=</span> value<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Main</span><span class="token punctuation">(</span> string<span class="token punctuation">[</span><span class="token punctuation">]</span> args <span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    <span class="token comment">// Create investors</span>\n    Investor s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Investor</span><span class="token punctuation">(</span> <span class="token string">"Sorros"</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>\n    Investor b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Investor</span><span class="token punctuation">(</span> <span class="token string">"Berkshire"</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// Create IBM stock and attach investors</span>\n    IBM ibm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">IBM</span><span class="token punctuation">(</span> <span class="token string">"IBM"</span><span class="token punctuation">,</span> <span class="token number">120.00</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>\n    ibm<span class="token punctuation">.</span><span class="token function">Attach</span><span class="token punctuation">(</span> s <span class="token punctuation">)</span><span class="token punctuation">;</span>\n    ibm<span class="token punctuation">.</span><span class="token function">Attach</span><span class="token punctuation">(</span> b <span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// Change price, which notifies investors</span>\n    ibm<span class="token punctuation">.</span>Price <span class="token operator">=</span> <span class="token number">120.10</span><span class="token punctuation">;</span>\n    ibm<span class="token punctuation">.</span>Price <span class="token operator">=</span> <span class="token number">121.00</span><span class="token punctuation">;</span>\n    ibm<span class="token punctuation">.</span>Price <span class="token operator">=</span> <span class="token number">120.50</span><span class="token punctuation">;</span>\n    ibm<span class="token punctuation">.</span>Price <span class="token operator">=</span> <span class="token number">120.75</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="模式分析"><a href="#%E6%A8%A1%E5%BC%8F%E5%88%86%E6%9E%90" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式分析</h3>\n<ul>\n<li>观察者模式描述了如何建立对象与对象之间的依赖关系，如何构造满足这种需求的系统。</li>\n<li>这一模式中的关键对象是观察目标和观察者，一个目标可以有任意数目的与之相依赖的观察者，一旦目标的状态发生改变，所有的观察者都将得到通知。</li>\n<li>作为对这个通知的响应，每个观察者都将即时更新自己的状态，以与目标状态同步，这种交互也称为发布-订阅(publish-subscribe)。目标是通知的发布者，它发出通知时并不需要知道谁是它的观察者，可以有任意数目的观察者订阅它并接收通知。</li>\n</ul>\n<h3 id="优缺点-1"><a href="#%E4%BC%98%E7%BC%BA%E7%82%B9-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>优缺点</h3>\n<ul>\n<li>优点</li>\n<li>观察者模式可以实现表示层和数据逻辑层的分离，并定义了稳定的消息更新传递机制，抽象了更新接口，使得可以有各种各样不同的表示层作为具体观察者角色。</li>\n<li>观察者模式在观察目标和观察者之间建立一个抽象的耦合。</li>\n<li>观察者模式支持广播通信。</li>\n<li>观察者模式符合“开闭原则”的要求。</li>\n<li>缺点</li>\n<li>如果一个观察目标对象有很多直接和间接的观察者的话，将所有的观察者都通知到会花费很多时间。</li>\n<li>如果在观察者和观察目标之间有循环依赖的话，观察目标会触发它们之间进行循环调用，可能导致系统崩溃。</li>\n<li>观察者模式没有相应的机制让观察者知道所观察的目标对象是怎么发生变化的，而仅仅只是知道观察目标发生了变化。</li>\n</ul>\n<h3 id="模式使用-1"><a href="#%E6%A8%A1%E5%BC%8F%E4%BD%BF%E7%94%A8-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式使用</h3>\n<ul>\n<li>一个抽象模型有两个方面，其中一个方面依赖于另一个方面。将这些方面封装在独立的对象中使它们可以各自独立地改变和复用。</li>\n<li>一个对象的改变将导致其他一个或多个对象也发生改变，而不知道具体有多少对象将发生改变，可以降低对象之间的耦合度。</li>\n<li>一个对象必须通知其他对象，而并不知道这些对象是谁。</li>\n<li>需要在系统中创建一个触发链，A 对象的行为将影响 B 对象，B 对象的行为将影响 C 对象……，可以使用观察者模式创建一种链式触发机制。</li>\n</ul>\n<h3 id="模式应用-1"><a href="#%E6%A8%A1%E5%BC%8F%E5%BA%94%E7%94%A8-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式应用</h3>\n<ul>\n<li>JDK1.1 版本及以后的各个版本中，事件处理模型采用基于观察者模式的委派事件模型(Delegation Event Model, DEM)。</li>\n<li>在 DEM 中，事件的发布者称为事件源(Event Source)，而订阅者叫做事件监听器(Event Listener)，在这个过程中还可以通过事件对象(Event Object)来传递与事件相关的信息，事件源对象、事件监听对象（事件处理对象）和事件对象构成了 Java 事件处理模型的三要素。</li>\n<li>观察者模式在软件开发中应用非常广泛，如某电子商务网站可以在执行发送操作后给用户多个发送商品打折信息，某团队战斗游戏中某队友牺牲将给所有成员提示等等，凡是涉及到一对一或者一对多的对象交互场景都可以使用观察者模式。</li>\n</ul>\n<h2 id="状态模式state"><a href="#%E7%8A%B6%E6%80%81%E6%A8%A1%E5%BC%8Fstate" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>状态模式(State)</h2>\n<p>当一个对象的内在状态改变时允许改变其行为，这个对象看起来像是改变了其类。</p>\n<h3 id="模式背景-2"><a href="#%E6%A8%A1%E5%BC%8F%E8%83%8C%E6%99%AF-2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式背景</h3>\n<p>又要加班了?(工作状态函数)</p>\n<ul>\n<li>上午工作状态 ( h&#x3C;12 点 )</li>\n<li>中午工作状态 ( 12&#x3C;h&#x3C;13 点 )</li>\n<li>下午工作状态 ( 13&#x3C;h&#x3C;17 点 )</li>\n<li>晚间工作状态 ( 17&#x3C;h&#x3C;21 点 )</li>\n<li>睡眠状态 ( h>21 点 )</li>\n<li>下班状态</li>\n</ul>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="53250293697472940000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`public static void WriteProgram()\n{\n    if (Hour < 12)\n    {\n        Console.WriteLine(&quot;当前时间：{0}点 上午工作，精神百倍&quot;, Hour);\n    }\n    else if (Hour < 13)\n    {\n        Console.WriteLine(&quot;当前时间：{0}点 饿了，午饭；犯困，午休。&quot;, Hour);\n    }\n    else if (Hour < 17)\n    {\n        Console.WriteLine(&quot;当前时间：{0}点 下午状态还不错，继续努力&quot;, Hour);\n    }\n    else\n    {\n        if (WorkFinished)\n        {\n            Console.WriteLine(&quot;当前时间：{0}点 下班回家了&quot;, Hour);\n        }\n        else\n        {\n            if (Hour < 21)\n            {\n                Console.WriteLine(&quot;当前时间：{0}点 加班哦，疲累之极&quot;, Hour);\n            }\n            else\n            {\n                Console.WriteLine(&quot;当前时间：{0}点 不行了，睡着了。&quot;, Hour);\n            }\n        }\n    }\n}\n\nstatic int Hour = 0;\nstatic bool WorkFinished = false;\n\nstatic void Main(string[] args)\n{\n    Hour = 9;\n    WriteProgram();\n    Hour = 10;\n    WriteProgram();\n    Hour = 12;\n    WriteProgram();\n    Hour = 13;\n    WriteProgram();\n    Hour = 14;\n    WriteProgram();\n    Hour = 17;\n\n    WorkFinished = true; // false;\n\n    WriteProgram();\n    Hour = 19;\n    WriteProgram();\n    Hour = 22;\n    WriteProgram();\n\n    Console.Read();\n}`, `53250293697472940000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="cpp"\n              >\n                <span class="gatsby-code-button-language">cpp</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="cpp"><pre style="counter-reset: linenumber NaN" class="language-cpp line-numbers"><code class="language-cpp"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">WriteProgram</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span>Hour <span class="token operator">&lt;</span> <span class="token number">12</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"当前时间：{0}点 上午工作，精神百倍"</span><span class="token punctuation">,</span> Hour<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>Hour <span class="token operator">&lt;</span> <span class="token number">13</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"当前时间：{0}点 饿了，午饭；犯困，午休。"</span><span class="token punctuation">,</span> Hour<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>Hour <span class="token operator">&lt;</span> <span class="token number">17</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"当前时间：{0}点 下午状态还不错，继续努力"</span><span class="token punctuation">,</span> Hour<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">else</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">if</span> <span class="token punctuation">(</span>WorkFinished<span class="token punctuation">)</span>\n        <span class="token punctuation">{</span>\n            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"当前时间：{0}点 下班回家了"</span><span class="token punctuation">,</span> Hour<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n        <span class="token keyword">else</span>\n        <span class="token punctuation">{</span>\n            <span class="token keyword">if</span> <span class="token punctuation">(</span>Hour <span class="token operator">&lt;</span> <span class="token number">21</span><span class="token punctuation">)</span>\n            <span class="token punctuation">{</span>\n                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"当前时间：{0}点 加班哦，疲累之极"</span><span class="token punctuation">,</span> Hour<span class="token punctuation">)</span><span class="token punctuation">;</span>\n            <span class="token punctuation">}</span>\n            <span class="token keyword">else</span>\n            <span class="token punctuation">{</span>\n                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"当前时间：{0}点 不行了，睡着了。"</span><span class="token punctuation">,</span> Hour<span class="token punctuation">)</span><span class="token punctuation">;</span>\n            <span class="token punctuation">}</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">static</span> <span class="token keyword">int</span> Hour <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n<span class="token keyword">static</span> <span class="token keyword">bool</span> WorkFinished <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>\n\n<span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Main</span><span class="token punctuation">(</span>string<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    Hour <span class="token operator">=</span> <span class="token number">9</span><span class="token punctuation">;</span>\n    <span class="token function">WriteProgram</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    Hour <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>\n    <span class="token function">WriteProgram</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    Hour <span class="token operator">=</span> <span class="token number">12</span><span class="token punctuation">;</span>\n    <span class="token function">WriteProgram</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    Hour <span class="token operator">=</span> <span class="token number">13</span><span class="token punctuation">;</span>\n    <span class="token function">WriteProgram</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    Hour <span class="token operator">=</span> <span class="token number">14</span><span class="token punctuation">;</span>\n    <span class="token function">WriteProgram</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    Hour <span class="token operator">=</span> <span class="token number">17</span><span class="token punctuation">;</span>\n\n    WorkFinished <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">// false;</span>\n\n    <span class="token function">WriteProgram</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    Hour <span class="token operator">=</span> <span class="token number">19</span><span class="token punctuation">;</span>\n    <span class="token function">WriteProgram</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    Hour <span class="token operator">=</span> <span class="token number">22</span><span class="token punctuation">;</span>\n    <span class="token function">WriteProgram</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    Console<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>面向过程的思维，通过面向对象完成代码的责任分解</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="17027033156696515000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`public class Work   //工作\n{\n    //钟点\n    private int hour;\n    public int Hour\n    {\n        get { return hour; }\n        set { hour = value; }\n    }\n\n    //任务完成\n    private bool finish = false;\n    public bool TaskFinished\n    {\n        get { return finish; }\n        set { finish = value; }\n    }\n\n\n    public void WriteProgram()\n    {\n        ……\n    }\n}\n\nstatic void Main(string[] args)\n{\n    Work MisProject = new Work();\n    MisProject.Hour = 10;\n    MisProject.WriteProgram();\n\n    Work MisProject = new Work();\n    MisProject.Hour = 13;\n    MisProject.WriteProgram();\n\n    Work MisProject = new Work();\n    MisProject.Hour = 16;\n    MisProject.WriteProgram();\n\n    Console.Read();\n}`, `17027033156696515000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="cpp"\n              >\n                <span class="gatsby-code-button-language">cpp</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="cpp"><pre style="counter-reset: linenumber NaN" class="language-cpp line-numbers"><code class="language-cpp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Work</span>   <span class="token comment">//工作</span>\n<span class="token punctuation">{</span>\n    <span class="token comment">//钟点</span>\n    <span class="token keyword">private</span> <span class="token keyword">int</span> hour<span class="token punctuation">;</span>\n    <span class="token keyword">public</span> <span class="token keyword">int</span> Hour\n    <span class="token punctuation">{</span>\n        get <span class="token punctuation">{</span> <span class="token keyword">return</span> hour<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n        set <span class="token punctuation">{</span> hour <span class="token operator">=</span> value<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token comment">//任务完成</span>\n    <span class="token keyword">private</span> <span class="token keyword">bool</span> finish <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>\n    <span class="token keyword">public</span> <span class="token keyword">bool</span> TaskFinished\n    <span class="token punctuation">{</span>\n        get <span class="token punctuation">{</span> <span class="token keyword">return</span> finish<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n        set <span class="token punctuation">{</span> finish <span class="token operator">=</span> value<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n\n\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">WriteProgram</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        ……\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Main</span><span class="token punctuation">(</span>string<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    Work MisProject <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Work</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    MisProject<span class="token punctuation">.</span>Hour <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>\n    MisProject<span class="token punctuation">.</span><span class="token function">WriteProgram</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    Work MisProject <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Work</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    MisProject<span class="token punctuation">.</span>Hour <span class="token operator">=</span> <span class="token number">13</span><span class="token punctuation">;</span>\n    MisProject<span class="token punctuation">.</span><span class="token function">WriteProgram</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    Work MisProject <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Work</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    MisProject<span class="token punctuation">.</span>Hour <span class="token operator">=</span> <span class="token number">16</span><span class="token punctuation">;</span>\n    MisProject<span class="token punctuation">.</span><span class="token function">WriteProgram</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    Console<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>过多的判断分支，说明类的责任过大，无论何种状态改变，都需要通过它来改变，违背的原则？</p>\n<h3 id="模式动机-2"><a href="#%E6%A8%A1%E5%BC%8F%E5%8A%A8%E6%9C%BA-2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式动机</h3>\n<ul>\n<li>在很多情况下，一个对象的行为取决于一个或多个动态变化的属性，这样的属性叫做状态，这样的对象叫做有状态的(stateful)对象。这样的对象状态是从事先定义好的一系列值中取出的。当一个这样的对象与外部事件产生互动时，其内部状态就会改变，从而使得系统的行为也随之发生变化。</li>\n<li>考虑一个银行系统，一个账户对象的状态处于若干个不同状态之一：开户状态、正常状态、透支状态、冻结状态。当顾客在对账户进行存取款操作时，账户类根据自身的当前状态作出不同的反应，同时进行对象状态的切换。例如：如果账户处于冻结状态就没有办法再进行取款操作，一个取款操作需要先了解账户对象的状态。</li>\n<li>状态(State)模式描述了账户如何在每一种状态下表现出不同的行为。而一旦取款操作完成，对象的状态也将动态发生变化，如取款后账户余额低于某一值其状态可能从正常状态转为透支状态。</li>\n<li>状态模式的关键是引入了一个抽象类来专门表示对象的状态，这个类我们叫做状态类，而对象的具体状态都继承了该类，并在不同具体状态类中实现了不同状态的行为，包括各种状态之间的转换。</li>\n</ul>\n<h3 id="模式定义-2"><a href="#%E6%A8%A1%E5%BC%8F%E5%AE%9A%E4%B9%89-2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式定义</h3>\n<p>允许一个对象在其内部状态改变时改变它的行为，对象看起来似乎修改了它的类。其别名为状态对象(Objects for States)。状态模式是一种对象行为型模式。</p>\n<p>当一个对象的行为取决于它的状态，并且在运行时需要根据状态改变行为的时候，将特定状态的相关行为放到一个对象中，可以通过定义新的子类增加新的状态和转换。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180418005947-b395cdc3d081b726632db1e418244762-1b1db.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 48.0911330049261%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAACDElEQVQoz4VSS4uSURj+ymYQWytBXyCF0CJwoIXgokWLIQxaCCIlGUFQMUwSJC6FNtFlk/0AazWElPqFixDcqSjexSveBRVvhUwpeDk975czzFRDBw7nnOec93mf93kP1+v13hQKhZf9fv9tIpG4xmGEw+HT3D8GY+wU97+xXC7Zwcjlcs8J02q1Up1OJ63X63ey2eyDYrG4U6lUrh6QymSykwkRxKbTqUiYz+cfE6ZUKmV6vf5cu90+TNZqtd7R3Xw+3zAajZzFYuHkcvnfhKRgPB7fHw6HD1H6ZcI0Go0kGAzK0un0KyT5insB5LfWCiWYtB5yqFSqkxWr1eqzWDaOQHQmT89gSv54vqlQKI5jaMYHePQRDfmC8i2EZTKZbSj6lEql9rD/DJU3CO90OruNRsMD9XuIe+90OnlKQr7yPP+bcDKZsMViIfoEEoGwUqn0iM7wS8TRkJ213x46r1YrNpvNmCAIF4+KCwQCHBeNRu/CO3O3292Nx+P3TCYT73a7dVBhRSNuN5tNq9frvWkwGM77/X5zLBZ7grfmarVqdTgcWzab7VIoFLpgt9uPf6lkMnkFZXxDST8RwFDeM8JB+BR7VqvVfqCC70iytbbKQz8ExAvsmz6fTyoSQdUmrZFI5DqUrhC0TxaUy+XXaz9fUILBYLCPQIb32+vfEQQ5G41GC6wtl8slEv4Cskxx2WvAz8QAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180418005947" title="" data-src="/static/微信截图_20180418005947-b395cdc3d081b726632db1e418244762-fee1c.png" data-srcset="/static/微信截图_20180418005947-b395cdc3d081b726632db1e418244762-a67b7.png 200w,\n/static/微信截图_20180418005947-b395cdc3d081b726632db1e418244762-0b187.png 400w,\n/static/微信截图_20180418005947-b395cdc3d081b726632db1e418244762-fee1c.png 800w,\n/static/微信截图_20180418005947-b395cdc3d081b726632db1e418244762-b1a91.png 1200w,\n/static/微信截图_20180418005947-b395cdc3d081b726632db1e418244762-95179.png 1600w,\n/static/微信截图_20180418005947-b395cdc3d081b726632db1e418244762-1b1db.png 1624w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="21469825204100210000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`public class Work    //工作\n{\n    private State current;\n    public Work()\n    {\n        current = new ForenoonState();\n    }\n\n    private double hour;\n    public double Hour\n    {\n        get { return hour; }\n        set { hour = value; }\n    }\n\n    private bool finish = false;\n    public bool TaskFinished\n    {\n        get { return finish; }\n        set { finish = value; }\n    }\n\n    public void SetState(State s)\n    {\n        current = s;\n    }\n\n    public void WordHard()\n    {\n        current.WriteProgram(this);\n    }\n}\n\npublic abstract class State     //抽象状态\n{\n    public abstract void WriteProgram(Work w);\n}\npublic class ForenoonState : State     //上午工作状态\n{\n    public override void WriteProgram(Work w)\n    {\n        if (w.Hour < 12)\n        {\n            Console.WriteLine(&quot;当前时间：{0}点 上午工作，精神百倍&quot;, w.Hour);\n        }\n        else\n        {\n            w.SetState(new NoonState());\n            w.WorkHard();\n        }\n    }\n}\npublic class NoonState : State     //中午工作状态\n{\n    public override void WriteProgram(Work w)\n    {\n        if (w.Hour < 13)\n        {\n            Console.WriteLine(&quot;当前时间：{0}点 饿了，午饭；犯困，午休。&quot;, w.Hour);\n        }\n        else\n        {\n            w.SetState(new AfternoonState());\n            w.WorkHard();\n        }\n    }\n}\n\nstatic void Main(string[] args)\n{\n    //紧急项目\n    Work EmProject = new Work();\n    EmProject.Hour = 9;\n    EmProject.WorkHard();\n    EmProject.Hour = 10;\n    EmProject.WorkHard();\n    EmProject.Hour = 12;\n    EmProject.WorkHard();\n    EmProject.Hour = 13;\n    EmProject.WorkHard();\n    EmProject.Hour = 14;\n    EmProject.WorkHard();\n    EmProject.Hour = 17;\n\n    EmProject.TaskFinished = true;\n    // EmProject.TaskFinished = false;\n\n    EmProject.WriteProgram();\n    EmProject.Hour = 19;\n    EmProject.WriteProgram();\n    EmProject.Hour = 22;\n    EmProject.WriteProgram();\n\n    Console.Read();\n}`, `21469825204100210000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="cpp"\n              >\n                <span class="gatsby-code-button-language">cpp</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="cpp"><pre style="counter-reset: linenumber NaN" class="language-cpp line-numbers"><code class="language-cpp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Work</span>    <span class="token comment">//工作</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">private</span> State current<span class="token punctuation">;</span>\n    <span class="token keyword">public</span> <span class="token function">Work</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        current <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">ForenoonState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">private</span> <span class="token keyword">double</span> hour<span class="token punctuation">;</span>\n    <span class="token keyword">public</span> <span class="token keyword">double</span> Hour\n    <span class="token punctuation">{</span>\n        get <span class="token punctuation">{</span> <span class="token keyword">return</span> hour<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n        set <span class="token punctuation">{</span> hour <span class="token operator">=</span> value<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">private</span> <span class="token keyword">bool</span> finish <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>\n    <span class="token keyword">public</span> <span class="token keyword">bool</span> TaskFinished\n    <span class="token punctuation">{</span>\n        get <span class="token punctuation">{</span> <span class="token keyword">return</span> finish<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n        set <span class="token punctuation">{</span> finish <span class="token operator">=</span> value<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">SetState</span><span class="token punctuation">(</span>State s<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        current <span class="token operator">=</span> s<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">WordHard</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        current<span class="token punctuation">.</span><span class="token function">WriteProgram</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">public</span> abstract <span class="token keyword">class</span> <span class="token class-name">State</span>     <span class="token comment">//抽象状态</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> abstract <span class="token keyword">void</span> <span class="token function">WriteProgram</span><span class="token punctuation">(</span>Work w<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ForenoonState</span> <span class="token operator">:</span> State     <span class="token comment">//上午工作状态</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> override <span class="token keyword">void</span> <span class="token function">WriteProgram</span><span class="token punctuation">(</span>Work w<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">if</span> <span class="token punctuation">(</span>w<span class="token punctuation">.</span>Hour <span class="token operator">&lt;</span> <span class="token number">12</span><span class="token punctuation">)</span>\n        <span class="token punctuation">{</span>\n            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"当前时间：{0}点 上午工作，精神百倍"</span><span class="token punctuation">,</span> w<span class="token punctuation">.</span>Hour<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n        <span class="token keyword">else</span>\n        <span class="token punctuation">{</span>\n            w<span class="token punctuation">.</span><span class="token function">SetState</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token function">NoonState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n            w<span class="token punctuation">.</span><span class="token function">WorkHard</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">NoonState</span> <span class="token operator">:</span> State     <span class="token comment">//中午工作状态</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> override <span class="token keyword">void</span> <span class="token function">WriteProgram</span><span class="token punctuation">(</span>Work w<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">if</span> <span class="token punctuation">(</span>w<span class="token punctuation">.</span>Hour <span class="token operator">&lt;</span> <span class="token number">13</span><span class="token punctuation">)</span>\n        <span class="token punctuation">{</span>\n            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"当前时间：{0}点 饿了，午饭；犯困，午休。"</span><span class="token punctuation">,</span> w<span class="token punctuation">.</span>Hour<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n        <span class="token keyword">else</span>\n        <span class="token punctuation">{</span>\n            w<span class="token punctuation">.</span><span class="token function">SetState</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token function">AfternoonState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n            w<span class="token punctuation">.</span><span class="token function">WorkHard</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Main</span><span class="token punctuation">(</span>string<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    <span class="token comment">//紧急项目</span>\n    Work EmProject <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Work</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    EmProject<span class="token punctuation">.</span>Hour <span class="token operator">=</span> <span class="token number">9</span><span class="token punctuation">;</span>\n    EmProject<span class="token punctuation">.</span><span class="token function">WorkHard</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    EmProject<span class="token punctuation">.</span>Hour <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>\n    EmProject<span class="token punctuation">.</span><span class="token function">WorkHard</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    EmProject<span class="token punctuation">.</span>Hour <span class="token operator">=</span> <span class="token number">12</span><span class="token punctuation">;</span>\n    EmProject<span class="token punctuation">.</span><span class="token function">WorkHard</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    EmProject<span class="token punctuation">.</span>Hour <span class="token operator">=</span> <span class="token number">13</span><span class="token punctuation">;</span>\n    EmProject<span class="token punctuation">.</span><span class="token function">WorkHard</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    EmProject<span class="token punctuation">.</span>Hour <span class="token operator">=</span> <span class="token number">14</span><span class="token punctuation">;</span>\n    EmProject<span class="token punctuation">.</span><span class="token function">WorkHard</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    EmProject<span class="token punctuation">.</span>Hour <span class="token operator">=</span> <span class="token number">17</span><span class="token punctuation">;</span>\n\n    EmProject<span class="token punctuation">.</span>TaskFinished <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>\n    <span class="token comment">// EmProject.TaskFinished = false;</span>\n\n    EmProject<span class="token punctuation">.</span><span class="token function">WriteProgram</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    EmProject<span class="token punctuation">.</span>Hour <span class="token operator">=</span> <span class="token number">19</span><span class="token punctuation">;</span>\n    EmProject<span class="token punctuation">.</span><span class="token function">WriteProgram</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    EmProject<span class="token punctuation">.</span>Hour <span class="token operator">=</span> <span class="token number">22</span><span class="token punctuation">;</span>\n    EmProject<span class="token punctuation">.</span><span class="token function">WriteProgram</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    Console<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="模式结构-2"><a href="#%E6%A8%A1%E5%BC%8F%E7%BB%93%E6%9E%84-2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式结构</h3>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180418010557-9bbc72242a77b1872c2043d0852e3243-e38b7.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 37.688734030197445%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABqklEQVQoz41STUsCURQddbJy1aJaRFCLdiFUq4JZ5S9xO7tcGNLGRSPWlFvBMNFCWsgQghtRFBfqaH7ityj4iSImM4lgYXafqYuQ6sDwDu8M59x378WazaY1Fos9lMvlx1ar9cSyrBSbwu12rzUajbtisWgtFApW4Pcej2cbacFgUIAtwvgHfD6fcqapVCopx3FzbTQajQOBwAHSIFi40DCbzbqr1aqz3W47a7WaB5KJmWaxWDYikQiTTqfZSqXyUq/Xn71e7+60EOwvCCQSiZAkSZFerxcrFApcJpOJkKBWq3coitpDnCAIXC6X4zRNLxsMBnEul8NTqRTOMMy3S6/X+y1E+M+7CeamLpdrCZ52Fo1Gr+HJl5B4G4/HTx0Ox2Ymk9GCpgmHwxo4r+CfLTiPk8nkTSgUooBrE4mEEswkc2ez2bwKfWyhxvf7/ckASqUSbbfbDxEfDoeTDwGCTmDi54gPBoPJHWzKm81m25wb6nS6FUiOgsk7iK88z4/z+fyF0Wjchx59wErxnU6Hg7X5hIqO/H4/Cas0hiJ63W53CMPMmUymdeT1BdqKM3A74ubPAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180418010557" title="" data-src="/static/微信截图_20180418010557-9bbc72242a77b1872c2043d0852e3243-fee1c.png" data-srcset="/static/微信截图_20180418010557-9bbc72242a77b1872c2043d0852e3243-a67b7.png 200w,\n/static/微信截图_20180418010557-9bbc72242a77b1872c2043d0852e3243-0b187.png 400w,\n/static/微信截图_20180418010557-9bbc72242a77b1872c2043d0852e3243-fee1c.png 800w,\n/static/微信截图_20180418010557-9bbc72242a77b1872c2043d0852e3243-b1a91.png 1200w,\n/static/微信截图_20180418010557-9bbc72242a77b1872c2043d0852e3243-95179.png 1600w,\n/static/微信截图_20180418010557-9bbc72242a77b1872c2043d0852e3243-e38b7.png 1722w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<ul>\n<li>Context：环境类</li>\n<li>State：抽象状态类</li>\n<li>ConcreteState：具体状态类</li>\n</ul>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="39105324149331680000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`public class Context\n{\n    private State state;\n\n    public Context(State state)\n    {\n        this.state = state;\n    }\n\n    public State State\n    {\n        get { return state; }\n        set { state = value; }\n    }\n\n    public void Request()\n    {\n        state.Handle(this);\n    }\n}\npublic abstract class State\n{\n    public abstract void Handle(Context context);\n}\npublic class ConcreteStateA : State\n{\n    public override void Handle(Context context)\n    {\n        Console.WriteLine(&quot;当前状态是 A.&quot;);\n        context.State = new ConcreteStateB();\n    }\n}\n\npublic class ConcreteStateB : State\n{\n    public override void Handle(Context context)\n    {\n        Console.WriteLine(&quot;当前状态是 B.&quot;);\n        context.State = new ConcreteStateA();\n    }\n}\n\nclass Program\n{\n    static void Main(string[] args)\n    {\n        // 设置Context的初始状态为ConcreteStateA\n        Context context = new Context(new ConcreteStateA());\n\n        // 不断地进行请求，同时更改状态\n        context.Request();\n        context.Request();\n        context.Request();\n        context.Request();\n\n        Console.Read();\n    }\n}`, `39105324149331680000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="cpp"\n              >\n                <span class="gatsby-code-button-language">cpp</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="cpp"><pre style="counter-reset: linenumber NaN" class="language-cpp line-numbers"><code class="language-cpp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Context</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">private</span> State state<span class="token punctuation">;</span>\n\n    <span class="token keyword">public</span> <span class="token function">Context</span><span class="token punctuation">(</span>State state<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> state<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">public</span> State State\n    <span class="token punctuation">{</span>\n        get <span class="token punctuation">{</span> <span class="token keyword">return</span> state<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n        set <span class="token punctuation">{</span> state <span class="token operator">=</span> value<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        state<span class="token punctuation">.</span><span class="token function">Handle</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">public</span> abstract <span class="token keyword">class</span> <span class="token class-name">State</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> abstract <span class="token keyword">void</span> <span class="token function">Handle</span><span class="token punctuation">(</span>Context context<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConcreteStateA</span> <span class="token operator">:</span> State\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> override <span class="token keyword">void</span> <span class="token function">Handle</span><span class="token punctuation">(</span>Context context<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"当前状态是 A."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        context<span class="token punctuation">.</span>State <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">ConcreteStateB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConcreteStateB</span> <span class="token operator">:</span> State\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> override <span class="token keyword">void</span> <span class="token function">Handle</span><span class="token punctuation">(</span>Context context<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"当前状态是 B."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        context<span class="token punctuation">.</span>State <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">ConcreteStateA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">class</span> <span class="token class-name">Program</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Main</span><span class="token punctuation">(</span>string<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token comment">// 设置Context的初始状态为ConcreteStateA</span>\n        Context context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Context</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token function">ConcreteStateA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n        <span class="token comment">// 不断地进行请求，同时更改状态</span>\n        context<span class="token punctuation">.</span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        context<span class="token punctuation">.</span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        context<span class="token punctuation">.</span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        context<span class="token punctuation">.</span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n        Console<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="模式应用-2"><a href="#%E6%A8%A1%E5%BC%8F%E5%BA%94%E7%94%A8-2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式应用</h3>\n<ul>\n<li>灯泡的开与关</li>\n<li>qq 在线状态</li>\n<li>文档编辑器状态切换</li>\n<li>工作流系统</li>\n<li>游戏开发</li>\n</ul>\n<h3 id="优缺点-2"><a href="#%E4%BC%98%E7%BC%BA%E7%82%B9-2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>优缺点</h3>\n<ul>\n<li>\n<p>优点</p>\n<ul>\n<li>封装转换过程，也就是转换规则。</li>\n<li>枚举可能的状态，因此，需要事先确定状态种类。</li>\n<li>将所有与某个状态有关的行为放到一个对象里。</li>\n<li>允许状态转换逻辑与状态对象合成一体，而不是某一个巨大的条件语句块或 switch 语句。</li>\n<li>避免了状态的不一致性，因为状态的改变只使用一个状态对象而不是几个对象或属性。</li>\n</ul>\n</li>\n<li>\n<p>缺点</p>\n<ul>\n<li>状态模式的使用必然会增加系统类和对象的个数。</li>\n</ul>\n</li>\n</ul>\n<h3 id="模式使用-2"><a href="#%E6%A8%A1%E5%BC%8F%E4%BD%BF%E7%94%A8-2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式使用</h3>\n<ul>\n<li>对象的行为依赖于它的状态（属性）并且它必须可以根据它的状态改变而改变它的相关行为。</li>\n<li>操作的很多部分都带有与对象状态有关的大量条件语句，大量条件语句的出现，会导致代码的可维护性和灵活性变差，不能方便地增加删除状态，使客户类与类库之间的耦合增强。</li>\n</ul>\n<h2 id="策略模式strategy"><a href="#%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8Fstrategy" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>策略模式(Strategy)</h2>\n<p>定义一系列的算法,把它们一个个封装起来,并且使它们可相互替换。</p>\n<h3 id="模式背景-3"><a href="#%E6%A8%A1%E5%BC%8F%E8%83%8C%E6%99%AF-3" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式背景</h3>\n<p>周郎妙计安天下，赔了夫人又折兵</p>\n<ul>\n<li>第一个锦囊：找乔国老帮忙，让吴国太给孙权施加压力</li>\n<li>第二个锦囊：刘备乐不思蜀，谎报曹操要报赤壁大败之仇</li>\n<li>第三个锦囊：追兵来了，孙尚香断后</li>\n</ul>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180418110919-d10d20d089a49126acd096261c7f57be-2a633.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 36.16625310173698%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsSAAALEgHS3X78AAABkUlEQVQoz21RzUoCURQerbSEoCdoUQuDkhY+QWD7Wgo1IfkELYTETUFbcVGrnqAgoVwIBqKgM404Kpq/NCo4qAtTB6fRkbHbuXYTqc7mO+fc73z3/FAUsVQqpcOYTqe38vn8OaCrVCq5ksnkOs4jhCiCU54gCAflcvkhkUjc1ev1y3kORYQWMVYqFSc8IE3TMCC/33+M8zabzQRmtFqtyzjOZDL3iFiz2RRmgrFYbGE8HushmArmcrnddrt9W6vVnlqt1nU0GjXjfCAQMPh8viWv12vEMcdxp9lslhNF8QW4N386JKaf81cJ6n6T/iuE1Xw7LMsehsPhI0BHKBTagE7WisUiHYlEaBjL7na7DQzD7EBHDuj2hOf5PbKa7UKhQMNENOxwf/YRJFUYEamqimAEZzweN8uyjDqdDmo0Gsjj8ZjgOBej0Qj1+30EPouLq9Xq1WQymdYB73UmCGJvw+HwvdfrfcLl7MFgcBN8SVEUqdvtihaLZQU6OJMkSYPcB+zskVzZBR+og8FABsHnH8Ev1N8ldB5lmzwAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180418110919" title="" data-src="/static/微信截图_20180418110919-d10d20d089a49126acd096261c7f57be-fee1c.png" data-srcset="/static/微信截图_20180418110919-d10d20d089a49126acd096261c7f57be-a67b7.png 200w,\n/static/微信截图_20180418110919-d10d20d089a49126acd096261c7f57be-0b187.png 400w,\n/static/微信截图_20180418110919-d10d20d089a49126acd096261c7f57be-fee1c.png 800w,\n/static/微信截图_20180418110919-d10d20d089a49126acd096261c7f57be-b1a91.png 1200w,\n/static/微信截图_20180418110919-d10d20d089a49126acd096261c7f57be-95179.png 1600w,\n/static/微信截图_20180418110919-d10d20d089a49126acd096261c7f57be-2a633.png 1612w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="17653012430939042000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`public interface IStrategy\n{\n    void operate();\n}\n\npublic class OpenBackDoor : IStrategy\n{\n    public void operate()\n    {\n        Console.WriteLine(&quot;找乔国老帮忙，让吴国太给孙权施加压力&quot;);\n    }\n}\n\npublic class HappyForgetShu : IStrategy\n{\n    public void operate()\n    {\n        Console.WriteLine(&quot;刘备乐不思蜀，谎报曹操要报赤壁大败之仇&quot;);\n    }\n}\n\npublic class BlockEnemy : IStrategy\n{\n    public void operate()\n    {\n        Console.WriteLine(&quot;追兵来了，孙夫人断后&quot;);\n    }\n}\npublic class Context\n{\n    private IStrategy strategy;\n    public Context(IStrategy strategy)\n    {\n        this.strategy = strategy;\n    }\n\n    public void operation()\n    {\n        this.strategy.operate();\n    }\n}\nstatic void Main(string[] args)\n{\n    Context context;\n    context = new Context(new OpenBackDoor());\n    context.operation();\n\n    context = new Context(new HappyForgetShu());\n    context.operation();\n\n    context = new Context(new BlockEnemy());\n    context.operation();\n\n    Console.Read();\n}`, `17653012430939042000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="cpp"\n              >\n                <span class="gatsby-code-button-language">cpp</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="cpp"><pre style="counter-reset: linenumber NaN" class="language-cpp line-numbers"><code class="language-cpp"><span class="token keyword">public</span> interface IStrategy\n<span class="token punctuation">{</span>\n    <span class="token keyword">void</span> <span class="token function">operate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OpenBackDoor</span> <span class="token operator">:</span> IStrategy\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">operate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"找乔国老帮忙，让吴国太给孙权施加压力"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HappyForgetShu</span> <span class="token operator">:</span> IStrategy\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">operate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"刘备乐不思蜀，谎报曹操要报赤壁大败之仇"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BlockEnemy</span> <span class="token operator">:</span> IStrategy\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">operate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"追兵来了，孙夫人断后"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Context</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">private</span> IStrategy strategy<span class="token punctuation">;</span>\n    <span class="token keyword">public</span> <span class="token function">Context</span><span class="token punctuation">(</span>IStrategy strategy<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">this</span><span class="token punctuation">.</span>strategy <span class="token operator">=</span> strategy<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">this</span><span class="token punctuation">.</span>strategy<span class="token punctuation">.</span><span class="token function">operate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Main</span><span class="token punctuation">(</span>string<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    Context context<span class="token punctuation">;</span>\n    context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Context</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token function">OpenBackDoor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    context<span class="token punctuation">.</span><span class="token function">operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Context</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token function">HappyForgetShu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    context<span class="token punctuation">.</span><span class="token function">operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Context</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token function">BlockEnemy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    context<span class="token punctuation">.</span><span class="token function">operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    Console<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="模式动机-3"><a href="#%E6%A8%A1%E5%BC%8F%E5%8A%A8%E6%9C%BA-3" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式动机</h3>\n<ul>\n<li>完成一项任务，往往可以有多种不同的方式，每一种方式称为一个策略，我们可以根据环境或者条件的不同选择不同的策略来完成该项任务。</li>\n<li>在软件开发中也常常遇到类似的情况，实现某一个功能有多个途径，此时可以使用一种设计模式来使得系统可以灵活地选择解决途径，也能够方便地增加新的解决途径。</li>\n<li>在软件系统中，有许多算法可以实现某一功能，如查找、排序等，一种常用的方法是硬编码(Hard Coding)在一个类中，如需要提供多种查找算法，可以将这些算法写到一个类中，在该类中提供多个方法，每一个方法对应一个具体的查找算法；当然也可以将这些查找算法封装在一个统一的方法中，通过 if…else…等条件判断语句来进行选择。</li>\n<li>为了解决这些问题，可以定义一些独立的类来封装不同的算法，每一个类封装一个具体的算法，在这里，每一个封装算法的类我们都可以称之为策略(Strategy)，为了保证这些策略的一致性，一般会用一个抽象的策略类来做算法的定义，而具体每种算法则对应于一个具体策略类。</li>\n</ul>\n<h3 id="模式定义-3"><a href="#%E6%A8%A1%E5%BC%8F%E5%AE%9A%E4%B9%89-3" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式定义</h3>\n<p>定义一系列算法，将每一个算法封装起来，并让它们可以相互替换。策略模式让算法独立于使用它的客户而变化。策略模式是一种对象行为型模式。</p>\n<h3 id="模式结构-3"><a href="#%E6%A8%A1%E5%BC%8F%E7%BB%93%E6%9E%84-3" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式结构</h3>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180418111636-e7c1a14bbd05e9980d8f41873f12c6d9-1eb4d.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 33.97014925373134%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsSAAALEgHS3X78AAABa0lEQVQoz5VRPUvDUBRN+lINKor+BumqSxfzXxwdgrgJovgBdQ0u2TKEEEEU13Zou7RDG2jpV9IEmraUhA5CoAUNLrXPe2MqFUTwwONx7z3v3vPOZWzbfhgMBo+dTmefAVBKWWYJuVyOtyxLNE3zHLjXrVYrjfnxePyD9w0ao1QqnWIsCAJPCFlJpVI8xqIo7gZBsKDR4XB4i3nIkV8bjkajJ9d1n+v1ejRZ07RVXdeThUIhWS6XiSzLG57nHff7/Xvf9+8cx0nHQjg4BGKuWq0mMAfqmf9g/a9ipVJhF19mF76pqsqDlycw9bLRaFx0u91MsVjcW1KUAMVrzWZTBM4VcsDXG/jJAXJqtRobyWy321HDfD6/Ax69z2YzOplMIs+gdhQvIYm3oihbYNPLfD6n0+k04oCIDNZguV++GoYRNcxms9uwTb/X632AZ69hGGLDQ6zBIA5vSZI2Yes2PKbg/RsOBpVn8VDyCc0X+ZqLJv/hAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180418111636" title="" data-src="/static/微信截图_20180418111636-e7c1a14bbd05e9980d8f41873f12c6d9-fee1c.png" data-srcset="/static/微信截图_20180418111636-e7c1a14bbd05e9980d8f41873f12c6d9-a67b7.png 200w,\n/static/微信截图_20180418111636-e7c1a14bbd05e9980d8f41873f12c6d9-0b187.png 400w,\n/static/微信截图_20180418111636-e7c1a14bbd05e9980d8f41873f12c6d9-fee1c.png 800w,\n/static/微信截图_20180418111636-e7c1a14bbd05e9980d8f41873f12c6d9-b1a91.png 1200w,\n/static/微信截图_20180418111636-e7c1a14bbd05e9980d8f41873f12c6d9-95179.png 1600w,\n/static/微信截图_20180418111636-e7c1a14bbd05e9980d8f41873f12c6d9-1eb4d.png 1675w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<ul>\n<li>Context: 环境类</li>\n<li>Strategy: 抽象策略类</li>\n<li>ConcreteStrategy: 具体策略类</li>\n</ul>\n<h3 id="模式应用-3"><a href="#%E6%A8%A1%E5%BC%8F%E5%BA%94%E7%94%A8-3" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式应用</h3>\n<ul>\n<li>直接插入排序、希尔排序、冒泡排序、快速排序、直接选择排序、堆排序、归并排序、基数排序的选择。</li>\n<li>交通工具的选择。</li>\n</ul>\n<h3 id="优缺点-3"><a href="#%E4%BC%98%E7%BC%BA%E7%82%B9-3" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>优缺点</h3>\n<ul>\n<li>\n<p>优点</p>\n<ul>\n<li>提供了对“开闭原则”的完美支持，用户可以在不修改原有系统的基础上选择算法或行为，也可以灵活地增加新的算法或行为。</li>\n<li>提供了管理相关的算法族的办法。</li>\n<li>提供了可以替换继承关系的办法。</li>\n<li>可以避免使用多重条件转移语句。</li>\n</ul>\n</li>\n<li>\n<p>缺点</p>\n<ul>\n<li>客户端必须知道所有的策略类，并自行决定使用哪一个策略类。</li>\n<li>策略模式将造成产生很多策略类，可以通过使用享元模式在一定程度上减少对象的数量。</li>\n</ul>\n</li>\n</ul>\n<h3 id="模式使用-3"><a href="#%E6%A8%A1%E5%BC%8F%E4%BD%BF%E7%94%A8-3" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式使用</h3>\n<ul>\n<li>如果在一个系统里面有许多类，它们之间的区别仅在于它们的行为，那么使用策略模式可以动态地让一个对象在许多行为中选择一种行为。</li>\n<li>如果一个对象有很多的行为，如果不用恰当的模式，这些行为就只好使用多重的条件选择语句来实现。</li>\n<li>一个系统需要动态地在几种算法中选择一种。</li>\n<li>不希望客户端知道复杂的、与算法相关的数据结构，在具体策略类中封装算法和相关的数据结构，提高算法的保密性与安全性。</li>\n</ul>\n<h3 id="模式应用-4"><a href="#%E6%A8%A1%E5%BC%8F%E5%BA%94%E7%94%A8-4" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式应用</h3>\n<ul>\n<li>在微软公司提供的演示项目 PetShop 4.0 中使用策略模式来处理同步订单和异步订单的问题。</li>\n<li>在 BLL 中的 Order 类里通过反射机制从配置文件中读取策略配置的信息以决定到底是使用哪种订单处理方式。只需要修改配置文件即可更改订单处理方式，提高了系统的灵活性。</li>\n</ul>\n<h3 id="策略模式与状态模式"><a href="#%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F%E4%B8%8E%E7%8A%B6%E6%80%81%E6%A8%A1%E5%BC%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>策略模式与状态模式</h3>\n<ul>\n<li>可以通过环境类状态的个数来决定是使用策略模式还是状态模式。</li>\n<li>策略模式的环境类自己选择一个具体策略类，具体策略类无须关心环境类；而状态模式的环境类由于外在因素需要放进一个具体状态中，以便通过其方法实现状态的切换，因此环境类和状态类之间存在一种双向的关联关系。</li>\n<li>使用策略模式时，客户端需要知道所选的具体策略是哪一个，而使用状态模式时，客户端无须关心具体状态，环境类的状态会根据用户的操作自动转换。</li>\n<li>如果系统中某个类的对象存在多种状态，不同状态下行为有差异，而且这些状态之间可以发生转换时使用状态模式；如果系统中某个类的某一行为存在多种实现方式，而且这些实现方式可以互换时使用策略模式。</li>\n</ul>',
id:"/home/runner/work/GatsbyBlog/GatsbyBlog/blog/设计模式之行为型模式（二）/index.md absPath of file >>> MarkdownRemark",timeToRead:14,frontmatter:{date:"2018-04-19 00:04:42",path:"/design-pattern-behavior-2/",tags:"面试, 设计模式, 读书笔记",title:"设计模式之行为型模式（二）",draft:null}},{excerpt:"职责链模式(Chain of Responsibility) 使多个对象都有机会处理请求，从而避免请求的发送者和接收者之间的耦合关系。将这些对象连成一条链,  并沿着这条链传递该请求，直到有一个对象处理它为止。 模式背景 加薪、请假非要老总批? 每级领导都有一定限度的权利，对待申请，需判断是否有权来决策 经理可以批 2 天以下请假，如果没权利，向总监上报 总监可以批…",html:'<h2 id="职责链模式chain-of-responsibility"><a href="#%E8%81%8C%E8%B4%A3%E9%93%BE%E6%A8%A1%E5%BC%8Fchain-of-responsibility" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>职责链模式(Chain of Responsibility)</h2>\n<p>使多个对象都有机会处理请求，从而避免请求的发送者和接收者之间的耦合关系。将这些对象连成一条链,  并沿着这条链传递该请求，直到有一个对象处理它为止。</p>\n<h3 id="模式背景"><a href="#%E6%A8%A1%E5%BC%8F%E8%83%8C%E6%99%AF" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式背景</h3>\n<p>加薪、请假非要老总批?</p>\n<ul>\n<li>每级领导都有一定限度的权利，对待申请，需判断是否有权来决策</li>\n<li>经理可以批 2 天以下请假，如果没权利，向总监上报</li>\n<li>总监可以批 5 天以下请假，如果没权利，向总经理上报</li>\n</ul>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="59358987873115180000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`class Request   //申请\n{\n    //申请类别\n    private string requestType;\n    public string RequestType\n    {\n        get { return requestType; }\n        set { requestType = value; }\n    }\n\n    //申请内容\n    private string requestContent;\n    public string RequestContent\n    {\n        get { return requestContent; }\n        set { requestContent = value; }\n    }\n\n    //数量\n    private int number;\n    public int Number\n    {\n        get { return number; }\n        set { number = value; }\n    }\n}\nclass Manager\n{\n    protected string name;\n    public Manager(string name)\n    {\n        this.name = name;\n    }\n    public void GetResult(ManagerLevel managerLevel, Request request)\n    {\n        if (managerLevel == ManagerLevel.经理)\n        {\n            if (request.RequestType == &quot;请假&quot; && request.Number <= 2)\n            {\n                Console.WriteLine(&quot;{0}:{1} 数量{2} 被批准&quot;, name, request.RequestContent, request.Number);\n            }\n            else\n            {\n                Console.WriteLine(&quot;{0}:{1} 数量{2} 我无权处理&quot;, name, request.RequestContent, request.Number);\n            }\n        }\n        else if (managerLevel == ManagerLevel.总监)\n        {\n            if (request.RequestType == &quot;请假&quot; && request.Number <= 5)\n            {\n                Console.WriteLine(&quot;{0}:{1} 数量{2} 被批准&quot;, name, request.RequestContent, request.Number);\n            }\n            else\n            {\n                Console.WriteLine(&quot;{0}:{1} 数量{2} 我无权处理&quot;, name, request.RequestContent, request.Number);\n            }\n        }\n        else if (managerLevel == ManagerLevel.总经理)\n        {\n            if (request.RequestType == &quot;请假&quot;)\n            {\n                Console.WriteLine(&quot;{0}:{1} 数量{2} 被批准&quot;, name, request.RequestContent, request.Number);\n            }\n            else if (request.RequestType == &quot;加薪&quot; && request.Number <= 500)\n            {\n                Console.WriteLine(&quot;{0}:{1} 数量{2} 被批准&quot;, name, request.RequestContent, request.Number);\n            }\n            else if (request.RequestType == &quot;加薪&quot; && request.Number > 500)\n            {\n                Console.WriteLine(&quot;{0}:{1} 数量{2} 再说吧&quot;, name, request.RequestContent, request.Number);\n            }\n        }\n    }\n}\nstatic void Main(string[] args)\n{\n    Manager jinli = new Manager(&quot;金利&quot;);\n    Manager zongjian = new Manager(&quot;宗剑&quot;);\n    Manager zhongjingli = new Manager(&quot;钟精励&quot;);\n\n    Request request = new Request();\n    request.RequestType = &quot;加薪&quot;;\n    request.RequestContent = &quot;张三请求加薪&quot;;\n    request.Number = 1000;\n\n    jinli.GetResult(ManagerLevel.经理, request);\n    zongjian.GetResult(ManagerLevel.总监, request);\n    zhongjingli.GetResult(ManagerLevel.总经理, request);\n\n    Request request2 = new Request();\n    request2.RequestType = &quot;请假&quot;;\n    request2.RequestContent = &quot;张三请假&quot;;\n    request2.Number = 3;\n\n    jinli.GetResult(ManagerLevel.经理, request2);\n    zongjian.GetResult(ManagerLevel.总监, request2);\n    zhongjingli.GetResult(ManagerLevel.总经理, request2);\n\n    Console.Read();\n}`, `59358987873115180000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="cpp"\n              >\n                <span class="gatsby-code-button-language">cpp</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="cpp"><pre style="counter-reset: linenumber NaN" class="language-cpp line-numbers"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Request</span>   <span class="token comment">//申请</span>\n<span class="token punctuation">{</span>\n    <span class="token comment">//申请类别</span>\n    <span class="token keyword">private</span> string requestType<span class="token punctuation">;</span>\n    <span class="token keyword">public</span> string RequestType\n    <span class="token punctuation">{</span>\n        get <span class="token punctuation">{</span> <span class="token keyword">return</span> requestType<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n        set <span class="token punctuation">{</span> requestType <span class="token operator">=</span> value<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token comment">//申请内容</span>\n    <span class="token keyword">private</span> string requestContent<span class="token punctuation">;</span>\n    <span class="token keyword">public</span> string RequestContent\n    <span class="token punctuation">{</span>\n        get <span class="token punctuation">{</span> <span class="token keyword">return</span> requestContent<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n        set <span class="token punctuation">{</span> requestContent <span class="token operator">=</span> value<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token comment">//数量</span>\n    <span class="token keyword">private</span> <span class="token keyword">int</span> number<span class="token punctuation">;</span>\n    <span class="token keyword">public</span> <span class="token keyword">int</span> Number\n    <span class="token punctuation">{</span>\n        get <span class="token punctuation">{</span> <span class="token keyword">return</span> number<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n        set <span class="token punctuation">{</span> number <span class="token operator">=</span> value<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">class</span> <span class="token class-name">Manager</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">protected</span> string name<span class="token punctuation">;</span>\n    <span class="token keyword">public</span> <span class="token function">Manager</span><span class="token punctuation">(</span>string name<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">GetResult</span><span class="token punctuation">(</span>ManagerLevel managerLevel<span class="token punctuation">,</span> Request request<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">if</span> <span class="token punctuation">(</span>managerLevel <span class="token operator">==</span> ManagerLevel<span class="token punctuation">.</span>经理<span class="token punctuation">)</span>\n        <span class="token punctuation">{</span>\n            <span class="token keyword">if</span> <span class="token punctuation">(</span>request<span class="token punctuation">.</span>RequestType <span class="token operator">==</span> <span class="token string">"请假"</span> <span class="token operator">&amp;&amp;</span> request<span class="token punctuation">.</span>Number <span class="token operator">&lt;=</span> <span class="token number">2</span><span class="token punctuation">)</span>\n            <span class="token punctuation">{</span>\n                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"{0}:{1} 数量{2} 被批准"</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> request<span class="token punctuation">.</span>RequestContent<span class="token punctuation">,</span> request<span class="token punctuation">.</span>Number<span class="token punctuation">)</span><span class="token punctuation">;</span>\n            <span class="token punctuation">}</span>\n            <span class="token keyword">else</span>\n            <span class="token punctuation">{</span>\n                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"{0}:{1} 数量{2} 我无权处理"</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> request<span class="token punctuation">.</span>RequestContent<span class="token punctuation">,</span> request<span class="token punctuation">.</span>Number<span class="token punctuation">)</span><span class="token punctuation">;</span>\n            <span class="token punctuation">}</span>\n        <span class="token punctuation">}</span>\n        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>managerLevel <span class="token operator">==</span> ManagerLevel<span class="token punctuation">.</span>总监<span class="token punctuation">)</span>\n        <span class="token punctuation">{</span>\n            <span class="token keyword">if</span> <span class="token punctuation">(</span>request<span class="token punctuation">.</span>RequestType <span class="token operator">==</span> <span class="token string">"请假"</span> <span class="token operator">&amp;&amp;</span> request<span class="token punctuation">.</span>Number <span class="token operator">&lt;=</span> <span class="token number">5</span><span class="token punctuation">)</span>\n            <span class="token punctuation">{</span>\n                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"{0}:{1} 数量{2} 被批准"</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> request<span class="token punctuation">.</span>RequestContent<span class="token punctuation">,</span> request<span class="token punctuation">.</span>Number<span class="token punctuation">)</span><span class="token punctuation">;</span>\n            <span class="token punctuation">}</span>\n            <span class="token keyword">else</span>\n            <span class="token punctuation">{</span>\n                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"{0}:{1} 数量{2} 我无权处理"</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> request<span class="token punctuation">.</span>RequestContent<span class="token punctuation">,</span> request<span class="token punctuation">.</span>Number<span class="token punctuation">)</span><span class="token punctuation">;</span>\n            <span class="token punctuation">}</span>\n        <span class="token punctuation">}</span>\n        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>managerLevel <span class="token operator">==</span> ManagerLevel<span class="token punctuation">.</span>总经理<span class="token punctuation">)</span>\n        <span class="token punctuation">{</span>\n            <span class="token keyword">if</span> <span class="token punctuation">(</span>request<span class="token punctuation">.</span>RequestType <span class="token operator">==</span> <span class="token string">"请假"</span><span class="token punctuation">)</span>\n            <span class="token punctuation">{</span>\n                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"{0}:{1} 数量{2} 被批准"</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> request<span class="token punctuation">.</span>RequestContent<span class="token punctuation">,</span> request<span class="token punctuation">.</span>Number<span class="token punctuation">)</span><span class="token punctuation">;</span>\n            <span class="token punctuation">}</span>\n            <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>request<span class="token punctuation">.</span>RequestType <span class="token operator">==</span> <span class="token string">"加薪"</span> <span class="token operator">&amp;&amp;</span> request<span class="token punctuation">.</span>Number <span class="token operator">&lt;=</span> <span class="token number">500</span><span class="token punctuation">)</span>\n            <span class="token punctuation">{</span>\n                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"{0}:{1} 数量{2} 被批准"</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> request<span class="token punctuation">.</span>RequestContent<span class="token punctuation">,</span> request<span class="token punctuation">.</span>Number<span class="token punctuation">)</span><span class="token punctuation">;</span>\n            <span class="token punctuation">}</span>\n            <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>request<span class="token punctuation">.</span>RequestType <span class="token operator">==</span> <span class="token string">"加薪"</span> <span class="token operator">&amp;&amp;</span> request<span class="token punctuation">.</span>Number <span class="token operator">></span> <span class="token number">500</span><span class="token punctuation">)</span>\n            <span class="token punctuation">{</span>\n                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"{0}:{1} 数量{2} 再说吧"</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> request<span class="token punctuation">.</span>RequestContent<span class="token punctuation">,</span> request<span class="token punctuation">.</span>Number<span class="token punctuation">)</span><span class="token punctuation">;</span>\n            <span class="token punctuation">}</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Main</span><span class="token punctuation">(</span>string<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    Manager jinli <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Manager</span><span class="token punctuation">(</span><span class="token string">"金利"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    Manager zongjian <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Manager</span><span class="token punctuation">(</span><span class="token string">"宗剑"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    Manager zhongjingli <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Manager</span><span class="token punctuation">(</span><span class="token string">"钟精励"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    Request request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    request<span class="token punctuation">.</span>RequestType <span class="token operator">=</span> <span class="token string">"加薪"</span><span class="token punctuation">;</span>\n    request<span class="token punctuation">.</span>RequestContent <span class="token operator">=</span> <span class="token string">"张三请求加薪"</span><span class="token punctuation">;</span>\n    request<span class="token punctuation">.</span>Number <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">;</span>\n\n    jinli<span class="token punctuation">.</span><span class="token function">GetResult</span><span class="token punctuation">(</span>ManagerLevel<span class="token punctuation">.</span>经理<span class="token punctuation">,</span> request<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    zongjian<span class="token punctuation">.</span><span class="token function">GetResult</span><span class="token punctuation">(</span>ManagerLevel<span class="token punctuation">.</span>总监<span class="token punctuation">,</span> request<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    zhongjingli<span class="token punctuation">.</span><span class="token function">GetResult</span><span class="token punctuation">(</span>ManagerLevel<span class="token punctuation">.</span>总经理<span class="token punctuation">,</span> request<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    Request request2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    request2<span class="token punctuation">.</span>RequestType <span class="token operator">=</span> <span class="token string">"请假"</span><span class="token punctuation">;</span>\n    request2<span class="token punctuation">.</span>RequestContent <span class="token operator">=</span> <span class="token string">"张三请假"</span><span class="token punctuation">;</span>\n    request2<span class="token punctuation">.</span>Number <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>\n\n    jinli<span class="token punctuation">.</span><span class="token function">GetResult</span><span class="token punctuation">(</span>ManagerLevel<span class="token punctuation">.</span>经理<span class="token punctuation">,</span> request2<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    zongjian<span class="token punctuation">.</span><span class="token function">GetResult</span><span class="token punctuation">(</span>ManagerLevel<span class="token punctuation">.</span>总监<span class="token punctuation">,</span> request2<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    zhongjingli<span class="token punctuation">.</span><span class="token function">GetResult</span><span class="token punctuation">(</span>ManagerLevel<span class="token punctuation">.</span>总经理<span class="token punctuation">,</span> request2<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    Console<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="模式动机"><a href="#%E6%A8%A1%E5%BC%8F%E5%8A%A8%E6%9C%BA" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式动机</h3>\n<ul>\n<li>职责链可以是一条直线、一个环或者一个树形结构，最常见的职责链是直线型，即沿着一条单向的链来传递请求。</li>\n<li>链上的每一个对象都是请求处理者，职责链模式可以将请求的处理者组织成一条链，并使请求沿着链传递，由链上的处理者对请求进行相应的处理。</li>\n<li>客户端无须关心请求的处理细节以及请求的传递，只需将请求发送到链上即可，将请求的发送者和请求的处理者解耦。这就是职责链模式的模式动机。</li>\n</ul>\n<h3 id="模式定义"><a href="#%E6%A8%A1%E5%BC%8F%E5%AE%9A%E4%B9%89" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式定义</h3>\n<p>避免请求发送者与接收者耦合在一起，让多个对象都有可能接收请求，将这些对象连接成一条链，并且沿着这条链传递请求，直到有对象处理它为止。职责链模式又称为责任链模式，它是一种对象行为型模式。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180417152941-8b917bcb0053f819485eba7d5f4ed77f-6eb27.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 757px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 73.05151915455747%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsSAAALEgHS3X78AAACcElEQVQ4y5VUS4hSYRS+D5WIQje2CYxm0yZ3QbgcaBUD4WK2iiC0EsR9NuNYRIQwQRAudCGIbmwhooHmNEK+wwcKiuILnzg+ESTQ2zl37hVnhiH74PKf+5/zn/875zv3EsQWGIbZrLxNkqRAJpOJpFKpCF75R0DsCj4RBzx4l7NJhUJB4colpf+ZrFar4QEikUg8m8/n56VSKRyJRM7G43G02Wy+27pQsFPCfD7PBsXj8ZdwkJnNZsxoNEKTKZfLJXDdk0gkQrFYfIdjehM2m227dyzDaDS6XywWF4VCYTwYDMbA9g+s39CXyWRouJiN9/l8hNvtZnMg7Hb7ZQlGo5FSqVS0TqdDhqTJZLofCoUeu1wuhcPheAUt2HM6nQ/xkFqtpvV6Pa1UKmlevG0xeQi5vlCcTW0VsSlNLpfzYvDC3BRzOp3+TKVS4X6/fzYcDr9DGQ+y2awcyox1u91wOp3+ATHJer3+CeNBnLeLxSIG+6FcLheeTCa/IH4ffSAiRTDX4PV696DEF2iv1+vNPiT6jYeq1WoQ31er1cYHvdagr1Kp0EQsFjuGm47b7bYJxuaNx+MRBwKBR8D6A6h9Ansn4PsIIqnxEMQfwv57YHjUarWO4CIzEHjKCUYS/wMom7rNB8kvjV6vR2k0GhH0EFVj5zCZTD6B+fvSaDROYYQ+X1xcfIVyXqNvuVxiHKnVakUWi0WIowYMWWYQf1VlGBtciWAweADNZkAUdrgRwOAcfWazWcRNgejaNFwB3kAZDAY2od/vPwDmm2SITqcTRp/VauXHitrlx0Byn95zSJgFlnEoNwrlF6F/p9tf0234C+8WuVQXUadxAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180417152941" title="" data-src="/static/微信截图_20180417152941-8b917bcb0053f819485eba7d5f4ed77f-6eb27.png" data-srcset="/static/微信截图_20180417152941-8b917bcb0053f819485eba7d5f4ed77f-a550b.png 200w,\n/static/微信截图_20180417152941-8b917bcb0053f819485eba7d5f4ed77f-80d9e.png 400w,\n/static/微信截图_20180417152941-8b917bcb0053f819485eba7d5f4ed77f-6eb27.png 757w" data-sizes="(max-width: 757px) 100vw, 757px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="92701262599330740000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`//管理者\nabstract class Manager\n{\n    protected string name;\n    //管理者的上级\n    protected Manager superior;\n\n    public Manager(string name)\n    {\n        this.name = name;\n    }\n\n    //设置管理者的上级\n    public void SetSuperior(Manager superior)\n    {\n        this.superior = superior;\n    }\n\n    //申请请求\n    abstract public void RequestApplications(Request request);\n}\nclass CommonManager : Manager    //经理\n{\n    public CommonManager(string name) : base(name)\n    { }\n    public override void RequestApplications(Request request)\n    {\n        if (request.RequestType == &quot;请假&quot; && request.Number <= 2)\n        {\n        Console.WriteLine(&quot;{0}:{1} 数量{2} 被批准&quot;, name, request.RequestContent, request.Number);\n        }\n        else\n        {\n            if (superior != null)\n                superior.RequestApplications(request);\n        }\n    }\n}\nclass Majordomo : Manager  //总监\n{\n    public Majordomo(string name) : base(name)\n    { }\n    public override void RequestApplications(Request request)\n    {\n        if (request.RequestType == &quot;请假&quot; && request.Number <= 5)\n        {\n        Console.WriteLine(&quot;{0}:{1} 数量{2} 被批准&quot;, name, request.RequestContent, request.Number);\n        }\n        else\n        {\n            if (superior != null)\n                superior.RequestApplications(request);\n        }\n    }\n}\nclass GeneralManager : Manager    //总经理\n{\n    public GeneralManager(string name) : base(name)\n    { }\n    public override void RequestApplications(Request request)\n    {\n        if (request.RequestType == &quot;请假&quot;)\n        {\n        Console.WriteLine(&quot;{0}:{1} 数量{2} 被批准&quot;, name, request.RequestContent, request.Number);\n        }\n        else if (request.RequestType == &quot;加薪&quot; && request.Number <= 500)\n        {\n        Console.WriteLine(&quot;{0}:{1} 数量{2} 被批准&quot;, name, request.RequestContent, request.Number);\n        }\n        else if (request.RequestType == &quot;加薪&quot; && request.Number > 500)\n        {\n        Console.WriteLine(&quot;{0}:{1} 数量{2} 再说吧&quot;, name, request.RequestContent, request.Number);\n        }\n    }\n}\nstatic void Main(string[] args)\n{\n    CommonManager jinli = new CommonManager(&quot;金利&quot;);\n    Majordomo zongjian = new Majordomo(&quot;宗剑&quot;);\n    GeneralManager zhongjingli = new GeneralManager(&quot;钟精励&quot;);\n    jinli.SetSuperior(zongjian);\n    zongjian.SetSuperior(zhongjingli);\n\n    Request request = new Request();\n    request.RequestType = &quot;请假&quot;;\n    request.RequestContent = &quot;张三请假&quot;;\n    request.Number = 1;\n    jinli.RequestApplications(request);\n\n    Request request3 = new Request();\n    request3.RequestType = &quot;加薪&quot;;\n    request3.RequestContent = &quot;张三请求加薪&quot;;\n    request3.Number = 500;\n    jinli.RequestApplications(request3);\n\n    Console.Read();\n}`, `92701262599330740000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="cpp"\n              >\n                <span class="gatsby-code-button-language">cpp</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="cpp"><pre style="counter-reset: linenumber NaN" class="language-cpp line-numbers"><code class="language-cpp"><span class="token comment">//管理者</span>\nabstract <span class="token keyword">class</span> <span class="token class-name">Manager</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">protected</span> string name<span class="token punctuation">;</span>\n    <span class="token comment">//管理者的上级</span>\n    <span class="token keyword">protected</span> Manager superior<span class="token punctuation">;</span>\n\n    <span class="token keyword">public</span> <span class="token function">Manager</span><span class="token punctuation">(</span>string name<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token comment">//设置管理者的上级</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">SetSuperior</span><span class="token punctuation">(</span>Manager superior<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">this</span><span class="token punctuation">.</span>superior <span class="token operator">=</span> superior<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token comment">//申请请求</span>\n    abstract <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">RequestApplications</span><span class="token punctuation">(</span>Request request<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">class</span> <span class="token class-name">CommonManager</span> <span class="token operator">:</span> Manager    <span class="token comment">//经理</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token function">CommonManager</span><span class="token punctuation">(</span>string name<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">base</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span> <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> override <span class="token keyword">void</span> <span class="token function">RequestApplications</span><span class="token punctuation">(</span>Request request<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">if</span> <span class="token punctuation">(</span>request<span class="token punctuation">.</span>RequestType <span class="token operator">==</span> <span class="token string">"请假"</span> <span class="token operator">&amp;&amp;</span> request<span class="token punctuation">.</span>Number <span class="token operator">&lt;=</span> <span class="token number">2</span><span class="token punctuation">)</span>\n        <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"{0}:{1} 数量{2} 被批准"</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> request<span class="token punctuation">.</span>RequestContent<span class="token punctuation">,</span> request<span class="token punctuation">.</span>Number<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n        <span class="token keyword">else</span>\n        <span class="token punctuation">{</span>\n            <span class="token keyword">if</span> <span class="token punctuation">(</span>superior <span class="token operator">!=</span> null<span class="token punctuation">)</span>\n                superior<span class="token punctuation">.</span><span class="token function">RequestApplications</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">class</span> <span class="token class-name">Majordomo</span> <span class="token operator">:</span> Manager  <span class="token comment">//总监</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token function">Majordomo</span><span class="token punctuation">(</span>string name<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">base</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span> <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> override <span class="token keyword">void</span> <span class="token function">RequestApplications</span><span class="token punctuation">(</span>Request request<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">if</span> <span class="token punctuation">(</span>request<span class="token punctuation">.</span>RequestType <span class="token operator">==</span> <span class="token string">"请假"</span> <span class="token operator">&amp;&amp;</span> request<span class="token punctuation">.</span>Number <span class="token operator">&lt;=</span> <span class="token number">5</span><span class="token punctuation">)</span>\n        <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"{0}:{1} 数量{2} 被批准"</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> request<span class="token punctuation">.</span>RequestContent<span class="token punctuation">,</span> request<span class="token punctuation">.</span>Number<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n        <span class="token keyword">else</span>\n        <span class="token punctuation">{</span>\n            <span class="token keyword">if</span> <span class="token punctuation">(</span>superior <span class="token operator">!=</span> null<span class="token punctuation">)</span>\n                superior<span class="token punctuation">.</span><span class="token function">RequestApplications</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">class</span> <span class="token class-name">GeneralManager</span> <span class="token operator">:</span> Manager    <span class="token comment">//总经理</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token function">GeneralManager</span><span class="token punctuation">(</span>string name<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">base</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span> <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> override <span class="token keyword">void</span> <span class="token function">RequestApplications</span><span class="token punctuation">(</span>Request request<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">if</span> <span class="token punctuation">(</span>request<span class="token punctuation">.</span>RequestType <span class="token operator">==</span> <span class="token string">"请假"</span><span class="token punctuation">)</span>\n        <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"{0}:{1} 数量{2} 被批准"</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> request<span class="token punctuation">.</span>RequestContent<span class="token punctuation">,</span> request<span class="token punctuation">.</span>Number<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>request<span class="token punctuation">.</span>RequestType <span class="token operator">==</span> <span class="token string">"加薪"</span> <span class="token operator">&amp;&amp;</span> request<span class="token punctuation">.</span>Number <span class="token operator">&lt;=</span> <span class="token number">500</span><span class="token punctuation">)</span>\n        <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"{0}:{1} 数量{2} 被批准"</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> request<span class="token punctuation">.</span>RequestContent<span class="token punctuation">,</span> request<span class="token punctuation">.</span>Number<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>request<span class="token punctuation">.</span>RequestType <span class="token operator">==</span> <span class="token string">"加薪"</span> <span class="token operator">&amp;&amp;</span> request<span class="token punctuation">.</span>Number <span class="token operator">></span> <span class="token number">500</span><span class="token punctuation">)</span>\n        <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"{0}:{1} 数量{2} 再说吧"</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> request<span class="token punctuation">.</span>RequestContent<span class="token punctuation">,</span> request<span class="token punctuation">.</span>Number<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Main</span><span class="token punctuation">(</span>string<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    CommonManager jinli <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">CommonManager</span><span class="token punctuation">(</span><span class="token string">"金利"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    Majordomo zongjian <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Majordomo</span><span class="token punctuation">(</span><span class="token string">"宗剑"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    GeneralManager zhongjingli <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">GeneralManager</span><span class="token punctuation">(</span><span class="token string">"钟精励"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    jinli<span class="token punctuation">.</span><span class="token function">SetSuperior</span><span class="token punctuation">(</span>zongjian<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    zongjian<span class="token punctuation">.</span><span class="token function">SetSuperior</span><span class="token punctuation">(</span>zhongjingli<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    Request request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    request<span class="token punctuation">.</span>RequestType <span class="token operator">=</span> <span class="token string">"请假"</span><span class="token punctuation">;</span>\n    request<span class="token punctuation">.</span>RequestContent <span class="token operator">=</span> <span class="token string">"张三请假"</span><span class="token punctuation">;</span>\n    request<span class="token punctuation">.</span>Number <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>\n    jinli<span class="token punctuation">.</span><span class="token function">RequestApplications</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    Request request3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    request3<span class="token punctuation">.</span>RequestType <span class="token operator">=</span> <span class="token string">"加薪"</span><span class="token punctuation">;</span>\n    request3<span class="token punctuation">.</span>RequestContent <span class="token operator">=</span> <span class="token string">"张三请求加薪"</span><span class="token punctuation">;</span>\n    request3<span class="token punctuation">.</span>Number <span class="token operator">=</span> <span class="token number">500</span><span class="token punctuation">;</span>\n    jinli<span class="token punctuation">.</span><span class="token function">RequestApplications</span><span class="token punctuation">(</span>request3<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    Console<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="模式结构"><a href="#%E6%A8%A1%E5%BC%8F%E7%BB%93%E6%9E%84" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式结构</h3>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180417153731-094d9f100788ae484a9e8574492c39ef-38a1d.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 779px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 51.732991014120664%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAAB6ElEQVQoz41SO4saURSenbuGbEKakM7Ypdm0uxgmkaRftAghRLLpUmwv+QtpLaKVhYiIQgRFBYtVLMRCxTfiIwo+8BF8FDNuYzDefGeYBKeRHBjO5Z7vfPOd812h2+2yRqPBtHwiIKrVKiUhnU4Lw+GQTSYTFgqFmNPpNLjdboPFYhFRPmGMqVk4FrlcTgV4vd5jMNFoNN5Dpu++rgJlbyuVir3T6XxqtVpP6Y5zrpIWCoWHUPd+PB7bg8HgDTD25XL5sVarPdZwlAw6wsFgcDedTrksyxyjXtOdw+F4QNnv9z8HGV8sFrzdbvP1es0pksnkZ6qbzeYzjK1XOBqNfm42mx0R4s/v6C4Wi9EoQiQSeVYqle6g/Hev1/uFH28VReGpVOoD1X0+HzOZTPplAHwJUqnf779E8xNNNaNx8vn8GZRJqL9IJBJfyuXy69ls9gq4R4SDYWKxWBSxNvFgBf8dp8eK/8jq9brYbDYZnbPZ7Hk8HrcFAoErl8tlDYfDVrj+RpIkEQ2qikwmcxmNRm14BVaPx3MFjA19FzpSSD/VRv1GS1+tVnw+n/Ptdkv5hwYWNWxiv99zuK1idrsdh3G3h69DgBkqIXbzFc+EY2cyskJNMCJ/SIiXECDnQawAI5OZOH//S/gHjlRSSpP/y24AAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180417153731" title="" data-src="/static/微信截图_20180417153731-094d9f100788ae484a9e8574492c39ef-38a1d.png" data-srcset="/static/微信截图_20180417153731-094d9f100788ae484a9e8574492c39ef-ac764.png 200w,\n/static/微信截图_20180417153731-094d9f100788ae484a9e8574492c39ef-d0cc7.png 400w,\n/static/微信截图_20180417153731-094d9f100788ae484a9e8574492c39ef-38a1d.png 779w" data-sizes="(max-width: 779px) 100vw, 779px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<ul>\n<li>Handler: 抽象处理者</li>\n<li>ConcreteHandler: 具体处理者</li>\n<li>Client: 客户类</li>\n</ul>\n<h3 id="职责链模式和状态模式比较"><a href="#%E8%81%8C%E8%B4%A3%E9%93%BE%E6%A8%A1%E5%BC%8F%E5%92%8C%E7%8A%B6%E6%80%81%E6%A8%A1%E5%BC%8F%E6%AF%94%E8%BE%83" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>职责链模式和状态模式比较</h3>\n<ul>\n<li>当客户提交一个请求时，请求是沿链传递直至有一个 ConcreteHander 对象负责处理它。链中的对象自己并不知道链的结构，在运行时确定。结果是职责链可简化对象的相互连接，它们仅需保持一个指向其后继者的引用或指针，而不需要保持它所有的候选接受者。这也就大大降低了耦合度了。也就是说，我们可以随时地增加或修改处理一个请求的结构。增强了给对象指派职责的灵活性。</li>\n<li>状态模式主要解决的是当控制一个对象状态转换的条件表达式过于复杂的情况。把状态的判断逻辑转移到表示不同状态的一系列类当中，可以把复杂的判断逻辑简化。定义新的子类可以很容易地增加新的状态和转换。这样做的目的是为了消除庞大的条件分支语句。状态模式通过把各种状态转移逻辑分布到 State 的子类之间，来减少相互间的依赖。</li>\n<li>职责链模式与状态模式的最大的不同是设置自己的下一级的问题上，状态模式是在类的设计阶段就定好的，不能在客户端改变，而职责链的下一级是在客户端自己来确定的。</li>\n<li>职责链模式注重职责的传递，由客户端配置；状态模式注重对象状态的转换，转换过程对客户端是透明的。</li>\n</ul>\n<p>请假例子，找班长请假，班长只能请半天，否则班长向老师申请，如果请假时间超过一周，老师要跟副年级主任请示，如果请假超出一个月，主任要跟年级正主任请示，然后被批准，或不被批准。</p>\n<p>问题：如果班长请假了，用状态模式，其他学生都请不了假了，也就是如果状态模式中任何一环缺失的话，这个事件都无法进行下去</p>\n<p>职责链模式的链式是在客户端连接的，也就是说，如果我们请假，请假制度一旦改变，比如说我们不需要班长，或者是先请求老师后直接请求主任或者中间多了一个环节，都是很容易实现的，所以，职责链模式要比状态模式灵活很多。</p>\n<h3 id="优缺点"><a href="#%E4%BC%98%E7%BC%BA%E7%82%B9" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>优缺点</h3>\n<ul>\n<li>\n<p>优点</p>\n<ul>\n<li>降低耦合度</li>\n<li>可简化对象的相互连接</li>\n<li>增强给对象指派职责的灵活性</li>\n<li>增加新的请求处理类很方便</li>\n</ul>\n</li>\n<li>\n<p>缺点</p>\n<ul>\n<li>不能保证请求一定被接收。</li>\n<li>系统性能将受到一定影响，而且在进行代码调试时不太方便；可能会造成循环调用。</li>\n</ul>\n</li>\n</ul>\n<h3 id="模式使用"><a href="#%E6%A8%A1%E5%BC%8F%E4%BD%BF%E7%94%A8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式使用</h3>\n<ul>\n<li>有多个对象可以处理同一个请求，具体哪个对象处理该请求由运行时刻自动确定。</li>\n<li>在不明确指定接收者的情况下，向多个对象中的一个提交一个请求。</li>\n<li>可动态指定一组对象处理请求</li>\n</ul>\n<h3 id="模式应用"><a href="#%E6%A8%A1%E5%BC%8F%E5%BA%94%E7%94%A8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式应用</h3>\n<p><strong>异常处理机制</strong></p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="76094246741733430000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`try\n{\n    ……\n}\ncatch(ArrayIndexOutOfBoundsException e1)\n{\n    ……\n}\ncatch(ArithmeticException e2)\n{\n    ……\n}\ncatch(IOException e3)\n{\n    ……\n}\nfinally\n{\n    ……\n}`, `76094246741733430000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="java"\n              >\n                <span class="gatsby-code-button-language">java</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="java"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token keyword">try</span>\n<span class="token punctuation">{</span>\n    ……\n<span class="token punctuation">}</span>\n<span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">ArrayIndexOutOfBoundsException</span> e1<span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    ……\n<span class="token punctuation">}</span>\n<span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">ArithmeticException</span> e2<span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    ……\n<span class="token punctuation">}</span>\n<span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">IOException</span> e3<span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    ……\n<span class="token punctuation">}</span>\n<span class="token keyword">finally</span>\n<span class="token punctuation">{</span>\n    ……\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="纯与不纯的职责链模式"><a href="#%E7%BA%AF%E4%B8%8E%E4%B8%8D%E7%BA%AF%E7%9A%84%E8%81%8C%E8%B4%A3%E9%93%BE%E6%A8%A1%E5%BC%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>纯与不纯的职责链模式</h3>\n<ul>\n<li>一个纯的职责链模式要求一个具体处理者对象只能在两个行为中选择一个：一个是承担责任，另一个是把责任推给下家。不允许出现某一个具体处理者对象在承担了一部分责任后又将责任向下传的情况。</li>\n<li>在一个纯的职责链模式里面，一个请求必须被某一个处理者对象所接收；在一个不纯的职责链模式里面，一个请求可以最终不被任何接收端对象所接收。</li>\n</ul>\n<h2 id="命令模式command"><a href="#%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%BC%8Fcommand" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>命令模式(Command)</h2>\n<p>将一个请求封装为一个对象，从而使你可用不同的请求对客户进行参数化；对请求排队或记录请求日志,以及支持可撤消的操作。</p>\n<h3 id="模式背景-1"><a href="#%E6%A8%A1%E5%BC%8F%E8%83%8C%E6%99%AF-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式背景</h3>\n<p>去烧烤店吃烧烤, 如果客人直接和烧烤的伙计打交道, 则烧烤的伙计将直接面对各种各样的客户各种各样的需求,各种各样的口味, 而且有的客人会因为等不及而走掉,但是伙计却不知道…最后烧烤伙计手忙脚乱.</p>\n<p>那么，我们增加一个服务员，负责接待客户，那么客人将向服务员点菜；服务员手中拿着烧烤订单纸，客人只要把自己想要的东西写上，并注明需要的口味，服务员需按客人点餐的顺序把订单放在烧烤伙计的窗台上；如果有客人退单了，那么她只需要把订单抽掉就行了；烧烤伙计则只需要看订单安心做烧烤就行了.</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180417155546-fbace773777ab0f8409be82077616b29-28530.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 39.52333664349553%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAAA5ElEQVQY012QiQqEMBBD+/+/qCCoeN/33X00srAbsKRpZiajGcexruskSSDruj7Pc9/3NE1VVYVh2Pc9urV2nmc5wTAM2BBNnudlWXIWRYH1PM/jOHKHLMsQ0zS9rote8NIB/S3eto2BNIZgsg602Bx4gqPg5kpHBiDKZvjIKYfKSEU2HOgo+743TcM0lQGFgrzFGgvBx6qe5xGPzXlFieMYEYW+bB5FURAELGIUSatCUH3fPx3YhVcV0KjrOpTBQVdjf8FD27acy7IoOR0J9d1LSfV3/osFylhkd9Cfgygdpzi2DwbEzDAD8/qpAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180417155546" title="" data-src="/static/微信截图_20180417155546-fbace773777ab0f8409be82077616b29-fee1c.png" data-srcset="/static/微信截图_20180417155546-fbace773777ab0f8409be82077616b29-a67b7.png 200w,\n/static/微信截图_20180417155546-fbace773777ab0f8409be82077616b29-0b187.png 400w,\n/static/微信截图_20180417155546-fbace773777ab0f8409be82077616b29-fee1c.png 800w,\n/static/微信截图_20180417155546-fbace773777ab0f8409be82077616b29-28530.png 1007w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h3 id="模式动机-1"><a href="#%E6%A8%A1%E5%BC%8F%E5%8A%A8%E6%9C%BA-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式动机</h3>\n<p>在软件设计中，我们经常需要向某些对象发送请求，但是并不知道请求的接收者是谁，也不知道被请求的操作是哪个，我们只需在程序运行时指定具体的请求接收者即可，此时，可以使用命令模式来进行设计，使得请求发送者与请求接收者消除彼此之间的耦合，让对象之间的调用关系更加灵活。</p>\n<h3 id="模式定义-1"><a href="#%E6%A8%A1%E5%BC%8F%E5%AE%9A%E4%B9%89-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式定义</h3>\n<p>将一个请求封装为一个对象，从而使我们可用不同的请求对客户进行参数化；对请求排队或者记录请求日志，以及支持可撤销的操作。命令模式是一种对象行为型模式，其别名为动作(Action)模式或事务(Transaction)模式。</p>\n<h3 id="模式结构-1"><a href="#%E6%A8%A1%E5%BC%8F%E7%BB%93%E6%9E%84-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式结构</h3>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180417160505-f9d6e96ea485121e086502c784e35a59-50b07.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 37.5886524822695%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABn0lEQVQoz51ROWgCURBdD4KChYWkSxFiytiFQJrtUqUUc2Eg2wlJZ5lOCKS2tBI2ICybbDaIyBaL4AFeiCceCB6IJwhio+jPzLILBpImA3/n739v3p//hhoMBl/1ep2fz+dyt9u9otSoVCqns9mMg/zWbDZDsA+Gw+FDxARB2J9Op8FGoxFKp9MsYGKr1TpTCgnEarXCRNrt9qsmWCqVbslObDYbwnHcBWJ+v9+xWCzIbi1ceq8Udjqdh16v54YbPNVq1aEJZrNZO5w/DYdDDy7gMZIkWRCLx+MW6IwpFArPtVrtpd/vPxaLRTv1nwgEArq/MHiVnvL5fHs8zxu9Xq8ZD1OplA08dSYSCWc+n7+GvSuTydhUexQxODNDh8i5iUajrmQy6c7lcgeasAE/NE0rgrIsX6In6NF6vSbb7ZbAU2nEGIZROPB/NB6PyXK5JJPJRPEQ7Ln7ISiKok4ln4Avn0B4h+kJ4A8fi8WOEWNZVuFGIhEbTD8EQxRHo9EHeCyVy+VzTdCoihqsVivm3zzSq5jBZDJh1v/mITRKfQNfahrriPyDBAAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180417160505" title="" data-src="/static/微信截图_20180417160505-f9d6e96ea485121e086502c784e35a59-fee1c.png" data-srcset="/static/微信截图_20180417160505-f9d6e96ea485121e086502c784e35a59-a67b7.png 200w,\n/static/微信截图_20180417160505-f9d6e96ea485121e086502c784e35a59-0b187.png 400w,\n/static/微信截图_20180417160505-f9d6e96ea485121e086502c784e35a59-fee1c.png 800w,\n/static/微信截图_20180417160505-f9d6e96ea485121e086502c784e35a59-50b07.png 987w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<ul>\n<li>Command: 抽象命令类</li>\n<li>ConcreteCommand: 具体命令类</li>\n<li>Invoker: 调用者</li>\n<li>Receiver: 接收者</li>\n<li>Client:客户类</li>\n</ul>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="44420311234426290000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`//烤肉串者\npublic class Barbecuer\n{\n    public void BakeMutton()\n    {\n        Console.WriteLine(&quot;烤羊肉串!&quot;);\n    }\n\n    public void BakeChickenWing()\n    {\n        Console.WriteLine(&quot;烤鸡翅!&quot;);\n    }\n}\n//抽象命令\npublic abstract class Command\n{\n    protected Barbecuer receiver;\n\n    public Command(Barbecuer receiver)\n    {\n        this.receiver = receiver;\n    }\n\n    //执行命令\n    abstract public void ExcuteCommand();\n}\n\n//烤羊肉串命令\nclass BakeMuttonCommand : Command\n{\n    public BakeMuttonCommand(Barbecuer receiver) : base(receiver)\n    { }\n\n    public override void ExcuteCommand()\n    {\n        receiver.BakeMutton();\n    }\n}\n\n//服务员\npublic class Waiter\n{\n    private Command command;\n\n    //设置订单\n    public void SetOrder(Command command)\n    {\n        this.command = command;\n    }\n    //通知执行\n    public void Notify()\n    {\n        command.ExcuteCommand();\n    }\n}\n\nstatic void Main(string[] args)\n{\n    //开店前的准备\n    Barbecuer boy = new Barbecuer();\n    Command bakeMuttonCommand1 = new BakeMuttonCommand(boy);\n    Command bakeMuttonCommand2 = new BakeMuttonCommand(boy);\n    Command bakeChickenWingCommand1 = new BakeChickenWingCommand(boy);\n    Waiter girl = new Waiter();\n\n    //开门营业\n    girl.SetOrder(bakeMuttonCommand1);\n    girl.Notify();\n    girl.SetOrder(bakeMuttonCommand2);\n    girl.Notify();\n    girl.SetOrder(bakeChickenWingCommand1);\n    girl.Notify();\n\n    Console.Read();\n\n}`, `44420311234426290000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="cpp"\n              >\n                <span class="gatsby-code-button-language">cpp</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="cpp"><pre style="counter-reset: linenumber NaN" class="language-cpp line-numbers"><code class="language-cpp"><span class="token comment">//烤肉串者</span>\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Barbecuer</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">BakeMutton</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"烤羊肉串!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">BakeChickenWing</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"烤鸡翅!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token comment">//抽象命令</span>\n<span class="token keyword">public</span> abstract <span class="token keyword">class</span> <span class="token class-name">Command</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">protected</span> Barbecuer receiver<span class="token punctuation">;</span>\n\n    <span class="token keyword">public</span> <span class="token function">Command</span><span class="token punctuation">(</span>Barbecuer receiver<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">this</span><span class="token punctuation">.</span>receiver <span class="token operator">=</span> receiver<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token comment">//执行命令</span>\n    abstract <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">ExcuteCommand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">//烤羊肉串命令</span>\n<span class="token keyword">class</span> <span class="token class-name">BakeMuttonCommand</span> <span class="token operator">:</span> Command\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token function">BakeMuttonCommand</span><span class="token punctuation">(</span>Barbecuer receiver<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">base</span><span class="token punctuation">(</span>receiver<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span> <span class="token punctuation">}</span>\n\n    <span class="token keyword">public</span> override <span class="token keyword">void</span> <span class="token function">ExcuteCommand</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        receiver<span class="token punctuation">.</span><span class="token function">BakeMutton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">//服务员</span>\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Waiter</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">private</span> Command command<span class="token punctuation">;</span>\n\n    <span class="token comment">//设置订单</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">SetOrder</span><span class="token punctuation">(</span>Command command<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">this</span><span class="token punctuation">.</span>command <span class="token operator">=</span> command<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token comment">//通知执行</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        command<span class="token punctuation">.</span><span class="token function">ExcuteCommand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Main</span><span class="token punctuation">(</span>string<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    <span class="token comment">//开店前的准备</span>\n    Barbecuer boy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Barbecuer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    Command bakeMuttonCommand1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">BakeMuttonCommand</span><span class="token punctuation">(</span>boy<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    Command bakeMuttonCommand2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">BakeMuttonCommand</span><span class="token punctuation">(</span>boy<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    Command bakeChickenWingCommand1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">BakeChickenWingCommand</span><span class="token punctuation">(</span>boy<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    Waiter girl <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Waiter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token comment">//开门营业</span>\n    girl<span class="token punctuation">.</span><span class="token function">SetOrder</span><span class="token punctuation">(</span>bakeMuttonCommand1<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    girl<span class="token punctuation">.</span><span class="token function">Notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    girl<span class="token punctuation">.</span><span class="token function">SetOrder</span><span class="token punctuation">(</span>bakeMuttonCommand2<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    girl<span class="token punctuation">.</span><span class="token function">Notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    girl<span class="token punctuation">.</span><span class="token function">SetOrder</span><span class="token punctuation">(</span>bakeChickenWingCommand1<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    girl<span class="token punctuation">.</span><span class="token function">Notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    Console<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="优缺点-1"><a href="#%E4%BC%98%E7%BC%BA%E7%82%B9-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>优缺点</h3>\n<ul>\n<li>\n<p>优点</p>\n<ul>\n<li>降低系统的耦合度。</li>\n<li>新的命令可以很容易地加入到系统中。</li>\n<li>可以比较容易地设计一个命令队列和宏命令（组合命令）。</li>\n<li>可以方便地实现对请求的 Undo 和 Redo。</li>\n</ul>\n</li>\n<li>\n<p>缺点</p>\n<ul>\n<li>使用命令模式可能会导致某些系统有过多的具体命令类。因为针对每一个命令都需要设计一个具体命令类，因此某些系统可能需要大量具体命令类，这将影响命令模式的使用。</li>\n</ul>\n</li>\n</ul>\n<h3 id="模式使用-1"><a href="#%E6%A8%A1%E5%BC%8F%E4%BD%BF%E7%94%A8-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式使用</h3>\n<ul>\n<li>系统需要将请求调用者和请求接收者解耦，使得调用者和接收者不直接交互。</li>\n<li>系统需要在不同的时间指定请求、将请求排队和执行请求。</li>\n<li>系统需要支持命令的撤销(Undo)操作和恢复(Redo)操作。</li>\n<li>系统需要将一组操作组合在一起，即支持宏命令。</li>\n</ul>\n<h2 id="迭代器模式iterator"><a href="#%E8%BF%AD%E4%BB%A3%E5%99%A8%E6%A8%A1%E5%BC%8Fiterator" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>迭代器模式(Iterator)</h2>\n<p>提供一种方法顺序访问一个聚合对象中各个元素，而又不暴露该对象的内部表示。</p>\n<h3 id="模式背景-2"><a href="#%E6%A8%A1%E5%BC%8F%E8%83%8C%E6%99%AF-2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式背景</h3>\n<p>每个人都要买车票</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="37393050393463900000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`static void Main(string[] args)\n{\n    ArrayList a = new ArrayList() ;\n    a.Add(&quot;大鸟&quot;);\n    a.Add(&quot;小菜&quot;);\n    a.Add(&quot;行李&quot;);\n    a.Add(&quot;老外&quot;);\n    a.Add(&quot;公交内部员工&quot;);\n    a.Add(“小朋友&quot;);\n\n    foreach (string item in a)\n    {\n        Console.WriteLine(&quot;{0} 请买车票!&quot;, item);\n    }\n    Console.Read();\n}`, `37393050393463900000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="cpp"\n              >\n                <span class="gatsby-code-button-language">cpp</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="cpp"><pre style="counter-reset: linenumber NaN" class="language-cpp line-numbers"><code class="language-cpp"><span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Main</span><span class="token punctuation">(</span>string<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    ArrayList a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>\n    a<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"大鸟"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    a<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"小菜"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    a<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"行李"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    a<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"老外"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    a<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"公交内部员工"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    a<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>“小朋友"<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    foreach <span class="token punctuation">(</span>string item in a<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"{0} 请买车票!"</span><span class="token punctuation">,</span> item<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    Console<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="模式动机-2"><a href="#%E6%A8%A1%E5%BC%8F%E5%8A%A8%E6%9C%BA-2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式动机</h3>\n<ul>\n<li>一个聚合对象，如一个列表(List)或者一个集合(Set)，应该提供一种方法来让别人可以访问它的元素，而又不需要暴露它的内部结构。</li>\n<li>针对不同的需要，可能还要以不同的方式遍历整个聚合对象，但是我们并不希望在聚合对象的抽象层接口中充斥着各种不同遍历的操作。</li>\n<li>怎样遍历一个聚合对象，又不需要了解聚合对象的内部结构，还能够提供多种不同的遍历方式，这就是迭代器模式所要解决的问题。</li>\n<li>在迭代器模式中，提供一个外部的迭代器来对聚合对象进行访问和遍历，迭代器定义了一个访问该聚合元素的接口，并且可以跟踪当前遍历的元素，了解哪些元素已经遍历过而哪些没有。</li>\n<li>有了迭代器模式，我们会发现对一个复杂的聚合对象的操作会变得如此简单。</li>\n</ul>\n<h3 id="模式定义-2"><a href="#%E6%A8%A1%E5%BC%8F%E5%AE%9A%E4%B9%89-2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式定义</h3>\n<p>提供一种方法来访问聚合对象，而不用暴露这个对象的内部表示，其别名为游标(Cursor)。迭代器模式是一种对象行为型模式。</p>\n<h3 id="模式结构-2"><a href="#%E6%A8%A1%E5%BC%8F%E7%BB%93%E6%9E%84-2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式结构</h3>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180417162005-30a1aeea2a7dd5c2ec0f75889c3dafc7-8945d.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 43.27354260089686%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAABw0lEQVQoz4VRSUtCURR+Lxto0a52QWQO0Npf0KJFJQluau1O2rgwoRYZuAkE3bQIQniJBVLUOgQRFBQnHHAWUZxBccIRvJ0j74lE0oHz3uF89/vuPeejqD9iPB7T1JIIBAJ7+Xz+JhQKqVwulwrq22QyeYIYIYSmEomExW63m+Px+GulUnmyWq3bCGYymUvIDxBggGSJRqMC7MdisVMgkl6vR5rNJpakUCh8soKr+CHT6XQG9Pt9YjAYDhFMpVImshBOp/MI+zab7axUKpFOp9OFSbqIVatVEyvIo1qtFlMsFr/htrdarfbIMMwOK3jRaDSs7XbbBATG6/UKsR+JRKTkV4D41/yFGAqFYndxTwAsWyHlcDj4fr9f6/F4Htxu93O9Xr+H1cjmO1wWKIoHuPyPANgKxS5Z7fP5NLB8TTqdvjKbzVvYl8lktFgspoVCIS0QCGidTjcjBINBPhh4B6kOh8PXwNFms1np/EJ0Ctwl8HSSy+UmRqPxAEGRSLQBvzUu5XL5JvZhzPPBYEDK5fKMN5lMCAi+z02B5hTAMRhAwKCGXq/fR1AikaAQj0ulUrnOTnSMRoDQcDQaDbEGM184wR80HGfW30STyAAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180417162005" title="" data-src="/static/微信截图_20180417162005-30a1aeea2a7dd5c2ec0f75889c3dafc7-fee1c.png" data-srcset="/static/微信截图_20180417162005-30a1aeea2a7dd5c2ec0f75889c3dafc7-a67b7.png 200w,\n/static/微信截图_20180417162005-30a1aeea2a7dd5c2ec0f75889c3dafc7-0b187.png 400w,\n/static/微信截图_20180417162005-30a1aeea2a7dd5c2ec0f75889c3dafc7-fee1c.png 800w,\n/static/微信截图_20180417162005-30a1aeea2a7dd5c2ec0f75889c3dafc7-8945d.png 892w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<ul>\n<li>Iterator: 抽象迭代器</li>\n<li>ConcreteIterator: 具体迭代器</li>\n<li>Aggregate: 抽象聚合类</li>\n<li>ConcreteAggregate: 具体聚合类</li>\n</ul>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="15966222098816174000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`abstract class Iterator\n{\n    public abstract object First();\n    public abstract object Next();\n    public abstract bool IsDone();\n    public abstract object CurrentItem();\n}\nabstract class Aggregate\n{\n    public abstract Iterator CreateIterator();\n}\nclass ConcreteAggregate : Aggregate\n{\n    private IList<object> items = new List<object>();\n    public override Iterator CreateIterator()\n    {\n        return new ConcreteIterator(this);\n    }\n\n    public int Count\n    {\n        get { return items.Count; }\n    }\n\n    public object this[int index]\n    {\n        get { return items[index]; }\n        set { items.Insert(index, value); }\n    }\n}\nclass ConcreteIterator : Iterator\n{\n    private ConcreteAggregate aggregate;\n    private int current = 0;\n    public ConcreteIterator(ConcreteAggregate aggregate)\n    {\n        this.aggregate = aggregate;\n    }\n    public override object First()\n    {\n        return aggregate[0];\n    }\n    public override object Next()\n    {\n        object ret = null;\n        current++;\n        if (current < aggregate.Count)\n        {\n            ret = aggregate[current];\n        }\n        return ret;\n    }\n    public override object CurrentItem()\n    {\n        return aggregate[current];\n    }\n    public override bool IsDone()\n    {\n        return current >= aggregate.Count ? true : false;\n    }\n}\nstatic void Main(string[] args)\n{\n    ConcreteAggregate a = new ConcreteAggregate();\n    a[0] = &quot;大鸟&quot;;\n    a[1] = &quot;小菜&quot;;\n    a[2] = &quot;行李&quot;;\n    a[3] = &quot;老外&quot;;\n    a[4] = &quot;公交内部员工&quot;;\n    a[5] = &quot;小朋友&quot;;\n    Iterator i = a.CreateIterator();\n    object item = i.First();\n    while (!i.IsDone())\n    {\n        Console.WriteLine(&quot;{0} 请买车票!&quot;, i.CurrentItem());\n        i.Next();\n    }\n    Console.Read();\n}`, `15966222098816174000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="cpp"\n              >\n                <span class="gatsby-code-button-language">cpp</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="cpp"><pre style="counter-reset: linenumber NaN" class="language-cpp line-numbers"><code class="language-cpp">abstract <span class="token keyword">class</span> <span class="token class-name">Iterator</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> abstract object <span class="token function">First</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">public</span> abstract object <span class="token function">Next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">public</span> abstract <span class="token keyword">bool</span> <span class="token function">IsDone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">public</span> abstract object <span class="token function">CurrentItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\nabstract <span class="token keyword">class</span> <span class="token class-name">Aggregate</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> abstract Iterator <span class="token function">CreateIterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">class</span> <span class="token class-name">ConcreteAggregate</span> <span class="token operator">:</span> Aggregate\n<span class="token punctuation">{</span>\n    <span class="token keyword">private</span> IList<span class="token operator">&lt;</span>object<span class="token operator">></span> items <span class="token operator">=</span> <span class="token keyword">new</span> List<span class="token operator">&lt;</span>object<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">public</span> override Iterator <span class="token function">CreateIterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token function">ConcreteIterator</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">public</span> <span class="token keyword">int</span> Count\n    <span class="token punctuation">{</span>\n        get <span class="token punctuation">{</span> <span class="token keyword">return</span> items<span class="token punctuation">.</span>Count<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">public</span> object <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token keyword">int</span> index<span class="token punctuation">]</span>\n    <span class="token punctuation">{</span>\n        get <span class="token punctuation">{</span> <span class="token keyword">return</span> items<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>\n        set <span class="token punctuation">{</span> items<span class="token punctuation">.</span><span class="token function">Insert</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">class</span> <span class="token class-name">ConcreteIterator</span> <span class="token operator">:</span> Iterator\n<span class="token punctuation">{</span>\n    <span class="token keyword">private</span> ConcreteAggregate aggregate<span class="token punctuation">;</span>\n    <span class="token keyword">private</span> <span class="token keyword">int</span> current <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n    <span class="token keyword">public</span> <span class="token function">ConcreteIterator</span><span class="token punctuation">(</span>ConcreteAggregate aggregate<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">this</span><span class="token punctuation">.</span>aggregate <span class="token operator">=</span> aggregate<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> override object <span class="token function">First</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">return</span> aggregate<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> override object <span class="token function">Next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        object ret <span class="token operator">=</span> null<span class="token punctuation">;</span>\n        current<span class="token operator">++</span><span class="token punctuation">;</span>\n        <span class="token keyword">if</span> <span class="token punctuation">(</span>current <span class="token operator">&lt;</span> aggregate<span class="token punctuation">.</span>Count<span class="token punctuation">)</span>\n        <span class="token punctuation">{</span>\n            ret <span class="token operator">=</span> aggregate<span class="token punctuation">[</span>current<span class="token punctuation">]</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n        <span class="token keyword">return</span> ret<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> override object <span class="token function">CurrentItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">return</span> aggregate<span class="token punctuation">[</span>current<span class="token punctuation">]</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> override <span class="token keyword">bool</span> <span class="token function">IsDone</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">return</span> current <span class="token operator">>=</span> aggregate<span class="token punctuation">.</span>Count <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Main</span><span class="token punctuation">(</span>string<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    ConcreteAggregate a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">ConcreteAggregate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"大鸟"</span><span class="token punctuation">;</span>\n    a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"小菜"</span><span class="token punctuation">;</span>\n    a<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"行李"</span><span class="token punctuation">;</span>\n    a<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"老外"</span><span class="token punctuation">;</span>\n    a<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"公交内部员工"</span><span class="token punctuation">;</span>\n    a<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"小朋友"</span><span class="token punctuation">;</span>\n    Iterator i <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">CreateIterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    object item <span class="token operator">=</span> i<span class="token punctuation">.</span><span class="token function">First</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>i<span class="token punctuation">.</span><span class="token function">IsDone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"{0} 请买车票!"</span><span class="token punctuation">,</span> i<span class="token punctuation">.</span><span class="token function">CurrentItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        i<span class="token punctuation">.</span><span class="token function">Next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    Console<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="索引器"><a href="#%E7%B4%A2%E5%BC%95%E5%99%A8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>索引器</h3>\n<p>索引器允许类和结构的实例用下标进行访问，这种方式类似于访问数组、集合的元素，但不单单是通过下标，例如通过对象的各属性值也是可以的。索引器写在类或者结构中，其格式类似于：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="7706335948561871000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`public object this[int index]\n{\n    get { return objects[int]; }\n    set { objects[int] = value; }\n}`, `7706335948561871000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="cpp"\n              >\n                <span class="gatsby-code-button-language">cpp</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="cpp"><pre style="counter-reset: linenumber NaN" class="language-cpp line-numbers"><code class="language-cpp"><span class="token keyword">public</span> object <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token keyword">int</span> index<span class="token punctuation">]</span>\n<span class="token punctuation">{</span>\n    get <span class="token punctuation">{</span> <span class="token keyword">return</span> objects<span class="token punctuation">[</span><span class="token keyword">int</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>\n    set <span class="token punctuation">{</span> objects<span class="token punctuation">[</span><span class="token keyword">int</span><span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>索引器是特殊的属性，可以有 get、set 访问器，可以重载。object 是返回的对象类型，this 代表类或结构自己，int index 表示索引类型。这与索引器的调用格式：对象[索引]，相对应。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="45472090241750850000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`public class Car\n{\n    /// <summary>\n    /// 品牌\n    /// </summary>\n    public string Brand { get; set; }\n\n    /// <summary>\n    /// 颜色\n    /// </summary>\n    public string Color { get; set; }\n\n    /// <summary>\n    /// 覆盖object的ToString()方法\n    /// </summary>\n    /// <returns></returns>\n    public override string ToString()\n    {\n        return string.Format(&quot;A {0} {1}.&quot;, this.Color, this.Brand);\n    }\n}\npublic class Cars\n{\n    public IList<Car> List { get; set; }\n    /// <summary>\n    /// 用下标访问的索引器\n    /// </summary>\n    /// <param name=&quot;index&quot;>下标</param>\n    /// <returns>汽车</returns>\n    public Car this[int index]\n    {\n        get { return this.List[index]; }\n    }\n    /// <summary>\n    /// 用品牌访问的索引器\n    /// </summary>\n    /// <param name=&quot;brand&quot;>品牌</param>\n    /// <returns>汽车</returns>\n    public Car this[string brand]\n    {\n        get\n        {\n            for (int i = 0; i < List.Count; i+\n                if (brand.Equals(this.List[i].Brand))\n                return this.List[i];\n            return null;\n        }\n    }\n}\n\npublic static void Main(string[] args)\n{\n    Cars cars = new Cars\n    {\n        List = new List<Car>\n        {\n            new Car { Brand = &quot;BMW&quot;, Color = &quot;Black&quot; },     // 黑色宝马\n            new Car { Brand = &quot;Benz&quot;, Color = &quot;Red&quot; },      // 红色奔驰\n            new Car { Brand = &quot;Porsche&quot;, Color = &quot;Yellow&quot; } // 黄色保时捷\n        }\n    };\n\n    Console.Title = &quot;索引器&quot;;\n    Console.WriteLine(cars[0].ToString());\n    Console.WriteLine(cars[&quot;Porsche&quot;].ToString());\n\n    Console.ReadLine();\n}`, `45472090241750850000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="cpp"\n              >\n                <span class="gatsby-code-button-language">cpp</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="cpp"><pre style="counter-reset: linenumber NaN" class="language-cpp line-numbers"><code class="language-cpp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Car</span>\n<span class="token punctuation">{</span>\n    <span class="token comment">/// &lt;summary></span>\n    <span class="token comment">/// 品牌</span>\n    <span class="token comment">/// &lt;/summary></span>\n    <span class="token keyword">public</span> string Brand <span class="token punctuation">{</span> get<span class="token punctuation">;</span> set<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n\n    <span class="token comment">/// &lt;summary></span>\n    <span class="token comment">/// 颜色</span>\n    <span class="token comment">/// &lt;/summary></span>\n    <span class="token keyword">public</span> string Color <span class="token punctuation">{</span> get<span class="token punctuation">;</span> set<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n\n    <span class="token comment">/// &lt;summary></span>\n    <span class="token comment">/// 覆盖object的ToString()方法</span>\n    <span class="token comment">/// &lt;/summary></span>\n    <span class="token comment">/// &lt;returns>&lt;/returns></span>\n    <span class="token keyword">public</span> override string <span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">return</span> string<span class="token punctuation">.</span><span class="token function">Format</span><span class="token punctuation">(</span><span class="token string">"A {0} {1}."</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>Color<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>Brand<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Cars</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> IList<span class="token operator">&lt;</span>Car<span class="token operator">></span> List <span class="token punctuation">{</span> get<span class="token punctuation">;</span> set<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n    <span class="token comment">/// &lt;summary></span>\n    <span class="token comment">/// 用下标访问的索引器</span>\n    <span class="token comment">/// &lt;/summary></span>\n    <span class="token comment">/// &lt;param name="index">下标&lt;/param></span>\n    <span class="token comment">/// &lt;returns>汽车&lt;/returns></span>\n    <span class="token keyword">public</span> Car <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token keyword">int</span> index<span class="token punctuation">]</span>\n    <span class="token punctuation">{</span>\n        get <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>List<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n    <span class="token comment">/// &lt;summary></span>\n    <span class="token comment">/// 用品牌访问的索引器</span>\n    <span class="token comment">/// &lt;/summary></span>\n    <span class="token comment">/// &lt;param name="brand">品牌&lt;/param></span>\n    <span class="token comment">/// &lt;returns>汽车&lt;/returns></span>\n    <span class="token keyword">public</span> Car <span class="token keyword">this</span><span class="token punctuation">[</span>string brand<span class="token punctuation">]</span>\n    <span class="token punctuation">{</span>\n        get\n        <span class="token punctuation">{</span>\n            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> List<span class="token punctuation">.</span>Count<span class="token punctuation">;</span> i<span class="token operator">+</span>\n                <span class="token keyword">if</span> <span class="token punctuation">(</span>brand<span class="token punctuation">.</span><span class="token function">Equals</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>List<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>Brand<span class="token punctuation">)</span><span class="token punctuation">)</span>\n                <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>List<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>\n            <span class="token keyword">return</span> null<span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Main</span><span class="token punctuation">(</span>string<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    Cars cars <span class="token operator">=</span> <span class="token keyword">new</span> Cars\n    <span class="token punctuation">{</span>\n        List <span class="token operator">=</span> <span class="token keyword">new</span> List<span class="token operator">&lt;</span>Car<span class="token operator">></span>\n        <span class="token punctuation">{</span>\n            <span class="token keyword">new</span> Car <span class="token punctuation">{</span> Brand <span class="token operator">=</span> <span class="token string">"BMW"</span><span class="token punctuation">,</span> Color <span class="token operator">=</span> <span class="token string">"Black"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>     <span class="token comment">// 黑色宝马</span>\n            <span class="token keyword">new</span> Car <span class="token punctuation">{</span> Brand <span class="token operator">=</span> <span class="token string">"Benz"</span><span class="token punctuation">,</span> Color <span class="token operator">=</span> <span class="token string">"Red"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token comment">// 红色奔驰</span>\n            <span class="token keyword">new</span> Car <span class="token punctuation">{</span> Brand <span class="token operator">=</span> <span class="token string">"Porsche"</span><span class="token punctuation">,</span> Color <span class="token operator">=</span> <span class="token string">"Yellow"</span> <span class="token punctuation">}</span> <span class="token comment">// 黄色保时捷</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n    Console<span class="token punctuation">.</span>Title <span class="token operator">=</span> <span class="token string">"索引器"</span><span class="token punctuation">;</span>\n    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>cars<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>cars<span class="token punctuation">[</span><span class="token string">"Porsche"</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    Console<span class="token punctuation">.</span><span class="token function">ReadLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="优缺点-2"><a href="#%E4%BC%98%E7%BC%BA%E7%82%B9-2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>优缺点</h3>\n<ul>\n<li>\n<p>优点</p>\n<ul>\n<li>它支持以不同的方式遍历一个聚合对象。</li>\n<li>迭代器简化了聚合类。</li>\n<li>在同一个聚合上可以有多个遍历。</li>\n<li>在迭代器模式中，增加新的聚合类和迭代器类都很方便，无须修改原有代码，满足“开闭原则”的要求。</li>\n</ul>\n</li>\n<li>\n<p>缺点</p>\n<ul>\n<li>由于迭代器模式将存储数据和遍历数据的职责分离，增加新的聚合类需要对应增加新的迭代器类，类的个数成对增加，这在一定程度上增加了系统的复杂性。</li>\n</ul>\n</li>\n</ul>\n<h3 id="模式使用-2"><a href="#%E6%A8%A1%E5%BC%8F%E4%BD%BF%E7%94%A8-2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式使用</h3>\n<ul>\n<li>访问一个聚合对象的内容而无须暴露它的内部表示。</li>\n<li>需要为聚合对象提供多种遍历方式。</li>\n<li>为遍历不同的聚合结构提供一个统一的接口。</li>\n</ul>\n<h2 id="中介者模式mediator"><a href="#%E4%B8%AD%E4%BB%8B%E8%80%85%E6%A8%A1%E5%BC%8Fmediator" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>中介者模式(Mediator)</h2>\n<p>用一个中介对象来封装一系列的对象交互。中介者使各对象不需要显式地相互引用，从而使其耦合松散，而且可以独立地改变它们之间的交互。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180417165036-fc5513a4c2d2de049fd6981aea68b05b-f170f.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 55.54347826086957%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAACWklEQVQoz32TS2/TUBBG8xu7Yc8/YIPYsEQsWCCBxIIFK2ADhVIepaVVW1FSQlukhrZpGpI0ceIb24kfefhtHyZukEBIjDS6V7Lume+bGZfyPIdF5oucRxBn3Hz6iaX7z1l68JprTza5/q7Kjb1LbpVb3C63uVvRuLff5VGlwcPKBXf2O5Tmj/NF/hlJmrO8e8Ty1g4vyzXeH5yxWr3g1XGDtR/nbNR6bDdMHq/VaOy+R+2tcPzjlFIwnUAcFxn6PlmWFcBUzrZyaPc8OsqjP5ygWRMGji/3KcNxhOGMOWoN+KaNaZserYFNSfu4CufnUKuhf94iCvyFwpSe6WI6MwwvwJpGjIIUJ8rwRL2bZPhyRnGCH0bEUSz3lFLW06Beh5MTMqVDFBbAeS81w0GN5qoEOhboLBZoItAUVx4HWU4cBpgjD8ebiDsBdl88g04HLIv+hxVGjo01meKJfd1yUcO/gXZ4BfNE4UTOMM0IRGkoGSQCTGwb3ryB7W3Sr1/RhyNODRPluBhSeWBPMV1fiohlPyksj5McX6bYH7kcVmtoUnAg31vS21Jvex3WN2D1Lfq3L2RJdGVZhtJRQ7rKoitKe/YENRbwLMSY+NgJGIMuxzubNMXFUPpriINS+P0AWi0ppxMaqphuXgwlo6kNaF42aWg6TaW4HNqiyuFnXxWKNENj7+g7dX2EGWSoqQC75Z2rxZYG9w/KhNLk32sTpxn/C3fqs1M55LxvFUB9DvxnsRd/SiYF6m2Ns0aHar1N9aItVkM0c0TfsunoA5Q75eSyjyZrpWZJAfwFW0wzT63Y2O4AAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180417165036" title="" data-src="/static/微信截图_20180417165036-fc5513a4c2d2de049fd6981aea68b05b-fee1c.png" data-srcset="/static/微信截图_20180417165036-fc5513a4c2d2de049fd6981aea68b05b-a67b7.png 200w,\n/static/微信截图_20180417165036-fc5513a4c2d2de049fd6981aea68b05b-0b187.png 400w,\n/static/微信截图_20180417165036-fc5513a4c2d2de049fd6981aea68b05b-fee1c.png 800w,\n/static/微信截图_20180417165036-fc5513a4c2d2de049fd6981aea68b05b-f170f.png 920w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>系统将出现如下问题</p>\n<ul>\n<li>系统结构复杂：对象之间存在大量的相互关联和调用，若有一个对象发生变化，则需要跟踪和该对象关联的其他所有对象，并进行适当处理。</li>\n<li>对象可重用性差：由于一个对象和其他对象具有很强的关联，若没有其他对象的支持，一个对象很难被另一个系统或模块重用，这些对象表现出来更像一个不可分割的整体，职责较为混乱。</li>\n<li>系统扩展性低：增加一个新的对象需要在原有相关对象上增加引用，增加新的引用关系也需要调整原有对象，系统耦合度很高，对象操作很不灵活，扩展性差。</li>\n</ul>\n<h3 id="模式动机-3"><a href="#%E6%A8%A1%E5%BC%8F%E5%8A%A8%E6%9C%BA-3" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式动机</h3>\n<ul>\n<li>在面向对象的软件设计与开发过程中，根据“单一职责原则”，我们应该尽量将对象细化，使其只负责或呈现单一的职责。</li>\n<li>对于一个模块，可能由很多对象构成，而且这些对象之间可能存在相互的引用，为了减少对象两两之间复杂的引用关系，使之成为一个松耦合的系统，我们需要使用中介者模式，这就是中介者模式的模式动机。</li>\n</ul>\n<h3 id="模式定义-3"><a href="#%E6%A8%A1%E5%BC%8F%E5%AE%9A%E4%B9%89-3" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式定义</h3>\n<p>用一个中介对象来封装一系列的对象交互，中介者使各对象不需要显式地相互引用，从而使其耦合松散，而且可以独立地改变它们之间的交互。中介者模式又称为调停者模式，它是一种对象行为型模式。</p>\n<h3 id="模式结构-3"><a href="#%E6%A8%A1%E5%BC%8F%E7%BB%93%E6%9E%84-3" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式结构</h3>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180417165436-b4e014df0cecefe490644951bb11a578-a7643.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 42.970521541950106%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAAB0klEQVQoz31SS0tCURA+Vy9XQwsV8ge0UYLAlpdUyF8g7lu5aeG6RVsJIbJcuZAIXGSJBtHCRQiCiIr4xgc+UNBUrkmKYiKEpzmikpQNHIbzfd/MnDMzqFQqecPhsLvT6Ty3Wq0LhBDFMAylUCh4Op2OB3fkdDpFwN9VKpWnaDT62Gw2X9rt9hnhMMYoFouhlQGAZ7MZcbjRaLwBxPD5fFoulzNKpZIhGpvNtjscDvFPLSSNLOKptYTdbveqVqs9cBxH/ClCa8Xmvl6vC6DYOWhvQHPf6/UuwZ8QbjQaUYFAYKX9ZclkErEsi/4x4SZintRut0uNRqPM7XZLEomEeEmWy2XKarWKTCbTjl6vlzkcDpnH4xGTL7pcLonFYpEYDAYZ8Ntms3lr9cJisThIpVLvhULhs1qtvtI0zSe41+vdB64L5yOfz3NwvjKZzDXhcrlcEPRj4LhsNjuG+BApNE84nU7xsuHQ6DhAgsVkD/v9Pp5MJngwGCyHdks4mHie3AlOhgTbUSDbMU8YiUQ0fr9fC9XVsD4Hyy+HQiFBPB5noadH0AoWXqEFbI9woFOl02m1z+c7hnhtMBhUbew4RVGMUCgk60L/xUulUmZTrEajQd8W8zLJH2sLOwAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180417165436" title="" data-src="/static/微信截图_20180417165436-b4e014df0cecefe490644951bb11a578-fee1c.png" data-srcset="/static/微信截图_20180417165436-b4e014df0cecefe490644951bb11a578-a67b7.png 200w,\n/static/微信截图_20180417165436-b4e014df0cecefe490644951bb11a578-0b187.png 400w,\n/static/微信截图_20180417165436-b4e014df0cecefe490644951bb11a578-fee1c.png 800w,\n/static/微信截图_20180417165436-b4e014df0cecefe490644951bb11a578-a7643.png 882w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<ul>\n<li>Mediator: 抽象中介者</li>\n<li>ConcreteMediator: 具体中介者</li>\n<li>Colleague: 抽象同事类</li>\n<li>ConcreteColleague: 具体同事类</li>\n</ul>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="11204448432063584000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`abstract class Colleague\n{\n    protected Mediator mediator;\n\n    public Colleague(Mediator mediator)\n    {\n        this.mediator = mediator;\n    }\n}\nabstract class Mediator\n{\n    public abstract void Send(string message, Colleague colleague);\n}\nclass ConcreteColleague1 : Colleague\n{\n    public ConcreteColleague1(Mediator mediator) : base(mediator)\n    {\n    }\n    public void Send(string message)\n    {\n        mediator.Send(message, this);\n    }\n    public void Notify(string message)\n    {\n        Console.WriteLine(&quot;同事1得到信息:&quot; + message);\n    }\n}\nclass ConcreteColleague2 : Colleague\n{\n    public ConcreteColleague2(Mediator mediator) : base(mediator)\n    {\n    }\n    public void Send(string message)\n    {\n        mediator.Send(message, this);\n    }\n    public void Notify(string message)\n    {\n        Console.WriteLine(&quot;同事2得到信息:&quot; + message);\n    }\n}\nclass ConcreteMediator : Mediator\n{\n    private ConcreteColleague1 colleague1;\n    private ConcreteColleague2 colleague2;\n\n    public ConcreteColleague1 Colleague1\n    {\n        set { colleague1 = value; }\n    }\n\n    public ConcreteColleague2 Colleague2\n    {\n        set { colleague2 = value; }\n    }\n\n    public override void Send(string message, Colleague colleague)\n    {\n        if (colleague == colleague1)\n        {\n            colleague2.Notify(message);\n        }\n        else\n        {\n            colleague1.Notify(message);\n        }\n    }\n}\nstatic void Main(string[] args)\n{\n    ConcreteMediator m = new ConcreteMediator();\n\n    ConcreteColleague1 c1 = new ConcreteColleague1(m);\n    ConcreteColleague2 c2 = new ConcreteColleague2(m);\n\n    m.Colleague1 = c1;\n    m.Colleague2 = c2;\n\n    c1.Send(&quot;吃过饭了吗?&quot;);\n    c2.Send(&quot;没有呢，你打算请客？&quot;);\n\n    Console.Read();\n}`, `11204448432063584000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="cpp"\n              >\n                <span class="gatsby-code-button-language">cpp</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="cpp"><pre style="counter-reset: linenumber NaN" class="language-cpp line-numbers"><code class="language-cpp">abstract <span class="token keyword">class</span> <span class="token class-name">Colleague</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">protected</span> Mediator mediator<span class="token punctuation">;</span>\n\n    <span class="token keyword">public</span> <span class="token function">Colleague</span><span class="token punctuation">(</span>Mediator mediator<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">this</span><span class="token punctuation">.</span>mediator <span class="token operator">=</span> mediator<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\nabstract <span class="token keyword">class</span> <span class="token class-name">Mediator</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> abstract <span class="token keyword">void</span> <span class="token function">Send</span><span class="token punctuation">(</span>string message<span class="token punctuation">,</span> Colleague colleague<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">class</span> <span class="token class-name">ConcreteColleague1</span> <span class="token operator">:</span> Colleague\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token function">ConcreteColleague1</span><span class="token punctuation">(</span>Mediator mediator<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">base</span><span class="token punctuation">(</span>mediator<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Send</span><span class="token punctuation">(</span>string message<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        mediator<span class="token punctuation">.</span><span class="token function">Send</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Notify</span><span class="token punctuation">(</span>string message<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"同事1得到信息:"</span> <span class="token operator">+</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">class</span> <span class="token class-name">ConcreteColleague2</span> <span class="token operator">:</span> Colleague\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token function">ConcreteColleague2</span><span class="token punctuation">(</span>Mediator mediator<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">base</span><span class="token punctuation">(</span>mediator<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Send</span><span class="token punctuation">(</span>string message<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        mediator<span class="token punctuation">.</span><span class="token function">Send</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Notify</span><span class="token punctuation">(</span>string message<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"同事2得到信息:"</span> <span class="token operator">+</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">class</span> <span class="token class-name">ConcreteMediator</span> <span class="token operator">:</span> Mediator\n<span class="token punctuation">{</span>\n    <span class="token keyword">private</span> ConcreteColleague1 colleague1<span class="token punctuation">;</span>\n    <span class="token keyword">private</span> ConcreteColleague2 colleague2<span class="token punctuation">;</span>\n\n    <span class="token keyword">public</span> ConcreteColleague1 Colleague1\n    <span class="token punctuation">{</span>\n        set <span class="token punctuation">{</span> colleague1 <span class="token operator">=</span> value<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">public</span> ConcreteColleague2 Colleague2\n    <span class="token punctuation">{</span>\n        set <span class="token punctuation">{</span> colleague2 <span class="token operator">=</span> value<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">public</span> override <span class="token keyword">void</span> <span class="token function">Send</span><span class="token punctuation">(</span>string message<span class="token punctuation">,</span> Colleague colleague<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">if</span> <span class="token punctuation">(</span>colleague <span class="token operator">==</span> colleague1<span class="token punctuation">)</span>\n        <span class="token punctuation">{</span>\n            colleague2<span class="token punctuation">.</span><span class="token function">Notify</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n        <span class="token keyword">else</span>\n        <span class="token punctuation">{</span>\n            colleague1<span class="token punctuation">.</span><span class="token function">Notify</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Main</span><span class="token punctuation">(</span>string<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    ConcreteMediator m <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">ConcreteMediator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    ConcreteColleague1 c1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">ConcreteColleague1</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    ConcreteColleague2 c2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">ConcreteColleague2</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    m<span class="token punctuation">.</span>Colleague1 <span class="token operator">=</span> c1<span class="token punctuation">;</span>\n    m<span class="token punctuation">.</span>Colleague2 <span class="token operator">=</span> c2<span class="token punctuation">;</span>\n\n    c1<span class="token punctuation">.</span><span class="token function">Send</span><span class="token punctuation">(</span><span class="token string">"吃过饭了吗?"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    c2<span class="token punctuation">.</span><span class="token function">Send</span><span class="token punctuation">(</span><span class="token string">"没有呢，你打算请客？"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    Console<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="优缺点-3"><a href="#%E4%BC%98%E7%BC%BA%E7%82%B9-3" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>优缺点</h3>\n<ul>\n<li>\n<p>优点</p>\n<ul>\n<li>简化了对象之间的交互。</li>\n<li>将各同事解耦。</li>\n<li>减少子类生成。</li>\n<li>可以简化各同事类的设计和实现。</li>\n</ul>\n</li>\n<li>\n<p>缺点</p>\n<ul>\n<li>在具体中介者类中包含了同事之间的交互细节，可能会导致具体中介者类非常复杂，使得系统难以维护。</li>\n</ul>\n</li>\n</ul>\n<h3 id="模式使用-3"><a href="#%E6%A8%A1%E5%BC%8F%E4%BD%BF%E7%94%A8-3" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式使用</h3>\n<ul>\n<li>系统中对象之间存在复杂的引用关系，产生的相互依赖关系结构混乱且难以理解。</li>\n<li>一个对象由于引用了其他很多对象并且直接和这些对象通信，导致难以复用该对象。</li>\n<li>想通过一个中间类来封装多个类中的行为，而又不想生成太多的子类。可以通过引入中介者类来实现，在中介者中定义对象交互的公共行为，如果需要改变行为则可以增加新的中介者类。</li>\n</ul>\n<h3 id="模式应用-1"><a href="#%E6%A8%A1%E5%BC%8F%E5%BA%94%E7%94%A8-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式应用</h3>\n<ul>\n<li>中介者模式与迪米特法则</li>\n<li>在中介者模式中，通过创造出一个中介者对象，将系统中有关的对象所引用的其他对象数目减少到最少，使得一个对象与其同事之间的相互作用被这个对象与中介者对象之间的相互作用所取代。因此，中介者模式就是迪米特法则的一个典型应用。</li>\n</ul>',
id:"/home/runner/work/GatsbyBlog/GatsbyBlog/blog/设计模式之行为型模式（一）/index.md absPath of file >>> MarkdownRemark",timeToRead:12,frontmatter:{date:"2018-04-19 00:04:40",path:"/design-pattern-behavior-1/",tags:"面试, 设计模式, 读书笔记",title:"设计模式之行为型模式（一）",draft:null}},{excerpt:"外观模式(Facade) 为子系统中的一组接口提供一个一致的界面，Facade…",html:'<h2 id="外观模式facade"><a href="#%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8Ffacade" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>外观模式(Facade)</h2>\n<p>为子系统中的一组接口提供一个一致的界面，Facade 模式定义了一个高层接口，这个接口使得这一子系统更加容易使用。</p>\n<h3 id="模式背景"><a href="#%E6%A8%A1%E5%BC%8F%E8%83%8C%E6%99%AF" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式背景</h3>\n<p>当客户来进行抵押贷款时，有如下几件事情需要确认：</p>\n<ol>\n<li>到银行子系统查询他是否有足够多的存款</li>\n<li>到信用子系统查询他是否有良好的信用</li>\n<li>到贷款子系统查询他有无贷款劣迹</li>\n</ol>\n<p>只有这三个子系统都通过时才可进行抵押。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180416214717-2635dc457a5c05da00ac0aabcc6b1b03-69c5a.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 39.30405019965772%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABZElEQVQoz41RTWvCQBCNaf0NhV76D9prS2l7EIvYi+f+gv6Sgsci4qEUeu9FpKecSiCHEsSPxM+om2iVRJKKiDkZt2+W9OYhA8POvtl5O29Gkg6YZVkynYPB4MF13fdut/vCGCsjLqmqekY5XddTUlJDcZrO8Xj8zGHr9Zrv93sKeavVuow/kxMTmqaZjouK/4S73U6Q1uv1K8ppmnaYkOTN53PhqE3Ffky5yWRyjfwbiCs4y7gXG43GCeXw5ojeLpdL2XEcud1uJx9BUhsOh6LDO8/zMv1+P1utVgu2bWfgOUi7wLxukcspilJAnF8sFnks49wwjBsoytZqtUKv18sivm82m6eCFZsLoyji2+2W+77PwzAUw59Op58gYBQTvlqtBA55H8A9ioMg4JvNRuAYx5MghHYTXf5go07sDGQ+fnyFf0GGB8wGxtB50Ol0SpjjN+bqos6ZzWZsNBr9outH4vsD7tU6rsO+jlUAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180416214717" title="" data-src="/static/微信截图_20180416214717-2635dc457a5c05da00ac0aabcc6b1b03-fee1c.png" data-srcset="/static/微信截图_20180416214717-2635dc457a5c05da00ac0aabcc6b1b03-a67b7.png 200w,\n/static/微信截图_20180416214717-2635dc457a5c05da00ac0aabcc6b1b03-0b187.png 400w,\n/static/微信截图_20180416214717-2635dc457a5c05da00ac0aabcc6b1b03-fee1c.png 800w,\n/static/微信截图_20180416214717-2635dc457a5c05da00ac0aabcc6b1b03-b1a91.png 1200w,\n/static/微信截图_20180416214717-2635dc457a5c05da00ac0aabcc6b1b03-95179.png 1600w,\n/static/微信截图_20180416214717-2635dc457a5c05da00ac0aabcc6b1b03-69c5a.png 1753w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="5334694466637013000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`//顾客类\npublic class Customer\n{\n    private string _name;\n\n    public Customer(string name)\n    {\n        this._name = name;\n    }\n\n    public string Name\n    {\n        get { return _name; }\n    }\n}\npublic class Bank  //银行子系统\n{\n    public bool HasSufficientSavings(Customer c, int amount)\n    {\n        Console.WriteLine(&quot;查询银行信息，客户名 &quot; + c.Name);\n        return true;\n    }\n}\npublic class Credit   //信用子系统\n{\n    public bool HasGoodCredit(Customer c)\n    {\n        Console.WriteLine(&quot;查询信用信息，客户名 &quot; + c.Name);\n        return true;\n    }\n}\npublic class Loan   //贷款子系统\n{\n    public bool HasNoBadLoans(Customer c)\n    {\n        Console.WriteLine(&quot;查询贷款信息，客户名 &quot; + c.Name);\n        return true;\n    }\n}\nstatic void Main(string[] args)\n{\n    Bank bank = new Bank();\n    Loan loan = new Loan();\n    Credit credit = new Credit();\n    int Money = 12000;\n    Customer customer = new Customer(&quot;张三&quot;);\n    bool eligible = true;\n\n    if (!bank.HasSufficientSavings(customer, Money))\n    {\n        eligible = false;\n    }\n    else if (!loan.HasNoBadLoans(customer))\n    {\n        eligible = false;\n    }\n    else if (!credit.HasGoodCredit(customer))\n    {\n        eligible = false;\n    }\n\n    Console.WriteLine(&quot;客户 &quot; + customer.Name + &quot; 已经被 &quot; + (eligible ? &quot;通过&quot; : &quot;拒绝&quot;));\n    Console.ReadLine();\n}`, `5334694466637013000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="cpp"\n              >\n                <span class="gatsby-code-button-language">cpp</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="cpp"><pre style="counter-reset: linenumber NaN" class="language-cpp line-numbers"><code class="language-cpp"><span class="token comment">//顾客类</span>\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Customer</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">private</span> string _name<span class="token punctuation">;</span>\n\n    <span class="token keyword">public</span> <span class="token function">Customer</span><span class="token punctuation">(</span>string name<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">this</span><span class="token punctuation">.</span>_name <span class="token operator">=</span> name<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">public</span> string Name\n    <span class="token punctuation">{</span>\n        get <span class="token punctuation">{</span> <span class="token keyword">return</span> _name<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Bank</span>  <span class="token comment">//银行子系统</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token keyword">bool</span> <span class="token function">HasSufficientSavings</span><span class="token punctuation">(</span>Customer c<span class="token punctuation">,</span> <span class="token keyword">int</span> amount<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"查询银行信息，客户名 "</span> <span class="token operator">+</span> c<span class="token punctuation">.</span>Name<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Credit</span>   <span class="token comment">//信用子系统</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token keyword">bool</span> <span class="token function">HasGoodCredit</span><span class="token punctuation">(</span>Customer c<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"查询信用信息，客户名 "</span> <span class="token operator">+</span> c<span class="token punctuation">.</span>Name<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Loan</span>   <span class="token comment">//贷款子系统</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token keyword">bool</span> <span class="token function">HasNoBadLoans</span><span class="token punctuation">(</span>Customer c<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"查询贷款信息，客户名 "</span> <span class="token operator">+</span> c<span class="token punctuation">.</span>Name<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Main</span><span class="token punctuation">(</span>string<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    Bank bank <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Bank</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    Loan loan <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Loan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    Credit credit <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Credit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">int</span> Money <span class="token operator">=</span> <span class="token number">12000</span><span class="token punctuation">;</span>\n    Customer customer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Customer</span><span class="token punctuation">(</span><span class="token string">"张三"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">bool</span> eligible <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>bank<span class="token punctuation">.</span><span class="token function">HasSufficientSavings</span><span class="token punctuation">(</span>customer<span class="token punctuation">,</span> Money<span class="token punctuation">)</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        eligible <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>loan<span class="token punctuation">.</span><span class="token function">HasNoBadLoans</span><span class="token punctuation">(</span>customer<span class="token punctuation">)</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        eligible <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>credit<span class="token punctuation">.</span><span class="token function">HasGoodCredit</span><span class="token punctuation">(</span>customer<span class="token punctuation">)</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        eligible <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"客户 "</span> <span class="token operator">+</span> customer<span class="token punctuation">.</span>Name <span class="token operator">+</span> <span class="token string">" 已经被 "</span> <span class="token operator">+</span> <span class="token punctuation">(</span>eligible <span class="token operator">?</span> <span class="token string">"通过"</span> <span class="token operator">:</span> <span class="token string">"拒绝"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    Console<span class="token punctuation">.</span><span class="token function">ReadLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>可以看到，客户程序与三个子系统都发生了耦合，这种耦合使得客户程序依赖于子系统，当子系统变化时，客户程序也将面临很多变化的挑战。</p>\n<h3 id="模式动机"><a href="#%E6%A8%A1%E5%BC%8F%E5%8A%A8%E6%9C%BA" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式动机</h3>\n<ul>\n<li>将一个系统划分为若干个子系统有利于降低系统的复杂性，一个常见的设计目标是使子系统间的通信和相互依赖关系达到最小，而达到该目标的途径之一就是引入一个外观对象，它为子系统中较一般的设置提供了一个单一而简单的界面。</li>\n<li>外观模式要求一个子系统的外部与其内部的通信必须通过一个统一的外观(Facade)对象进行。就如同医院的接待员一样，外观模式的外观类将客户端与子系统的内部复杂性分隔开，使得客户端只需要与外观对象打交道，而不需要与子系统内部的很多对象打交道。</li>\n<li>在没有外观类(Facade)之前，客户类(Client)需要和子系统类(Subsystem)进行复杂的交互，系统的耦合度很大；而增加一个外观类之后，客户类只需要直接和外观类交互，子系统类之间的复杂关系由外观类来实现，从而降低了系统的耦合度。</li>\n</ul>\n<h3 id="模式定义"><a href="#%E6%A8%A1%E5%BC%8F%E5%AE%9A%E4%B9%89" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式定义</h3>\n<p>外部与一个子系统的通信必须通过一个统一的外观对象进行，为子系统中的一组接口提供一个一致的界面，外观模式定义了一个高层接口，这个接口使得这一子系统更加容易使用。外观模式是对象的结构模式。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180416220421-3b2068b3c5b1843277eb050ba707aee5-5fd75.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 59.5467032967033%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAAB80lEQVQoz61TS2saYRT9Mgl0UZJfkGziDwgJJoVQiLtsxT/QH9CuSvZJyMqV6EYUKhjJItSKBXFjXSgiCooPFN+v+kZF0Wk01szXc4fERcliCr0wzGXu951z7rl3GPsrjEYj45wLlNdqtY+DweBHPp//1mq1PN1u12E2m99QLRqNMkVhMBgIcJNyAH1FzmezGV+tVrzZbHKHw/GWauFwWBmgXq8nwA3KS6WSZjgcfsrlctftdvtzo9H4YDKZtqgWDAbZP8VL26+F0+lUDqTVatcKK5XKOby78Xg8V5lM5hIqL2w22zbVvF6vMkCdTrf2sFqtWsjDXq/HJUnioihKULf73PKGIkCVSkWAsk+FQsFKgKPRaA3odrv3qOZyuV4HxCQFTE8ol8sCtfr8yAoTiYQulUp9TyaT9wB34azR5/PtvHhMZ+v1uoBOhFAoxP57gJwxmH0A448ikcixxWLRYFWOoOQEjPuxWOyw0+mo7Xb7GfITqHnn9/v3s9nsAVZJbbVaNcjVGN5hIBCQ95P1+/3xfD6XfcJlWuLf5Bt27g7DaC2XSw5Cjn18ou8gu51MJv3FYsExdT6dTvl4PJbS6fR7GRAKe/DgEewP+NUe8BZBwuGbHYcqqD1RDZdFAoCvX6DuZ7FYXIH0F8jmdC8ej58S3h+ctoh7EUl14gAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180416220421" title="" data-src="/static/微信截图_20180416220421-3b2068b3c5b1843277eb050ba707aee5-fee1c.png" data-srcset="/static/微信截图_20180416220421-3b2068b3c5b1843277eb050ba707aee5-a67b7.png 200w,\n/static/微信截图_20180416220421-3b2068b3c5b1843277eb050ba707aee5-0b187.png 400w,\n/static/微信截图_20180416220421-3b2068b3c5b1843277eb050ba707aee5-fee1c.png 800w,\n/static/微信截图_20180416220421-3b2068b3c5b1843277eb050ba707aee5-b1a91.png 1200w,\n/static/微信截图_20180416220421-3b2068b3c5b1843277eb050ba707aee5-5fd75.png 1456w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="53427763639214510000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`public class Mortgage     //外观类\n{\n    private Bank bank = new Bank();\n    private Loan loan = new Loan();\n    private Credit credit = new Credit();\n\n    public bool IsEligible(Customer cust, int amount)\n    {\n        Console.WriteLine(&quot;{0} 申请 {1:C} 贷款 &quot;, cust.Name, amount);\n\n        bool eligible = true;\n\n        if (!bank.HasSufficientSavings(cust, amount))\n        {\n            eligible = false;\n        }\n        else if (!loan.HasNoBadLoans(cust))\n        {\n            eligible = false;\n        }\n        else if (!credit.HasGoodCredit(cust))\n        {\n            eligible = false;\n        }\n\n        return eligible;\n    }\n}\nstatic void Main(string[] args)\n{\n    Mortgage mortgage = new Mortgage();   //外观\n\n    Customer customer = new Customer(&quot;张三&quot;);\n    bool eligable = mortgage.IsEligible(customer, 125000);\n\n    Console.WriteLine(&quot;客户 &quot; +customer.Name+&quot; 已经被 &quot;+(eligable ? &quot;通过&quot; : &quot;拒绝&quot;));\n    Console.ReadLine();\n}`, `53427763639214510000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="cpp"\n              >\n                <span class="gatsby-code-button-language">cpp</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="cpp"><pre style="counter-reset: linenumber NaN" class="language-cpp line-numbers"><code class="language-cpp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Mortgage</span>     <span class="token comment">//外观类</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">private</span> Bank bank <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Bank</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">private</span> Loan loan <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Loan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">private</span> Credit credit <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Credit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">public</span> <span class="token keyword">bool</span> <span class="token function">IsEligible</span><span class="token punctuation">(</span>Customer cust<span class="token punctuation">,</span> <span class="token keyword">int</span> amount<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"{0} 申请 {1:C} 贷款 "</span><span class="token punctuation">,</span> cust<span class="token punctuation">.</span>Name<span class="token punctuation">,</span> amount<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n        <span class="token keyword">bool</span> eligible <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>\n\n        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>bank<span class="token punctuation">.</span><span class="token function">HasSufficientSavings</span><span class="token punctuation">(</span>cust<span class="token punctuation">,</span> amount<span class="token punctuation">)</span><span class="token punctuation">)</span>\n        <span class="token punctuation">{</span>\n            eligible <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>loan<span class="token punctuation">.</span><span class="token function">HasNoBadLoans</span><span class="token punctuation">(</span>cust<span class="token punctuation">)</span><span class="token punctuation">)</span>\n        <span class="token punctuation">{</span>\n            eligible <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>credit<span class="token punctuation">.</span><span class="token function">HasGoodCredit</span><span class="token punctuation">(</span>cust<span class="token punctuation">)</span><span class="token punctuation">)</span>\n        <span class="token punctuation">{</span>\n            eligible <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n\n        <span class="token keyword">return</span> eligible<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Main</span><span class="token punctuation">(</span>string<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    Mortgage mortgage <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Mortgage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//外观</span>\n\n    Customer customer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Customer</span><span class="token punctuation">(</span><span class="token string">"张三"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">bool</span> eligable <span class="token operator">=</span> mortgage<span class="token punctuation">.</span><span class="token function">IsEligible</span><span class="token punctuation">(</span>customer<span class="token punctuation">,</span> <span class="token number">125000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"客户 "</span> <span class="token operator">+</span>customer<span class="token punctuation">.</span>Name<span class="token operator">+</span><span class="token string">" 已经被 "</span><span class="token operator">+</span><span class="token punctuation">(</span>eligable <span class="token operator">?</span> <span class="token string">"通过"</span> <span class="token operator">:</span> <span class="token string">"拒绝"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    Console<span class="token punctuation">.</span><span class="token function">ReadLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>引入 Facade 模式后，客户程序只与 Mortgage 发生依赖，也就是 Mortgage 屏蔽了子系统之间的复杂的操作，达到了解耦内部子系统与客户程序之间的依赖。</p>\n<h3 id="模式结构"><a href="#%E6%A8%A1%E5%BC%8F%E7%BB%93%E6%9E%84" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式结构</h3>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180416235335-1952871ecc86a84dcb7950c280299a46-17c64.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 37.20219914477703%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsSAAALEgHS3X78AAABf0lEQVQoz62RPUhCURTHn/oqyIgCqeVRS5DQEG9tiogEn2651dTQ0GJDk2PbGwuEigzUpUUnfYMSuvgEBVHwCz/w+wMEQXQSev3PzcGhsQM/7rn/c+7/fnHcb+iW0LtcrhUS6/X6fb/fV0ulkjIcDhPlcvmadKfTyVPfH7DYAVtgG2yCNYfDYaRCq9XyaIjxePxNY61WeyTdarWuU98Sq8DITE0m0wZOoZdlmff5fDzWcYDtFo/HhWQyKYZCIVFVVRHzXdJR1y3QL0ZOEAQyNlCd5/4nDGaz2cB5vd6DarVqCYfDUjablQqFwmGlUhFxMls0GrWjdpbL5fbxjpZIJCJBt+Pqx9COMpmMpCiKDfMLv9+/x2xh8kDvM5lMaNAajcZrr9dLUD6fz7XRaKThM1jPbDZjPYPB4Asf9kn5dDplGsxvmGEwGDzH4791Op0n4EmlUpf5fP6u2+2+Azd2l2Ox2Gmz2XRj/gw+isXibTqdvkLuoXXtdvslEAickN8PV0kAQn5ZdHwAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180416235335" title="" data-src="/static/微信截图_20180416235335-1952871ecc86a84dcb7950c280299a46-fee1c.png" data-srcset="/static/微信截图_20180416235335-1952871ecc86a84dcb7950c280299a46-a67b7.png 200w,\n/static/微信截图_20180416235335-1952871ecc86a84dcb7950c280299a46-0b187.png 400w,\n/static/微信截图_20180416235335-1952871ecc86a84dcb7950c280299a46-fee1c.png 800w,\n/static/微信截图_20180416235335-1952871ecc86a84dcb7950c280299a46-b1a91.png 1200w,\n/static/微信截图_20180416235335-1952871ecc86a84dcb7950c280299a46-95179.png 1600w,\n/static/微信截图_20180416235335-1952871ecc86a84dcb7950c280299a46-17c64.png 1637w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<ul>\n<li>Facade：外观角色</li>\n<li>SubSystem：子系统角色</li>\n</ul>\n<p><strong>保安系统</strong></p>\n<p>一个保安系统由两个录像机、三个电灯、一个遥感器和一个警报器组成。保安系统的操作人员需要经常将这些仪器启动和关闭。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180417000758-b1043acf9041958535de2ec6c379ec64-2b2cd.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 513px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 77.19298245614036%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsSAAALEgHS3X78AAABcUlEQVQoz5WS2Y6CQBBF+f9v8lniCwIBBAUUFPeFbaKyzhk6JsTMTLAeOl3LvXWruqW2Z1+dbbfbKIru9/v1em2apv3bpL4Tx3EQBJvN5ng84u52u6qqBoFpQrf5fD4ajcbj8WQycV23/dfewQBATqdTlKNiqGzqHo/HcrmUZVlVVSKHw2GobCxNU8MwEMx5Op2Y/ANwlmWLxULX9SRJcPf7/QcLy/Pctm0G5sIIvFkf3LzsHSxCPCydg87YHPPz7GVZQlHX9S+d65ehmXemFM3cybF8tgCjiAhDUVEUglHCD8PQ932K1us11ajle6CFbQMjiwQAuGyRL4QLxeVykSjVNI3o8/m0O6OanqQRD6lpmqxA7I8vNJvNaAAXkJ/O/AfLskgw5+12MzqjDyzIIeg4DvfVasXjeZ5HJRqJSFTjkEYPrJwI4RTbhkJRFAooowdgeIkAxpXO5zMcSBKXqDMa4orhqUMhEe6AGYQUc8H7DeslTv29ouShAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180417000758" title="" data-src="/static/微信截图_20180417000758-b1043acf9041958535de2ec6c379ec64-2b2cd.png" data-srcset="/static/微信截图_20180417000758-b1043acf9041958535de2ec6c379ec64-2a6c9.png 200w,\n/static/微信截图_20180417000758-b1043acf9041958535de2ec6c379ec64-aed38.png 400w,\n/static/微信截图_20180417000758-b1043acf9041958535de2ec6c379ec64-2b2cd.png 513w" data-sizes="(max-width: 513px) 100vw, 513px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>Client 对象需要引用到所有的录像机(Camera)、电灯(Light)、感应器(Sensor)和警报器(Alarm)对象。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="56009770370482045000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`public class Camera\n{\n    public void TurnOn()\n    {\n        Console.WriteLine(&quot;Turning on the camera.&quot;);\n    }\n    public void TurnOff()\n    {\n        Console.WriteLine(&quot;Turning off the camera.&quot;);\n    }\n    public void Rotate(int degrees){\n        Console.WriteLine(&quot;Rotating the camera by {0} degrees.&quot;, degrees);\n    }\n}\npublic class Light\n{\n    public void TurnOff()\n    {\n        Console.WriteLine(&quot;Turning on the light.&quot;);\n    }\n    public void TurnOn()\n    {\n        Console.WriteLine(&quot;Turning off the light.&quot;);\n    }\n    public void ChangeBulb()\n    {\n        Console.WriteLine(&quot;changing the light-bulb.&quot;);\n    }\n}\npublic class Sensor\n{\n    public void Activate()\n    {\n        Console.WriteLine(&quot;Activating the sensor.&quot;);\n    }\n    public void Deactivate()\n    {\n        Console.WriteLine(&quot;Deactivating the sensor.&quot;);\n    }\n    public void Trigger()\n    {\n        Console.WriteLine(&quot;The sensor has triggered.&quot;);\n    }\n}\npublic static void Main( string[] args ){\n    private static Camera camera1, camera2;\n    private static Light light1, light2, light3;\n    private static Sensor sensor;\n    private static Alarm alarm;\n    camera1 = new Camera();\n    camera2 = new Camera();\n    light1 = new Light();\n    light2 = new Light();\n    light3 = new Light();\n    sensor = new Sensor();\n    alarm = new Alarm();\n    camera1.TurnOn();\n    camera2.TurnOn();\n    light1.TurnOn();\n    light2.TurnOn();\n    light3.TurnOn();\n    sensor.Activate();\n    alarm.Activate();\n}`, `56009770370482045000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="cpp"\n              >\n                <span class="gatsby-code-button-language">cpp</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="cpp"><pre style="counter-reset: linenumber NaN" class="language-cpp line-numbers"><code class="language-cpp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Camera</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">TurnOn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Turning on the camera."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">TurnOff</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Turning off the camera."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Rotate</span><span class="token punctuation">(</span><span class="token keyword">int</span> degrees<span class="token punctuation">)</span><span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Rotating the camera by {0} degrees."</span><span class="token punctuation">,</span> degrees<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Light</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">TurnOff</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Turning on the light."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">TurnOn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Turning off the light."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">ChangeBulb</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"changing the light-bulb."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Sensor</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Activate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Activating the sensor."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Deactivate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Deactivating the sensor."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Trigger</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"The sensor has triggered."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Main</span><span class="token punctuation">(</span> string<span class="token punctuation">[</span><span class="token punctuation">]</span> args <span class="token punctuation">)</span><span class="token punctuation">{</span>\n    <span class="token keyword">private</span> <span class="token keyword">static</span> Camera camera1<span class="token punctuation">,</span> camera2<span class="token punctuation">;</span>\n    <span class="token keyword">private</span> <span class="token keyword">static</span> Light light1<span class="token punctuation">,</span> light2<span class="token punctuation">,</span> light3<span class="token punctuation">;</span>\n    <span class="token keyword">private</span> <span class="token keyword">static</span> Sensor sensor<span class="token punctuation">;</span>\n    <span class="token keyword">private</span> <span class="token keyword">static</span> Alarm alarm<span class="token punctuation">;</span>\n    camera1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Camera</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    camera2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Camera</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    light1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Light</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    light2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Light</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    light3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Light</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    sensor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Sensor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    alarm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Alarm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    camera1<span class="token punctuation">.</span><span class="token function">TurnOn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    camera2<span class="token punctuation">.</span><span class="token function">TurnOn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    light1<span class="token punctuation">.</span><span class="token function">TurnOn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    light2<span class="token punctuation">.</span><span class="token function">TurnOn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    light3<span class="token punctuation">.</span><span class="token function">TurnOn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    sensor<span class="token punctuation">.</span><span class="token function">Activate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    alarm<span class="token punctuation">.</span><span class="token function">Activate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>一个合情合理的改进方法就是准备一个系统的控制台，作为保安系统的用户界面。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180417002439-ecc7d7a99d445a97b3cba032cf14c642-f28cf.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 532px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 83.83458646616542%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAIAAABSJhvpAAAACXBIWXMAAAsSAAALEgHS3X78AAABt0lEQVQ4y5XS14pbQRAE0Pv/X6VHgVAA5ZxzTlaWfXzHFkjsGtwPw/RMV1Wn6Of39nw+p9NpvV7v9/vdbncymRyPx/AeAqLL5XK9Xr1uNpvz+Xw6nbgv8HA4zGQy8Fj2+/1yuXwDex2Px6vVqtls/ogN4HA4YBG93W7z+Xwqlcpms4VCgcAbGDKdTuMeDAZgvV7P5X6/i7jdbkgpA3tcLBafynyUZOUcnrwAuzweD1LJZDKRSIxGIwGf4PV6TY3+Mrb5fE7hVTMMcLVaFaAEibyB0d9ju/21158v1JDlcrnVauH9rPkfo8K42+1UFOaktf8BpgyjnWTVop2faX+nGWauTtk6aZo/cOjlF2CUImBUHvDOU2xht2xUyPwPOCiEZsjNYtiQ0POwc9xJbGFziM9mM3NBF4kLo8IEwO10OpaZOPA4Nq0CE+COpVKpKMTL7/UsFov6GfYUuFQqtdttrg5xzcm03P0OY7NUTiyRZCgDWECXkGStVgt7uo3NtDTc2ks4xGOXYKRINJRd/JFqNBrcEMo6scEICCWgVrPiIwuYy+X4dCgI8mGx/DlDh8LdO0ZrE5A68gvT6rz7mV8XzwAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180417002439" title="" data-src="/static/微信截图_20180417002439-ecc7d7a99d445a97b3cba032cf14c642-f28cf.png" data-srcset="/static/微信截图_20180417002439-ecc7d7a99d445a97b3cba032cf14c642-9f1b4.png 200w,\n/static/微信截图_20180417002439-ecc7d7a99d445a97b3cba032cf14c642-007c2.png 400w,\n/static/微信截图_20180417002439-ecc7d7a99d445a97b3cba032cf14c642-f28cf.png 532w" data-sizes="(max-width: 532px) 100vw, 532px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="31451914823526870000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`public class SecurityFacade\n{\n    private static Camera camera1, camera2;\n    private static Light light1, light2, light3;\n    private static Sensor sensor;\n    private static Alarm alarm;\n    static SecurityFacade()\n    {\n        camera1 = new Camera();\n        camera2 = new Camera();\n        light1 = new Light();\n        light2 = new Light();\n        light3 = new Light();\n        sensor = new Sensor();\n        alarm = new Alarm();\n    }\n    public void Activate()\n    {\n        camera1.TurnOn();\n        camera2.TurnOn();\n        light1.TurnOn();\n        light2.TurnOn();\n        light3.TurnOn();\n        sensor.Activate();\n        alarm.Activate();\n    }\n    public void Deactivate()\n    {\n        camera1.TurnOff();\n        camera2.TurnOff();\n        light1.TurnOff();\n        light2.TurnOff();\n        light3.TurnOff();\n        sensor.Deactivate();\n        alarm.Deactivate();\n    }\n}\npublic static void Main( string[] args )\n{\n    private static SecurityFacade security;\n    security = new SecurityFacade();\n    security.Activate();\n    Console.WriteLine(&quot;\\n--------------------\\n&quot;);\n    security.Deactivate();\n}`, `31451914823526870000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="cpp"\n              >\n                <span class="gatsby-code-button-language">cpp</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="cpp"><pre style="counter-reset: linenumber NaN" class="language-cpp line-numbers"><code class="language-cpp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SecurityFacade</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">private</span> <span class="token keyword">static</span> Camera camera1<span class="token punctuation">,</span> camera2<span class="token punctuation">;</span>\n    <span class="token keyword">private</span> <span class="token keyword">static</span> Light light1<span class="token punctuation">,</span> light2<span class="token punctuation">,</span> light3<span class="token punctuation">;</span>\n    <span class="token keyword">private</span> <span class="token keyword">static</span> Sensor sensor<span class="token punctuation">;</span>\n    <span class="token keyword">private</span> <span class="token keyword">static</span> Alarm alarm<span class="token punctuation">;</span>\n    <span class="token keyword">static</span> <span class="token function">SecurityFacade</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        camera1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Camera</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        camera2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Camera</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        light1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Light</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        light2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Light</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        light3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Light</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        sensor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Sensor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        alarm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Alarm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Activate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        camera1<span class="token punctuation">.</span><span class="token function">TurnOn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        camera2<span class="token punctuation">.</span><span class="token function">TurnOn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        light1<span class="token punctuation">.</span><span class="token function">TurnOn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        light2<span class="token punctuation">.</span><span class="token function">TurnOn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        light3<span class="token punctuation">.</span><span class="token function">TurnOn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        sensor<span class="token punctuation">.</span><span class="token function">Activate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        alarm<span class="token punctuation">.</span><span class="token function">Activate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Deactivate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        camera1<span class="token punctuation">.</span><span class="token function">TurnOff</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        camera2<span class="token punctuation">.</span><span class="token function">TurnOff</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        light1<span class="token punctuation">.</span><span class="token function">TurnOff</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        light2<span class="token punctuation">.</span><span class="token function">TurnOff</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        light3<span class="token punctuation">.</span><span class="token function">TurnOff</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        sensor<span class="token punctuation">.</span><span class="token function">Deactivate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        alarm<span class="token punctuation">.</span><span class="token function">Deactivate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Main</span><span class="token punctuation">(</span> string<span class="token punctuation">[</span><span class="token punctuation">]</span> args <span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">private</span> <span class="token keyword">static</span> SecurityFacade security<span class="token punctuation">;</span>\n    security <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">SecurityFacade</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    security<span class="token punctuation">.</span><span class="token function">Activate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"\\n--------------------\\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    security<span class="token punctuation">.</span><span class="token function">Deactivate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="优缺点"><a href="#%E4%BC%98%E7%BC%BA%E7%82%B9" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>优缺点</h3>\n<ul>\n<li>它对客户屏蔽子系统组件，减少了客户处理的对象数目使得子系统使用起来更加容易。</li>\n<li>它实现了子系统与客户之间的松耦合关系。这使得子系统的组件变化不会影响到它的客户。</li>\n<li>提高了安全性，通过外观模式，屏蔽子系统业务逻辑。</li>\n<li>它简化了系统在不同平台之间的移植过程，因为编译一个子系统一般不需要编译所有其它的子系统。</li>\n<li>它并不限制复杂应用使用子系统类。</li>\n<li>外观模式并不增加任何功能性模式，它仅仅是一些简单化接口。</li>\n</ul>\n<h3 id="模式使用"><a href="#%E6%A8%A1%E5%BC%8F%E4%BD%BF%E7%94%A8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式使用</h3>\n<ul>\n<li>当要为一个复杂子系统提供一个简单接口时。这个接口对大多数用户来说已经足够好；那些需要更多可定制性的用户可以越过 Facade 层。</li>\n<li>子系统相对独立——外界只需黑箱操作即可。例如利息计算。</li>\n<li>预防操作人员带来的风险扩散。</li>\n</ul>\n<h3 id="模式应用"><a href="#%E6%A8%A1%E5%BC%8F%E5%BA%94%E7%94%A8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式应用</h3>\n<ul>\n<li>子系统可以有多个外观。</li>\n<li>外观不参与子系统的业务逻辑。</li>\n</ul>\n<h2 id="享元模式flyweight"><a href="#%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8Fflyweight" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>享元模式(Flyweight)</h2>\n<p>运用共享技术有效地支持大量细粒度的对象。</p>\n<h3 id="模式背景-1"><a href="#%E6%A8%A1%E5%BC%8F%E8%83%8C%E6%99%AF-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式背景</h3>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180417004543-1f0b277785a37343adc0be5464acf32e-cedc2.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 305px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 173.11475409836066%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAjCAIAAAAblL1PAAAACXBIWXMAABnWAAAZ1gEY0crtAAAF0UlEQVRIx31VWXPiRhDmN+c5eUjlJamctbv2Zn1k7ThrO4mdxLGJl/UBBoEkdIAEOtDBIYTAgA4uATrTBmcriVPpmpoahvmmv/66e5TY4RevqNFXN/UXhd7zXPcZcv8sf7+J25uF4UZh+C053aJnT8e31PQL1Em8YucvctYHG8mPDgofHeQ//pH65IT9LKl+fFL+5LTyDHFekvNNYrZJuH8fG4T7YdpMHFTHSGNUcwK6OUDFNoxK26rbnmp7D7O1+M+hmPNsY5Q4EsZk0yrVDbJ+j9d0XDIYzeKMsdCbyuZCGS4fZuthfliYS1irliebywvJTjD9iV5nk8lP93/+/eTXs+Rl6uDw+NnGy8OffnYXiziOwzj2o4cZLIhjL4wXfugH4S9NJ6HYbhQHqlY/v7ziBb5YxEVBwHEMyeV4rprLZfN5RFWUVrPJ81yr1XJsOwj8OI5SXTfBDaczq1/FL2/PD7E88jZ1RVI0y1YxvJgvYARJS5IyGJj9fl/X9eFwOJ5MggAYhNe9RYLrzwaGlMntXCYvT0/f/HJygKI3JHGXzVxSZKYmkpalxfEsiqL4L3tYRyuw6rjwu9MbMugWiu+wpe/46h6BbVHETqt1xFVfK9K+bZ3F8fLv4CgM3nUXDzHHoW8YejF/h6AZJHsh8DhJpCtsnqIyGPYOLaQo8s40h7Is6W1tPB6taMe5wRochXqnU7k5pCi6VOYEQSZJhuOkcpmjKLZUqrCsoKrNUpmVJNCuMTTt+96gO5o+ghuaVk5t8+Usz+MCj2HoW5FHgQJRvC7RGVWhea7AsohUK1YrSKNe4ipI1xwmZHsGUWi6XkruXF98wzKbsrSPFZ6ryl4m/fW71OdF9HkR2xD4rWz6S625VxO3RWG7q+8PnRaAQbBIkZX0wau2KrY7LRRFaJpiWVrXW6LAtZqqbZtRFPjeIgy9MPB83/O9+WSxfKTd0lqNu0OmeM7zfxD4aYn6DSuckMWzauVcFC4F/krX8rZF2CY56BMjh3CnlanvJxRrFodBx9Bd8VRgTlF0F8f2K8xh7m4bye0y5Tc0uZfNbpHEvigeCfwxTX0vy8fD/rupt3yvtj6pHrabNQwnQXOSpHleoEHoKp/Po6nUVa0G4rOdThf2QfPh0BovgzU4MPoDb+7SJbrdbiuKgqIowzDJZDKTyQAsnU7DDkmShUIBDsBfPMeZEzehQIWFgdbRuQbBcRU4wfGQXgp6AA5Vq1VN03q9nmVZNuhmmuPxeDAYWKbpuMuV2lHYNtpXhWOKRNPpDLuyer3eaDTWyDAM439bNPXDNW2/pRvcb7tqtVgkaWhD8A9Ul8vHegYwlGT4DwsmXvDouWkYdxZPMBRTKqsrEwSh2+16nvfYCf+2cOKFj0XS0vTi0QumiN5m7himjOM4MAfOEJ7ruuDoKXjqrWnHUVvT5Z/elND8TTqdy2Zvb28lSaqvDKT6X3Do6x1jlM/yBFFiWJIgwC2oBbQdx1nH/N6e0g6URgvLIiWKBsIX5xc0TYuiCJHPZrP4qdDvPa8EC/TuvXE/gJKCqgCp4QoA12o1uMUwDAgBaqPT6cAzBnl+eAyiaE17HoW+ZnSn7hTDcSgPwKzBUCQEAZXDlctlwIP+sAl18g8wrPoDZ7FcwDnwk8vlAC/LMoZhACivDPah2mB+TF64os3eT3rN6k3q67dX17+fnR0fHyMIAjAgD0h4a+P/tpVnyXLnrlMRix2jDxHCWw9UwRW5MqhwoABsIVq4C9IGmYeCHY9G46W/znPcHzoTR1dVmV4Z8AeSED8kDCKHu9Z9ArRBtmazCVdM/wJHrXazfveDwBCpq2vou2qlAofguwMO10E+td7MS4iWO/N8SWuz179CM9Y7XZqtoiRV5vg/rm7gIc7kUUFRCYYVlLo1mS1XTTL3g1RnkjiSzQ3R3pUne6LzWpq8lqfbgrPF27u18SYz2BFH8BPml5Xhrjj6Tp3n+nP4Sh7KI86c/QmIMxX5QpUvewAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180417004543" title="" data-src="/static/微信截图_20180417004543-1f0b277785a37343adc0be5464acf32e-cedc2.png" data-srcset="/static/微信截图_20180417004543-1f0b277785a37343adc0be5464acf32e-33c45.png 200w,\n/static/微信截图_20180417004543-1f0b277785a37343adc0be5464acf32e-cedc2.png 305w" data-sizes="(max-width: 305px) 100vw, 305px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>如何设计能有效减少系统开销?</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="20922476346744558000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`class Game  //游戏\n{\n    private string name = &quot;&quot;;\n    public Game(string name)\n    {\n        this.name = name;\n    }\n\n    public void Play()\n    {\n        Console.WriteLine(&quot;运行游戏：&quot; + name);\n    }\n}\nstatic void Main(string[] args)\n{\n    Game zs = new Game(&quot;斗地主&quot;);\n    zs.Play();\n\n    Game ls = new Game(&quot;斗地主&quot;);\n    ls.Play();\n\n    Game ww = new Game(&quot;斗地主&quot;);\n    ww.Play();\n\n    Game zl = new Game(&quot;麻将&quot;);\n    zl.Play();\n\n    Game sq = new Game(&quot;麻将&quot;);\n    sq.Play();\n\n    Game zb = new Game(&quot;麻将&quot;);\n    zb.Play();\n\n    Console.Read();\n}`, `20922476346744558000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="cpp"\n              >\n                <span class="gatsby-code-button-language">cpp</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="cpp"><pre style="counter-reset: linenumber NaN" class="language-cpp line-numbers"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Game</span>  <span class="token comment">//游戏</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">private</span> string name <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>\n    <span class="token keyword">public</span> <span class="token function">Game</span><span class="token punctuation">(</span>string name<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Play</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"运行游戏："</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Main</span><span class="token punctuation">(</span>string<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    Game zs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Game</span><span class="token punctuation">(</span><span class="token string">"斗地主"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    zs<span class="token punctuation">.</span><span class="token function">Play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    Game ls <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Game</span><span class="token punctuation">(</span><span class="token string">"斗地主"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    ls<span class="token punctuation">.</span><span class="token function">Play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    Game ww <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Game</span><span class="token punctuation">(</span><span class="token string">"斗地主"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    ww<span class="token punctuation">.</span><span class="token function">Play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    Game zl <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Game</span><span class="token punctuation">(</span><span class="token string">"麻将"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    zl<span class="token punctuation">.</span><span class="token function">Play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    Game sq <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Game</span><span class="token punctuation">(</span><span class="token string">"麻将"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    sq<span class="token punctuation">.</span><span class="token function">Play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    Game zb <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Game</span><span class="token punctuation">(</span><span class="token string">"麻将"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    zb<span class="token punctuation">.</span><span class="token function">Play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    Console<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>三个斗地主实例，本质都是一样的代码，但是随着用户增多，实例也会增多，对服务器资源造成浪费，希望共享代码</p>\n<h3 id="享元模式"><a href="#%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>享元模式</h3>\n<ul>\n<li>享元模式对那些通常因为数量太大而难以用对象来表示的概念或实体进行建模。</li>\n<li>如为字母表中的每一个字符创建一个享元，每个享元对象存储一个字符代码。逻辑上，文档中的给定字符每次出现都有一个对象与其对应，然而物理上相同的字符共享一个享元对象，而这个对象可以出现在文档结构的不同地方。</li>\n<li>由于不同的字符对象数远小于文档中的字符数，因此，对象的总数远小于一个初次执行的程序所使用的对象数目。对于一个所有字符都使用同样的字体和颜色的文档而言，不管这个文档有多长，只需要分配 100 个左右的字符对象（大约是 ASCII 字符集的数目）。由于大多数文档使用的字体颜色的组合不超过 10 种，实际应用中这一数目不会明显增加。因此，对单个字符进行对象抽象是具有实际意义的。</li>\n</ul>\n<h3 id="模式定义-1"><a href="#%E6%A8%A1%E5%BC%8F%E5%AE%9A%E4%B9%89-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式定义</h3>\n<p>运用共享技术有效地支持大量细粒度的对象。 系统只使用少量的对象，而这些对象都很近，状态变化很小，对象使用次数增多。享元模式是一种对象结构型模式。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180417010630-20571c13e84b9cc8b0a9ec1e8ed55049-165f5.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 46.303763440860216%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAABiUlEQVQoz41S3UoCQRgdrUB6hMC7oFvfZA311qsioqu8Cla8E70I3BXsxt7AJ/BGkUBUEH9QxBXxb1GoMH9WEAWn8w26LBXkB4c5s3PmzHxnlpVKJWe/3/cOh0N3rVa7Ho1G7sFg4G21WhcMxTkn2IgXi8VLrD+Xy+VooVCIQh/BXG02m9Jea2OY+He7HV8sFhxGYtxutzybzd6QKBaLnQUCgVPiuVzuHpv4ZrPh6/VagKrX673uDe2sUqn4p9MpJxiGwZfLpTBMp9N3JJIk6dzlcjmIZzKZh9VqxefzOadxNpsJQ13Xk6ZhPp934paeTqfjA4+gdQ9B0zRry0RJe1Wv11+q1Wq80WjEu92uAtMkRp/Z8o9yWCeJRMIU4Ma/xNY6HPpvBYNBkyMz2njyB2ymKVp9RAYyWpCRZwgtPY3H4xC+30IjhPgThKEsy/RITFEUE6qqsnA4LNZTqRRjMBPBUsjWoJGjDo2dhDiEHV3tdlubTCZfeN0PvPIn8A5u4KC3gyFuf7TfNzVUUCLepjU/AAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180417010630" title="" data-src="/static/微信截图_20180417010630-20571c13e84b9cc8b0a9ec1e8ed55049-fee1c.png" data-srcset="/static/微信截图_20180417010630-20571c13e84b9cc8b0a9ec1e8ed55049-a67b7.png 200w,\n/static/微信截图_20180417010630-20571c13e84b9cc8b0a9ec1e8ed55049-0b187.png 400w,\n/static/微信截图_20180417010630-20571c13e84b9cc8b0a9ec1e8ed55049-fee1c.png 800w,\n/static/微信截图_20180417010630-20571c13e84b9cc8b0a9ec1e8ed55049-b1a91.png 1200w,\n/static/微信截图_20180417010630-20571c13e84b9cc8b0a9ec1e8ed55049-165f5.png 1488w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="53233449177568120000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`abstract class Game   //游戏\n{\n    public abstract void Play();\n}\nclass ConcreteGame : Game //具体的游戏\n{\n    private string name = &quot;&quot;;\n    public ConcreteGame(string name)\n    {\n        this.name = name;\n    }\n\n    public override void Play()\n    {\n        Console.WriteLine(&quot;运行游戏：&quot; + name);\n    }\n}\nclass GameFactory   //游戏工厂\n{\n    private Hashtable flyweights = new Hashtable();\n\n    //获得游戏分类\n    public Game GetGameCategory(string key)\n    {\n        if (!flyweights.ContainsKey(key))\n            flyweights.Add(key, new ConcreteGame(key));\n        return ((Game)flyweights[key]);\n    }\n\n    //获得游戏分类总数\n    public int GetGameCount()\n    {\n        return flyweights.Count;\n    }\n}\nstatic void Main(string[] args)\n{\n\n    GameFactory f = new GameFactory();\n\n    Game zs = f.GetGameCategory(&quot;斗地主&quot;);\n    zs.Play();\n    Game ls = f.GetGameCategory(&quot;斗地主&quot;);\n    ls.Play();\n    Game ww = f.GetGameCategory(&quot;斗地主&quot;);\n    ww.Play();\n    Game zl = f.GetGameCategory(&quot;麻将&quot;);\n    zl.Play();\n    Game sq = f.GetGameCategory(&quot;麻将&quot;);\n    sq.Play();\n    Game zb = f.GetGameCategory(&quot;麻将&quot;);\n    zb.Play();\n    Console.WriteLine(&quot;游戏逻辑总数为 {0}&quot;, f.GetGameCount());\n\n    Console.Read();\n}`, `53233449177568120000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="cpp"\n              >\n                <span class="gatsby-code-button-language">cpp</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="cpp"><pre style="counter-reset: linenumber NaN" class="language-cpp line-numbers"><code class="language-cpp">abstract <span class="token keyword">class</span> <span class="token class-name">Game</span>   <span class="token comment">//游戏</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> abstract <span class="token keyword">void</span> <span class="token function">Play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">class</span> <span class="token class-name">ConcreteGame</span> <span class="token operator">:</span> Game <span class="token comment">//具体的游戏</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">private</span> string name <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>\n    <span class="token keyword">public</span> <span class="token function">ConcreteGame</span><span class="token punctuation">(</span>string name<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">public</span> override <span class="token keyword">void</span> <span class="token function">Play</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"运行游戏："</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">class</span> <span class="token class-name">GameFactory</span>   <span class="token comment">//游戏工厂</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">private</span> Hashtable flyweights <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Hashtable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token comment">//获得游戏分类</span>\n    <span class="token keyword">public</span> Game <span class="token function">GetGameCategory</span><span class="token punctuation">(</span>string key<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>flyweights<span class="token punctuation">.</span><span class="token function">ContainsKey</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span>\n            flyweights<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token function">ConcreteGame</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>Game<span class="token punctuation">)</span>flyweights<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token comment">//获得游戏分类总数</span>\n    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">GetGameCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">return</span> flyweights<span class="token punctuation">.</span>Count<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Main</span><span class="token punctuation">(</span>string<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n\n    GameFactory f <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">GameFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    Game zs <span class="token operator">=</span> f<span class="token punctuation">.</span><span class="token function">GetGameCategory</span><span class="token punctuation">(</span><span class="token string">"斗地主"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    zs<span class="token punctuation">.</span><span class="token function">Play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    Game ls <span class="token operator">=</span> f<span class="token punctuation">.</span><span class="token function">GetGameCategory</span><span class="token punctuation">(</span><span class="token string">"斗地主"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    ls<span class="token punctuation">.</span><span class="token function">Play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    Game ww <span class="token operator">=</span> f<span class="token punctuation">.</span><span class="token function">GetGameCategory</span><span class="token punctuation">(</span><span class="token string">"斗地主"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    ww<span class="token punctuation">.</span><span class="token function">Play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    Game zl <span class="token operator">=</span> f<span class="token punctuation">.</span><span class="token function">GetGameCategory</span><span class="token punctuation">(</span><span class="token string">"麻将"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    zl<span class="token punctuation">.</span><span class="token function">Play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    Game sq <span class="token operator">=</span> f<span class="token punctuation">.</span><span class="token function">GetGameCategory</span><span class="token punctuation">(</span><span class="token string">"麻将"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    sq<span class="token punctuation">.</span><span class="token function">Play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    Game zb <span class="token operator">=</span> f<span class="token punctuation">.</span><span class="token function">GetGameCategory</span><span class="token punctuation">(</span><span class="token string">"麻将"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    zb<span class="token punctuation">.</span><span class="token function">Play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"游戏逻辑总数为 {0}"</span><span class="token punctuation">,</span> f<span class="token punctuation">.</span><span class="token function">GetGameCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    Console<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li>实现了享元模式共享的目的，无论几个用户，运行游戏一样，就只保留一个游戏逻辑代码。</li>\n<li>但是，这些用户毕竟不是同一个用户，用户名不同，用户的牌也不同。</li>\n<li>我们称享元对象内部不随环境变化的共享部分称为内部状态。</li>\n<li>而随环境而改变，不可以共享的称为外部状态。</li>\n</ul>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180417011251-4abda475795f693af3bc678bc3028b3a-5dcfa.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 31.107099879663057%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsSAAALEgHS3X78AAABOklEQVQY03WRvUrDYBSGkxh08gpcFdychKIFwStQvAFdXIR6BcFB6CB4EY1gHBx16ZYpQ6bQ5r9JbPNPCAkZOgRMfL8Px/YsJ3nOD+97Pma1Wj1lWTZ2HOe5qqrXIAhuGIQsy/tFUQjL5XIcx/FLmqYPhIuiuEPyYrG49X3/az6fS1EUfZumeUk4kyRJT2K9XtOMhZ+ET6fTAzT2XddRjuEfYE4QhD1SNwzjnfC2bWkdwkZ0oeu6gzAMhwBnnudd6Lp+SDgU72qaNlAU5VpV1SvwE8Ixy5IMfgr+OJvN7iFqZNv2MbMtmqZht9XggJEkaWMdJ2OJQg7WOCikGQP0RvgflmX5gVtN0POG7wlUHJEa7LNQx8EBb1kWn+c5j57NItBAF8LKXV3XPez84tF6PFCPhef/5+C2OfgDfaLntI/Sj9AAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180417011251" title="" data-src="/static/微信截图_20180417011251-4abda475795f693af3bc678bc3028b3a-fee1c.png" data-srcset="/static/微信截图_20180417011251-4abda475795f693af3bc678bc3028b3a-a67b7.png 200w,\n/static/微信截图_20180417011251-4abda475795f693af3bc678bc3028b3a-0b187.png 400w,\n/static/微信截图_20180417011251-4abda475795f693af3bc678bc3028b3a-fee1c.png 800w,\n/static/微信截图_20180417011251-4abda475795f693af3bc678bc3028b3a-b1a91.png 1200w,\n/static/微信截图_20180417011251-4abda475795f693af3bc678bc3028b3a-95179.png 1600w,\n/static/微信截图_20180417011251-4abda475795f693af3bc678bc3028b3a-5dcfa.png 1662w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="54277273730345060000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`public class User //用户\n{\n    private string name;\n\n    public User(string name)\n    {\n        this.name = name;\n    }\n\n    public string Name\n    {\n        get { return name; }\n    }\n}\nabstract class Game   //游戏\n{\n    public abstract void Play(User user);\n}\nclass ConcreteGame : Game //具体的游戏\n{\n    private string name = &quot;&quot;;\n    public ConcreteGame(string name)\n    {\n        this.name = name;\n    }\n\n    public override void Play(User user)\n    {\n        Console.WriteLine(&quot;运行游戏：&quot; + name + &quot; 用户：&quot; + user.Name);\n    }\n}\nstatic void Main(string[] args)\n{\n    GameFactory f = new GameFactory();\n\n    Game zs = f.GetGameCategory(&quot;斗地主&quot;);\n    zs.Play(new User(&quot;张三&quot;));\n    Game ls = f.GetGameCategory(&quot;斗地主&quot;);\n    ls.Play(new User(&quot;李四&quot;));\n    Game ww = f.GetGameCategory(&quot;斗地主&quot;);\n    ww.Play(new User(&quot;王五&quot;));\n    Game zl = f.GetGameCategory(&quot;麻将&quot;);\n    zl.Play(new User(&quot;赵六&quot;));\n    Game sq = f.GetGameCategory(&quot;麻将&quot;);\n    sq.Play(new User(&quot;孙七&quot;));\n    Game zb = f.GetGameCategory(&quot;麻将&quot;);\n    zb.Play(new User(&quot;周八&quot;));\n\n    Console.WriteLine(&quot;游戏逻辑总数为 {0}&quot;, f.GetGameCount());\n\n    Console.Read();\n}`, `54277273730345060000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="cpp"\n              >\n                <span class="gatsby-code-button-language">cpp</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="cpp"><pre style="counter-reset: linenumber NaN" class="language-cpp line-numbers"><code class="language-cpp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token comment">//用户</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">private</span> string name<span class="token punctuation">;</span>\n\n    <span class="token keyword">public</span> <span class="token function">User</span><span class="token punctuation">(</span>string name<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">public</span> string Name\n    <span class="token punctuation">{</span>\n        get <span class="token punctuation">{</span> <span class="token keyword">return</span> name<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\nabstract <span class="token keyword">class</span> <span class="token class-name">Game</span>   <span class="token comment">//游戏</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> abstract <span class="token keyword">void</span> <span class="token function">Play</span><span class="token punctuation">(</span>User user<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">class</span> <span class="token class-name">ConcreteGame</span> <span class="token operator">:</span> Game <span class="token comment">//具体的游戏</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">private</span> string name <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>\n    <span class="token keyword">public</span> <span class="token function">ConcreteGame</span><span class="token punctuation">(</span>string name<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">public</span> override <span class="token keyword">void</span> <span class="token function">Play</span><span class="token punctuation">(</span>User user<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"运行游戏："</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">" 用户："</span> <span class="token operator">+</span> user<span class="token punctuation">.</span>Name<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Main</span><span class="token punctuation">(</span>string<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    GameFactory f <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">GameFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    Game zs <span class="token operator">=</span> f<span class="token punctuation">.</span><span class="token function">GetGameCategory</span><span class="token punctuation">(</span><span class="token string">"斗地主"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    zs<span class="token punctuation">.</span><span class="token function">Play</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token function">User</span><span class="token punctuation">(</span><span class="token string">"张三"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    Game ls <span class="token operator">=</span> f<span class="token punctuation">.</span><span class="token function">GetGameCategory</span><span class="token punctuation">(</span><span class="token string">"斗地主"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    ls<span class="token punctuation">.</span><span class="token function">Play</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token function">User</span><span class="token punctuation">(</span><span class="token string">"李四"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    Game ww <span class="token operator">=</span> f<span class="token punctuation">.</span><span class="token function">GetGameCategory</span><span class="token punctuation">(</span><span class="token string">"斗地主"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    ww<span class="token punctuation">.</span><span class="token function">Play</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token function">User</span><span class="token punctuation">(</span><span class="token string">"王五"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    Game zl <span class="token operator">=</span> f<span class="token punctuation">.</span><span class="token function">GetGameCategory</span><span class="token punctuation">(</span><span class="token string">"麻将"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    zl<span class="token punctuation">.</span><span class="token function">Play</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token function">User</span><span class="token punctuation">(</span><span class="token string">"赵六"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    Game sq <span class="token operator">=</span> f<span class="token punctuation">.</span><span class="token function">GetGameCategory</span><span class="token punctuation">(</span><span class="token string">"麻将"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    sq<span class="token punctuation">.</span><span class="token function">Play</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token function">User</span><span class="token punctuation">(</span><span class="token string">"孙七"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    Game zb <span class="token operator">=</span> f<span class="token punctuation">.</span><span class="token function">GetGameCategory</span><span class="token punctuation">(</span><span class="token string">"麻将"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    zb<span class="token punctuation">.</span><span class="token function">Play</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token function">User</span><span class="token punctuation">(</span><span class="token string">"周八"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"游戏逻辑总数为 {0}"</span><span class="token punctuation">,</span> f<span class="token punctuation">.</span><span class="token function">GetGameCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    Console<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="模式结构-1"><a href="#%E6%A8%A1%E5%BC%8F%E7%BB%93%E6%9E%84-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式结构</h3>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180417013418-dcf9526d1f9fa613d7a1fbb22425809d-998c9.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 38.10921902524956%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABoUlEQVQoz4VRS0sCURT2kQli0Oxy5aJNkGSbFlloRn+gZdCqbQtX/oQWsy2oTUnNZsJWgg+YGXShDqOBiG9FfIyCiIoPUHQht3MnbyulDw7n3vud891zv6uqVCqRfD7PNZvN72KxeKcCeL3eLZPJpOY4ToP39XqdHg6HEmQeaoRutyt0Oh0R+o4xXy6XlToFg8EAtdtthFEqlR7xmdvt1lMUpXO5XNurhshyuUT9fh+BMOr1emixWKBGo3GJ+Wq1qqVp+lfQ7/dbGIaxRqNRC8/zu+Qi0MehwRlqzMFg8NDn852wLHsVCoUOAoHAkSRJO6s6Lc5rAU3qjeQ/UPrgmc5YLHYBHjrT6fQeIcGG21ar9ZXL5Tzg1Ycsy+xoNHqA/Q30sODlO1jBQHjg6Z+QrUQVzedzxUMQuCeCIPKGz+AD0Hg8JrycSCSep9MpmkwmaDab/XGZTOaaTPIC0z3BLa+pVMpGBMPh8D5M7Egmk/Z4PO4oFApnwFtFUTTDhOcQp4Ig4FfZstmsHf6AWmeD3ggwGAxGWOs2WKXe5GGtVlP9AFnqL8o7e8wdAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180417013418" title="" data-src="/static/微信截图_20180417013418-dcf9526d1f9fa613d7a1fbb22425809d-fee1c.png" data-srcset="/static/微信截图_20180417013418-dcf9526d1f9fa613d7a1fbb22425809d-a67b7.png 200w,\n/static/微信截图_20180417013418-dcf9526d1f9fa613d7a1fbb22425809d-0b187.png 400w,\n/static/微信截图_20180417013418-dcf9526d1f9fa613d7a1fbb22425809d-fee1c.png 800w,\n/static/微信截图_20180417013418-dcf9526d1f9fa613d7a1fbb22425809d-b1a91.png 1200w,\n/static/微信截图_20180417013418-dcf9526d1f9fa613d7a1fbb22425809d-95179.png 1600w,\n/static/微信截图_20180417013418-dcf9526d1f9fa613d7a1fbb22425809d-998c9.png 1703w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<ul>\n<li>Flyweight：抽象享元类</li>\n<li>ConcreteFlyweight：具体享元类</li>\n<li>UnsharedConcreteFlyweight：非共享具体享元类</li>\n<li>FlyweightFactory：享元工厂类</li>\n<li>Client：客户类</li>\n</ul>\n<h3 id="优缺点-1"><a href="#%E4%BC%98%E7%BC%BA%E7%82%B9-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>优缺点</h3>\n<ul>\n<li>大幅度地降低内存中对象的数量。</li>\n<li>使得系统更加复杂。</li>\n<li>为了使对象可以共享，需要将一些状态外部化，这使得程序的逻辑复杂化。</li>\n<li>享元模式将享元对象的状态外部化，而读取外部状态使得运行时间稍微变长。</li>\n</ul>\n<h3 id="模式使用-1"><a href="#%E6%A8%A1%E5%BC%8F%E4%BD%BF%E7%94%A8-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式使用</h3>\n<ul>\n<li>一个系统有大量的对象，造成耗费大量的内存。</li>\n<li>这些对象的状态中的大部分都可以外部化。</li>\n<li>这些对象可以按照内部状态分成很多的组，当把外部对象从对象中剔除时，每一个组都可以用相对较少的共享对象代替。</li>\n<li>软件系统不依赖于这些对象的身份，换言之，这些对象可以是不可分辨的。</li>\n</ul>\n<h3 id="模式应用-1"><a href="#%E6%A8%A1%E5%BC%8F%E5%BA%94%E7%94%A8-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式应用</h3>\n<ul>\n<li>在编辑器软件中大量使用，如在一个文档中多次出现相同的图片，则只需要创建一个图片对象，通过在应用程序中设置该图片出现的位置，可以实现该图片在不同地方多次重复显示。</li>\n<li>Windows DLL(动态链接库)</li>\n<li>String 类型</li>\n</ul>\n<h2 id="代理模式proxy"><a href="#%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8Fproxy" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>代理模式(Proxy)</h2>\n<p>为其他对象提供一种代理以控制对这个对象的访问。</p>\n<h3 id="模式使用-2"><a href="#%E6%A8%A1%E5%BC%8F%E4%BD%BF%E7%94%A8-2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式使用</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="64317076327470740000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`//快递工作人员\nclass ExpressPerson\n{\n    private string name;\n    public string Name\n    {\n        get { return name; }\n        set { name = value; }\n    }\n}\n//毕业生\nclass Graduate\n{\n    ExpressPerson YDY;\n    public Graduate(ExpressPerson YDY)\n    {\n        this.YDY = YDY;\n    }\n    public void GiveComputer()\n    {\n        Console.WriteLine(YDY.Name + &quot; 请你托运计算机&quot;);\n    }\n    public void GiveBaggage()\n    {\n        Console.WriteLine(YDY.Name + &quot; 请你托运行李&quot;);\n    }\n}\nstatic void Main(string[] args)\n{\n    ExpressPerson YDY = new ExpressPerson();\n    YDY.Name = &quot;宅急送&quot;;\n\n    Graduate zhangsan = new Graduate(YDY);\n\n    zhangsan.GiveComputer();\n    zhangsan.GiveBaggage();\n\n    Console.Read();\n}\n//女同学\nclass Classmate\n{\n    ExpressPerson YDY;\n    public Classmate(ExpressPerson YDY)\n    {\n        this.YDY = YDY;\n    }\n    public void GiveComputer()\n    {\n        Console.WriteLine(YDY.Name + &quot; 请你托运计算机&quot;);\n    }\n    public void GiveBaggage()\n    {\n        Console.WriteLine(YDY.Name + &quot; 请你托运行李&quot;);\n    }\n}\nstatic void Main(string[] args)\n{\n    ExpressPerson YDY = new ExpressPerson();\n    YDY.Name = &quot;宅急送&quot;;\n\n    Classmate Girl = new Classmate(YDY);\n\n    Girl.GiveComputer();\n    Girl.GiveBaggage();\n\n    Console.Read();\n}`, `64317076327470740000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="cpp"\n              >\n                <span class="gatsby-code-button-language">cpp</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="cpp"><pre style="counter-reset: linenumber NaN" class="language-cpp line-numbers"><code class="language-cpp"><span class="token comment">//快递工作人员</span>\n<span class="token keyword">class</span> <span class="token class-name">ExpressPerson</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">private</span> string name<span class="token punctuation">;</span>\n    <span class="token keyword">public</span> string Name\n    <span class="token punctuation">{</span>\n        get <span class="token punctuation">{</span> <span class="token keyword">return</span> name<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n        set <span class="token punctuation">{</span> name <span class="token operator">=</span> value<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token comment">//毕业生</span>\n<span class="token keyword">class</span> <span class="token class-name">Graduate</span>\n<span class="token punctuation">{</span>\n    ExpressPerson YDY<span class="token punctuation">;</span>\n    <span class="token keyword">public</span> <span class="token function">Graduate</span><span class="token punctuation">(</span>ExpressPerson YDY<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">this</span><span class="token punctuation">.</span>YDY <span class="token operator">=</span> YDY<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">GiveComputer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>YDY<span class="token punctuation">.</span>Name <span class="token operator">+</span> <span class="token string">" 请你托运计算机"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">GiveBaggage</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>YDY<span class="token punctuation">.</span>Name <span class="token operator">+</span> <span class="token string">" 请你托运行李"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Main</span><span class="token punctuation">(</span>string<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    ExpressPerson YDY <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">ExpressPerson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    YDY<span class="token punctuation">.</span>Name <span class="token operator">=</span> <span class="token string">"宅急送"</span><span class="token punctuation">;</span>\n\n    Graduate zhangsan <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Graduate</span><span class="token punctuation">(</span>YDY<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    zhangsan<span class="token punctuation">.</span><span class="token function">GiveComputer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    zhangsan<span class="token punctuation">.</span><span class="token function">GiveBaggage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    Console<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token comment">//女同学</span>\n<span class="token keyword">class</span> <span class="token class-name">Classmate</span>\n<span class="token punctuation">{</span>\n    ExpressPerson YDY<span class="token punctuation">;</span>\n    <span class="token keyword">public</span> <span class="token function">Classmate</span><span class="token punctuation">(</span>ExpressPerson YDY<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">this</span><span class="token punctuation">.</span>YDY <span class="token operator">=</span> YDY<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">GiveComputer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>YDY<span class="token punctuation">.</span>Name <span class="token operator">+</span> <span class="token string">" 请你托运计算机"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">GiveBaggage</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>YDY<span class="token punctuation">.</span>Name <span class="token operator">+</span> <span class="token string">" 请你托运行李"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Main</span><span class="token punctuation">(</span>string<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    ExpressPerson YDY <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">ExpressPerson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    YDY<span class="token punctuation">.</span>Name <span class="token operator">=</span> <span class="token string">"宅急送"</span><span class="token punctuation">;</span>\n\n    Classmate Girl <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Classmate</span><span class="token punctuation">(</span>YDY<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    Girl<span class="token punctuation">.</span><span class="token function">GiveComputer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    Girl<span class="token punctuation">.</span><span class="token function">GiveBaggage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    Console<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>以上代码复用性太低，有何解决办法？</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180417130415-76be3c3e697f1de3994a4112b8c05d7c-f690e.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 487px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 74.74332648870637%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsSAAALEgHS3X78AAACT0lEQVQ4y5VTS6tSURTeR88lschRg/6Coyb9BtF5w5sUDRpKE4VAGjQTk0RLmiSKIEJXEBJvg1RENN9vfL/wgYpXfNH10dmtfThHHJTZgsNea+/vfOuNECdWq5VXUTQaldVqteehUOjS4/E89fv9l2C/gPMxeccYI5PJhE6K2+0+6PV6/Qf8hBuNBk6n07jVahET5/N5M0cosNlspwm9Xu9B7/f73wnBLcgOZLPZ3BIbHOl5QqfTeZrwGJBKpUKdTgeXSiU8nU7xYrFgCGG5XDbyhA6H4/yUi8Xi116vh7vd7gTIJtvtdkoIIfW3PKHL5TpNKJfLkdnMlggplcoHRqPxtVarfQimSKfTPYLvFegUaYhKpUJSqRT9j1B/uaPOZhAIBAdVIpGIiKJWqymDwUAFAgFkt9uRWCwW/ZMICi2EwtOZTIaGuaMVCsW9eDx+AU0R8DPH181isdyRyWR3AS+EmaQnkwkN9RbyuHA4fNrZEdlZOFYKhcKb0Wj0PhKJvPP5fMZKpaIH25JIJJ7wkXGdfzYYDD5C+iwuGAzqwf6QzWZfcjgK7hCCbViSkRiPx7jdbuP5fM5uBTiycUCanLB61/z2gM5iicCsRnjHbMowW53VaoXh28JG7Nbr9U8CTCaTn0lXNRrNffJDtVq9YhgGk3eCI1u03++JAx8fIWSFEDSgB2AMof+CIjPL5XLHef7EAS/IGYvFrsiwA243HA4ZGPg9F/E3PkKWMJfL9WAjSArMbDYjkbKE4MRynDIQfbm5ucHNZnMHjjE4/iPhbwcVAZhQP1oQAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180417130415" title="" data-src="/static/微信截图_20180417130415-76be3c3e697f1de3994a4112b8c05d7c-f690e.png" data-srcset="/static/微信截图_20180417130415-76be3c3e697f1de3994a4112b8c05d7c-28e07.png 200w,\n/static/微信截图_20180417130415-76be3c3e697f1de3994a4112b8c05d7c-e077b.png 400w,\n/static/微信截图_20180417130415-76be3c3e697f1de3994a4112b8c05d7c-f690e.png 487w" data-sizes="(max-width: 487px) 100vw, 487px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="5241524421961130000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`//寄东西\ninterface GiveObject\n{\n    void GiveComputer();\n    void GiveBaggage();\n}\n//毕业生\nclass Graduate : GiveObject\n{\n    ExpressPerson YDY;\n    public Graduate(ExpressPerson YDY)\n    {\n        this.YDY = YDY;\n    }\n    public void GiveComputer()\n    {\n        Console.WriteLine(YDY.Name + &quot; 请你托运计算机&quot;);\n    }\n    public void GiveBaggage()\n    {\n        Console.WriteLine(YDY.Name + &quot; 请你托运行李&quot;);\n    }\n}\n//女同学 : GiveGift\nclass Classmate : GiveObject\n{\n    Graduate zhangsan;\n    public Classmate(ExpressPerson YDY)\n    {\n        zhangsan = new Graduate(YDY);\n    }\n    public void GiveComputer()\n    {\n        zhangsan.GiveComputer();\n    }\n    public void GiveBaggage()\n    {\n        zhangsan.GiveBaggage();\n    }\n}\nstatic void Main(string[] args)\n{\n    ExpressPerson YDY = new ExpressPerson();\n    YDY.Name = &quot;宅急送&quot;;\n\n    Classmate Girl = new Classmate(YDY);\n\n    Girl.GiveComputer();\n    Girl.GiveBaggage();\n\n    Console.Read();\n}`, `5241524421961130000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="cpp"\n              >\n                <span class="gatsby-code-button-language">cpp</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="cpp"><pre style="counter-reset: linenumber NaN" class="language-cpp line-numbers"><code class="language-cpp"><span class="token comment">//寄东西</span>\ninterface GiveObject\n<span class="token punctuation">{</span>\n    <span class="token keyword">void</span> <span class="token function">GiveComputer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">void</span> <span class="token function">GiveBaggage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token comment">//毕业生</span>\n<span class="token keyword">class</span> <span class="token class-name">Graduate</span> <span class="token operator">:</span> GiveObject\n<span class="token punctuation">{</span>\n    ExpressPerson YDY<span class="token punctuation">;</span>\n    <span class="token keyword">public</span> <span class="token function">Graduate</span><span class="token punctuation">(</span>ExpressPerson YDY<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">this</span><span class="token punctuation">.</span>YDY <span class="token operator">=</span> YDY<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">GiveComputer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>YDY<span class="token punctuation">.</span>Name <span class="token operator">+</span> <span class="token string">" 请你托运计算机"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">GiveBaggage</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>YDY<span class="token punctuation">.</span>Name <span class="token operator">+</span> <span class="token string">" 请你托运行李"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token comment">//女同学 : GiveGift</span>\n<span class="token keyword">class</span> <span class="token class-name">Classmate</span> <span class="token operator">:</span> GiveObject\n<span class="token punctuation">{</span>\n    Graduate zhangsan<span class="token punctuation">;</span>\n    <span class="token keyword">public</span> <span class="token function">Classmate</span><span class="token punctuation">(</span>ExpressPerson YDY<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        zhangsan <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Graduate</span><span class="token punctuation">(</span>YDY<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">GiveComputer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        zhangsan<span class="token punctuation">.</span><span class="token function">GiveComputer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">GiveBaggage</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        zhangsan<span class="token punctuation">.</span><span class="token function">GiveBaggage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Main</span><span class="token punctuation">(</span>string<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    ExpressPerson YDY <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">ExpressPerson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    YDY<span class="token punctuation">.</span>Name <span class="token operator">=</span> <span class="token string">"宅急送"</span><span class="token punctuation">;</span>\n\n    Classmate Girl <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Classmate</span><span class="token punctuation">(</span>YDY<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    Girl<span class="token punctuation">.</span><span class="token function">GiveComputer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    Girl<span class="token punctuation">.</span><span class="token function">GiveBaggage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    Console<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>以上代码就是代理模式，复用了中介的功能。</p>\n<h3 id="模式动机-1"><a href="#%E6%A8%A1%E5%BC%8F%E5%8A%A8%E6%9C%BA-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式动机</h3>\n<p>一个客户不想或者不能够直接引用一个对象，而代理对象可以在客户端和目标对象之间起到中介的作用，去掉客户不能看到的内容和服务或者增添客户需要的额外服务。如在网页上查看一张图片，由于网速等原因图片不能立即显示，我们可以在图片传输过程中先把一些简单的用于描述图片的文字传输到客户端，此时这些文字就成为了图片的代理。</p>\n<h3 id="模式定义-2"><a href="#%E6%A8%A1%E5%BC%8F%E5%AE%9A%E4%B9%89-2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式定义</h3>\n<p>给某一个对象提供一个代理，并由代理对象控制对原对象的引用。代理模式的英文叫做 Proxy 或 Surrogate。代理模式是一种对象结构型模式。</p>\n<h3 id="模式结构-2"><a href="#%E6%A8%A1%E5%BC%8F%E7%BB%93%E6%9E%84-2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式结构</h3>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180417131314-159a86a6458b6d9228d924c3cf80666e-ffdbb.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 44.430844553243574%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAAB3UlEQVQoz5VSS2saURidahfJIqXpJpAsmqY0vyCrQH9DswmhhIJZJuv8ABGEtggiadMoPrOI4kpwYxAFB10Jiu/HjCi+FS0Djg0Y9eZ8wU4SShb9YPju3HPu+Z5cqVT6WiwWf0Wj0bNKpWItFAonHIwxRo7zer0bjUbjPJVK/YxEIj8EQbio1WrfdTrdK8IdDgf3xFqt1g0es+FwSI6BzNO9RqNZIm+1WnfpfjKZMEmS2II7MRgM64R7PJ4XTwTr9frv6XTKRqPRPblarV4vMntJ3maz7TSbTdbpdNhgMLglbr/flx4Lwh4Ec7ncJzw4QGb7KO0wk8l8pHtZllXkfT7f63w+v59IJI7C4bAF3M8Iumc2m5cJD4VCqkAgcK8FjPtfW3kOQKVKhmooqxFV3e121cFgUGWxWNacTudbrVb73mQyvXO5XNt2u32V+PBrbrf7g16v3zIajVuoYBP8N4TxPP8QAeUoZwS4brfbDNP/Uy6XZeovpntMGFpjns/nDBnJ+Maz2YxhO0yLzVApIn6/XzmjZ/x4PGYk2uv1GA0iFoudEpZMJi9p4jQkVMRIPJvNXvwjiNSVczwev8J+9hBZhKCAx1I6nf6ywL6hTZIoigJWTsTkB/jX/RW8A2EmYYcXB97UAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180417131314" title="" data-src="/static/微信截图_20180417131314-159a86a6458b6d9228d924c3cf80666e-fee1c.png" data-srcset="/static/微信截图_20180417131314-159a86a6458b6d9228d924c3cf80666e-a67b7.png 200w,\n/static/微信截图_20180417131314-159a86a6458b6d9228d924c3cf80666e-0b187.png 400w,\n/static/微信截图_20180417131314-159a86a6458b6d9228d924c3cf80666e-fee1c.png 800w,\n/static/微信截图_20180417131314-159a86a6458b6d9228d924c3cf80666e-ffdbb.png 817w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<ul>\n<li>Subject：抽象主题角色</li>\n<li>Proxy：代理主题角色</li>\n<li>RealSubject：真实主题角色</li>\n</ul>\n<h3 id="模式使用-3"><a href="#%E6%A8%A1%E5%BC%8F%E4%BD%BF%E7%94%A8-3" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式使用</h3>\n<ul>\n<li>远程（Remote）代理</li>\n<li>虚拟（Virtual）代理</li>\n<li>保护（Protect or Access）代理</li>\n<li>缓冲（Cache）代理</li>\n<li>防火墙（Firewall）代理</li>\n<li>同步化（Synchronization）代理</li>\n<li>智能引用（Smart Reference）代理</li>\n</ul>\n<h3 id="优缺点-2"><a href="#%E4%BC%98%E7%BC%BA%E7%82%B9-2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>优缺点</h3>\n<ul>\n<li>\n<p>优点</p>\n<ul>\n<li>代理模式能够协调调用者和被调用者，能够在一定程度上降低系统的耦合度。</li>\n<li>当对象在远程机器上，要通过网络来生成时速度可能会很慢，此时应用代理模式可以掩盖对象在网络上生成的过程，系统的速度会加快。</li>\n<li>对于大对象的加载(如大图片)，虚拟代理可以让加载过程在后台执行，前台使用的代理对象会使得整体运行速度得到优化。</li>\n</ul>\n</li>\n<li>\n<p>缺点</p>\n<ul>\n<li>请求的处理速度会变慢，并且实现代理模式需要额外的工作。</li>\n</ul>\n</li>\n</ul>\n<h3 id="模式应用-2"><a href="#%E6%A8%A1%E5%BC%8F%E5%BA%94%E7%94%A8-2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式应用</h3>\n<ul>\n<li>图片代理</li>\n<li>AOP(Aspect Oriented Programming)</li>\n</ul>',
id:"/home/runner/work/GatsbyBlog/GatsbyBlog/blog/设计模式之结构型模式（二）/index.md absPath of file >>> MarkdownRemark",timeToRead:10,frontmatter:{date:"2018-04-19 00:04:26",path:"/design-pattern-structure-2/",tags:"面试, 设计模式, 读书笔记",title:"设计模式之结构型模式（二）",draft:null}},{excerpt:"适配器模式(Adapter) 将一个类的接口转换成客户希望的另外一个接口。Adapter 模式使得原本由于接口不兼容而不能一起工作的那些类可以一起工作。 问题背景 在 NBA 我需要翻译 姚明刚来到 NBA，身材够高，球技够好 但是英语不是很懂，听不懂教练的战术安排 球员分为前锋、中锋和后卫 教练会给球员分配进攻、防守任务 模式动机 通常，客户类(client of class)通过类的接口访问它提供的服务。有时现有的类(existing class…",html:'<h2 id="适配器模式adapter"><a href="#%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8Fadapter" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>适配器模式(Adapter)</h2>\n<p>将一个类的接口转换成客户希望的另外一个接口。Adapter 模式使得原本由于接口不兼容而不能一起工作的那些类可以一起工作。</p>\n<h3 id="问题背景"><a href="#%E9%97%AE%E9%A2%98%E8%83%8C%E6%99%AF" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题背景</h3>\n<p>在 NBA 我需要翻译</p>\n<ul>\n<li>姚明刚来到 NBA，身材够高，球技够好</li>\n<li>但是英语不是很懂，听不懂教练的战术安排</li>\n<li>球员分为前锋、中锋和后卫</li>\n<li>教练会给球员分配进攻、防守任务</li>\n</ul>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180416133847-4df2b77c2c24025f39aa81b19ad514e4-fc791.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 46.23655913978495%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAAB0UlEQVQoz5VSPWiaURR9X76pkKlLQpq0JAj5WTuGQAtpOzqEbM4ubs4OKoZgCtJKimIWnSrFRXAQFJWA6KCigh+o8f+P+PuhVTGKr+eZBEIhJB543MvlvnPPPe8R8h8ikQjHYjgcPshkMhd+v/8M8TwUCu2wOiJHlkE6neZZTCQSpxQYDod0NpvRWCz2ldWTySS/FGE0GuUfFJ4MBgMqiuKCUBCE46cDnwUucqlUioMYdkir1Vqs5PP5Psbj8T8YcF2tVn+j54DVoZRXq9UkGAxyDoeDc7lcHPIFV6lUelmxXC7fec1m7Xb7PvF4PJs6nU6i1+t3TSbTmkwmW7XZbBKFQrFvsVj2pVLpG6vVum42m/eMRqMEyjeUSiVvt9s3tVrtB4PBsO10Ot8+PBghtVqtkcvl7jCB1uv1S6/Xe9Ttdmk2mx31+30aCAS+NBqNn6PRiKKXNptNQaPRbFUqlSIeblYsFinu/2CE8/l8hZTLZZGZz4CmK7fb/Wk8HtPHGgi/wRszyyeTCe10OnmVSvUevt6yIQz5fP4XI0S6QmD2Df5ZF41zKDPA6EOo+1soFNq9Xm+Kb/IZ5zsusQ0wZxCBPe+gTgCpOJ1O76Bc/0j4D7xYT+8PkZYSAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180416133847" title="" data-src="/static/微信截图_20180416133847-4df2b77c2c24025f39aa81b19ad514e4-fee1c.png" data-srcset="/static/微信截图_20180416133847-4df2b77c2c24025f39aa81b19ad514e4-a67b7.png 200w,\n/static/微信截图_20180416133847-4df2b77c2c24025f39aa81b19ad514e4-0b187.png 400w,\n/static/微信截图_20180416133847-4df2b77c2c24025f39aa81b19ad514e4-fee1c.png 800w,\n/static/微信截图_20180416133847-4df2b77c2c24025f39aa81b19ad514e4-fc791.png 930w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h3 id="模式动机"><a href="#%E6%A8%A1%E5%BC%8F%E5%8A%A8%E6%9C%BA" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式动机</h3>\n<ul>\n<li>通常，客户类(client of class)通过类的接口访问它提供的服务。有时现有的类(existing class)可以提供客户类的功能需要，但是它所提供的接口不一定是客户类所期望的。这是由于现有的接口名称与客户类所查找的不同等诸多不同原因导致的。</li>\n<li>在这种情况下， 现有的接口需要转化 (convert) 为客户类期望的接口，这样保证了对现有类的重用。适配器模式(Adapter Pattern)可以完成这样的转化。</li>\n</ul>\n<h3 id="模式定义"><a href="#%E6%A8%A1%E5%BC%8F%E5%AE%9A%E4%B9%89" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式定义</h3>\n<p>适配器模式(Adapter Pattern)： 将一个接口转换成客户希望的另一个接口，适配器模式使接口不兼容的那些类可以一起工作，其别名为包装器(Wrapper)。适配器模式既可以作为类结构型模式，也可以作为对象结构型模式。</p>\n<h3 id="模式结构"><a href="#%E6%A8%A1%E5%BC%8F%E7%BB%93%E6%9E%84" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式结构</h3>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180416135051-3ac83aefa401daeae91a2ad72b73ce7f-63438.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 38.49416755037115%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABUklEQVQoz4VSu06EQBTlEbOJdn6FfgGFjVbG1t6YEMPGxg/Qktp/wEYTE+MWiCE2FiQsBYGF8Eae2WYDzXYUu3hnAkbdbJgEDnPu3Hsu9wyh6/pTGIaPjuMcELDatqUR5nl+YxjGq+u6L0EQnHYcRQyttluKopyhPc/zewg9z/vsY1DwDnHz+ZweLLhcLh8Wi4WgqiruUBCEHYSapo1ns9lHlmVvURSddAWHO/zXLcamaTCyLLvPMMwu+rYsi+zPVVVFJUlCT6dTuq5ruhfC+fAi0bNarX4KS5K0ISbL8h/Rbc0Qtm0TYAwhiiLegwm4E9/3j2Gu16ZpjuM4PvydVJblOcz4CuKX0B2KH20V6wefpun7er3GpoDILeI4jhsBjOBMhXiYPY6D+89dwc0Zg6OYhCtzD4ZkkPQF3AXiJpMJEqPgr6SiKGIQNQELiPNdQfIbWBb1qlHuMKsAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180416135051" title="" data-src="/static/微信截图_20180416135051-3ac83aefa401daeae91a2ad72b73ce7f-fee1c.png" data-srcset="/static/微信截图_20180416135051-3ac83aefa401daeae91a2ad72b73ce7f-a67b7.png 200w,\n/static/微信截图_20180416135051-3ac83aefa401daeae91a2ad72b73ce7f-0b187.png 400w,\n/static/微信截图_20180416135051-3ac83aefa401daeae91a2ad72b73ce7f-fee1c.png 800w,\n/static/微信截图_20180416135051-3ac83aefa401daeae91a2ad72b73ce7f-63438.png 943w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<ul>\n<li>Target：目标抽象类</li>\n<li>Adapter：适配器类</li>\n<li>Adaptee：适配者类（被适配）</li>\n<li>Client：客户类</li>\n</ul>\n<p><strong>篮球运动员</strong></p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180416135031-581740fc917aea1dfa0f4e44737db470-ce704.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 767px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 60.104302477183836%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAACO0lEQVQoz5VTS4iSURi9OlA5NkkGM0xRWLSJNrlXV7V0US1auNFaWKibwqWhSxMCeywKXZQLQRAUVyKKiPh+4PuF7wc+IkmZiYSw8/+pzEBJXbj8fOf+3/nud879SLPZfBsMBj91Op2PLpfrkKxWNBpltVotfSKRMLfb7ddut5tL4V6vl2xd0+l0uV5Wq/XOCt7R6XSHKPKDwieTyRLFblAHIGZsJUSSYTabfRiNRm8CgcD+Gnc6nReLxWJ9MBgscd4PhULXKBz8NKHP5yN+v5+BQoxkMkn0ev1fa2xuYDabr5tMpkd2u/3WSVwgEPzxloVC4XfF+Xy+azQaD9Rq9YFCoTiv0Wj2JBLJZbFYfAn/sXg83q5MJrui1Wr35XI5G9gZ6M40GAwclUrFsdlse6lU6lTbL6vV6hH2d1SRUTEMOa7VasfZbPZhv99/hfio0Wh8q9frD6icUql0E2c9tPu1UqlElUola0NYLpffrY0B6Qto934do8BjnH9exyB+QuWEw+Hbw+GQxmDsF5FIxN4QxmKxp0iMdbvdJAjvw4BnIE0gjuN7LxKJPMeN4ogjILxL5cCQq+l02tvr9aLj8dgqFArPkZVr5H8Xl8s9e8KknTUulUrJhnTbhoaMlTRsaGhDBykMhCeXy9FPyePxME9VxA8kk8kQiEvi8TiBgwSCUwSUVgQO0oQOh4ODlgeLxWKJ9/kT7tKDkM/nmXw+/99bxLjRhBaL5QL0ruJ2SxgyxSBQ75NA5827/AWR+5aVMAo2xAAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180416135031" title="" data-src="/static/微信截图_20180416135031-581740fc917aea1dfa0f4e44737db470-ce704.png" data-srcset="/static/微信截图_20180416135031-581740fc917aea1dfa0f4e44737db470-6b8f1.png 200w,\n/static/微信截图_20180416135031-581740fc917aea1dfa0f4e44737db470-35c41.png 400w,\n/static/微信截图_20180416135031-581740fc917aea1dfa0f4e44737db470-ce704.png 767w" data-sizes="(max-width: 767px) 100vw, 767px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="38402617228555200000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`abstract class Player    //篮球运动员\n{\n    protected string name;\n    public Player(string name)\n    {\n        this.name = name;\n    }\n    public abstract void Attack();\n    public abstract void Defense();\n}\nclass Forwards : Player   //前锋\n{\n    public Forwards(string name) : base(name)\n    {\n    }\n    public override void Attack()\n    {\n        Console.WriteLine(&quot;前锋 {0} 进攻&quot;, name);\n    }\n    public override void Defense()\n    {\n        Console.WriteLine(&quot;前锋 {0} 防守&quot;, name);\n    }\n}\nclass ForeignCenter   //外籍中锋\n{\n    private string name;\n    public string Name\n    {\n        get { return name; }\n        set { name = value; }\n    }\n    public void 进攻()\n    {\n        Console.WriteLine(&quot;外籍中锋 {0} 进攻&quot;, name);\n    }\n    public void 防守()\n    {\n        Console.WriteLine(&quot;外籍中锋 {0} 防守&quot;, name);\n    }\n}\nstatic void Main(string[] args)\n{\n    Player pp = new Forwards(&quot;Patrick Patterson&quot;);\n    pp.Attack();\n\n    Player tw = new Guards(&quot;Terrence Williams&quot;);\n    tw.Attack();\n\n    ForeignCenter ym = new ForeignCenter(&quot;姚明&quot;);\n    ym.进攻();\n\n    Console.Read();\n}\nclass Translator : Player   //翻译者\n{\n    private ForeignCenter wjzf = new ForeignCenter();\n\n    public Translator(string name) : base(name)\n    {\n        wjzf.Name = name;\n    }\n\n    public override void Attack()\n    {\n        wjzf.进攻();\n    }\n\n    public override void Defense()\n    {\n        wjzf.防守();\n    }\n}\nstatic void Main(string[] args)\n{\n    Player pp = new Forwards(&quot;Patrick Patterson&quot;);\n    pp.Attack();\n\n    Player tw = new Guards(&quot;Terrence Williams&quot;);\n    tw.Attack();\n\n    Player ym = new Translator (&quot;姚明&quot;);\n    ym.Attack ();\n\n    Console.Read();\n}`, `38402617228555200000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="cpp"\n              >\n                <span class="gatsby-code-button-language">cpp</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="cpp"><pre style="counter-reset: linenumber NaN" class="language-cpp line-numbers"><code class="language-cpp">abstract <span class="token keyword">class</span> <span class="token class-name">Player</span>    <span class="token comment">//篮球运动员</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">protected</span> string name<span class="token punctuation">;</span>\n    <span class="token keyword">public</span> <span class="token function">Player</span><span class="token punctuation">(</span>string name<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> abstract <span class="token keyword">void</span> <span class="token function">Attack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">public</span> abstract <span class="token keyword">void</span> <span class="token function">Defense</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">class</span> <span class="token class-name">Forwards</span> <span class="token operator">:</span> Player   <span class="token comment">//前锋</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token function">Forwards</span><span class="token punctuation">(</span>string name<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">base</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> override <span class="token keyword">void</span> <span class="token function">Attack</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"前锋 {0} 进攻"</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> override <span class="token keyword">void</span> <span class="token function">Defense</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"前锋 {0} 防守"</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">class</span> <span class="token class-name">ForeignCenter</span>   <span class="token comment">//外籍中锋</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">private</span> string name<span class="token punctuation">;</span>\n    <span class="token keyword">public</span> string Name\n    <span class="token punctuation">{</span>\n        get <span class="token punctuation">{</span> <span class="token keyword">return</span> name<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n        set <span class="token punctuation">{</span> name <span class="token operator">=</span> value<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> 进攻<span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"外籍中锋 {0} 进攻"</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> 防守<span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"外籍中锋 {0} 防守"</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Main</span><span class="token punctuation">(</span>string<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    Player pp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Forwards</span><span class="token punctuation">(</span><span class="token string">"Patrick Patterson"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    pp<span class="token punctuation">.</span><span class="token function">Attack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    Player tw <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Guards</span><span class="token punctuation">(</span><span class="token string">"Terrence Williams"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    tw<span class="token punctuation">.</span><span class="token function">Attack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    ForeignCenter ym <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">ForeignCenter</span><span class="token punctuation">(</span><span class="token string">"姚明"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    ym<span class="token punctuation">.</span>进攻<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    Console<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">class</span> <span class="token class-name">Translator</span> <span class="token operator">:</span> Player   <span class="token comment">//翻译者</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">private</span> ForeignCenter wjzf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">ForeignCenter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">public</span> <span class="token function">Translator</span><span class="token punctuation">(</span>string name<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">base</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        wjzf<span class="token punctuation">.</span>Name <span class="token operator">=</span> name<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">public</span> override <span class="token keyword">void</span> <span class="token function">Attack</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        wjzf<span class="token punctuation">.</span>进攻<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">public</span> override <span class="token keyword">void</span> <span class="token function">Defense</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        wjzf<span class="token punctuation">.</span>防守<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Main</span><span class="token punctuation">(</span>string<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    Player pp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Forwards</span><span class="token punctuation">(</span><span class="token string">"Patrick Patterson"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    pp<span class="token punctuation">.</span><span class="token function">Attack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    Player tw <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Guards</span><span class="token punctuation">(</span><span class="token string">"Terrence Williams"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    tw<span class="token punctuation">.</span><span class="token function">Attack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    Player ym <span class="token operator">=</span> <span class="token keyword">new</span> Translator <span class="token punctuation">(</span><span class="token string">"姚明"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    ym<span class="token punctuation">.</span>Attack <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    Console<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><strong>鸭子适配器</strong></p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="45617546287296774000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`interface Duck\n{\n    public void quack();\n    public void fly();\n}\n// 野鸭子类\nclass MallardDuck : Duck\n{\n    public void quack()\n    {\n        Console.WriteLine(&quot;嘎嘎嘎...&quot;);\n    }\n\n    public void fly()\n    {\n        Console.WriteLine(&quot;我在飞哦！&quot;);\n    }\n}\ninterface Turkey\n{\n    public void gobble();\n    public void fly();\n}\n// 野火鸡类\nclass WildTurkey : Turkey\n{\n    public void gobble()\n    {\n        Console.WriteLine(&quot;咕咕咕...&quot;);\n    }\n\n    public void fly()\n    {\n        Console.WriteLine(&quot;我在飞，不过飞不远。&quot;);\n    }\n}\n// 火鸡适配器\nclass TurkeyAdapter : Duck\n{\n    Turkey turkey;\n    public TurkeyAdapter(Turkey turkey)\n    {\n        this.turkey = turkey;\n    }\n    public void quack()\n    {\n        turkey.gobble();\n    }\n    public void fly()\n    {\n        turkey.fly();\n    }\n}\n// 使用适配器\nstatic void Main(string[] args)\n{\n    MallardDuck duck = new MallardDuck();\n    WildTurkey turkey = new WildTurkey();\n    Duck turkeyAdapter = new TurkeyAdapter(turkey);\n\n    turkey.gobble();\n    turkey.fly();\n\n    testDuck(duck);\n    testDuck(turkeyAdapter);\n}\nstatic void testDuck(Duck duck)\n{\n    duck.quack();\n    duck.fly();\n}`, `45617546287296774000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="cpp"\n              >\n                <span class="gatsby-code-button-language">cpp</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="cpp"><pre style="counter-reset: linenumber NaN" class="language-cpp line-numbers"><code class="language-cpp">interface Duck\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">quack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">fly</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token comment">// 野鸭子类</span>\n<span class="token keyword">class</span> <span class="token class-name">MallardDuck</span> <span class="token operator">:</span> Duck\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">quack</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"嘎嘎嘎..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">fly</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"我在飞哦！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\ninterface Turkey\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">gobble</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">fly</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token comment">// 野火鸡类</span>\n<span class="token keyword">class</span> <span class="token class-name">WildTurkey</span> <span class="token operator">:</span> Turkey\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">gobble</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"咕咕咕..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">fly</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"我在飞，不过飞不远。"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token comment">// 火鸡适配器</span>\n<span class="token keyword">class</span> <span class="token class-name">TurkeyAdapter</span> <span class="token operator">:</span> Duck\n<span class="token punctuation">{</span>\n    Turkey turkey<span class="token punctuation">;</span>\n    <span class="token keyword">public</span> <span class="token function">TurkeyAdapter</span><span class="token punctuation">(</span>Turkey turkey<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">this</span><span class="token punctuation">.</span>turkey <span class="token operator">=</span> turkey<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">quack</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        turkey<span class="token punctuation">.</span><span class="token function">gobble</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">fly</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        turkey<span class="token punctuation">.</span><span class="token function">fly</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token comment">// 使用适配器</span>\n<span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Main</span><span class="token punctuation">(</span>string<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    MallardDuck duck <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">MallardDuck</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    WildTurkey turkey <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">WildTurkey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    Duck turkeyAdapter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">TurkeyAdapter</span><span class="token punctuation">(</span>turkey<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    turkey<span class="token punctuation">.</span><span class="token function">gobble</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    turkey<span class="token punctuation">.</span><span class="token function">fly</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token function">testDuck</span><span class="token punctuation">(</span>duck<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">testDuck</span><span class="token punctuation">(</span>turkeyAdapter<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">testDuck</span><span class="token punctuation">(</span>Duck duck<span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    duck<span class="token punctuation">.</span><span class="token function">quack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    duck<span class="token punctuation">.</span><span class="token function">fly</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><strong>类适配器与对象适配器</strong></p>\n<p>假设我们在软件开发中要记录日志，包括数据库记录日志 DatabaseLog 和文本文件记录日志 WriteLog</p>\n<p>开发过程需要引入一个新的日志接口，但新的日志接口和以前的不一样</p>\n<p><em>类适配器方式如下</em></p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180416141540-8255832a64faa7da5fea3259a1490d39-d1477.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 536px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 84.88805970149254%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAIAAABSJhvpAAAACXBIWXMAAA7EAAAOxAGVKw4bAAACWklEQVQ4y41SbXOaQBDm//+Vth860zaTTpMYNbYx+NKAeryICPKiICrHwXHHYVfMOJl8SLNzLDsP9+wuz650fGVZXiZpkaR5vMsSTFNSHt816fyq6xq8Zke3fededq47ekv2RmjTfPoYOYx34+nseYb8TbTebsM4+VjlxicHrJnGcDxy/VVWkCRN/0OuT/bSW3IonBAbdoSs9TLEYZwBKMTrzuuLQXxpW1SciYoJUZWUspIe6wqQWtTvVQaFScF3B5LlDE7JKkAp45iU+7TAWZnTqqAcwEpAkNMyx+RAS8J4IXVHzm3f+3w1/N5CN31/4e3hnrnaXT9YX66Gn37IX3/NxloEIHBU+2nm/mnJ31S7p/uyhCx38FedaKYfxW4YJWmWZdgJopGKRsrUCUJvEwdRAv9IWY4WiqINkaXEqRelKymMY3OuIWN2yPaUEUxyKLLH2dK1pzM1jIKSFynBlag5p+HGR9oEPPRMaSatwoNmhePJwnITN8S79Eym5jJWkYPMwA3SdSM7r8rtwXcC0w3MJA3gvKjNGKMnK0B4IQQ8p9ucM1aC/o2JE94MDfBzIF10L4qcEHIZ5RmEcYkm0Qss6kuKExlSquamN7Taj6jd1+RpiAmDMoqx6Q3mXdm4603ufk8Vc8u4eDtnXomH0eJnR73pTTtPRne4hD0DsDtYXLeV1qPe7uv3j3pf9WizAq+XRoIiju/quur5tjgWWQGal6Ct4ztIU4K1U9U5FwTne15VbysDee5Eg2d9YrhBnNneDnaOV7Xlxk9jNJt7QYy9TboMdoy/Jf8DJWm/SCpS/SYAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180416141540" title="" data-src="/static/微信截图_20180416141540-8255832a64faa7da5fea3259a1490d39-d1477.png" data-srcset="/static/微信截图_20180416141540-8255832a64faa7da5fea3259a1490d39-bb263.png 200w,\n/static/微信截图_20180416141540-8255832a64faa7da5fea3259a1490d39-9a78f.png 400w,\n/static/微信截图_20180416141540-8255832a64faa7da5fea3259a1490d39-d1477.png 536w" data-sizes="(max-width: 536px) 100vw, 536px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="55024858350052930000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`class DatabaseLogAdapter : DatabaseLog, Ilog\n{\n    public void Write()\n    {\n        this.WirteLog();\n    }\n}\nclass FileLogAdapter : FileLog, Ilog\n{\n    public void Write()\n    {\n        this.WirteLog();\n    }\n}`, `55024858350052930000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="cpp"\n              >\n                <span class="gatsby-code-button-language">cpp</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="cpp"><pre style="counter-reset: linenumber NaN" class="language-cpp line-numbers"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">DatabaseLogAdapter</span> <span class="token operator">:</span> DatabaseLog<span class="token punctuation">,</span> Ilog\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Write</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">WirteLog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">class</span> <span class="token class-name">FileLogAdapter</span> <span class="token operator">:</span> FileLog<span class="token punctuation">,</span> Ilog\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Write</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">WirteLog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><em>对象适配器</em></p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180416141951-6ef137141ef0134cc8f0ab1d710c55b4-eca56.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 554px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 51.44404332129964%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABkUlEQVQoz3VRf2+bMBDl+3+cSWv/mLZmS7u1JF1+uRASjAPEEIjBYMABXNNh0nTRpD2dT/K9O53eO+3tX3RD/AcXUkrZyU57Lw6lKCkMhwJI5mYAYBqS8u29WaWKl5gg/7gBmylOtgkLPoYV7Yb0xwSOp7a+8iYveBfQyzLFFhUFjr60H6fGGEYLTLaX4YFOGbNsY7ma5QVpX8vyVHVXCurmBNF2vpwl9NgIXvFcu1aUFbXjxcBCloP9MDum7JptxOmYYeRbB+KnRZSX5K9mKV+bpq14k7OqrHhKWZ6zrq8qCPVEe6orIZoh11IKTQ5yOed1XfcOKhP7UCZ0bQ8h5DAvB/TffoGyetCjQT+9X8Q3d6vb0ct4HsN91ldtn37TvdvvxucR+PrkHhJ+NnVmxXe6++nL7GZk/lxEmhcmD8/rx9/mGgUmCv1IDaN98uvZfJgAE2LDCUhWnqUBG9/rq8nS2roH2481yhhybQdt+kvUbUkL1Zfmubd3INqUPGtEbzs/32yHD2C9tne7JM9IRv8AlM8wnKdpoIsAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180416141951" title="" data-src="/static/微信截图_20180416141951-6ef137141ef0134cc8f0ab1d710c55b4-eca56.png" data-srcset="/static/微信截图_20180416141951-6ef137141ef0134cc8f0ab1d710c55b4-77254.png 200w,\n/static/微信截图_20180416141951-6ef137141ef0134cc8f0ab1d710c55b4-789d0.png 400w,\n/static/微信截图_20180416141951-6ef137141ef0134cc8f0ab1d710c55b4-eca56.png 554w" data-sizes="(max-width: 554px) 100vw, 554px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="66870945073286350000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`class LogAdapter : Ilog\n{\n    private Log log;\n    public LogAdapter(Log log)\n    {\n        this.log = log;\n    }\n    public void Write()\n    {\n        log.WriteLog();\n    }\n}`, `66870945073286350000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="cpp"\n              >\n                <span class="gatsby-code-button-language">cpp</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="cpp"><pre style="counter-reset: linenumber NaN" class="language-cpp line-numbers"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">LogAdapter</span> <span class="token operator">:</span> Ilog\n<span class="token punctuation">{</span>\n    <span class="token keyword">private</span> Log log<span class="token punctuation">;</span>\n    <span class="token keyword">public</span> <span class="token function">LogAdapter</span><span class="token punctuation">(</span>Log log<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">this</span><span class="token punctuation">.</span>log <span class="token operator">=</span> log<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Write</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        log<span class="token punctuation">.</span><span class="token function">WriteLog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>上面两种适配方式，可以看出在类适配方式中，是通过类的继承来实现的，同时也具有接口 ILog 的所有行为，这些就违背了面向对象设计原则中的类的单一职责原则，而对象适配器则是通过对象组合的方式来实现的，则符合面向对象的精神，所以推荐用对象适配的模式。</p>\n<h3 id="优缺点"><a href="#%E4%BC%98%E7%BC%BA%E7%82%B9" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>优缺点</h3>\n<ul>\n<li><em>将目标类和适配者类解耦</em>，通过引入一个适配器类来重用现有的适配者类，而无须修改原有代码。</li>\n<li><em>增加了类的透明性和复用性</em>，将具体的实现封装在适配者类中，对于客户端类来说是透明的，而且提高了适配者的复用性。</li>\n<li><em>灵活性和扩展性都非常好</em>，通过使用配置文件，可以很方便地更换适配器，也可以在不修改原有代码的基础上增加新的适配器类，完全符合“开闭原则”。</li>\n</ul>\n<h3 id="模式使用"><a href="#%E6%A8%A1%E5%BC%8F%E4%BD%BF%E7%94%A8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式使用</h3>\n<ul>\n<li>系统需要使用的类的接口不符合系统的要求。</li>\n<li>想要建立一个可以重复使用的类，用于与一些彼此之间没有太大关联的一些类，包括一些可能在将来引进的类一起工作。这些源类不一定有很复杂的接口。</li>\n<li>（对象适配器而言）在设计里，需要改变多个已有子类的接口，如果使用类的适配器模式，就要针对每一个子类做一个适配器，而这不太实际。</li>\n</ul>\n<h2 id="桥接模式bridge"><a href="#%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8Fbridge" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>桥接模式(Bridge)</h2>\n<p>将抽象部分与它的实现部分分离，使它们都可以独立地变化。</p>\n<h3 id="问题背景-1"><a href="#%E9%97%AE%E9%A2%98%E8%83%8C%E6%99%AF-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题背景</h3>\n<p>凭什么你的手机游戏我不能玩？</p>\n<ul>\n<li>M 品牌手机的游戏，N 品牌不能玩</li>\n<li>不同品牌手机操作系统不同，软件不通用</li>\n<li>用程序模拟，N 品牌手机，有一个游戏，运行游戏的程序如何写</li>\n</ul>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="7846463712253371000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`static void Main(string[] args)\n{\n    MobilePhoneNGame game = new MobilePhoneNGame();\n    game.Run();\n\n    Console.Read();\n}\n\nclass MobilePhoneNGame\n{\n    public void Run()\n    {\n        Console.WriteLine(&quot;运行N品牌手机游戏&quot;);\n    }\n}`, `7846463712253371000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="cpp"\n              >\n                <span class="gatsby-code-button-language">cpp</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="cpp"><pre style="counter-reset: linenumber NaN" class="language-cpp line-numbers"><code class="language-cpp"><span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Main</span><span class="token punctuation">(</span>string<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    MobilePhoneNGame game <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">MobilePhoneNGame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    game<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    Console<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">class</span> <span class="token class-name">MobilePhoneNGame</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"运行N品牌手机游戏"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>如果有一个 M 品牌手机，也有游戏可以运行，如何设计？</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="15827468085985874000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`class MobilePhoneGame\n{\n    public virtual void Run()\n    {\n    }\n}\n\nclass MobilePhoneNGame : MobilePhoneGame\n{\n    public override void Run()\n    {\n        Console.WriteLine(&quot;运行N品牌手机游戏&quot;);\n    }\n}\n\nclass MobilePhoneMGame : MobilePhoneGame\n{\n    public override void Run()\n    {\n        Console.WriteLine(&quot;运行M品牌手机游戏&quot;);\n    }\n}`, `15827468085985874000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="cpp"\n              >\n                <span class="gatsby-code-button-language">cpp</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="cpp"><pre style="counter-reset: linenumber NaN" class="language-cpp line-numbers"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">MobilePhoneGame</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">class</span> <span class="token class-name">MobilePhoneNGame</span> <span class="token operator">:</span> MobilePhoneGame\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> override <span class="token keyword">void</span> <span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"运行N品牌手机游戏"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">class</span> <span class="token class-name">MobilePhoneMGame</span> <span class="token operator">:</span> MobilePhoneGame\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> override <span class="token keyword">void</span> <span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"运行M品牌手机游戏"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>如果 M 品牌和 N 品牌手机，都添加了通讯录怎么办？</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180416151749-4e8ca1dbf819980b48c9cbf865b06839-9bee3.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 57.4698795180723%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAACVklEQVQoz3VSS2taQRS+ei2UJrWSFGMruGz/hG5cdCPSRBD6IEsXWXZbCkJxk1QUXbY7UdtQYlERF12okGjV+H6ERI3Wd1GbaBORCN5+c3uTNpIODOebb74558w5h6LmFk3TVK/XowlutVpJhlvAXwkHSC8tLVH/XYeHh6ztdrtULpfjHx0d8fv9voBwwG+q1Wq8Xq9Hy+XyK86hAJgfCoXofD7Pvk2n09ednpyc3BSLzVKj0UjlcrmY427NixD0OpFIJFibyWRu7+/vr9nt9ud+v/8l+Afzjx0Ox51UKrXqdDpfuN3uZ9A8JPze3h7v3y/zOIfSZrPJkD0ejxnwq4RvNBoCPOAT7PF4ZKjlrNPpMCgLUygUtISHpa8chsNhVry7uytpt9vfR6PRcDAYXCDAk0ux1+vlcxlK0bDKcDj8Bc0Zaq7ifinggv/9jkwmo4LB4Aq+vOZyuR4FAgHBDXXlQSOx2WxPUZbHPp/vSmM2m/8Ai8Ui0uv1yxsbGxKVSiVaXFxcUCqVwvX1dbHBYBBvbm7eNZlM94CXdTqdRK1Wi8Ri8YJCoRBqtdqVra2t+0ajUUh8Wa1Wikomk7lYLNYpFosN4B+RSGQ7m81W4/F48+Dg4CfGw4tmBaDpY0zqaEoPd19QkiK0bdhBNBr1EYcoGUWhwKPZbMY2giw4Dp6enjKTyYQ912q1BBpRIvj8/JwhWjTsGzRn0+n0cujT3IzyKGTz/vj4+BOG1QG7jea8LpVKNpydGGoXsnuLLN7hbgecHXefkZke9gPOHyuVyg7uDZxD6jdT7KIwEos+LAAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180416151749" title="" data-src="/static/微信截图_20180416151749-4e8ca1dbf819980b48c9cbf865b06839-fee1c.png" data-srcset="/static/微信截图_20180416151749-4e8ca1dbf819980b48c9cbf865b06839-a67b7.png 200w,\n/static/微信截图_20180416151749-4e8ca1dbf819980b48c9cbf865b06839-0b187.png 400w,\n/static/微信截图_20180416151749-4e8ca1dbf819980b48c9cbf865b06839-fee1c.png 800w,\n/static/微信截图_20180416151749-4e8ca1dbf819980b48c9cbf865b06839-9bee3.png 830w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>如果再添加 Mp3 音乐播放功能，怎么修改？</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180416151933-22a537db32ca20956f2fefc94f314a48-46608.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 39.54635108481263%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABh0lEQVQoz31QuWoCURS9EwVNM50kTf4lfZqAheWU/kEKIUVqSZHlC1KIEwNhIJEQhDQpFNxmRlxGQQv3PS64EV7OG54QJeTC5Z533rn3vXOJEJZl8ULz+Zw0TSNVVWkymUicq9frV6VSqVqpVC75uVgsSqFQiCKRCPX7fRIc7QRjzK61Ws3GIu2BaLqZzWas2+1eC6207cEjO/07kUwm9yknT6/X6woGgyc+n8+Ns0Pw0laUSCR2u0zTpHw+z4XUarVOgROFQuE1FovJQiL9rqlUyl0ulx+y2axZrVbPOQe9Y/tbarfbEr5sD4Sts8FgsBqNRlY8HpeFnQOR9sDpdOqC5hM7Zr1eTxEaJ4bSn6EoyrHH4zmkf0KWZbff7z/a5wOBAJGu62HDMN5gQYXdu0wmEwX3hBfv0+n0C1aiCf4Z/Dt0d9CHcRcFvs3lco+4+4DugoTNr8ViwWBjjB0a6/WaDYfDFbAJ6988m82mybnlcsmAdWgnm82GNRoNHfwYllmn01H5vB8KXiUaagt21wAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180416151933" title="" data-src="/static/微信截图_20180416151933-22a537db32ca20956f2fefc94f314a48-fee1c.png" data-srcset="/static/微信截图_20180416151933-22a537db32ca20956f2fefc94f314a48-a67b7.png 200w,\n/static/微信截图_20180416151933-22a537db32ca20956f2fefc94f314a48-0b187.png 400w,\n/static/微信截图_20180416151933-22a537db32ca20956f2fefc94f314a48-fee1c.png 800w,\n/static/微信截图_20180416151933-22a537db32ca20956f2fefc94f314a48-46608.png 1014w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>如果再添加 S 品牌手机，并且有相同功能，怎么修改？</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180416152431-569d0ec23f082fb846e48716e7a3df03-41931.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 27.015706806282726%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsSAAALEgHS3X78AAABDUlEQVQY02NgwAH+///PCKIfPXpkcP369RdXrlwJhIozMeAD7e3tIEUwLjMrEAgLC7Nqa2uzAfmMa9askTh16lTO7t27VUEKDA0N2Xh4eFiVlJRYgVwWqCUMJSUlDJ8/f2Zg+PPnD1jw9u3bBVevXr108eJFSRB///79IA0MDx480AGKnb106ZIniA80GCz++/dvFqDLd127dm0yzOVbt25FuBTIsTh+/HiGjIwMB7IPOjs7xU6ePFm0du1aFXTfHTlyJObAgQMeKIIXLlzYDgyfbUB6ARCvBrKXXL58ee/58+cXA/l7zp07txCIVwNdOA+I9wPFFgNdvB1ILwHSK4G+WgpkbwDqWQG0mAsAKfiam5jRZf8AAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180416152431" title="" data-src="/static/微信截图_20180416152431-569d0ec23f082fb846e48716e7a3df03-fee1c.png" data-srcset="/static/微信截图_20180416152431-569d0ec23f082fb846e48716e7a3df03-a67b7.png 200w,\n/static/微信截图_20180416152431-569d0ec23f082fb846e48716e7a3df03-0b187.png 400w,\n/static/微信截图_20180416152431-569d0ec23f082fb846e48716e7a3df03-fee1c.png 800w,\n/static/微信截图_20180416152431-569d0ec23f082fb846e48716e7a3df03-41931.png 955w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>怎么这么麻烦，换一种方式试一下</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180416152545-bcadd1180f179aa7bf4411ef086e4866-8fcb4.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 26.769230769230766%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsSAAALEgHS3X78AAABI0lEQVQY02NgAIKMjAwGdPD//39GEP3s2TPpmzdvvrl69WoSVJwJXS0nJyeCM3nyZIYPHz6AmCAD2FRUVFgFBARYNTU1WYF8phkzZvCdOnUq5+jRozogRZaWlmxCQkKsIHXMzMxsIDVASxgaGhoYPn/+DLaRGaTwzp07xbdv375y5MgRXhB/7dq1YPGHDx9KAF14ESgXDuKfOHGCGWQACNy/f3/L3bt3FyH7CATAGnft2mV98uTJbC4ggIqBFDAWFBQIAMVLt23bZgBVzwSVZwa6OurgwYPBUHEWMHn58uUdwPDZef78+UVAvPLixYvLr1+/fuTKlSsLgHjPpUuXFgLF1pw7d24OUN0+oPqlQPn9QFevB6pfCpRbDBTfBMTrgGwBAMdQm0rrU4T1AAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180416152545" title="" data-src="/static/微信截图_20180416152545-bcadd1180f179aa7bf4411ef086e4866-fee1c.png" data-srcset="/static/微信截图_20180416152545-bcadd1180f179aa7bf4411ef086e4866-a67b7.png 200w,\n/static/微信截图_20180416152545-bcadd1180f179aa7bf4411ef086e4866-0b187.png 400w,\n/static/微信截图_20180416152545-bcadd1180f179aa7bf4411ef086e4866-fee1c.png 800w,\n/static/微信截图_20180416152545-bcadd1180f179aa7bf4411ef086e4866-8fcb4.png 975w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>违背了面向对象单一职责原则</p>\n<p>为什么抽象了手机品牌，或抽象了手机软件，当需求变化时，感觉如此不稳定？</p>\n<h3 id="模式动机-1"><a href="#%E6%A8%A1%E5%BC%8F%E5%8A%A8%E6%9C%BA-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式动机</h3>\n<p>桥接模式的用意是“将抽象化(Abstraction)与实现化(Implementation)脱耦，使得二者可以独立地变化”。</p>\n<h3 id="模式定义-1"><a href="#%E6%A8%A1%E5%BC%8F%E5%AE%9A%E4%B9%89-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式定义</h3>\n<p>将抽象部分与它的实现部分分离，使它们都可以独立地变化。它是一种对象结构型模式，又称为柄体(Handle and Body)模式或接口(Interface)模式。</p>\n<h3 id="解耦变化"><a href="#%E8%A7%A3%E8%80%A6%E5%8F%98%E5%8C%96" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>解耦变化</h3>\n<p>我们需要解耦这两个方向的变化，把它们之间的强耦合关系改成弱联系。我们把手机品牌和手机软件的实现分别当作两个独立的部分来对待。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180416153811-b489329fc09671d4aa2356316cf81060-63a9f.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 46.559633027522935%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsSAAALEgHS3X78AAABCUlEQVQoz02RSQ9EUBCE/f//JY4EFweJEOvYxr7PfHktog50d6l69Zr2U9i2reu6JEniOG7b9jzP3wuwfd9D8QGfHcchc+26Ll7f77eqKtd1HceJoqhpGoaHAgV2ZVk6Cnmej+PIEOEtbhSWZVnXNU1T9By+KqDHt65raamHYbjFEmCaJvIEQYCSFPu+v2NjChuGIckpsLhjy0vOxx7uaR88LL6Xwi3GZp5nwhBbark/FyMwEZhAEXVRwJ0V7Ara5/Pxfd8wDJZRFAWt53m6rtu23SqQ1jRN9gTL2igsy2JOEI1GzORnIKblcNkwEaSGZR1Zlr1Z7aF5opSL0RJVCibyL0oFiloB6g+66f3IGHdkfAAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180416153811" title="" data-src="/static/微信截图_20180416153811-b489329fc09671d4aa2356316cf81060-fee1c.png" data-srcset="/static/微信截图_20180416153811-b489329fc09671d4aa2356316cf81060-a67b7.png 200w,\n/static/微信截图_20180416153811-b489329fc09671d4aa2356316cf81060-0b187.png 400w,\n/static/微信截图_20180416153811-b489329fc09671d4aa2356316cf81060-fee1c.png 800w,\n/static/微信截图_20180416153811-b489329fc09671d4aa2356316cf81060-63a9f.png 872w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>这时对于手机品牌和手机软件这两个类都可以独立的变化了！我们要做的工作就是把这两部分之间连接起来，那如何连接呢？Bridge 使用了对象聚合的方式，像一座桥。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="22511397441014090000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`abstract class MobilePhoneSoft  //手机软件\n{\n\n    public abstract void Run();\n}\nclass MobilePhoneGame : MobilePhoneSoft   //手机游戏\n{\n    public override void Run()\n    {\n        Console.WriteLine(&quot;运行手机游戏&quot;);\n    }\n}\nclass MobilePhoneAddressList : MobilePhoneSoft    //手机通讯录\n{\n    public override void Run()\n    {\n        Console.WriteLine(&quot;运行手机通讯录&quot;);\n    }\n}\nclass MobilePhoneMP3 : MobilePhoneSoft    //手机MP3播放\n{\n    public override void Run()\n    {\n        Console.WriteLine(&quot;运行手机MP3播放&quot;);\n    }\n}\nabstract class MobilePhoneBrand //手机品牌\n{\n    protected MobilePhoneSoft soft;\n\n    //设置手机软件\n    public void SetHandsetSoft(MobilePhoneSoft soft)\n    {\n        this.soft = soft;\n    }\n    //运行\n    public abstract void Run();\n}\nclass MobilePhoneN : MobilePhoneBrand //手机品牌N\n{\n    public override void Run()\n    {\n        soft.Run();\n    }\n}\nstatic void Main(string[] args)\n{\n    MobilePhoneBrand ab;\n    ab = new MobilePhoneN();\n\n    ab.SetHandsetSoft(new MobilePhoneGame());\n    ab.Run();\n\n    ab.SetHandsetSoft(new MobilePhoneAddressList());\n    ab.Run();\n\n    Console.Read();\n}`, `22511397441014090000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="cpp"\n              >\n                <span class="gatsby-code-button-language">cpp</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="cpp"><pre style="counter-reset: linenumber NaN" class="language-cpp line-numbers"><code class="language-cpp">abstract <span class="token keyword">class</span> <span class="token class-name">MobilePhoneSoft</span>  <span class="token comment">//手机软件</span>\n<span class="token punctuation">{</span>\n\n    <span class="token keyword">public</span> abstract <span class="token keyword">void</span> <span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">class</span> <span class="token class-name">MobilePhoneGame</span> <span class="token operator">:</span> MobilePhoneSoft   <span class="token comment">//手机游戏</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> override <span class="token keyword">void</span> <span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"运行手机游戏"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">class</span> <span class="token class-name">MobilePhoneAddressList</span> <span class="token operator">:</span> MobilePhoneSoft    <span class="token comment">//手机通讯录</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> override <span class="token keyword">void</span> <span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"运行手机通讯录"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">class</span> <span class="token class-name">MobilePhoneMP3</span> <span class="token operator">:</span> MobilePhoneSoft    <span class="token comment">//手机MP3播放</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> override <span class="token keyword">void</span> <span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"运行手机MP3播放"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\nabstract <span class="token keyword">class</span> <span class="token class-name">MobilePhoneBrand</span> <span class="token comment">//手机品牌</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">protected</span> MobilePhoneSoft soft<span class="token punctuation">;</span>\n\n    <span class="token comment">//设置手机软件</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">SetHandsetSoft</span><span class="token punctuation">(</span>MobilePhoneSoft soft<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">this</span><span class="token punctuation">.</span>soft <span class="token operator">=</span> soft<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token comment">//运行</span>\n    <span class="token keyword">public</span> abstract <span class="token keyword">void</span> <span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">class</span> <span class="token class-name">MobilePhoneN</span> <span class="token operator">:</span> MobilePhoneBrand <span class="token comment">//手机品牌N</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> override <span class="token keyword">void</span> <span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        soft<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Main</span><span class="token punctuation">(</span>string<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    MobilePhoneBrand ab<span class="token punctuation">;</span>\n    ab <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">MobilePhoneN</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    ab<span class="token punctuation">.</span><span class="token function">SetHandsetSoft</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token function">MobilePhoneGame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    ab<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    ab<span class="token punctuation">.</span><span class="token function">SetHandsetSoft</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token function">MobilePhoneAddressList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    ab<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    Console<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="模式结构-1"><a href="#%E6%A8%A1%E5%BC%8F%E7%BB%93%E6%9E%84-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式结构</h3>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180416154303-e82358905699d76485998cc03faf86af-99684.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 39.08174692049272%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABqUlEQVQoz31STUsCURQdxRYRBBUt8lf0A1rlwm1RexctDVq1CqwfEKELbVBDdFEgCNIi3Y0fjOMw4ajoqPgdBjpudGMS4nSuqJRRBy7n3XfuO++9+x6TTCZvY7HYXTqdvsf4hAE0TdNR0LhSqRxUq9XHRCLB8jzPKoryVCqVzKSB9cwqxuOxNplMNEIul0uZTKZtTOttNts66djMRtpoNNKoltBsNq9J63Q6hl+G9Xr9vd1uDyB+lMtlF815PB59NBpdozHHcWcw+Gw0GipYBU9wynPSZFk22O12xmKxzLysVivD+P3+3UAgcATeFwRhY37lWRDcbvemz+fbczgch06n04xaIzbc+taaZe2C/4NuHn9pSyzNcGweJ0sWCoUYmixFIpFjURQfcC0xk8nEJUni8vm8jLkrXN9aLBZl5BzyOJjWhlmWpb4zwWBw5vwDKLhEP98W+XQ6nTF694xN3av13W536vV6jWQYDod1TK1Wk1As9Hq91HA4zONrnGaz2QAeK4vvIiD4wWCgtFqtG3ydC+QKNB4PKPT7/VdVVV9cLtcOGYZCId0XhYBdMXVs8HwAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180416154303" title="" data-src="/static/微信截图_20180416154303-e82358905699d76485998cc03faf86af-fee1c.png" data-srcset="/static/微信截图_20180416154303-e82358905699d76485998cc03faf86af-a67b7.png 200w,\n/static/微信截图_20180416154303-e82358905699d76485998cc03faf86af-0b187.png 400w,\n/static/微信截图_20180416154303-e82358905699d76485998cc03faf86af-fee1c.png 800w,\n/static/微信截图_20180416154303-e82358905699d76485998cc03faf86af-99684.png 893w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<ul>\n<li>Abstraction：抽象类</li>\n<li>RefinedAbstraction：扩充抽象类</li>\n<li>Implementor：实现类接口</li>\n<li>ConcreteImplementor：具体实现类</li>\n</ul>\n<p>在桥接模式中不仅 Implementor 具有变化(ConcreateImplementior)，而且 Abstraction 也可以发生变化(RefinedAbstraction)，这是一个多对多的关系，而且两者的变化是完全独立的。RefinedAbstraction 与 ConcreateImplementior 之间松散耦合，它们仅仅通过 Abstraction 与 Implementor 之间的聚合关系联系起来。</p>\n<h3 id="模式范例"><a href="#%E6%A8%A1%E5%BC%8F%E8%8C%83%E4%BE%8B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式范例</h3>\n<p>考虑不同平台的日志记录，对于操作数据库、写入文本文件所调用的方式可能是不一样的，为此对于不同的日志记录方式，我们需要提供各种不同平台上的实现，对上面的类做进一步的设计得到了下面的结构图</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180416154514-80797985756448c8c5a9362f30dd3fc0-bb574.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 410px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 52.926829268292686%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABzElEQVQoz3VSO2/TUBT276jEjASqVNhQBn4LO1XVdENMFQ0MiEe3zu2AaFRVYmJJlw6gKBUIYeJrJ7br67cT+9rX1En84LPTB5XgDEfnnO98557HFaq/pCxLaN/3J5NJEASSJAWNwK3+JcIVq6jKoixyOJZl2bYNjt9IXcj3lzmXabfJt14GVZKIruuEEE3TUCiM2H9fXmQ8sQmzZGN4ZpMz3xwlnIdhqCgKYyyOE1cfmtLAJN9iS05dZTG/uCGz8VfSefhjp/X9RUvpPLA+v6obQIdXmh5u/Npe+/myJXYeqW8fJ7a0hGpyRE6DnTv83T3+fpV1VpxPz5dYPUWzBfvgCeJ8d5W/ueu9vh9b4g15ei7Sblv/2CYH685R2/zyoajnb8jNDo2TPbu7Odx/anS36PGzyNPAKopcmM1mLE6ysvJZagXR77y6mOdJklzvD2Mjks5L6k1DnmVFhY3MsqyeWRnVYlIjz+sOcRVZJrIsq6oKjZ2NxmNNHYfTKdA8X+iaiiBu0e/3BdM0KaVwsqaY4zg4D21EFEXDMFzXBep5HlDkoCgoOH6v1xPSNOWcw0H/gGFEUYQIOkcV9AwDGpcDihx8mziOYQwGgz8o7VBQhoiXggAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180416154514" title="" data-src="/static/微信截图_20180416154514-80797985756448c8c5a9362f30dd3fc0-bb574.png" data-srcset="/static/微信截图_20180416154514-80797985756448c8c5a9362f30dd3fc0-0fa18.png 200w,\n/static/微信截图_20180416154514-80797985756448c8c5a9362f30dd3fc0-c3228.png 400w,\n/static/微信截图_20180416154514-80797985756448c8c5a9362f30dd3fc0-bb574.png 410w" data-sizes="(max-width: 410px) 100vw, 410px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>现在的这种设计方案本身是没有任何错误的，假如现在我们要引入一种新的 xml 文件的记录方式，则上面的类结构图会变成</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180416154617-359e9d394aa362af00e82891db4b6159-37d31.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 624px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 34.77564102564102%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsSAAALEgHS3X78AAABUklEQVQY001Qy07DMBDMP3ApHPgiPoYzB1qQEJy4c0DiAyqVG1SAKEiIEwIJWlH6SNv4lcQxTUvjOLEdNgEhRnuwZ3dmVusUAGut0YU1ZVVQSgW+TzCiGPEw0Fr/8NYWxhbagKD8OsU/AAdzxhgpE8w4CmMSLfl8qVQKbGUB7vZvvhTL0KXt49H5Abk/TVWWyiTNbdS9+mjWB806714rXYCdzmTrKdhrDQ8vyLO3+hXH7x20v0ka6/hkqzQ05ZLh5QFtbOB6LWwfVVwZu91ktV28tjM7exSl2Bgbc8r7D/T1RrgvSSJhMZVpgQes24ESqJ/r8hYqlT1P3L75d71g6s+Nzh13PJ7O0OIrgTYNxLQCQp6HWZZrlWt4YIwJIZPJxKcIrPM0YQQNhyMHGkEQxPNPOLjPqBDCdd0oihilECWTlc8YkJ7ncc7BA7aIF0sYgIxvEGl64OF3p/AAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180416154617" title="" data-src="/static/微信截图_20180416154617-359e9d394aa362af00e82891db4b6159-37d31.png" data-srcset="/static/微信截图_20180416154617-359e9d394aa362af00e82891db4b6159-89539.png 200w,\n/static/微信截图_20180416154617-359e9d394aa362af00e82891db4b6159-cb00c.png 400w,\n/static/微信截图_20180416154617-359e9d394aa362af00e82891db4b6159-37d31.png 624w" data-sizes="(max-width: 624px) 100vw, 624px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>我们新增加了一个继承于 Log 基类的子类，而没有修改其它的子类，这样也符合了开放-封闭原则。如果我们引入一种新的平台，比如说我们现在开发的日志记录工具还需要支持 Borland 平台，此时该类结构又变成</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180416154718-ba3b8415467957cebd1ed76eabba1675-bb96f.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 512px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 42.3828125%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABcklEQVQY021Qv0vDQBTuXyE4dXJwEJwcFAQ3/RP0H3Byt4WiICjSiovgppODDkILXXQTFHQpVNC2Sa+55JL7laRteomaJqlJiq1DP467x/ve9973LjP6QxSFUZicOAqCgFJqmiaEkHMexykfpGw4kWRGsxCGoaIouq5jjAkhcZeZZVOx7/W/erRH1S7VBgMnHmgYhizLjDHLsntctzF0beILO4qif+LUCS7npZMVqbTRudj6EdZ4k8mt3ey2i2tyaR1dbYdhMF40k7SJgpjHd3vG8QI5W1bPV78dPhWnD7rewaeLpLiELjf94TDNRslkz/OE6wkOu+1X1nxxyacQTpwc2/N93xkIwYAN3njz2aOScN2YTWwDABQFmgxLxC1UcK5Mqu+9QZe3AUAIwQQqw6gGrMMq26/Qh49+lxNV1eLvyLRaLd3ANtUfayh7AOZycv5eEZYONaRpWqPR0JDeN/HtUytbkOYL8KjSsYlKKKvX679kUqmxsvk5QQAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180416154718" title="" data-src="/static/微信截图_20180416154718-ba3b8415467957cebd1ed76eabba1675-bb96f.png" data-srcset="/static/微信截图_20180416154718-ba3b8415467957cebd1ed76eabba1675-7728b.png 200w,\n/static/微信截图_20180416154718-ba3b8415467957cebd1ed76eabba1675-23f96.png 400w,\n/static/微信截图_20180416154718-ba3b8415467957cebd1ed76eabba1675-bb96f.png 512w" data-sizes="(max-width: 512px) 100vw, 512px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>Bridge 模式粉墨登场，我们需要解耦这两个方向的变化，把它们之间的强耦合关系改成弱联系。我们把日志记录方式和不同平台上的实现分别当作两个独立的部分来对待</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180416154820-4d98120973fd1418b3e9a2172ec43dbd-aa6cd.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 597px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 25.29313232830821%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsSAAALEgHS3X78AAABEElEQVQY0yWOv0rEQBDG8yBiIRxY2PkEdtr7Bgc24hscqKiFiIWCjZ1iddgKllYiaKGNgWTvspLLP8zlvNvsbW43u+uXy8B8zAzzm/kcu4yqqpIkCcMQmqZplmVQzjnmYs6r2qZPx/Sk8322OTrfYIM3IEbXTguXZem6rud5URSBRyulrJvQStXS2uD5yr3Y8q536M32ZPhhrNVaO0isMsaEEEVRoEaBFlx712hpFjOjRDkXefEn5cJKrgQD7sCq7/tQOGy38zwnhAT0xyrxSkX3IezeDS9fprVuztFxtf/4u3c/OOiPGhgP4zjGT7s0A9vgozgxsuy/5ys9snoY7N4GSsG+/aSTtSPSOQ3Xe1//ljwGEgcEssUAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180416154820" title="" data-src="/static/微信截图_20180416154820-4d98120973fd1418b3e9a2172ec43dbd-aa6cd.png" data-srcset="/static/微信截图_20180416154820-4d98120973fd1418b3e9a2172ec43dbd-b82a2.png 200w,\n/static/微信截图_20180416154820-4d98120973fd1418b3e9a2172ec43dbd-6c81a.png 400w,\n/static/微信截图_20180416154820-4d98120973fd1418b3e9a2172ec43dbd-aa6cd.png 597w" data-sizes="(max-width: 597px) 100vw, 597px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<ul>\n<li>这样的设计是脆弱的，它在遵循开放-封闭原则的同时，违背了类的单一职责原则，即一个类只有一个引起它变化的原因，而这里引起 Log 类变化的原因却有两个，即日志记录方式的变化和日志记录平台的变化。</li>\n<li>重复代码会很多，不同的日志记录方式在不同的平台上也会有一部分的代码是相同的；再次是类的结构过于复杂，继承关系太多，难于维护，最致命的一点是扩展性太差。上面我们分析的变化只是沿着某一个方向，如果变化沿着日志记录方式和不同的运行平台两个方向变化，我们会看到这个类的结构会迅速的变庞大。</li>\n</ul>\n<h3 id="优缺点-1"><a href="#%E4%BC%98%E7%BC%BA%E7%82%B9-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>优缺点</h3>\n<ul>\n<li>\n<p>优点</p>\n<ul>\n<li>分离接口及其实现部分。桥接模式使用“对象间的组合关系”解耦了抽象和实现之间固有的绑定关系，使得抽象和实现可以沿着各自的维度来变化。 所谓抽象和实现沿着各自维度的变化，即“子类化”它们，得到各个子类之后，从而获得不同平台上的不同型号。</li>\n<li>桥接模式的应用一般在“两个非常强的变化维度”，有时候即使有两个变化的维度，但是某个方向的变化维度并不剧烈——换言之两个变化不会导致纵横交错的结果，并不一定要使用桥接模式。桥接模式提高了系统的可扩充性。</li>\n<li>实现细节对客户透明，可以对用户隐藏实现细节。</li>\n<li>桥接模式有时候类似于多继承方案，但是多继承方案往往违背了类的单一职责原则（即一个类只有一个变化的原因），复用性比较差。桥接模式是比多继承方案更好的解决方法。</li>\n</ul>\n</li>\n</ul>\n<h3 id="模式使用-1"><a href="#%E6%A8%A1%E5%BC%8F%E4%BD%BF%E7%94%A8-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式使用</h3>\n<ul>\n<li>如果一个系统需要在构件的抽象化角色和具体化角色之间增加更多的灵活性， 避免在两个层次之间建立静态的联系。</li>\n<li>设计要求实现化角色的任何改变不应当影响客户端，或者说实现化角色的改变对客户端是完全透明的。</li>\n<li>一个构件有多于一个的抽象化角色和实现化角色，系统需要它们之间进行动态耦合。</li>\n<li>虽然在系统中使用继承是没有问题的，但是由于抽象化角色和具体化角色需要独立变化，设计要求需要独立管理这两者。</li>\n</ul>\n<h3 id="模式应用"><a href="#%E6%A8%A1%E5%BC%8F%E5%BA%94%E7%94%A8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式应用</h3>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180416155625-92c170b6deb7e08b12defeaa9b4bb110-ac14c.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 674px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 43.02670623145401%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsSAAALEgHS3X78AAABjElEQVQozz1RyW7bMBTU/39M20MaB+gpgLPUaXqwkcK25GpJtJm7LIkiRfH1SYUzIHh482YGHAYAMAyDahrVXJRSUkrGGKX0sGC73YZhxBZQypRqlFS676dpQmEgOBdSHtPy5S36uU9f/lYOwPspTZIoCrMsJeQMC3o77k4fz2GZVEwwau0YEEKQCPn4VAx3cfcl0ufWW+dHADRHI+tR5s3oM+U2pblJXd7D0DYYGvAFB2Y35+mRwpqBdnOOR7Gf7/8HIS38ov4udWF9kYwYawPvfa815bysRV4IQmcvIUTXdcaYQWtsg19RVqIo+aVt8c3oGMAVbvRa28mNc5KfnNFd22CF1piF92601kyT+1RAcHyvXw/pLqO9ASRka045fUvK32GeS40bTW/+xMUuI61xuGDMnBnl7FhfgodErEJ5c+rUvAnvwjzG/D6WX/cc68HJuR3vQ/JtLzLpsENrPcask2YV98Ezhx81rEpo7SwuethwWFP4XsErmye1hicOtxUUHVz/DB4I3JbwD0vR+MDodfMBAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180416155625" title="" data-src="/static/微信截图_20180416155625-92c170b6deb7e08b12defeaa9b4bb110-ac14c.png" data-srcset="/static/微信截图_20180416155625-92c170b6deb7e08b12defeaa9b4bb110-2d27a.png 200w,\n/static/微信截图_20180416155625-92c170b6deb7e08b12defeaa9b4bb110-cc70c.png 400w,\n/static/微信截图_20180416155625-92c170b6deb7e08b12defeaa9b4bb110-ac14c.png 674w" data-sizes="(max-width: 674px) 100vw, 674px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h2 id="组合模式composite"><a href="#%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8Fcomposite" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>组合模式(Composite)</h2>\n<p>将对象组合成树形结构以表示”部分-整体”的层次结构，“Composite 使得用户对单个对象和组合对象的使用具有一致性。”</p>\n<h3 id="模式背景"><a href="#%E6%A8%A1%E5%BC%8F%E8%83%8C%E6%99%AF" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式背景</h3>\n<p>设计一个绘图程序</p>\n<ul>\n<li>绘制基本图元线对象(Line)、圆对象(Circle)、矩形对象(Rectangle)</li>\n<li>绘制组合对象(Picture)，可包含任意基本图元的组合</li>\n</ul>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="2200198877926440200"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`public class Line\n{\n    public void Draw()\n    {\n        Console.WriteLine(&quot;Draw a Line&quot;);\n    }\n}\n\npublic class Circle\n{\n    public void Draw()\n    {\n        Console.WriteLine(&quot;Draw a Circle&quot;);\n    }\n}\n\npublic class Rectangle\n{\n    public void Draw()\n    {\n        Console.WriteLine(&quot;Draw a Rectangle&quot;);\n    }\n}\n\npublic class Picture\n{\n    protected ArrayList picList = new ArrayList();\n\n    public void Add(object pic)\n    {\n        picList.Add(pic);\n    }\n    public void Remove(object pic)\n    {\n        picList.Remove(pic);\n    }\n    public ArrayList GetChilds()\n    {\n        return picList;\n    }\n}\n\nstatic void Main(string[] args)\n{\n    Picture root = new Picture();\n    Picture branch1 = new Picture();\n    Picture branch2 = new Picture();\n\n    Line line1 = new Line();\n    Circle circle1 = new Circle();\n    Rectangle rect1 = new Rectangle();\n\n    Line line2 = new Line();\n    Circle circle2 = new Circle();\n    Rectangle rect2 = new Rectangle();\n\n    root.Add(line1);\n    root.Add(circle1);\n    root.Add(branch1);\n    branch1.Add(line2);\n    branch1.Add(branch2);\n    branch2.Add(circle2);\n    branch2.Add(rect2);\n    root.Add(rect1);\n\n    Display(root.GetChilds());\n\n    Console.Read();\n}\npublic static void Display(ArrayList root)\n{\n    for (int i = 0; i < root.Count; i++)\n    {\n        if (root[i] is Line)\n        {\n            ((Line)root[i]).Draw();\n        }\n        else if (root[i] is Circle)\n        {\n            ((Circle)root[i]).Draw();\n        }\n        else if (root[i] is Rectangle)\n        {\n            ((Rectangle)root[i]).Draw();\n        }\n        else if (root[i] is Picture)\n        {\n            Display(((Picture)root[i]).GetChilds());\n        }\n    }\n}`, `2200198877926440200`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="cpp"\n              >\n                <span class="gatsby-code-button-language">cpp</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="cpp"><pre style="counter-reset: linenumber NaN" class="language-cpp line-numbers"><code class="language-cpp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Line</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Draw a Line"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Circle</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Draw a Circle"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Rectangle</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Draw a Rectangle"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Picture</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">protected</span> ArrayList picList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Add</span><span class="token punctuation">(</span>object pic<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        picList<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>pic<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Remove</span><span class="token punctuation">(</span>object pic<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        picList<span class="token punctuation">.</span><span class="token function">Remove</span><span class="token punctuation">(</span>pic<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> ArrayList <span class="token function">GetChilds</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">return</span> picList<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Main</span><span class="token punctuation">(</span>string<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    Picture root <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Picture</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    Picture branch1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Picture</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    Picture branch2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Picture</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    Line line1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Line</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    Circle circle1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Circle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    Rectangle rect1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Rectangle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    Line line2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Line</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    Circle circle2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Circle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    Rectangle rect2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Rectangle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    root<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>line1<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    root<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>circle1<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    root<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>branch1<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    branch1<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>line2<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    branch1<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>branch2<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    branch2<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>circle2<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    branch2<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>rect2<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    root<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>rect1<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token function">Display</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span><span class="token function">GetChilds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    Console<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Display</span><span class="token punctuation">(</span>ArrayList root<span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> root<span class="token punctuation">.</span>Count<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">if</span> <span class="token punctuation">(</span>root<span class="token punctuation">[</span>i<span class="token punctuation">]</span> is Line<span class="token punctuation">)</span>\n        <span class="token punctuation">{</span>\n            <span class="token punctuation">(</span><span class="token punctuation">(</span>Line<span class="token punctuation">)</span>root<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>root<span class="token punctuation">[</span>i<span class="token punctuation">]</span> is Circle<span class="token punctuation">)</span>\n        <span class="token punctuation">{</span>\n            <span class="token punctuation">(</span><span class="token punctuation">(</span>Circle<span class="token punctuation">)</span>root<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>root<span class="token punctuation">[</span>i<span class="token punctuation">]</span> is Rectangle<span class="token punctuation">)</span>\n        <span class="token punctuation">{</span>\n            <span class="token punctuation">(</span><span class="token punctuation">(</span>Rectangle<span class="token punctuation">)</span>root<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>root<span class="token punctuation">[</span>i<span class="token punctuation">]</span> is Picture<span class="token punctuation">)</span>\n        <span class="token punctuation">{</span>\n            <span class="token function">Display</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>Picture<span class="token punctuation">)</span>root<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">GetChilds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>实现判断太麻烦！</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180416161233-62e581e5bc981b183e875802513d162e-cb2f0.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 38.59470468431772%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABaUlEQVQoz7VSz0vCcBRfzj+ja3QI6iZ06uChQCjw0LVTRNSlQ7e0f6L+hA67eQqmjdiYTFC2BH9vTJ0i6HIqkynFXJ8nJZ0igh58+b69z9vnffZ5Y5hv0e/3Q3S32+2T8Xj8VC6XU41GI4U8YxjGEWG9Xi/E/DYqlUqY7lKpdBcgXNcNPM+jNADxDWEgZn8ksW07hH46a3SoJoridq1Wi+dyuUtN084Hg0EcQzYJ++xj6TiOw+Jrws1mk2X+IyKRCMOoqhrNZrMHmLQrCMI6fItyHLdfKBRipKpare4Ui8VYOp2mnj2e5ze63e417EnKspywLOtW1/XTFavv+0uPhsOhA5IrymHDstZqte47nc4j5dPpNFgsFoGiKBfA36iGZS37YImxIsRLz6Zpypj0gOmH9XpdgoIM6nks4gwESeB5PAsg5yVJOoa/r/gjSMR8NpuRAPXPPmFRW1jCfDKZkMJ3UjgajV6+8A+jUyYOD2KOXQAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180416161233" title="" data-src="/static/微信截图_20180416161233-62e581e5bc981b183e875802513d162e-fee1c.png" data-srcset="/static/微信截图_20180416161233-62e581e5bc981b183e875802513d162e-a67b7.png 200w,\n/static/微信截图_20180416161233-62e581e5bc981b183e875802513d162e-0b187.png 400w,\n/static/微信截图_20180416161233-62e581e5bc981b183e875802513d162e-fee1c.png 800w,\n/static/微信截图_20180416161233-62e581e5bc981b183e875802513d162e-cb2f0.png 982w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="64014710191553850000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`public abstract class Graphics\n{\n    public abstract void Draw();\n}\n\npublic class Line : Graphics\n{\n    public override void Draw()\n    {\n        Console.WriteLine(&quot;Draw a Line&quot;);\n    }\n}\n\npublic class Circle : Graphics\n{\n    public override void Draw()\n    {\n        Console.WriteLine(&quot;Draw a Circle&quot;);\n    }\n}\n\npublic class Rectangle : Graphics\n{\n    public override void Draw()\n    {\n        Console.WriteLine(&quot;Draw a Rectangle&quot;);\n    }\n}\n\npublic class Picture : Graphics\n{\n    protected ArrayList picList = new ArrayList();\n\n    public override void Draw()\n    {\n        Display(picList);\n    }\n    public void Display(ArrayList root)\n    {\n        for (int i = 0; i < root.Count; i++)\n        {\n            if (root[i] is Line)\n            {\n                ((Line)root[i]).Draw();\n            }\n            else if (root[i] is Circle)\n            {\n                ((Circle)root[i]).Draw();\n            }\n            else if (root[i] is Rectangle)\n            {\n                ((Rectangle)root[i]).Draw();\n            }\n            else if (root[i] is Picture)\n            {\n                Display(((Picture)root[i]).GetChilds());\n            }\n        }\n    }\n}\n\nstatic void Main(string[] args)\n{\n    Picture root = new Picture();\n    Picture branch1 = new Picture();\n    Picture branch2 = new Picture();\n\n    Line line1 = new Line();\n    Circle circle1 = new Circle();\n    Rectangle rect1 = new Rectangle();\n\n    Line line2 = new Line();\n    Circle circle2 = new Circle();\n    Rectangle rect2 = new Rectangle();\n\n    root.Add(line1);\n    root.Add(circle1);\n    root.Add(branch1);\n    branch1.Add(line2);\n    branch1.Add(branch2);\n    branch2.Add(circle2);\n    branch2.Add(rect2);\n    root.Add(rect1);\n\n    root.Draw();\n\n    Console.Read();\n}`, `64014710191553850000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="cpp"\n              >\n                <span class="gatsby-code-button-language">cpp</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="cpp"><pre style="counter-reset: linenumber NaN" class="language-cpp line-numbers"><code class="language-cpp"><span class="token keyword">public</span> abstract <span class="token keyword">class</span> <span class="token class-name">Graphics</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> abstract <span class="token keyword">void</span> <span class="token function">Draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Line</span> <span class="token operator">:</span> Graphics\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> override <span class="token keyword">void</span> <span class="token function">Draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Draw a Line"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Circle</span> <span class="token operator">:</span> Graphics\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> override <span class="token keyword">void</span> <span class="token function">Draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Draw a Circle"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Rectangle</span> <span class="token operator">:</span> Graphics\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> override <span class="token keyword">void</span> <span class="token function">Draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Draw a Rectangle"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Picture</span> <span class="token operator">:</span> Graphics\n<span class="token punctuation">{</span>\n    <span class="token keyword">protected</span> ArrayList picList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">public</span> override <span class="token keyword">void</span> <span class="token function">Draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token function">Display</span><span class="token punctuation">(</span>picList<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Display</span><span class="token punctuation">(</span>ArrayList root<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> root<span class="token punctuation">.</span>Count<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>\n        <span class="token punctuation">{</span>\n            <span class="token keyword">if</span> <span class="token punctuation">(</span>root<span class="token punctuation">[</span>i<span class="token punctuation">]</span> is Line<span class="token punctuation">)</span>\n            <span class="token punctuation">{</span>\n                <span class="token punctuation">(</span><span class="token punctuation">(</span>Line<span class="token punctuation">)</span>root<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n            <span class="token punctuation">}</span>\n            <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>root<span class="token punctuation">[</span>i<span class="token punctuation">]</span> is Circle<span class="token punctuation">)</span>\n            <span class="token punctuation">{</span>\n                <span class="token punctuation">(</span><span class="token punctuation">(</span>Circle<span class="token punctuation">)</span>root<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n            <span class="token punctuation">}</span>\n            <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>root<span class="token punctuation">[</span>i<span class="token punctuation">]</span> is Rectangle<span class="token punctuation">)</span>\n            <span class="token punctuation">{</span>\n                <span class="token punctuation">(</span><span class="token punctuation">(</span>Rectangle<span class="token punctuation">)</span>root<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n            <span class="token punctuation">}</span>\n            <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>root<span class="token punctuation">[</span>i<span class="token punctuation">]</span> is Picture<span class="token punctuation">)</span>\n            <span class="token punctuation">{</span>\n                <span class="token function">Display</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>Picture<span class="token punctuation">)</span>root<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">GetChilds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n            <span class="token punctuation">}</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Main</span><span class="token punctuation">(</span>string<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    Picture root <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Picture</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    Picture branch1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Picture</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    Picture branch2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Picture</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    Line line1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Line</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    Circle circle1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Circle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    Rectangle rect1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Rectangle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    Line line2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Line</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    Circle circle2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Circle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    Rectangle rect2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Rectangle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    root<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>line1<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    root<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>circle1<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    root<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>branch1<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    branch1<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>line2<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    branch1<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>branch2<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    branch2<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>circle2<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    branch2<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>rect2<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    root<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>rect1<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    root<span class="token punctuation">.</span><span class="token function">Draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    Console<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>拥有了公共的 Draw 方法，统一了绘制图形接口</p>\n<p>以上代码没有错误，就是优秀的设计吗？</p>\n<p>可以将判断代码依赖于抽象编程，将类型转换为抽象类 Graphics</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="13344639205098230000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`public class Picture : Graphics\n{\n    protected ArrayList picList = new ArrayList();\n\n    public override void Draw()\n    {\n        for (int i = 0; i < picList.Count; i++)\n        {\n            ((Graphics)picList[i]).Draw();\n        }\n    }\n}`, `13344639205098230000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="cpp"\n              >\n                <span class="gatsby-code-button-language">cpp</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="cpp"><pre style="counter-reset: linenumber NaN" class="language-cpp line-numbers"><code class="language-cpp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Picture</span> <span class="token operator">:</span> Graphics\n<span class="token punctuation">{</span>\n    <span class="token keyword">protected</span> ArrayList picList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">public</span> override <span class="token keyword">void</span> <span class="token function">Draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> picList<span class="token punctuation">.</span>Count<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>\n        <span class="token punctuation">{</span>\n            <span class="token punctuation">(</span><span class="token punctuation">(</span>Graphics<span class="token punctuation">)</span>picList<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>这种思想就是组合模式。</p>\n<h3 id="模式动机-2"><a href="#%E6%A8%A1%E5%BC%8F%E5%8A%A8%E6%9C%BA-2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式动机</h3>\n<ul>\n<li>对于树形结构，当容器对象（如文件夹）的某一个方法被调用时，将遍历整个树形结构，寻找也包含这个方法的成员对象（可以是容器对象，也可以是叶子对象，如子文件夹和文件）并调用执行。（递归调用）</li>\n<li>由于容器对象和叶子对象在功能上的区别，在使用这些对象的客户端代码中必须有区别地对待容器对象和叶子对象，而对于这些对象的区别对待将会使得程序非常复杂。</li>\n<li>组合模式描述了如何将容器对象和叶子对象进行递归组合，使得用户在使用时无须对它们进行区分，可以一致地对待容器对象和叶子对象，这就是组合模式的模式动机。</li>\n</ul>\n<h3 id="模式定义-2"><a href="#%E6%A8%A1%E5%BC%8F%E5%AE%9A%E4%B9%89-2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式定义</h3>\n<p>组合多个对象形成树形结构以表示“整体—部分”的结构层次。组合模式对单个对象（即叶子对象）和组合对象（即容器对象）的使用具有一致性。组合模式又可以称为“整体—部分”(Part-Whole)模式，属于对象的结构模式，它将对象组织到树结构中，可以用来描述整体与部分的关系。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180416164242-6894bc4aa8e8764f02638c997ff93c02-d152b.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 55.56872037914692%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAACPUlEQVQoz3VTS4uSYRT+vDZTTVP+gJhl0KZVP8AfMAshRqrZGAa5CBfZZEQztEhw48qloBvB8BYSoysRQTQ1FW94x0veb+B10Onreb/RmhF84HB4z3u+55zznuejSqXSSSKROPP5fKe1Wu0sFAodUIDJZOIUCoVXrVbrUyAQOHG5XB8ymcz7RqPxJZlMPiU5NE2zqE1Mp1P6Ovx+/yGJi8XiB+Vy+TeJjcdjejKZ0IvFgskB8SnJQRE+HOuaUVQ+n/+GLs5hP9DhudfrfULiGo3mdjwe/4UY3ev1pv1+/6Lb7Y4JYTQa/UxylErlDhxvZYScQ22DzWbjp9PpPOlsPp8zHXY6HabDdrv9cTXyPwIWwBAjeMOq1SqLeHTKDgaDh+jyGPYGXX0F0VG9Xn+NQo8JSS6XYxsMBuY7gA3jUuFwmMpms1QsFltfbMPmOLyN8xUhgU6nY7xarWa53e5dVL0jk8n2nU7nntVqvafVarkWi4WNd+UrFIoduVzOk0qluzhzhUIhWyQSsQUCwX9CSIbZkMPhOMBYSVgeUsrAF/EEAaPReJfcF4vFo9FoFMcCfZFI5Cck58c5gvP3VZdXhB6PhyG02+2PBoMBIw+yCIJms7lEx/vkHkXeLZdLGhunSR5ZFEGlUhlKJJL7q7EpCuMwXq/X70GHzyHul6lU6gV0eIwFPDObzbfIPRbzFgUI4QUIlxD5guh4OBx2VCrVwxsvij9j6zagRc6aEOPRsOVsNvsDfV6SSTB2eZ37FweYqlLirq4NAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180416164242" title="" data-src="/static/微信截图_20180416164242-6894bc4aa8e8764f02638c997ff93c02-fee1c.png" data-srcset="/static/微信截图_20180416164242-6894bc4aa8e8764f02638c997ff93c02-a67b7.png 200w,\n/static/微信截图_20180416164242-6894bc4aa8e8764f02638c997ff93c02-0b187.png 400w,\n/static/微信截图_20180416164242-6894bc4aa8e8764f02638c997ff93c02-fee1c.png 800w,\n/static/微信截图_20180416164242-6894bc4aa8e8764f02638c997ff93c02-d152b.png 844w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<ul>\n<li>Component：抽象构件（接口或抽象类）</li>\n<li>Leaf：叶子构件</li>\n<li>Composite：容器构件</li>\n<li>Client：客户类</li>\n</ul>\n<p>应该是在 Graphic(Component)中声明这些集合操作，并使得这些操作对 Leaf 类有意义，还是只应该在 Picture(Composite)和它的子类中声明并定义这些操作呢？这就要分为以下两种方式。</p>\n<p><strong>安全方式</strong></p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180416164816-d6c0c1cf517ac1c384dfd8b075c46cd4-d12a8.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 39.83822042467139%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABdElEQVQoz51SPUvDUBR9bVb/gIOro6CbTp1UdHHVySEg2mIpTk6CCFGo9ac4uLh0SIfWlpTSln6HpClJ2/STkrYRQn2eF4y4CNULF+6797zzzjvvEfIjBEEglFIfq3u93u1oNBILhcJLu91+7ff7z9lsdpXNarWajywTPM8zQj+rZVkWUdPhcEgXiwUdj8cUhOtsJkmS/1cSRVG4brfLMaKv9ImiSBKJxGa5XN6Nx+N8sVg8qNfrgXw+v8L2MAzS3dPpdDjDMLhcLrec6r8EDiZE07TTSqVyViqVwo1G4wiebUFZCCovsA6n0+mNVqt1guteos8w+6i34WsEsxB6QV3Xg5lMZs1lnUwm1IvBYADrZIHVs9nM7VWr1WvTNL9B8PQNJDHP3/l87uEOXcJkMnnDSPByj8hzeBaA2piqqnfwN5pKpXaQV8A8QN0TvDyGmnsczgS84yc4lmVRzPb+7RUsitq2TXE7ZzqdfjiOQ5vNpkv4CW6mNxISGRIvAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180416164816" title="" data-src="/static/微信截图_20180416164816-d6c0c1cf517ac1c384dfd8b075c46cd4-fee1c.png" data-srcset="/static/微信截图_20180416164816-d6c0c1cf517ac1c384dfd8b075c46cd4-a67b7.png 200w,\n/static/微信截图_20180416164816-d6c0c1cf517ac1c384dfd8b075c46cd4-0b187.png 400w,\n/static/微信截图_20180416164816-d6c0c1cf517ac1c384dfd8b075c46cd4-fee1c.png 800w,\n/static/微信截图_20180416164816-d6c0c1cf517ac1c384dfd8b075c46cd4-d12a8.png 989w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>在 Composite 类中定义管理子部件的方法具有良好的安全性，因为在 C++这样的静态类型语言中，在编译时任何从 Leaf 中增加或删除对象的尝试都将被发现。但是这又损失了透明性，因为 Leaf 和 Composite 显然具有不同的接口。</p>\n<p><strong>透明方式</strong></p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180416164944-62d0c153a3ca5e626b5dd3c14c83f37e-a311f.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 42.189054726368155%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABeElEQVQoz61Su04CURC9wPIXhMKEnzCxseEHKC0sLIS1IcHKwtgp0UJDghpNTLCytPITpJGwyxuW8M6yLMsSFpWHrGeujxArCieZzOydOWdey9gfKZfL3Iqi6Or3+wetVusmm83GDMO4q9Vq6xRrNBpOtqqk02luI5GIGwSKDRmNRmTsZrMZpFi73RZWJkwkEg6y4XDYnclk5PF4bA8GgzkRdjqdHYpVq1XB4/Ewr9fLfD4fC4VCzO/3fxHMZjMBuaSub3WSLhYLAd1uyrK8nUwmxUqlEigWi2uEWcr7wRDewf5bOCkWf6SqahQdnMI/zufzAYx4kkqlYoVC4UrX9UPEthC7xXHONU2L4yjBbre7hxVcYoIz0zSvse8Nzoor2hjPns/5mmyA7nu93u/3cDjUJUl6IN+yLP6GozwrivKy/IYi+5wQ1TX8Eu8Avk6nU6tUKl3U63UVVd+Q/IEdS+g2TkXQuTmZTMg+5nK5J+DIN4gQne8S3yeXiUn6nINuDAAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180416164944" title="" data-src="/static/微信截图_20180416164944-62d0c153a3ca5e626b5dd3c14c83f37e-fee1c.png" data-srcset="/static/微信截图_20180416164944-62d0c153a3ca5e626b5dd3c14c83f37e-a67b7.png 200w,\n/static/微信截图_20180416164944-62d0c153a3ca5e626b5dd3c14c83f37e-0b187.png 400w,\n/static/微信截图_20180416164944-62d0c153a3ca5e626b5dd3c14c83f37e-fee1c.png 800w,\n/static/微信截图_20180416164944-62d0c153a3ca5e626b5dd3c14c83f37e-a311f.png 1005w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>在类层级结构的根部定义子节点管理接口的方法具有良好的透明性，因为你可以一致地使用所有的组件，但是这一方法以安全性为代价，因为客户有可能会做一些无意义的事情，例如在 Leaf 中增加和删除对象。</p>\n<h3 id="优缺点-2"><a href="#%E4%BC%98%E7%BC%BA%E7%82%B9-2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>优缺点</h3>\n<ul>\n<li>\n<p>优点</p>\n<ul>\n<li>使客户端调用简单，客户端可以一致的使用组合结构或其中单个对象，用户就不必关系自己处理的是单个对象还是整个组合结构，这就简化了客户端代码。</li>\n<li>定义了包含叶子对象和容器对象的类层次结构，叶子对象可以被组合成更复杂的容器对象，而这个容器对象又可以被组合，这样不断地递归下去。客户代码中，任何用到叶子对象的地方都可以使用容器对象。</li>\n<li>客户端不必因为加入了新的对象构件而更改代码。</li>\n</ul>\n</li>\n<li>\n<p>缺点</p>\n<ul>\n<li>组合模式的缺陷是使得设计变得更加抽象，对象的商业规则如果很复杂，则实现组合模式较困难。</li>\n<li>此外，不是所有的方法都与叶子构件子类都有关联</li>\n<li>有时候我们希望一个容器中只能有某些特定的构件。使用组合模式时，不能依赖类型系统来施加这些约束，因为它们都来自于相同的抽象层，在这种情况下，必须通过在运行时进行类型检查来实现。</li>\n</ul>\n</li>\n</ul>\n<h3 id="模式使用-2"><a href="#%E6%A8%A1%E5%BC%8F%E4%BD%BF%E7%94%A8-2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式使用</h3>\n<ul>\n<li>需要表示一个对象整体或部分层次。</li>\n<li>想让客户能够忽略不同对象层次的变化。</li>\n<li>对象的结构是动态的并且复杂程度不一样，但客户需要一致地处理它们。</li>\n</ul>\n<h3 id="模式应用-1"><a href="#%E6%A8%A1%E5%BC%8F%E5%BA%94%E7%94%A8-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式应用</h3>\n<p><strong>XML 文档解析</strong></p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180416165525-7e155896825f31d818f6db71273bf937-84ce9.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 581px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 49.741824440619624%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABu0lEQVQoz3VSy27TQBT1p8Iu3ZQKCSq6ASEBOzaoi24QX4AEixCSJrysKoAql4iySBpjTx527Njz9tjj8ZixIxUB4mp0dedx7jlzZqz6r9CVSWLjgO4N0L2ZR9+uF/8N609gKelSYg+myzD0zUBwVWJPsbWu1P/BWpskWYi/PkT2AfcHZmrokumrRb+zObtf8njXXrdhqhZsKqPKrLbMdSmklHlRYMYgJZQzwjBhFFJKOJNK7fA7lHVNqyiIPz8O7SPsvyNCVm273zfSVaZq6H1Yvz+Mxk8UDxrmqqDGH8HhNo3Dq1E47cFkQTPBOdH5thJxpWSrV9UlZvFl6H4MXFsSX0tioYvjZb+TXBzz0EnGD+j5IzAfR1yz+PtieBsMDvLNuQEX6Ww5uuP197PQYfPXq8Eecp5aWhUwWckiMyeyDEfTt+DLSeC8EF6PwIDT7c6bBp8hlAaNj5VsIDm3tORp/NNsGGUZ2wazIZp1kXtKgI0TwNC6Ni62ugWN0tirdamVSGJXCmjhyYn3pkMunxfxJPp0L7KPyvRH809SF4wO3d4+XZw1r4iuwPCuP7gl1uNs/jI43aOTZ78AOYYkPBohhocAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180416165525" title="" data-src="/static/微信截图_20180416165525-7e155896825f31d818f6db71273bf937-84ce9.png" data-srcset="/static/微信截图_20180416165525-7e155896825f31d818f6db71273bf937-1b05b.png 200w,\n/static/微信截图_20180416165525-7e155896825f31d818f6db71273bf937-f343a.png 400w,\n/static/微信截图_20180416165525-7e155896825f31d818f6db71273bf937-84ce9.png 581w" data-sizes="(max-width: 581px) 100vw, 581px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><strong>文件目录操作</strong></p>\n<p>操作系统中的目录结构是一个树形结构，因此在对文件和文件夹进行操作时可以应用组合模式，例如杀毒软件在查毒或杀毒时，既可以针对一个具体文件，也可以针对一个目录。如果是对目录查毒或杀毒，将递归处理目录中的每一个子目录和文件。</p>\n<h2 id="装饰模式decorator"><a href="#%E8%A3%85%E9%A5%B0%E6%A8%A1%E5%BC%8Fdecorator" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>装饰模式(Decorator)</h2>\n<p>动态地给一个对象添加一些额外的职责。就增加功能来说，Decorator 模式相比生成子类更为灵活</p>\n<h3 id="模式背景-1"><a href="#%E6%A8%A1%E5%BC%8F%E8%83%8C%E6%99%AF-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式背景</h3>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180416172449-c8afc55c3052334ccdfb4aaae99516db-010a0.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 238px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 146.6386554621849%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAdCAIAAAAl5NuSAAAACXBIWXMAAAsSAAALEgHS3X78AAACdUlEQVQ4y5WU147iQBRE/f8fwgsSAiGQyHnImSHDsmSWHEX2nJkeDQu2Yfc+GGP37apbVW1Jr9fHYrFQKPSmqGAw+KZR4XDYbrdL0WhUluXL5SL/VdfrlWuz2UylUlpvO52OBKzW68FgkMvlzuezfF+3ZoPBUKvVCoXC+33xpFQqVSoVrVc+n09yOBzL5XI4HP5Rq9FopPpwOp1CSorH40raz0vQ7vV6ksViAfb3VzFGu90WV/62Wq1faoWQLEBpyWQylctlm82Gci6Xy+PxOJ3OZDKZSCQYTCx9qEajwdaRSETy+/2bzSadToPPGCiEEmCy93w+/yGprrbwmU6WjsfjyWSCfrPZbLfbYdJFrYR5kJLgiYCBQKBYLMJWp9PhRLfb1YL9eQhziawJ6VarFYD1er3f79N5OByeq/3dDE80AB/beJTNZtmLLdbr9ZOZP5tJPyQzmQy+IxUKIx7BRLPFYvGiWWSbTmijMCzQDM7AKlP92Ox2u8k2pwfpyTmesx2w1WqVHf8JGauAAhOHYAsyRPb7/el0etbMnKzGbTRjckKfz+fhQua4Ipty8lszDh+PR4K13W4JCcgi2xw9OgUjzWaRMEAwmf8g0wZ/aEP++lWatDkMOIzbiIRthMxoNBIVtmML1dP6iCwIw1wknHtOi9Yhv0NmMDDJNiJxY7VaxbljkBdWcSy5gzNQpJIRCBxt4GPVC2S+2LAFlk5OGZ0MwrQox/MXyF6vF2FpwBhY4BkfdNz6j2xzEliKvWwEYa7AYhWzaH23v5H5QSc4YxLZNpvN+MQgyMYrZcJvzZDkDzqRJJC5QXwa4AKsyDkLlJ8h5voABKc7XxR948wAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180416172449" title="" data-src="/static/微信截图_20180416172449-c8afc55c3052334ccdfb4aaae99516db-010a0.png" data-srcset="/static/微信截图_20180416172449-c8afc55c3052334ccdfb4aaae99516db-279da.png 200w,\n/static/微信截图_20180416172449-c8afc55c3052334ccdfb4aaae99516db-010a0.png 238w" data-sizes="(max-width: 238px) 100vw, 238px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="28716489555345980000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`class Person\n{\n    private string name;\n    public Person(string name)\n    {\n        this.name = name;\n    }\n    public void WearTShirts()\n    {\n        Console.Write(&quot;T恤 &quot;);\n    }\n    public void WearJeans()\n    {\n        Console.Write(&quot;牛仔裤 &quot;);\n    }\n    public void WearSneakers()\n    {\n        Console.Write(&quot;球鞋 &quot;);\n    }\n    public void WearSuit()\n    {\n        Console.Write(&quot;西装 &quot;);\n    }\n    public void WearTrousers()\n    {\n        Console.Write(&quot;西裤 &quot;);\n    }\n    public void WearLeatherShoes()\n    {\n        Console.Write(&quot;皮鞋 &quot;);\n    }\n    public void Show()\n    {\n        Console.WriteLine(&quot;装扮的{0}&quot;, name);\n    }\n}\nstatic void Main(string[] args)\n{\n    Person zs = new Person(&quot;张三&quot;);\n\n    Console.WriteLine(&quot;\\n第一种装扮：&quot;);\n    zs.WearTShirts();\n    zs.WearJeans();\n    zs.WearSneakers();\n    zs.Show();\n\n    Console.WriteLine(&quot;\\n第二种装扮：&quot;);\n    zs.WearSuit();\n    zs.WearTrousers();\n    zs.WearLeatherShoes();\n    zs.Show();\n\n    Console.Read();\n}`, `28716489555345980000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="cpp"\n              >\n                <span class="gatsby-code-button-language">cpp</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="cpp"><pre style="counter-reset: linenumber NaN" class="language-cpp line-numbers"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Person</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">private</span> string name<span class="token punctuation">;</span>\n    <span class="token keyword">public</span> <span class="token function">Person</span><span class="token punctuation">(</span>string name<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">WearTShirts</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">"T恤 "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">WearJeans</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">"牛仔裤 "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">WearSneakers</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">"球鞋 "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">WearSuit</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">"西装 "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">WearTrousers</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">"西裤 "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">WearLeatherShoes</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">"皮鞋 "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"装扮的{0}"</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Main</span><span class="token punctuation">(</span>string<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    Person zs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token string">"张三"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"\\n第一种装扮："</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    zs<span class="token punctuation">.</span><span class="token function">WearTShirts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    zs<span class="token punctuation">.</span><span class="token function">WearJeans</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    zs<span class="token punctuation">.</span><span class="token function">WearSneakers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    zs<span class="token punctuation">.</span><span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"\\n第二种装扮："</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    zs<span class="token punctuation">.</span><span class="token function">WearSuit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    zs<span class="token punctuation">.</span><span class="token function">WearTrousers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    zs<span class="token punctuation">.</span><span class="token function">WearLeatherShoes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    zs<span class="token punctuation">.</span><span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    Console<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>不断添加新的衣服怎么办? 原则?</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180416173121-6a86e986d94ef612e49088550e4c7a34-4a0d2.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 27.923387096774192%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsSAAALEgHS3X78AAABf0lEQVQY04VRu04CQRRdwMJCLdFgbElEYqGFDdZ+AN9gIV+wlluwhoK4xYIQAiHS2FiQbLIhFBYSILBLs0HeyCs8oxIhrMRiPEOMsTHeZHJmzj05M/cMk8lk1geDwd1kMnno9/uiw+EwEkKMDGo8Hp83Go3Her0ut9vtE8oVi8VV789Kp9NbtVrtEyak1+s9e73eNWxNtFetVoOUXywWBBon5ebzuQmU4XsxFDVNM2SzWcOPqSzLp6lU6gyvPf59mSRJe/F4/CKZTDoTicQG80/RC5hAIGD3+/1mj8ezyfO8NRQKHYiiaAHa3W63zeVymVmWtXAcd+jz+ayRSGRXEISjcDhsi0ajO7FYbB9oLxQK2yvX6XRKut2ugvyCy+WSjEajGXK7Gg6Hb7quE+R7gyge6dhAFbprjE2AH9DxyPmFnqG7XRm2Wq1X5COpqsoj/Fmn06nk8/nLJxQ+YlapVHhFUe6bzaYOrZzL5bhyuTzDIxrQsaVSSQP/DnOB+n0BwoAMlw3psu0AAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180416173121" title="" data-src="/static/微信截图_20180416173121-6a86e986d94ef612e49088550e4c7a34-fee1c.png" data-srcset="/static/微信截图_20180416173121-6a86e986d94ef612e49088550e4c7a34-a67b7.png 200w,\n/static/微信截图_20180416173121-6a86e986d94ef612e49088550e4c7a34-0b187.png 400w,\n/static/微信截图_20180416173121-6a86e986d94ef612e49088550e4c7a34-fee1c.png 800w,\n/static/微信截图_20180416173121-6a86e986d94ef612e49088550e4c7a34-4a0d2.png 992w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="83677993154033910000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`class Person\n{\n    private string name;\n    public Person(string name)\n    {\n        this.name = name;\n    }\n\n    public void Show()\n    {\n        Console.WriteLine(&quot;装扮的{0}&quot;, name);\n    }\n}\nabstract class Finery   //服饰\n{\n    public abstract void Show();\n}\n\nclass TShirts : Finery   //T恤\n{\n    public override void Show()\n    {\n        Console.Write(&quot;T恤 &quot;);\n    }\n}\nclass Jeans : Finery   //牛仔裤\n{\n    public override void Show()\n    {\n\n        Console.Write(&quot;牛仔裤 &quot;);\n    }\n}\nclass Sneakers : Finery   //球鞋\n{\n    public override void Show()\n    {\n\n        Console.Write(&quot;球鞋 &quot;);\n    }\n}\nstatic void Main(string[] args)\n{\n    Person zs = new Person(&quot;张三&quot;);\n\n    Console.WriteLine(&quot;\\n第一种装扮：&quot;);\n    Finery tx = new TShirts();\n    Finery nzk = new Jeans();\n    Finery qx = new Sneakers();\n\n    tx.Show();\n    nzk.Show();\n    qx.Show();\n    zs.Show();\n\n    Console.WriteLine(&quot;\\n第二种装扮：&quot;);\n    Finery xz = new Suit();\n    Finery xk = new Trousers();\n    Finery px = new LeatherShoes();\n\n    xz.Show();\n    xk.Show();\n    px.Show();\n    zs.Show();\n\n    Console.Read();\n}`, `83677993154033910000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="cpp"\n              >\n                <span class="gatsby-code-button-language">cpp</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="cpp"><pre style="counter-reset: linenumber NaN" class="language-cpp line-numbers"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Person</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">private</span> string name<span class="token punctuation">;</span>\n    <span class="token keyword">public</span> <span class="token function">Person</span><span class="token punctuation">(</span>string name<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"装扮的{0}"</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\nabstract <span class="token keyword">class</span> <span class="token class-name">Finery</span>   <span class="token comment">//服饰</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> abstract <span class="token keyword">void</span> <span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">class</span> <span class="token class-name">TShirts</span> <span class="token operator">:</span> Finery   <span class="token comment">//T恤</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> override <span class="token keyword">void</span> <span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">"T恤 "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">class</span> <span class="token class-name">Jeans</span> <span class="token operator">:</span> Finery   <span class="token comment">//牛仔裤</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> override <span class="token keyword">void</span> <span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n\n        Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">"牛仔裤 "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">class</span> <span class="token class-name">Sneakers</span> <span class="token operator">:</span> Finery   <span class="token comment">//球鞋</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> override <span class="token keyword">void</span> <span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n\n        Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">"球鞋 "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Main</span><span class="token punctuation">(</span>string<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    Person zs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token string">"张三"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"\\n第一种装扮："</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    Finery tx <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">TShirts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    Finery nzk <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Jeans</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    Finery qx <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Sneakers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    tx<span class="token punctuation">.</span><span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    nzk<span class="token punctuation">.</span><span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    qx<span class="token punctuation">.</span><span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    zs<span class="token punctuation">.</span><span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"\\n第二种装扮："</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    Finery xz <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Suit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    Finery xk <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Trousers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    Finery px <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">LeatherShoes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    xz<span class="token punctuation">.</span><span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    xk<span class="token punctuation">.</span><span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    px<span class="token punctuation">.</span><span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    zs<span class="token punctuation">.</span><span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    Console<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>期望：内部组装完毕，再显示出来，这就要用到装饰模式。</p>\n<h3 id="模式动机-3"><a href="#%E6%A8%A1%E5%BC%8F%E5%8A%A8%E6%9C%BA-3" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式动机</h3>\n<ul>\n<li>有时我们希望给某个对象而不是整个类添加一些功能。例如：一个图形用户界面工具箱允许我们对任意一个用户界面组件添加一些新的特性，如增加一个边框；或者增加一些行为，如窗口的滚动。</li>\n<li>一种较为灵活的方式是将组件嵌入另一个对象中，由这个对象来添加边框。我们称这个嵌入的对象为装饰器（Decorator）。这个装饰与它所装饰的组件接口一致，因此它对使用该组件的客户透明。它将客户请求转发给该组件，并且可能在转发前后执行一些额外的动作。这种透明性使得我们可以递归嵌套多个装饰，从而可以添加任意多的功能。</li>\n</ul>\n<h3 id="模式定义-3"><a href="#%E6%A8%A1%E5%BC%8F%E5%AE%9A%E4%B9%89-3" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式定义</h3>\n<p>动态地给一个对象增加一些额外的职责（Responsibility），就增加对象功能来说，装饰模式比生成子类实现更为灵活。其别名为包装器(Wrapper)。装饰模式是一种对象结构型模 式。</p>\n<h3 id="模式结构-2"><a href="#%E6%A8%A1%E5%BC%8F%E7%BB%93%E6%9E%84-2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式结构</h3>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180416173909-5fbaed95ad3c66357ffa0605ccb6aaa1-55e1c.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 689px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 71.26269956458636%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAAChUlEQVQ4y5VTT2iSYRxWv6+MiXSIqIiI5i2inTqNbkG1hRUsqUPRocMg6NB9jIisiB06hLstiY0hsyamiKJu/pnTDXXzH9v0oMic5lREhx7m2/P7/BaL2sAf/Hg/3uf7nu95fs/7SiRiRSIRGa2xWGwwGo3qHQ6HbmVl5VsqlXpG+4wxSU+1tbXF0bqxsTGKj9nOzg4tDD/6iW2ZRqOR8zwvx/NJNK38sYRer1cg9Pv9z3O5HEM3qtUqg+KvtG80GjmFQkEupGKf+i8RFHBra2t8pVIR/uhyuS6ib87NzY253e7h9fX1K2QXze3t7fGNRkMYjVQqlUt6LMVRwPb2tlS0/m+FQqHXsDUWDAbHYXcMgbzDs+YA9/l81+DgTSAQGE8kEm+TyeRD2u/v7+8T58iLI+gWQmiWy2UhhHQ6zer1OsOHPw7weDz+pNVq0UxZs9lkIAyq1erTgJRyufwc1jPoE38IMaP67u4uKxaLjEKgQuLfD3DM8TH9MJ/Pd4gQbjwqlUpx5FFyOp1qJKxBP4K1Eah8ivM3eAi/DNsjdrv98+Li4igE3BDJZBiNbGFhgZufn5eK7/YUkvI4EBeh+7C0tMStrq7ysC0zmUx9UHIHSm5PTU3dm56eHp6dnX2g0+mu07tarfbszMzMfewNTU5Oqq1W6y2z2XxXr9dfIhxKu6Qej0eQbLFYzofD4X0ERcOnWXZKpRLDCN4TDosD2WxWCCiTyQhNOMb16vBtI5UCoc1mu0BkhUJBCIjSpdrc3JwQj9gAhUchUtdqtX3CcRJeEt5ut7m//BsMBiVUfMDgJxDQJyj4CPIvUD1E+PLy8lXcrAbUV4BVoO4XSMjRC8I7nY7sNzSfwWKfisfVAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180416173909" title="" data-src="/static/微信截图_20180416173909-5fbaed95ad3c66357ffa0605ccb6aaa1-55e1c.png" data-srcset="/static/微信截图_20180416173909-5fbaed95ad3c66357ffa0605ccb6aaa1-f8f03.png 200w,\n/static/微信截图_20180416173909-5fbaed95ad3c66357ffa0605ccb6aaa1-d8034.png 400w,\n/static/微信截图_20180416173909-5fbaed95ad3c66357ffa0605ccb6aaa1-55e1c.png 689w" data-sizes="(max-width: 689px) 100vw, 689px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<ul>\n<li>Component：组件</li>\n<li>ConcreteComponent：具体组件</li>\n<li>Decorator：抽象装饰类</li>\n<li>ConcreteDecorator：具体装饰类</li>\n</ul>\n<p><strong>穿衣服</strong></p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180416174138-490c8cb7c6d01fe3160aff36b0a1f5ad-5d178.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 44.88752556237218%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAABzElEQVQoz41Su0tCcRS+tzfagyjFsSCXIBr8A8LNraCloSHa3BTEzSBQyiBoMATDaHAQdNMpkQsqPhbx/X5raCIOtviCX9/PDGrJfnD4fee79373nO8chpken8/HEEImuF6v36dSqXAmk3mhuUQiYYVCIcv858Tj8ckdCoVYCM4Dsvl8nhsMBqRWqxWQryiVymWpVLoEvKRSqWaLRqPRX7lOpxOZTKZju92+95MXi8WLM8Visdi3qKharZ6Fw+FLtL9DOaPRyAsEAucul+uiUqnsU85ms/3dOnxaoHcikTgh0wMPlZQrlUoHvV5vwmWzWRvlAOccDgfrdDpZjuMYt9vNBoNBFsX8Fga56/f7r/ADLbw7pBxe4ns8nttIJPJSLpePZnU7Ho8Zxuv1rmu1WoFCoeBN+WWZTMYzm80bcrl8mw6CBqa8qtfrtwwGw5parRZoNBoBMJ9+a7FYNjHEL3/hTRRVdRFPwNZisThKp9N2VPkAblgoFF4Rd8Af2IgQ8DW24A1rVQJWwZZyLpfrgDudCOLBR7/fJ61Wy5FMJrnRaESazaYfnlnRAul2u0m0/Ey97HQ67+AfG40GabfbBCI3ECTD4ZD6fkn1PgGxYCqbl3B6agAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180416174138" title="" data-src="/static/微信截图_20180416174138-490c8cb7c6d01fe3160aff36b0a1f5ad-fee1c.png" data-srcset="/static/微信截图_20180416174138-490c8cb7c6d01fe3160aff36b0a1f5ad-a67b7.png 200w,\n/static/微信截图_20180416174138-490c8cb7c6d01fe3160aff36b0a1f5ad-0b187.png 400w,\n/static/微信截图_20180416174138-490c8cb7c6d01fe3160aff36b0a1f5ad-fee1c.png 800w,\n/static/微信截图_20180416174138-490c8cb7c6d01fe3160aff36b0a1f5ad-5d178.png 978w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="79561355801602620000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`abstract class Appearance\n{\n    public abstract void Show();\n}\nclass Person : Appearance\n{\n    private string name;\n\n    public Person(string name)\n    {\n        this.name = name;\n    }\n\n    public override void Show()\n    {\n        Console.WriteLine(&quot;装扮的{0}&quot;, name);\n    }\n}\nabstract class Finery : Appearance\n{\n    protected Appearance component;\n\n    public void Decorate(Appearance component)\n    {\n        this.component = component;\n    }\n\n    public override void Show()\n    {\n        if (component != null)\n        {\n            component.Show();\n        }\n    }\n}\nclass TShirts : Finery\n{\n    public override void Show()\n    {\n        base.Show();\n        Console.Write(&quot;T恤&quot;);\n\n    }\n}\nclass Jeans : Finery\n{\n    public override void Show()\n    {\n        base.Show();\n        Console.Write(&quot;牛仔裤&quot;);\n    }\n}\nclass Sneakers : Finery\n{\n    public override void Show()\n    {\n        base.Show();\n        Console.Write(&quot;球鞋&quot;);\n    }\n}\nstatic void Main(string[] args)\n{\n    Person xc = new Person(&quot;小菜&quot;);\n\n    Console.WriteLine(&quot;\\n第一种装扮：&quot;);\n\n    Sneakers qx = new Sneakers();\n    Jeans nzk = new Jeans();\n    TShirts tx = new TShirts();\n\n    tx.Decorate(xc);\n    nzk.Decorate(tx);\n    qx.Decorate(nzk);\n\n    qx.Show();\n\n    Console.Read();\n}`, `79561355801602620000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="cpp"\n              >\n                <span class="gatsby-code-button-language">cpp</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="cpp"><pre style="counter-reset: linenumber NaN" class="language-cpp line-numbers"><code class="language-cpp">abstract <span class="token keyword">class</span> <span class="token class-name">Appearance</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> abstract <span class="token keyword">void</span> <span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token operator">:</span> Appearance\n<span class="token punctuation">{</span>\n    <span class="token keyword">private</span> string name<span class="token punctuation">;</span>\n\n    <span class="token keyword">public</span> <span class="token function">Person</span><span class="token punctuation">(</span>string name<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">public</span> override <span class="token keyword">void</span> <span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"装扮的{0}"</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\nabstract <span class="token keyword">class</span> <span class="token class-name">Finery</span> <span class="token operator">:</span> Appearance\n<span class="token punctuation">{</span>\n    <span class="token keyword">protected</span> Appearance component<span class="token punctuation">;</span>\n\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Decorate</span><span class="token punctuation">(</span>Appearance component<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">this</span><span class="token punctuation">.</span>component <span class="token operator">=</span> component<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">public</span> override <span class="token keyword">void</span> <span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">if</span> <span class="token punctuation">(</span>component <span class="token operator">!=</span> null<span class="token punctuation">)</span>\n        <span class="token punctuation">{</span>\n            component<span class="token punctuation">.</span><span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">class</span> <span class="token class-name">TShirts</span> <span class="token operator">:</span> Finery\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> override <span class="token keyword">void</span> <span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        base<span class="token punctuation">.</span><span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">"T恤"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">class</span> <span class="token class-name">Jeans</span> <span class="token operator">:</span> Finery\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> override <span class="token keyword">void</span> <span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        base<span class="token punctuation">.</span><span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">"牛仔裤"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">class</span> <span class="token class-name">Sneakers</span> <span class="token operator">:</span> Finery\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> override <span class="token keyword">void</span> <span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        base<span class="token punctuation">.</span><span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">"球鞋"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Main</span><span class="token punctuation">(</span>string<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    Person xc <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token string">"小菜"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"\\n第一种装扮："</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    Sneakers qx <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Sneakers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    Jeans nzk <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Jeans</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    TShirts tx <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">TShirts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    tx<span class="token punctuation">.</span><span class="token function">Decorate</span><span class="token punctuation">(</span>xc<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    nzk<span class="token punctuation">.</span><span class="token function">Decorate</span><span class="token punctuation">(</span>tx<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    qx<span class="token punctuation">.</span><span class="token function">Decorate</span><span class="token punctuation">(</span>nzk<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    qx<span class="token punctuation">.</span><span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    Console<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="模式应用-2"><a href="#%E6%A8%A1%E5%BC%8F%E5%BA%94%E7%94%A8-2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式应用</h3>\n<p><strong>星巴克咖啡订单管理系统管理</strong></p>\n<ul>\n<li>如果有一张订单：“双倍摩卡豆浆奶泡拿铁咖啡”，应该如何进行设计？</li>\n<li>如果有一张订单：“奶泡摩卡加冰浓缩咖啡”，应该如何进行设计？</li>\n</ul>\n<p><em>实现一</em></p>\n<p>类爆炸</p>\n<ul>\n<li>调料的增加/删除</li>\n<li>调料价格的修改</li>\n</ul>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180416175157-1aca7bfbf4ed11934773f14d628b9e5e-19cac.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 58.91891891891892%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAABvElEQVQoz4VS226CQBTc//8GP6A2adM+tE0fqjYFUQRvuLuAclEEjBrEaxUL7ShpX2zTkw2Xw8zOnFnI50UdDocwDIMgYJT5gT+dTjljafpxiSSXrePxyDmzbWu32223281mozTkJDngU5Zl/5DTNB17HsSjKNq/v+/3+1azmSTJn+TsXKDhOY7j4tVVoVC4Lhbv7+5ub25KLy+wk8OAyb6L5LefzeBzMBj0+33TNIfnsm3bdV1EsFqtflFGa71eL+MYVnWue54H2+AYhoErXkejke/7+SCnJINgPp8vooggj8lkghfHcYAYui7VNDT98Rid2WwGQXiBODCgoZ+XqigECMe2aa/X0zSd8zqqVkNCTVVFxzQMrdvlnGMSnFm5VHp+ehIF4fHhwbYsAqggvCmNhnk2CXHLsnRdR6cqCjAl1+uvlUq1KvZNYxKGiAOyYEKSgICNa5IEGkzSkwMNiOVyiQkhK8syNHHmjFIs+EeKhq5jazIaDvNJ2q2WpnXb7Ta8YIGmqqp1Th58TIhZsDCfJElVUcQHAsGTlHkq/IZY0WKBHBRFgYtKuYycgKGUooMoGGMYynWcTqfzBfZsgkCl7S84AAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180416175157" title="" data-src="/static/微信截图_20180416175157-1aca7bfbf4ed11934773f14d628b9e5e-fee1c.png" data-srcset="/static/微信截图_20180416175157-1aca7bfbf4ed11934773f14d628b9e5e-a67b7.png 200w,\n/static/微信截图_20180416175157-1aca7bfbf4ed11934773f14d628b9e5e-0b187.png 400w,\n/static/微信截图_20180416175157-1aca7bfbf4ed11934773f14d628b9e5e-fee1c.png 800w,\n/static/微信截图_20180416175157-1aca7bfbf4ed11934773f14d628b9e5e-b1a91.png 1200w,\n/static/微信截图_20180416175157-1aca7bfbf4ed11934773f14d628b9e5e-19cac.png 1295w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><em>实现二</em></p>\n<p>使用实例变量和继承，跟踪这些调料</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180416175322-0972d827b1f7f53729e6364b2225238c-78894.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 61.877394636015325%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAABcklEQVQoz4WS226CUBBF+f+PsonyJhbqi9ESvHA/cFDEKheBLiBaa9N2AjJ4Zs+s2aq4rns8Htfr9WSizufz/X5Pvlgs2rat67osy/NHF+fz+Xq9tt9D2W63y+WSFoc+qA6CQNOmnFVVJcIwjqLhqCrLZ/Guj6au8zynmmlSSm06ZQ6v9Gqapv0lFCDXlkUGWFEUaKIo0nWdJD0c+PKYpomUrAM883nliuM4TdNOvFqtLMtCw/Kn08m2bU3TaGTvdmEQ0AIW3/dR0iISYrgC31fCMHQchzOGAAk2XQ1Dh5kunuehoKnnuo5jRyLKsgwQ3/M6MQNN8/3RD3jeDKOGXwhKQbhcLrInT5IE5u4hJUln2GQ8RkzRXWzoOskfVn25raoqPxjtB/1dzArAD5Nxq7yhNbdQWOxlNDJNs+qDCiHEbDY7ZZmMu4CQT+4iz58nswx6ppUPO+v6K/5h1T/YzMHSzWYDPzl/FSzEsPvOd8if4k/9NabbWwyt2wAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180416175322" title="" data-src="/static/微信截图_20180416175322-0972d827b1f7f53729e6364b2225238c-fee1c.png" data-srcset="/static/微信截图_20180416175322-0972d827b1f7f53729e6364b2225238c-a67b7.png 200w,\n/static/微信截图_20180416175322-0972d827b1f7f53729e6364b2225238c-0b187.png 400w,\n/static/微信截图_20180416175322-0972d827b1f7f53729e6364b2225238c-fee1c.png 800w,\n/static/微信截图_20180416175322-0972d827b1f7f53729e6364b2225238c-78894.png 1044w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><em>实现三</em></p>\n<p>应用以上的装饰模式</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180416175553-0b41751d7a523b4959a4cbfce5042581-ff4c9.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 51.288056206088996%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAAByklEQVQozz1SSW+bQBjl3ze35JRKqVKlzSFNQmsj1WzGNoqBHNK0Akv44FRg7GG1wQs29nhpH6UJ0qBh+N7yvW+YP6/P8Xg8HA5FUYRhOJlM4jgmZDydTler1Xw+n81meZ7v93vUvEEYrO12myQJqsfjcRRFYMEhpRTI5XKZZmn1NwyDOIrAAoHdjpZgkOFH9HoKdVCYpvnQ7TYVRW429UfD9/1ZlhHfT9MUjKiEnRK8KQrXdfq2vftn6cfTk6bpum602+1OR8XiBeFbrd7v94F0HQfUge/DUQmmdJvnC9P8RQgB6O7+Hpo3N184juN5AeKqqkqSfHn50fNGi8UCTtHmDr4pZWDVsqyzs1NN00RJ0o1HQRS/NxoiPmS5o6pKq4UNwCgIgmAwGAyHQ2Q5Go0Y27Y/XV39fnmBDejohmFZvQbP12p1URS7WtkEy369uPgQRhFiRzqIAJ0jV9imcFIlDMp3JycsywqCUOc4RWkpioIWzs/fPz//zLIMSGgmcVINhSnTyzKECFaM13EcWZZbsCpJEPx8fX17e9fr9UC9Xq+RE6LG5v+cqzbwxh3wPK+aASpcdwgiQvzNZjNJEnRIcAvCEBm93ZO/XTEId0MxPycAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180416175553" title="" data-src="/static/微信截图_20180416175553-0b41751d7a523b4959a4cbfce5042581-fee1c.png" data-srcset="/static/微信截图_20180416175553-0b41751d7a523b4959a4cbfce5042581-a67b7.png 200w,\n/static/微信截图_20180416175553-0b41751d7a523b4959a4cbfce5042581-0b187.png 400w,\n/static/微信截图_20180416175553-0b41751d7a523b4959a4cbfce5042581-fee1c.png 800w,\n/static/微信截图_20180416175553-0b41751d7a523b4959a4cbfce5042581-b1a91.png 1200w,\n/static/微信截图_20180416175553-0b41751d7a523b4959a4cbfce5042581-ff4c9.png 1281w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h3 id="优缺点-3"><a href="#%E4%BC%98%E7%BC%BA%E7%82%B9-3" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>优缺点</h3>\n<ul>\n<li>\n<p>优点</p>\n<ul>\n<li>装饰模式与继承关系的目的都是要扩展对象的功能，但是装饰模式可以提供比继承更多的灵活性。</li>\n<li>通过使用不同的具体装饰类以及这些装饰类的排列组合，设计师可以创造出很多不同行为的组合。</li>\n<li>这种比继承更加灵活机动的特性，也同时意味着装饰模式比继承更加易于出错。</li>\n</ul>\n</li>\n<li>\n<p>缺点</p>\n<ul>\n<li>采用装饰模式进行系统设计往往会产生许多看上去类似的小对象，这些对象仅仅在他们相互连接的方式上有所不同，而不是它们的类或是它们的属性值有所不同。尽管对于那些了解这些系统的人来说，很容易对它们进行定制，但是很难学习这些系统，排错也很困难。</li>\n</ul>\n</li>\n</ul>\n<h3 id="模式使用-3"><a href="#%E6%A8%A1%E5%BC%8F%E4%BD%BF%E7%94%A8-3" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式使用</h3>\n<ul>\n<li>在不影响其它对象的情况下，以动态、透明的方式给单个对象添加职责。 需要动态地给一个对象增加功能，这些功能可以再动态地被撤销。</li>\n<li>当不能采用生成子类的方法进行扩充时。一种情况是，可能有大量独立的扩展，每一种组合将产生大量的子类，使得子类数目呈爆炸性增长。另一种情况可能是因为类定义不能继承(final 类)，或类不能用于生成子类。</li>\n</ul>\n<h3 id="需要注意的问题"><a href="#%E9%9C%80%E8%A6%81%E6%B3%A8%E6%84%8F%E7%9A%84%E9%97%AE%E9%A2%98" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>需要注意的问题</h3>\n<ul>\n<li>一个装饰类的接口必须与被装饰类的接口保持相同，对于客户端来说无论是装饰之前的对象还是装饰之后的对象都可以一致对待。</li>\n<li>尽量保持具体构件类 Component 作为一个“轻”类，也就是说不要把太多的逻辑和状态放在具体构件类中，可以通过装饰类对其进行扩展。</li>\n</ul>',
id:"/home/runner/work/GatsbyBlog/GatsbyBlog/blog/设计模式之结构型模式（一）/index.md absPath of file >>> MarkdownRemark",timeToRead:15,frontmatter:{date:"2018-04-19 00:04:24",path:"/design-pattern-structure-1/",tags:"面试, 设计模式, 读书笔记",title:"设计模式之结构型模式（一）",draft:null}}],length:74,tag:"读书笔记",pagesSum:15,page:11}}}});