webpackJsonp([8691794453951],{1685:function(n,s){n.exports={data:{file:{childImageSharp:{sizes:{base64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAeCAYAAAAsEj5rAAAACXBIWXMAAAsSAAALEgHS3X78AAAHlElEQVRIx12We2xT5xXAbcI2Vmn7o1I1uhVYRxL8tuPn9bXv0+/4/YgdOyYkkATCCEEYsqVNC2wCIYQWShmUBFh4hMAWECot0BUtlI4yAS1oKqJQXimsDBgTU8codnLO7r0uUPpJn87Rp+/8vvOdc75zr8xmZmTieI1NykU5yxOfxDncz3NUjAlyDXMjXGMhys+cG+FzGQ8VU4t7XuV8z8m+GUkrJclSqVReYJ0ZWQ8Tl2AdTPhnq9ns2QKd+crDZiHha8NsYCE21HZiXphpb3sxxTf99Tdsw51ldHqFaLOXXyzvYqOyZ0YPk5soylfouuUbvHOxh56JbiqJfi4/FnE1lxKetrGUZ954nbcdU/752ORpxWVsc6mZjPxctFtApeVtra1lmIPwTxClgeCqvGTsX/WWOEbtyTGWSoGbToOPzUHQ1QghVxOEhRniZ5U8XB4TzvTdgj1ZJdq2OOrkGhVRBnrYFum6TiK0l2fr0emMlVxcBhlnEniqDjlBuqg0CnD0MPWiDrwzhR4u+5B3x3WiLUNHJjxzZYvR8ZKTCP+Xo1JoM/nBYvSB1egHuyUIrCOBPj4LtD0KlD2K4h7SGip62aygxzaK9rHA3Aqt2vw0MRYjnyJtYaQdsXG9hgWFwgmVlXZUKUjUqmm0CgfwhA80Kgr1Wg40Sue4SuFEnZq+YjMbJ0kh0zmfemjQ0j2EJYh2a23RVOODIBvHmCsBUaoWLDoWKIsP50bTApxC5QwH1Ghp0Gk4MBk8aDLQEslooCc88VClsK+zGANI2mqLer0XFuea8PSuN+DM7o3QWyhAR7IBfj+vDbyOICS9aSjkZo8nvSlUKuxXLDUOKdN6LSl/AlRUE+vNAnD50l8XeTIEPiYEzXYG5mlNeGz7BvjPpY/g5snDcHxwE+zs7oCh1zvHCrNm48u/ML8j2muVQblBZ3t6ZY2KXKtQcDiwdk1xx9rV0BlqghEuD4fNUTy1Zwhw7Cbioxu461fdsOgFDa5pbh3zu6NifE9f+XCPlGHS5nuaFI3K8brJ4EUHES4WFiyEP2/dCPc2vYH/3NIHePcywP1LWLp3Ec4tWQa3FvbAu7294yqVA801rju5utYfiQyKDD4DnC8GWEhMafJPtBALxuHjo3+C8bufIn59DfHBFcDiDcQvzyF+/iEsbWuDadNMaDW5H7nY6Iyyh165zfLNtdUqIqLTsEJSQqBVUTD1JQPqdRT8sf9NuH7kMHy0fRg+O3EUzp96H/Zs2SBklxFKxwFmowtdTCIoPQx7oKLzl32PPTRPVSudDwQgCrUGL0+twdzsDjjSdwD2J1fh/q7N0N+1EtykB178qVY4lAahRktWkw95JrG4DAxPvHU3Wwb+rlcsHfK0WNxCoMdUCgdUaxnMBPKw7dVe2LyhDw4MboORA4NQOd2CaiUFaqWjZJGAyQGRUeubP8FqElqZspquEBeUM2zrnEQUa3R8USVcp2qGDZV6ErqXL4PfrlwFhSU9cPL4MejfshOsZq90sCg5KvHZ5MnPfa+cmFrxukRFuRZNcYqIoNngHheeFmiF11ClIDBdPwfqG9qhc1E3rF25GnrX90M204JqBfWItPrP8lTqa7vFpSw3GJ9cZjI4pW5TXaWezpKxh4Q5gEY9LwApVOtZMApxVWhd2DKvC7K5FjTUsFCj45Ah4yXaHuz1MBlgyHCb1HXISIXMTcekOJqN1h/72Mx92h5DwuwHjeChWseBQsNgJJ6H944eB5oNgaLajnaL/07E24wuKr7Cz+XuuenUsMioCxYmyHhnSPLQTYVVYVfjI46Mo80WBLMgLY4E1FhCOENBAsfHQG/0juuNPqGguU8ywXas5XNbg6783wJ8w781GtUPJc+irkap/Ufdje0JXytStnDJbA2D1Z4EKxEHsyUMRmsIdcZaNFpCYBYqwWQLPhD3Btn6t2Pe5uF0cD7Sdr/xmSab8racFaDooOvuk0wDEs40EFQGbVQGbEKXJoTPgZ3JoJGIgULvR6M1jE67rzvpae5ojC7GEJ9rfgILc7lC3NV0T6flTtjoPLK+VuD8rcD65gDtaQInPxOtzoxQRrXgD8/BdW/+YezYByfxvfdHvnxl+ZLKCDfzUMIze60Ey+brJukrqcjA1u3tBw8dfZiZuRQFaNFory/WEPUlE5kFK5WDQKRtbFPfUOnChUvFL27cwKuj/8CBHXv2iQw/k/KGuNwyCYiIkhw+sO/569eu7b1+ffR/H5z4BAcG38X1m/biyjX9ODR8GC9dHsXLV0fx5KlzePDIyFd7ht9ZJZhJrcvLhV/wMuUPljQWtC6Z+FjfuWPHlPMXLq64Onpz3d8/Pf9WX//OW2vWbITBof3n3tqya9fbh/7SvW1gZ9Xj/V1dr8kf614qIZONjBwrezi8Ty54K5d9ZzTmF+xe1LnioaD+4Nvrn4/ermif3yHp8UCDLMCky7Z+n192+/YdST9z5mPZ7t1D8ouXv6gQ4S9WTplks7mut8xZijxbKz2vvi2D39/cPyB/HC5xOm2czPvd35F8rkGCS0+I4WXV1QbJaMq06XqbNXCQJIILpH8hOic3GghZMpl62qG/Nf4PRzaQ862MzO4AAAAASUVORK5CYII=",aspectRatio:.6666666666666666,src:"/static/avatar-dc7bc85837bf005ae32d2a37dfdfa8a2-25c91.png",srcSet:"/static/avatar-dc7bc85837bf005ae32d2a37dfdfa8a2-8a97b.png 200w,\n/static/avatar-dc7bc85837bf005ae32d2a37dfdfa8a2-0fdf3.png 400w,\n/static/avatar-dc7bc85837bf005ae32d2a37dfdfa8a2-25c91.png 600w",srcWebp:"/static/avatar-dc7bc85837bf005ae32d2a37dfdfa8a2-216f6.webp",srcSetWebp:"/static/avatar-dc7bc85837bf005ae32d2a37dfdfa8a2-5d70e.webp 200w,\n/static/avatar-dc7bc85837bf005ae32d2a37dfdfa8a2-d1677.webp 400w,\n/static/avatar-dc7bc85837bf005ae32d2a37dfdfa8a2-216f6.webp 600w",sizes:"(max-width: 600px) 100vw, 600px"}}},site:{siteMetadata:{title:"女王控的博客",description:'前端工程师，黑猫女王控，欢迎勾搭，技术相关<a href="https://github.com/towavephone" target="_blank">@towavephone</a>，QQ闲聊<a href="tencent://AddContact/?fromId=45&fromSubId=1&subcmd=all&uin=634407147&website=www.oicqzone.com">@towave</a>，bili关注<a href="https://space.bilibili.com/11507708#/" target="_blank">@towave</a>',siteUrl:"https://blog.towavephone.com"}},mainPost:{html:'<h1 id="快速入门"><a href="#%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>快速入门</h1>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-08-09-14-26-57-ed4432cb963085603269690e4830d463-74e39.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 763px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 69.46264744429882%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsSAAALEgHS3X78AAABvElEQVQoz4WS63KiQBCFef8X25+7ZoOJiTrADCC3YbgrIORDsom15dZWHa2hr6dPt3WdNbiMcXeJxilbP//CNOf9mOjcyQu3qGWqj00XYLTw9dc0SvbKf2m7ENPD5MsQC/cpOO3C0+4oNtq482wsHNOUU0wG23MfY1osf7BmrjCl1MYpa0UwRHBZVeNjqhpVVBKY0i0rWdayKD1I9mNKNPaqVt355Mrfz/YPU3jzXFwnbQXhzpM2xVTwIv1tEL4enSep7Ch+5x2n+zg9hNGbzoWnnk/x2/74M9WCfjS3mi40pdcPybA0kVCom6BuAxjRk8516y/G1kfRslG8u8upaQNUsD6VNA4lAILDHGRaYCcCF/xxMSTlMiNM5SXpYelMB3xJdoAnmmsjICncjadsCJPjuBt0ZiiqkCOcX66yGXC4ZksynGEF2B5qt+cwSt4RDFJErHaMuGDOm6FIWfZMMtMuW5n0glmf+4hWKHy/c97jnE1fy79F3jqPyVccDwZD8CwXD6/tHla90m6+afdDyoaaduH5n2Q6c3H5TVL+i8rzw1dPbVnmv079O5kfMqAQdwL4pBy00fbhnd/jAwZsFJTFiw6kAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 08 09 14 26 57" title="" data-src="/static/2022-08-09-14-26-57-ed4432cb963085603269690e4830d463-74e39.png" data-srcset="/static/2022-08-09-14-26-57-ed4432cb963085603269690e4830d463-5eda4.png 200w,\n/static/2022-08-09-14-26-57-ed4432cb963085603269690e4830d463-73d63.png 400w,\n/static/2022-08-09-14-26-57-ed4432cb963085603269690e4830d463-74e39.png 763w" data-sizes="(max-width: 763px) 100vw, 763px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h2 id="绘制一个点"><a href="#%E7%BB%98%E5%88%B6%E4%B8%80%E4%B8%AA%E7%82%B9" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>绘制一个点</h2>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/3c2kgh?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<h3 id="着色器代码放在-script-标签中"><a href="#%E7%9D%80%E8%89%B2%E5%99%A8%E4%BB%A3%E7%A0%81%E6%94%BE%E5%9C%A8-script-%E6%A0%87%E7%AD%BE%E4%B8%AD" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>着色器代码放在 script 标签中</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="18816773595096370000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<!-- 顶点着色器源码 -->\n<script id=&quot;vertexShader&quot; type=&quot;x-shader/x-vertex&quot;>\n   void main() {\n     // 给内置变量 gl_PointSize 赋值像素大小\n     gl_PointSize = 20.0;\n     // 顶点位置，位于坐标原点\n     gl_Position = vec4(0.0, 0.0, 0.0, 1.0);\n   }\n</script>\n<!-- 片元着色器源码 -->\n<script id=&quot;fragmentShader&quot; type=&quot;x-shader/x-fragment&quot;>\n   void main() {\n     gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);\n   }\n</script>`, `18816773595096370000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token comment">&lt;!-- 顶点着色器源码 --></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>vertexShader<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>x-shader/x-vertex<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">\n   <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n     <span class="token comment">// 给内置变量 gl_PointSize 赋值像素大小</span>\n     gl_PointSize <span class="token operator">=</span> <span class="token number">20.0</span><span class="token punctuation">;</span>\n     <span class="token comment">// 顶点位置，位于坐标原点</span>\n     gl_Position <span class="token operator">=</span> <span class="token function">vec4</span><span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>\n<span class="token comment">&lt;!-- 片元着色器源码 --></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>fragmentShader<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>x-shader/x-fragment<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">\n   <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n     gl_FragColor <span class="token operator">=</span> <span class="token function">vec4</span><span class="token punctuation">(</span><span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="64723195755629590000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 顶点着色器源码\nvar vertexShaderSource = document.getElementById(\'vertexShader\').innerText;\n// 片元着色器源码\nvar fragShaderSource = document.getElementById(\'fragmentShader\').innerText;\n// 初始化着色器\nvar program = initShader(gl, vertexShaderSource, fragShaderSource);`, `64723195755629590000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// 顶点着色器源码</span>\n<span class="token keyword">var</span> vertexShaderSource <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">\'vertexShader\'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerText<span class="token punctuation">;</span>\n<span class="token comment">// 片元着色器源码</span>\n<span class="token keyword">var</span> fragShaderSource <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">\'fragmentShader\'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerText<span class="token punctuation">;</span>\n<span class="token comment">// 初始化着色器</span>\n<span class="token keyword">var</span> program <span class="token operator">=</span> <span class="token function">initShader</span><span class="token punctuation">(</span>gl<span class="token punctuation">,</span> vertexShaderSource<span class="token punctuation">,</span> fragShaderSource<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="绘制一个矩形"><a href="#%E7%BB%98%E5%88%B6%E4%B8%80%E4%B8%AA%E7%9F%A9%E5%BD%A2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>绘制一个矩形</h2>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/q3r5b7?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<h3 id="attribute-关键字"><a href="#attribute-%E5%85%B3%E9%94%AE%E5%AD%97" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>attribute 关键字</h3>\n<p>声明顶点相关数据的时候需要用到 attribute 关键字，目的是为了 js 可以调用相关的 WebGL API 把顶点相关数据从 js 传递给顶点着色器 attribute 声明的变量。</p>\n<h3 id="drawarrays-整体执行顺序"><a href="#drawarrays-%E6%95%B4%E4%BD%93%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>drawArrays 整体执行顺序</h3>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-08-09-16-51-11-90d5cb08b12e22656c560628d22a7c47-50b07.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 15.501519756838904%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAAsSAAALEgHS3X78AAAAwklEQVQI1wG3AEj/AFad306X3/P57b3a6DaJ25fD5f//72qo4UWS3ev17Mvi6jGG3Iy85P//8G6r4kCQ3eby7NDk6j2O33604wASb9AHZ83l7uWUu9gAU8lsqN719eEpfNAAYc3c6ueoxtoATshdn9z//+QsfdAAX8/V5uWtydkAWs5KktkAOonYMYHU7/brsNDlFXLThrjh///tUJbZJ3zU5vLrwNrnD23PeK/f///vVZjZIHnU4O7qxd3oG3nYaKffYaF6lQgy0RIAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 08 09 16 51 11" title="" data-src="/static/2022-08-09-16-51-11-90d5cb08b12e22656c560628d22a7c47-fee1c.png" data-srcset="/static/2022-08-09-16-51-11-90d5cb08b12e22656c560628d22a7c47-a67b7.png 200w,\n/static/2022-08-09-16-51-11-90d5cb08b12e22656c560628d22a7c47-0b187.png 400w,\n/static/2022-08-09-16-51-11-90d5cb08b12e22656c560628d22a7c47-fee1c.png 800w,\n/static/2022-08-09-16-51-11-90d5cb08b12e22656c560628d22a7c47-50b07.png 987w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h3 id="硬件相关"><a href="#%E7%A1%AC%E4%BB%B6%E7%9B%B8%E5%85%B3" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>硬件相关</h3>\n<ul>\n<li>\n<p>着色器语言编写的程序称为着色器程序(shader program)，在 GPU 顶点着色器单元上执行的是顶点着色器程序，在 GPU 片元着色器单元上执行的是片元着色器程序。</p>\n<p>顶点着色器</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="8627922285729306000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// attribute 声明 vec4 类型变量 apos\nattribute vec4 apos;\nvoid main() {\n   // 顶点坐标 apos 赋值给内置变量 gl_Position\n   // 逐顶点处理数据\n   gl_Position = apos;\n}`, `8627922285729306000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="glsl"\n              >\n                <span class="gatsby-code-button-language">glsl</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="glsl"><pre style="counter-reset: linenumber NaN" class="language-glsl line-numbers"><code class="language-glsl"><span class="token comment">// attribute 声明 vec4 类型变量 apos</span>\n<span class="token keyword">attribute</span> <span class="token keyword">vec4</span> apos<span class="token punctuation">;</span>\n<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n   <span class="token comment">// 顶点坐标 apos 赋值给内置变量 gl_Position</span>\n   <span class="token comment">// 逐顶点处理数据</span>\n   gl_Position <span class="token operator">=</span> apos<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>片元着色器</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="24565389974800490000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`void main() {\n   // 逐片元处理数据，所有片元(像素)设置为红色\n   gl_FragColor = vec4(1.0,0.0,0.0,1.0);\n}`, `24565389974800490000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="glsl"\n              >\n                <span class="gatsby-code-button-language">glsl</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="glsl"><pre style="counter-reset: linenumber NaN" class="language-glsl line-numbers"><code class="language-glsl"><span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n   <span class="token comment">// 逐片元处理数据，所有片元(像素)设置为红色</span>\n   gl_FragColor <span class="token operator">=</span> <span class="token keyword">vec4</span><span class="token punctuation">(</span><span class="token number">1.0</span><span class="token punctuation">,</span><span class="token number">0.0</span><span class="token punctuation">,</span><span class="token number">0.0</span><span class="token punctuation">,</span><span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>可编程顶点处理器(Programmable Vertex Processor)又称为顶点着色器，用来执行顶点着色器程序</p>\n</li>\n<li>\n<p>可编程片元处理器(Programmable Fragment Processor)又称为片元着色器，用来执行片元着色器程序</p>\n</li>\n<li>\n<p>GPU 中有各种专门的寄存器，比如用来接收顶点坐标数据的寄存器是输入寄存器，从数据类型的角度看属于浮点寄存器，用来临时存储浮点数；存储输出到显示器像素的帧缓存是输出寄存器，从处理速度的角度看是数据缓冲寄存器，GPU 处理数据的速度要比显示器扫描帧缓存中像素数据的速度要快得多</p>\n</li>\n<li>\n<p>显示器像素是显示器可以通过 RGB 值控制的最小单位，一幅图像是由大量像素点累积显示。着色器中的颜色定义会反映在显示器中</p>\n</li>\n<li>\n<p>显示器的分辨率就是显示器长度方向像素点的个数 X 显示器宽度方向像素点的个数</p>\n</li>\n<li>\n<p>屏幕相邻的两个像素单元的距离就是点距，点距越小显示效果越好，一般现在显示器 0.2mm~0.4mm 之间</p>\n</li>\n</ul>\n<h2 id="webgl-坐标系投影"><a href="#webgl-%E5%9D%90%E6%A0%87%E7%B3%BB%E6%8A%95%E5%BD%B1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>WebGL 坐标系—投影</h2>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/tf4psj?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<ol>\n<li>canvas 画布宽高采用的是像素值定义，以显示器为准，WebGL 中顶点坐标的表示方法采用的是相对坐标，相对于 canvas 而言 WebGL 坐标系统，X 轴水平向右，也就是 canvas 画布的 width 表示的宽度方向，x 等于 -1 表示 canvas 画布的左边界，x 等于 1 表示 canvas 画布的右边界，x 等于 0 对应的是画布宽度方向的中间。</li>\n<li>WebGL 坐标系统，Y 轴竖直向上，也就是 canvas 画布的 height 表示的高度方向，y 等于 -1 表示 canvas 画布的下边界，y 等于 1 表示 canvas 画布的上边界，y 等于 0 对应的是画布高度方向的中间。</li>\n<li>WebGL 坐标系统，Z 轴垂直 canvas 画布朝外，Z 值 -1 和 1 是 Z 方向的极限值，GPU 成像默认的沿着 Z 轴投影，你也可以抽象出一个概念，人眼睛位于 z 轴上，沿着 z 轴方向去观察物体，如果你在其他的书上看到视图坐标系等其它各类坐标系都是抽象出的概念都是建立在本节课所说的 WebGL 坐标系统之上，例如无人机导航中的所说的机体坐标系、地球坐标系都是直接对现实中事物的描述，三维场景中的各类坐标系与无人机中坐标系没什么区别，但是要显示在屏幕上，就要经过一些处理，这里不再详述，后面的教程后为大家引入各类坐标系概念，正射投影和透射投影概念。</li>\n</ol>\n<h2 id="webgl-平移变换"><a href="#webgl-%E5%B9%B3%E7%A7%BB%E5%8F%98%E6%8D%A2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>WebGL 平移变换</h2>\n<p>有以下几种方式可以做到沿 X 轴平移 -0.4</p>\n<h3 id="方法一"><a href="#%E6%96%B9%E6%B3%95%E4%B8%80" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>方法一</h3>\n<p>提前在顶点中计算</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="82939265257110600000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`var data = new Float32Array([\n   // 三角形顶点 1 坐标\n   0.0,\n   0.0,\n   1.0,\n\n   // 三角形顶点 2 坐标\n   0.0,\n   1.0,\n   0.0,\n\n   // 三角形顶点 3 坐标\n   1.0,\n   0.0,\n   0.0\n]);\n\n// x 坐标分别减少 0.4\n\nvar data = new Float32Array([\n   // 三角形顶点 1 坐标\n   -0.4,\n   0.0,\n   1.0,\n\n   // 三角形顶点 2 坐标\n   -0.4,\n   1.0,\n   0.0,\n\n   // 三角形顶点 3 坐标\n   0.6,\n   0.0,\n   0.0\n]);`, `82939265257110600000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Float32Array</span><span class="token punctuation">(</span><span class="token punctuation">[</span>\n   <span class="token comment">// 三角形顶点 1 坐标</span>\n   <span class="token number">0.0</span><span class="token punctuation">,</span>\n   <span class="token number">0.0</span><span class="token punctuation">,</span>\n   <span class="token number">1.0</span><span class="token punctuation">,</span>\n\n   <span class="token comment">// 三角形顶点 2 坐标</span>\n   <span class="token number">0.0</span><span class="token punctuation">,</span>\n   <span class="token number">1.0</span><span class="token punctuation">,</span>\n   <span class="token number">0.0</span><span class="token punctuation">,</span>\n\n   <span class="token comment">// 三角形顶点 3 坐标</span>\n   <span class="token number">1.0</span><span class="token punctuation">,</span>\n   <span class="token number">0.0</span><span class="token punctuation">,</span>\n   <span class="token number">0.0</span>\n<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// x 坐标分别减少 0.4</span>\n\n<span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Float32Array</span><span class="token punctuation">(</span><span class="token punctuation">[</span>\n   <span class="token comment">// 三角形顶点 1 坐标</span>\n   <span class="token operator">-</span><span class="token number">0.4</span><span class="token punctuation">,</span>\n   <span class="token number">0.0</span><span class="token punctuation">,</span>\n   <span class="token number">1.0</span><span class="token punctuation">,</span>\n\n   <span class="token comment">// 三角形顶点 2 坐标</span>\n   <span class="token operator">-</span><span class="token number">0.4</span><span class="token punctuation">,</span>\n   <span class="token number">1.0</span><span class="token punctuation">,</span>\n   <span class="token number">0.0</span><span class="token punctuation">,</span>\n\n   <span class="token comment">// 三角形顶点 3 坐标</span>\n   <span class="token number">0.6</span><span class="token punctuation">,</span>\n   <span class="token number">0.0</span><span class="token punctuation">,</span>\n   <span class="token number">0.0</span>\n<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="方法二"><a href="#%E6%96%B9%E6%B3%95%E4%BA%8C" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>方法二</h3>\n<p>循环修改数组 <code class="language-text">data=new Float32Array([..</code> 的顶点数据，把顶点坐标平移的数学计算任务交给 CPU</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="72845628512936450000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`for (var i = 0; i < 9; i += 3) {\n   data[i] += -0.4;\n}`, `72845628512936450000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">9</span><span class="token punctuation">;</span> i <span class="token operator">+=</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n   data<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token operator">-</span><span class="token number">0.4</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<h3 id="方法三"><a href="#%E6%96%B9%E6%B3%95%E4%B8%89" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>方法三</h3>\n<p>替换掉原来的代码 <code class="language-text">gl_Position = vec4(apos.x, apos.y, apos.z, 1)</code>，把顶点平移的数学运算任务交给了 GPU</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="85540116381403530000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 在顶点着色器中逐顶点沿着 x 轴平移 -0.4\ngl_Position = vec4(apos.x - 0.4, apos.y, apos.z, 1);`, `85540116381403530000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="glsl"\n              >\n                <span class="gatsby-code-button-language">glsl</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="glsl"><pre style="counter-reset: linenumber NaN" class="language-glsl line-numbers"><code class="language-glsl"><span class="token comment">// 在顶点着色器中逐顶点沿着 x 轴平移 -0.4</span>\ngl_Position <span class="token operator">=</span> <span class="token keyword">vec4</span><span class="token punctuation">(</span>apos<span class="token punctuation">.</span>x <span class="token operator">-</span> <span class="token number">0.4</span><span class="token punctuation">,</span> apos<span class="token punctuation">.</span>y<span class="token punctuation">,</span> apos<span class="token punctuation">.</span>z<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<h3 id="方法四"><a href="#%E6%96%B9%E6%B3%95%E5%9B%9B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>方法四</h3>\n<p>在原来的顶点着色器代码中，声明一个 4 x 4 矩阵 m4，然后通过矩阵和表示顶点坐标的列向量相乘 <code class="language-text">m4 * apos</code>，实现对顶点 apos 的平移变换，和方法三一样把数学计算任务交给 GPU 处理器，具体说是顶点着色器单元（Vertex Processor），顶点着色器单元能够完成矩阵的乘法运算。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="9028792033167376000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// attribute 声明 vec4 类型变量 apos\nattribute vec4 apos;\nvoid main() {\n  // 创建平移矩阵（沿 x 轴平移 -0.4）\n  // 1   0   0  -0.4\n  // 0   1   0    0\n  // 0   0   1    0\n  // 0   0   0    1\n  mat4 m4 = mat4(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -0.4, 0, 0, 1);\n  // 平移矩阵 m4 左乘顶点坐标（vec4 类型数据可以理解为线性代数中的 nx1 矩阵，即列向量）\n  // 逐顶点进行矩阵变换\n  gl_Position = m4 * apos;\n}`, `9028792033167376000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="glsl"\n              >\n                <span class="gatsby-code-button-language">glsl</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="glsl"><pre style="counter-reset: linenumber NaN" class="language-glsl line-numbers"><code class="language-glsl"><span class="token comment">// attribute 声明 vec4 类型变量 apos</span>\n<span class="token keyword">attribute</span> <span class="token keyword">vec4</span> apos<span class="token punctuation">;</span>\n<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// 创建平移矩阵（沿 x 轴平移 -0.4）</span>\n  <span class="token comment">// 1   0   0  -0.4</span>\n  <span class="token comment">// 0   1   0    0</span>\n  <span class="token comment">// 0   0   1    0</span>\n  <span class="token comment">// 0   0   0    1</span>\n  <span class="token keyword">mat4</span> m4 <span class="token operator">=</span> <span class="token keyword">mat4</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.4</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token comment">// 平移矩阵 m4 左乘顶点坐标（vec4 类型数据可以理解为线性代数中的 nx1 矩阵，即列向量）</span>\n  <span class="token comment">// 逐顶点进行矩阵变换</span>\n  gl_Position <span class="token operator">=</span> m4 <span class="token operator">*</span> apos<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>mat4 关键字和 vec4 关键字一样用来声明 WebGL 着色器变量的数据类型，和 vec4 一样也具有构造数据的功能。</p>\n<p>vec4 是 4 x 1 矩阵，就是列向量，有四个元素，mat4 表示 4 x 4 矩阵，mat4() 函数括号中的 16 个数据，每四个为一组，以列为准，前四个数就是 mat4 矩阵的第一列，后面的按顺序依次排列。</p>\n<h4 id="平移矩阵解析"><a href="#%E5%B9%B3%E7%A7%BB%E7%9F%A9%E9%98%B5%E8%A7%A3%E6%9E%90" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>平移矩阵解析</h4>\n<p>一个点的坐标是 (x, y, z)，假设沿着 X、Y、Z 轴分别平移 Tx、Ty、Tz，平移后的坐标是 <code class="language-text">(x + Tx, y + Ty, z + Tz)</code>。</p>\n<span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mo fence="true">[</mo><mtable><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>1</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>0</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>0</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>T</mi><mi>x</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>0</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>1</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>0</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>T</mi><mi>y</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>0</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>0</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>1</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>T</mi><mi>z</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>0</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>0</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>0</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>1</mn></mrow></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mrow><mo fence="true">[</mo><mtable><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>x</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>y</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>z</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>1</mn></mrow></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>=</mo><mrow><mo fence="true">[</mo><mtable><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>x</mi><mo>+</mo><mi>T</mi><mi>x</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>y</mi><mo>+</mo><mi>T</mi><mi>y</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>z</mi><mo>+</mo><mi>T</mi><mi>z</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>1</mn></mrow></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">   \\begin{bmatrix}\n   1 &amp; 0 &amp; 0 &amp; Tx \\\\\n   0 &amp; 1 &amp; 0 &amp; Ty \\\\\n   0 &amp; 0 &amp; 1 &amp; Tz \\\\\n   0 &amp; 0 &amp; 0 &amp; 1 \\\\\n   \\end{bmatrix}\n\n   \\begin{bmatrix}\n   x \\\\\n   y \\\\\n   z \\\\\n   1 \\\\\n   \\end{bmatrix}\n\n   =\n\n   \\begin{bmatrix}\n   x + Tx \\\\\n   y + Ty \\\\\n   z + Tz \\\\\n   1 \\\\\n   \\end{bmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:2.6520099999999998em;"></span><span class="strut bottom" style="height:4.80204em;vertical-align:-2.15003em;"></span><span class="base"><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.6520099999999998em;"><span style="top:-1.6499900000000003em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎣</span></span></span><span style="top:-2.80499em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎢</span></span></span><span style="top:-3.40599em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎢</span></span></span><span style="top:-4.65201em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎡</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.15003em;"></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.6500000000000004em;"><span style="top:-4.8100000000000005em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.2099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.1500000000000004em;"></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.6500000000000004em;"><span style="top:-4.8100000000000005em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.2099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.1500000000000004em;"></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.6500000000000004em;"><span style="top:-4.8100000000000005em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-1.2099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.1500000000000004em;"></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.6500000000000004em;"><span style="top:-4.8100000000000005em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="mord mathit">x</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="mord mathit" style="margin-right:0.03588em;">y</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="mord mathit" style="margin-right:0.04398em;">z</span></span></span><span style="top:-1.2099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.1500000000000004em;"></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.6520099999999998em;"><span style="top:-1.6499900000000003em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎦</span></span></span><span style="top:-2.80499em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎥</span></span></span><span style="top:-3.40599em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎥</span></span></span><span style="top:-4.65201em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎤</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.15003em;"></span></span></span></span></span></span><span class="mord rule" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.6520099999999998em;"><span style="top:-1.6499900000000003em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎣</span></span></span><span style="top:-2.80499em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎢</span></span></span><span style="top:-3.40599em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎢</span></span></span><span style="top:-4.65201em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎡</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.15003em;"></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.6500000000000004em;"><span style="top:-4.8100000000000005em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathit">x</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">y</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathit" style="margin-right:0.04398em;">z</span></span></span><span style="top:-1.2099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.1500000000000004em;"></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.6520099999999998em;"><span style="top:-1.6499900000000003em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎦</span></span></span><span style="top:-2.80499em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎥</span></span></span><span style="top:-3.40599em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎥</span></span></span><span style="top:-4.65201em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎤</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.15003em;"></span></span></span></span></span></span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.6520099999999998em;"><span style="top:-1.6499900000000003em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎣</span></span></span><span style="top:-2.80499em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎢</span></span></span><span style="top:-3.40599em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎢</span></span></span><span style="top:-4.65201em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎡</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.15003em;"></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.6500000000000004em;"><span style="top:-4.8100000000000005em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathit">x</span><span class="mord rule" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mord rule" style="margin-right:0.2222222222222222em;"></span><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="mord mathit">x</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mord rule" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mord rule" style="margin-right:0.2222222222222222em;"></span><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="mord mathit" style="margin-right:0.03588em;">y</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathit" style="margin-right:0.04398em;">z</span><span class="mord rule" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mord rule" style="margin-right:0.2222222222222222em;"></span><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="mord mathit" style="margin-right:0.04398em;">z</span></span></span><span style="top:-1.2099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.1500000000000004em;"></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.6520099999999998em;"><span style="top:-1.6499900000000003em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎦</span></span></span><span style="top:-2.80499em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎥</span></span></span><span style="top:-3.40599em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎥</span></span></span><span style="top:-4.65201em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎤</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.15003em;"></span></span></span></span></span></span></span></span></span></span>\n<h3 id="总结"><a href="#%E6%80%BB%E7%BB%93" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>总结</h3>\n<ol>\n<li>上面计算式的巧妙之处就是把三维坐标，增加一个元素 1.0，用 4 x 1 矩阵表示，n x 1 矩阵也称为列向量，对应的数据类型就是 vec4</li>\n<li>n 维向量增加一个维度用 n + 1 维向量表示就是齐次坐标。</li>\n<li>上面的 4 x 4 矩阵，就是平移矩阵，平移矩阵左乘顶点的齐次坐标，结果仍然是一个齐次坐标，也就是平移后的坐标。</li>\n<li>矩阵的乘法满足结合律，如果多次平移，可以把所有的平移矩阵先进行乘法运算，然后左乘要平移顶点的齐次坐标。</li>\n</ol>\n<h2 id="webgl-旋转变换"><a href="#webgl-%E6%97%8B%E8%BD%AC%E5%8F%98%E6%8D%A2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>WebGL 旋转变换</h2>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/5g67mm?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<h3 id="着色器内置函数"><a href="#%E7%9D%80%E8%89%B2%E5%99%A8%E5%86%85%E7%BD%AE%E5%87%BD%E6%95%B0" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>着色器内置函数</h3>\n<p>WebGL 着色器提供了一系列可以内置函数，也就是说不用声明可以直接调用的函数。</p>\n<p>radians() 函数：角度值转化为弧度制，参数是浮点数 float，比如 30 度时，要写成 30.0</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="93926472380427120000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 旋转角度 30 度转化为弧度值\nfloat radian = radians(30.0);`, `93926472380427120000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="glsl"\n              >\n                <span class="gatsby-code-button-language">glsl</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="glsl"><pre style="counter-reset: linenumber NaN" class="language-glsl line-numbers"><code class="language-glsl"><span class="token comment">// 旋转角度 30 度转化为弧度值</span>\n<span class="token keyword">float</span> radian <span class="token operator">=</span> <span class="token function">radians</span><span class="token punctuation">(</span><span class="token number">30.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>cos() 是余弦函数，参数要求是弧度值且是浮点数</p>\n<p>sin() 是正弦函数，参数要求是弧度值且是浮点数</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="51169844960910770000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 求解旋转角度余弦值\nfloat cos = cos(radian);\n// 求解旋转角度正弦值\nfloat sin = sin(radian);`, `51169844960910770000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="glsl"\n              >\n                <span class="gatsby-code-button-language">glsl</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="glsl"><pre style="counter-reset: linenumber NaN" class="language-glsl line-numbers"><code class="language-glsl"><span class="token comment">// 求解旋转角度余弦值</span>\n<span class="token keyword">float</span> cos <span class="token operator">=</span> <span class="token function">cos</span><span class="token punctuation">(</span>radian<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">// 求解旋转角度正弦值</span>\n<span class="token keyword">float</span> sin <span class="token operator">=</span> <span class="token function">sin</span><span class="token punctuation">(</span>radian<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="流程简述"><a href="#%E6%B5%81%E7%A8%8B%E7%AE%80%E8%BF%B0" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>流程简述</h3>\n<p>多次调用了绘制命令 <code class="language-text">gl.drawArrays</code>，data 变量定义的顶点数据初始化时，会存入内存中，执行代码 <code class="language-text">gl.bindBuffer(gl.ARRAY_BUFFER, buffer);</code> 内存中的数据一次性传入显存缓冲区中，传入缓冲区中的顶点数据可以通过 drawArrays 方法多次调用，每次 drawArrays 方法调用，顶点经过渲染管线得到的像素相关数据都会存入帧缓存中，后一次调用，前一次调用生成的像素数据不会清空，最终形成一幅完整的立方体线框图。</p>\n<h3 id="旋转矩阵解析"><a href="#%E6%97%8B%E8%BD%AC%E7%9F%A9%E9%98%B5%E8%A7%A3%E6%9E%90" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>旋转矩阵解析</h3>\n<p>假设一个点的坐标是 (x, y, z)，经过旋转变换后的坐标为 (X, Y, Z)</p>\n<h4 id="绕-z-轴旋转-γ-角度"><a href="#%E7%BB%95-z-%E8%BD%B4%E6%97%8B%E8%BD%AC-%CE%B3-%E8%A7%92%E5%BA%A6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>绕 Z 轴旋转 γ 角度</h4>\n<p>z 的坐标不变，x、y 的坐标发生变化，在笛卡尔坐标系下通过简单的数学计算就可以知道结果 <code class="language-text">X = xcosγ - ysinγ, Y = xsinγ + ycosγ</code></p>\n<span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mo fence="true">[</mo><mtable><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>c</mi><mi>o</mi><mi>s</mi><mi>γ</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>−</mo><mi>s</mi><mi>i</mi><mi>n</mi><mi>γ</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>0</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>0</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>s</mi><mi>i</mi><mi>n</mi><mi>γ</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>c</mi><mi>o</mi><mi>s</mi><mi>γ</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>0</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>0</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>0</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>0</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>1</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>0</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>0</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>0</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>0</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>1</mn></mrow></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mrow><mo fence="true">[</mo><mtable><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>x</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>y</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>z</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>1</mn></mrow></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>=</mo><mrow><mo fence="true">[</mo><mtable><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>x</mi><mi>c</mi><mi>o</mi><mi>s</mi><mi>γ</mi><mo>−</mo><mi>y</mi><mi>s</mi><mi>i</mi><mi>n</mi><mi>γ</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>x</mi><mi>s</mi><mi>i</mi><mi>n</mi><mi>γ</mi><mo>+</mo><mi>y</mi><mi>c</mi><mi>o</mi><mi>s</mi><mi>γ</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>z</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>1</mn></mrow></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">   \\begin{bmatrix}\n   cosγ &amp; -sinγ &amp; 0 &amp; 0 \\\\\n   sinγ &amp; cosγ &amp; 0 &amp; 0 \\\\\n   0 &amp; 0 &amp; 1 &amp; 0 \\\\\n   0 &amp; 0 &amp; 0 &amp; 1 \\\\\n   \\end{bmatrix}\n\n   \\begin{bmatrix}\n   x \\\\\n   y \\\\\n   z \\\\\n   1 \\\\\n   \\end{bmatrix}\n\n   =\n\n   \\begin{bmatrix}\n   xcosγ - ysinγ \\\\\n   xsinγ + ycosγ \\\\\n   z \\\\\n   1 \\\\\n   \\end{bmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:2.6520099999999998em;"></span><span class="strut bottom" style="height:4.80204em;vertical-align:-2.15003em;"></span><span class="base"><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.6520099999999998em;"><span style="top:-1.6499900000000003em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎣</span></span></span><span style="top:-2.80499em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎢</span></span></span><span style="top:-3.40599em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎢</span></span></span><span style="top:-4.65201em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎡</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.15003em;"></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.6500000000000004em;"><span style="top:-4.8100000000000005em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathit">c</span><span class="mord mathit">o</span><span class="mord mathit">s</span><span class="mord mathit" style="margin-right:0.05556em;">γ</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathit">s</span><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.05556em;">γ</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.2099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.1500000000000004em;"></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.6500000000000004em;"><span style="top:-4.8100000000000005em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">−</span><span class="mord mathit">s</span><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.05556em;">γ</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathit">c</span><span class="mord mathit">o</span><span class="mord mathit">s</span><span class="mord mathit" style="margin-right:0.05556em;">γ</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.2099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.1500000000000004em;"></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.6500000000000004em;"><span style="top:-4.8100000000000005em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-1.2099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.1500000000000004em;"></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.6500000000000004em;"><span style="top:-4.8100000000000005em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.2099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.1500000000000004em;"></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.6520099999999998em;"><span style="top:-1.6499900000000003em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎦</span></span></span><span style="top:-2.80499em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎥</span></span></span><span style="top:-3.40599em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎥</span></span></span><span style="top:-4.65201em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎤</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.15003em;"></span></span></span></span></span></span><span class="mord rule" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.6520099999999998em;"><span style="top:-1.6499900000000003em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎣</span></span></span><span style="top:-2.80499em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎢</span></span></span><span style="top:-3.40599em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎢</span></span></span><span style="top:-4.65201em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎡</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.15003em;"></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.6500000000000004em;"><span style="top:-4.8100000000000005em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathit">x</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">y</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathit" style="margin-right:0.04398em;">z</span></span></span><span style="top:-1.2099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.1500000000000004em;"></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.6520099999999998em;"><span style="top:-1.6499900000000003em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎦</span></span></span><span style="top:-2.80499em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎥</span></span></span><span style="top:-3.40599em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎥</span></span></span><span style="top:-4.65201em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎤</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.15003em;"></span></span></span></span></span></span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.6520099999999998em;"><span style="top:-1.6499900000000003em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎣</span></span></span><span style="top:-2.80499em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎢</span></span></span><span style="top:-3.40599em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎢</span></span></span><span style="top:-4.65201em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎡</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.15003em;"></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.6500000000000004em;"><span style="top:-4.8100000000000005em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathit">x</span><span class="mord mathit">c</span><span class="mord mathit">o</span><span class="mord mathit">s</span><span class="mord mathit" style="margin-right:0.05556em;">γ</span><span class="mord rule" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mord rule" style="margin-right:0.2222222222222222em;"></span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mord mathit">s</span><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.05556em;">γ</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathit">x</span><span class="mord mathit">s</span><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.05556em;">γ</span><span class="mord rule" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mord rule" style="margin-right:0.2222222222222222em;"></span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mord mathit">c</span><span class="mord mathit">o</span><span class="mord mathit">s</span><span class="mord mathit" style="margin-right:0.05556em;">γ</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathit" style="margin-right:0.04398em;">z</span></span></span><span style="top:-1.2099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.1500000000000004em;"></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.6520099999999998em;"><span style="top:-1.6499900000000003em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎦</span></span></span><span style="top:-2.80499em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎥</span></span></span><span style="top:-3.40599em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎥</span></span></span><span style="top:-4.65201em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎤</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.15003em;"></span></span></span></span></span></span></span></span></span></span>\n<h4 id="绕-x-轴旋转-α-角度"><a href="#%E7%BB%95-x-%E8%BD%B4%E6%97%8B%E8%BD%AC-%CE%B1-%E8%A7%92%E5%BA%A6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>绕 X 轴旋转 α 角度</h4>\n<p>x 的坐标不变，y、z 的坐标发生变化 <code class="language-text">Y = ycosα - zsinα, Z = ysinα + zcosα</code></p>\n<span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mo fence="true">[</mo><mtable><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>1</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>0</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>0</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>0</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>0</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>c</mi><mi>o</mi><mi>s</mi><mi>α</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>−</mo><mi>s</mi><mi>i</mi><mi>n</mi><mi>α</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>0</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>0</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>s</mi><mi>i</mi><mi>n</mi><mi>α</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>c</mi><mi>o</mi><mi>s</mi><mi>α</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>0</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>0</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>0</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>0</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>1</mn></mrow></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mrow><mo fence="true">[</mo><mtable><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>x</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>y</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>z</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>1</mn></mrow></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>=</mo><mrow><mo fence="true">[</mo><mtable><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>x</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>y</mi><mi>c</mi><mi>o</mi><mi>s</mi><mi>α</mi><mo>−</mo><mi>z</mi><mi>s</mi><mi>i</mi><mi>n</mi><mi>α</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>y</mi><mi>s</mi><mi>i</mi><mi>n</mi><mi>α</mi><mo>+</mo><mi>z</mi><mi>c</mi><mi>o</mi><mi>s</mi><mi>α</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>1</mn></mrow></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">   \\begin{bmatrix}\n   1 &amp; 0 &amp; 0 &amp; 0 \\\\\n   0 &amp; cosα &amp; -sinα &amp; 0 \\\\\n   0 &amp; sinα &amp; cosα &amp; 0 \\\\\n   0 &amp; 0 &amp; 0 &amp; 1 \\\\\n   \\end{bmatrix}\n\n   \\begin{bmatrix}\n   x \\\\\n   y \\\\\n   z \\\\\n   1 \\\\\n   \\end{bmatrix}\n\n   =\n\n   \\begin{bmatrix}\n   x \\\\\n   ycosα - zsinα \\\\\n   ysinα + zcosα \\\\\n   1 \\\\\n   \\end{bmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:2.6520099999999998em;"></span><span class="strut bottom" style="height:4.80204em;vertical-align:-2.15003em;"></span><span class="base"><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.6520099999999998em;"><span style="top:-1.6499900000000003em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎣</span></span></span><span style="top:-2.80499em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎢</span></span></span><span style="top:-3.40599em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎢</span></span></span><span style="top:-4.65201em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎡</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.15003em;"></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.6500000000000004em;"><span style="top:-4.8100000000000005em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.2099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.1500000000000004em;"></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.6500000000000004em;"><span style="top:-4.8100000000000005em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathit">c</span><span class="mord mathit">o</span><span class="mord mathit">s</span><span class="mord mathit" style="margin-right:0.0037em;">α</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathit">s</span><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.0037em;">α</span></span></span><span style="top:-1.2099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.1500000000000004em;"></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.6500000000000004em;"><span style="top:-4.8100000000000005em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">−</span><span class="mord mathit">s</span><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.0037em;">α</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathit">c</span><span class="mord mathit">o</span><span class="mord mathit">s</span><span class="mord mathit" style="margin-right:0.0037em;">α</span></span></span><span style="top:-1.2099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.1500000000000004em;"></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.6500000000000004em;"><span style="top:-4.8100000000000005em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.2099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.1500000000000004em;"></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.6520099999999998em;"><span style="top:-1.6499900000000003em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎦</span></span></span><span style="top:-2.80499em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎥</span></span></span><span style="top:-3.40599em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎥</span></span></span><span style="top:-4.65201em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎤</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.15003em;"></span></span></span></span></span></span><span class="mord rule" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.6520099999999998em;"><span style="top:-1.6499900000000003em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎣</span></span></span><span style="top:-2.80499em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎢</span></span></span><span style="top:-3.40599em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎢</span></span></span><span style="top:-4.65201em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎡</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.15003em;"></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.6500000000000004em;"><span style="top:-4.8100000000000005em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathit">x</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">y</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathit" style="margin-right:0.04398em;">z</span></span></span><span style="top:-1.2099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.1500000000000004em;"></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.6520099999999998em;"><span style="top:-1.6499900000000003em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎦</span></span></span><span style="top:-2.80499em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎥</span></span></span><span style="top:-3.40599em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎥</span></span></span><span style="top:-4.65201em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎤</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.15003em;"></span></span></span></span></span></span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.6520099999999998em;"><span style="top:-1.6499900000000003em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎣</span></span></span><span style="top:-2.80499em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎢</span></span></span><span style="top:-3.40599em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎢</span></span></span><span style="top:-4.65201em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎡</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.15003em;"></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.6500000000000004em;"><span style="top:-4.8100000000000005em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathit">x</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mord mathit">c</span><span class="mord mathit">o</span><span class="mord mathit">s</span><span class="mord mathit" style="margin-right:0.0037em;">α</span><span class="mord rule" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mord rule" style="margin-right:0.2222222222222222em;"></span><span class="mord mathit" style="margin-right:0.04398em;">z</span><span class="mord mathit">s</span><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.0037em;">α</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mord mathit">s</span><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.0037em;">α</span><span class="mord rule" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mord rule" style="margin-right:0.2222222222222222em;"></span><span class="mord mathit" style="margin-right:0.04398em;">z</span><span class="mord mathit">c</span><span class="mord mathit">o</span><span class="mord mathit">s</span><span class="mord mathit" style="margin-right:0.0037em;">α</span></span></span><span style="top:-1.2099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.1500000000000004em;"></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.6520099999999998em;"><span style="top:-1.6499900000000003em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎦</span></span></span><span style="top:-2.80499em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎥</span></span></span><span style="top:-3.40599em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎥</span></span></span><span style="top:-4.65201em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎤</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.15003em;"></span></span></span></span></span></span></span></span></span></span>\n<h4 id="绕-y-轴旋转-β-角度"><a href="#%E7%BB%95-y-%E8%BD%B4%E6%97%8B%E8%BD%AC-%CE%B2-%E8%A7%92%E5%BA%A6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>绕 Y 轴旋转 β 角度</h4>\n<p>y 的坐标不变，x、z 的坐标发生变化 <code class="language-text">X = zsinβ + xcosβ, Z = zcosβ - xsinβ</code></p>\n<span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mo fence="true">[</mo><mtable><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>c</mi><mi>o</mi><mi>s</mi><mi>β</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>0</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>s</mi><mi>i</mi><mi>n</mi><mi>β</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>0</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>0</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>1</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>0</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>0</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>−</mo><mi>s</mi><mi>i</mi><mi>n</mi><mi>β</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>0</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>c</mi><mi>o</mi><mi>s</mi><mi>β</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>0</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>0</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>0</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>0</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>1</mn></mrow></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mrow><mo fence="true">[</mo><mtable><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>x</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>y</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>z</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>1</mn></mrow></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>=</mo><mrow><mo fence="true">[</mo><mtable><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>z</mi><mi>s</mi><mi>i</mi><mi>n</mi><mi>β</mi><mo>+</mo><mi>x</mi><mi>c</mi><mi>o</mi><mi>s</mi><mi>β</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>y</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>z</mi><mi>c</mi><mi>o</mi><mi>s</mi><mi>β</mi><mo>−</mo><mi>x</mi><mi>s</mi><mi>i</mi><mi>n</mi><mi>β</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>1</mn></mrow></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">   \\begin{bmatrix}\n   cosβ &amp; 0 &amp; sinβ &amp; 0 \\\\\n   0 &amp; 1 &amp; 0 &amp; 0 \\\\\n   -sinβ &amp; 0 &amp; cosβ &amp; 0 \\\\\n   0 &amp; 0 &amp; 0 &amp; 1 \\\\\n   \\end{bmatrix}\n\n   \\begin{bmatrix}\n   x \\\\\n   y \\\\\n   z \\\\\n   1 \\\\\n   \\end{bmatrix}\n\n   =\n\n   \\begin{bmatrix}\n   zsinβ + xcosβ \\\\\n   y \\\\\n   zcosβ - xsinβ \\\\\n   1 \\\\\n   \\end{bmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:2.6520099999999998em;"></span><span class="strut bottom" style="height:4.80204em;vertical-align:-2.15003em;"></span><span class="base"><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.6520099999999998em;"><span style="top:-1.6499900000000003em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎣</span></span></span><span style="top:-2.80499em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎢</span></span></span><span style="top:-3.40599em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎢</span></span></span><span style="top:-4.65201em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎡</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.15003em;"></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.6500000000000004em;"><span style="top:-4.8100000000000005em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathit">c</span><span class="mord mathit">o</span><span class="mord mathit">s</span><span class="mord mathit" style="margin-right:0.05278em;">β</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">−</span><span class="mord mathit">s</span><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.05278em;">β</span></span></span><span style="top:-1.2099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.1500000000000004em;"></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.6500000000000004em;"><span style="top:-4.8100000000000005em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.2099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.1500000000000004em;"></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.6500000000000004em;"><span style="top:-4.8100000000000005em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathit">s</span><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.05278em;">β</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathit">c</span><span class="mord mathit">o</span><span class="mord mathit">s</span><span class="mord mathit" style="margin-right:0.05278em;">β</span></span></span><span style="top:-1.2099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.1500000000000004em;"></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.6500000000000004em;"><span style="top:-4.8100000000000005em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.2099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.1500000000000004em;"></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.6520099999999998em;"><span style="top:-1.6499900000000003em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎦</span></span></span><span style="top:-2.80499em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎥</span></span></span><span style="top:-3.40599em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎥</span></span></span><span style="top:-4.65201em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎤</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.15003em;"></span></span></span></span></span></span><span class="mord rule" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.6520099999999998em;"><span style="top:-1.6499900000000003em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎣</span></span></span><span style="top:-2.80499em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎢</span></span></span><span style="top:-3.40599em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎢</span></span></span><span style="top:-4.65201em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎡</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.15003em;"></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.6500000000000004em;"><span style="top:-4.8100000000000005em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathit">x</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">y</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathit" style="margin-right:0.04398em;">z</span></span></span><span style="top:-1.2099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.1500000000000004em;"></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.6520099999999998em;"><span style="top:-1.6499900000000003em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎦</span></span></span><span style="top:-2.80499em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎥</span></span></span><span style="top:-3.40599em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎥</span></span></span><span style="top:-4.65201em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎤</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.15003em;"></span></span></span></span></span></span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.6520099999999998em;"><span style="top:-1.6499900000000003em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎣</span></span></span><span style="top:-2.80499em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎢</span></span></span><span style="top:-3.40599em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎢</span></span></span><span style="top:-4.65201em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎡</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.15003em;"></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.6500000000000004em;"><span style="top:-4.8100000000000005em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathit" style="margin-right:0.04398em;">z</span><span class="mord mathit">s</span><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.05278em;">β</span><span class="mord rule" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mord rule" style="margin-right:0.2222222222222222em;"></span><span class="mord mathit">x</span><span class="mord mathit">c</span><span class="mord mathit">o</span><span class="mord mathit">s</span><span class="mord mathit" style="margin-right:0.05278em;">β</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">y</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathit" style="margin-right:0.04398em;">z</span><span class="mord mathit">c</span><span class="mord mathit">o</span><span class="mord mathit">s</span><span class="mord mathit" style="margin-right:0.05278em;">β</span><span class="mord rule" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mord rule" style="margin-right:0.2222222222222222em;"></span><span class="mord mathit">x</span><span class="mord mathit">s</span><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.05278em;">β</span></span></span><span style="top:-1.2099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.1500000000000004em;"></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.6520099999999998em;"><span style="top:-1.6499900000000003em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎦</span></span></span><span style="top:-2.80499em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎥</span></span></span><span style="top:-3.40599em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎥</span></span></span><span style="top:-4.65201em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎤</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.15003em;"></span></span></span></span></span></span></span></span></span></span>\n<h3 id="总结-1"><a href="#%E6%80%BB%E7%BB%93-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>总结</h3>\n<ol>\n<li>如果几何体经过多次旋转可以把每一次的旋转矩阵，连续进行乘法运算，最后再左乘顶点的齐次坐标</li>\n<li>旋转变换和平移变换同时存在，旋转矩阵和平移矩阵一样都是四阶矩阵，因此同样可以先进行乘法运算得到的仍是四阶矩阵，最后再左乘顶点的齐次坐标，这种情况也就是复合变换</li>\n</ol>\n<h2 id="webgl-顶点索引绘制"><a href="#webgl-%E9%A1%B6%E7%82%B9%E7%B4%A2%E5%BC%95%E7%BB%98%E5%88%B6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>WebGL 顶点索引绘制</h2>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/eep0sn?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>WebGL 为了复用顶点数据新引入了一个新的绘制函数 gl.drawElements()，gl.drawElements() 和 gl.drawArrays() 方法一样都是命令浏览器 WebGL 图形系统开始处理顶点绘制渲染出像素并显示在屏幕 Canvas 画布上。区别是 gl.drawArrays() 方法直接调用顶点数组数据，gl.drawElements() 是通过一个索引数组访问使用顶点数组中的顶点数据。</p>\n<p>可以在上面旋转变换的基础上进行修改</p>\n<h3 id="顶点列举"><a href="#%E9%A1%B6%E7%82%B9%E5%88%97%E4%B8%BE" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>顶点列举</h3>\n<p>只需要把所有的顶点列举一次即可，不用重复枚举。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="46494353677717970000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 8 个顶点坐标数组\nvar data = new Float32Array([\n   // 顶点 0\n   0.5,\n   0.5,\n   0.5,\n\n   // 顶点 1\n   -0.5,\n   0.5,\n   0.5,\n\n   // 顶点 2\n   -0.5,\n   -0.5,\n   0.5,\n\n   // 顶点 3\n   0.5,\n   -0.5,\n   0.5,\n\n   // 顶点 4\n   0.5,\n   0.5,\n   -0.5,\n\n   // 顶点 5\n   -0.5,\n   0.5,\n   -0.5,\n\n   // 顶点 6\n   -0.5,\n   -0.5,\n   -0.5,\n\n   // 顶点 7\n   0.5,\n   -0.5,\n   -0.5\n]);`, `46494353677717970000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// 8 个顶点坐标数组</span>\n<span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Float32Array</span><span class="token punctuation">(</span><span class="token punctuation">[</span>\n   <span class="token comment">// 顶点 0</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n\n   <span class="token comment">// 顶点 1</span>\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n\n   <span class="token comment">// 顶点 2</span>\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n\n   <span class="token comment">// 顶点 3</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n\n   <span class="token comment">// 顶点 4</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n\n   <span class="token comment">// 顶点 5</span>\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n\n   <span class="token comment">// 顶点 6</span>\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n\n   <span class="token comment">// 顶点 7</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.5</span>\n<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="顶点的索引数组"><a href="#%E9%A1%B6%E7%82%B9%E7%9A%84%E7%B4%A2%E5%BC%95%E6%95%B0%E7%BB%84" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>顶点的索引数组</h3>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-08-10-17-15-53-30f6de9980c9f647d712659669b00cce-28759.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 500px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 31.6%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsSAAALEgHS3X78AAABc0lEQVQY002QzytFQRTHv3PO3B9vHvfdd90fj/fui9JjqRAl2bJRkoXYCf+AhY29/wB5rJTyD8jGiixkYedHUUrJxpJEY66LfOtMn5k5c86cLwCNTBHfF3w+j/sNp6jKgB+iyWJ+l2na3c+hRVtQuoLCYwfcszKcE9twDeojttRrAG150DYEUPIUorJ5wiaSklgK8LN55m+EZshLa7i4Yi1FKY2lDZ7wZigOeqm/Z7hw65pGFrQELwpZMfmeCbVOHDWJKr8/U+b4k3PW0lYvhPZtgcY8EK4BwR0jvRFIdd4bkGhnCTgBn7QBjfII4E8JUSLaC/FPO9yVQ+GjFc5FBOewCp4NQeMenKMq1Ftgq9eSyaiTWSyfdhMPg8XMJRN+KBYyzrzAkHv6V5jcMyXkaizsjbCTRv26qMcdcjlN1EsR6t3FNcOZE7KWFf02X1CyReRnvGlaaW8Amn5HluUnRq1J6LsC7GNCfEDoNt4mWphhjb4ApINErzyiiI0AAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 08 10 17 15 53" title="" data-src="/static/2022-08-10-17-15-53-30f6de9980c9f647d712659669b00cce-28759.png" data-srcset="/static/2022-08-10-17-15-53-30f6de9980c9f647d712659669b00cce-6ac48.png 200w,\n/static/2022-08-10-17-15-53-30f6de9980c9f647d712659669b00cce-4b8bf.png 400w,\n/static/2022-08-10-17-15-53-30f6de9980c9f647d712659669b00cce-28759.png 500w" data-sizes="(max-width: 500px) 100vw, 500px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<table>\n<thead>\n<tr>\n<th align="left">索引值</th>\n<th align="left">索引值对应顶点坐标</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align="left">0</td>\n<td align="left">(0.5, 0.5, 0.5)</td>\n</tr>\n<tr>\n<td align="left">1</td>\n<td align="left">(-0.5, 0.5, 0.5)</td>\n</tr>\n<tr>\n<td align="left">2</td>\n<td align="left">(-0.5, -0.5, 0.5)</td>\n</tr>\n<tr>\n<td align="left">3</td>\n<td align="left">(0.5, -0.5, 0.5)</td>\n</tr>\n<tr>\n<td align="left">4</td>\n<td align="left">(0.5, 0.5, -0.5)</td>\n</tr>\n<tr>\n<td align="left">5</td>\n<td align="left">(-0.5, 0.5, -0.5)</td>\n</tr>\n<tr>\n<td align="left">6</td>\n<td align="left">(-0.5, -0.5, -0.5)</td>\n</tr>\n<tr>\n<td align="left">7</td>\n<td align="left">(0.5, -0.5, -0.5)</td>\n</tr>\n</tbody>\n</table>\n<p>下面代码中表示的顶点索引如上图所示。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="34712929845959750000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 顶点索引数组\nvar indexes = new Uint8Array([\n   // 前四个点对应索引值\n   0,\n   1,\n   2,\n   3, // gl.LINE_LOOP 模式四个点绘制一个矩形框\n\n   // 后四个顶点对应索引值\n   4,\n   5,\n   6,\n   7, // gl.LINE_LOOP 模式四个点绘制一个矩形框\n\n   // 前后对应点对应索引值\n   0,\n   4, // 两个点绘制一条直线\n   1,\n   5, // 两个点绘制一条直线\n   2,\n   6, // 两个点绘制一条直线\n   3,\n   7 // 两个点绘制一条直线\n]);`, `34712929845959750000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// 顶点索引数组</span>\n<span class="token keyword">var</span> indexes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span><span class="token punctuation">[</span>\n   <span class="token comment">// 前四个点对应索引值</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">2</span><span class="token punctuation">,</span>\n   <span class="token number">3</span><span class="token punctuation">,</span> <span class="token comment">// gl.LINE_LOOP 模式四个点绘制一个矩形框</span>\n\n   <span class="token comment">// 后四个顶点对应索引值</span>\n   <span class="token number">4</span><span class="token punctuation">,</span>\n   <span class="token number">5</span><span class="token punctuation">,</span>\n   <span class="token number">6</span><span class="token punctuation">,</span>\n   <span class="token number">7</span><span class="token punctuation">,</span> <span class="token comment">// gl.LINE_LOOP 模式四个点绘制一个矩形框</span>\n\n   <span class="token comment">// 前后对应点对应索引值</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">4</span><span class="token punctuation">,</span> <span class="token comment">// 两个点绘制一条直线</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">5</span><span class="token punctuation">,</span> <span class="token comment">// 两个点绘制一条直线</span>\n   <span class="token number">2</span><span class="token punctuation">,</span>\n   <span class="token number">6</span><span class="token punctuation">,</span> <span class="token comment">// 两个点绘制一条直线</span>\n   <span class="token number">3</span><span class="token punctuation">,</span>\n   <span class="token number">7</span> <span class="token comment">// 两个点绘制一条直线</span>\n<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ol>\n<li>\n<p>索引数组的数据传入显存缓冲区，注意与顶点数据传入缓冲区方法参数的对比，传入索引数据时，bindBuffer() 和 bufferData() 方法的第一个参数是 <code class="language-text">gl.ELEMENT_ARRAY_BUFFER</code>，传入顶点数据时是 <code class="language-text">gl.ARRAY_BUFFER</code>。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="64958869104023400000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 创建缓冲区对象\nvar indexesBuffer = gl.createBuffer();\n// 绑定缓冲区对象\ngl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, indexesBuffer);\n// 索引数组 indexes 数据传入缓冲区\ngl.bufferData(gl.ELEMENT_ARRAY_BUFFER, indexes, gl.STATIC_DRAW);`, `64958869104023400000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// 创建缓冲区对象</span>\n<span class="token keyword">var</span> indexesBuffer <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token function">createBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">// 绑定缓冲区对象</span>\ngl<span class="token punctuation">.</span><span class="token function">bindBuffer</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">ELEMENT_ARRAY_BUFFER</span><span class="token punctuation">,</span> indexesBuffer<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">// 索引数组 indexes 数据传入缓冲区</span>\ngl<span class="token punctuation">.</span><span class="token function">bufferData</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">ELEMENT_ARRAY_BUFFER</span><span class="token punctuation">,</span> indexes<span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">STATIC_DRAW</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>使用方法 drawElements() 替换 drawArrays() 方法，参数设置基本一致，方法 drawElements() 只是新增了一个数据类型设置参数 <code class="language-text">gl.UNSIGNED_BYTE</code>。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="13669748145984340000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// LINE_LOOP 模式绘制前四个点\ngl.drawElements(gl.LINE_LOOP, 4, gl.UNSIGNED_BYTE, 0);\n// LINE_LOOP 模式从第五个点开始绘制四个点\ngl.drawElements(gl.LINE_LOOP, 4, gl.UNSIGNED_BYTE, 4);\n// LINES 模式绘制后 8 个点\ngl.drawElements(gl.LINES, 8, gl.UNSIGNED_BYTE, 8);`, `13669748145984340000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// LINE_LOOP 模式绘制前四个点</span>\ngl<span class="token punctuation">.</span><span class="token function">drawElements</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">LINE_LOOP</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">UNSIGNED_BYTE</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">// LINE_LOOP 模式从第五个点开始绘制四个点</span>\ngl<span class="token punctuation">.</span><span class="token function">drawElements</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">LINE_LOOP</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">UNSIGNED_BYTE</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">// LINES 模式绘制后 8 个点</span>\ngl<span class="token punctuation">.</span><span class="token function">drawElements</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">LINES</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">UNSIGNED_BYTE</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n</ol>\n<h3 id="gldrawelements"><a href="#gldrawelements" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>gl.drawElements()</h3>\n<p>参数格式：drawElements(mode, count, type, offset)</p>\n<table>\n<thead>\n<tr>\n<th align="left">参数</th>\n<th align="left">含义</th>\n<th align="left">值</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align="left">mode</td>\n<td align="left">绘制模式</td>\n<td align="left">gl.LINE_LOOP、gl.LINES、gl.TRIANGLES 等</td>\n</tr>\n<tr>\n<td align="left">count</td>\n<td align="left">绘制顶点个数</td>\n<td align="left">整型数</td>\n</tr>\n<tr>\n<td align="left">type</td>\n<td align="left">数据类型</td>\n<td align="left"><code class="language-text">gl.UNSIGNED_BYTE</code>\n 对应 Uint8Array，\n<code class="language-text">gl.UNSIGNED_SHORT</code>\n 对应 Uint16Array</td>\n</tr>\n<tr>\n<td align="left">offset</td>\n<td align="left">从第几个点开始绘制</td>\n<td align="left">整型数，以字节为单位</td>\n</tr>\n</tbody>\n</table>\n<p>count 和 offset 组合可以确定绘制众多顶点中的连续一段，通过顶点索引关联顶点数据，count 和 offset 指的是顶点的索引数组。</p>\n<h2 id="varying-变量和颜色插值"><a href="#varying-%E5%8F%98%E9%87%8F%E5%92%8C%E9%A2%9C%E8%89%B2%E6%8F%92%E5%80%BC" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>varying 变量和颜色插值</h2>\n<p>使用关键字 varying 实现颜色插值计算</p>\n<h3 id="颜色线性插值"><a href="#%E9%A2%9C%E8%89%B2%E7%BA%BF%E6%80%A7%E6%8F%92%E5%80%BC" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>颜色线性插值</h3>\n<p>顶点着色器</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="49967587170604696000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// attribute 声明 vec4 类型变量 apos\nattribute vec4 apos;\n// attribute 声明顶点颜色变量\nattribute vec4 a_color;\n// varying 声明顶点颜色插值后变量，使用 varying 可以插值计算\nvarying vec4 v_color;\nvoid main() {\n  // 顶点坐标 apos 赋值给内置变量 gl_Position\n  gl_Position = apos;\n  // 顶点颜色插值计算\n  v_color = a_color;\n}`, `49967587170604696000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="glsl"\n              >\n                <span class="gatsby-code-button-language">glsl</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="glsl"><pre style="counter-reset: linenumber NaN" class="language-glsl line-numbers"><code class="language-glsl"><span class="token comment">// attribute 声明 vec4 类型变量 apos</span>\n<span class="token keyword">attribute</span> <span class="token keyword">vec4</span> apos<span class="token punctuation">;</span>\n<span class="token comment">// attribute 声明顶点颜色变量</span>\n<span class="token keyword">attribute</span> <span class="token keyword">vec4</span> a_color<span class="token punctuation">;</span>\n<span class="token comment">// varying 声明顶点颜色插值后变量，使用 varying 可以插值计算</span>\n<span class="token keyword">varying</span> <span class="token keyword">vec4</span> v_color<span class="token punctuation">;</span>\n<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// 顶点坐标 apos 赋值给内置变量 gl_Position</span>\n  gl_Position <span class="token operator">=</span> apos<span class="token punctuation">;</span>\n  <span class="token comment">// 顶点颜色插值计算</span>\n  v_color <span class="token operator">=</span> a_color<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>片元着色器</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="79334051238871060000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 所有 float 类型数据的精度是 lowp\n// lowp 是精度限定字表示低精度，计算机资源有限，设置数据精度是为了提高执行效率\n// 除了片元着色器中的浮点类型 float 数据，其它所有类型数据浏览器都有默认的精度，因此要设定片元着色器中浮点类型 float 数据精度，否则会报错\nprecision lowp float;\n// 接收顶点着色器中 v_color 数据\nvarying vec4 v_color;\nvoid main() {\n  // 插值后颜色数据赋值给对应的片元\n  gl_FragColor = v_color;\n}`, `79334051238871060000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="glsl"\n              >\n                <span class="gatsby-code-button-language">glsl</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="glsl"><pre style="counter-reset: linenumber NaN" class="language-glsl line-numbers"><code class="language-glsl"><span class="token comment">// 所有 float 类型数据的精度是 lowp</span>\n<span class="token comment">// lowp 是精度限定字表示低精度，计算机资源有限，设置数据精度是为了提高执行效率</span>\n<span class="token comment">// 除了片元着色器中的浮点类型 float 数据，其它所有类型数据浏览器都有默认的精度，因此要设定片元着色器中浮点类型 float 数据精度，否则会报错</span>\n<span class="token keyword">precision</span> <span class="token keyword">lowp</span> <span class="token keyword">float</span><span class="token punctuation">;</span>\n<span class="token comment">// 接收顶点着色器中 v_color 数据</span>\n<span class="token keyword">varying</span> <span class="token keyword">vec4</span> v_color<span class="token punctuation">;</span>\n<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// 插值后颜色数据赋值给对应的片元</span>\n  gl_FragColor <span class="token operator">=</span> v_color<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/do2n1z?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<h3 id="获取顶点变量"><a href="#%E8%8E%B7%E5%8F%96%E9%A1%B6%E7%82%B9%E5%8F%98%E9%87%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>获取顶点变量</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="99520262682446090000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 获取顶点着色器的位置变量 apos\nvar aposLocation = gl.getAttribLocation(program, \'apos\');\nvar a_color = gl.getAttribLocation(program, \'a_color\');`, `99520262682446090000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// 获取顶点着色器的位置变量 apos</span>\n<span class="token keyword">var</span> aposLocation <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token function">getAttribLocation</span><span class="token punctuation">(</span>program<span class="token punctuation">,</span> <span class="token string">\'apos\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">var</span> a_color <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token function">getAttribLocation</span><span class="token punctuation">(</span>program<span class="token punctuation">,</span> <span class="token string">\'a_color\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<h3 id="设置顶点颜色、位置数据"><a href="#%E8%AE%BE%E7%BD%AE%E9%A1%B6%E7%82%B9%E9%A2%9C%E8%89%B2%E3%80%81%E4%BD%8D%E7%BD%AE%E6%95%B0%E6%8D%AE" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>设置顶点颜色、位置数据</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="83619062824893640000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/**\n  创建顶点位置数据数组 data，存储两个顶点 (-0.5, 0.5)、(0.5, 0.5)\n  创建顶点颜色数组 colorData，存储两个顶点对应 RGB 颜色值 (0, 0, 1)、(1, 0, 0)\n **/\nvar data = new Float32Array([-0.5, 0.5, 0.5, 0.5]);\nvar colorData = new Float32Array([0, 0, 1, 1, 0, 0]);`, `83619062824893640000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">/**\n  创建顶点位置数据数组 data，存储两个顶点 (-0.5, 0.5)、(0.5, 0.5)\n  创建顶点颜色数组 colorData，存储两个顶点对应 RGB 颜色值 (0, 0, 1)、(1, 0, 0)\n **/</span>\n<span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Float32Array</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">var</span> colorData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Float32Array</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="创建顶点缓冲区、传递数据"><a href="#%E5%88%9B%E5%BB%BA%E9%A1%B6%E7%82%B9%E7%BC%93%E5%86%B2%E5%8C%BA%E3%80%81%E4%BC%A0%E9%80%92%E6%95%B0%E6%8D%AE" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>创建顶点缓冲区、传递数据</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="84049964236205340000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/**\n  创建缓冲区 buffer，传入顶点位置数据 data\n **/\nvar buffer = gl.createBuffer();\ngl.bindBuffer(gl.ARRAY_BUFFER, buffer);\ngl.bufferData(gl.ARRAY_BUFFER, data, gl.STATIC_DRAW);\ngl.vertexAttribPointer(aposLocation, 2, gl.FLOAT, false, 0, 0);\ngl.enableVertexAttribArray(aposLocation);\n\n/**\n  创建缓冲区 colorBuffer，传入顶点颜色数据 colorData\n **/\nvar colorBuffer = gl.createBuffer();\ngl.bindBuffer(gl.ARRAY_BUFFER, colorBuffer);\ngl.bufferData(gl.ARRAY_BUFFER, colorData, gl.STATIC_DRAW);\ngl.vertexAttribPointer(a_color, 3, gl.FLOAT, false, 0, 0);\ngl.enableVertexAttribArray(a_color);`, `84049964236205340000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">/**\n  创建缓冲区 buffer，传入顶点位置数据 data\n **/</span>\n<span class="token keyword">var</span> buffer <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token function">createBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\ngl<span class="token punctuation">.</span><span class="token function">bindBuffer</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">ARRAY_BUFFER</span><span class="token punctuation">,</span> buffer<span class="token punctuation">)</span><span class="token punctuation">;</span>\ngl<span class="token punctuation">.</span><span class="token function">bufferData</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">ARRAY_BUFFER</span><span class="token punctuation">,</span> data<span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">STATIC_DRAW</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\ngl<span class="token punctuation">.</span><span class="token function">vertexAttribPointer</span><span class="token punctuation">(</span>aposLocation<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">FLOAT</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\ngl<span class="token punctuation">.</span><span class="token function">enableVertexAttribArray</span><span class="token punctuation">(</span>aposLocation<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">/**\n  创建缓冲区 colorBuffer，传入顶点颜色数据 colorData\n **/</span>\n<span class="token keyword">var</span> colorBuffer <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token function">createBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\ngl<span class="token punctuation">.</span><span class="token function">bindBuffer</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">ARRAY_BUFFER</span><span class="token punctuation">,</span> colorBuffer<span class="token punctuation">)</span><span class="token punctuation">;</span>\ngl<span class="token punctuation">.</span><span class="token function">bufferData</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">ARRAY_BUFFER</span><span class="token punctuation">,</span> colorData<span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">STATIC_DRAW</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\ngl<span class="token punctuation">.</span><span class="token function">vertexAttribPointer</span><span class="token punctuation">(</span>a_color<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">FLOAT</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\ngl<span class="token punctuation">.</span><span class="token function">enableVertexAttribArray</span><span class="token punctuation">(</span>a_color<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="创建一个彩色三角形"><a href="#%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%BD%A9%E8%89%B2%E4%B8%89%E8%A7%92%E5%BD%A2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>创建一个彩色三角形</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="68480551963926020000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/**\n  创建顶点位置数据数组 data，存储 3 个顶点 (-0.5, 0.5)、(0.5, 0.5)、(0.5, -0.5)\n  创建顶点颜色数组 colorData，存储 3 个顶点对应 RGB 颜色值 (1, 0, 0)、(0, 1, 0)、(0, 0, 1)\n**/\nvar data = new Float32Array([-0.5, 0.5, 0.5, 0.5, 0.5, -0.5]);\nvar colorData = new Float32Array([1, 0, 0, 0, 1, 0, 0, 0, 1]);\n\n/** 执行绘制命令 **/\ngl.drawArrays(gl.TRIANGLES, 0, 3);`, `68480551963926020000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">/**\n  创建顶点位置数据数组 data，存储 3 个顶点 (-0.5, 0.5)、(0.5, 0.5)、(0.5, -0.5)\n  创建顶点颜色数组 colorData，存储 3 个顶点对应 RGB 颜色值 (1, 0, 0)、(0, 1, 0)、(0, 0, 1)\n**/</span>\n<span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Float32Array</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">var</span> colorData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Float32Array</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">/** 执行绘制命令 **/</span>\ngl<span class="token punctuation">.</span><span class="token function">drawArrays</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TRIANGLES</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/x1ef94?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<h3 id="两个单色三角面（不同颜色）"><a href="#%E4%B8%A4%E4%B8%AA%E5%8D%95%E8%89%B2%E4%B8%89%E8%A7%92%E9%9D%A2%EF%BC%88%E4%B8%8D%E5%90%8C%E9%A2%9C%E8%89%B2%EF%BC%89" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>两个单色三角面（不同颜色）</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="86785341408355120000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/**\n  创建顶点位置数据数组 data，存储 6 个顶点\n  创建顶点颜色数组 colorData，存储 6 个顶点对应 RGB 颜色值\n **/\nvar data = new Float32Array([\n   // 第一个三角形的三个点\n   -0.5,\n   0.5,\n   0.5,\n   0.5,\n   0.5,\n   -0.5,\n\n   // 第二个三角形的三个点\n   -0.5,\n   0.5,\n   0.5,\n   -0.5,\n   -0.5,\n   -0.5\n]);\n\nvar colorData = new Float32Array([\n   // 三个红色点\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n\n   // 三个蓝色点\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1\n]);`, `86785341408355120000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">/**\n  创建顶点位置数据数组 data，存储 6 个顶点\n  创建顶点颜色数组 colorData，存储 6 个顶点对应 RGB 颜色值\n **/</span>\n<span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Float32Array</span><span class="token punctuation">(</span><span class="token punctuation">[</span>\n   <span class="token comment">// 第一个三角形的三个点</span>\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n\n   <span class="token comment">// 第二个三角形的三个点</span>\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.5</span>\n<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">var</span> colorData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Float32Array</span><span class="token punctuation">(</span><span class="token punctuation">[</span>\n   <span class="token comment">// 三个红色点</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n\n   <span class="token comment">// 三个蓝色点</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span>\n<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/xnbwdw?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<h3 id="颜色插值（顶点位置、颜色使用一个缓冲区存储）"><a href="#%E9%A2%9C%E8%89%B2%E6%8F%92%E5%80%BC%EF%BC%88%E9%A1%B6%E7%82%B9%E4%BD%8D%E7%BD%AE%E3%80%81%E9%A2%9C%E8%89%B2%E4%BD%BF%E7%94%A8%E4%B8%80%E4%B8%AA%E7%BC%93%E5%86%B2%E5%8C%BA%E5%AD%98%E5%82%A8%EF%BC%89" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>颜色插值（顶点位置、颜色使用一个缓冲区存储）</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="15988338291977300000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/**\n 创建顶点位置数据数组 data，存储两个顶点 (-0.5, 0.5)、(0.5, 0.5)\n 存储两个顶点对应 RGB 颜色值 (0, 0, 1)、(1, 0, 0)\n **/\nvar data = new Float32Array([-0.5, 0.5, 0, 0, 1, 0.5, 0.5, 1, 0, 0]);\n/**\n 创建缓冲区 buffer，传入顶点颜色、位置数据 data\n **/\nvar buffer = gl.createBuffer();\ngl.bindBuffer(gl.ARRAY_BUFFER, buffer);\ngl.bufferData(gl.ARRAY_BUFFER, data, gl.STATIC_DRAW);\n// 4 表示 data 数组一个元素占据的字节数\n// 倒数第二个参数 4 * 5 表示每 5 个元素是一个选择单元\n// 第 2 个参数 2 表示从 5 元素组成的一个选择单元中选择前 2 个作为顶点位置数据\ngl.vertexAttribPointer(aposLocation, 2, gl.FLOAT, false, 4 * 5, 0);\n// 最后一个参数 4 * 2 表示 5 元素组成的一个选择单元中偏移 2 个元素\n// 第 2 个参数 3 表示从 5 元素组成的一个选择单元中选择后三个作为顶点颜色数据\ngl.vertexAttribPointer(a_color, 3, gl.FLOAT, false, 4 * 5, 4 * 2);\ngl.enableVertexAttribArray(aposLocation);\ngl.enableVertexAttribArray(a_color);`, `15988338291977300000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">/**\n 创建顶点位置数据数组 data，存储两个顶点 (-0.5, 0.5)、(0.5, 0.5)\n 存储两个顶点对应 RGB 颜色值 (0, 0, 1)、(1, 0, 0)\n **/</span>\n<span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Float32Array</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">/**\n 创建缓冲区 buffer，传入顶点颜色、位置数据 data\n **/</span>\n<span class="token keyword">var</span> buffer <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token function">createBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\ngl<span class="token punctuation">.</span><span class="token function">bindBuffer</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">ARRAY_BUFFER</span><span class="token punctuation">,</span> buffer<span class="token punctuation">)</span><span class="token punctuation">;</span>\ngl<span class="token punctuation">.</span><span class="token function">bufferData</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">ARRAY_BUFFER</span><span class="token punctuation">,</span> data<span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">STATIC_DRAW</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">// 4 表示 data 数组一个元素占据的字节数</span>\n<span class="token comment">// 倒数第二个参数 4 * 5 表示每 5 个元素是一个选择单元</span>\n<span class="token comment">// 第 2 个参数 2 表示从 5 元素组成的一个选择单元中选择前 2 个作为顶点位置数据</span>\ngl<span class="token punctuation">.</span><span class="token function">vertexAttribPointer</span><span class="token punctuation">(</span>aposLocation<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">FLOAT</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token operator">*</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">// 最后一个参数 4 * 2 表示 5 元素组成的一个选择单元中偏移 2 个元素</span>\n<span class="token comment">// 第 2 个参数 3 表示从 5 元素组成的一个选择单元中选择后三个作为顶点颜色数据</span>\ngl<span class="token punctuation">.</span><span class="token function">vertexAttribPointer</span><span class="token punctuation">(</span>a_color<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">FLOAT</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token operator">*</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\ngl<span class="token punctuation">.</span><span class="token function">enableVertexAttribArray</span><span class="token punctuation">(</span>aposLocation<span class="token punctuation">)</span><span class="token punctuation">;</span>\ngl<span class="token punctuation">.</span><span class="token function">enableVertexAttribArray</span><span class="token punctuation">(</span>a_color<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/gtg0fg?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<h2 id="立方体-每个面一种颜色"><a href="#%E7%AB%8B%E6%96%B9%E4%BD%93-%E6%AF%8F%E4%B8%AA%E9%9D%A2%E4%B8%80%E7%A7%8D%E9%A2%9C%E8%89%B2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>立方体-每个面一种颜色</h2>\n<p>思路很简单，在线框模式的立方体源码基础上直接进行更改，添加 varying 变量，引入顶点数据颜色，立方体 6 个面，每个面可以分为两个三角面绘制出来，也就是说每个面需要定义 6 个点，6 个点需要定义 36 个顶点。</p>\n<h3 id="着色器程序"><a href="#%E7%9D%80%E8%89%B2%E5%99%A8%E7%A8%8B%E5%BA%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>着色器程序</h3>\n<p>着色器程序参考颜色插值 varying 的使用方法添加即可，就不再列出。</p>\n<h3 id="顶点数据"><a href="#%E9%A1%B6%E7%82%B9%E6%95%B0%E6%8D%AE" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>顶点数据</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="40436951687939750000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/**\n 创建顶点位置数据数组 data，js 中小数点前面的 0 可以省略\n **/\nvar data = new Float32Array([\n   0.5,\n   0.5,\n   0.5,\n   -0.5,\n   0.5,\n   0.5,\n   -0.5,\n   -0.5,\n   0.5,\n   0.5,\n   0.5,\n   0.5,\n   -0.5,\n   -0.5,\n   0.5,\n   0.5,\n   -0.5,\n   0.5, // 面1\n\n   0.5,\n   0.5,\n   0.5,\n   0.5,\n   -0.5,\n   0.5,\n   0.5,\n   -0.5,\n   -0.5,\n   0.5,\n   0.5,\n   0.5,\n   0.5,\n   -0.5,\n   -0.5,\n   0.5,\n   0.5,\n   -0.5, // 面 2\n\n   0.5,\n   0.5,\n   0.5,\n   0.5,\n   0.5,\n   -0.5,\n   -0.5,\n   0.5,\n   -0.5,\n   0.5,\n   0.5,\n   0.5,\n   -0.5,\n   0.5,\n   -0.5,\n   -0.5,\n   0.5,\n   0.5, // 面 3\n\n   -0.5,\n   0.5,\n   0.5,\n   -0.5,\n   0.5,\n   -0.5,\n   -0.5,\n   -0.5,\n   -0.5,\n   -0.5,\n   0.5,\n   0.5,\n   -0.5,\n   -0.5,\n   -0.5,\n   -0.5,\n   -0.5,\n   0.5, // 面 4\n\n   -0.5,\n   -0.5,\n   -0.5,\n   0.5,\n   -0.5,\n   -0.5,\n   0.5,\n   -0.5,\n   0.5,\n   -0.5,\n   -0.5,\n   -0.5,\n   0.5,\n   -0.5,\n   0.5,\n   -0.5,\n   -0.5,\n   0.5, // 面 5\n\n   0.5,\n   -0.5,\n   -0.5,\n   -0.5,\n   -0.5,\n   -0.5,\n   -0.5,\n   0.5,\n   -0.5,\n   0.5,\n   -0.5,\n   -0.5,\n   -0.5,\n   0.5,\n   -0.5,\n   0.5,\n   0.5,\n   -0.5 // 面 6\n]);\n\n/**\n 创建顶点颜色数组colorData\n **/\nvar colorData = new Float32Array([\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0, // 红色——面 1\n\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0, // 绿色——面 2\n\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1, // 蓝色——面 3\n\n   1,\n   1,\n   0,\n   1,\n   1,\n   0,\n   1,\n   1,\n   0,\n   1,\n   1,\n   0,\n   1,\n   1,\n   0,\n   1,\n   1,\n   0, // 黄色——面 4\n\n   0,\n   0,\n   0,\n   0,\n   0,\n   0,\n   0,\n   0,\n   0,\n   0,\n   0,\n   0,\n   0,\n   0,\n   0,\n   0,\n   0,\n   0, // 黑色——面 5\n\n   1,\n   1,\n   1,\n   1,\n   1,\n   1,\n   1,\n   1,\n   1,\n   1,\n   1,\n   1,\n   1,\n   1,\n   1,\n   1,\n   1,\n   1 // 白色——面 6\n]);`, `40436951687939750000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">/**\n 创建顶点位置数据数组 data，js 中小数点前面的 0 可以省略\n **/</span>\n<span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Float32Array</span><span class="token punctuation">(</span><span class="token punctuation">[</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token comment">// 面1</span>\n\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token comment">// 面 2</span>\n\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token comment">// 面 3</span>\n\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token comment">// 面 4</span>\n\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token comment">// 面 5</span>\n\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token number">0.5</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.5</span> <span class="token comment">// 面 6</span>\n<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">/**\n 创建顶点颜色数组colorData\n **/</span>\n<span class="token keyword">var</span> colorData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Float32Array</span><span class="token punctuation">(</span><span class="token punctuation">[</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 红色——面 1</span>\n\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 绿色——面 2</span>\n\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// 蓝色——面 3</span>\n\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 黄色——面 4</span>\n\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 黑色——面 5</span>\n\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">1</span> <span class="token comment">// 白色——面 6</span>\n<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="深度测试"><a href="#%E6%B7%B1%E5%BA%A6%E6%B5%8B%E8%AF%95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>深度测试</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="49286732217503390000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/** 执行绘制之前，一定要开启深度测试，以免颜色混乱 **/\ngl.enable(gl.DEPTH_TEST);`, `49286732217503390000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">/** 执行绘制之前，一定要开启深度测试，以免颜色混乱 **/</span>\ngl<span class="token punctuation">.</span><span class="token function">enable</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">DEPTH_TEST</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/wt39uk?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<h3 id="测试"><a href="#%E6%B5%8B%E8%AF%95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>测试</h3>\n<p>可以把所有的颜色都改为红色，发现没有立体的视觉效果，白、蓝、绿处于其他三个面的前面，是可见面。可以把三个面设置为红色 R 分别为 1、0.9、0.8 来测试效果。你可以发现 R 值差异了 0.1，你会有很强的立体感，其实你可以继续使用更小的差值，来测试你的眼睛视觉变化。这其实相当于手动编写颜色值，模拟自然界光场，如果有兴趣可以学习下一节课程，如何模拟真实自然界的太阳光、灯光等各种类型光线在物体表面反射光场的分布，不仅不同的面会出现 R 值不同，一个面上的 R 值也会不同，呈现某种规律的变化，比如金属在阳光下会有局部高光现象。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="68633072542204270000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/**\n 创建顶点颜色数组 colorData\n **/\nvar colorData = new Float32Array([\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0, // 红色——面 1\n\n   0.9,\n   0,\n   0,\n   0.9,\n   0,\n   0,\n   0.9,\n   0,\n   0,\n   0.9,\n   0,\n   0,\n   0.9,\n   0,\n   0,\n   0.9,\n   0,\n   0, // R = 0.9——面 2\n\n   0.8,\n   0,\n   0,\n   0.8,\n   0,\n   0,\n   0.8,\n   0,\n   0,\n   0.8,\n   0,\n   0,\n   0.8,\n   0,\n   0,\n   0.8,\n   0,\n   0, // R = 0.8——面 3\n\n   1,\n   1,\n   0,\n   1,\n   1,\n   0,\n   1,\n   1,\n   0,\n   1,\n   1,\n   0,\n   1,\n   1,\n   0,\n   1,\n   1,\n   0, // 黄色——面 4\n\n   0,\n   0,\n   0,\n   0,\n   0,\n   0,\n   0,\n   0,\n   0,\n   0,\n   0,\n   0,\n   0,\n   0,\n   0,\n   0,\n   0,\n   0, // 黑色——面 5\n\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0 // R = 1——面 6\n]);`, `68633072542204270000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">/**\n 创建顶点颜色数组 colorData\n **/</span>\n<span class="token keyword">var</span> colorData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Float32Array</span><span class="token punctuation">(</span><span class="token punctuation">[</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 红色——面 1</span>\n\n   <span class="token number">0.9</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0.9</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0.9</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0.9</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0.9</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0.9</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// R = 0.9——面 2</span>\n\n   <span class="token number">0.8</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0.8</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0.8</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0.8</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0.8</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0.8</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// R = 0.8——面 3</span>\n\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 黄色——面 4</span>\n\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 黑色——面 5</span>\n\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span> <span class="token comment">// R = 1——面 6</span>\n<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/kmys42?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<h2 id="webgl-光照渲染立方体"><a href="#webgl-%E5%85%89%E7%85%A7%E6%B8%B2%E6%9F%93%E7%AB%8B%E6%96%B9%E4%BD%93" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>WebGL 光照渲染立方体</h2>\n<h3 id="光照模型"><a href="#%E5%85%89%E7%85%A7%E6%A8%A1%E5%9E%8B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>光照模型</h3>\n<h4 id="漫反射"><a href="#%E6%BC%AB%E5%8F%8D%E5%B0%84" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>漫反射</h4>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-08-16-11-20-33-0d0cb0596ec226b70f581a065aac1328-49396.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 526px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 38.59315589353612%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABAklEQVQoz22R3W6DMAyFef93602n7WLTelPUrVMLQyH/IWe2ISXQRcQRzqdj57jBsjKHaZq3JDJ9kqVURojAhk1pw5bVtO0Fxug5H6OAWZgsXBE1JkJrS9dxZf8TPJ3OBJq1K65cQUWw73scDkc5JR+CCOaKEUEOXMwHD6PUU4e1KNeKcUkyt7DFHt4NB0/F3j8+8fpyfAjkXYfzmeEcMCgNN6rV04ppys/vYDF03eYZNVgEucv7eYBuO/hvjcmnDdMUMATajo1en4GdP2JPZ6GvHvZm4W4G7osGmnYePiY5JqSQnp49UdeBhhDJbNdr2NHh5+0OdRlhqYBXFpGmn+j+D46Tdfyug7P4AAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 08 16 11 20 33" title="" data-src="/static/2022-08-16-11-20-33-0d0cb0596ec226b70f581a065aac1328-49396.png" data-srcset="/static/2022-08-16-11-20-33-0d0cb0596ec226b70f581a065aac1328-68c83.png 200w,\n/static/2022-08-16-11-20-33-0d0cb0596ec226b70f581a065aac1328-d339c.png 400w,\n/static/2022-08-16-11-20-33-0d0cb0596ec226b70f581a065aac1328-49396.png 526w" data-sizes="(max-width: 526px) 100vw, 526px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>平行光漫反射简单数学模型：漫反射光的颜色 = 几何体表面基色 x 光线颜色 x 光线入射角余弦值</p>\n<p>几何体表面基色简单的说就是不考虑光照物体自身的颜色。</p>\n<h4 id="漫反射模型：光线入射角余弦值"><a href="#%E6%BC%AB%E5%8F%8D%E5%B0%84%E6%A8%A1%E5%9E%8B%EF%BC%9A%E5%85%89%E7%BA%BF%E5%85%A5%E5%B0%84%E8%A7%92%E4%BD%99%E5%BC%A6%E5%80%BC" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>漫反射模型：光线入射角余弦值</h4>\n<p>这个数学模型没有考虑镜面反射描述的就是理想的漫反射体，并不能完整的描述物体表面的光场，既然是数学模型，自然就是可以修正的，比如添加一个系数，更改指数等等，这里不再详述。比如普通的桌子桌面它的粗糙度是微米 um 级，相比人的脸它是平的，光的波长是纳米 nm 级，这时候桌子表面相比光线是凹凸不平的，宏观来看一束光线照射到物体的表面，对于理想的漫反射而言，因为表面无规则随机分布凹凸不平的反射面，光线的反射是不定向的，换句话说任何角度的反射光都是一样的，这也就是说物体反射到眼睛中的光与人的观察位置无关，反射效果展示如上图所示。</p>\n<p>关于漫反射光照数学模型中物体的漫反射光强度与光线的入射角有关如何解释，这个其实很简单，比如两块纸板面积相同，如下图所示，两个边长为 L 的方形板，一个垂直太阳光线放置，一个不垂直太阳光线也就是入射角不是 90 度，同样强度的光照条件下，垂直太阳光的纸板的光通量肯定比斜着放的纸板接收的光量大，这时候就有必要给数学模型引入一个入射角的因数。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-08-16-11-26-01-929cb5e8a1b650748b372295c25f96b9-f4a80.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 631px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 33.914421553090335%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsSAAALEgHS3X78AAABEUlEQVQY032P626DMAyFef/3WIXjZM8xTR2Xksu4tP1b7Vo6oJAAnQPd30mfrCPnnNgOhGkJbjphOpSN8II6DXWwcEI2XDerR+jubqaOanhhA6ZHUCNVItxZRlpZj3YsnyBzIJ3XhFrFCNKyzGExU9jB30OYDXefcejDI2TWW/WCWgV9N7DMYjEF5AOzTDZjmPaY9SxtMarDqF4m/xsGmkmBpMPoQhmW1LA7g243+sqKiTbyBrNwX4rO9NdhOQciOWF8wvRNqJqrC1Ydr3pRXh+PdHwPT+9s+4UvxDePa4zPpNn2E54/UHYBFANUIx5uuJ+xmjjV/UTwwy3Mh41sWG4hH0D1SNuWDl576jzIH8jtL1pVWZwtCc86AAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 08 16 11 26 01" title="" data-src="/static/2022-08-16-11-26-01-929cb5e8a1b650748b372295c25f96b9-f4a80.png" data-srcset="/static/2022-08-16-11-26-01-929cb5e8a1b650748b372295c25f96b9-0de09.png 200w,\n/static/2022-08-16-11-26-01-929cb5e8a1b650748b372295c25f96b9-e7891.png 400w,\n/static/2022-08-16-11-26-01-929cb5e8a1b650748b372295c25f96b9-f4a80.png 631w" data-sizes="(max-width: 631px) 100vw, 631px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h4 id="rgb-分量表示颜色"><a href="#rgb-%E5%88%86%E9%87%8F%E8%A1%A8%E7%A4%BA%E9%A2%9C%E8%89%B2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>RGB 分量表示颜色</h4>\n<p>光的颜色可以使用多种模型来表示，把上面的文字公式使用 RGB 具体参数来表示形式如下，比如物体表面的颜色是纯红色 (1, 0, 0)，入射光是纯白色 (1, 1, 1)，光线入射角是 60 度，余弦值就是 0.5，代入下面公式，可以得出结果是 (0.5, 0, 0), 结果仍然是红色，这是符合实际生活的，白色太阳光照在常见的红色物体上，反射的颜色是红色，只是太阳光线照射在物体表面的角度不同，反射的光强度不同。入射光垂直物体表面，也就是入射角是 0 对应的余弦值是 1，光线垂直表面受光量最大，反射光自然最大，和 1 对应；入射光线平行物体表面，此时的入射角是 90 度，物体表面自然没什么光可以反射。</p>\n<p>漫反射数学模型 RGB 分量表示：<code class="language-text">(R2, G2, B2) = (R1, G1, B1) x (R0, G0, B0) x cosθ</code></p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="22631055770737852000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`R2 = R1 * R0 * cosθ\nG2 = G1 * G0 * cosθ\nB2 = B1 * B0 * cosθ`, `22631055770737852000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title=""\n              >\n                \n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">R2 = R1 * R0 * cosθ\nG2 = G1 * G0 * cosθ\nB2 = B1 * B0 * cosθ</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>WebGL 着色器语言表示</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="50475675290627600000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 角度值转化为弧度值\nfloat radian = radians(60.0);\n// reflectedLight 的结果是 (0.5, 0, 0)\nvec3 reflectedLight = vec3(1.0, 0.0, 0.0) * vec3(1.0, 1.0, 1.0) * cos(radian)`, `50475675290627600000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="glsl"\n              >\n                <span class="gatsby-code-button-language">glsl</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="glsl"><pre style="counter-reset: linenumber NaN" class="language-glsl line-numbers"><code class="language-glsl"><span class="token comment">// 角度值转化为弧度值</span>\n<span class="token keyword">float</span> radian <span class="token operator">=</span> <span class="token function">radians</span><span class="token punctuation">(</span><span class="token number">60.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">// reflectedLight 的结果是 (0.5, 0, 0)</span>\n<span class="token keyword">vec3</span> reflectedLight <span class="token operator">=</span> <span class="token keyword">vec3</span><span class="token punctuation">(</span><span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token keyword">vec3</span><span class="token punctuation">(</span><span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token function">cos</span><span class="token punctuation">(</span>radian<span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="镜面反射"><a href="#%E9%95%9C%E9%9D%A2%E5%8F%8D%E5%B0%84" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>镜面反射</h4>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-08-16-11-30-26-1f80772aafc2c1aa2fef187e5a9b4ad6-7027d.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 300px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 71.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAACOklEQVQ4y31SS2sTURg99zGZV17VWOOkRYoVglJciAUXgqAoxYVFFBdVEFzUhQgqbn2AIo1NFBQRf4AbUXei+FrYjRatzQN8FGzS6sYWQVwZzHXmziuJST/45nz3ztwz5zvfBWQ0DEbrxKmuHR7Hl4kkFm+oEO5LB7mdilfLoLPExVKAup1cLtKJBZ7pqZpOfXH0LH7cBKqTeldCWqQuSTEgY6xEDPiKvGMEbbE0pnQkZL6qckBssBKlwcFv15W++Unj0Nvzg7sWCup2O/fXClocoULW8AgbfsthqxE71eY9zOUS+vIt9D07N5y5d2Kk/+dtWOUraxWf8BdMXqcu4aUjMfCXa+S+rYrYJNIqPusJrOb1tkZFQCSOhQr9lpvDGQTzBhGoc6KW1zB9YYAI+9TwwBTrjX2Xfx3CFGAJdlk9pQkQBSJLUg9SnD8apLQMZg9HbxlOkTS5hGaHhKKaX3vMRGUbT1b2pfFpb3ZiaBNepA8oTzO7lSfWHvZOjZPF0M8WhSGpAI8suR/RPxngo7auf3nzzlTZEqfB+PPU+uT9RBYfkgafjmjSxxnF87MjYYgEf+OO0g0b69aO3jPpV0CE56KrU491C78hfWNvDE8hRZfwST/LZ4TMO17GR+w8aOqr7DpKxxBXhMokUQXt3nVumyAvV1FcZSAzMbEFRIARCM7UAolJdQ8p/pvuyirfu0CEchR3TPsycdQ0I7gygq3UamsQ5CTexVaJo3gdO34yk3BmJsnmuqv7BwI7pk0ulneLAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 08 16 11 30 26" title="" data-src="/static/2022-08-16-11-30-26-1f80772aafc2c1aa2fef187e5a9b4ad6-7027d.png" data-srcset="/static/2022-08-16-11-30-26-1f80772aafc2c1aa2fef187e5a9b4ad6-55fa9.png 200w,\n/static/2022-08-16-11-30-26-1f80772aafc2c1aa2fef187e5a9b4ad6-7027d.png 300w" data-sizes="(max-width: 300px) 100vw, 300px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>上面的漫反射数学模型没有考虑镜面反射，描述的就是理想的漫反射体，并不能完整的描述物体表面的光场。漫反射是因为几何体表面粗糙度尺寸相对光波长尺寸而言是凹凸不平的，这种凹凸不平又是随机的，所以说漫反射的光线各个方向是均匀的。镜面反射也就是说光照在物体上的反射光线具有方向性，具体点说就是光线的反射角等于入射角。生活中的镜子它的表面粗糙度很小，和光的波长是一个数量级，当光线照在上面的时候，反射光线就会表现出方向性。</p>\n<p>实际的生活中所有的物体没有绝对的漫反射或者镜面反射，往往都是同时存在，只是表现的倾向性不同，镜子的镜面反射更明显，粗糙的树皮漫反射更明显。光照射到物体上一部分会被吸收，透明的话一部分会被折射，除去吸收和折射的光剩余的会被反射，反射的时候根据表面的粗糙度不同，镜面反射和漫反射分配的比例不同可以使用两个系数 k1、k2 去描述。</p>\n<p>在室外停放着一辆车，你观察车的时候，你会发现车的外表面会在某个局部出现高光，这很好理解，车的外壳是曲面的，曲面上如果某个区域的的光线反射角刚好是你的视线方向，自然会呈现出局部高亮的现象，其他的部位是漫反射为主。镜面反射的公式仍然可以写成上面的形式，只是角度不再是光线入射角度而是眼睛视线与反射光线的夹角，n 角度余弦值的指数，实际编程的时候你可以自由定义，没有绝对完美的模型，都可以进行修正。</p>\n<p>镜面反射光的颜色 = 几何体表面基色 x 光线颜色 x 视线与反射光线的夹角余弦值<sup>n</sup></p>\n<h4 id="环境光照"><a href="#%E7%8E%AF%E5%A2%83%E5%85%89%E7%85%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>环境光照</h4>\n<p>在暗的环境下，物体比较暗，光亮的环境下，物体比较光亮，描述这个现象可以使用环境光照模型。光线在自然环境中会在不同的物体之间来回反射，单束的光线具有方向性，所有方向的光线随机分布，形成一个没有特殊的光线方向的的环境光照。多数情况下室内室外环境光颜色通常都是 RGB 相同的白色到黑色之间的值，(1, 1, 1) 表示最强的环境光照颜色，(0, 0, 0) 相当于处于完全的没有光照的黑色环境中。</p>\n<p>环境反射光颜色 = 几何体表面基色 x 环境光颜色</p>\n<h4 id="复合光照"><a href="#%E5%A4%8D%E5%90%88%E5%85%89%E7%85%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>复合光照</h4>\n<p>使用光照渲染模型的时候往往会使用多种光照模型，然后把每个光照模型颜色相乘的结果 RGB 分别相加，这时候要注意，多种模型的光照颜色相加后 RGB 的值要保证在区间 [0, 1]，因为 WebGL 的 RGB 颜色模型默认 RGB 分量的最大值是 1，注意分配比例即可。</p>\n<p>总反射光线 = 漫反射光线 + 镜面反射光线 + 环境反射光线</p>\n<h4 id="法向量"><a href="#%E6%B3%95%E5%90%91%E9%87%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>法向量</h4>\n<p>有基本的数学知识应该都有法线的概念，垂直与面的直线就是面的法线，对于平面而言面上所有位置的法线方向是相同的，对于曲面而言不同的位置法线的方向是变化的。在三维笛卡尔坐标系中，可以使用向量 (x, y, z) 来表示法向量，根据几何体表面的法向量和光线的方向，就可以求解出光线入射角的余弦值，法向量的点积计算满足下面的公式，为了方便计算，着色器语言内置了一个方法 dot() 用来求解两个向量之间的余弦值，已知向量 a1(x1, y1, z1)、a2(x2, y2, z2) 执行 dot(a1, a2) 可以求出两个向量 a1、a2 的余弦值。</p>\n<span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover accent="true"><mi>a</mi><mo>⃗</mo></mover><mo>⋅</mo><mover accent="true"><mi>b</mi><mo>⃗</mo></mover><mo>=</mo><mi mathvariant="normal">∣</mi><mover accent="true"><mi>a</mi><mo>⃗</mo></mover><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi><mover accent="true"><mi>b</mi><mo>⃗</mo></mover><mi mathvariant="normal">∣</mi><mi>c</mi><mi>o</mi><mi>s</mi><mi>θ</mi></mrow><annotation encoding="application/x-tex">\\vec a \\cdot \\vec b = \\vert \\vec a \\vert \\vert \\vec b \\vert cosθ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.9774399999999999em;"></span><span class="strut bottom" style="height:1.2274399999999999em;vertical-align:-0.25em;"></span><span class="base"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathit">a</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2355em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg width=\'0.471em\' height=\'0.714em\' style=\'width:0.471em\' viewBox=\'0 0 471 714\' preserveAspectRatio=\'xMinYMin\'><path d=\'M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z\'/></svg></span></span></span></span></span></span></span><span class="mord rule" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mord rule" style="margin-right:0.2222222222222222em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9774399999999999em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathit">b</span></span><span style="top:-3.26344em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2355em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg width=\'0.471em\' height=\'0.714em\' style=\'width:0.471em\' viewBox=\'0 0 471 714\' preserveAspectRatio=\'xMinYMin\'><path d=\'M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z\'/></svg></span></span></span></span></span></span></span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="mord">∣</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathit">a</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2355em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg width=\'0.471em\' height=\'0.714em\' style=\'width:0.471em\' viewBox=\'0 0 471 714\' preserveAspectRatio=\'xMinYMin\'><path d=\'M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z\'/></svg></span></span></span></span></span></span></span><span class="mord">∣</span><span class="mord">∣</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9774399999999999em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathit">b</span></span><span style="top:-3.26344em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2355em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg width=\'0.471em\' height=\'0.714em\' style=\'width:0.471em\' viewBox=\'0 0 471 714\' preserveAspectRatio=\'xMinYMin\'><path d=\'M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z\'/></svg></span></span></span></span></span></span></span><span class="mord">∣</span><span class="mord mathit">c</span><span class="mord mathit">o</span><span class="mord mathit">s</span><span class="mord mathit" style="margin-right:0.02778em;">θ</span></span></span></span></span>\n<span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover accent="true"><mi>a</mi><mo>⃗</mo></mover><mo>⋅</mo><mover accent="true"><mi>b</mi><mo>⃗</mo></mover><mo>=</mo><msub><mi>x</mi><mn>1</mn></msub><msub><mi>x</mi><mn>2</mn></msub><mo>+</mo><msub><mi>y</mi><mn>1</mn></msub><msub><mi>y</mi><mn>2</mn></msub><mo>+</mo><msub><mi>z</mi><mn>1</mn></msub><msub><mi>z</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">\\vec a \\cdot \\vec b = x_1x_2 + y_1y_2 + z_1z_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.9774399999999999em;"></span><span class="strut bottom" style="height:1.1718799999999998em;vertical-align:-0.19444em;"></span><span class="base"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathit">a</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2355em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg width=\'0.471em\' height=\'0.714em\' style=\'width:0.471em\' viewBox=\'0 0 471 714\' preserveAspectRatio=\'xMinYMin\'><path d=\'M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z\'/></svg></span></span></span></span></span></span></span><span class="mord rule" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mord rule" style="margin-right:0.2222222222222222em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9774399999999999em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathit">b</span></span><span style="top:-3.26344em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2355em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg width=\'0.471em\' height=\'0.714em\' style=\'width:0.471em\' viewBox=\'0 0 471 714\' preserveAspectRatio=\'xMinYMin\'><path d=\'M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z\'/></svg></span></span></span></span></span></span></span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mord mathit">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span><span class="mord"><span class="mord mathit">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span><span class="mord rule" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mord rule" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span><span class="mord rule" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mord rule" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathit" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.04398em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span><span class="mord"><span class="mord mathit" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.04398em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span></span></span></span></span>\n<h3 id="立方体添加平行光"><a href="#%E7%AB%8B%E6%96%B9%E4%BD%93%E6%B7%BB%E5%8A%A0%E5%B9%B3%E8%A1%8C%E5%85%89" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>立方体添加平行光</h3>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/ffujml?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>该 WebGL 案例源码是通过给一个单色的立方体添加平行光进行渲染，通过这样一个简单的 WebGL 光照计算案例，来体会光照模型在物体渲染中的应用，在学习下面的代码之前确保你有逐顶点和颜色插值计算的概念，了解顶点位置数据、顶点颜色数据，本节课在这两种顶点数据的基础之上在引入一种新的顶点数据：定点法向量。</p>\n<p>平行光照射在立方体上，与不同的平面夹角不同，自然反射的颜色 RGB 值强弱不同，实际绘图的时候你不可能手动计算去定义每一个像素的值，前面课程中讲解颜色插值计算的知识，应该对你有一定的启发，你只需要计算出每一个顶点在光照下的颜色，然后利用插值计算就可以得到三个顶点之间区域的像素值，这时候顶点法向量数据就派上了用场，每一个顶点都有位置数据、颜色数据、法向量数据，法向量和颜色数据先进行计算得出新的顶点颜色数据，然后渲染管线对顶点进行装配光栅化的过程中，新的顶点颜色数据进行插值计算。这时候提示一下大家，不要去从宏观思考法向量问题，要从逐顶点、插值计算的角度理解问题，下面的问题可能大家会有一个疑问，为什么立方体的一个顶点会有三个方向，从实际的物体来看，立方体的一个顶点就是一个顶点，但是从绘图的角度来看，每一次是通过三个顶点绘制一个三角形面，只不过恰好三个三角形面共顶点，会有顶点位置重复而已，但是每一组的三个顶点是一个装配光栅化和插值计算的独立单元，两组的三个顶点位置有重复也不会影响他们各自的渲染得到的像素结果。</p>\n<h4 id="顶点着色器：声明变量"><a href="#%E9%A1%B6%E7%82%B9%E7%9D%80%E8%89%B2%E5%99%A8%EF%BC%9A%E5%A3%B0%E6%98%8E%E5%8F%98%E9%87%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>顶点着色器：声明变量</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="96221009962546150000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`attribute vec4 apos; // attribute 声明 vec4 类型变量 apos\nattribute vec4 a_color; // attribute 声明顶点颜色变量\nattribute vec4 a_normal; // 顶点法向量变量\nuniform vec3 u_lightColor; // uniform 声明平行光颜色变量\nuniform vec3 u_lightPosition; // uniform 声明平行光颜色变量\nvarying vec4 v_color; // varying 声明顶点颜色插值后变量`, `96221009962546150000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="glsl"\n              >\n                <span class="gatsby-code-button-language">glsl</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="glsl"><pre style="counter-reset: linenumber NaN" class="language-glsl line-numbers"><code class="language-glsl"><span class="token keyword">attribute</span> <span class="token keyword">vec4</span> apos<span class="token punctuation">;</span> <span class="token comment">// attribute 声明 vec4 类型变量 apos</span>\n<span class="token keyword">attribute</span> <span class="token keyword">vec4</span> a_color<span class="token punctuation">;</span> <span class="token comment">// attribute 声明顶点颜色变量</span>\n<span class="token keyword">attribute</span> <span class="token keyword">vec4</span> a_normal<span class="token punctuation">;</span> <span class="token comment">// 顶点法向量变量</span>\n<span class="token keyword">uniform</span> <span class="token keyword">vec3</span> u_lightColor<span class="token punctuation">;</span> <span class="token comment">// uniform 声明平行光颜色变量</span>\n<span class="token keyword">uniform</span> <span class="token keyword">vec3</span> u_lightPosition<span class="token punctuation">;</span> <span class="token comment">// uniform 声明平行光颜色变量</span>\n<span class="token keyword">varying</span> <span class="token keyword">vec4</span> v_color<span class="token punctuation">;</span> <span class="token comment">// varying 声明顶点颜色插值后变量</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>查看上面的代码大家可以发现一个新的关键字 uniform，uniform 关键字和 attribute 关键字的都是为了 js 可以向 WebGL 着色器传递数据而出现。区别在于如果一个变量表示顶点相关的数据并且需要从 js 代码中获取顶点数据，需要使用 attribute 关键字声明该变量，比如上面代码 attribute 关键字声明的顶点位置变量 apos、顶点颜色变量 <code class="language-text">a_color</code>、顶点法向量变量 <code class="language-text">a_normal</code>。如果一个变量是非顶点相关的数据并且需要 js 传递该变量相关的数据，需要使用 uniform 关键字声明该变量，比如上面代码通过 uniform 关键字声明的光源位置变量 <code class="language-text">u_lightPosition</code>、光源颜色变量 <code class="language-text">u_lightColor</code>。更多关于 uniform 关键字和 attribute 关键字的内容可以查看第二章着色器介绍三种变量类型 attribute、uniform、varying</p>\n<p>在上面代码中涉及 WebGL 着色器三维向量 vec3 和四维向量 vec4 两种数据类型，比如光线的方向需要 xyz 三个分量描述，可以使用关键字 vec3 声明，比如顶点位置的齐次坐标 (x, y, z, w)，包含透明度的 RGB 颜色模型 RGBA(r, g, b, a) 都需要四个分量描述，可以使用关键字 vec4 声明。</p>\n<p><code class="language-text">attribute vec4 a_normal;</code> 中变量 <code class="language-text">a_normal</code> 定义的是 vec4 类型，第四个参数默认是 1.0 主要是为了凑成齐次坐标用于矩阵计算，表示法向量方向的是前三个参数，所以执行 <code class="language-text">a_normal.xyz</code> 就相当于访问法向量的 xyz 值，返回的结果是一个 vec3 数据，如果执行 vec3.xy 相当于返回一个 vec2 数据，如果一个顶点的 <code class="language-text">a_normal</code> 数据是 (1.0, 1.0, 1.0, 1.0)，那么它的模长就不是 1，而是 3 的平方根，这时候需要把前三个 1 全部除以 3 的平方根才可以把非单位向量转化为单位向量。</p>\n<h4 id="顶点着色器：光照计算"><a href="#%E9%A1%B6%E7%82%B9%E7%9D%80%E8%89%B2%E5%99%A8%EF%BC%9A%E5%85%89%E7%85%A7%E8%AE%A1%E7%AE%97" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>顶点着色器：光照计算</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="66033652071791620000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 顶点法向量进行矩阵变换，然后归一化\nvec3 normal = normalize((mx * my * a_normal).xyz);\n// 计算点光源照射顶点的方向并归一化\nvec3 lightDirection = normalize(vec3(gl_Position) - u_lightPosition);\n// 计算平行光方向向量和顶点法向量的点积\nfloat dot = max(dot(lightDirection, normal), 0.0);\n// 计算反射后的颜色\nvec3 reflectedLight = u_lightColor * a_color.rgb * dot;\n// 颜色插值计算\nv_color = vec4(reflectedLight, a_color.a);`, `66033652071791620000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="glsl"\n              >\n                <span class="gatsby-code-button-language">glsl</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="glsl"><pre style="counter-reset: linenumber NaN" class="language-glsl line-numbers"><code class="language-glsl"><span class="token comment">// 顶点法向量进行矩阵变换，然后归一化</span>\n<span class="token keyword">vec3</span> normal <span class="token operator">=</span> <span class="token function">normalize</span><span class="token punctuation">(</span><span class="token punctuation">(</span>mx <span class="token operator">*</span> my <span class="token operator">*</span> a_normal<span class="token punctuation">)</span><span class="token punctuation">.</span>xyz<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">// 计算点光源照射顶点的方向并归一化</span>\n<span class="token keyword">vec3</span> lightDirection <span class="token operator">=</span> <span class="token function">normalize</span><span class="token punctuation">(</span><span class="token keyword">vec3</span><span class="token punctuation">(</span>gl_Position<span class="token punctuation">)</span> <span class="token operator">-</span> u_lightPosition<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">// 计算平行光方向向量和顶点法向量的点积</span>\n<span class="token keyword">float</span> dot <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token function">dot</span><span class="token punctuation">(</span>lightDirection<span class="token punctuation">,</span> normal<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">// 计算反射后的颜色</span>\n<span class="token keyword">vec3</span> reflectedLight <span class="token operator">=</span> u_lightColor <span class="token operator">*</span> a_color<span class="token punctuation">.</span>rgb <span class="token operator">*</span> dot<span class="token punctuation">;</span>\n<span class="token comment">// 颜色插值计算</span>\nv_color <span class="token operator">=</span> <span class="token keyword">vec4</span><span class="token punctuation">(</span>reflectedLight<span class="token punctuation">,</span> a_color<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>dot() 是 WebGL 着色器语言的一个内置函数，可以直接使用，它的参数是两个向量，执行结果是两个向量的点积，如果光线方向向量和顶点法向量两个向量都是单位向量，求解的结果就是平行光线与物体表面法线夹角的余弦值。内置函数 normalize() 和 dot() 一样是 WebGL 着色器语言提供的用于数学计算的函数，normalize() 的作用就是把向量归一化，具体点说就是如果向量的模长不是 1，不改变向量方向，把模长变为 1，也就是把向量转化为单位向量。</p>\n<p><code class="language-text">max(dot(lightDirection, normal), 0.0)</code> 在 dot 代码的外面嵌套了一个函数 max()，dot() 的计算结果作为 max() 的第一个参数，dot 的计算结果可能是 [-1, 1] 之间，颜色不存在负值要舍去 [-1, 0)，这时候就是内置函数 max() 派上用场的时候，<code class="language-text">max(dot(lightDirection, normal), 0.0)</code> 中 max() 函数的第二个参数是 0，dot() 方法的计算结果会和 0 进行比较运算，返回一个较大的值，着色器语言内置提供了 max() 函数，自然也有对应的求较小值的函数 min()。余弦值是负值的物理意义就是光线无法照的地方，临界点是余弦值 0，入射角是 90 度，也就是说入射光线平行平面，平行平面相当于光线没有照射到平面上，平面没有收到光自然无法反射光，你可以尝试改变立方体顶点的旋转矩阵可以看到一些面的颜色是黑色，就是因为没有光线照射，这是符合实际生活和物理规律的，不管本身是什么颜色，没有外界光源，那就表现为黑色。</p>\n<p><code class="language-text">u_lightColor * a_color.rgb * dot;</code> 是套用理想漫反射光照模型的一个公式进行计算，顶点颜色变量 <code class="language-text">a_color</code> 是 vec4 类型包含透明度，计算式中光源颜色变量 <code class="language-text">u_lightColor</code> 没有透明度分量 A，所以使用 <code class="language-text">a_color.rgb</code> 语句返回 <code class="language-text">a_color</code> 变量的 RGB 三个分量，也就是返回一个 vec3 类型数据。</p>\n<p><code class="language-text">v_color = vec4(reflectedLight, a_color.a);</code> 通过把反射颜色 reflectedLight 赋值给 varying 声明的一个变量实现颜色的插值计算，关于插值计算之前讲过，不再多谈，这里说一下着色器语言数据类型的相关转化、构造、访问相关问题，vec4、vec3 和 float、int 一样是数据类型的标识关键字，float、int 在 C 语言中都是常见的类型，着色器语言为了实现大规模的顶点运算增加了 vec4、vec3、mat4 等数据类型，vec4()、vec3() 这时候相当于一个 vec4、vec3 数据的构造函数，<code class="language-text">vec4(reflectedLight, a_color.a)</code> 中把一个 vec3 类型数据和一个 vec4 类型数据的一个分量 a 作为构造函数 vec4 的两个参数，来实现创建一个 vec4 类型数据。访问多元素数据的分量可使用点符号 <code class="language-text">.</code> ，从面对象的角度来看， 一个 vec4 数据是一个对象，数据的一个元素就是数据的一个分量，比如 <code class="language-text">a_color.a</code> 表示 vec4 类型变量 <code class="language-text">a_color</code> 的透明度分量 a。关于 vec4、vec3 等向量数据类型的介绍可以查看第二章 WebGL 着色器。</p>\n<h5 id="获取着色器变量"><a href="#%E8%8E%B7%E5%8F%96%E7%9D%80%E8%89%B2%E5%99%A8%E5%8F%98%E9%87%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>获取着色器变量</h5>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="43070426254380090000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/**\n * 从 program 对象获取相关的变量\n * attribute 变量声明的方法使用 getAttribLocation() 方法\n * uniform 变量声明的方法使用 getUniformLocation() 方法\n **/\nvar aposLocation = gl.getAttribLocation(program, \'apos\');\nvar a_color = gl.getAttribLocation(program, \'a_color\');\nvar a_normal = gl.getAttribLocation(program, \'a_normal\');\nvar u_lightColor = gl.getUniformLocation(program, \'u_lightColor\');\nvar u_lightPosition = gl.getUniformLocation(program, \'u_lightPosition\');`, `43070426254380090000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">/**\n * 从 program 对象获取相关的变量\n * attribute 变量声明的方法使用 getAttribLocation() 方法\n * uniform 变量声明的方法使用 getUniformLocation() 方法\n **/</span>\n<span class="token keyword">var</span> aposLocation <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token function">getAttribLocation</span><span class="token punctuation">(</span>program<span class="token punctuation">,</span> <span class="token string">\'apos\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">var</span> a_color <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token function">getAttribLocation</span><span class="token punctuation">(</span>program<span class="token punctuation">,</span> <span class="token string">\'a_color\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">var</span> a_normal <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token function">getAttribLocation</span><span class="token punctuation">(</span>program<span class="token punctuation">,</span> <span class="token string">\'a_normal\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">var</span> u_lightColor <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token function">getUniformLocation</span><span class="token punctuation">(</span>program<span class="token punctuation">,</span> <span class="token string">\'u_lightColor\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">var</span> u_lightPosition <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token function">getUniformLocation</span><span class="token punctuation">(</span>program<span class="token punctuation">,</span> <span class="token string">\'u_lightPosition\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>要想给着色器程序中声明的变量传递数据，首先要获取数据的地址，然后通过指针地址传递给变量。要想获取变量地址，不可能像普通 CPU 变成一样，要考虑 GPU 的特殊性，首先要通过调用初始化着色器函数 initShader()，把着色器程序处理后通过 CPU 与 GPU 的通信传递给 GPU 配置渲染管线，执行初始化着色器函数 initShader() 的同时会返回一个 program 对象，通过对象 program 可以获取着色器程序中的变量索引地址，通过 WebGL API gl.getAttribLocation() 用来获取 attribute 关键字声明的顶点变量地址，通过 WebGL API gl.getUniformLocation() 获取 uniform 关键字声明的非顶点变量地址。</p>\n<h5 id="传递数据"><a href="#%E4%BC%A0%E9%80%92%E6%95%B0%E6%8D%AE" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>传递数据</h5>\n<p>对于简单的数据，不像顶点有大批量数据，不需要在显存上开辟缓冲区上传数据，可以直接使用 WebGL API gl.uniform3f() 把数据传递给 GPU，uniform3f(变量地址, x, y, z) 表示传递三个浮点数 x, y, z，接收这个数据的变量是 vec3 类型，uniform2f(变量地址, x, y) 表示传递 2 个浮点数，接收数据的变量是 vec2 数据类型，以此类推还有方法 uniform4f()、uniform1f()，命名的特点是数字表示传递的数据有多少分量，f 是关键字 float 的缩写表示浮点数。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="88971327110695800000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/**\n * 给平行光传入颜色和方向数据 RGB(1, 1, 1)，单位向量 (x, y, z)\n **/\ngl.uniform3f(u_lightColor, 1.0, 1.0, 1.0);\n// 保证向量 (x, y, -z) 的长度为 1，即单位向量\n// 如果不是单位向量，也可以再来着色器代码中进行归一化\nvar x = 1 / Math.sqrt(14),\n   y = 2 / Math.sqrt(14),\n   z = 3 / Math.sqrt(14);\ngl.uniform3f(u_lightDirection, x, y, -z);`, `88971327110695800000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">/**\n * 给平行光传入颜色和方向数据 RGB(1, 1, 1)，单位向量 (x, y, z)\n **/</span>\ngl<span class="token punctuation">.</span><span class="token function">uniform3f</span><span class="token punctuation">(</span>u_lightColor<span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">// 保证向量 (x, y, -z) 的长度为 1，即单位向量</span>\n<span class="token comment">// 如果不是单位向量，也可以再来着色器代码中进行归一化</span>\n<span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">/</span> Math<span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span><span class="token number">14</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n   y <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">/</span> Math<span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span><span class="token number">14</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n   z <span class="token operator">=</span> <span class="token number">3</span> <span class="token operator">/</span> Math<span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span><span class="token number">14</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\ngl<span class="token punctuation">.</span><span class="token function">uniform3f</span><span class="token punctuation">(</span>u_lightDirection<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> <span class="token operator">-</span>z<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>传递 uniform 变量的 WebGL API 对应的着色器 uniform 变量数据类型</p>\n<table>\n<thead>\n<tr>\n<th align="left">WebGL API</th>\n<th align="left">数据类型</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align="left">uniform1f()</td>\n<td align="left">float</td>\n</tr>\n<tr>\n<td align="left">uniform2f()</td>\n<td align="left">vec2</td>\n</tr>\n<tr>\n<td align="left">uniform3f()</td>\n<td align="left">vec3</td>\n</tr>\n<tr>\n<td align="left">uniform4f()</td>\n<td align="left">vec4</td>\n</tr>\n</tbody>\n</table>\n<h5 id="顶点法向量"><a href="#%E9%A1%B6%E7%82%B9%E6%B3%95%E5%90%91%E9%87%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>顶点法向量</h5>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-08-23-14-21-42-00cf9bc9d3de3276f6a3b9e81d9c0051-997dd.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 195px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 87.17948717948718%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsSAAALEgHS3X78AAADOElEQVQ4y4VUzYsURxT/vVfV0z09PdMzO9+ubnZ2R81kHeJEXd31E8UEwrLsQRQ/LosXIYRcQhLJKRCSoCKJEEFBLwqCJ0H8AwTxtKfkqgm4eDDsZRGScaNTvurucXf04KOL96pe1a9+r957DawRlYyqNtG8FppcBWbOWWpk+THm+G+1ixe5rf7iw/0zZac3VtL/jlu7pLv0DpgVB+sih6NGij7OtNSEM8y/4hB/Tdv5LE3y9zStg7AiWypFvfh5Wfcm3wB2tY5A/tOaTGLHF3COCZ9Yky+ioH6nanKxjnV+SMHdKWbKztN0cZXd8hogKwzIZlSVoqqPeVaGXfWIC31/PoQv/jzxLU9heX8JXd+uX8aZVYbPtW4az7MTX66sJsBlOUgYFI3w222q8kLYmwNQJjPg7QoNqyXc9pdEo2JOeDHDgowJAa2JLoZwy5bcBdpw5Cf93QkBOuni3u4/5ekMqPACVJdUDg2AC7MRUQFHLFsSlh4XO2TkM02GCxzd9COfnjGK2kIhMyVJ+QPYL0AHXwGzoqewQpT+H+jIpPwL8LHodQa5dHJB0cHMmwcmnGsBuZTsIRnFq0D7BuqbV1Bov4zJAD1ZlLFVNsx2geP/wM/Z9brutX36ohVDGUeGK8hhKslyIl6gFqbH9MqWOERBkS8vDEPRo9eALQ9Q86yvos2xLP98SMwC4eYE00xJwt+ooOqCmFcIAnn8RsiXGso1UQmf57N4W+Thh9karpotau40gYdStHfaQjHFcJq2nATQi5NFrf7BqT5YL6qfKMsoAuvjcgmyOiNRb1raLZ5PJZSReJ1KDT9HEp/mZK+VDH0V6ZLqxgvXmfu+Yg6ZrEwrGDce2JwSwI9cI91iUtkUOIQXlUb9GBHFHUP9ZrCtF9UhkjocnSealgR+WLOdhN+ywINOIAs8iaH0JfWBbBue17RX9tqWxG1mwpp/QL+w49C13nNXc9PWYbBD1/gK9qpvUOcfnI66wgf8edii95c81Xil9b6EBCkMpt3+FPr9nDXbUirJfpofq8/4SdCQ31WHH9GcesaWIU7cVYT3yVO1SnoqpHcO8H3yeIEq8dvYqnSwsPruA/IaJ6mgu8ZAyJ8AAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 08 23 14 21 42" title="" data-src="/static/2022-08-23-14-21-42-00cf9bc9d3de3276f6a3b9e81d9c0051-997dd.png" data-srcset="/static/2022-08-23-14-21-42-00cf9bc9d3de3276f6a3b9e81d9c0051-997dd.png 195w" data-sizes="(max-width: 195px) 100vw, 195px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="25485051535905014000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/**\n * 顶点法向量数组 normalData\n **/\nvar normalData = new Float32Array([\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1, // z 轴正方向——面 1\n\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0, // x 轴正方向——面 2\n\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0, // y 轴正方向——面 3\n\n   -1,\n   0,\n   0,\n   -1,\n   0,\n   0,\n   -1,\n   0,\n   0,\n   -1,\n   0,\n   0,\n   -1,\n   0,\n   0,\n   -1,\n   0,\n   0, // x 轴负方向——面 4\n\n   0,\n   -1,\n   0,\n   0,\n   -1,\n   0,\n   0,\n   -1,\n   0,\n   0,\n   -1,\n   0,\n   0,\n   -1,\n   0,\n   0,\n   -1,\n   0, // y 轴负方向——面 5\n\n   0,\n   0,\n   -1,\n   0,\n   0,\n   -1,\n   0,\n   0,\n   -1,\n   0,\n   0,\n   -1,\n   0,\n   0,\n   -1,\n   0,\n   0,\n   -1 // z 轴负方向——面 6\n]);`, `25485051535905014000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">/**\n * 顶点法向量数组 normalData\n **/</span>\n<span class="token keyword">var</span> normalData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Float32Array</span><span class="token punctuation">(</span><span class="token punctuation">[</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// z 轴正方向——面 1</span>\n\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// x 轴正方向——面 2</span>\n\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// y 轴正方向——面 3</span>\n\n   <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// x 轴负方向——面 4</span>\n\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// y 轴负方向——面 5</span>\n\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">1</span> <span class="token comment">// z 轴负方向——面 6</span>\n<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>对于立方体而言六个平面也就是有六个不同的平面法向量，但是这里要注意思考如何表达一个面的法向量，你不能说直接告诉 GPU 一个平面的法向量是 (x, y, z)，对于立方体而言而言这样比较简单，符合人的思维，但是如果是复杂的曲面这样并不合适，而且顶点着色器是逐顶点处理，为了表示面的法向量，往往是通过顶点，具体点说是每个顶点对应一个法向量，三个顶点确定一个三角面，三角面的不同位置的法向量相当于通过他的三个顶点的法向量插值得出，或者换个说法就是三个顶点的法向量分别与各自颜色数据进行乘法运算，得到新的顶点颜色，然后渲染管线利用新的顶点颜色进行插值计算，这就是通过顶点法向量表示面法向量的方法，通过这样的巧妙设计还可以实现法向量的插值计算，只不过插值是通过颜色插值完成的，对于平滑的曲面，过每一个顶点存在一个法平面，也就是有一个法向量，往往在不同三角面中同一位置的顶点法向量是相同的，对于规则的长方体而言，每个顶点法向量往往在各自平面中有不同的值。</p>\n<h4 id="顶点法向量矩阵变换"><a href="#%E9%A1%B6%E7%82%B9%E6%B3%95%E5%90%91%E9%87%8F%E7%9F%A9%E9%98%B5%E5%8F%98%E6%8D%A2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>顶点法向量矩阵变换</h4>\n<p>执行代码 <code class="language-text">gl_Position = mx * my * apos;</code> 意味着通过旋转矩阵 mx 和 my 对立方体顶点数据 apos 进行旋转变换，也就是说立方体在三维空间中进行了旋转，如果立方体进行了旋转，也就是说立方体表面的法线方向变化了，立方体表面的法线是通过顶点法向量表示的，所以说顶点法向量数据要和顶点位置数据一样执行矩阵变换 <code class="language-text">mx * my * a_normal</code></p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="47940994922451360000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 两个旋转矩阵、顶点齐次坐标连乘\ngl_Position = mx * my * apos;\n// 顶点法向量进行矩阵变换，然后归一化\nvec3 normal = normalize((mx * my * a_normal).xyz);`, `47940994922451360000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="glsl"\n              >\n                <span class="gatsby-code-button-language">glsl</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="glsl"><pre style="counter-reset: linenumber NaN" class="language-glsl line-numbers"><code class="language-glsl"><span class="token comment">// 两个旋转矩阵、顶点齐次坐标连乘</span>\ngl_Position <span class="token operator">=</span> mx <span class="token operator">*</span> my <span class="token operator">*</span> apos<span class="token punctuation">;</span>\n<span class="token comment">// 顶点法向量进行矩阵变换，然后归一化</span>\n<span class="token keyword">vec3</span> normal <span class="token operator">=</span> <span class="token function">normalize</span><span class="token punctuation">(</span><span class="token punctuation">(</span>mx <span class="token operator">*</span> my <span class="token operator">*</span> a_normal<span class="token punctuation">)</span><span class="token punctuation">.</span>xyz<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="视线"><a href="#%E8%A7%86%E7%BA%BF" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>视线</h4>\n<p>通过下面的代码测试，来体会 WebGL 投影的规律。</p>\n<p>WebGL 图形系统默认的投影方向，或者说人的眼睛观察几何体的方向，或者说照相机拍照的方向。代码中的灯光方向的向量数据，第三个参数是负数，也就是说从 z 轴的角度看，平行光照射物体的方向，就是人眼睛看物体的方向，如果把灯光方向的向量数据 z 参数更改为正数，刷新浏览器看到的是一个漆黑的立方体投影，这时候相当于黑暗的环境中，人站在物体的背光面，而不是向光面，对于 WebGL 图形系统，你可以形象的理解为把光源从屏幕前面放到了屏幕的后面，人的观察方向是沿着 z 轴负方向，从屏幕外向里观察，光线自然被立方体遮挡住了。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="61886675375294734000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`var x = 1 / Math.sqrt(15),\n   y = 2 / Math.sqrt(15),\n   z = 3 / Math.sqrt(15);\ngl.uniform3f(u_lightDirection, x, y, -z);`, `61886675375294734000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">/</span> Math<span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n   y <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">/</span> Math<span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n   z <span class="token operator">=</span> <span class="token number">3</span> <span class="token operator">/</span> Math<span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\ngl<span class="token punctuation">.</span><span class="token function">uniform3f</span><span class="token punctuation">(</span>u_lightDirection<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> <span class="token operator">-</span>z<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>更改 -z 为 z，立方体显示为黑色效果。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="61506467987972964000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`gl.uniform3f(u_lightDirection, x, y, z);`, `61506467987972964000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js">gl<span class="token punctuation">.</span><span class="token function">uniform3f</span><span class="token punctuation">(</span>u_lightDirection<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<h3 id="立方体添加点光源"><a href="#%E7%AB%8B%E6%96%B9%E4%BD%93%E6%B7%BB%E5%8A%A0%E7%82%B9%E5%85%89%E6%BA%90" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>立方体添加点光源</h3>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/yvjixk?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>添加平行光是直接定义光线照射物体的方向，点光源的光线是发散的，无法直接定义它的光线方向，不过只要定义好点光源的位置坐标，然后与某个顶点的位置坐标进行减法运算，计算结果就是光源射到该顶点的方向。这很好理解，在三维空间中两个点确定一条直线，几何体顶点代表一个点，点光源的位置代表一个点，直线所在的方向就是光线的方向，在三维笛卡尔坐标系中，把两个顶点的 xyz 三个分量相减就可以得到一个表示直线方向的向量，把该向量和顶点法向量作为 dot() 点积函数的参数，可以计算出光线入射角余弦值然后代入漫反射光照模型公式可以得到新的顶点颜色，渲染管线利用新的顶点颜色进行插值计算可以得到立方体表面每一个像素的值。</p>\n<h4 id="添加点光源位置、颜色数据"><a href="#%E6%B7%BB%E5%8A%A0%E7%82%B9%E5%85%89%E6%BA%90%E4%BD%8D%E7%BD%AE%E3%80%81%E9%A2%9C%E8%89%B2%E6%95%B0%E6%8D%AE" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>添加点光源位置、颜色数据</h4>\n<p>WebGL 顶点着色器声明两个变量 <code class="language-text">u_lightPosition</code>、<code class="language-text">u_lightColor</code> 分别表示点光源的位置和颜色。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="74693581331998770000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// uniform 声明点光源颜色变量\nuniform vec3 u_lightColor;\n// uniform 声明点光源位置变量\nuniform vec3 u_lightPosition;`, `74693581331998770000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="glsl"\n              >\n                <span class="gatsby-code-button-language">glsl</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="glsl"><pre style="counter-reset: linenumber NaN" class="language-glsl line-numbers"><code class="language-glsl"><span class="token comment">// uniform 声明点光源颜色变量</span>\n<span class="token keyword">uniform</span> <span class="token keyword">vec3</span> u_lightColor<span class="token punctuation">;</span>\n<span class="token comment">// uniform 声明点光源位置变量</span>\n<span class="token keyword">uniform</span> <span class="token keyword">vec3</span> u_lightPosition<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>给点光源颜色变量 <code class="language-text">u_lightColor</code>、位置变量 <code class="language-text">u_lightPosition</code> 传递数据。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="99055601481107550000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 传入点光源颜色数据、位置数据\ngl.uniform3f(u_lightColor, 1.0, 1.0, 1.0);\ngl.uniform3f(u_lightPosition, 2.0, 3.0, 4.0);`, `99055601481107550000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="glsl"\n              >\n                <span class="gatsby-code-button-language">glsl</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="glsl"><pre style="counter-reset: linenumber NaN" class="language-glsl line-numbers"><code class="language-glsl"><span class="token comment">// 传入点光源颜色数据、位置数据</span>\ngl<span class="token punctuation">.</span><span class="token function">uniform3f</span><span class="token punctuation">(</span>u_lightColor<span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\ngl<span class="token punctuation">.</span><span class="token function">uniform3f</span><span class="token punctuation">(</span>u_lightPosition<span class="token punctuation">,</span> <span class="token number">2.0</span><span class="token punctuation">,</span> <span class="token number">3.0</span><span class="token punctuation">,</span> <span class="token number">4.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<h4 id="点光源与顶点方向计算"><a href="#%E7%82%B9%E5%85%89%E6%BA%90%E4%B8%8E%E9%A1%B6%E7%82%B9%E6%96%B9%E5%90%91%E8%AE%A1%E7%AE%97" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>点光源与顶点方向计算</h4>\n<p>点光源的光线是发散的，点光源与每一顶点连线的方向都需要单独计算。</p>\n<p><code class="language-text">vec3(gl_Position) - u_lightPosition</code> 用来计算光线方向，然后利用内置函数 normalize() 归一化向量数据，<code class="language-text">vec3(gl_Position)</code> 和 <code class="language-text">gl_Position.xyz</code> 的写法是等效的，都是为了提取 vec4 类型顶点数据前三个分量，返回的数据类型是 vec3，比如 vec2(vec4) 就是提取 vec4 的前两个分量。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="91430357745396680000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 计算点光源照射顶点的方向并归一化\nvec3 lightDirection = normalize(vec3(gl_Position) - u_lightPosition);\n// 计算平行光方向向量和顶点法向量的点积\nfloat dot = max(dot(lightDirection, normal), 0.0);`, `91430357745396680000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="glsl"\n              >\n                <span class="gatsby-code-button-language">glsl</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="glsl"><pre style="counter-reset: linenumber NaN" class="language-glsl line-numbers"><code class="language-glsl"><span class="token comment">// 计算点光源照射顶点的方向并归一化</span>\n<span class="token keyword">vec3</span> lightDirection <span class="token operator">=</span> <span class="token function">normalize</span><span class="token punctuation">(</span><span class="token keyword">vec3</span><span class="token punctuation">(</span>gl_Position<span class="token punctuation">)</span> <span class="token operator">-</span> u_lightPosition<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">// 计算平行光方向向量和顶点法向量的点积</span>\n<span class="token keyword">float</span> dot <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token function">dot</span><span class="token punctuation">(</span>lightDirection<span class="token punctuation">,</span> normal<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="立方体旋转动画"><a href="#%E7%AB%8B%E6%96%B9%E4%BD%93%E6%97%8B%E8%BD%AC%E5%8A%A8%E7%94%BB" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>立方体旋转动画</h2>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/5ebtu4?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>要通过 WebGL 渲染出立方体旋转的动画效果，你首要了解“帧”这个概念，比如你观看的视频其实就是一帧一帧的图片连续播放的效果，只要图片刷新的频率的不是太低，人的眼睛都不会察觉，一般 30~60FPS 就可以。WebGL 如何产生一帧一帧的图片，这个很简单，执行一次绘制函数 gl.drawArrays()，WebGL 图形系统就会通知 GPU 渲染管线处理顶点数据生成一帧 RGB 像素数据显示在屏幕 canvas 画布上。只要周期性保持一定的频率调用 gl.drawArrays() 就可以生成一帧一帧的图片，在这个过程中同时要利用 JS 程序更新顶点的旋转矩阵，如果顶点的位置不变化，渲染出来的都是一样的图片，自然也没有动画的效果。</p>\n<p>浏览器提供了一个方法 requestAnimationFrame() 可以实现周期性调用某个函数，主要用于动画。</p>\n<p>在光照立方体的基础上进行更改，一方面是周期性执行绘制方法 gl.drawArrays()，另一方面以一定的旋转速度更新立方体的旋转矩阵，原来使用着色器语言定义的旋转矩阵更改为使用 JS 语句创建好再传递给顶点着色器，gl.drawArrays() 每次执行的时候，都会重新传入着色器顶点旋转矩阵数据并渲染出来。</p>\n<h3 id="声明矩阵变量"><a href="#%E5%A3%B0%E6%98%8E%E7%9F%A9%E9%98%B5%E5%8F%98%E9%87%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>声明矩阵变量</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="16211971901354215000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/** uniform 声明旋转矩阵变量 mx、my **/\nuniform mat4 mx; // 绕 x 轴旋转矩阵\nuniform mat4 my; // 绕 y 轴旋转矩阵`, `16211971901354215000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="glsl"\n              >\n                <span class="gatsby-code-button-language">glsl</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="glsl"><pre style="counter-reset: linenumber NaN" class="language-glsl line-numbers"><code class="language-glsl"><span class="token comment">/** uniform 声明旋转矩阵变量 mx、my **/</span>\n<span class="token keyword">uniform</span> <span class="token keyword">mat4</span> mx<span class="token punctuation">;</span> <span class="token comment">// 绕 x 轴旋转矩阵</span>\n<span class="token keyword">uniform</span> <span class="token keyword">mat4</span> my<span class="token punctuation">;</span> <span class="token comment">// 绕 y 轴旋转矩阵</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>在顶点着色器代码中使用关键字 uniform 声明两个旋转矩阵变量 mx 和 my，分别表示绕 x 轴、y 轴的旋转矩阵。旋转矩阵数据和光照数据一样适用于所有的非顶点数据，使用关键字 uniform 声明，不能使用 attribute 关键字声明。</p>\n<h3 id="传入-mx-矩阵数据"><a href="#%E4%BC%A0%E5%85%A5-mx-%E7%9F%A9%E9%98%B5%E6%95%B0%E6%8D%AE" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>传入 mx 矩阵数据</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="19743430137266536000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/** 从 program 对象获得旋转矩阵变量 mx、my 地址 **/\nvar mx = gl.getUniformLocation(program, \'mx\');\nvar my = gl.getUniformLocation(program, \'my\');`, `19743430137266536000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">/** 从 program 对象获得旋转矩阵变量 mx、my 地址 **/</span>\n<span class="token keyword">var</span> mx <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token function">getUniformLocation</span><span class="token punctuation">(</span>program<span class="token punctuation">,</span> <span class="token string">\'mx\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">var</span> my <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token function">getUniformLocation</span><span class="token punctuation">(</span>program<span class="token punctuation">,</span> <span class="token string">\'my\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="34978334021249855000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/** 绕 x 轴旋转 45 度 **/\nvar mxArr = new Float32Array([\n   1,\n   0,\n   0,\n   0,\n\n   0,\n   Math.cos(Math.PI / 4),\n   -Math.sin(Math.PI / 4),\n   0,\n\n   0,\n   Math.sin(Math.PI / 4),\n   Math.cos(Math.PI / 4),\n   0,\n\n   0,\n   0,\n   0,\n   1\n]);\n\n// 把数据 mxArr 传递给着色器旋转矩阵变量 mx\ngl.uniformMatrix4fv(mx, false, mxArr);`, `34978334021249855000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">/** 绕 x 轴旋转 45 度 **/</span>\n<span class="token keyword">var</span> mxArr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Float32Array</span><span class="token punctuation">(</span><span class="token punctuation">[</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span>Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n   Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span>\n<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// 把数据 mxArr 传递给着色器旋转矩阵变量 mx</span>\ngl<span class="token punctuation">.</span><span class="token function">uniformMatrix4fv</span><span class="token punctuation">(</span>mx<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> mxArr<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>上节课定义顶点旋转矩阵使用的着色器语言，下面的案例是先在 JS 程序中使用类型数组 Float32Array() 创建旋转矩阵的数据，然后使用 WebGL API gl.uniformMatrix4fv() 把数据传递给着色器。WebGL 中给着色器中不同关键字声明的不同类型变量传递数据，要使用不同的 WebGL API，uniform 关键字声明的 mat4 类型变量使用 WebGL API gl.uniformMatrix4fv()，uniform 关键字声明的 mat2 类型变量使用 WebGL API uniformMatrix2fv()，uniform 关键字声明的一个浮点数使用 gl.uniform1f() 传递，uniform 关键字声明的 vec4 类型变量和 mat4 一样使用 uniform4fv（变量地址名，<code class="language-text">new Float32Array([a, b, c, d])</code>）传递，也可以使用 uniform4f（变量地址名，a, b, c, d）传递，attribute 关键字声明的变量使用 WebGL API gl.vertexAttribPointer() 传递。</p>\n<h3 id="绘制函数-draw"><a href="#%E7%BB%98%E5%88%B6%E5%87%BD%E6%95%B0-draw" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>绘制函数 draw()</h3>\n<p>该绘制函数 draw() 可以使用 requestAnimationFrame(draw) 代码实现 draw() 函数的循环调用，因为要实现立方体绕 y 轴旋转，所以要在 draw 函数中更新 my 旋转矩阵的数据，同时利用 WebGL API gl.uniformMatrix4fv() 把新的矩阵数据传递给着色器矩阵变量 my，在函数重复调用 gl.drawArrays(gl.TRIANGLES, 0, 36) 不停绘制旋转后的顶点数据，所有需要更新的数据都要写在 draw 函数中，不需要反复执行的代码写在 draw 函数外，比如 mx 旋转矩阵只需要执行传入一次不再改变。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="61922939978840930000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/**\n * 定义绘制函数 draw()，定时更新旋转矩阵数据，并调用 WebGL 绘制 API\n ***/\nvar angle = Math.PI / 4; // 起始角度\nfunction draw() {\n   // gl.clear(gl.COLOR_BUFFER_BIT); // 清空画布上一帧图像\n   /**\n    * 立方体绕 y 轴旋转\n    ***/\n   angle += 0.01; // 每次渲染角度递增，每次渲染不同的角度\n   var sin = Math.sin(angle); // 旋转角度正弦值\n   var cos = Math.cos(angle); // 旋转角度余弦值\n   var myArr = new Float32Array([cos, 0, -sin, 0, 0, 1, 0, 0, sin, 0, cos, 0, 0, 0, 0, 1]);\n   gl.uniformMatrix4fv(my, false, myArr);\n   requestAnimationFrame(draw);\n   /** 执行绘制命令 **/\n   gl.drawArrays(gl.TRIANGLES, 0, 36);\n}\ndraw();`, `61922939978840930000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">/**\n * 定义绘制函数 draw()，定时更新旋转矩阵数据，并调用 WebGL 绘制 API\n ***/</span>\n<span class="token keyword">var</span> angle <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">4</span><span class="token punctuation">;</span> <span class="token comment">// 起始角度</span>\n<span class="token keyword">function</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n   <span class="token comment">// gl.clear(gl.COLOR_BUFFER_BIT); // 清空画布上一帧图像</span>\n   <span class="token comment">/**\n    * 立方体绕 y 轴旋转\n    ***/</span>\n   angle <span class="token operator">+=</span> <span class="token number">0.01</span><span class="token punctuation">;</span> <span class="token comment">// 每次渲染角度递增，每次渲染不同的角度</span>\n   <span class="token keyword">var</span> sin <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span>angle<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 旋转角度正弦值</span>\n   <span class="token keyword">var</span> cos <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span>angle<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 旋转角度余弦值</span>\n   <span class="token keyword">var</span> myArr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Float32Array</span><span class="token punctuation">(</span><span class="token punctuation">[</span>cos<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span>sin<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> sin<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> cos<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n   gl<span class="token punctuation">.</span><span class="token function">uniformMatrix4fv</span><span class="token punctuation">(</span>my<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> myArr<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>draw<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token comment">/** 执行绘制命令 **/</span>\n   gl<span class="token punctuation">.</span><span class="token function">drawArrays</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TRIANGLES</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">36</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="webgl-绘制多个几何体"><a href="#webgl-%E7%BB%98%E5%88%B6%E5%A4%9A%E4%B8%AA%E5%87%A0%E4%BD%95%E4%BD%93" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>WebGL 绘制多个几何体</h2>\n<p>利用 WebGL 重现三维场景的时候，往往不仅仅有一个几何体，比如像机器人是由多个子零件构成的装配体，可能同一个零件出现在不同的位置，可能两个零件的形状一样颜色不一样，也有颜色形状完全不同的零件。阅读下面的讲解内容，一方面可以学习如何利用 WebGL 创建多几何体场景，同时借助实际的问题进一步加深对渲染管线这个硬件黑箱的认知，只有更好的认知渲染管线才能更好的应用与它紧密关联的 API 接口，学习精力是有限的，毕竟 GPU 的数字电路不是每个人都有时间学习明白，只能通过简单的案例程序学习如何利用 WebGL API 操作渲染管线的相关功能。</p>\n<p>绘制多个几何体你首先会想到应该是每个几何体都有自己的顶点数据，要创建多个几何体自然要先利用类型数据创建这些顶点数据，除此外还要学习绘制函数的多次调用与帧缓存的知识，学习如何切换使用多组着色器程序。</p>\n<p>为了绘制两个相同的立方体效果，下面给出了两种方式。</p>\n<h3 id="方式一"><a href="#%E6%96%B9%E5%BC%8F%E4%B8%80" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>方式一</h3>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/phgtl1?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>最简单思路，增加一个几何体就把几何体的顶点添加到顶点数据中，在光照立方体代码的基础上更改即可，把立方体原来数据复制一份，为了把两个立方体的位置错开，可以使用 for 循环批量修改顶点数据，把某个坐标值加或减。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="48614596882520100000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`var data = new Float32Array([\n   0.3,\n   0.3,\n   0.3,\n   -0.3,\n   0.3,\n   0.3,\n   -0.3,\n   -0.3,\n   0.3,\n   0.3,\n   0.3,\n   0.3,\n   -0.3,\n   -0.3,\n   0.3,\n   0.3,\n   -0.3,\n   0.3, // 面 1\n\n   0.3,\n   0.3,\n   0.3,\n   0.3,\n   -0.3,\n   0.3,\n   0.3,\n   -0.3,\n   -0.3,\n   0.3,\n   0.3,\n   0.3,\n   0.3,\n   -0.3,\n   -0.3,\n   0.3,\n   0.3,\n   -0.3, // 面 2\n\n   0.3,\n   0.3,\n   0.3,\n   0.3,\n   0.3,\n   -0.3,\n   -0.3,\n   0.3,\n   -0.3,\n   0.3,\n   0.3,\n   0.3,\n   -0.3,\n   0.3,\n   -0.3,\n   -0.3,\n   0.3,\n   0.3, // 面 3\n\n   -0.3,\n   0.3,\n   0.3,\n   -0.3,\n   0.3,\n   -0.3,\n   -0.3,\n   -0.3,\n   -0.3,\n   -0.3,\n   0.3,\n   0.3,\n   -0.3,\n   -0.3,\n   -0.3,\n   -0.3,\n   -0.3,\n   0.3, // 面 4\n\n   -0.3,\n   -0.3,\n   -0.3,\n   0.3,\n   -0.3,\n   -0.3,\n   0.3,\n   -0.3,\n   0.3,\n   -0.3,\n   -0.3,\n   -0.3,\n   0.3,\n   -0.3,\n   0.3,\n   -0.3,\n   -0.3,\n   0.3, // 面 3\n\n   0.3,\n   -0.3,\n   -0.3,\n   -0.3,\n   -0.3,\n   -0.3,\n   -0.3,\n   0.3,\n   -0.3,\n   0.3,\n   -0.3,\n   -0.3,\n   -0.3,\n   0.3,\n   -0.3,\n   0.3,\n   0.3,\n   -0.3, // 面 6\n\n   // 立方体 2 的顶点坐标数据\n   0.3,\n   0.3,\n   0.3,\n   -0.3,\n   0.3,\n   0.3,\n   -0.3,\n   -0.3,\n   0.3,\n   0.3,\n   0.3,\n   0.3,\n   -0.3,\n   -0.3,\n   0.3,\n   0.3,\n   -0.3,\n   0.3, // 面 1\n\n   0.3,\n   0.3,\n   0.3,\n   0.3,\n   -0.3,\n   0.3,\n   0.3,\n   -0.3,\n   -0.3,\n   0.3,\n   0.3,\n   0.3,\n   0.3,\n   -0.3,\n   -0.3,\n   0.3,\n   0.3,\n   -0.3, // 面 2\n\n   0.3,\n   0.3,\n   0.3,\n   0.3,\n   0.3,\n   -0.3,\n   -0.3,\n   0.3,\n   -0.3,\n   0.3,\n   0.3,\n   0.3,\n   -0.3,\n   0.3,\n   -0.3,\n   -0.3,\n   0.3,\n   0.3, // 面 3\n\n   -0.3,\n   0.3,\n   0.3,\n   -0.3,\n   0.3,\n   -0.3,\n   -0.3,\n   -0.3,\n   -0.3,\n   -0.3,\n   0.3,\n   0.3,\n   -0.3,\n   -0.3,\n   -0.3,\n   -0.3,\n   -0.3,\n   0.3, // 面 4\n\n   -0.3,\n   -0.3,\n   -0.3,\n   0.3,\n   -0.3,\n   -0.3,\n   0.3,\n   -0.3,\n   0.3,\n   -0.3,\n   -0.3,\n   -0.3,\n   0.3,\n   -0.3,\n   0.3,\n   -0.3,\n   -0.3,\n   0.3, // 面 3\n\n   0.3,\n   -0.3,\n   -0.3,\n   -0.3,\n   -0.3,\n   -0.3,\n   -0.3,\n   0.3,\n   -0.3,\n   0.3,\n   -0.3,\n   -0.3,\n   -0.3,\n   0.3,\n   -0.3,\n   0.3,\n   0.3,\n   -0.3 // 面 6\n]);\n// 立方体 1 顶点数据 x 坐标批量加 0.5\nfor (var i = 0; i < 36 * 3; i += 3) {\n   data[i] += 0.5;\n}\n// 立方体 2 顶点数据 x 坐标批量减 0.5\nfor (var i = 36 * 3; i < 72 * 3; i += 3) {\n   data[i] -= 0.5;\n}`, `48614596882520100000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Float32Array</span><span class="token punctuation">(</span><span class="token punctuation">[</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span> <span class="token comment">// 面 1</span>\n\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span> <span class="token comment">// 面 2</span>\n\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span> <span class="token comment">// 面 3</span>\n\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span> <span class="token comment">// 面 4</span>\n\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span> <span class="token comment">// 面 3</span>\n\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span> <span class="token comment">// 面 6</span>\n\n   <span class="token comment">// 立方体 2 的顶点坐标数据</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span> <span class="token comment">// 面 1</span>\n\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span> <span class="token comment">// 面 2</span>\n\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span> <span class="token comment">// 面 3</span>\n\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span> <span class="token comment">// 面 4</span>\n\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span> <span class="token comment">// 面 3</span>\n\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token number">0.3</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">0.3</span> <span class="token comment">// 面 6</span>\n<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">// 立方体 1 顶点数据 x 坐标批量加 0.5</span>\n<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">36</span> <span class="token operator">*</span> <span class="token number">3</span><span class="token punctuation">;</span> i <span class="token operator">+=</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n   data<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token number">0.5</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token comment">// 立方体 2 顶点数据 x 坐标批量减 0.5</span>\n<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">36</span> <span class="token operator">*</span> <span class="token number">3</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">72</span> <span class="token operator">*</span> <span class="token number">3</span><span class="token punctuation">;</span> i <span class="token operator">+=</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n   data<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-=</span> <span class="token number">0.5</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>顶点的法向量数据、颜色数据重新复制一份即可，和原来相同。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="46055979454344870000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/**\n 创建顶点颜色数组 colorData\n **/\nvar colorData = new Float32Array([\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0, // 红色——面 1\n\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0, // 红色——面 2\n\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0, // 红色——面 3\n\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0, // 红色——面 4\n\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0, // 红色——面 5\n\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0, // 红色——面 6\n\n   // 立方体 2 的顶点颜色数据\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0, // 红色——面 1\n\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0, // 红色——面 2\n\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0, // 红色——面 3\n\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0, // 红色——面 4\n\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0, // 红色——面 5\n\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0 // 红色——面 6\n]);\n/**\n *顶点法向量数组 normalData\n **/\nvar normalData = new Float32Array([\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1, // z 轴正方向——面 1\n\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0, // x 轴正方向——面 2\n\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0, // y 轴正方向——面 3\n\n   -1,\n   0,\n   0,\n   -1,\n   0,\n   0,\n   -1,\n   0,\n   0,\n   -1,\n   0,\n   0,\n   -1,\n   0,\n   0,\n   -1,\n   0,\n   0, // x 轴负方向——面 4\n\n   0,\n   -1,\n   0,\n   0,\n   -1,\n   0,\n   0,\n   -1,\n   0,\n   0,\n   -1,\n   0,\n   0,\n   -1,\n   0,\n   0,\n   -1,\n   0, // y 轴负方向——面 5\n\n   0,\n   0,\n   -1,\n   0,\n   0,\n   -1,\n   0,\n   0,\n   -1,\n   0,\n   0,\n   -1,\n   0,\n   0,\n   -1,\n   0,\n   0,\n   -1, // z 轴负方向——面 6\n\n   // 立方体 2 的顶点法向量数据\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1, // z 轴正方向——面 1\n\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0, // x 轴正方向——面 2\n\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0,\n   0,\n   1,\n   0, // y 轴正方向——面 3\n\n   -1,\n   0,\n   0,\n   -1,\n   0,\n   0,\n   -1,\n   0,\n   0,\n   -1,\n   0,\n   0,\n   -1,\n   0,\n   0,\n   -1,\n   0,\n   0, // x 轴负方向——面 4\n\n   0,\n   -1,\n   0,\n   0,\n   -1,\n   0,\n   0,\n   -1,\n   0,\n   0,\n   -1,\n   0,\n   0,\n   -1,\n   0,\n   0,\n   -1,\n   0, // y 轴负方向——面 5\n\n   0,\n   0,\n   -1,\n   0,\n   0,\n   -1,\n   0,\n   0,\n   -1,\n   0,\n   0,\n   -1,\n   0,\n   0,\n   -1,\n   0,\n   0,\n   -1 // z 轴负方向——面 6\n]);`, `46055979454344870000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">/**\n 创建顶点颜色数组 colorData\n **/</span>\n<span class="token keyword">var</span> colorData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Float32Array</span><span class="token punctuation">(</span><span class="token punctuation">[</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 红色——面 1</span>\n\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 红色——面 2</span>\n\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 红色——面 3</span>\n\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 红色——面 4</span>\n\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 红色——面 5</span>\n\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 红色——面 6</span>\n\n   <span class="token comment">// 立方体 2 的顶点颜色数据</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 红色——面 1</span>\n\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 红色——面 2</span>\n\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 红色——面 3</span>\n\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 红色——面 4</span>\n\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 红色——面 5</span>\n\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span> <span class="token comment">// 红色——面 6</span>\n<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">/**\n *顶点法向量数组 normalData\n **/</span>\n<span class="token keyword">var</span> normalData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Float32Array</span><span class="token punctuation">(</span><span class="token punctuation">[</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// z 轴正方向——面 1</span>\n\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// x 轴正方向——面 2</span>\n\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// y 轴正方向——面 3</span>\n\n   <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// x 轴负方向——面 4</span>\n\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// y 轴负方向——面 5</span>\n\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// z 轴负方向——面 6</span>\n\n   <span class="token comment">// 立方体 2 的顶点法向量数据</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// z 轴正方向——面 1</span>\n\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// x 轴正方向——面 2</span>\n\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// y 轴正方向——面 3</span>\n\n   <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// x 轴负方向——面 4</span>\n\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// y 轴负方向——面 5</span>\n\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token number">0</span><span class="token punctuation">,</span>\n   <span class="token operator">-</span><span class="token number">1</span> <span class="token comment">// z 轴负方向——面 6</span>\n<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>绘制的顶点数量增加了，drawArrays 方法的参数要从 36 变为 72.</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="32960699053868335000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/** 执行绘制命令 **/\ngl.drawArrays(gl.TRIANGLES, 0, 36);`, `32960699053868335000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">/** 执行绘制命令 **/</span>\ngl<span class="token punctuation">.</span><span class="token function">drawArrays</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TRIANGLES</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">36</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="4947798788892221000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/** 执行绘制命令 **/\ngl.drawArrays(gl.TRIANGLES, 0, 72);`, `4947798788892221000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">/** 执行绘制命令 **/</span>\ngl<span class="token punctuation">.</span><span class="token function">drawArrays</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TRIANGLES</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">72</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<h3 id="方式二（重用数据）"><a href="#%E6%96%B9%E5%BC%8F%E4%BA%8C%EF%BC%88%E9%87%8D%E7%94%A8%E6%95%B0%E6%8D%AE%EF%BC%89" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>方式二（重用数据）</h3>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/nml4xw?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>两个几何体颜色、形状完全相同，没有必要在创建一组顶点数据，可以使用 WebGL API 绘制函数 gl.drawArrays() 多次调用同一组顶点数据，执行平移变换即可，第一次调用 WebGL API 绘制函数 gl.drawArrays() 把立方体整体向右平移（x 轴正方向），第二次调用立方体整体向左平移（x 轴负方向）。</p>\n<p>在着色器声明旋转矩阵 mx、my 和平移矩阵 Tx，旋转矩阵传入一次数据不再改变，平移矩阵的数据每次调用 WebGL API 绘制函数 gl.drawArrays()，都会重新传入着色器新的数据，在新的位置渲染出来几何体。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="93814967956003450000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/** uniform 声明旋转矩阵变量 mx、my，平移矩阵 Tx **/\nuniform mat4 mx; // 绕 x 轴旋转矩阵\nuniform mat4 my; // 绕 y 轴旋转矩阵\nuniform mat4 Tx; // 沿着 x 轴平移矩阵`, `93814967956003450000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="glsl"\n              >\n                <span class="gatsby-code-button-language">glsl</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="glsl"><pre style="counter-reset: linenumber NaN" class="language-glsl line-numbers"><code class="language-glsl"><span class="token comment">/** uniform 声明旋转矩阵变量 mx、my，平移矩阵 Tx **/</span>\n<span class="token keyword">uniform</span> <span class="token keyword">mat4</span> mx<span class="token punctuation">;</span> <span class="token comment">// 绕 x 轴旋转矩阵</span>\n<span class="token keyword">uniform</span> <span class="token keyword">mat4</span> my<span class="token punctuation">;</span> <span class="token comment">// 绕 y 轴旋转矩阵</span>\n<span class="token keyword">uniform</span> <span class="token keyword">mat4</span> Tx<span class="token punctuation">;</span> <span class="token comment">// 沿着 x 轴平移矩阵</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>在着色器声明旋转矩阵 mx、my 和平移矩阵 Tx，旋转矩阵传入一次数据不再改变，平移矩阵的数据每次调用 WebGL API 绘制函数 gl.drawArrays()，都会重新传入着色器新的数据，在新的位置渲染出来几何体。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="10332729130543528000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/** 从 program 对象获得旋转矩阵变量 mx、my、Tx 地址 **/\nvar mx = gl.getUniformLocation(program, \'mx\');\nvar my = gl.getUniformLocation(program, \'my\');\nvar Tx = gl.getUniformLocation(program, \'Tx\');`, `10332729130543528000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">/** 从 program 对象获得旋转矩阵变量 mx、my、Tx 地址 **/</span>\n<span class="token keyword">var</span> mx <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token function">getUniformLocation</span><span class="token punctuation">(</span>program<span class="token punctuation">,</span> <span class="token string">\'mx\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">var</span> my <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token function">getUniformLocation</span><span class="token punctuation">(</span>program<span class="token punctuation">,</span> <span class="token string">\'my\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">var</span> Tx <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token function">getUniformLocation</span><span class="token punctuation">(</span>program<span class="token punctuation">,</span> <span class="token string">\'Tx\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>通过 WebGL API gl.uniformMatrix4fv() 把类型数据创建的旋转矩阵数据传递给着色器。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="26051638531239084000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/**\n * 传入旋转矩阵数据\n ***/\nvar angle = Math.PI / 4; // 旋转角度\nvar sin = Math.sin(angle);\nvar cos = Math.cos(angle);\n// 旋转矩阵数据\nvar mxArr = new Float32Array([1, 0, 0, 0, 0, cos, -sin, 0, 0, sin, cos, 0, 0, 0, 0, 1]);\nvar myArr = new Float32Array([cos, 0, -sin, 0, 0, 1, 0, 0, sin, 0, cos, 0, 0, 0, 0, 1]);\n// 类型数组传入矩阵\ngl.uniformMatrix4fv(mx, false, mxArr);\ngl.uniformMatrix4fv(my, false, myArr);`, `26051638531239084000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">/**\n * 传入旋转矩阵数据\n ***/</span>\n<span class="token keyword">var</span> angle <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">4</span><span class="token punctuation">;</span> <span class="token comment">// 旋转角度</span>\n<span class="token keyword">var</span> sin <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span>angle<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">var</span> cos <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span>angle<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">// 旋转矩阵数据</span>\n<span class="token keyword">var</span> mxArr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Float32Array</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> cos<span class="token punctuation">,</span> <span class="token operator">-</span>sin<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> sin<span class="token punctuation">,</span> cos<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">var</span> myArr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Float32Array</span><span class="token punctuation">(</span><span class="token punctuation">[</span>cos<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span>sin<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> sin<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> cos<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">// 类型数组传入矩阵</span>\ngl<span class="token punctuation">.</span><span class="token function">uniformMatrix4fv</span><span class="token punctuation">(</span>mx<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> mxArr<span class="token punctuation">)</span><span class="token punctuation">;</span>\ngl<span class="token punctuation">.</span><span class="token function">uniformMatrix4fv</span><span class="token punctuation">(</span>my<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> myArr<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>声明一个绘制函数 draw(x)，参数 x 是平移矩阵的一个元素，表示沿 x 轴平移距离，每次调用 draw() 函数都会传入新的 x 值。调用 draw 函数，执行 gl.drawArrays(gl.TRIANGLES, 0, 36) 语句的时候，渲染管线会生成立方体图像的像素值，像素值存储在帧缓冲区的颜色缓冲区中，你可以把帧缓冲区当成一个 RGB 像素值仓库，每执行一次 gl.drawArrays(gl.TRIANGLES, 0, 36) 生成一组 RGB 值，这些数据会被送进帧缓冲去中，默认不会覆盖前面的 RGB 数据，显示系统会不停的循环扫描帧缓冲区中的颜色数据显示在屏幕上。</p>\n<p>你可以执行注释掉的代码 <code class="language-text">gl.clear(gl.COLOR_BUFFER_BIT)</code>，然后刷新浏览器可以发现，网页上只有一个立方的图像， 这句代码 <code class="language-text">gl.clear(gl.COLOR_BUFFER_BIT)</code> 的作用就是清除帧缓冲区中颜色缓冲区存储的颜色数据，clear() 是一个 WebGL API，参数 <code class="language-text">COLOR_BUFFER_BIT</code> 表示帧缓冲区的颜色缓冲区，当然你也可以清除其它显存区域中的数据，比如参数是 <code class="language-text">gl.DEPTH_BUFFER_BIT</code> 就表示帧缓冲区的深度缓冲区像素深度数据，深度缓冲区和颜色缓冲区一样都是帧缓存的子缓冲区。</p>\n<p>立方体的所有面的像素值都存储在颜色缓冲区中，这些像素的深度值都保存在深度缓冲区中，深度缓冲区中数据表征像素距离人眼睛的长度，执行 <code class="language-text">gl.enable(gl.DEPTH_TEST)</code> 可以开启深度检测功能，离眼睛近的像素才会显示出来，离眼睛远的像素值会被覆盖，对应生活中就是正常情况下你的眼睛不可能不可能看到立方体的背面，你只能看到离你眼睛近的正面。</p>\n<h3 id="webgl-坐标系"><a href="#webgl-%E5%9D%90%E6%A0%87%E7%B3%BB" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>WebGL 坐标系</h3>\n<p>第一个 WebGL 程序创建了两个立方体的顶点数据，两个立方体一左一右，然后执行了绕 x 轴和 y 轴两个旋转变换，查看效果图你可以知道绕 y 旋转的时候是 WebGL 默认坐标系的 y 轴，不是过立方体几何中心的的 y 轴，查看立方体的顶点坐标可以看出来，两个立方体自身的几何中心是在 x 轴上的，所以立方体绕 WebGL 坐标系 x 轴的旋转相当于绕自身过几何中心的 x 轴旋转。复杂的场景往往牵扯到各种各样抽象出来的坐标系，比如视图坐标系、世界坐标系等，他们都是基于 WebGL 默认的坐标系抽象出来的，这里不再多说，先有一个简单的印象，一个几何体变换是相对于谁而言。</p>\n<p>对比上面方法一和方法二两个 WebGL 程序，你可以发现他们稍有区别。第二个 WebGL 程序的运行结果和第一个之所以不一样是因为平移和旋转的先后顺序不一样，第一个 WebGL 程序中虽然没有平移变换，但是两个几何体一左一右关于 y 轴对称，相当于从中间平移过去，然后经过两次旋转。查看下面第二个 WebGL 程序的着色器程序矩阵相乘的顺序，可以知道着色器处理器先对顶点进行旋转变换再进行平移变换。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="8495832645155522000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 平移矩阵 Tx、旋转矩阵 mx、旋转矩阵 my 连乘、顶点齐次坐标连乘\ngl_Position = Tx * mx * my * apos;`, `8495832645155522000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="glsl"\n              >\n                <span class="gatsby-code-button-language">glsl</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="glsl"><pre style="counter-reset: linenumber NaN" class="language-glsl line-numbers"><code class="language-glsl"><span class="token comment">// 平移矩阵 Tx、旋转矩阵 mx、旋转矩阵 my 连乘、顶点齐次坐标连乘</span>\ngl_Position <span class="token operator">=</span> Tx <span class="token operator">*</span> mx <span class="token operator">*</span> my <span class="token operator">*</span> apos<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>矩阵的乘法运算中，矩阵的左乘和右乘是不一样的，是有顺序性的，离 apos 列向量近的矩阵就是先执行的变换，如果把平移矩阵 Tx 靠近 apos 列向量，运行程序你会发现和第一个 WebGL 程序的运算结果是一样的。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="84335720371079410000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 平移矩阵 Tx、旋转矩阵 mx、旋转矩阵 my 连乘、顶点齐次坐标连乘\ngl_Position = mx * my * Tx * apos;`, `84335720371079410000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="glsl"\n              >\n                <span class="gatsby-code-button-language">glsl</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="glsl"><pre style="counter-reset: linenumber NaN" class="language-glsl line-numbers"><code class="language-glsl"><span class="token comment">// 平移矩阵 Tx、旋转矩阵 mx、旋转矩阵 my 连乘、顶点齐次坐标连乘</span>\ngl_Position <span class="token operator">=</span> mx <span class="token operator">*</span> my <span class="token operator">*</span> Tx <span class="token operator">*</span> apos<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<h2 id="webgl-纹理贴图"><a href="#webgl-%E7%BA%B9%E7%90%86%E8%B4%B4%E5%9B%BE" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>WebGL 纹理贴图</h2>\n<p>把 png、jpg 等格式图片显示在 WebGL 三维场景中，比如一个产品的三维模型上贴一个商标。一张图片从数据结构的角度看，文件中包含的信息就是和颜色缓冲区中的 RGB 或 RGBA 数据一样，.jpg 格式图片数据包含 RGB 红绿蓝三个颜色分量，.png 格式图片的数据除了 RGB 三个分量还包含透明度 A 分量，在 WebGL 中可以通过调节透明度 A 分量的值可以实现颜色叠加，模拟透明、半透明的玻璃效果。</p>\n<p>前面学习过顶点位置坐标、顶点颜色、顶点法向量三种顶点数据，本节课要引入新的顶点数据纹理坐标。图片称为纹理图像，图片上的一个像素称为纹素，一个纹素就是一个 RGB 或 RGBA 值。把整个图片看成一个平面区域，用一个二维 UV 坐标系可以描述每一个纹素的位置。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-09-14-18-25-57-fd397c2893203713c5b2a695c9dc8f04-fee1c.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAACkUlEQVQoz41SW0hUYRCec84e91x2z9k9u2ddd9d13WtpUm2KFERRINhzZJYPQS9BUIF0IbqJYU+WkgayQWViElqGpUYrEZWUikpkahcQUczorQtm2TR7ew0HPmbmZ+b75wYAIEFuJCgjCnZESbw2JLsQeb5sb0DNdm+3cnxUMGSVgCErSiil+AikJECwpW2ewCQtBFA3tDytV9rHv0vXn8+qwyvzps7JObHh4dfQ/Y/xznVV/kuFRx2lu58payunZLe33J4fqVIY6xqvK7hH9ThKNCtAdj8Ah4whRe98MN0sN/WhcKIR1Qkqs7kfherLqMQXRwGRWQIQVkQ1e5ETnH0GyfdDsOkg2LVa3uw9zPLF8wAOKswxS3FJQjn++YqpawLFi7d/qWO4It8c/C2cjaE5vvAqQZiI2RIKsGEaTwElUVYRPe0UqRYXgLKJ3gozZAlRuqcbTN3TaGobWlaHl9HcO/PH3PMJlZffXgf+IpsMcoV5YDiaGaOl57eDfLIZnWwzgTihOBkrPp6rF2tbUTh59ac6jstSY8+S8VANKr0zg5lPqSVDArsAtGO0jCCRkM/do6pJsy2k3SlSAN+d0RtKxzjKbSNo+YBofrKAYvsoygNfpqAdxVOhatObSIXeqkd9FZy4MZ5lCeQpAf8RS8QfEx0FY/QBkeqYuJh3tKGtB04ftHa8rZNaR86Zut7XyHcnzwdjL5oKmgaOR22RzaCt90G40g6ScxuE9yuptnQrFJ/h4D+SmJWY1oZHAFaCVkea/CIfgJGySwhBC7VLm8qlI8kx0nbpCPV9NEzMMJVduMWyOXk+xpYTYpxePyEfyAeHxwPlMXAatdRiWINEeX6Ch7zcNLwEN5s57NUKt8q4f/K0vVPWvBF4AAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 09 14 18 25 57" title="" data-src="/static/2022-09-14-18-25-57-fd397c2893203713c5b2a695c9dc8f04-fee1c.png" data-srcset="/static/2022-09-14-18-25-57-fd397c2893203713c5b2a695c9dc8f04-a67b7.png 200w,\n/static/2022-09-14-18-25-57-fd397c2893203713c5b2a695c9dc8f04-0b187.png 400w,\n/static/2022-09-14-18-25-57-fd397c2893203713c5b2a695c9dc8f04-fee1c.png 800w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>// TODO <a href="http://www.yanhuangxueyuan.com/WebGL/" target="_blank" rel="nofollow noreferrer noopener">http://www.yanhuangxueyuan.com/WebGL/</a></p>',
excerpt:"快速入门 绘制一个点 着色器代码放在 script 标签中 绘制一个矩形 attribute 关键字 声明顶点相关数据的时候需要用到 attribute 关键字，目的是为了 js 可以调用相关的 WebGL API 把顶点相关数据从 js 传递给顶点着色器 attribute…",timeToRead:36,tableOfContents:'<ul>\n<li>\n<p><a href="/webgl-zero-based-practice-learn/#%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8">快速入门</a></p>\n<ul>\n<li>\n<p><a href="/webgl-zero-based-practice-learn/#%E7%BB%98%E5%88%B6%E4%B8%80%E4%B8%AA%E7%82%B9">绘制一个点</a></p>\n<ul>\n<li><a href="/webgl-zero-based-practice-learn/#%E7%9D%80%E8%89%B2%E5%99%A8%E4%BB%A3%E7%A0%81%E6%94%BE%E5%9C%A8-script-%E6%A0%87%E7%AD%BE%E4%B8%AD">着色器代码放在 script 标签中</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/webgl-zero-based-practice-learn/#%E7%BB%98%E5%88%B6%E4%B8%80%E4%B8%AA%E7%9F%A9%E5%BD%A2">绘制一个矩形</a></p>\n<ul>\n<li><a href="/webgl-zero-based-practice-learn/#attribute-%E5%85%B3%E9%94%AE%E5%AD%97">attribute 关键字</a></li>\n<li><a href="/webgl-zero-based-practice-learn/#drawarrays-%E6%95%B4%E4%BD%93%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F">drawArrays 整体执行顺序</a></li>\n<li><a href="/webgl-zero-based-practice-learn/#%E7%A1%AC%E4%BB%B6%E7%9B%B8%E5%85%B3">硬件相关</a></li>\n</ul>\n</li>\n<li><a href="/webgl-zero-based-practice-learn/#webgl-%E5%9D%90%E6%A0%87%E7%B3%BB%E6%8A%95%E5%BD%B1">WebGL 坐标系—投影</a></li>\n<li>\n<p><a href="/webgl-zero-based-practice-learn/#webgl-%E5%B9%B3%E7%A7%BB%E5%8F%98%E6%8D%A2">WebGL 平移变换</a></p>\n<ul>\n<li><a href="/webgl-zero-based-practice-learn/#%E6%96%B9%E6%B3%95%E4%B8%80">方法一</a></li>\n<li><a href="/webgl-zero-based-practice-learn/#%E6%96%B9%E6%B3%95%E4%BA%8C">方法二</a></li>\n<li><a href="/webgl-zero-based-practice-learn/#%E6%96%B9%E6%B3%95%E4%B8%89">方法三</a></li>\n<li>\n<p><a href="/webgl-zero-based-practice-learn/#%E6%96%B9%E6%B3%95%E5%9B%9B">方法四</a></p>\n<ul>\n<li><a href="/webgl-zero-based-practice-learn/#%E5%B9%B3%E7%A7%BB%E7%9F%A9%E9%98%B5%E8%A7%A3%E6%9E%90">平移矩阵解析</a></li>\n</ul>\n</li>\n<li><a href="/webgl-zero-based-practice-learn/#%E6%80%BB%E7%BB%93">总结</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/webgl-zero-based-practice-learn/#webgl-%E6%97%8B%E8%BD%AC%E5%8F%98%E6%8D%A2">WebGL 旋转变换</a></p>\n<ul>\n<li><a href="/webgl-zero-based-practice-learn/#%E7%9D%80%E8%89%B2%E5%99%A8%E5%86%85%E7%BD%AE%E5%87%BD%E6%95%B0">着色器内置函数</a></li>\n<li><a href="/webgl-zero-based-practice-learn/#%E6%B5%81%E7%A8%8B%E7%AE%80%E8%BF%B0">流程简述</a></li>\n<li>\n<p><a href="/webgl-zero-based-practice-learn/#%E6%97%8B%E8%BD%AC%E7%9F%A9%E9%98%B5%E8%A7%A3%E6%9E%90">旋转矩阵解析</a></p>\n<ul>\n<li><a href="/webgl-zero-based-practice-learn/#%E7%BB%95-z-%E8%BD%B4%E6%97%8B%E8%BD%AC-%CE%B3-%E8%A7%92%E5%BA%A6">绕 Z 轴旋转 γ 角度</a></li>\n<li><a href="/webgl-zero-based-practice-learn/#%E7%BB%95-x-%E8%BD%B4%E6%97%8B%E8%BD%AC-%CE%B1-%E8%A7%92%E5%BA%A6">绕 X 轴旋转 α 角度</a></li>\n<li><a href="/webgl-zero-based-practice-learn/#%E7%BB%95-y-%E8%BD%B4%E6%97%8B%E8%BD%AC-%CE%B2-%E8%A7%92%E5%BA%A6">绕 Y 轴旋转 β 角度</a></li>\n</ul>\n</li>\n<li><a href="/webgl-zero-based-practice-learn/#%E6%80%BB%E7%BB%93-1">总结</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/webgl-zero-based-practice-learn/#webgl-%E9%A1%B6%E7%82%B9%E7%B4%A2%E5%BC%95%E7%BB%98%E5%88%B6">WebGL 顶点索引绘制</a></p>\n<ul>\n<li><a href="/webgl-zero-based-practice-learn/#%E9%A1%B6%E7%82%B9%E5%88%97%E4%B8%BE">顶点列举</a></li>\n<li><a href="/webgl-zero-based-practice-learn/#%E9%A1%B6%E7%82%B9%E7%9A%84%E7%B4%A2%E5%BC%95%E6%95%B0%E7%BB%84">顶点的索引数组</a></li>\n<li><a href="/webgl-zero-based-practice-learn/#gldrawelements">gl.drawElements()</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/webgl-zero-based-practice-learn/#varying-%E5%8F%98%E9%87%8F%E5%92%8C%E9%A2%9C%E8%89%B2%E6%8F%92%E5%80%BC">varying 变量和颜色插值</a></p>\n<ul>\n<li><a href="/webgl-zero-based-practice-learn/#%E9%A2%9C%E8%89%B2%E7%BA%BF%E6%80%A7%E6%8F%92%E5%80%BC">颜色线性插值</a></li>\n<li><a href="/webgl-zero-based-practice-learn/#%E8%8E%B7%E5%8F%96%E9%A1%B6%E7%82%B9%E5%8F%98%E9%87%8F">获取顶点变量</a></li>\n<li><a href="/webgl-zero-based-practice-learn/#%E8%AE%BE%E7%BD%AE%E9%A1%B6%E7%82%B9%E9%A2%9C%E8%89%B2%E3%80%81%E4%BD%8D%E7%BD%AE%E6%95%B0%E6%8D%AE">设置顶点颜色、位置数据</a></li>\n<li><a href="/webgl-zero-based-practice-learn/#%E5%88%9B%E5%BB%BA%E9%A1%B6%E7%82%B9%E7%BC%93%E5%86%B2%E5%8C%BA%E3%80%81%E4%BC%A0%E9%80%92%E6%95%B0%E6%8D%AE">创建顶点缓冲区、传递数据</a></li>\n<li><a href="/webgl-zero-based-practice-learn/#%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%BD%A9%E8%89%B2%E4%B8%89%E8%A7%92%E5%BD%A2">创建一个彩色三角形</a></li>\n<li><a href="/webgl-zero-based-practice-learn/#%E4%B8%A4%E4%B8%AA%E5%8D%95%E8%89%B2%E4%B8%89%E8%A7%92%E9%9D%A2%EF%BC%88%E4%B8%8D%E5%90%8C%E9%A2%9C%E8%89%B2%EF%BC%89">两个单色三角面（不同颜色）</a></li>\n<li><a href="/webgl-zero-based-practice-learn/#%E9%A2%9C%E8%89%B2%E6%8F%92%E5%80%BC%EF%BC%88%E9%A1%B6%E7%82%B9%E4%BD%8D%E7%BD%AE%E3%80%81%E9%A2%9C%E8%89%B2%E4%BD%BF%E7%94%A8%E4%B8%80%E4%B8%AA%E7%BC%93%E5%86%B2%E5%8C%BA%E5%AD%98%E5%82%A8%EF%BC%89">颜色插值（顶点位置、颜色使用一个缓冲区存储）</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/webgl-zero-based-practice-learn/#%E7%AB%8B%E6%96%B9%E4%BD%93-%E6%AF%8F%E4%B8%AA%E9%9D%A2%E4%B8%80%E7%A7%8D%E9%A2%9C%E8%89%B2">立方体-每个面一种颜色</a></p>\n<ul>\n<li><a href="/webgl-zero-based-practice-learn/#%E7%9D%80%E8%89%B2%E5%99%A8%E7%A8%8B%E5%BA%8F">着色器程序</a></li>\n<li><a href="/webgl-zero-based-practice-learn/#%E9%A1%B6%E7%82%B9%E6%95%B0%E6%8D%AE">顶点数据</a></li>\n<li><a href="/webgl-zero-based-practice-learn/#%E6%B7%B1%E5%BA%A6%E6%B5%8B%E8%AF%95">深度测试</a></li>\n<li><a href="/webgl-zero-based-practice-learn/#%E6%B5%8B%E8%AF%95">测试</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/webgl-zero-based-practice-learn/#webgl-%E5%85%89%E7%85%A7%E6%B8%B2%E6%9F%93%E7%AB%8B%E6%96%B9%E4%BD%93">WebGL 光照渲染立方体</a></p>\n<ul>\n<li>\n<p><a href="/webgl-zero-based-practice-learn/#%E5%85%89%E7%85%A7%E6%A8%A1%E5%9E%8B">光照模型</a></p>\n<ul>\n<li><a href="/webgl-zero-based-practice-learn/#%E6%BC%AB%E5%8F%8D%E5%B0%84">漫反射</a></li>\n<li><a href="/webgl-zero-based-practice-learn/#%E6%BC%AB%E5%8F%8D%E5%B0%84%E6%A8%A1%E5%9E%8B%EF%BC%9A%E5%85%89%E7%BA%BF%E5%85%A5%E5%B0%84%E8%A7%92%E4%BD%99%E5%BC%A6%E5%80%BC">漫反射模型：光线入射角余弦值</a></li>\n<li><a href="/webgl-zero-based-practice-learn/#rgb-%E5%88%86%E9%87%8F%E8%A1%A8%E7%A4%BA%E9%A2%9C%E8%89%B2">RGB 分量表示颜色</a></li>\n<li><a href="/webgl-zero-based-practice-learn/#%E9%95%9C%E9%9D%A2%E5%8F%8D%E5%B0%84">镜面反射</a></li>\n<li><a href="/webgl-zero-based-practice-learn/#%E7%8E%AF%E5%A2%83%E5%85%89%E7%85%A7">环境光照</a></li>\n<li><a href="/webgl-zero-based-practice-learn/#%E5%A4%8D%E5%90%88%E5%85%89%E7%85%A7">复合光照</a></li>\n<li><a href="/webgl-zero-based-practice-learn/#%E6%B3%95%E5%90%91%E9%87%8F">法向量</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/webgl-zero-based-practice-learn/#%E7%AB%8B%E6%96%B9%E4%BD%93%E6%B7%BB%E5%8A%A0%E5%B9%B3%E8%A1%8C%E5%85%89">立方体添加平行光</a></p>\n<ul>\n<li><a href="/webgl-zero-based-practice-learn/#%E9%A1%B6%E7%82%B9%E7%9D%80%E8%89%B2%E5%99%A8%EF%BC%9A%E5%A3%B0%E6%98%8E%E5%8F%98%E9%87%8F">顶点着色器：声明变量</a></li>\n<li>\n<p><a href="/webgl-zero-based-practice-learn/#%E9%A1%B6%E7%82%B9%E7%9D%80%E8%89%B2%E5%99%A8%EF%BC%9A%E5%85%89%E7%85%A7%E8%AE%A1%E7%AE%97">顶点着色器：光照计算</a></p>\n<ul>\n<li><a href="/webgl-zero-based-practice-learn/#%E8%8E%B7%E5%8F%96%E7%9D%80%E8%89%B2%E5%99%A8%E5%8F%98%E9%87%8F">获取着色器变量</a></li>\n<li><a href="/webgl-zero-based-practice-learn/#%E4%BC%A0%E9%80%92%E6%95%B0%E6%8D%AE">传递数据</a></li>\n<li><a href="/webgl-zero-based-practice-learn/#%E9%A1%B6%E7%82%B9%E6%B3%95%E5%90%91%E9%87%8F">顶点法向量</a></li>\n</ul>\n</li>\n<li><a href="/webgl-zero-based-practice-learn/#%E9%A1%B6%E7%82%B9%E6%B3%95%E5%90%91%E9%87%8F%E7%9F%A9%E9%98%B5%E5%8F%98%E6%8D%A2">顶点法向量矩阵变换</a></li>\n<li><a href="/webgl-zero-based-practice-learn/#%E8%A7%86%E7%BA%BF">视线</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/webgl-zero-based-practice-learn/#%E7%AB%8B%E6%96%B9%E4%BD%93%E6%B7%BB%E5%8A%A0%E7%82%B9%E5%85%89%E6%BA%90">立方体添加点光源</a></p>\n<ul>\n<li><a href="/webgl-zero-based-practice-learn/#%E6%B7%BB%E5%8A%A0%E7%82%B9%E5%85%89%E6%BA%90%E4%BD%8D%E7%BD%AE%E3%80%81%E9%A2%9C%E8%89%B2%E6%95%B0%E6%8D%AE">添加点光源位置、颜色数据</a></li>\n<li><a href="/webgl-zero-based-practice-learn/#%E7%82%B9%E5%85%89%E6%BA%90%E4%B8%8E%E9%A1%B6%E7%82%B9%E6%96%B9%E5%90%91%E8%AE%A1%E7%AE%97">点光源与顶点方向计算</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href="/webgl-zero-based-practice-learn/#%E7%AB%8B%E6%96%B9%E4%BD%93%E6%97%8B%E8%BD%AC%E5%8A%A8%E7%94%BB">立方体旋转动画</a></p>\n<ul>\n<li><a href="/webgl-zero-based-practice-learn/#%E5%A3%B0%E6%98%8E%E7%9F%A9%E9%98%B5%E5%8F%98%E9%87%8F">声明矩阵变量</a></li>\n<li><a href="/webgl-zero-based-practice-learn/#%E4%BC%A0%E5%85%A5-mx-%E7%9F%A9%E9%98%B5%E6%95%B0%E6%8D%AE">传入 mx 矩阵数据</a></li>\n<li><a href="/webgl-zero-based-practice-learn/#%E7%BB%98%E5%88%B6%E5%87%BD%E6%95%B0-draw">绘制函数 draw()</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/webgl-zero-based-practice-learn/#webgl-%E7%BB%98%E5%88%B6%E5%A4%9A%E4%B8%AA%E5%87%A0%E4%BD%95%E4%BD%93">WebGL 绘制多个几何体</a></p>\n<ul>\n<li><a href="/webgl-zero-based-practice-learn/#%E6%96%B9%E5%BC%8F%E4%B8%80">方式一</a></li>\n<li><a href="/webgl-zero-based-practice-learn/#%E6%96%B9%E5%BC%8F%E4%BA%8C%EF%BC%88%E9%87%8D%E7%94%A8%E6%95%B0%E6%8D%AE%EF%BC%89">方式二（重用数据）</a></li>\n<li><a href="/webgl-zero-based-practice-learn/#webgl-%E5%9D%90%E6%A0%87%E7%B3%BB">WebGL 坐标系</a></li>\n</ul>\n</li>\n<li><a href="/webgl-zero-based-practice-learn/#webgl-%E7%BA%B9%E7%90%86%E8%B4%B4%E5%9B%BE">WebGL 纹理贴图</a></li>\n</ul>\n</li>\n</ul>',wordCount:{words:1930},frontmatter:{date:"2022-09-14 18:27:05",path:"/webgl-zero-based-practice-learn/",tags:"前端, 可视化, WebGL, 读书笔记",title:"WebGL 零基础入门学习",draft:null,catalog_number:null}},nextPost:{html:'<p>之前，CSS 世界中除受限诸多的表格布局之外是没有专门的布局属性的，随着 Web 应用越来越复杂，显示设备越来越多样，原有的 CSS 特性已经无法满足现代 Web 开发需求了。于是，CSS 定义了很多全新的布局方式，这些新的布局 CSS 使用简单，效果精美，是所有前端开发者必学必会的技能。</p>\n<h1 id="分栏布局"><a href="#%E5%88%86%E6%A0%8F%E5%B8%83%E5%B1%80" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>分栏布局</h1>\n<p>分栏布局也被称为多列布局、多栏布局，这种布局可以将内容布局到多个列框中，类似报纸上的排版。</p>\n<p>分栏布局比较特殊，有别于传统布局，它将子元素在内的所有内容拆分为列，这与打印网页的时候将网页内容分成多个页面的方式类似。分栏布局主要针对图文排版布局，应用在横向排版场景中，文档流是倒 N 方向。有个别布局只能使用分栏布局实现，分栏布局虽然在日常开发中用得不多，但是遇到合适的场景时是一种非常有用的布局方式。</p>\n<p>IE10+ 浏览器都可以使用分栏布局，API 稳定，在移动端的兼容性比弹性布局要好，可以放心使用。例如，有一段无序列表，HTML 代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="76375031620728160000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<ul>\n   <li>重庆市</li>\n   <li>哈尔滨市</li>\n   <li>长春市</li>\n   <li>兰州市</li>\n   <li>北京市</li>\n   <li>杭州市</li>\n   <li>长沙市</li>\n   <li>沈阳市</li>\n   <li>成都市</li>\n   <li>合肥市</li>\n   <li>天津市</li>\n   <li>西安市</li>\n</ul>`, `76375031620728160000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>重庆市<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>哈尔滨市<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>长春市<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>兰州市<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>北京市<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>杭州市<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>长沙市<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>沈阳市<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>成都市<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>合肥市<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>天津市<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>西安市<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>可以看到每一个列表项的内容很少，如果容器的宽度足够，则可以使用 columns 属性实现分栏布局，让排版更舒服，代码超级简单：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="51693951764705436000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`ul {\n   columns: 2;\n}`, `51693951764705436000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">ul</span> <span class="token punctuation">{</span>\n   <span class="token property">columns</span><span class="token punctuation">:</span> 2<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>效果如图 6-1 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-04-01-00-09-57-1f07a04bf06f0a8572aa44cef2ee533b-a36d1.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 604px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 68.87417218543047%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB9ElEQVQoz6WRW4+aQBzF+f7foe17k6bbNF2ji/Wy4q3tKgLLLkqFGWa4XwXlIto/NWnaGJ96HiYzwxzO/M4wpmWFrvXu7ZsnfrXg+a2un8/n0+l0/kuX5W63C8PQti1Zljeb9ZLnmTTLDvuM53nDIKZl+r5f1/84/6goijzPkzgmhmGCbIshhCRhNJvOFFWVBIHjxrwgVMf6OjlJEt/3XNeZjKZzbs6LIpMXRZkXGGHbdeFHBqXZPqvr+jq5+q1dHG+3GtKQadsMQihN0/VaabXuuemMmuYt5iiOPc+lBD+wnXaPXUkSU5ZlVZaB7wEJJiSMomvzRcdGVZbuNE1X1hvLcZrkfZYKK0AQl6JkGMbN5CjyPN+kePB1wA0moiwz0CEke56DdF3HOAjDW8kADNFRGGiatlFVuCaDMd4f9qr6ulgunl9eCL3JHMcJdB0E7rMk9h9HsqIwB9A+/blVgVlDyPW8W8lNO1VpmURq6AhCGJhxEgfLp++CKKxkmVAC5+CpwH8ZLxPYDMMIHhmj7eNwOP/243WtMOf/UGO2bNt23PyQN+VVR+iMWrDnUNMKwshxPd8PPD+g1IKpQShcAb7D2JjZbr/VZhHGgA+HOmzvge2PuOnd5/vhaDyZzkeTWbc3/PjpCyzff7gbT2btTnfJC78A77gIHRn20q0AAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 04 01 00 09 57" title="" data-src="/static/2022-04-01-00-09-57-1f07a04bf06f0a8572aa44cef2ee533b-a36d1.png" data-srcset="/static/2022-04-01-00-09-57-1f07a04bf06f0a8572aa44cef2ee533b-765e7.png 200w,\n/static/2022-04-01-00-09-57-1f07a04bf06f0a8572aa44cef2ee533b-c9f48.png 400w,\n/static/2022-04-01-00-09-57-1f07a04bf06f0a8572aa44cef2ee533b-a36d1.png 604w" data-sizes="(max-width: 604px) 100vw, 604px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/1x8rly?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>相比其他布局方法，分栏布局最大的优点是不会改变元素原本的 display 计算值。例如，在默认状态下，<code class="language-text">&lt;li&gt;</code> 元素会出现项目符号，如圆点或数字序号。此时，如果对 <code class="language-text">&lt;li&gt;</code> 元素使用弹性布局或网格布局，则项目符号就会消失，因为 display: flex 或 display: grid 会重置 <code class="language-text">&lt;li&gt;</code> 元素内置的 display: list-item 声明。</p>\n<p>我通过以上内容带大家初步了解了分栏布局的特性和使用方法，接下来，我们开始详细了解与分栏布局相关的 CSS 属性。与分栏布局相关的 CSS 属性共有以下 10 个：</p>\n<ul>\n<li>columns</li>\n<li>column-width</li>\n<li>column-count</li>\n<li>column-rule</li>\n<li>column-rule-color</li>\n<li>column-rule-style</li>\n<li>column-rule-width</li>\n<li>column-span</li>\n<li>column-fill</li>\n<li>column-gap</li>\n</ul>\n<p>虽然这 10 个 CSS 属性都有各自的作用，但是在实用程度上却有明显的差异。根据我的开发经验，超过 80% 的分栏布局只需要使用 columns 属性就足够，因此，大家的学习重心可以放在 columns 属性上，column-gap 属性有时候也会用到，所以也可以关注下，至于剩下的属性，大家了解一下基本作用即可。</p>\n<h2 id="重点关注-columns-属性"><a href="#%E9%87%8D%E7%82%B9%E5%85%B3%E6%B3%A8-columns-%E5%B1%9E%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>重点关注 columns 属性</h2>\n<p>columns 属性是 column-width 和 column-count 属性的缩写，举几个使用 columns 属性的例子：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="62051846196570630000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/*栏目宽度*/\ncolumns: 18em;\n\n/*栏目数目*/\ncolumns: auto;\ncolumns: 2;\n\n/*同时定义宽度和数目，顺序任意*/\ncolumns: 2 auto;\ncolumns: auto 2;\ncolumns: auto 12em;\ncolumns: auto auto;`, `62051846196570630000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/*栏目宽度*/</span>\n<span class="token property">columns</span><span class="token punctuation">:</span> 18em<span class="token punctuation">;</span>\n\n<span class="token comment">/*栏目数目*/</span>\n<span class="token property">columns</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>\n<span class="token property">columns</span><span class="token punctuation">:</span> 2<span class="token punctuation">;</span>\n\n<span class="token comment">/*同时定义宽度和数目，顺序任意*/</span>\n<span class="token property">columns</span><span class="token punctuation">:</span> 2 auto<span class="token punctuation">;</span>\n<span class="token property">columns</span><span class="token punctuation">:</span> auto 2<span class="token punctuation">;</span>\n<span class="token property">columns</span><span class="token punctuation">:</span> auto 12em<span class="token punctuation">;</span>\n<span class="token property">columns</span><span class="token punctuation">:</span> auto auto<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="关于-column-width"><a href="#%E5%85%B3%E4%BA%8E-column-width" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>关于 column-width</h3>\n<p>column-width 表示每一栏/列的最佳宽度，注意，是“最佳宽度”，实际渲染宽度多半和指定的宽度是有出入的，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="14896617011063329000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.container {\n   width: 300px;\n   column-width: 200px;\n}`, `14896617011063329000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.container</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>\n   <span class="token property">column-width</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>这里容器宽度为 300px，设定每一栏的宽度是 200px，不足以分栏，此时容器里面的内容会无视 column-width: 200px 声明，并按照容器的 300px 宽度排版。又如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="12198766459498267000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.container {\n   width: 200px;\n   column-width: 300px;\n}`, `12198766459498267000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.container</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>\n   <span class="token property">column-width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>这里容器宽度为 200px，设定的每一栏宽度是 300px，比容器宽度还要宽，此时容器里面的内容会无视 column-width: 300px 声明，并按照容器的 200px 宽度排版。</p>\n<p>那么，什么情况下 column-width 设置的宽度值和实际渲染的宽度值一致呢？这个问题的答案可能会出乎大家的意料：几乎不存在分栏布局的栏目宽度就是 column-width 设置的宽度这样的场景。</p>\n<p>因为 column-width 和传统的 width 属性不同，column-width 更像是一个期望尺寸，浏览器会根据这个期望尺寸确定分栏数目，一旦分栏数目确定了，column-width 属性的使命也就完成了，接下来根据分栏数目对容器进行的分栏布局就和 column-width 属性没有任何关系了。</p>\n<p>没错，column-width 属性在分栏布局中就是一个工具属性。而且 column-width 相比 width 属性在语法上还有很多限制，例如 column-width 不支持百分比值，即下面的语句是不合法的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="68598971157206300000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 不合法 */\ncolumn-width: 30%;`, `68598971157206300000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 不合法 */</span>\n<span class="token property">column-width</span><span class="token punctuation">:</span> 30%<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<h3 id="关于-column-count"><a href="#%E5%85%B3%E4%BA%8E-column-count" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>关于 column-count</h3>\n<p>column-count 表示理想的分栏数目，又出现了很微妙的词——“理想的”，也就是意味着最终的分栏数目可能不受 column-count 属性值的控制。</p>\n<p>没错，在分栏布局中，最终分栏的数量是由 column-count 与 column-width 属性共同决定的，不对，不能称为“共同决定”，应该叫作“互相制约”。也就是说，在分栏布局中，最终分栏的数量要么由 column-count 属性决定，要么由 column-width 属性决定，这两个 CSS 属性都可能有更高的决定权，至于哪个 CSS 属性的决定权更高，是要看具体场景的。</p>\n<p>决定权优先级的计算诀窍可以用一句话概括：统一转换 column-count 值，哪个值小就使用哪一个。例如，下面的 CSS 代码：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="52628363941182800000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.container-1 {\n   width: 360px;\n   column-count: 2;\n   column-width: 100px;\n}\n\n.container-2 {\n   width: 360px;\n   column-count: 4;\n   column-width: 100px;\n}`, `52628363941182800000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.container-1</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 360px<span class="token punctuation">;</span>\n   <span class="token property">column-count</span><span class="token punctuation">:</span> 2<span class="token punctuation">;</span>\n   <span class="token property">column-width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.container-2</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 360px<span class="token punctuation">;</span>\n   <span class="token property">column-count</span><span class="token punctuation">:</span> 4<span class="token punctuation">;</span>\n   <span class="token property">column-width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>其中 .container-1 是 2 栏显示，而 .container-2 是 3 栏显示。效果如图 6-2 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-07-26-11-12-13-77acee6349703bf3fb578bb5e7445d84-19c9a.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 343px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 81.63265306122447%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsSAAALEgHS3X78AAADAklEQVQ4y21UbU/TUBTmV+oHcfGzXyQkSvwZJn4ykphAQKISBASmRBMgiBJR2Nhbu6577dq127q263sfz73tAhhv8uzcc3rOued1c6Dzdn0dufkHWHr2FIsLC3iUy0GW6uAnjlOK5C6Sfyj7pfscuxyf/cTL5TdYebeJ5bUNvHj1Gi3NQEjf7AiwwgRTspniBi7BiVPKdNw4dTrHXtDo0idrgzAkJYMUOpYLSTehTAPOyyMb1b6BiqKjphoodVU0TQeCOkTXCdH00ix4hIoboiHLKBWuIFarECplSEINpWIRjbqEJIoxHJCDRgP9XhdyXUSdvndaLdRKJQz6CgYRzzl12HUCVMQ6NygWCqiSw3K5AkkU0Wi2MBqNoZHR5eUlqvSg2ldh2zY814U7dTB1HCj+LMIkxiSrS5hRFr3hBhg4HgwvpHvIec12oRJGfgyTlK04xYSg+rMa0ilQahsfNrG7n8f23j4+bH2ETlExlYCKTT3hYFkxBEkq928h7UmW8srqKu7NP8Ti0nM8frKA+/M5lAWRv8gNkswJwSOe0TDLaCbLmpw6ZOG2LQ/dyRQ924Pi+BhQWgxdkmtehD51W6Fas0lQ6d4h3fbYRp/pBjQlt1NW6ZmuovDCG5qKTruFqW3Bp4KXr4voEd9sNiFQQ9ig62ofbZoKqVaBZZrckXLbYc+NIMgtSJIEsV5HqVKBqg/hBwFqgpBCaqDT61FqCSzqapYhPxHJ7kTI5lCgmok0Lg1y+PvXOawJvRxHtIISZFHgI6Uyh2Hwn1W802WqnxujTBsg6WPIQwvFlsI3hNWTbYKojSAbJqqKhhZtB6sjq69OpWLQyFnTTW4GO8p208vAeD/DrJv+bGRu6XmZnZuNFI9Qoak3xyatV8RTDH0fE+LN8RhDw4A+0Dm1LYtviEG8oeuYUDNsawKH5A5tzZj0B7qBuf38IQ6+fMXFnysSmlx4fHqGo5NT7O7lsU7/QFs7e7gsXGNt4z12SLb96QB5svl8+A0/zi9wSv9WRyffuewvYU2qokduerAAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 07 26 11 12 13" title="" data-src="/static/2022-07-26-11-12-13-77acee6349703bf3fb578bb5e7445d84-19c9a.png" data-srcset="/static/2022-07-26-11-12-13-77acee6349703bf3fb578bb5e7445d84-11dc8.png 200w,\n/static/2022-07-26-11-12-13-77acee6349703bf3fb578bb5e7445d84-19c9a.png 343w" data-sizes="(max-width: 343px) 100vw, 343px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>具体解析过程如下。</p>\n<ol>\n<li>.container-1 元素宽度为 360px，因此 column-width: 100px 换算成 column-count 的值是 3.6，而.container-1 元素已经设定了 column-count: 2，遵循“哪个值小哪个优先级高”的规则，最终 .container-1 元素的内容分成了 2 栏。</li>\n<li>.container-2 元素设置的是 column-count: 4，比 column-width: 100px 换算成的 column-count 值大，因此，最终 .container-2 元素的内容分成了 3 栏（3.6 栏向下取整）。</li>\n</ol>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/5kznl4?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>另外，从图 6-2 所示的 .container-2 的效果可以看出，分栏布局的每一栏的高度并不总是相等的，内容的分割也不总是均匀的，浏览器有一套自己的算法。</p>\n<h2 id="column-gap-和-gap-属性的关系"><a href="#column-gap-%E5%92%8C-gap-%E5%B1%9E%E6%80%A7%E7%9A%84%E5%85%B3%E7%B3%BB" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>column-gap 和 gap 属性的关系</h2>\n<p>column-gap 属性表示每一栏之间的空白间隙的大小，可以是长度值，也可以是百分比值，语法示意如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="73601937677345220000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 关键字属性值 */\ncolumn-gap: normal;\n\n/* 长度值 */\ncolumn-gap: 3px;\ncolumn-gap: 3em;\n\n/* 百分比值 */\ncolumn-gap: 3%;`, `73601937677345220000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 关键字属性值 */</span>\n<span class="token property">column-gap</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>\n\n<span class="token comment">/* 长度值 */</span>\n<span class="token property">column-gap</span><span class="token punctuation">:</span> 3px<span class="token punctuation">;</span>\n<span class="token property">column-gap</span><span class="token punctuation">:</span> 3em<span class="token punctuation">;</span>\n\n<span class="token comment">/* 百分比值 */</span>\n<span class="token property">column-gap</span><span class="token punctuation">:</span> 3%<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>column-gap 属性本身没什么好说的，但是 column-gap 属性和 gap 属性之间的关系值得一提。实际上，在分栏布局中，如果不考虑 IE 浏览器，我们可以直接使用 gap 属性设置分栏间隙大小，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="32014737999809670000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.container {\n   columns: 2;\n   gap: 1rem;\n}`, `32014737999809670000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.container</span> <span class="token punctuation">{</span>\n   <span class="token property">columns</span><span class="token punctuation">:</span> 2<span class="token punctuation">;</span>\n   <span class="token property">gap</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>至于原因，用一句话解释就是：column-gap 是 gap 属性的子属性。</p>\n<p>在网格布局规范制定之后的一段时间，CSS 世界中的行与列之间的间隙使用了 gap 属性进行了统一，也就是分栏布局、弹性布局和网格布局的间隙都全部统一使用 gap 属性表示，而 gap 属性实际上是 column-gap 属性和 row-gap 属性的缩写。</p>\n<h2 id="了解-column-rule、column-span-和-column-fill-属性"><a href="#%E4%BA%86%E8%A7%A3-column-rule%E3%80%81column-span-%E5%92%8C-column-fill-%E5%B1%9E%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>了解 column-rule、column-span 和 column-fill 属性</h2>\n<p>本节介绍的 3 个分栏布局属性都有各自独特的作用，平常不太用得到，多出现在对分栏布局效果要求更高的场景中。</p>\n<h3 id="了解-column-rule-属性"><a href="#%E4%BA%86%E8%A7%A3-column-rule-%E5%B1%9E%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>了解 column-rule 属性</h3>\n<p>column-rule 属性是 column-rule-width、column-rule-style 和 column-rule-color 这 3 个 CSS 属性的缩写，正如 border 是 border-style、border-width 和 border-color 的缩写一样。</p>\n<p>column-rule 属性和 border 属性的语法和规则是一模一样的，只是 column-rule 是设置各个分栏的分隔线样式，border 是设置元素的边框样式。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="54262779326455270000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.container {\n   width: 320px;\n   border: solid deepskyblue;\n   padding: 10px;\n   column-count: 2;\n   column-rule: dashed deepskyblue;\n}`, `54262779326455270000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.container</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 320px<span class="token punctuation">;</span>\n   <span class="token property">border</span><span class="token punctuation">:</span> solid deepskyblue<span class="token punctuation">;</span>\n   <span class="token property">padding</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>\n   <span class="token property">column-count</span><span class="token punctuation">:</span> 2<span class="token punctuation">;</span>\n   <span class="token property">column-rule</span><span class="token punctuation">:</span> dashed deepskyblue<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>效果如图 6-3 所示，2 栏文字内容的中间出现了 3px 宽的虚线分隔线。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-07-26-11-25-30-2b0de3ab0d68d071231b02c8e90b7e67-b4e45.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 32.16957605985037%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsSAAALEgHS3X78AAABT0lEQVQY002QzZLaMBCEef9nySmHrco1h6Rq4wBbwDoLGBtkA/7H9mZly0hfBieHTKmrNTM9PSrNPheWdTvy8zayaEbmgh+F5rnUUjOs3h3zzvHcWJbSW7b3CYuJLXPRPGZXjeFTZpmtbgPtRXGNFV1VkiWKzWLOi+dxVYpHGAdRUXONDqRJTJ1eJq7SM9fTkfgY0pcpL50YetVAek6IVExWVpyShHOasQ9D8qqeDJs7/Mobtm8+X799Z+2/4j2WrjfowWCsm3Re65gtq578FBIFe/LLBRWF0/bjYUcY7HBDjxZ91luwRs4AoxH8Yyx/w8kLxfBLeSdoNJtas+1G3pqBbWvwJfdvmsOHZdeDr0GNcBSP03+IpLf/cMS946kUw0KKpQhrWaRazfm3Ie766Z4NllTfiaqOIK/Z5zfC+p2gaCbsJI87TSHzuXz0A38A2X/CspI62McAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 07 26 11 25 30" title="" data-src="/static/2022-07-26-11-25-30-2b0de3ab0d68d071231b02c8e90b7e67-fee1c.png" data-srcset="/static/2022-07-26-11-25-30-2b0de3ab0d68d071231b02c8e90b7e67-a67b7.png 200w,\n/static/2022-07-26-11-25-30-2b0de3ab0d68d071231b02c8e90b7e67-0b187.png 400w,\n/static/2022-07-26-11-25-30-2b0de3ab0d68d071231b02c8e90b7e67-fee1c.png 800w,\n/static/2022-07-26-11-25-30-2b0de3ab0d68d071231b02c8e90b7e67-b4e45.png 802w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/quonzj?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<h3 id="了解-column-span-属性"><a href="#%E4%BA%86%E8%A7%A3-column-span-%E5%B1%9E%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>了解 column-span 属性</h3>\n<p>column-span 属性有点类似表格布局中的 HTML 属性 colspan，表示某一个内容是否跨多栏显示。这个 CSS 属性是作用在分栏布局的子元素上的。语法如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="63800840795271350000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`column-span: none;\ncolumn-span: all;`, `63800840795271350000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">column-span</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>\n<span class="token property">column-span</span><span class="token punctuation">:</span> all<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>先讲一下这一语法中的几个关键点。</p>\n<ul>\n<li>none 表示不横跨多栏，默认值。</li>\n<li>all 表示横跨所有垂直列。</li>\n</ul>\n<p>我们一起来看一个例子，就知道这个属性是做什么的了，HTML 和 CSS 代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="56527453215614660000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<div class=&quot;container&quot;>\n   <p>第1段</p>\n   <p>第2段</p>\n   <p>第3段</p>\n   <p class=&quot;span-all&quot;>第4段</p>\n   <p>第5段</p>\n</div>\n<style>\n   .container {\n      width: 320px;\n      border: solid deepskyblue;\n      padding: 10px;\n      column-count: 3;\n   }\n\n   .container p {\n      background: deepskyblue;\n   }\n\n   .span-all {\n      column-span: all;\n      color: white;\n   }\n</style>`, `56527453215614660000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html{21}"\n              >\n                <span class="gatsby-code-button-language">html{21}</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight has-highlighted-lines" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>第1段<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>第2段<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>第3段<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>span-all<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>第4段<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>第5段<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n   <span class="token selector">.container</span> <span class="token punctuation">{</span>\n      <span class="token property">width</span><span class="token punctuation">:</span> 320px<span class="token punctuation">;</span>\n      <span class="token property">border</span><span class="token punctuation">:</span> solid deepskyblue<span class="token punctuation">;</span>\n      <span class="token property">padding</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>\n      <span class="token property">column-count</span><span class="token punctuation">:</span> 3<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">.container p</span> <span class="token punctuation">{</span>\n      <span class="token property">background</span><span class="token punctuation">:</span> deepskyblue<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">.span-all</span> <span class="token punctuation">{</span>\n<span class="gatsby-highlight-code-line">      <span class="token property">column-span</span><span class="token punctuation">:</span> all<span class="token punctuation">;</span></span>      <span class="token property">color</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>结果如图 6-4 所示，对比图中左侧的默认效果，可以看到，设置了 column-span: all 的“第 4 段”文字所在的 <code class="language-text">&lt;p&gt;</code> 元素几乎贯穿了整个容器元素。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-07-26-11-31-15-b7a07c776a06bfadcc5a6d43bc4ed636-96dff.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 494px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 33.198380566801625%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsSAAALEgHS3X78AAABpElEQVQoz0WRS2sUQRSF+/cprly49Ae4VFAi4saFIBJcKBIU4kqycBFkfKCQxKikM5knYyeaTMzQnR4zQ08/0tOP6a76vD0Z9MCpW7eKezinyohLTaZhnCusqODHVHOYaHphTjNStGNwpzP2nT+cDM/o2y6Wn1IPS/bkzopLmsGM3UhzILPG8q+Q5VN446Zc33G51C15MFA8tsbc2M+4faz5mcKrvs+jQcGqB2/tkDtWxP1+QW045aHlcfe35vWZwrhmjrlqwaqT8+TAY+m4ZG0klhcotcaWCC8dET8quHlYsCKin7o2660BL0awMtQ8dxUfJuLwy6RgKxC7EtMrJPpMMxK62QWdRX3mam71FfdONEvi7ooZcLmneXqq2PAV7zzNTiiC/6yg0fMV1H+Dc+TSf/ShNoGNCDpBzvvRjJqcDVJNISkyGfLEiKGkqVjhPI5J0wylFHmW4wcB0yQhTVJUIj+QxvOaxueQJfO+QiVYPY0WGnqxqWDWG+w2WgRhhG07bG5/o93t0Wx3qbc6fDX32Ppu8nlzm2anh9loL9JcaFT8C5r2AZjVQq/MAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 07 26 11 31 15" title="" data-src="/static/2022-07-26-11-31-15-b7a07c776a06bfadcc5a6d43bc4ed636-96dff.png" data-srcset="/static/2022-07-26-11-31-15-b7a07c776a06bfadcc5a6d43bc4ed636-1a6e9.png 200w,\n/static/2022-07-26-11-31-15-b7a07c776a06bfadcc5a6d43bc4ed636-b9533.png 400w,\n/static/2022-07-26-11-31-15-b7a07c776a06bfadcc5a6d43bc4ed636-96dff.png 494w" data-sizes="(max-width: 494px) 100vw, 494px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/n7x8y0?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>图 6-4 所示的“第 1 段”内容之所以偏下，是因为第一个 <code class="language-text">&lt;p&gt;</code> 元素默认的 margin-top 无法参与分栏计算。</p>\n<p>想要在分栏布局中插入广告，可以使用 column-span: all 声明。</p>\n<h3 id="了解-column-fill-属性"><a href="#%E4%BA%86%E8%A7%A3-column-fill-%E5%B1%9E%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>了解 column-fill 属性</h3>\n<p>column-fill 的作用是当内容分栏的时候平衡每一栏填充的内容。语法如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="49916440500286650000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`column-fill: auto;\ncolumn-fill: balance;\ncolumn-fill: balance-all;`, `49916440500286650000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">column-fill</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>\n<span class="token property">column-fill</span><span class="token punctuation">:</span> balance<span class="token punctuation">;</span>\n<span class="token property">column-fill</span><span class="token punctuation">:</span> balance-all<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>先讲一下这一语法中的几个关键点。</p>\n<ul>\n<li>auto 的作用是按顺序填充每一列，内容只占用它需要的空间。</li>\n<li>balance 是默认值，作用是尽可能在列之间平衡内容。在分隔断开的上下文中，只有最后一个片段是平衡的。例如，有多个 <code class="language-text">&lt;p&gt;</code> 元素，正好最后一个 <code class="language-text">&lt;p&gt;</code> 换行了，那这个 <code class="language-text">&lt;p&gt;</code> 元素的内容前后等分，保持平衡。这会造成最后一栏内容较少的问题。</li>\n<li>balance-all 的作用是尽可能在列之间平衡内容。在分隔断开的上下文中，所有片段都是平衡的。该属性值目前没有任何浏览器支持，可以忽略。</li>\n</ul>\n<p>我们测试一下各个属性值的渲染表现，假设代码如下（这里给容器设置了 80px 的高度）</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="28089698048398670000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<style>\n   .container {\n      width: 300px;\n      height: 80px;\n      border: solid deepskyblue;\n      padding: 10px;\n      column-count: 2;\n   }\n</style>\n<div class=&quot;container&quot; style=&quot;column-fil: auto&quot;>内容略</div>\n<div class=&quot;container&quot; style=&quot;column-fill: balance&quot;>内容略</div>\n<div class=&quot;container&quot; style=&quot;column-fill: balance-all&quot;>内容略</div>`, `28089698048398670000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n   <span class="token selector">.container</span> <span class="token punctuation">{</span>\n      <span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>\n      <span class="token property">height</span><span class="token punctuation">:</span> 80px<span class="token punctuation">;</span>\n      <span class="token property">border</span><span class="token punctuation">:</span> solid deepskyblue<span class="token punctuation">;</span>\n      <span class="token property">padding</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>\n      <span class="token property">column-count</span><span class="token punctuation">:</span> 2<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">column-fil</span><span class="token punctuation">:</span> auto</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>内容略<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">column-fill</span><span class="token punctuation">:</span> balance</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>内容略<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">column-fill</span><span class="token punctuation">:</span> balance-all</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>内容略<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>最后的渲染效果如图 6-5 所示，可以看到容器元素应用 column-fill: auto 声明的时候，里面的文字内容会优先填充第一列，而不是尽可能让两列内容平衡。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-07-26-11-39-05-dfed5a597971bf1f289e4330c94f93aa-d5813.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 443px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 76.2979683972912%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsSAAALEgHS3X78AAACQUlEQVQ4y5VTS2/TQBDOv0biwAUEoipwQ70hVMGFRy+oag990lAIaZqQOk0TN4nzcB5OYq9jx69df8y6dRQqqsBKo5nV7nw7832zGdyuOI4hhEjirU8f8OjhAzx/+hhrz57AGBtY3FvyMgdLXq7MMiAkKMVDy0a724XaaKLb78PnAmPTQkfXMZpM0RsMYDAnTVwNOJqaUAo5KMUzqFUFbDqGY1swBjpEFCKOAjhBCBHf1Ho/IC1BfsZjGCbDZOYkiT4duZHAnF5zQg4n4jD9aHXLKYen2RNsvn2Drc8f8f7dJg4P9haPSeOxIC8WefcCpgfFX2Vsb3/Bzu5OYuWLMvwwhGnbcDwPHsUe8bpaFMjXAeZ66GoNtK5VDPu6ZAkj4q9cLEBrNqB3NExn7o3i8QoOueQwiGBZJkxmwZ7ZmPs+GFU3HA4Rco6AhGFesFqU9KBFI1OqVFCp1aFc1VBSFBgWQ0RnLonikihzsn8WZZd4e7G+ho2N14m9ermOymUlGSnJX0D8hSL+Dw7nPkbDAdqtFsa3v8Sm9pvEX6/XRV/vwaI7f+UwbTUFlFWMqT1NvUKv3SJxmmDmBCYBaw0VMwJ2mAnLnSd3sZQvLYM7f5JT2zYNrRNGC67kcLtyT/x51KocdCcSf1S2qJCTand5SJcc4oj44kJ6njwm9wGBy33KO1+KM0fHJ6RiFWP69IwxlMoKqjUVdfUahfMS6k0NWruDvYNj5PLnOPz6DflCET9+niH7PZfYaS6PC+US+0dZ/AbDn3j4HhQ1AgAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 07 26 11 39 05" title="" data-src="/static/2022-07-26-11-39-05-dfed5a597971bf1f289e4330c94f93aa-d5813.png" data-srcset="/static/2022-07-26-11-39-05-dfed5a597971bf1f289e4330c94f93aa-bf07a.png 200w,\n/static/2022-07-26-11-39-05-dfed5a597971bf1f289e4330c94f93aa-250cd.png 400w,\n/static/2022-07-26-11-39-05-dfed5a597971bf1f289e4330c94f93aa-d5813.png 443w" data-sizes="(max-width: 443px) 100vw, 443px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/uickhu?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>经过仔细地对比测试可以发现以下几点。</p>\n<ol>\n<li>所有浏览器都能识别 column-fill: auto，但是，需要容器有固定的高度才能准确渲染。如果容器没有设置具体的高度值，则仅在 Firefox 浏览器中有比较符合预期的渲染。因此，在实际开发的时候，column-fill: auto 声明的使用一定要配合容器元素的 height 属性。</li>\n<li>所有浏览器都不能识别 column-fill: balance-all，我在 W3C 官方的规范文档 CSS Multi-column layout Module level1 中也没有找到任何的示例，因此，column-fill: balance-all 声明大家可以忽略。</li>\n</ol>\n<h2 id="分栏布局实现两端对齐布局"><a href="#%E5%88%86%E6%A0%8F%E5%B8%83%E5%B1%80%E5%AE%9E%E7%8E%B0%E4%B8%A4%E7%AB%AF%E5%AF%B9%E9%BD%90%E5%B8%83%E5%B1%80" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>分栏布局实现两端对齐布局</h2>\n<p>分栏布局非常适合实现单行的两端对齐布局效果，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="8173402310820732000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<div class=&quot;container&quot;>\n   <div class=&quot;list&quot;></div>\n   <div class=&quot;list&quot;></div>\n   <div class=&quot;list&quot;></div>\n</div>\n<style>\n   .container {\n      width: 300px;\n      border: solid deepskyblue;\n      column-count: 3;\n      column-gap: 5%;\n   }\n\n   .list {\n      height: 100px;\n      background-color: deeppink;\n   }\n</style>`, `8173402310820732000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>list<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>list<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>list<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n   <span class="token selector">.container</span> <span class="token punctuation">{</span>\n      <span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>\n      <span class="token property">border</span><span class="token punctuation">:</span> solid deepskyblue<span class="token punctuation">;</span>\n      <span class="token property">column-count</span><span class="token punctuation">:</span> 3<span class="token punctuation">;</span>\n      <span class="token property">column-gap</span><span class="token punctuation">:</span> 5%<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">.list</span> <span class="token punctuation">{</span>\n      <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>\n      <span class="token property">background-color</span><span class="token punctuation">:</span> deeppink<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>不需要改变元素的 display 属性，也不需要定位，只需要设置好 column-count 属性的值，然后使用 column-gap 属性设置想要的间隙就好了，这个时候，列表元素就会自动两端对齐，效果如图 6-6 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-09-05-14-05-01-d2af84af248255bf5037020c0d3b734c-d55d3.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 41.935483870967744%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAAB2ElEQVQoz12QzUtUYRSH7zKLksaysmzaRX9AUQR9mH1/gWLUroWbVhItWzdqTeYEuimiUNLJ1CYhgiIU0Yi5ENM0d3CCSmnR2B1n5kqYzrw9nfe+08bFw33vOfe857k/a+TmexLNo8SvjGFrLsWwr77C/pzHbnuH3fzC1DVNcr4xjp3xsC+/rDDmzyZaYjy9PomVOB6Fqluw6Q4EbsOGDqjvhk8/Ye8DWBuCGqnXSH+NfHfwEWRc2Nhp0DO6v76d+P4+rPjFEagNU9p1HxWMoLbfQ+3pRSWzqMNPUFvumnpQ+pvDqMZ+VCaHqo8YdkYoSZ+6LqYaBrHs88P+dt1kh5ht7YLdPWKYhUOPxTxsjDUBsWzoE8McyGIfmVF6ThZPHxmQCy+IoWwuaQPZpupWGdb+N4ysMuw2yExZYJsYHhXDjyefwbqQf6mfY7XkEpSNCclw30PptZu6pipkMpxxTXaBSrb6L6o7+HCgHyvWNkHm2ADJM0OkBOeUPJtGcVIFUq2vSTVGcc4Nk5Zo0nJOX3uD82WR9NnnOIKeSZ4eYubEINHWt1iegoJQBH79WeGH95vs0jJzCx7z8u6ulP3at1yB7/kiX908s/q8UGSu4OEulyn+rdwh/ANh79Zjao3KegAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 09 05 14 05 01" title="" data-src="/static/2022-09-05-14-05-01-d2af84af248255bf5037020c0d3b734c-fee1c.png" data-srcset="/static/2022-09-05-14-05-01-d2af84af248255bf5037020c0d3b734c-a67b7.png 200w,\n/static/2022-09-05-14-05-01-d2af84af248255bf5037020c0d3b734c-0b187.png 400w,\n/static/2022-09-05-14-05-01-d2af84af248255bf5037020c0d3b734c-fee1c.png 800w,\n/static/2022-09-05-14-05-01-d2af84af248255bf5037020c0d3b734c-d55d3.png 806w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/lg1096?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>// TODO CSS 新世界全新的布局方式待完成</p>',
excerpt:"之前，CSS 世界中除受限诸多的表格布局之外是没有专门的布局属性的，随着 Web 应用越来越复杂，显示设备越来越多样，原有的 CSS 特性已经无法满足现代 Web 开发需求了。于是，CSS 定义了很多全新的布局方式，这些新的布局 CSS…",frontmatter:{date:"2022-09-05 14:17:23",path:"/css-new-world-new-layout/",tags:"前端, CSS, CSS新世界, 读书笔记",title:"CSS新世界全新的布局方式",draft:null}},prePost:{html:'<h1 id="源码结构"><a href="#%E6%BA%90%E7%A0%81%E7%BB%93%E6%9E%84" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>源码结构</h1>\n<p>重点介绍标红行的内容</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="99499424119227740000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`\\$ cd Python-3.7.4\n\\$ tree -L 1\n.\n├── CODE_OF_CONDUCT.rst\n├── Doc # 文档相关\n├── Grammar # 语法规则\n├── Include # 头文件\n├── LICENSE\n├── Lib # 标准库\n├── Mac\n├── Makefile.pre.in\n├── Misc\n├── Modules\n├── Objects # 内建对象实现\n├── PC\n├── PCbuild\n├── Parser # 语法分析相关\n├── Programs\n├── Python # 虚拟机执行相关\n├── README.rst\n├── Tools\n├── aclocal.m4\n├── config.guess\n├── config.sub\n├── configure\n├── configure.ac\n├── install-sh\n├── m4\n├── pyconfig.h.in\n└── setup.py`, `99499424119227740000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash{7,14,19}"\n              >\n                <span class="gatsby-code-button-language">bash{7,14,19}</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight has-highlighted-lines" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">$ <span class="token builtin class-name">cd</span> Python-3.7.4\n$ tree -L <span class="token number">1</span>\n<span class="token builtin class-name">.</span>\n├── CODE_OF_CONDUCT.rst\n├── Doc <span class="token comment"># 文档相关</span>\n├── Grammar <span class="token comment"># 语法规则</span>\n<span class="gatsby-highlight-code-line">├── Include <span class="token comment"># 头文件</span></span>├── LICENSE\n├── Lib <span class="token comment"># 标准库</span>\n├── Mac\n├── Makefile.pre.in\n├── Misc\n├── Modules\n<span class="gatsby-highlight-code-line">├── Objects <span class="token comment"># 内建对象实现</span></span>├── PC\n├── PCbuild\n├── Parser <span class="token comment"># 语法分析相关</span>\n├── Programs\n<span class="gatsby-highlight-code-line">├── Python <span class="token comment"># 虚拟机执行相关</span></span>├── README.rst\n├── Tools\n├── aclocal.m4\n├── config.guess\n├── config.sub\n├── configure\n├── configure.ac\n├── install-sh\n├── m4\n├── pyconfig.h.in\n└── setup.py</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h1 id="对象模型"><a href="#%E5%AF%B9%E8%B1%A1%E6%A8%A1%E5%9E%8B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>对象模型</h1>\n<h2 id="概述"><a href="#%E6%A6%82%E8%BF%B0" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>概述</h2>\n<p>Python 是一门面向对象语言，实现了一个完整的面向对象体系，简洁而优雅。</p>\n<h3 id="一切皆对象"><a href="#%E4%B8%80%E5%88%87%E7%9A%86%E5%AF%B9%E8%B1%A1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>一切皆对象</h3>\n<p>首先，在 Python 世界，基本类型也是对象，与通常意义的“对象”形成一个有机统一。换句话讲，Python 不再区别对待基本类型和对象，所有基本类型内部均由对象实现。一个整数是一个对象，一个字符串也是一个对象：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="85618834098303550000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`>>> a = 1\n>>> b = \'abc\'`, `85618834098303550000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token operator">>></span><span class="token operator">></span> a <span class="token operator">=</span> <span class="token number">1</span>\n<span class="token operator">>></span><span class="token operator">></span> b <span class="token operator">=</span> <span class="token string">\'abc\'</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>其次，Python 中的类型也是一种对象，称为类型对象。整数类型是一个对象，字符串类型是一个对象，程序中通过 class 关键字定义的类也是一个对象。</p>\n<p>举个例子，整数类型在 Python 内部是一个对象，称为类型对象：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="34729721751990338000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`>>> int\n<class \'int\'>`, `34729721751990338000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token operator">>></span><span class="token operator">></span> int\n<span class="token operator">&lt;</span>class <span class="token string">\'int\'</span><span class="token operator">></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>通过整数类型实例化可以得到一个整数对象，称为实例对象：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="86972166548086110000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`>>> int(\'1024\')\n1024`, `86972166548086110000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token operator">>></span><span class="token operator">></span> int<span class="token punctuation">(</span><span class="token string">\'1024\'</span><span class="token punctuation">)</span>\n<span class="token number">1024</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>面向对象理论中的“类”和“对象”这两个基本概念，在 Python 内部都是通过对象实现的，这是 Python 最大的特点。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-09-26-14-06-58-cfca5e9f930b12991d1d8c14a4274a22-eca56.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 554px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 41.87725631768953%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAABP0lEQVQY022R207DMAyG+95c8RJcIyEkXmAIAUIDjZsVEEyo2lZYtR7XLV1b2qaJGyek7TSOVi5s2f5tfzGUUlJ+vb19c9sKgY2UuAt2jjLUH0OpBLY6frT2o7hg6McZ5RCR+fDh9MW+AcGE1FrS0FWUYQ2ScllD2zQPirtJuMq4v0rcKKk4BqSkXHjx6/X42LQGjWC7ye6mNu3UnJFHO3la5EUtKi5IziigG22X4VZ0OzYIiKJfm0Fpe+Y2D41pUN1b64uxc/vsj+dpWjY9hZ8nY3+n7BIFTc4uD63FyNCjnLj2CFtumBNTfe2eVl7WXkRkx6uq05C8kcxHKQTyf4Bp4UYoJ66uTGcaFN66sJcxAOiU3vPk/GAwOtLYdXMHvwP265/SEt7DLCkgSsrJzLVs94NWiMCAQtOiEgh95SeK+sak83RjOQAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 09 26 14 06 58" title="" data-src="/static/2022-09-26-14-06-58-cfca5e9f930b12991d1d8c14a4274a22-eca56.png" data-srcset="/static/2022-09-26-14-06-58-cfca5e9f930b12991d1d8c14a4274a22-77254.png 200w,\n/static/2022-09-26-14-06-58-cfca5e9f930b12991d1d8c14a4274a22-789d0.png 400w,\n/static/2022-09-26-14-06-58-cfca5e9f930b12991d1d8c14a4274a22-eca56.png 554w" data-sizes="(max-width: 554px) 100vw, 554px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h3 id="类型、对象体系"><a href="#%E7%B1%BB%E5%9E%8B%E3%80%81%E5%AF%B9%E8%B1%A1%E4%BD%93%E7%B3%BB" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>类型、对象体系</h3>\n<p>a 是一个整数对象（实例对象），其类型是整数类型（类型对象）：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="39626644444530390000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`>>> a = 1\n>>> type(a)\n<class \'int\'>\n>>> isinstance(a, int)\nTrue`, `39626644444530390000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token operator">>></span><span class="token operator">></span> a <span class="token operator">=</span> <span class="token number">1</span>\n<span class="token operator">>></span><span class="token operator">></span> type<span class="token punctuation">(</span>a<span class="token punctuation">)</span>\n<span class="token operator">&lt;</span>class <span class="token string">\'int\'</span><span class="token operator">></span>\n<span class="token operator">>></span><span class="token operator">></span> isinstance<span class="token punctuation">(</span>a, int<span class="token punctuation">)</span>\nTrue</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>那么整数类型的类型又是什么呢？</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="77973410565743180000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`>>> type(int)\n<class \'type\'>`, `77973410565743180000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token operator">>></span><span class="token operator">></span> type<span class="token punctuation">(</span>int<span class="token punctuation">)</span>\n<span class="token operator">&lt;</span>class <span class="token string">\'type\'</span><span class="token operator">></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>可以看到，整数类型的类型还是一种类型，即类型的类型。只是这个类型比较特殊，它的实例对象还是类型对象。</p>\n<p>Python 中还有一个特殊类型 object，所有其他类型均继承于 object，换句话讲 object 是所有类型的基类：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="95243758772781800000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`>>> issubclass(int, object)\nTrue`, `95243758772781800000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token operator">>></span><span class="token operator">></span> issubclass<span class="token punctuation">(</span>int, object<span class="token punctuation">)</span>\nTrue</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>综合以上关系，得到以下关系图：</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-09-26-14-27-03-d003b10d203dbb41db1f5dfa1040a0c0-88eb7.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 411px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 39.65936739659367%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABX0lEQVQoz5WQ20vCABTG9//3Ug8RRfSQhEEUFWmEJWQXTZrXbTWrLeduLltq0dX5a1MkU3rogw8OHM7vnPMJlmWTTqfJ5XK0Wi0m1TAMUqkU+Xyedrs91Q+CAEmSB/Pd7jNCRkmQVrY4lDbJSEm+vnrIsoyqqjz5PgeFGtuixvblHUnxhk4I1XWdcrnE69sHVvWIpriBW9jEFHcQktIq6xdzxEMnyrHwykds28bzPCqlImunCkundywcq8Tz+mCZaZq4rkPtVse8iNM8nkU7mMHLLiNcG2VUK3KJWkOaeumq7lDUbEqag1J3cRwHI4xhpI57SydkdM0qj/UqwiSg3+//8qSidyP7YRwD4Ms7Nd1CazRxHp4QolDHPQ6J6iD4cS/sjxTle39f56qQQT7bRcnuUc3uT1/4l0aLxpe+f/bw5QTuyTze+RK+uPY/4Ag0rIfXupUkZmYRJ7uCcR7jG2PNUfvdx+1RAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 09 26 14 27 03" title="" data-src="/static/2022-09-26-14-27-03-d003b10d203dbb41db1f5dfa1040a0c0-88eb7.png" data-srcset="/static/2022-09-26-14-27-03-d003b10d203dbb41db1f5dfa1040a0c0-e0906.png 200w,\n/static/2022-09-26-14-27-03-d003b10d203dbb41db1f5dfa1040a0c0-4c29a.png 400w,\n/static/2022-09-26-14-27-03-d003b10d203dbb41db1f5dfa1040a0c0-88eb7.png 411w" data-sizes="(max-width: 411px) 100vw, 411px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>内置类型已经搞清楚了，自定义类型及对象关系又如何呢？定义一个简单的类来实验：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="60414057138589100000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`class Dog(object):\n\n    def yelp(self):\n        print(\'woof\')`, `60414057138589100000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="py"\n              >\n                <span class="gatsby-code-button-language">py</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="py"><pre style="counter-reset: linenumber NaN" class="language-py line-numbers"><code class="language-py"><span class="token keyword">class</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>\n\n    <span class="token keyword">def</span> <span class="token function">yelp</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>\n        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">\'woof\'</span><span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>创建一个 Dog 实例，毫无疑问，其类型是 Dog：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="94522193637371530000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`>>> dog = Dog()\n>>> dog.yelp()\nwoof\n>>> type(dog)\n<class \'__main__.Dog\'>`, `94522193637371530000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token operator">>></span><span class="token operator">></span> dog <span class="token operator">=</span> Dog<span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token operator">>></span><span class="token operator">></span> dog.yelp<span class="token punctuation">(</span><span class="token punctuation">)</span>\nwoof\n<span class="token operator">>></span><span class="token operator">></span> type<span class="token punctuation">(</span>dog<span class="token punctuation">)</span>\n<span class="token operator">&lt;</span>class <span class="token string">\'__main__.Dog\'</span><span class="token operator">></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Dog 类的类型自然也是 type，其基类是 object (就算不显式继承也是如此)：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="64696857020465150000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`>>> type(Dog)\n<class \'type\'>\n>>> issubclass(Dog, object)\nTrue`, `64696857020465150000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token operator">>></span><span class="token operator">></span> type<span class="token punctuation">(</span>Dog<span class="token punctuation">)</span>\n<span class="token operator">&lt;</span>class <span class="token string">\'type\'</span><span class="token operator">></span>\n<span class="token operator">>></span><span class="token operator">></span> issubclass<span class="token punctuation">(</span>Dog, object<span class="token punctuation">)</span>\nTrue</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-09-26-14-31-23-001ef654f1c6a7054988e658d131dffa-6a9ea.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 413px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 50.847457627118644%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAACEUlEQVQoz3WS7U/TYBTF+//7xQ+IHyTxg+9ANAhEWEGYTDY69wYtVtaOrls327Vso5vt6NjPpzUahXiTm9z0pOfec84jDfwB8p5MsVSk/73P3bKsNru5nMBLjMfje/gsjtHUM0rFY+IoQioZMvv6OrL6hgNtg8lkShRHxLMZvueyUzd5W7VYL7fYbVgZ6UxgsSBKZ6e6yaDyGq+6inn0DKnQes96ZZlVZYkd9QWu6xEEAVfDIdpZgzXFYOWzyUrBYOPUQdM0ut0uYRiytbVF6/AJXmEZJ79EN7+M1L+ycUMbb9LBCax7krr+GCuYYF/9EHjIYrHIFg7FwtFoxDSwSYZt5uMOo34TaZGA1/OxjA7T6ygjub29zTqtRSKk9x1MXSOehtk313UxDCObe27A12abunqBP5wgNcwSn9QPHIk+OT/857qFIK2ZHT6eNpFrOlUxp94OBgPG19eYpomu7GB9EdLLm+jFTeHh5QbvGo9ZqwgPz5/T6/XxPA/fD6iUFba1Dq/qNi9FMPutAFVV6TlO5rGu69iFp1i5B8LHR1zKD5FqrWNKTZnjb7uc6AfM5/M/cpObG8pNm6OLLnm9TaXlZB7+tiVJEhwtT6++javmMBVx4d0QFvz6IX0SURTfCykNIiX6X0npxr87rRtxWa1Wy4x3nF52TYqkb1RRFGzbzlJO1YTCy9FoKJL3mU4n/AT3NN2N5kFDZwAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 09 26 14 31 23" title="" data-src="/static/2022-09-26-14-31-23-001ef654f1c6a7054988e658d131dffa-6a9ea.png" data-srcset="/static/2022-09-26-14-31-23-001ef654f1c6a7054988e658d131dffa-7efe1.png 200w,\n/static/2022-09-26-14-31-23-001ef654f1c6a7054988e658d131dffa-33ab6.png 400w,\n/static/2022-09-26-14-31-23-001ef654f1c6a7054988e658d131dffa-6a9ea.png 413w" data-sizes="(max-width: 413px) 100vw, 413px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>自定义子类及实例对象在图中又处于什么位置？定义一个猎犬类进行实验：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="85298813516730810000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`class Sleuth(Dog):\n\n    def hunt(self):\n        pass`, `85298813516730810000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="py"\n              >\n                <span class="gatsby-code-button-language">py</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="py"><pre style="counter-reset: linenumber NaN" class="language-py line-numbers"><code class="language-py"><span class="token keyword">class</span> <span class="token class-name">Sleuth</span><span class="token punctuation">(</span>Dog<span class="token punctuation">)</span><span class="token punctuation">:</span>\n\n    <span class="token keyword">def</span> <span class="token function">hunt</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>\n        <span class="token keyword">pass</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>可以看到，猎犬对象(sleuth)是猎犬类(Sleuth)的实例，Sleuth 的类型同样是 type：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="73934063917340430000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`>>> sleuth = Sleuth()\n>>> sleuth.hunt()\n>>> type(sleuth)\n<class \'__main__.Sleuth\'>\n>>> type(Sleuth)\n<class \'type\'>`, `73934063917340430000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token operator">>></span><span class="token operator">></span> sleuth <span class="token operator">=</span> Sleuth<span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token operator">>></span><span class="token operator">></span> sleuth.hunt<span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token operator">>></span><span class="token operator">></span> type<span class="token punctuation">(</span>sleuth<span class="token punctuation">)</span>\n<span class="token operator">&lt;</span>class <span class="token string">\'__main__.Sleuth\'</span><span class="token operator">></span>\n<span class="token operator">>></span><span class="token operator">></span> type<span class="token punctuation">(</span>Sleuth<span class="token punctuation">)</span>\n<span class="token operator">&lt;</span>class <span class="token string">\'type\'</span><span class="token operator">></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>同时，Sleuth 类继承自 Dog 类，是 Dog 的子类，当然也是 object 的子类：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="92722320163384150000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`>>> issubclass(Sleuth, Dog)\nTrue\n>>> issubclass(Sleuth, object)\nTrue`, `92722320163384150000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token operator">>></span><span class="token operator">></span> issubclass<span class="token punctuation">(</span>Sleuth, Dog<span class="token punctuation">)</span>\nTrue\n<span class="token operator">>></span><span class="token operator">></span> issubclass<span class="token punctuation">(</span>Sleuth, object<span class="token punctuation">)</span>\nTrue</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-09-26-14-34-40-b3d92d6a1012d777104d5533b3e6464e-88eb7.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 411px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 69.82968369829685%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAACxklEQVQ4y3WU62/aSBTF/f9/qrRbrZrNt6rpqi1NqnbzaMijaVMIEIMXAzEPm0dsXsa8DcbAr+ORUnWT3SsdjT1z59x7z9wZpdPucHFxSeomhTfweGytZpOzeJxMOs14NHqyvgrXFEt3JBJJZnMf5VvxiHN9nzP9PVf5Ixb+giAIWK1WIoBLPFfhIF0VqHCaqzGZTAjDkOVyyVz42vkz2rcx2uo+9dQ+ymdjj7e3vwv8xt/aS9y+y3A4lBv/yWV5kzLZTTbYuTZ5l7PRdZ1ut8t8Pufq6zW1yz8ZJZ7jXD6j9/0FSsXRMd2CRMUuPCnJsPvk7wcU7KH4HsjsPc+ThJFUjVKKoFfCb+t4DQ1lE8CwN8FpdlkHW0my2WwkpIUBY7eL0zBZziZyKiJUVVXKMpwsKFs2Rq1Fxx2jaOUU11qcK/UErZx+kqFutfiSLXKeyZOr1GUg13UxDIPW/T0l9Ypi8pCCQCl9hnJefcNHfZePhV2O83s4Tpter8dAZHErTvao2OJ9sUNMd4jXXDRNwzRNarUad0aZ+5vX9L49Z5DcoX29g5KonvDFOOC8FCNR/ky4CmUW2+2WyXhE0uxwLEgP83WS9b483fF4LLHebOnop7TTf9HPxWil3qEs/YBgsWIpMB3PJFFkD+MmXOGI0pp1C38++6lhpJ+UeL0lFMRyXG9Q7solND1H0dC5SSefaFiz6txkVBKpDBk1y2KxoN/v/yvor6ZEDX2i73GsvxKNG5OlTKdTZrMZdcvkNG/yQbM4yFlcGDZNcXOish8IH0M5zr9iP/uCmPoHn25fCsKJJIxug2XW+KSZvFYt9sRtOSy0ZKCH1vovUqXj2fRGNt0InvMz9ag1fNG83synPZzSGU2F3xTbtvF9//9LfjwROUU6Re1RrVbF49CIZuXacuGTzWZpNBpSx/V6zUg8GIPBQP5Hcv0A338E+PnREMsAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 09 26 14 34 40" title="" data-src="/static/2022-09-26-14-34-40-b3d92d6a1012d777104d5533b3e6464e-88eb7.png" data-srcset="/static/2022-09-26-14-34-40-b3d92d6a1012d777104d5533b3e6464e-e0906.png 200w,\n/static/2022-09-26-14-34-40-b3d92d6a1012d777104d5533b3e6464e-4c29a.png 400w,\n/static/2022-09-26-14-34-40-b3d92d6a1012d777104d5533b3e6464e-88eb7.png 411w" data-sizes="(max-width: 411px) 100vw, 411px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>现在不可避免需要讨论 type 以及 object 这两个特殊的类型。</p>\n<p>理论上，object 是所有类型的基类，本质上是一种类型，因此其类型必然是 type。而 type 是所有类型的类型，本质上也是一种类型，因此其类型必须是它自己！</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="75341684272667670000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`>>> type(object)\n<class \'type\'>\n>>> type(object) is type\nTrue`, `75341684272667670000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token operator">>></span><span class="token operator">></span> type<span class="token punctuation">(</span>object<span class="token punctuation">)</span>\n<span class="token operator">&lt;</span>class <span class="token string">\'type\'</span><span class="token operator">></span>\n<span class="token operator">>></span><span class="token operator">></span> type<span class="token punctuation">(</span>object<span class="token punctuation">)</span> is <span class="token builtin class-name">type</span>\nTrue</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="43689213610206970000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`>>> type(type)\n<class \'type\'>\n>>> type(type) is type\nTrue`, `43689213610206970000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token operator">>></span><span class="token operator">></span> type<span class="token punctuation">(</span>type<span class="token punctuation">)</span>\n<span class="token operator">&lt;</span>class <span class="token string">\'type\'</span><span class="token operator">></span>\n<span class="token operator">>></span><span class="token operator">></span> type<span class="token punctuation">(</span>type<span class="token punctuation">)</span> is <span class="token builtin class-name">type</span>\nTrue</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>另外，由于 object 是所有类型的基类，理论上也是 type 的基类(<code class="language-text">__base__</code> 属性)：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="93819090461857700000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`>>> issubclass(type, object)\nTrue\n>>> type.__base__\n<class \'object\'>`, `93819090461857700000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token operator">>></span><span class="token operator">></span> issubclass<span class="token punctuation">(</span>type, object<span class="token punctuation">)</span>\nTrue\n<span class="token operator">>></span><span class="token operator">></span> type.__base__\n<span class="token operator">&lt;</span>class <span class="token string">\'object\'</span><span class="token operator">></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>但是 object 自身便不能有基类了。为什么呢？对于存在继承关系的类，成员属性和成员方法查找需要回溯继承链，不断查找基类。因此，继承链必须有一个终点，不然就死循环了。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-09-26-14-39-00-0dbb7a586e3c39186f9c3f19df34840b-9e231.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 444px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 64.86486486486486%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAACoElEQVQ4y22TW2/bRhBG+f8fA7RBihh9SGKkhmo4jes6TerEdqqIlawLRVuyJVO8iJR4E0lRlqjr6YotDDvJAAPsfuB+O3N2KAVBQLH4N9XqBWma8jCWyyXlcpkvpRKmafJ1zGYzmk2FdruVr+fzOVKp84Gj+iuOGi8ptf8im82ZLxaslguUmx57cpfXxTb7FQ3HC1mvVizERZPJBLv2Frv0Arf8CuX8gIaiCkP9HW8az3nb3OG8fUToj4iThFHgcyLX+KU+ZOdMGKoeSquDZRpMRTWFQgH9/GdCeQe/+Ix+45iOpiOFiUcwHuLFNqMkeNRStlhiBxGDKMX2I9YbGIvLhsMh9XqdyLPpXl7g9K5YTMdCd5Em6QS9Z3CpXrFdfx19y6SpNLAMPd9vW61Wqzlfw+xzevYZ+Z8KyTjF932kC+2UP5U93qt7lG9OmU0zMgF3Mc9o90yOVYPDWoeTaxvb9Rk4tnggC1VV6X7ZxyrtCo67WOo5hmUjyeYx+7VnHCg/8fn6dzw3IIojAs/jtFLnsBOyK1/zTotoa0ZuaFl9HFsYF19gnjwhKD7lVj5gFKdIXjwgmDi4iUWQuN8wNAW7S83CGY1zbTq9I8uyfJ2GNtPQ4M7XuUv8XJO8oY+umWhdnZ6mPzKci4P6bRelVqV9qeZzGoYhKzE6m83mG95bTSp3PvFeKfCh+Svy1af/GWbCbEZLtPhHvcvhxbVg3MN0BqTj8f3hzWb9IMV+W+FZ5zcK1R9F/sBH9Y2Yv0i82Jg0iXOGr6s9Xso3FBomThjlZuv1+oHp45QGI4t+eIsl0h3Z9+VHUUS2XGGNUowgwYnv8IJQMJzem30vpO9xcF2XSqVCu9UiDv8b9vX2V1QUWkKzbfu+0jiO8++32pbvv0YbvajiQ91/AAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 09 26 14 39 00" title="" data-src="/static/2022-09-26-14-39-00-0dbb7a586e3c39186f9c3f19df34840b-9e231.png" data-srcset="/static/2022-09-26-14-39-00-0dbb7a586e3c39186f9c3f19df34840b-f72be.png 200w,\n/static/2022-09-26-14-39-00-0dbb7a586e3c39186f9c3f19df34840b-0eb67.png 400w,\n/static/2022-09-26-14-39-00-0dbb7a586e3c39186f9c3f19df34840b-9e231.png 444w" data-sizes="(max-width: 444px) 100vw, 444px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>这就完整了！</p>\n<p>可以看到，所有类型的基类收敛于 object，所有类型的类型都是 type，包括它自己！这就是 Python 类型、对象体系全图，设计简洁、优雅、严谨。</p>\n<p>该图将成为后续阅读源码、探索 Python 对象模型的有力工具，像地图一样指明方向。图中所有实体在 Python 内部均以对象形式存在，至于对象到底长啥样，相互关系如何描述，这些问题先按下不表，后续一起到源码中探寻答案。</p>\n<h3 id="变量只是名字"><a href="#%E5%8F%98%E9%87%8F%E5%8F%AA%E6%98%AF%E5%90%8D%E5%AD%97" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>变量只是名字</h3>\n<p>先看一个例子，定义一个变量 a，并通过 id 内建函数取出其“地址”：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="13462711719839703000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`>>> a = 1\n>>> id(a)\n4302704784`, `13462711719839703000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token operator">>></span><span class="token operator">></span> a <span class="token operator">=</span> <span class="token number">1</span>\n<span class="token operator">>></span><span class="token operator">></span> id<span class="token punctuation">(</span>a<span class="token punctuation">)</span>\n<span class="token number">4302704784</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>定义另一个变量 b，以 a 赋值，并取出 b 的“地址”：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="22041010494689940000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`>>> b = a\n>>> id(b)\n4302704784`, `22041010494689940000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token operator">>></span><span class="token operator">></span> b <span class="token operator">=</span> a\n<span class="token operator">>></span><span class="token operator">></span> id<span class="token punctuation">(</span>b<span class="token punctuation">)</span>\n<span class="token number">4302704784</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>惊奇地看到，a 和 b 这两个变量的地址居然是相同的！这不合常理呀！</p>\n<p>对于大多数语言（C 语言为例），定义变量 a 即为其分配内存并存储变量值</p>\n<p>变量 b 内存空间与 a 独立，<code class="language-text">赋值时进行拷贝，不赋值时还是原来地址</code></p>\n<p>在 Python 中，一切皆对象，整数也是如此，变量只是一个与对象关联的名字</p>\n<p>而变量赋值，只是将当前对象与另一个名字进行关联，背后的对象是同一个</p>\n<p>因此，在 Python 内部，变量只是一个名字，保存指向实际对象的指针，进而与其绑定。变量赋值只拷贝指针，并不拷贝指针背后的对象</p>\n<h3 id="可变对象与不可变对象"><a href="#%E5%8F%AF%E5%8F%98%E5%AF%B9%E8%B1%A1%E4%B8%8E%E4%B8%8D%E5%8F%AF%E5%8F%98%E5%AF%B9%E8%B1%A1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>可变对象与不可变对象</h3>\n<p>定义一个整数变量：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="46097464694368590000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`>>> a = 1\n>>> id(a)\n4302704784`, `46097464694368590000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token operator">>></span><span class="token operator">></span> a <span class="token operator">=</span> <span class="token number">1</span>\n<span class="token operator">>></span><span class="token operator">></span> id<span class="token punctuation">(</span>a<span class="token punctuation">)</span>\n<span class="token number">4302704784</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>然后，对其自增 1：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="31448016011529490000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`>>> a += 1\n>>> a\n2\n>>> id(a)\n4302704816`, `31448016011529490000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token operator">>></span><span class="token operator">></span> a <span class="token operator">+=</span> <span class="token number">1</span>\n<span class="token operator">>></span><span class="token operator">></span> a\n<span class="token number">2</span>\n<span class="token operator">>></span><span class="token operator">></span> id<span class="token punctuation">(</span>a<span class="token punctuation">)</span>\n<span class="token number">4302704816</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>数值符合预期，但是对象变了！初学者一脸懵逼，这是什么鬼？</p>\n<p>一切要从可变对象和不可变对象说起。可变对象在对象创建后，其值可以进行修改；而不可变对象在对象创建后的整个生命周期，其值都不可修改。</p>\n<p>在 Python 中，整数类型是不可变类型，整数对象是不可变对象。修改整数对象时，Python 将以新数值创建一个新对象，变量名与新对象进行绑定；旧对象如无其他引用，将被释放。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-09-26-14-55-02-61f5df318944c4f90b04a91b7409dae8-ec22f.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 21.51851851851852%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsSAAALEgHS3X78AAAAr0lEQVQI14WPSwvCMBCE8///ih5V8FjrQajgwWMv1SilD9OmTfPaJGva4tmPXVgYmJkl2kIvpAVnrGlYxUXnvQ8LiLiqAA4xaJji+ODxB6GfMcmrlst+aNLHJi22fGLs0z0p1Uq+e3nKq7obtRVZecjKHVctBgSA6E7i+iXEeTdINkwsHjF8lmMFxDVqUuJWJPfXmQ2NVoZzbq0l+I+As7UBdaXHS7FnYz2/o7Vz7gvDneSUGtVpiAAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 09 26 14 55 02" title="" data-src="/static/2022-09-26-14-55-02-61f5df318944c4f90b04a91b7409dae8-fee1c.png" data-srcset="/static/2022-09-26-14-55-02-61f5df318944c4f90b04a91b7409dae8-a67b7.png 200w,\n/static/2022-09-26-14-55-02-61f5df318944c4f90b04a91b7409dae8-0b187.png 400w,\n/static/2022-09-26-14-55-02-61f5df318944c4f90b04a91b7409dae8-fee1c.png 800w,\n/static/2022-09-26-14-55-02-61f5df318944c4f90b04a91b7409dae8-b1a91.png 1200w,\n/static/2022-09-26-14-55-02-61f5df318944c4f90b04a91b7409dae8-95179.png 1600w,\n/static/2022-09-26-14-55-02-61f5df318944c4f90b04a91b7409dae8-5d5ba.png 2400w,\n/static/2022-09-26-14-55-02-61f5df318944c4f90b04a91b7409dae8-ec22f.png 2700w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<blockquote>\n<p>每次修改整数对象都要创建新对象、回收旧对象，效率不是很低吗？确实是，后续章节将从源码角度来解答：Python 如何通过小整数池等手段进行优化。</p>\n</blockquote>\n<p>可变对象是指创建后可以修改的对象，典型的例子是列表（list）：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="27489061315691753000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`>>> l = [1, 2]\n>>> l\n[1, 2]\n>>> id(l)\n4385900424`, `27489061315691753000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token operator">>></span><span class="token operator">></span> l <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span>, <span class="token number">2</span><span class="token punctuation">]</span>\n<span class="token operator">>></span><span class="token operator">></span> l\n<span class="token punctuation">[</span><span class="token number">1</span>, <span class="token number">2</span><span class="token punctuation">]</span>\n<span class="token operator">>></span><span class="token operator">></span> id<span class="token punctuation">(</span>l<span class="token punctuation">)</span>\n<span class="token number">4385900424</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>往列表里头追加数据，发现列表对象还是原来那个，只不过多了一个元素了：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="99491861912630560000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`>>> l.append(3)\n>>> l\n[1, 2, 3]\n>>> id(l)\n4385900424`, `99491861912630560000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token operator">>></span><span class="token operator">></span> l.append<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>\n<span class="token operator">>></span><span class="token operator">></span> l\n<span class="token punctuation">[</span><span class="token number">1</span>, <span class="token number">2</span>, <span class="token number">3</span><span class="token punctuation">]</span>\n<span class="token operator">>></span><span class="token operator">></span> id<span class="token punctuation">(</span>l<span class="token punctuation">)</span>\n<span class="token number">4385900424</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>实际上，列表对象内部维护了一个动态数组，存储元素对象的指针：</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-09-26-14-57-36-8fb4b5c2d45febca5adcc9bc13d62ef7-8132c.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 70.74509803921568%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsSAAALEgHS3X78AAACHUlEQVQoz5VSXW/SUBjm/3i3C3+BV8b4G0w0aoyaGBOjMf4CLxbDQshIhhplMRpBZqcEGGOMjTIYCgPKKP3go0JKaUtLy+mnB2jYUi6M70nOx5vzPO/7nPN4bNu2TNMyDcsy7X+FNY/l0aPr+l6F+FFl8hg1FnhBFHmBB2A644Tj0lUXywwMlxrFIIfF9oAzTQMGzCoimKrABYBlZEkRR5KuGU7lWRaADk0uYOKER0rB8Il/O/MmWgoU8NSiEgCA40YtppqrJ1As2fpzZpqmZ0kMD3DuDom7H9cefLp6y7d2e/vKZuolTE6nKscNDd3KNCPJzlasFYhjHzRN87heojckn4evv0Juvvh641n0Wuj4tW3a7JBdUJNMM33y8/A0gVFlp+0lUtfMVgfzZh5uFp8ECk+9ufvhgn86gTWAqqqSJPGcWCs3Br0hUHUHfNG5bhFdbD19z5d/5EMfrx/d+ZLfUCQgiIIsSxrQBnynThdrdJHhKUczx3H1eh3DMFEY9wZ05MwbIwNQ2M75xhGOzEjnFrAMO0chaeZ9qv3ugPjsaJZlud/vsywrS5Nun96tbO3hoWQzFMOCaDNxWVejXUmg0f0CUsbz7rbhB9I94ttvX7wVjDfffsf82cbuHOyYT1GU8wZOkbQ0llYfzOizvSweRWnkmNjJkpFqB136aXXjWTWdPJZLp7/S+wckQbncCa0yGo1mAmXZDf7f+AuJrfiQOuleQwAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 09 26 14 57 36" title="" data-src="/static/2022-09-26-14-57-36-8fb4b5c2d45febca5adcc9bc13d62ef7-fee1c.png" data-srcset="/static/2022-09-26-14-57-36-8fb4b5c2d45febca5adcc9bc13d62ef7-a67b7.png 200w,\n/static/2022-09-26-14-57-36-8fb4b5c2d45febca5adcc9bc13d62ef7-0b187.png 400w,\n/static/2022-09-26-14-57-36-8fb4b5c2d45febca5adcc9bc13d62ef7-fee1c.png 800w,\n/static/2022-09-26-14-57-36-8fb4b5c2d45febca5adcc9bc13d62ef7-b1a91.png 1200w,\n/static/2022-09-26-14-57-36-8fb4b5c2d45febca5adcc9bc13d62ef7-8132c.png 1275w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>列表对象增减元素，需要修改该数组。例如，追加元素 3 ：</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-09-26-14-57-53-b75f6f655ad3d4d5d29ed0c570c863a6-8132c.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 88.23529411764706%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAAAsSAAALEgHS3X78AAACk0lEQVQ4y5VTW08TQRjd/+SD8c0XY3zzB/jmiwQVMCYmxhjj9c0Ho1IwoUJipEITbgaWCkIpUgq0pbSlpdnu2na7pVv2fp+ZrbNt00iVKF92Z2dn53xzvu+cJZrNJkIQAIAQav4r3FZ0XwkI4XqaXsqw27mfiiTKsixKomWZbtNFLsLXWVk8MH5kmOrCZpyq8h4BAPCqqTqGbrV2nQIYuqFImqnbnZPxDWybKuQBcPDcdqxwdjaUmgxGRr5np7ZyZBuPi5JEqcwxKTq6dbBS4PZVXSa6HFBrlHVhMHD5zvSlm76LfYELz+dvtIk3Gjx03HQptsx8+Eb7F3LD5TpFtAngxO0UsiY8mrn+cOHa/cDVB3NXXpN9ECBBEAzT8FJItY0kGU6Q0fSqZirE7w3A+ypc6V144P12vy828DZ6ayzyGLO1bRv3Vdd1TdGzB3kqz0gnaqfmbkCI2Fp5OHJvZGfAFxsajt32R55gBRRFEUXRMAxZFSt1Olc8aCicaRkeGMvDMAxN04qs1njWFx0aTd4dTQz6Ev0TsaeaqmMJ3FbfDtm975XxVWYiVBxjG7QHxlkpisJgUZCOee7T3stA9kUg8+pz5lkw/kaWvWNV1eNZ4Ytr6dn11Fw4PS8o/GnaAHI19mvST+bGycPxpUN/KBVotdLFYJxCEuTtHzupRKbEsJ2a8be2NwGAtTq3mp/cqgaj1ZlNdnrjaBZB1FXEti3+5JguUQ60IAREj+lweSdiYzceC62Q8eQudkIH2ZI7V44vH31cTPsXM2PVBkP81bqOAwzDxGOPmYtcdq3wZb0QXDuaqktV4izT/zn3zodoP7mfiCeKVLFX5//5JbFhTMO0LOvcYNwzTdMkScK2OTe4J34BwVHZTr9/vF8AAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 09 26 14 57 53" title="" data-src="/static/2022-09-26-14-57-53-b75f6f655ad3d4d5d29ed0c570c863a6-fee1c.png" data-srcset="/static/2022-09-26-14-57-53-b75f6f655ad3d4d5d29ed0c570c863a6-a67b7.png 200w,\n/static/2022-09-26-14-57-53-b75f6f655ad3d4d5d29ed0c570c863a6-0b187.png 400w,\n/static/2022-09-26-14-57-53-b75f6f655ad3d4d5d29ed0c570c863a6-fee1c.png 800w,\n/static/2022-09-26-14-57-53-b75f6f655ad3d4d5d29ed0c570c863a6-b1a91.png 1200w,\n/static/2022-09-26-14-57-53-b75f6f655ad3d4d5d29ed0c570c863a6-8132c.png 1275w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h3 id="定长对象与变长对象"><a href="#%E5%AE%9A%E9%95%BF%E5%AF%B9%E8%B1%A1%E4%B8%8E%E5%8F%98%E9%95%BF%E5%AF%B9%E8%B1%A1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>定长对象与变长对象</h3>\n<p>Python 一个对象多大呢？相同类型对象大小是否相同呢？想回答类似的问题，需要考察影响对象大小的因素。</p>\n<p>标准库 sys 模块提供了一个查看对象大小的函数 getsizeof：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="87853775529148430000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`>>> import sys\n>>> sys.getsizeof(1)\n28`, `87853775529148430000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token operator">>></span><span class="token operator">></span> <span class="token function">import</span> sys\n<span class="token operator">>></span><span class="token operator">></span> sys.getsizeof<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>\n<span class="token number">28</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>先观察整数对象：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="26347105382459970000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`>>> sys.getsizeof(1)\n28\n>>> sys.getsizeof(100000000000000000)\n32\n>>> sys.getsizeof(100000000000000000000000000000000000000000000)\n44`, `26347105382459970000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token operator">>></span><span class="token operator">></span> sys.getsizeof<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>\n<span class="token number">28</span>\n<span class="token operator">>></span><span class="token operator">></span> sys.getsizeof<span class="token punctuation">(</span><span class="token number">100000000000000000</span><span class="token punctuation">)</span>\n<span class="token number">32</span>\n<span class="token operator">>></span><span class="token operator">></span> sys.getsizeof<span class="token punctuation">(</span><span class="token number">100000000000000000000000000000000000000000000</span><span class="token punctuation">)</span>\n<span class="token number">44</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>可见整数对象的大小跟其数值有关，像这样大小不固定的对象称为变长对象。</p>\n<p>我们知道，位数固定的整数能够表示的数值范围是有限的，可能导致溢出。Python 为解决这个问题，采用类似 C++ 中大整数类的思路实现整数对象——串联多个普通 32 位整数，以便支持更大的数值范围。至于需要多少个 32 位整数，则视具体数值而定，数值不大的一个足矣，避免浪费</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-09-26-15-04-06-f9d21975c1f631190eec7c3ac84cc722-6cf8d.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.55555555555555%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAAB4klEQVQoz6WS3U/aYBTG/RuXbLqbJUt2MYNY4jKWqDde7MpNAZViRYqKjpSrOXVxtjATNiilUuvKhzEg9JPRpssyaI1tse8wXCxmW+LJyclJzvk975ucZ6R/jxjRf6ocX6hKRTdrEl2TaU4g63JlMLYsuyYwFZECU5muymCtItDd3i8As408fOJZP5tCSlCk6F0tQuHSc6y4OIB7XSNOzSKsd43xRWjvKj2JMJPRkxe83AAw1ypEWWgu9cQfe+SPjUKhB/Pppx/K4SGc5F6/wZ+9io29XHvoj47OJB5vlaeF9iWAzxpkmPTCeR+c80XyvpUstEyOY4XAADZ6JkrOhinP0pcJd20p61khJxBqild+w7Umu/sNxuvxPQ55fwoTjY39auSIwYYv77HreCuKN1G8GSOaKMGjBxVEVHgAX/Bl/Hwry6eI8+1DbiPbSqXriWNudwCbhvmxlIh/mt9JB3c+BzePFrYzgeTxstKRANwzunJHUFSxrUluuo3c4VX9++23DXO/hL77+hbLhzAymMwF3IrlQlJbAPDfL3llXlEXaUYiGDHDiG6TOZUz9CWu6R0AO3eH/aeM3XesvnVtW9eObTm3JvmnjYBU39F/6KqmKm1FEAVNU/8XHkrcYc/7ePsGRxGkqN1hNrgAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 09 26 15 04 06" title="" data-src="/static/2022-09-26-15-04-06-f9d21975c1f631190eec7c3ac84cc722-fee1c.png" data-srcset="/static/2022-09-26-15-04-06-f9d21975c1f631190eec7c3ac84cc722-a67b7.png 200w,\n/static/2022-09-26-15-04-06-f9d21975c1f631190eec7c3ac84cc722-0b187.png 400w,\n/static/2022-09-26-15-04-06-f9d21975c1f631190eec7c3ac84cc722-fee1c.png 800w,\n/static/2022-09-26-15-04-06-f9d21975c1f631190eec7c3ac84cc722-6cf8d.png 900w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>这样一来，整数对象需要在头部额外存储一些信息，记录对象用了多少个 32 位整数。这就是变长对象典型的结构，先有个大概印象即可，后续讲解整数对象源码时再展开。</p>\n<p>接着观察字符串对象：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="51790378977821975000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`>>> sys.getsizeof(\'a\')\n50\n>>> sys.getsizeof(\'abc\')\n52`, `51790378977821975000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token operator">>></span><span class="token operator">></span> sys.getsizeof<span class="token punctuation">(</span><span class="token string">\'a\'</span><span class="token punctuation">)</span>\n<span class="token number">50</span>\n<span class="token operator">>></span><span class="token operator">></span> sys.getsizeof<span class="token punctuation">(</span><span class="token string">\'abc\'</span><span class="token punctuation">)</span>\n<span class="token number">52</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-09-26-15-04-55-0a81d23ed0d5655a52117dc0a2ea7582-6cf8d.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 70.44444444444444%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsSAAALEgHS3X78AAAB2klEQVQoz6WO3U/aUBjG/RcX4262uyVKBJPFDLzZ/olStiLtmqGii8yLTYaMMUtV2try3UItCJzKp5MylSVSXbeDpy67WCbJnrznnCfneX/nPVM//0NTcJ0O2jnAKm1O6cBKwT2nJ3uDFuoYpyes3LIjpcPndbZnNG1Yqn7B07P+zAKWmvNyDp/gxKQnYjWBYKm668vNEpkFL+/AOAfOz8NmoRK34TzYI7KuF6HHi8S05/XDxVfT+OEcfB7B+ca+P+d8vvYIRm5y5in+4KU4n20wd5O1JJZ0LXNuSlqixKUA7/HuOyWNsScfsd4DF5F6Fjh0k6JnWXBjey5BTdhwGWQ+12juNBwtkRE5wPU2E4CGlwhW9XyyGRJ6WzH1TVSh+e7WLlgtg6wNa0COFVbYyruIFIykg9DE5JUjUESwfJz5IPvjWjAs+DZ5PF4Jvi8Qxapow2NZt/XbWMiOj1I9G1Uppr4e5n1vDzCmsf6xRMo16Q/4b7IsG/5UoZl6aKdE75RvjUrJtfSkcPyYZvWN7UJgu0hCE9MopX4fjHT5/aL1tdE507tGs9tvdvon7TNwMTyfCEYyTXN4Ofw2ODf6A6NvoE/dD1tj/bi5uTavTVgjc3Q1upoU/od+Abcf3lePqnEOAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 09 26 15 04 55" title="" data-src="/static/2022-09-26-15-04-55-0a81d23ed0d5655a52117dc0a2ea7582-fee1c.png" data-srcset="/static/2022-09-26-15-04-55-0a81d23ed0d5655a52117dc0a2ea7582-a67b7.png 200w,\n/static/2022-09-26-15-04-55-0a81d23ed0d5655a52117dc0a2ea7582-0b187.png 400w,\n/static/2022-09-26-15-04-55-0a81d23ed0d5655a52117dc0a2ea7582-fee1c.png 800w,\n/static/2022-09-26-15-04-55-0a81d23ed0d5655a52117dc0a2ea7582-6cf8d.png 900w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>字符串对象也是变长对象，这个行为非常好理解，毕竟字符串长度不尽相同嘛。此外，注意到字符串对象大小比字符串本身大，因为对象同样需要维护一些额外的信息。至于具体需要维护哪些信息，同样留到源码剖析环节中详细介绍。</p>\n<p>那么，有啥对象是定长的呢——浮点数对象 float：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="37639938204989630000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`>>> sys.getsizeof(1.)\n24\n>>> sys.getsizeof(1000000000000000000000000000000000.)\n24`, `37639938204989630000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token operator">>></span><span class="token operator">></span> sys.getsizeof<span class="token punctuation">(</span><span class="token number">1</span>.<span class="token punctuation">)</span>\n<span class="token number">24</span>\n<span class="token operator">>></span><span class="token operator">></span> sys.getsizeof<span class="token punctuation">(</span><span class="token number">1000000000000000000000000000000000</span>.<span class="token punctuation">)</span>\n<span class="token number">24</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>浮点数背后是由一个 double 实现，就算表示很大的数，浮点数对象的大小也不变。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-09-26-15-05-08-d4223cd68f989b97fbc9b2048d1f3626-6cf8d.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 54.22222222222223%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABm0lEQVQoz6WSyU/CUBDG+Qs9mODNg1FDAsoS0aPxQtREQcNusQJKJMEYoyIQQYrIIi1Ci7hQZSkCKhAxnoC2+KDlrmHy3mRe5vvNN4cn6I0QAnDrrRpO3WSr8YdavJ+rcbwcrjSKnOL754soR7KVGGgNurfEW6Tw8cTDyVdEh4kgXK5PiPWo2IRJtclp5PGYg3NUxpSSQLjUiEmAwJCYM6REp2kzDxNUxJyeX3ZOyg3jS/CEXDu+FZ2JFc57bB9+eXuA7xUrrkklJFy0CCWbYxvBqUvS3mM4ZzKkQUS6sNQYkxuiMn1Ypr6eDWZ4Z7KUNaOKncTCDroAJZUWbNGIzp+gEO/8TOH+vDX+eeR9hJGSI/ruCpZt6XyEc85TOYtXZfWvw741kCG3yhpYDWXOhnCRcONwkHSeYrsewnaVO/Rk4TQZ5ZwL5Ze9i42Dyy27T+MIbNu8mn2/Grk752GGYTog2h2aprvdbmfwADUHsyxYoL8D22MZhmb7chocHv5LgKGtr1az0ax/1iuVarvd/gc8XIEvuFowyg/7BUt0OQa8sN4OAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 09 26 15 05 08" title="" data-src="/static/2022-09-26-15-05-08-d4223cd68f989b97fbc9b2048d1f3626-fee1c.png" data-srcset="/static/2022-09-26-15-05-08-d4223cd68f989b97fbc9b2048d1f3626-a67b7.png 200w,\n/static/2022-09-26-15-05-08-d4223cd68f989b97fbc9b2048d1f3626-0b187.png 400w,\n/static/2022-09-26-15-05-08-d4223cd68f989b97fbc9b2048d1f3626-fee1c.png 800w,\n/static/2022-09-26-15-05-08-d4223cd68f989b97fbc9b2048d1f3626-6cf8d.png 900w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>为啥 64 位的 double 可以表示这么大的范围呢？答案是：牺牲了精度。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="68192016343953310000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`>>> int(1000000000000000000000000000000000.)\n999999999999999945575230987042816`, `68192016343953310000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token operator">>></span><span class="token operator">></span> int<span class="token punctuation">(</span><span class="token number">1000000000000000000000000000000000</span>.<span class="token punctuation">)</span>\n<span class="token number">999999999999999945575230987042816</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>由于浮点数存储位数是固定的，它能表示的数值范围也是有限的，超出便会抛锚：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="23458763220384006000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`>>> 10. ** 1000\nTraceback (most recent call last):\n   File &quot;<stdin>&quot;, line 1, in <module>\nOverflowError: (34, \'Result too large\')`, `23458763220384006000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token operator">>></span><span class="token operator">></span> <span class="token number">10</span>. ** <span class="token number">1000</span>\nTraceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span>:\n   File <span class="token string">"&lt;stdin>"</span>, line <span class="token number">1</span>, <span class="token keyword">in</span> <span class="token operator">&lt;</span>module<span class="token operator">></span>\nOverflowError: <span class="token punctuation">(</span><span class="token number">34</span>, <span class="token string">\'Result too large\'</span><span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>// TODO Python 源码剖析 <a href="https://fasionchan.com/python-source/object-model/pyobject/" target="_blank" rel="nofollow noreferrer noopener">https://fasionchan.com/python-source/object-model/pyobject/</a></p>',
excerpt:"源码结构 重点介绍标红行的内容 对象模型 概述 Python 是一门面向对象语言，实现了一个完整的面向对象体系，简洁而优雅。 一切皆对象 首先，在 Python 世界，基本类型也是对象，与通常意义的“对象”形成一个有机统一。换句话讲，Python…",frontmatter:{date:"2022-09-26 11:08:48",path:"/python-source-analysis/",tags:"后端, python, 读书笔记",title:"Python源码剖析",draft:null}}},pathContext:{mainPostPath:"/webgl-zero-based-practice-learn/",nextPostPath:"/css-new-world-new-layout/",prePostPath:"/python-source-analysis/"}}}});