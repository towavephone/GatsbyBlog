webpackJsonp([36482110888888],{1404:function(a,n){a.exports={data:{site:{siteMetadata:{title:"女王控的博客",description:'前端工程师，黑猫女王控，欢迎勾搭，技术相关<a href="https://github.com/towavephone" target="_blank">@towavephone</a>，QQ闲聊<a href="tencent://AddContact/?fromId=45&fromSubId=1&subcmd=all&uin=634407147&website=www.oicqzone.com">@towave</a>，bili关注<a href="https://space.bilibili.com/11507708#/" target="_blank">@towave</a>',siteUrl:"https://blog.towavephone.com"}}},pathContext:{posts:[{excerpt:"line-height 的另外一个朋友 font-size 第 5 章介绍过 line-height 和 vertical-align 的好朋友关系，实际上 font-size 也和 line-height 是好朋友，同样也无处不在，并且纸面上 line-height 的数值属性值和百分比值属性值都是相对于 font-size 计算的，其关系可谓不言而喻。 font-size 和 vertical-align 的隐秘故事 line-height 的部分类别属性值是相对于 font-size…",html:'<h1 id="line-height-的另外一个朋友-font-size"><a href="#line-height-%E7%9A%84%E5%8F%A6%E5%A4%96%E4%B8%80%E4%B8%AA%E6%9C%8B%E5%8F%8B-font-size" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>line-height 的另外一个朋友 font-size</h1>\n<p>第 5 章介绍过 line-height 和 vertical-align 的好朋友关系，实际上 font-size 也和 line-height 是好朋友，同样也无处不在，并且纸面上 line-height 的数值属性值和百分比值属性值都是相对于 font-size 计算的，其关系可谓不言而喻。</p>\n<h2 id="font-size-和-vertical-align-的隐秘故事"><a href="#font-size-%E5%92%8C-vertical-align-%E7%9A%84%E9%9A%90%E7%A7%98%E6%95%85%E4%BA%8B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>font-size 和 vertical-align 的隐秘故事</h2>\n<p>line-height 的部分类别属性值是相对于 font-size 计算的，vertical-align 百分比值属性值又是相对于 line-height 计算的，于是，看上去八辈子都搭不上边的 vertical-align 和 font-size 属性背后其实也有有着关联的。</p>\n<p>例如，下面的 CSS 代码组合：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="11464172724433564000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`p {\n   font-size: 16px;\n   line-height: 1.5;\n}\n\np > img {\n   vertical-align: -25%;\n}`, `11464172724433564000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">p</span> <span class="token punctuation">{</span>\n   <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>\n   <span class="token property">line-height</span><span class="token punctuation">:</span> 1.5<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">p > img</span> <span class="token punctuation">{</span>\n   <span class="token property">vertical-align</span><span class="token punctuation">:</span> -25%<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>此时，p > img 选择器对应元素的 vertical-align 计算值应该是：</p>\n<p>16px * 1.5 * -25% = -6px</p>\n<p>也就是上面的 CSS 代码等同于：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="66616651177870120000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`p {\n   font-size: 16px;\n   line-height: 1.5;\n}\n\np > img {\n   vertical-align: -6px;\n}`, `66616651177870120000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">p</span> <span class="token punctuation">{</span>\n   <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>\n   <span class="token property">line-height</span><span class="token punctuation">:</span> 1.5<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">p > img</span> <span class="token punctuation">{</span>\n   <span class="token property">vertical-align</span><span class="token punctuation">:</span> -6px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>但是两者又有所不同，很显然 <code class="language-text">-25%</code> 是一个相对计算属性值，如果此时元素的 font-size 发生变化，则图片会自动进行垂直位置调整。我们可以看一个无论 font-size 如何变化、后面图标都垂直居中对齐的例子，无论文字字号是大还是小，后面的图标都非常良好地垂直居中对齐，如图 8-1 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2020-01-10-11-53-07-9938aa85812a1fb84f2ae86eeeec6915-70b68.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 266px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 44.73684210526316%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsSAAALEgHS3X78AAABHElEQVQoz31QyWqFQBD0/z/Dk8tVwaMGPCR4EYQoonEDd8cVd5NCyUsi5NVh6O7q6q5p6vMvuq6r67ppmqqq8jxP07SqSNu2hJC+72/N1O9k2zZo8B7HkcSxZVnyy2sUxaDGcQKFANS/YixZlgXvVcE2FBHs+w47zzYDrutKkiQIgqZpqqrSNC2KIj6yrltZls82r+s6jqNpmrIsE1Ih4DiOZVl4edP0d9O+i49vXITveYqiMAyj63pRlDzPh2E4TVPbdrjf5f/R/7P5ynFV2EN3HMe4vOd58zzDzjAMKN7/jBvatp0kyXQiPwENxFEUpSfAIkbRMAwYwXTf9zGOwg2DIHiIEbvuB1rDExhUFEWWZZgFynEcyNB8ib8ASuP46qRLJt4AAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2020 01 10 11 53 07" title="" data-src="/static/2020-01-10-11-53-07-9938aa85812a1fb84f2ae86eeeec6915-70b68.png" data-srcset="/static/2020-01-10-11-53-07-9938aa85812a1fb84f2ae86eeeec6915-74086.png 200w,\n/static/2020-01-10-11-53-07-9938aa85812a1fb84f2ae86eeeec6915-70b68.png 266w" data-sizes="(max-width: 266px) 100vw, 266px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>核心 CSS 代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="28079313882433278000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`p > img {\n   width: 16px;\n   height: 16px;\n   vertical-align: 25%;\n   position: relative;\n   top: 8px;\n}`, `28079313882433278000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">p > img</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>\n   <span class="token property">vertical-align</span><span class="token punctuation">:</span> 25%<span class="token punctuation">;</span>\n   <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>\n   <span class="token property">top</span><span class="token punctuation">:</span> 8px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>原理如下：内联元素默认基线对齐，图片的基线可以看成是图片的下边缘，文字内容的基线是字符 x 下边缘，因此，本例中，图片下边缘默认和“中文”两个汉字字形底边缘往上一点的位置对齐。然后，我们通过 <code class="language-text">vertical-align: 25%</code> 声明让图片的下边缘和中文汉字的中心线对齐。此时，图标和文字的状态应该如图 8-2 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2020-01-10-11-55-22-e5a618701a17fdcd82a83923c544c0b6-3a985.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 186px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 55.91397849462365%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABuElEQVQoz41RXW+iUBD1n/cPtE/btElj3Jj2wZpN3WW7gWLVxA3djcaP4lcFEVRULuUCAuIGUfdEmybd+LDzAHNnzpk5M5PY7Xbb7Rbf5XLpeR4xjKGiwHcdJwiC0WikqWrg+5RS0zQptcIwfKck3j1d13+w7Je7u6tkkuP535XKt+9MMpX6nE5/ZZihpgEkKaphGEfIrm1XSiXh8dHU9dz19cqynp+efnJc+vJS4POR63rk9dPpRf9FAniz2Xwgm4Rs47h0f39zfh4Aapq/WPYhmz07OSnmcnQ4xGBU1V4JOdJ5Pp8/iyIUQmq+UJgR4odhjmHyxeKfKFruR12tVhalR8jYB8dyk8kEe8rzvCiKNqW3mUy/3/cWCwIzjKmuY6kfyP/YIfE/lnBdt1wua5o2GAxwGITG47EgCN1u13EcVVWRQnNEms1mrVbDdFAnSZLv+wmIRBR3Amg6nR70g4mT4No4L1Ive+t0OqiFLMiz2SyKojfZcRyDCQLQrVYLPvqDhp6QgydGtm3bsqx2u71er99kH34oAxAKK4rSaDTr9YYsSxgEUGyu1+vJsqzsrVqtYueH1fwFnSdPPjUI9wcAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2020 01 10 11 55 22" title="" data-src="/static/2020-01-10-11-55-22-e5a618701a17fdcd82a83923c544c0b6-3a985.png" data-srcset="/static/2020-01-10-11-55-22-e5a618701a17fdcd82a83923c544c0b6-3a985.png 186w" data-sizes="(max-width: 186px) 100vw, 186px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>图 8-2 完全就是实例效果注释 <code class="language-text">top: 8px</code> 后的截图标注，没有任何加工。看上去似乎上面小，实际上是视觉误差，分隔线上下完全均等，1 像素不差。</p>\n<p>由于我们这里的图标是固定的像素尺寸，因此，通过偏移自身 1/2 高度来实现真正的居中，可以使用 CSS3 transform 位移，我这里为了兼容性，使用了 relative 相对定位。</p>\n<p>其居中原理本质上和绝对定位元素 50% 定位加偏移自身 1/2 尺寸实现居中是一样的，只不过这里的偏移使用的是 vertical-align 百分比值。</p>\n<p>这么一看，vertical-align 百分比属性值似乎还是有点用的！如果再联想到 <code class="language-text">vertical-align: middle</code> 实现垂直居中效果经常不尽如人意，说不定还能找到一块更好的宝。但我要告诉你，其实还有更好的实现，那就是使用单位 ex。例如，将前面例子中的 <code class="language-text">vertical-align: 25%</code> 改成 <code class="language-text">vertical-align: .6ex</code>，效果基本上就是一样的，并且还多了一个优点，就是使用 <code class="language-text">vertical-align: .6ex</code> 实现的垂直居中效果不会受 line-height 变化影响，而使用 <code class="language-text">vertical-align: 25%</code>，line-height 一旦变化，就必须改变原来的 vertical-align 大小、重新调整垂直位置，这容错性明显就降了一个层次。</p>\n<p>因此，虽然例子演示的是 vertical-align 百分比值，实际上是推荐使用与 font-size 有着密切关系的 ex 单位。</p>\n<p>说到这里，忍不住想介绍另外一些和 font-size 有着密切的关系的东西。</p>\n<h2 id="理解-font-size-与-ex、em-和-rem-的关系"><a href="#%E7%90%86%E8%A7%A3-font-size-%E4%B8%8E-ex%E3%80%81em-%E5%92%8C-rem-%E7%9A%84%E5%85%B3%E7%B3%BB" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>理解 font-size 与 ex、em 和 rem 的关系</h2>\n<p>ex 是字符 x 高度，显然和 font-size 关系密切，font-size 值越大，自然 ex 对应的大小也就大，对此本书前面已经有介绍，这里不赘述。</p>\n<p>下面来看看单位 em。如果说 ex 是字符 x 高度，那是不是 em 就是字符 m 的高度？</p>\n<p>我的回答是“不是的”，但是 em 和字符 m 确实有关。em 在传统排版中指一个字模的高度（可以脑补下活字印刷的字模）。</p>\n<p>例如，浏览器默认 font-size 大小是 16px，假设一个<code class="language-text">&lt;div&gt;</code>宽度是 160px，则正好可以放下 10 个汉字不换行；如果是 159px 像素，第十个汉字就会掉下来；如果再同时设置 line-height:1 和一个背景色，代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="81371477664541620000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`div {\n   width: 160px;\n   line-height: 1;\n   background-color: #eee;\n}`, `81371477664541620000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">div</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 160px<span class="token punctuation">;</span>\n   <span class="token property">line-height</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>\n   <span class="token property">background-color</span><span class="token punctuation">:</span> #eee<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>我们就会发现中文汉字的尺寸就可以看作 em 单位的代名词，尤其在高度这一块，简直分毫不差，如图 8-3 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2020-01-13-15-12-20-4714542444b599c959ead4224b3f1738-2ee65.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 220px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 50.45454545454545%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAABW0lEQVQoz12SSY+CQBCF+f+/gqsJ8eYSIqLCJB6MQqJBUTQuxCWekE3FYT5ohzhTiZXqV+81r6qVXq/XZrNZrVbz+Zzsed5yuVwsFl4ZAiRc1wWkWK/Xs9nscDjkeS7dbjdZlpvNZqPRUFW1Vqv1ej1N0+r1OmCr1ep2u4DtdpuuoigcacEpxGmaQup0OoZhAEH6KgMqPKMMCP1+H5AuR64eDoeFOC/j+zfyv/GJVHVVSFRZljG5QKtC1FWI478PSIyOQ5Y0mUwulwtbieOYxvl8FohlWWx0Op3u93vf92GCMAXzFmJd19EMBgMyAiGGx3jX65WFn04n9GT04gloJUki4fnTSVbG8/nkCnIURY/Hgxe53+/U5DAMQd62+XHAHhZom6bJVm3bdhzneDxyxD9vgxG+udvtRqPReDwWeynEQRCweiaBJ1zhHzGe+T8g4DoyhO12y3WMJsQ/Qu0Qoyp8orIAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2020 01 13 15 12 20" title="" data-src="/static/2020-01-13-15-12-20-4714542444b599c959ead4224b3f1738-2ee65.png" data-srcset="/static/2020-01-13-15-12-20-4714542444b599c959ead4224b3f1738-6af5a.png 200w,\n/static/2020-01-13-15-12-20-4714542444b599c959ead4224b3f1738-2ee65.png 220w" data-sizes="(max-width: 220px) 100vw, 220px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>也就是说，em 就是’中’等汉字的高度！于是，我们对 em 的理解就更加简单了，直接看一个很容易理解错误的题目，在 Chrome 浏览器下，<code class="language-text">&lt;h1&gt;</code>元素有如下的默认 CSS：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="61781445388965570000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`h1 {\n   font-size: 2em;\n   -webkit-margin-before: 0.67em;\n   -webkit-margin-after: 0.67em;\n}`, `61781445388965570000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">h1</span> <span class="token punctuation">{</span>\n   <span class="token property">font-size</span><span class="token punctuation">:</span> 2em<span class="token punctuation">;</span>\n   <span class="token property">-webkit-margin-before</span><span class="token punctuation">:</span> 0.67em<span class="token punctuation">;</span>\n   <span class="token property">-webkit-margin-after</span><span class="token punctuation">:</span> 0.67em<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>那么，假设页面没有任何 CSS 重置，根元素 font-size 就是默认的 16px，请问：此时<code class="language-text">&lt;h1&gt;</code>元素 margin-before 的像素计算值是多少？</p>\n<p>如果对 em 了解不够，很容易认为 1em 大小就是 16px，于是计算值是 <code class="language-text">16px × 0.67 = 10.72px</code>，实际上这是错误的。</p>\n<p>我们可以这样想，假设 <code class="language-text">&lt;h1&gt;</code> 里面有汉字，此时汉字的高度是多少？这个高度就是此时 1em 大小。<code class="language-text">&lt;h1&gt;</code> 元素此时 font-size 是 2em，算一下就是 32px，因此，此时里面汉字的高度应该是 32px，也就是说，此时<code class="language-text">&lt;h1&gt;</code>元素的 1em 应该是 32px，于是 margin-before 的像素计算值为 <code class="language-text">32px × 0.67 = 21.44px</code>，和浏览器自己的计算值一样，如图 8-4 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2020-01-13-15-15-42-1bf2eb3d92fd3fe07d9f3f18a628b52e-4c7f3.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 384px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 41.92708333333333%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAABKklEQVQY001Qi46DIBD0/z+uD2MkqGe1obSaCoIilVO5OWmTToIs7u7szEZ6GIwQNs+nspybZqJ0+vmZ29ZQ+ivE5v22rtsHTdM8Ho+6rp1z3vtI9r243VQcK0p1XcvzuSdkqGuVpqoozDBMHxhjGGNVVRFClFLoj5TWQ9uOhJiytJwPaWqKAsFUVYtzy7Ks67rsQICZUsrwhJBISNkx1p9OGKguF3E4yCTRjIk41pwba80HGE4phezX6zWO4zzPEQhAieM3GPQbJji3R/+f/X4HIQ5Yd0Qhd71e8zzHPrTW1lrI45zfOBdCIJVlGawWRQGroSBwvZvRhjTqns8nJAUu9LAd2Q5oRlmLBY3ju/lbG1hRkSQJBnZdh92AC1bv9zt+Ho9HMH4b+QO7rL/fNhCp+QAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2020 01 13 15 15 42" title="" data-src="/static/2020-01-13-15-15-42-1bf2eb3d92fd3fe07d9f3f18a628b52e-4c7f3.png" data-srcset="/static/2020-01-13-15-15-42-1bf2eb3d92fd3fe07d9f3f18a628b52e-370ca.png 200w,\n/static/2020-01-13-15-15-42-1bf2eb3d92fd3fe07d9f3f18a628b52e-4c7f3.png 384w" data-sizes="(max-width: 384px) 100vw, 384px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>乍一看，似乎出现了死循环悖论：<code class="language-text">font-size: 2em</code>，于是 1em 变成 32px，那此时的 2em 不又是 64px，然后又……</p>\n<p>正如前面提到过的一样，CSS 世界的渲染是一次渲染，是不会有死循环的。这里是先计算 font-size，然后再计算给其他使用 em 单位的属性值大小。</p>\n<p>总结如下：在 CSS 中，1em 的计算值等同于当前元素所在的 font-size 计算值，可以将其想象成当前元素中（如果有）汉字的高度。</p>\n<p>所有相对单位的好处都是一样的，样式表现更具有弹性。例如，理论上，有一个布局，希望小屏时整体缩小，大屏时再弹性扩大，此时就可以让所有元素宽高尺寸等都使用 em，于是，最后只要改变布局祖先元素的 font-size 大小就可以实现整体的弹性变化。</p>\n<p>这种策略很棒，也确实可行，但是有一个比较麻烦的事情，它和上面 <code class="language-text">&lt;h1&gt;</code> 元素计算一样的麻烦，em 是根据当前 font-size 大小计算的，一旦布局中出现标题这种跟基础 font-size 大小不一样的场景的时候，标题里面所有元素 em 都要重新计算一遍，甚为麻烦，最终的成品维护成本就比较高了。</p>\n<p>正是由于这种局限性，另外一个和 font-size 密切相关的单位出现了，就是 rem，即 root em，顾名思义，就是根元素 em 大小。em 相对于当前元素，rem 相对于根元素，本质差别在于当前元素是多变的，根元素是固定的，也就是说，如果使用 rem，我们的计算值不会受当前元素 font-size 大小的影响，假设 <code class="language-text">&lt;h1&gt;</code> 的默认 CSS 是这样：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="88411091691688950000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`h1 {\n   font-size: 2em;\n   -webkit-margin-before: 0.67rem;\n   -webkit-margin-after: 0.67rem;\n}`, `88411091691688950000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">h1</span> <span class="token punctuation">{</span>\n   <span class="token property">font-size</span><span class="token punctuation">:</span> 2em<span class="token punctuation">;</span>\n   <span class="token property">-webkit-margin-before</span><span class="token punctuation">:</span> 0.67rem<span class="token punctuation">;</span>\n   <span class="token property">-webkit-margin-after</span><span class="token punctuation">:</span> 0.67rem<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>那么 2em 的 font-size 计算值会被忽略，直接使用根元素的 16px 进行计算，于是 margin-before 计算值是 16 像素 ×0.67 = 10.72 像素。</p>\n<p>因此，要想实现带有缩放性质的弹性布局，使用 rem 是最佳策略，但 rem 是 CSS3 单位，IE9 以上浏览器才支持，需要注意兼容性，我这里就不再多介绍了。</p>\n<p>回到 em 单位。em 实际上更适用于图文内容展示的场景，对此进行弹性布局。例如 <code class="language-text">&lt;h1&gt;～&lt;h6&gt;</code> 以及 <code class="language-text">&lt;p&gt;</code> 等与文本内容展示的元素的 margin 都是用 em 作为单位，这样，当用户把浏览器默认字号从“中”设置成“大”或改成“小”的时候，上下间距也能根据字号大小自动调整，使阅读更舒服。</p>\n<p>再举个适用于 em 的场景，如果我们使用 SVG 矢量图标，建议设置 SVG 宽高如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="79374783033593700000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`svg {\n   width: 1em;\n   height: 1em;\n}`, `79374783033593700000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">svg</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 1em<span class="token punctuation">;</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 1em<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>这样，无论图标是个大号文字混在一起还是和小号文字混在一起，都能和当前文字大小保持一致，既省时又省力。</p>\n<h2 id="理解-font-size-的关键字属性值"><a href="#%E7%90%86%E8%A7%A3-font-size-%E7%9A%84%E5%85%B3%E9%94%AE%E5%AD%97%E5%B1%9E%E6%80%A7%E5%80%BC" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>理解 font-size 的关键字属性值</h2>\n<p>font-size 支持长度值，如 1em，也支持百分比值，如 100%。这两点想必众所周知，但 font-size 还支持关键字属性值这一点怕是就有不少人不清楚了。</p>\n<p>font-size 的关键字属性值分以下两类。</p>\n<ol>\n<li>\n<p><strong>相对尺寸关键字。</strong></p>\n<p>指相对于当前元素 font-size 计算，包括：</p>\n<ul>\n<li>larger：大一点，是 <code class="language-text">&lt;big&gt;</code> 元素的默认 font-size 属性值。</li>\n<li>smaller：小一点，是 <code class="language-text">&lt;small&gt;</code> 元素的默认 font-size 属性值。</li>\n</ul>\n</li>\n<li>\n<p><strong>绝对尺寸关键字。</strong></p>\n<p>与当前元素 font-size 无关，仅受浏览器设置的字号影响。注意这里的措辞，是“浏览器设置”，而非“根元素”，两者是有区别的。</p>\n<ul>\n<li>xx-large：好大好大，和 <code class="language-text">&lt;h1&gt;</code> 元素计算值一样。</li>\n<li>x-large：好大，和 <code class="language-text">&lt;h2&gt;</code> 元素计算值一样。</li>\n<li>large：大，和 <code class="language-text">&lt;h3&gt;</code> 元素计算值近似</li>\n<li>medium：不上不下，是 font-size 的初始值，和 <code class="language-text">&lt;h4&gt;</code> 元素计算值一样。</li>\n<li>small：小，和 <code class="language-text">&lt;h5&gt;</code> 元素计算值近似。</li>\n<li>x-small：好小，和 <code class="language-text">&lt;h6&gt;</code> 元素计算值近似。</li>\n<li>xx-small：好小好小，无对应的 HTML 元素。</li>\n</ul>\n</li>\n</ol>\n<p>其中，相对尺寸关键字 larger 和 smaller 由于计算的系数在不同浏览器下差异很大，因此实用价值有限，只有类似文档页、帮助页这类对文字尺寸要求不高的场合才有用；而绝对尺寸关键字的实用性要大一些，而且在某些场合是推荐使用的关键字属性值，这个要慢慢讲。</p>\n<p>下面两个 CSS 代码有什么区别？</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="18623759929333207000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`html {\n   font-size: 14px;\n}\n\nhtml {\n   font-size: 87.5%;\n}`, `18623759929333207000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">html</span> <span class="token punctuation">{</span>\n   <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">html</span> <span class="token punctuation">{</span>\n   <span class="token property">font-size</span><span class="token punctuation">:</span> 87.5%<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>在绝大多数场景下，两者没有差别，全都计算为 14px，但是如果用户对浏览器的字号进行了调整，例如，把默认的“中”设置成了“大”，如图 8-5 所示（截自 Chrome 浏览器），那么此时，font-size: 14px 计算值还是 14px，但 font-size: 87.5% 的计算值则大了一圈，于是差别就出现了。如果是像素单位 font-size，用户改变浏览器的默认字号后，页面会微丝不动；如果是百分比值 font-size，则字号相应放大，这就涉及用户体验和可访问性问题了。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-14-13-54-00-e41e5062f8fdbd9552cf845c2b9ac92f-f0556.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 596px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 59.56375838926174%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB7ElEQVQoz1VSy46bMBTlN6tuqq7bZX+kf9FNNYuRKs1ITTaV2pm0E5WnDcZgA+ERCIQBAhjoJUyT9ujKutb1uY9zLVnEXq9WP75/+/W0jaI4CILdbheChefzamEUzogA59N1XYlSxzRNzlmaZsMwCCG6XuRlUzyfjlV3sbw8Hcq6LMvDIQeU5TMhtpQkyX6/T/bZ9BetmBREMWFemLIgAeO7vUl97IQmxpvHzXa7VWRZUVQJGkjTNI5jyCHEAGQxTrrFZcyySqRld7WibU9gM/qum9sGGpA93+Oc930/k4fpWBz6tpr+xzAO4ziCs5ygjuR5XlW9vFtCdTveq4c71KzouKZiTYev9nBniY3XQQZIANK8kFVNe3h4XO4LuThNH75Urz8d39xO72/ydzfHt7fTq8/jx4el/j+V58XMGwijOIIRYA+E0qefG+X3NuCu59iujcOABZxijFVNRxib2KzqBsaUsiwjNoGARSzOmONQFaAjYjs6MjUDqwYyTEszkCyfI7ouy7LjuoHvSxc9mrqmNoEdNqe2rutdEBR5fixykBOKeIzB36COG8XJRTNpPGMmNw0oTimFGaB/w4AaBsbIcVxwETIgBH6czORhFm68Vl5S+D7XNA2ZlqrAL1BgQGiBMWZZBHKen1zxB7rpj8T9dgNrAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 14 13 54 00" title="" data-src="/static/2021-12-14-13-54-00-e41e5062f8fdbd9552cf845c2b9ac92f-f0556.png" data-srcset="/static/2021-12-14-13-54-00-e41e5062f8fdbd9552cf845c2b9ac92f-ae33b.png 200w,\n/static/2021-12-14-13-54-00-e41e5062f8fdbd9552cf845c2b9ac92f-daf23.png 400w,\n/static/2021-12-14-13-54-00-e41e5062f8fdbd9552cf845c2b9ac92f-f0556.png 596w" data-sizes="(max-width: 596px) 100vw, 596px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>正常情况下，14 像素的文字大小是足够的，但是，如果是高度近视的用户，或者上班急急忙忙忘记戴眼镜，或者在投影仪上投影网页内容，此时就有大字号浏览网页的需求，如果使用固定的像素单位，显然对这些使用场景是不友好的。</p>\n<p>好在浏览器还提供了“网页缩放”功能，但是此功能也是有局限性的：如果网页是定宽非响应式的，则网页放大后窗体以外的内容就看不到了，在 Chrome/Firefox 浏览器下甚至连个水平滚动条都没有，说不定重要信息就会看不到。由此可见，我们是不能轻易忽视浏览器字号设置功能的。</p>\n<p>然而，现代网页设计得很精致，要想网页布局跟随字体内容缩放实在两难，要么使用 em，但 em 计算与当前 font-size 耦合，不好维护；要么使用 rem，但 IE8 不支持，桌面端使用尴尬。因此，现实的压迫导致我们只能使用 px 进行布局，尤其桌面端网页。</p>\n<p>如何权衡“易于实现维护”“视觉还原”“可访问性”这三者，我这里有两个建议。</p>\n<ol>\n<li>\n<p>即使是定宽的传统桌面端网页，也需要做响应式处理，尤其是针对 1200 像素宽度设计的网页，但只需要响应到 800 像素即可，可以保证至少有 1.5 倍的缩放空间，如果做到这一步，那么是否需要响应浏览器的字号设置这一点就可以忽略。</p>\n</li>\n<li>\n<p>如果因各种原因无法做响应式处理，也没有必要全局都使用相对单位，毕竟成本等现实问题摆在那里，其实只需要在图文内容为主的重要局部区域使用可缩放的 font-size 处理即可。例如，小说网站的阅读页、微信公众号文章展示区、私信对话内容区、搜索引擎的落地页、评论区等，都强烈建议摒弃 px 单位，而采用下面的实践策略。</p>\n<ul>\n<li>\n<p>容器设置 font-size: medium，此时，这个局部展示区域的字号就跟着浏览器的设置走了，默认计算值是 16px。</p>\n</li>\n<li>\n<p>容器内的文字字号全部使用相对单位，如百分比值或者 em 都可以，然后基于 16px 进行转换。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="12563565592643467000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.article {\n font-size: medium;\n}\n.article h1 {\n font-size: 2em;\n margin: 0.875em 0;\n}\n.article p {\n font-size: 87.5%; /* 默认字号下计算值是 14px */\n margin: 1em 0;\n}`, `12563565592643467000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.article</span> <span class="token punctuation">{</span>\n <span class="token property">font-size</span><span class="token punctuation">:</span> medium<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token selector">.article h1</span> <span class="token punctuation">{</span>\n <span class="token property">font-size</span><span class="token punctuation">:</span> 2em<span class="token punctuation">;</span>\n <span class="token property">margin</span><span class="token punctuation">:</span> 0.875em 0<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token selector">.article p</span> <span class="token punctuation">{</span>\n <span class="token property">font-size</span><span class="token punctuation">:</span> 87.5%<span class="token punctuation">;</span> <span class="token comment">/* 默认字号下计算值是 14px */</span>\n <span class="token property">margin</span><span class="token punctuation">:</span> 1em 0<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n</ul>\n</li>\n</ol>\n<p>同时使用自适应流体布局，间距什么的也使用相对单位，例如上面 margin 使用的是 em 单位。于是，当用户改变了浏览器的字号后，整个阅读区域的所有字样甚至布局都会跟着放大，文字一下子就看清楚了。这种局部处理的好处在于，页面的导航、侧边栏这些不需要长时间阅读的模块还是原来的像素布局，还是那么精致，丝毫不受影响。就这么很微小的变动，就可以让你的网页在可访问性这一块超越大多数的网站，何乐而不为？</p>\n<p>可以看到，绝对尺寸关键字在实际项目中还有很有价值的，但有价值的仅仅是 medium，至于其他关键字，作用仅限于字面上的那点儿，大家了解一下即可。</p>\n<h2 id="font-size-0-与文本的隐藏"><a href="#font-size-0-%E4%B8%8E%E6%96%87%E6%9C%AC%E7%9A%84%E9%9A%90%E8%97%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>font-size: 0 与文本的隐藏</h2>\n<p>桌面 Chrome 浏览器下有个 12px 的字号限制，就是文字的 font-size 计算值不能小于 12px，我猜是因为中文，如宋体，要是小于 12px，就会挤成成一团，略丑，Chrome 看不下去，就直接禁用了。</p>\n<p>正是这种限制导致我们在使用 em 或 rem 进行布局的时候，不能这么处理：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="6661866711338504000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`html {\n   font-size: 62.5%;\n}`, `6661866711338504000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">html</span> <span class="token punctuation">{</span>\n   <span class="token property">font-size</span><span class="token punctuation">:</span> 62.5%<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>理论上，此时根字号计算值是 16px*0.625=10px，于是 <code class="language-text">width: 14px</code> 可以写成 <code class="language-text">width: 1.4em</code>，省了很多计算的麻烦。但是，在 Chrome 下由于 12px 的限制，根字号计算值实际不是 10px，而是 12px，所以，可以试试处理成这样：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="45073264947667060000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`html {\n   font-size: 625%;\n}`, `45073264947667060000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">html</span> <span class="token punctuation">{</span>\n   <span class="token property">font-size</span><span class="token punctuation">:</span> 625%<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>此时根字号计算值是 100px，既计算无忧，又没有 12px 的最小字号限制。</p>\n<p>但是我个人建议还是不要这样处理，尤其使用 em 的时候，因为 font-size 属性和 line-height 属性一样，由于继承性的存在，会影响贯穿整个网页，100px 的环境 font-size 一定会将平时不显山露水的底边对齐问题、间隙问题等放大，导致出现一些明显的样式问题，如果对 CSS 了解不是很深刻，怕是很难明白为什么会发生这样的问题。同时这样做也限制了 px 等其他单位的使用，有时候是比较要命的。</p>\n<p>因此，我的建议是仍基于浏览器默认的字号进行相对计算，也就是 medium 对应的 16px，16 这个数字是一定可以整除的，因此计算成本还行，或者使用 Sass 或 Less 之类的工具辅助计算。</p>\n<p>还是回到字号限制的问题。实际上，并不是所有小于 12px 的 font-size 都会被当作 12px 处理，有一个值例外，那就是 0，也就是说，如果 font-size:0 的字号表现就是 0，那么文字会直接被隐藏掉，并且只能是 <code class="language-text">font-size: 0</code>，哪怕设置成 font-size: 0.0000001px，都还是会被当作 12px 处理的。</p>\n<p>因此，如果希望隐藏 logo 对应元素内的文字，除了 text-indent 缩进隐藏外，还可以试试下面这种方法：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="81369178284423000000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.logo {\n   font-size: 0;\n}`, `81369178284423000000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.logo</span> <span class="token punctuation">{</span>\n   <span class="token property">font-size</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<h1 id="字体属性家族的大家长-font-family"><a href="#%E5%AD%97%E4%BD%93%E5%B1%9E%E6%80%A7%E5%AE%B6%E6%97%8F%E7%9A%84%E5%A4%A7%E5%AE%B6%E9%95%BF-font-family" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>字体属性家族的大家长 font-family</h1>\n<p>font-family 默认值由操作系统和浏览器共同决定，例如 Windows 和 OS X 下的 Chrome 默认字体不一样，同一台 Windows 系统的 Chrome 和 Firefox 浏览器默认字体也不一样。</p>\n<p>font-family 支持两类属性值，一类是“字体名”，一类是“字体族”。“字体名”很好理解，就是使用的对应字体的名称。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="49026917099726730000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`body {\n   font-family: simsun;\n}`, `49026917099726730000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">body</span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> simsun<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>就表示使用的是“宋体”。如果字体名包含空格，需要使用引号包起来。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="20592410007928600000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`body {\n   font-family: \'Microsoft Yahei\';\n}`, `20592410007928600000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">body</span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">\'Microsoft Yahei\'</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>根据我的实践，可以不用区分大小写。如果有多个字体设定，从左往右依次寻找本地是否有对应的字体即可。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="42993626700543010000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`body {\n   font-family: \'PingFang SC\', \'Microsoft Yahei\';\n}`, `42993626700543010000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">body</span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">\'PingFang SC\'</span><span class="token punctuation">,</span> <span class="token string">\'Microsoft Yahei\'</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>就是先寻找是否本地有 PingFang SC 字体；如果没有，则继续寻找本地是否有 Microsoft Yahei 字体；如果都没找到，就使用默认值。</p>\n<p>但是，“字体族”分为很多类，MDN 上文档分类如下：</p>\n<ul>\n<li>font-family: serif;</li>\n<li>font-family: sans-serif;</li>\n<li>font-family: monospace;</li>\n<li>font-family: cursive;</li>\n<li>font-family: fantasy;</li>\n<li>font-family: system-ui;</li>\n</ul>\n<p>具体含义解释如下。</p>\n<ul>\n<li>serif：衬线字体。</li>\n<li>sans-serif：无衬线字体。</li>\n<li>monospace：等宽字体。</li>\n<li>cursive：手写字体。</li>\n<li>fantasy：奇幻字体。</li>\n<li>system-ui：系统 UI 字体。</li>\n</ul>\n<p>对于中文网站，cursive 和 fantasy 应用场景有限，因此这里不予探讨，这里着重介绍一下衬线字体、无衬线字体和等宽字体。</p>\n<h2 id="了解衬线字体和无衬线字体"><a href="#%E4%BA%86%E8%A7%A3%E8%A1%AC%E7%BA%BF%E5%AD%97%E4%BD%93%E5%92%8C%E6%97%A0%E8%A1%AC%E7%BA%BF%E5%AD%97%E4%BD%93" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>了解衬线字体和无衬线字体</h2>\n<p>字体分衬线字体和无衬线字体。所谓衬线字体，通俗讲就是笔画开始、结束的地方有额外装饰而且笔画的粗细会有所不同的字体。网页中常用中文衬线字体是“宋体”，常用英文衬线字体有 Times New Roman、Georgia 等。无衬线字体没有这些额外的装饰，而且笔画的粗细差不多，如中文的“雅黑”字体，英文包括 Arial、Verdana、Tahoma、Helivetica、Calibri 等</p>\n<p>以前人们排正文喜欢使用衬线字体，但是如今，不知是审美疲劳还是人们更加追求简洁干净的缘故，更喜欢使用无衬线字体，如“微软雅黑”或者“苹方”之类的字体。</p>\n<p>在 CSS 世界中，字体是有对应的属性值的，如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="7895292878194704000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`font-family: serif; /* 衬线字体 */\nfont-family: sans-serif; /* 无衬线字体 */`, `7895292878194704000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">font-family</span><span class="token punctuation">:</span> serif<span class="token punctuation">;</span> <span class="token comment">/* 衬线字体 */</span>\n<span class="token property">font-family</span><span class="token punctuation">:</span> sans-serif<span class="token punctuation">;</span> <span class="token comment">/* 无衬线字体 */</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>我们在移动端 Web 开发的时候，虽然设备的默认中文字体不一样，但都是无衬线，都挺好看的，因此可以直接使用下面的 CSS 代码：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="17703122401102078000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`body {\n   font-family: sans-serif;\n}`, `17703122401102078000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">body</span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> sans-serif<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>没有必要特别指定中文字体，否则说不定会画蛇添足。</p>\n<p>serif 和 sans-serif 还可以和具体的字体名称写在一起，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="38310728529608530000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`body {\n   font-family: \'Microsoft Yahei\', sans-serif;\n}`, `38310728529608530000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">body</span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">\'Microsoft Yahei\'</span><span class="token punctuation">,</span> sans-serif<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>但是需要注意的是，serif 和 sans-serif 一定要写在最后，因为在大多数浏览器下，写在 serif 和 sans-serif 后面的所有字体都会被忽略。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="56029467019384730000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`body {\n   font-family: sans-serif, \'Microsoft Yahei\';\n}`, `56029467019384730000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">body</span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> sans-serif<span class="token punctuation">,</span> <span class="token string">\'Microsoft Yahei\'</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>在 Chrome 浏览器下，后面的 Microsoft Yahei 字体是不会被渲染的。据我的推测，有可能浏览器认为当前“字体族”已经满足了文本渲染的需要，没必要再往后解析了</p>\n<h2 id="等宽字体的实践价值"><a href="#%E7%AD%89%E5%AE%BD%E5%AD%97%E4%BD%93%E7%9A%84%E5%AE%9E%E8%B7%B5%E4%BB%B7%E5%80%BC" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>等宽字体的实践价值</h2>\n<p>所谓等宽字体，一般是针对英文字体而言的。据我所知，东亚字体应该都是等宽的，就是每个字符在同等 font-size 下占据的宽度是一样的。但是英文字体就不一定了，我随便写一个单词，就 iMac 吧，大家很明显地发现这个字符 i 要比 M 占据的宽度小。如果这样看着还不够清楚，那我换一种呈现方式，上下两行，上一行 6 个 i，下一行 6 个 M，如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="68542056926637970000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`iiiiii\nMMMMMM`, `68542056926637970000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title=""\n              >\n                \n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">iiiiii\nMMMMMM</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>实际的两行文本的宽度可能就如图 8-6 所示这般差异明显。</p>\n<p>但是，如果是等宽字体（可以让英文字符同等宽度显示的字体就称为“等宽字体”），如 Consolas、Monaco、monospace，则宽度表现就不一样了，如图 8-7 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-15-11-28-20-1e4bef06e0935327554432992b9e4271-8aa68.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 758px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 17.150395778364118%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAAsSAAALEgHS3X78AAAAbUlEQVQI14WNQQ6DMAwE8/83lkDcUBuRCuQEirBLapVbJdSV9jCH2XW1VhUhItV3/RdmfqY0zfPxRWcVEd/c7gBd2yENqnrhHojoW49EJ7tSymvb7BlCgAAxxmVdfySbyznLvpvcP/o0jobM+QNTTK0T0xvTPwAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 15 11 28 20" title="" data-src="/static/2021-12-15-11-28-20-1e4bef06e0935327554432992b9e4271-8aa68.png" data-srcset="/static/2021-12-15-11-28-20-1e4bef06e0935327554432992b9e4271-9e0f4.png 200w,\n/static/2021-12-15-11-28-20-1e4bef06e0935327554432992b9e4271-8ee5b.png 400w,\n/static/2021-12-15-11-28-20-1e4bef06e0935327554432992b9e4271-8aa68.png 758w" data-sizes="(max-width: 758px) 100vw, 758px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>等宽字体在 Web 中有什么用呢？</p>\n<ol>\n<li>\n<p>等宽字体与代码呈现</p>\n<p>首先等宽字体利于代码呈现。对于写代码的人来说，无论是什么语言，易读是第一位，使用等宽字体，我们阅读起来会更轻松舒服。因此，一般编辑器使用的字体或者 Web 上需要呈现源代码的字体都是等宽字体。例如，即将出现的演示页面的源代码如图 8-8 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-15-11-30-20-2e255f122f2cc56180ecf01cc7d98fd1-5df43.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 503px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 41.5506958250497%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAABLElEQVQY05VRR27EMAz0/z+318W6xyq25CKrd0deZIEAOWVAELzMDIespml6PB5t2wruvqaEcDpZQEgvq8Q7Ahv4WqfSD86vN/J1pXyldA9VjNFa3492HAMlEQINkZl3OlJATkoogRhCBLedKWWlNEIYCMKM036E6hZLaRjDMOaVRgDUMCp44Hp+DWRkp3DWWWtOprvG9n0g1BVKcS5VhZCEiE3rJxAZi2Qx82JXvqEDz2yR2sQbQUpXDDFOB/PXB5UxnpJESDYmXf9EISets/ORK3Xqs5TzXorIheNaMMWE5sY4fkal4vtev8iCx+O4N9+52OTG7ZlSPnbPeVRe7XKTVpZojGWp/jj/PCDfkkrK+lXPJbQ1fdc8n08IUFO3bddvGx2GTr4F8sf+G9SJyPCpbeFTAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 15 11 30 20" title="" data-src="/static/2021-12-15-11-30-20-2e255f122f2cc56180ecf01cc7d98fd1-5df43.png" data-srcset="/static/2021-12-15-11-30-20-2e255f122f2cc56180ecf01cc7d98fd1-ac36e.png 200w,\n/static/2021-12-15-11-30-20-2e255f122f2cc56180ecf01cc7d98fd1-3a669.png 400w,\n/static/2021-12-15-11-30-20-2e255f122f2cc56180ecf01cc7d98fd1-5df43.png 503w" data-sizes="(max-width: 503px) 100vw, 503px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n<li>\n<p>等宽字体与图形呈现案例一则</p>\n<p>假设某工具有这么一个功能：通过下拉选择，可以改变元素的边框样式，也就是 borderStyle 在 solid/dashed/dotted 间切换。</p>\n<p>大家都知道，原生的 <code class="language-text">&lt;select&gt;</code> 的 <code class="language-text">&lt;option&gt;</code> 元素的 innerHTML 只能是纯 text 字符，不能有 html，也不支持伪元素，因此，要模拟 solid、dashed 和 dotted，只能使用字符，而字符有长有短，可以模拟成像样的规整的图形吗？</p>\n<p>可以的，试试使用等宽字体。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/g72o6b?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n</li>\n<li>\n<p>ch 单位与等宽字体布局</p>\n<p>ch 和 em、rem、ex 一样，是 CSS 中和字符相关的相对单位。和 ch 相关的字符是 0，没错，就是阿拉伯数字 0。1ch 表示一个 0 字符的宽度，所以 6 个 0 所占据的宽度就是 6ch。</p>\n<p>由于 ch 是个 CSS3 单位，且 IE9 浏览器的宽度和其他浏览器明显不一样，因此此处不展开，但可以提一提一些不错的应用场景。例如，有些输入框是输入手机号的，在中国，手机号是 11 位，因此我们可以设置该输入框宽度为 11ch，同时让字体等宽，则用户一眼就能看出自己是否少输入或者多输入了 1 位数字。又如，我们想实现一个屏幕上代码一个一个出现的动效，如果代码是等宽字体，此时使用 ch 单位来控制宽度，配合 overflow 属性和 CSS animation 就能在完全不使用 JavaScript 的情况下将此效果模拟出来。当然，还有其他一些应用场景，不一一说明。</p>\n</li>\n</ol>\n<h2 id="中文字体和英文名称"><a href="#%E4%B8%AD%E6%96%87%E5%AD%97%E4%BD%93%E5%92%8C%E8%8B%B1%E6%96%87%E5%90%8D%E7%A7%B0" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>中文字体和英文名称</h2>\n<p>使用中文字体，就必须要知道其对应的英文名称，下面是一些常见中文字体对应的 font-family 英文属性名称。</p>\n<ol>\n<li>Windows 常见内置中文字体和对应英文名称见图 8-10</li>\n<li>OS X 系统内置中文字体和对应英文名称见图 8-11</li>\n<li>Office 软件安装新增中文字体和对应英文名称见图 8-12</li>\n<li>其他一些中文字体和对应英文名称见图 8-13</li>\n</ol>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-15-13-39-01-82d0a90f746c275e5e4a267ccdec2e89-27a33.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 352px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 152.27272727272728%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAeCAIAAACjcKk8AAAACXBIWXMAAA7DAAAOwwHHb6hkAAADBklEQVQ4y41ViXKiQBDl//9od2t3o6lNjMYLPBDlBgFFQeWcAbMPiBExqcqrcQqn53X3dL8BJopjjJRQQrM4SesjjOKEEEwYSUoaViwxp9Op8/Ty++ffbncwHrLPT113fyBZHoTha2/468efh9+tQZ/999jZ7P2UZhGYcFT6YsI43u08XTNte7PZuGvTPpzChFBs2u99TTMMY+04rqGbxyDC+juzIhNK325xvuCr9QpZljFxHLMsO51OG7spSTVVm8/mmq6jHG93KMiEkDAMgyBoOM7zHOue55+OR+w736Eg00va9+avEq6lHYWd585sxue3aadpYtu2ICyd7fbtMxTkJIlFUTLNdSMaMnK3m+Xyg3wuf+fmmev+chy2HPfVbuyhGUXkRNP09XptWZa5trIsvzimrrvz/QPagZp5nnc4HHzPRxWvkaMwaLdbvd5rq/XQaj8m6Xv9IL9ZgbksyyzHyooirlbD4UjR9CuZflskdwWjxZkLjZMUQLdxBT4aDRNcV12BHc9oPgyg4aFqVdR5eh6zY9S82+2NRmNQ4BhdmE2ni4WgqSqSX61WgiDwiwVOMuEm7m6PDMvIAKYyThWqUlhhItWUIg5M2BYEIZayKnL9zF8p7N30dq76XD1nFCKJY47lJFn52FzRguC0EmXcijAKG/K4EYnv+6cgQJ4NG3qLEt63o0amV4XlNTQuRn4HOGWiKOJ5XipRD05IYllru0QYRZ9HBhkawg7TNOtkSsl2uzFKQKTfSPtyKxpp35zosqdIGwU7Ho5Ao2Cw4Q5AKpihgHu1FpEhEMMwDeTceBkkia7phcI0VZYVvCs/unhDrtKplEyuoFVJCxmX64WVXoEVpu7vO5epDua194JWiaI4m89olpu62h8MhOWCX/Cqqm5sGy0csyzHcStJXi2FdvthISwlUbEchzEMzcGnwnEc28aXyXW3kijyfHGNFFl2nI2NdluWqiqSJKNt4O/23h7wPKauZ01VRuPRYNCfcIg1FRY8N5lOJhNFlsDpD4b4Wz/mf7mbuPaXmxUHAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 15 13 39 01" title="" data-src="/static/2021-12-15-13-39-01-82d0a90f746c275e5e4a267ccdec2e89-27a33.png" data-srcset="/static/2021-12-15-13-39-01-82d0a90f746c275e5e4a267ccdec2e89-a9510.png 200w,\n/static/2021-12-15-13-39-01-82d0a90f746c275e5e4a267ccdec2e89-27a33.png 352w" data-sizes="(max-width: 352px) 100vw, 352px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-15-13-39-14-e964d4aa205be3bb736a3ec31baa91ee-2a196.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 762px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 90.15748031496064%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAAAsSAAALEgHS3X78AAACQElEQVQ4y0WTiXajMAxF+f8f6wfM2pmmlECGzTbYZgsEOtcWbXVyHC960tOTSLLs+vP7779/Lsr0WZb/+PYrTa+m65tW970tbrfn5+fXy2Ucx7Ztizwvy/IfVpZKqaQsK62Ms37bd2sd10rp9fG4r6u11hhT1zWw4/39vtw7Y8ZhsH0/DKP3PuFtnuf3aN65pmnatlnXdX88nHNtq/I8J8RxHLg10bQxOA/DkHBIX1OycXbOdn0vgbZt895ppUO2aQK8LDPhvPOEDmAyG635URJnVsgcxy5gYmdvwbiUVFAgAYHOzJw7003jFGh7wg3xCXCgzRvCUDw30zh2HcwoeIhgn0DMGH2eIeqc0H7EmiMt42LmZQ60acE0zTGTD5mts6IZtHm+3+8C5rmsyltxg4XwVFp9qesjbZyWZREwrKR+ycwrN/IKzPYhzbHvJzj2RgltvDmQjQ2qsFIwDvQ/1DxNSmsu9xPsk6oq0VNahx6AcdqiIcGVkapK6Y21fVVV9gMc1KYZT09PDClnxi4vis8+B8GUYmUfBFuWcRih/ZXZdB1/4zjEmget9TQvZ83eh5q7bl03UUTatu/HWTNnRneQMYitksCiNjyZ33UT8ERoAskgBDBIPEQwvKUTqBXH08tX8YitGuOEHdFO2kHtjxnicymKQuSJ4+lfXl4ul9fP4W2aWkb1BKMwMwiY5Owhxi17F62OJiPJyiueUzQ2CRykSK1VcSugXVd1lmV892maRtr19XrlhuqK4oZGogjA/6n9AH2sBjRgAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 15 13 39 14" title="" data-src="/static/2021-12-15-13-39-14-e964d4aa205be3bb736a3ec31baa91ee-2a196.png" data-srcset="/static/2021-12-15-13-39-14-e964d4aa205be3bb736a3ec31baa91ee-ac3c7.png 200w,\n/static/2021-12-15-13-39-14-e964d4aa205be3bb736a3ec31baa91ee-daea7.png 400w,\n/static/2021-12-15-13-39-14-e964d4aa205be3bb736a3ec31baa91ee-2a196.png 762w" data-sizes="(max-width: 762px) 100vw, 762px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-15-13-39-37-4fbc123eacb7a79030b0f8761b26bc35-dbf5d.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 789px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 83.7769328263625%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAIAAABSJhvpAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABUklEQVQ4y5WTyXKDMBBE/f9faaiUY5DQvm+4QU4qFS6WODBIeprpUXPTxt7vs5BqJXSev5SxPsTW2v7BuMUYrbVtb855Z137GR/BIQTwiBCUUsZgkJzxUqpzDjymBuCcs9a61hOOse0jmVNKSqlSCySneLSq4vk8c/AeCX0I77L3Ec29bO89SogxjTVMCFlOWEoRYxiAjTHTNOVSBM5QElNXzf3zeugNDgGccuaCS9nhkW4jOe4ZZkHD6jn+wkrpdSVwMaXs+SQ+phAT9r81o08AQKLz1/IopTA/DE8IfTy+Ic5Yh/3vq0Lm3m1IuMJaK845ArjIWqOkPP6FcwPgwyS1lNDv+eJtmOfXglobYw3SwEqn5pyEgLeLNX22/dMMC3HOsIocjHEpRK/0gHHexhiEzdNECNnotiwLoRQxeon7U1qxjaFyhtdGl2U91ghxPrwA9lblrIeGmsAAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 15 13 39 37" title="" data-src="/static/2021-12-15-13-39-37-4fbc123eacb7a79030b0f8761b26bc35-dbf5d.png" data-srcset="/static/2021-12-15-13-39-37-4fbc123eacb7a79030b0f8761b26bc35-604dc.png 200w,\n/static/2021-12-15-13-39-37-4fbc123eacb7a79030b0f8761b26bc35-70418.png 400w,\n/static/2021-12-15-13-39-37-4fbc123eacb7a79030b0f8761b26bc35-dbf5d.png 789w" data-sizes="(max-width: 789px) 100vw, 789px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h2 id="一些补充说明"><a href="#%E4%B8%80%E4%BA%9B%E8%A1%A5%E5%85%85%E8%AF%B4%E6%98%8E" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>一些补充说明</h2>\n<p>微软正黑体是一款全面支持 ClearType 技术的 TrueType 无衬线字体，用于繁体中文系统。相对应地，中国大陆地区用的是微软雅黑。但由于中国大陆和中国港、澳、台地区在各自的文字规范中对汉字的写法规定有很多细节上的不同，所以这两套字形在正式场合是不能混淆使用的。</p>\n<p>我们平常所说的“宋体”，指的都是“中易宋体”，英文名称 SimSun，“黑体”类似的是“中易黑体”。在 OS X 常见内置中文字体中我罗列了一个“宋体-简”，需要注意的是，这个“宋体- 简”和我们平常所说的“宋体”并不是同一个字体，其英文名称是“Songti SC”，字形表现也有差异。</p>\n<p>OS X 也就是苹果操作系统的字体名称中经常会出现“SC”，这个“SC”指的是“简体” （simplified chinese）的意思，相对应的还有“TC”，指的是“繁体”（traditional chinese）的意思。</p>\n<h1 id="字体家族其他成员"><a href="#%E5%AD%97%E4%BD%93%E5%AE%B6%E6%97%8F%E5%85%B6%E4%BB%96%E6%88%90%E5%91%98" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>字体家族其他成员</h1>\n<h2 id="貌似粗犷、实则精细无比的-font-weight"><a href="#%E8%B2%8C%E4%BC%BC%E7%B2%97%E7%8A%B7%E3%80%81%E5%AE%9E%E5%88%99%E7%B2%BE%E7%BB%86%E6%97%A0%E6%AF%94%E7%9A%84-font-weight" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>貌似粗犷、实则精细无比的 font-weight</h2>\n<p>font-weight 都支持哪些属性值。具体如下</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="93755049454199130000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 平常用的最多的 */\nfont-weight: normal;\nfont-weight: bold;\n/* 相对于父级元素 */\nfont-weight: lighter;\nfont-weight: bolder;\n/* 字重的精细控制 */\nfont-weight: 100;\nfont-weight: 200;\nfont-weight: 300;\nfont-weight: 400;\nfont-weight: 500;\nfont-weight: 600;\nfont-weight: 700;\nfont-weight: 800;\nfont-weight: 900;`, `93755049454199130000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 平常用的最多的 */</span>\n<span class="token property">font-weight</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>\n<span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>\n<span class="token comment">/* 相对于父级元素 */</span>\n<span class="token property">font-weight</span><span class="token punctuation">:</span> lighter<span class="token punctuation">;</span>\n<span class="token property">font-weight</span><span class="token punctuation">:</span> bolder<span class="token punctuation">;</span>\n<span class="token comment">/* 字重的精细控制 */</span>\n<span class="token property">font-weight</span><span class="token punctuation">:</span> 100<span class="token punctuation">;</span>\n<span class="token property">font-weight</span><span class="token punctuation">:</span> 200<span class="token punctuation">;</span>\n<span class="token property">font-weight</span><span class="token punctuation">:</span> 300<span class="token punctuation">;</span>\n<span class="token property">font-weight</span><span class="token punctuation">:</span> 400<span class="token punctuation">;</span>\n<span class="token property">font-weight</span><span class="token punctuation">:</span> 500<span class="token punctuation">;</span>\n<span class="token property">font-weight</span><span class="token punctuation">:</span> 600<span class="token punctuation">;</span>\n<span class="token property">font-weight</span><span class="token punctuation">:</span> 700<span class="token punctuation">;</span>\n<span class="token property">font-weight</span><span class="token punctuation">:</span> 800<span class="token punctuation">;</span>\n<span class="token property">font-weight</span><span class="token punctuation">:</span> 900<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>如果使用数值作为 font-weight 属性值，必须是 100 ～ 900 的整百数。这里的数值关键字和字母关键字之间是有对应关系的，例如，font-weight:400 实际上等同于 font-weight: normal，font-weight:700 等同于 font-weight:bold。</p>\n<p>因此 400 和 700 是文字粗细与否的重要临界点，加上最小的 100 和最大的 900，就构成了 font-weight 完整的字重临界点。知道这个有什么意义呢？意义就在于 lighter 和 bolder 这两个具有相对特定的关键字就是基于这 4 个临界点进行解析和渲染的。</p>\n<p>以下是 lighter 和 bolder 解析规则表</p>\n<table>\n<thead>\n<tr>\n<th align="center">继承的值</th>\n<th align="center">bolder</th>\n<th align="center">lighter</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align="center">100</td>\n<td align="center">400</td>\n<td align="center">100</td>\n</tr>\n<tr>\n<td align="center">200</td>\n<td align="center">400</td>\n<td align="center">100</td>\n</tr>\n<tr>\n<td align="center">300</td>\n<td align="center">400</td>\n<td align="center">100</td>\n</tr>\n<tr>\n<td align="center">400</td>\n<td align="center">700</td>\n<td align="center">100</td>\n</tr>\n<tr>\n<td align="center">500</td>\n<td align="center">700</td>\n<td align="center">100</td>\n</tr>\n<tr>\n<td align="center">600</td>\n<td align="center">900</td>\n<td align="center">400</td>\n</tr>\n<tr>\n<td align="center">700</td>\n<td align="center">900</td>\n<td align="center">400</td>\n</tr>\n<tr>\n<td align="center">800</td>\n<td align="center">900</td>\n<td align="center">700</td>\n</tr>\n<tr>\n<td align="center">900</td>\n<td align="center">900</td>\n<td align="center">700</td>\n</tr>\n</tbody>\n</table>\n<p>然而很多人发现 font-weight 无论是设置 300、400、500 还是 600，文字的粗细都没有任何变化，只有到 700 的时候才会加粗一下，感觉浏览器好像不支持这些数值，那么搞这么多档位不就是多余的吗？</p>\n<p>实际上，所有这些数值关键字浏览器都是支持的，之所以没有看到任何粗细的变化，是因为我们的系统里面缺乏对应粗细的字体。尤其我们做桌面端项目时，大部分用户都是使用 Windows 系统，而 Windows 系统中的中文字体粗细就一个型号，如“宋体”，或者说“微软雅黑”，因此，最终的效果就是 CSS 层面的“加粗”和“正常尺寸” 两种表现。</p>\n<p>假如我们的操作系统安装了该字体家族全部的字重字体，则设置 300、400、500 时，彼此之间就能看出明显的变化了。例如，OS X 系统中的“苹方”，又如我这里即将要演示的“思源黑体”。“思源黑体”是一款免费的开源字体，我自己电脑上的版本有 7 个字重，如图 8-14 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-19-22-39-31-23bd8a6cede3dd198c7fdd0bbb1c9249-db488.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 292px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 88.35616438356165%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACwklEQVQ4y5VT2XbaMBTk/7+pUILjGGIw4H2VvNuSbQJhS8OWEdCXvlUHOMjS3Lkzd9wzTNfzPEWWtZmmqu+Dfl8aSaORpLwp4/F49PIykobD38PXV/lNeZtpGucc94/H4+126xGaHA6Hqix403RdV1dVVZRFUbCasbouyxJHZYGn2NWHO6ZpGkAE2PXpx8fa91xCKCXE1HXLNG3Ldh03DEPTMgPfcVwHDx3Lmc+mEaG/BoPtdivANE62ux2rq6btOON1VYIcfJyJVdV1w3lV1WDLs4wSulp9hGH0aKHneFHXrWwTDGEQBMv5XF8s8bFMC+S6oVuGoS+XlmUTQpbLxel8WnXds20ap7vdHuVXKzzsQCrEMcZZ07VdzcDJob+E7rpu2wYYnD8N8wICzZ7jRGEURaEQbAjNnuP6vm/ZNo1CbTrzPc+yHbgHDPvrXI/EKdRnacphd9OkcZKnaRzH0FnkBerFNPLDKAwJjOjaNqZAZH++vgTYD+jm8zOJaZKkMaXQjQ+JSBSEaZphpWmKR7btCFSSRISkWf71AAchDFwBkGV5kiboP/B81/VgLGgdsXWDIEKVAFPFMKOwqvnxeDcMbR4ORy6MwbBaEZJSRINVDC6KacFCxtfrdVVUDW82mzXjzdOwxdJG1dm7quvGYrGQJUkRQRyrExWBVRSEVBlJkjySVVU1Let9qgaB/wTzpkX5okAEMqSyKiv4BOoiz/Fb30MC3cgfTvO8wOW2bc/nswBfr9fb/6/L5QJ8z7ZtwzAQ4+l0+v39jZxgTrIsjxWl3+8Ph0NN0waDQZ7nIER3OEXUgEJTPXzFO8QYjk+nE6puNhsx3jh2XRcvIC7g/+W+IBWh2O/3GBAS2nu08Wget9EFCkMtCLHFqGA/pXQymQD8T/NC86MqNkmSAIlUgA1gvCfAoy/Ums/nD5MeNNf7+gFMpcUwIPT+OgAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 19 22 39 31" title="" data-src="/static/2021-12-19-22-39-31-23bd8a6cede3dd198c7fdd0bbb1c9249-db488.png" data-srcset="/static/2021-12-19-22-39-31-23bd8a6cede3dd198c7fdd0bbb1c9249-b8b66.png 200w,\n/static/2021-12-19-22-39-31-23bd8a6cede3dd198c7fdd0bbb1c9249-db488.png 292w" data-sizes="(max-width: 292px) 100vw, 292px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>此时，应用如下 HTML 和 CSS 代码：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="26344978891244300000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<p class=&quot;f100&quot;>轻如鸿毛，重如泰山</p>\n<p class=&quot;f200&quot;>轻如鸿毛，重如泰山</p>\n<p class=&quot;f300&quot;>轻如鸿毛，重如泰山</p>\n<p class=&quot;f400&quot;>轻如鸿毛，重如泰山</p>\n<p class=&quot;f500&quot;>轻如鸿毛，重如泰山</p>\n<p class=&quot;f600&quot;>轻如鸿毛，重如泰山</p>\n<p class=&quot;f700&quot;>轻如鸿毛，重如泰山</p>\n<p class=&quot;f800&quot;>轻如鸿毛，重如泰山</p>\n<p class=&quot;f900&quot;>轻如鸿毛，重如泰山</p>\n<style>\n   p {\n      font-family: \'Source Han Sans CN\';\n   }\n   .f100 {\n      font-weight: 100;\n   }\n   .f200 {\n      font-weight: 200;\n   }\n   .f300 {\n      font-weight: 300;\n   }\n   .f400 {\n      font-weight: 400;\n   }\n   .f500 {\n      font-weight: 500;\n   }\n   .f600 {\n      font-weight: 600;\n   }\n   .f700 {\n      font-weight: 700;\n   }\n   .f800 {\n      font-weight: 800;\n   }\n   .f900 {\n      font-weight: 900;\n   }\n</style>`, `26344978891244300000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>f100<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>轻如鸿毛，重如泰山<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>f200<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>轻如鸿毛，重如泰山<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>f300<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>轻如鸿毛，重如泰山<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>f400<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>轻如鸿毛，重如泰山<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>f500<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>轻如鸿毛，重如泰山<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>f600<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>轻如鸿毛，重如泰山<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>f700<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>轻如鸿毛，重如泰山<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>f800<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>轻如鸿毛，重如泰山<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>f900<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>轻如鸿毛，重如泰山<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n   <span class="token selector">p</span> <span class="token punctuation">{</span>\n      <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">\'Source Han Sans CN\'</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n   <span class="token selector">.f100</span> <span class="token punctuation">{</span>\n      <span class="token property">font-weight</span><span class="token punctuation">:</span> 100<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n   <span class="token selector">.f200</span> <span class="token punctuation">{</span>\n      <span class="token property">font-weight</span><span class="token punctuation">:</span> 200<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n   <span class="token selector">.f300</span> <span class="token punctuation">{</span>\n      <span class="token property">font-weight</span><span class="token punctuation">:</span> 300<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n   <span class="token selector">.f400</span> <span class="token punctuation">{</span>\n      <span class="token property">font-weight</span><span class="token punctuation">:</span> 400<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n   <span class="token selector">.f500</span> <span class="token punctuation">{</span>\n      <span class="token property">font-weight</span><span class="token punctuation">:</span> 500<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n   <span class="token selector">.f600</span> <span class="token punctuation">{</span>\n      <span class="token property">font-weight</span><span class="token punctuation">:</span> 600<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n   <span class="token selector">.f700</span> <span class="token punctuation">{</span>\n      <span class="token property">font-weight</span><span class="token punctuation">:</span> 700<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n   <span class="token selector">.f800</span> <span class="token punctuation">{</span>\n      <span class="token property">font-weight</span><span class="token punctuation">:</span> 800<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n   <span class="token selector">.f900</span> <span class="token punctuation">{</span>\n      <span class="token property">font-weight</span><span class="token punctuation">:</span> 900<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>结果可以看到明显的字重变化，而不是单纯的加粗和正常两种形态，如图 8-15 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-19-22-41-24-9a79d11ff8cfbf8877a2be9071bc9aeb-a4730.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 357px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 96.63865546218487%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAIAAAAf7rriAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAC70lEQVQ4y52TWVPaUBTH/bzt9As4dayj41SppVi1GkAFJKGalMWtoh21ZZPVkAVISAhZIBsEiPjgONpb2/Ghk770PNy585/zu/9zztwz8fj4+PDwAM7hcHh9XSEpCidJ/LpM01RHVRVZzheuCIrECaLeaNB1xh7Zz8jE863f79WZmihJvCgqsqSq6uhmfHs7JmiqLUlMk5MVpckLA2v4D7hRawkCw/Ntge90FMCOxzdVqtrkuDrDipJYZ5vOsNXvUxTJclyT54UW1xJa9vj2xh4VSyWggJpFUWoJ7cHA0dk0c5k06LlKETRNEBRh9KzR0Lq4OCcpulAqkDWqhOO9vuUAm4Z+dnqau8qlUplMOp3NZM3+0OqZiXg8m7s6PUnm88VSsdzr9Zxg0zhNJlNpENlCPp9JZVTN7Bk6uoumM9nL8/NKpZLL5JxhQ9cRGN7FUDSR+HZ2FovGuJZo6t1NyIfGEjswfHx0mECjmqo5w+je3sHR0cHx8UkyebB/oKia1pGh9Y3Dr0kEgU++nlx+/2GYpgOs69ra2mowtAN/jmAYFggEaywvCdz83FxkD11e9sBhBI3Gu5ruBGuqz+cNhkIhBI7HE+FQWBAVqcXNTE+HYMSz/AGBf8GqZjhPO7C9DcMRLBbd308gSIQDdJt/53LtYTG/F/qCYfuHR5ruBOuqOjM15fZ4IMgXCu0sLrwt4wTXoF+9fOHbCszPzq5+WvMHtlTHgXU7intpCbS6tR0Mh2EIggRRFnn2zfQ0HNldWnRtbm3uRjFnZ9MwlhYXP66sQF4/aNztfn9+maqWi68nJzd8ftfCwvrGunfTr/01sP+OiWw222g0BEHgeX48Htu2TZJUoVAolUrgSxWLRZZlb2ybYVlFUWq1Gk3TnU4HIOA+ASTDMMCnsyzr7u7uaTf7QJRlGYhgq4F+f3/f7XZ1XZckCdgMnsI0zT9la5oGngAnSAUYyAMltNvt0WgErBiGAW44jlNg56pVUNRv6idORdA9NIpEGwAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 19 22 41 24" title="" data-src="/static/2021-12-19-22-41-24-9a79d11ff8cfbf8877a2be9071bc9aeb-a4730.png" data-srcset="/static/2021-12-19-22-41-24-9a79d11ff8cfbf8877a2be9071bc9aeb-11629.png 200w,\n/static/2021-12-19-22-41-24-9a79d11ff8cfbf8877a2be9071bc9aeb-a4730.png 357w" data-sizes="(max-width: 357px) 100vw, 357px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>也就是说，font-weight 要想真正发挥潜力，问题不在于 CSS 的支持，而在于是否存在对应的字体文件。如果没有对应的字体文件，我又想有多档字重效果，该怎么办呢？可以试试看看之后的 font-face 章节</p>\n<h2 id="具有近似姐妹花属性值的-font-style"><a href="#%E5%85%B7%E6%9C%89%E8%BF%91%E4%BC%BC%E5%A7%90%E5%A6%B9%E8%8A%B1%E5%B1%9E%E6%80%A7%E5%80%BC%E7%9A%84-font-style" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>具有近似姐妹花属性值的 font-style</h2>\n<p>font-style 表示文字造型是斜还是正，与 font-weight 相比，其属性值就要少很多，如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="73089249033196090000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`font-style: normal;\nfont-style: italic;\nfont-style: oblique;`, `73089249033196090000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">font-style</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>\n<span class="token property">font-style</span><span class="token punctuation">:</span> italic<span class="token punctuation">;</span>\n<span class="token property">font-style</span><span class="token punctuation">:</span> oblique<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>italic 和 oblique 这两个关键字都表示“斜体”的意思，差别在于：italic 是使用当前字体的斜体字体，而 oblique 只是单纯地让文字倾斜。如果当前字体没有对应的斜体字体，则退而求其次，解析为 oblique，也就是单纯形状倾斜。</p>\n<p>我们平常在 Web 上使用比较多的中文字体，如“宋体”“微软雅黑”等，是没有专门的倾斜字体的，因此，从最终表现上来看 font-style:italic 和 font-style:oblique 是没有区别的。但是，对于一些英文字体，如“Georgia”，情况就不一样了，因为“Georgia”有一个专门设计的斜体字体文件。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="93779533726806970000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<p class=&quot;i&quot;>Georgia italic</p>\n<p class=&quot;o&quot;>Georgia oblique</p>\n<p>Georgia normal</p>\n<style>\n   p {\n      font-size: 50px;\n      font-family: Georgia;\n   }\n   .i {\n      font-style: italic;\n   }\n   .o {\n      font-style: oblique;\n   }\n</style>`, `93779533726806970000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>i<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Georgia italic<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>o<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Georgia oblique<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>Georgia normal<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n   <span class="token selector">p</span> <span class="token punctuation">{</span>\n      <span class="token property">font-size</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>\n      <span class="token property">font-family</span><span class="token punctuation">:</span> Georgia<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n   <span class="token selector">.i</span> <span class="token punctuation">{</span>\n      <span class="token property">font-style</span><span class="token punctuation">:</span> italic<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n   <span class="token selector">.o</span> <span class="token punctuation">{</span>\n      <span class="token property">font-style</span><span class="token punctuation">:</span> oblique<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>结果可以看出，两个“倾斜”有着明显的不同，例如非常明显的字母 g，属性值为 italic 时长得像鱼钩，而为 oblique 时长得像糖葫芦，如图 8-16 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-19-22-47-44-0e5f1d6d55a8367f8b53fe55881d7cb1-ff6e4.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 479px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 56.57620041753654%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABsUlEQVQozz2SSdPBUBBF3///D5SFIXwxBWXBhoWFIlXGGBMUMU8RM8WRVH1voTrdr2+f2494v9+VSqVarU4mk+VyOZ1OCebzeafTmc1m6/W62Wz2ej2CfD5PsFgsLMvabDaXy0Wcz+d0Ok1BkqRMJhMMBrPZrCzLkUiEzGg0CofDf86RnDMejz+fz/V6pVE8n08mMIqxyJ9OJxpUVSUmzyV+t9utSwHX/X6n+Xa7/Zpfrxdtuq6vVitStm3zCRhyCFFFvdFodLvder0O6n6/5w7wVAUyqVSqWCyClEgksBCPx8FOJpPk6YnFYoFAABf8KopCiQBrSPwmm6aJEqMAYxOtVqtUKgHP5hhlOse9UCgU8EyeazgSj8ej3W5TdgmxBM/hcDgej0BRJcOLuBuiREy13+9TEtiDEIxQKASzz+eDDbBoNJrL5Wq1msfjgd/r9WLH7/fjjipPyySBEiQoDYdDeIjL5TJauGWLGOFtDcPABavmDu8PKRYgEpBgHSow3OD/wLnb7UjCCSCfeCFmEZZzxGAwYALCqPCeDOQvpWkaN1gSnwyEi+E8ErukigpdlL6bhTe18QjkZgAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 19 22 47 44" title="" data-src="/static/2021-12-19-22-47-44-0e5f1d6d55a8367f8b53fe55881d7cb1-ff6e4.png" data-srcset="/static/2021-12-19-22-47-44-0e5f1d6d55a8367f8b53fe55881d7cb1-d5807.png 200w,\n/static/2021-12-19-22-47-44-0e5f1d6d55a8367f8b53fe55881d7cb1-dba8d.png 400w,\n/static/2021-12-19-22-47-44-0e5f1d6d55a8367f8b53fe55881d7cb1-ff6e4.png 479w" data-sizes="(max-width: 479px) 100vw, 479px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>之所以会专门为一个字体设计倾斜字体，就是因为单纯倾斜的时候不好看，比方说上面的 “Georgia” 字体，当字号比较小同时文字倾斜的时候，字符会挤作一团，疏密不规则，可读性比较糟糕。相比之下，专门设计的“Georgia”斜体阅读体验就要好很多。再加上没有斜体字体时 italic 表现会和 oblique 一致，因此，我们在实际开发的时候，几乎没有任何理由需要使用 font-style: oblique。</p>\n<h2 id="不适合国情的-font-variant"><a href="#%E4%B8%8D%E9%80%82%E5%90%88%E5%9B%BD%E6%83%85%E7%9A%84-font-variant" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>不适合国情的 font-variant</h2>\n<p>font-variant 是一个从 IE6 时代就过来的 CSS 属性，实现小体型大写字母，两个属性值要么 normal，要么 small-caps，font-variant: small-caps 就是可以让英文字符表现为小体型大写字母。</p>\n<p>代码示意如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="27078081071393202000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`http://www.<span style=&quot;font-variant:small-caps&quot;>css-world.com</span>/`, `27078081071393202000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html">http://www.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">font-variant</span><span class="token punctuation">:</span>small-caps</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>css-world.com<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>/</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-19-22-51-50-f3904a07d8406945f66f7f7a2917a761-fb41b.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 334px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 8.982035928143713%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAIAAADXZGvcAAAACXBIWXMAAAsSAAALEgHS3X78AAAAfUlEQVQI1w3IUQqCQBAAUO9/EukAkhmFGG4alta2o4KzA21qI62LXSDf5/PaBuRTzdY654hIa0IixI6ZnZvX+Vo7mH6FGgfmzzQtv8WY18jsJadk4/v3qnr3I2GX55fiWmTnTEEt5SPcRRJqUOpWlkG4DfZRLFKARoj0GB/+3cJlS8I4QOAAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 19 22 51 50" title="" data-src="/static/2021-12-19-22-51-50-f3904a07d8406945f66f7f7a2917a761-fb41b.png" data-srcset="/static/2021-12-19-22-51-50-f3904a07d8406945f66f7f7a2917a761-7193b.png 200w,\n/static/2021-12-19-22-51-50-f3904a07d8406945f66f7f7a2917a761-fb41b.png 334w" data-sizes="(max-width: 334px) 100vw, 334px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>也就是大小跟小写字母一样，但样式是大写。</p>\n<h1 id="font-属性"><a href="#font-%E5%B1%9E%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>font 属性</h1>\n<h2 id="作为缩写的-font-属性"><a href="#%E4%BD%9C%E4%B8%BA%E7%BC%A9%E5%86%99%E7%9A%84-font-%E5%B1%9E%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>作为缩写的 font 属性</h2>\n<p>如果在一段 CSS 代码中发现了 font 属性，八九不离十就是利用 font 属性进行文本相关样式的缩写。可以缩写在 font 属性中的属性非常多，包括 font-style、font-variant、 font-weight、font-size、line-height、font-family 等。完整语法为：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="40059829469913200000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`font: [ [ font-style || font-variant || font-weight ]? font-size [ / line-height ]? font-family ];`, `40059829469913200000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">font</span><span class="token punctuation">:</span> [ [ font-style || font-variant || font-weight ]? font-size [ / line-height ]? font-family ]<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>|| 表示或，? 和正则表达式中的 ? 的含义一致，表示 0 个或 1 个。仔细观察上面的语法，会发现 font-size 和 font-family 后面没有问号，也就是说是必需的，是不可以省略的。这和 background 属性不一样，background 属性虽然也支持缩写，但是并没有需要两个属性值同时存在的限制。</p>\n<p>因此，如果你的 font 属性缩写无效，检查一下 font-size 和 font-family 这两个属性是否同时存在。例如，下面 CSS 语句看上去写了很多属性，实际却是无效的，因为缺字体：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="39381697984370210000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.font {\n   font: normal 700 14px/20px;\n}`, `39381697984370210000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.font</span> <span class="token punctuation">{</span>\n   <span class="token property">font</span><span class="token punctuation">:</span> normal 700 14px/20px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>而下面这个反而是有效的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="73481389958283770000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.font {\n   font: 14px \'☺\';\n}`, `73481389958283770000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.font</span> <span class="token punctuation">{</span>\n   <span class="token property">font</span><span class="token punctuation">:</span> 14px <span class="token string">\'☺\'</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>需要注意的是，font 缩写会破坏部分属性的继承性。举个简单的例子，假设你的页面行高是 20px，当你使用了下面的 CSS 后：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="77338553433438600000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.font {\n   font: 400 30px \'Microsoft Yahei\';\n}`, `77338553433438600000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.font</span> <span class="token punctuation">{</span>\n   <span class="token property">font</span><span class="token punctuation">:</span> 400 30px <span class="token string">\'Microsoft Yahei\'</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>.font 元素的行高 line-height 属性值就被重置为了 normal，而不同浏览器上 line-height: normal 是不一样的，因此，在使用 font 缩写的时候，如果不设定行高值，一定会出现不兼容的问题。换句话说，如果你的 CSS 代码原本就没有 line-height 属性，使用 font 缩写反而是不推荐的。</p>\n<p>另外，还有一个令人很头疼的问题，就是 font 缩写必须要带上 font-family，然而，原本真实继承的 font-family 属性值可能会很长，每次 font 缩写后面都挂一个长长的字体列表，有什么小技巧可以避免吗？</p>\n<p>这里有两个方法。</p>\n<ol>\n<li>\n<p>我们可以随便找一个系统根本不存在的字体名占位，如字母 a，或者特殊一点，用笑脸表情 ☺，然后再设置 font-family: inherit 来重置这个占位字体。例如，我们想把字号和行高合并缩写，就可以这样：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="77536759082413800000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.font {\n  font: 30px/30px \'☺\';\n  font-family: inherit;\n}`, `77536759082413800000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.font</span> <span class="token punctuation">{</span>\n  <span class="token property">font</span><span class="token punctuation">:</span> 30px/30px <span class="token string">\'☺\'</span><span class="token punctuation">;</span>\n  <span class="token property">font-family</span><span class="token punctuation">:</span> inherit<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>是不是有点拆东墙补西墙的感觉？这么做主要是因为 font 缩写不能使用 inherit 等全局关键字。</p>\n</li>\n<li>\n<p>利用 @font-face 规则将我们的字体列表重定义为一个字体，这是兼容性很好、效益很高的一种解决方法，会在之后详细介绍</p>\n</li>\n</ol>\n<h2 id="使用关键字值的-font-属性"><a href="#%E4%BD%BF%E7%94%A8%E5%85%B3%E9%94%AE%E5%AD%97%E5%80%BC%E7%9A%84-font-%E5%B1%9E%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>使用关键字值的 font 属性</h2>\n<p>font 属性除了缩写用法，还支持关键字属性值，这个怕是很多人都不知道的。其语法如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="18628124296883320000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`font: caption | icon | menu | message-box | small-caption | status-bar;`, `18628124296883320000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">font</span><span class="token punctuation">:</span> caption | icon | menu | message-box | small-caption | status-bar<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>如果将 font 属性设置为上面的一个值，就等同于设置 font 为操作系统该部件对应的 font，也就是说直接使用系统字体。</p>\n<p>根据 W3C 官方维基的解释，以及我自己在 Windows 系统下的测试，各个关键字的含义如下。</p>\n<ul>\n<li>caption：活动窗口标题栏使用的字体。</li>\n<li>icon：包含图标内容所使用的字体，如所有文件夹名称、文件名称、磁盘名称，甚至浏览器窗口标题所使用的字体。</li>\n<li>menu：菜单使用的字体，如文件夹菜单。</li>\n<li>message-box：消息盒里面使用的字体。</li>\n<li>small-caption：调色板标题所使用的字体。</li>\n<li>status-bar：窗体状态栏使用的字体</li>\n</ul>\n<p>使用示例：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="10782831225299616000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.menu {\n   font: menu;\n}`, `10782831225299616000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.menu</span> <span class="token punctuation">{</span>\n   <span class="token property">font</span><span class="token punctuation">:</span> menu<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>需要注意的是，使用关键字作为属性值的时候必须是独立的，不能添加 font-family 或者 font-size 之类的，这和 font 属性缩写不是一个路子。如果混用，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="41822165168154560000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.menu {\n   font: 14px menu;\n}`, `41822165168154560000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.menu</span> <span class="token punctuation">{</span>\n   <span class="token property">font</span><span class="token punctuation">:</span> 14px menu<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>则此时的 menu 是作为自定义的字体名称存在的，而不是表示系统的 menu 菜单字体。</p>\n<p>实际上，font 关键字属性值本质上也是一种缩写，里面已经包含了诸如 font-size 等信息，如图 8-17、图 8-19 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-19-23-10-10-2feb81c5ba170d9e80859d57062f94e6-c328b.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 35.820895522388064%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABBUlEQVQY02WQx27EMAxE9f/fl4UPVnFRody9lnvZjBMkWSA6EALIx5khk1IKIdI0lUpxITx551wI47qur5+ntf54PHgcR1EkhbTGNE3T9z0zxnhfVFVVFHcdhuE4juu6tm37hT2RShQmsyyz1j6fTwyM48i00UT+W7Dregju+z7P87Is/2EYtNZ1fT9PMyqDJWBFAZiwom1bWKrrBvwf7D0wcpTnORFBGR7xZ0ZrOAFvrA1hAAvb53m+23bOxjwGr6QEg91Vecdk90oiWFJK1XWNCLgE9KdpAoZsqGVZogsNecMaIe/nHOu6DhNoc84RIUkSDIF8t4382BhCSJTCzfSXEix8AkJPhPYhzRlvAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 19 23 10 10" title="" data-src="/static/2021-12-19-23-10-10-2feb81c5ba170d9e80859d57062f94e6-fee1c.png" data-srcset="/static/2021-12-19-23-10-10-2feb81c5ba170d9e80859d57062f94e6-a67b7.png 200w,\n/static/2021-12-19-23-10-10-2feb81c5ba170d9e80859d57062f94e6-0b187.png 400w,\n/static/2021-12-19-23-10-10-2feb81c5ba170d9e80859d57062f94e6-fee1c.png 800w,\n/static/2021-12-19-23-10-10-2feb81c5ba170d9e80859d57062f94e6-c328b.png 871w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-19-23-11-15-278767d697e6edde5b28f75ceeefa4ae-4fbc8.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 431px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 66.35730858468676%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAAB8UlEQVQoz0VSiZKjIBD1/79ttiaJOcoJgpyKFyIeSTbHPnWqtlNFALv7HU1EruTr68/pdDocDqc1vr938SFmjGmtkuRHSqm1lmsIKSmlZVl2XVdVVcQ5NyYvS1vkeV3XVV0Zbay1QxjGaarqep7n+9/HNM/DMNzuN9/7+/3++Xycc1FKSJJcs4ylKUEjxugPjpTWVeVa17muda5t26Zpm7a1tng8Hp81lmIUKKVxC3xrwahUUoGF934cxxDC7XYD5jROOOISRN7v928xpWmaUil4xhi6KKVSQtERaMF7yEA2akLfu4WCg9r/yIxSQinM4DxDJUyhKVuLXe/7PC/wgyNN64Zx6Hzn0WWRURtjooyhRoMnLLWFLYoCnuKv73ugNXVT2hLJOMI/3EDIMIR5mpC8IAupBAeyNDqH4IxzayskFSYHiMlz2AbBC+PO+XVIEA0tEYVghTEqISQ8AwvBBZwLfaiaJaBtWp3rkb7Ud8/nE5pBJxKc/5CUUjBgKMPbuF6J0hr8Oc5CwAeMXa9h9NIaZeiDRxFt1k3QEwKmj2eASWCPG/iMFcfX6wU0fMUGyduKiLYdfI7jGE8PUHgG2BNCgBnHh+PxuNvtoBNQGwXnlmmh6S/ydtgoJElyuVyyLDufz9hjRdP9fo/iDXbLRPwDfcnMf5qKYxQAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 19 23 11 15" title="" data-src="/static/2021-12-19-23-11-15-278767d697e6edde5b28f75ceeefa4ae-4fbc8.png" data-srcset="/static/2021-12-19-23-11-15-278767d697e6edde5b28f75ceeefa4ae-3b445.png 200w,\n/static/2021-12-19-23-11-15-278767d697e6edde5b28f75ceeefa4ae-b6b36.png 400w,\n/static/2021-12-19-23-11-15-278767d697e6edde5b28f75ceeefa4ae-4fbc8.png 431w" data-sizes="(max-width: 431px) 100vw, 431px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>这 3 张图透露出不少重要的信息。从 Windows 下 Chrome 和 IE 浏览器部分关键字的字体和字号表现不一样可以看出，同一系统下浏览器的表现是有差异的。既然 font 关键字属性值的样式表现是跟着系统走的，那为何同一系统下不同浏览器的表现会不一样呢？</p>\n<p>显然是某个浏览器出现了问题。后来，通过设置修改 Windows 系统相关控件的默认字体我发现，这次是 Chrome 浏览器拖了后腿。caption、icon、message-box 这 3 个关键字在 Windows 系统下的 Chrome 浏览器中似乎是无效的，并不会实时跟着系统字体走。</p>\n<p>而所有这些问题在 Firefox 和 IE 浏览器中一个都没有，表现非常一致，非常符合预期，例如，修改“图标”字体为“思源黑体”，如图 8-20 所示，则所有文件名称全部变成了“思源黑体”，同时 font: icon 所在元素 font-family 计算值也成了“思源黑体”，如图 8-21 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-19-23-14-51-eb81252f8bc0145b4b704c36203fa8f4-7c992.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 18.28463713477851%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAkElEQVQI12VPOQ7DIBDk/2+LOzoHZJAAmcNcokGCZBQUF8kUq9md2YtQSkMI3vvwhdY6xvT6YM55x38QxlgpJeecUoox1lpbazmXMcZvD9I57yII2R4b5/w4hLV2rcU4EMi9d0ioCCGcczgH07EGKlIQcp7n/twZZ6sNVaXUisYYnCOFhHu1xeuSUuJHOOF/A2QL4JyByeKIAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 19 23 14 51" title="" data-src="/static/2021-12-19-23-14-51-eb81252f8bc0145b4b704c36203fa8f4-fee1c.png" data-srcset="/static/2021-12-19-23-14-51-eb81252f8bc0145b4b704c36203fa8f4-a67b7.png 200w,\n/static/2021-12-19-23-14-51-eb81252f8bc0145b4b704c36203fa8f4-0b187.png 400w,\n/static/2021-12-19-23-14-51-eb81252f8bc0145b4b704c36203fa8f4-fee1c.png 800w,\n/static/2021-12-19-23-14-51-eb81252f8bc0145b4b704c36203fa8f4-7c992.png 1061w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>考虑到 Chrome 浏览器的市场占有率，我们在使用 font 属性的时候，要避开 caption、icon 和 message-box 这 3 个关键字。</p>\n<p>对于不同的操作系统，字体表现不一样，这是预料之中的，毕竟使用系统字体，而不同系统默认字体肯定是不一样的；然后字体大小也不一样。例如，在 Windows 下 Chrome 的 caption 字体大小 16px，而在 OS X 下却只有 13px。因此，在实际使用时，我们还需要在下面再设定一下 font-size 大小来保证一致性。照理讲，直接这样设置就可以了：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="90230865238829090000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`html {\n   font: menu;\n   font-size: 16px;\n}`, `90230865238829090000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">html</span> <span class="token punctuation">{</span>\n   <span class="token property">font</span><span class="token punctuation">:</span> menu<span class="token punctuation">;</span>\n   <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>但是，实际上 IE8 浏览器会莫名其妙地忽略这里的 font-size: 16px，因此，一般都是下面这样处理：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="24780318006944360000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`html {\n   font: menu;\n}\nbody {\n   font-size: 16px;\n}`, `24780318006944360000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">html</span> <span class="token punctuation">{</span>\n   <span class="token property">font</span><span class="token punctuation">:</span> menu<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token selector">body</span> <span class="token punctuation">{</span>\n   <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>除了 caption、icon、menu、message-box、small-caption 和 status-bar，还有很多其他非标准的关键字，如 button、checkbox、checkbox-group、combo-box、desktop、dialog、document、field、hyperlink、list-menu、menu-item、menubar、outline-tree、password、pop-up-menu、 pull-down-menu、push-button、radio-button、radio-group、range、signature、tab、tooltip、window 和 workspace。不过，这些关键字浏览器大多不支持，尽管 Firefox 浏览器支持一部分，但是需要添加私有前缀 -moz-。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="94827477863483850000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`font: -moz-button;`, `94827477863483850000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">font</span><span class="token punctuation">:</span> -moz-button<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>因此，它们的实际应用价值不大。另外，WebKit 浏览器还支持其他关键字，如 font: -webkit-control，如下图所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-19-23-20-00-bd6052472aca2dc0286023e9454c9225-f5a61.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 226px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.38938053097345%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB60lEQVQoz01Si46bMBDk//+pUlWpTXXNpWpCHryOtzGYRzAGG0Ogc0l6vZVlrWFnZ2ZtoyzLjFLKWKdUkmUZzQllGWUJoUVZN62QahKD6oTsein+LRylGo11XSetVV0rSmXTJEXz/eXw5dvL1x+vppPsTHezPbpxWfUrbfSnNeWVMKZ5XuZ5jGPlOCLPeS/jNLMcz3J9WtRYYURiUrCad/2opkXpm9LLOK9cDAbnfJ7n9R63260XIvD9y/li23Zd11VVkYwUeZ4RIqVcPwWOhhACRaLrcEZeVXUUxQA7rvfIKc2v1/Z6vcZxQrIsTVKlFIqHYTCKorAdJ0nSdVnqe2B+juO67+Aqz3NCCGNlyUp0YYw1TaO1fjI/5OowHCyr9wP88zzPPJin0xngKAwBC4LAsuzgHrD2XzY8o9NtHBelJqU473Bfb29eFEZoBCow4zpRVhQMQrBD3RMMAx/NpmmCE4BB7r/5bduCPE1TfEFZdY/yHk/PaHa+XGjBeilHrTvO77IPp9MJgt/dlhWoIPhoHh+cy7I8wdAsWs6jSOIyuq7tuiAIMeogDMMoRl4wFsUxJg8LbcshAYKxA2iggRqGCcJcd6AUM/2z3e42P/e7nbnf//61PR8Or5uNfb7MegIhHsU4QqIeBvkXWGSZcLi35d4AAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 19 23 20 00" title="" data-src="/static/2021-12-19-23-20-00-bd6052472aca2dc0286023e9454c9225-f5a61.png" data-srcset="/static/2021-12-19-23-20-00-bd6052472aca2dc0286023e9454c9225-a2845.png 200w,\n/static/2021-12-19-23-20-00-bd6052472aca2dc0286023e9454c9225-f5a61.png 226w" data-sizes="(max-width: 226px) 100vw, 226px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h2 id="font-关键字属性值的应用价值"><a href="#font-%E5%85%B3%E9%94%AE%E5%AD%97%E5%B1%9E%E6%80%A7%E5%80%BC%E7%9A%84%E5%BA%94%E7%94%A8%E4%BB%B7%E5%80%BC" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>font 关键字属性值的应用价值</h2>\n<p>font 关键字属性值的价值如何呢？有没有合适的使用场景呢？有，并且相当适合！</p>\n<p>目前，非常多网站的通用 font-family 直接就是：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="68367600411258760000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`html {\n   font-family: \'Microsoft YaHei\';\n}`, `68367600411258760000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">html</span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">\'Microsoft YaHei\'</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>知道问题在哪里吗？这样一设置，就意味着所有操作系统下的所有浏览器都要使用“微软雅黑”字体。假如说用户的 iMac 或者 macbook 因为某些原因安装了“微软雅黑”字体，那岂不是这些系统原本更加漂亮的中文字体就不能使用了？</p>\n<p>于是，人们就会有这样的需求：希望非 Windows 系统下不要使用“微软雅黑”字体，而是使用其系统字体。怎么处理呢？</p>\n<p>一种方法是可以试试使用非标准的 -apple-system 等关键字字体，具体方法如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="15393800771630617000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`html {\n   font-family: -apple-system, BlinkMacSystemFont, \'Microsoft YaHei\';\n}`, `15393800771630617000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">html</span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> -apple-system<span class="token punctuation">,</span> BlinkMacSystemFont<span class="token punctuation">,</span> <span class="token string">\'Microsoft YaHei\'</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>这能够一定程度上满足我们的需求，但是毕竟是非标准的属性值，说不定哪天就被浏览器舍弃了，因此若非迫不得已，还是少用为妙。</p>\n<p>顺便多说两句，实际上还真有标准的系统字体关键字，叫作 system-ui，使用示例如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="21632048714060857000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`html {\n   font-family: system-ui;\n}`, `21632048714060857000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">html</span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> system-ui<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>在我写这段内容的时候，仅 Chrome 浏览器支持它（从版本 56 开始），并且，根据我的在 Windows 电脑上的测试，Chrome 浏览器的 system-ui 指的就是“调色板标题”对应关键字 small-caption 使用的字体，有点儿出乎我的意料。</p>\n<p>显然还有个更好的方法就是使用这里的 font 关键字，这是标准属性，10 年前浏览器就支持了，可以放心使用。CSS 代码如下（三选一即可）：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="50283091494332160000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`html {\n   font: menu;\n}\nbody {\n   font-size: 16px;\n}\n\nhtml {\n   font: small-caption;\n}\nbody {\n   font-size: 16px;\n}\n\nhtml {\n   font: status-bar;\n}\nbody {\n   font-size: 16px;\n}`, `50283091494332160000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">html</span> <span class="token punctuation">{</span>\n   <span class="token property">font</span><span class="token punctuation">:</span> menu<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token selector">body</span> <span class="token punctuation">{</span>\n   <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">html</span> <span class="token punctuation">{</span>\n   <span class="token property">font</span><span class="token punctuation">:</span> small-caption<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token selector">body</span> <span class="token punctuation">{</span>\n   <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">html</span> <span class="token punctuation">{</span>\n   <span class="token property">font</span><span class="token punctuation">:</span> status-bar<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token selector">body</span> <span class="token punctuation">{</span>\n   <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>这几个声明就可以让各个系统使用各自引以为傲的字体，推荐最短的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="70167953674560010000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`html {\n   font: menu;\n}\nbody {\n   font-size: 16px;\n}`, `70167953674560010000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">html</span> <span class="token punctuation">{</span>\n   <span class="token property">font</span><span class="token punctuation">:</span> menu<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token selector">body</span> <span class="token punctuation">{</span>\n   <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>最后，我要对 font 关键字属性值的用法做一个点评。</p>\n<p>让网页的字体跟系统走，对设计师而言，其实是一个比较冒险的做法，因为最终呈现的字体是不可控的。举个例子，某女生非常喜欢可爱风格，于是就把她的电脑主题变成了非常可爱的风格，菜单栏的字体全部变成那种很可爱的字体，此时，font: menu 所呈现的就不是“微软雅黑”，而是这个用户定义的“可爱字体”，这可能不是设计师想看到的，因为往往会跟自己的网页设计风格不一致。但是，转念一想，万一这是用户想看到的呢？既然用户把自己的主题设为该字体，那就说明这个用户对这个字体并不排斥，而是喜欢。当她浏览网页的时候，发现就你的网站呈现出了她喜欢的那种字体，你说会不会给用户一种“你懂我的心”的感觉呢？对用户而言，反而成了一种情感化的设计！</p>\n<p>另外，让网页的字体跟系统走，还有一个更加长远的好处。随着软件的不断发展，我们的操作系统的默认中文字体一定是越来越好看，如果网页的 font-family 定死为某个字体，用户就无法及时享受到新系统新字体带来的愉悦的视觉感受。举个例子，OS X 的默认中文字体其实已经变过好多次了，例如，你今天写了个页面，字体设置为很潮的“苹方”，过两年说不定会出来更好的名叫“梨方”的字体，我打包票，网站绝对是不会跟进的，因为大多数的线上项目维护都不会管 font-family 这种边边角角的事情，因此，就算很多年过去了，网站使用的依然是老字体。但是，如果使用的是 font 关键字属性值，就完全不会有这样的问题，网站字体能时时刻刻与时俱进。</p>\n<p>// TODO CSS 世界读书笔记待完成</p>',
id:"/home/runner/work/GatsbyBlog/GatsbyBlog/blog/CSS世界强大文本处理能力/index.md absPath of file >>> MarkdownRemark",timeToRead:18,frontmatter:{date:"2021-12-14 14:07:08",path:"/css-world-text-processing/",tags:"前端, CSS, CSS世界, 读书笔记",title:"CSS世界强大文本处理能力",draft:null}},{excerpt:"字符介绍 字符以及 HTML 实体 描述以及说明 这是我们使用最多的空格，也就是按下 space 键产生的空格。在 HTML 中，如果你用空格键产生此空格，空格是不会累加的（只算 1 个）。要使用 html 实体表示才可累加。为了便于记忆，我总是把这个空格成为“牛逼(nb)空格(sp – space)”，虽然实际上并不牛逼。该空格占据宽度受字体影响明显而强烈。在 inline-block…",html:'<h1 id="字符介绍"><a href="#%E5%AD%97%E7%AC%A6%E4%BB%8B%E7%BB%8D" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>字符介绍</h1>\n<table>\n<thead>\n<tr>\n<th align="left">字符以及 HTML 实体</th>\n<th align="left">描述以及说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align="left"><code class="language-text">&amp;nbsp;</code></td>\n<td align="left">这是我们使用最多的空格，也就是按下 space 键产生的空格。在 HTML 中，如果你用空格键产生此空格，空格是不会累加的（只算 1 个）。要使用 html 实体表示才可累加。为了便于记忆，我总是把这个空格成为“牛逼(nb)空格(sp – space)”，虽然实际上并不牛逼。该空格占据宽度受字体影响明显而强烈。在 inline-block 布局中会搞些小破坏，在两端对齐布局中又是不可少的元素。是个让人又爱又恨的小东东。</td>\n</tr>\n<tr>\n<td align="left"><code class="language-text">&amp;ensp;</code></td>\n<td align="left">该空格学名不详。为了便于记忆，我们不妨就叫它“恶念(e n-ian)空格”。此空格传承空格家族一贯的特性：透明滴！此空格有个相当稳健的特性，就是其占据的宽度正好是 1/2 个中文宽度，而且基本上不受字体影响。</td>\n</tr>\n<tr>\n<td align="left"><code class="language-text">&amp;emsp;</code></td>\n<td align="left">该空格学名不详。为了便于记忆，我们不妨就叫它”恶魔(e m-o)空格”。此空格也传承空格家族一贯的特性：透明滴！此空格也有个相当稳健的特性，就是其占据的宽度正好是 1 个中文宽度，而且基本上不受字体影响。</td>\n</tr>\n<tr>\n<td align="left"><code class="language-text">&amp;thinsp;</code></td>\n<td align="left">该空格学名不详。我们不妨称之为“瘦弱空格”，就是该空格长得比较瘦弱，身体单薄，占据的宽度比较小。我目前是没用过这个东西，这里亮出来是让其过一下群众演员的瘾。</td>\n</tr>\n</tbody>\n</table>\n<p>其中的<code class="language-text">&amp;ensp;</code>和<code class="language-text">&amp;emsp;</code>，由于具有某一超赞的特性，使其可以登上 web 届的舞台！什么特性呢？如上表加粗展示，</p>\n<ol>\n<li>透明；</li>\n<li>宽度正好跟中文正好是 1:2 和 1:1 的关系</li>\n</ol>\n<p>于是，一些中文排版对齐什么的，直接就可以使用这两个空格调节，如：</p>\n<div>\n          <div\n            class="gatsby-resp-iframe-wrapper"\n            style="padding-bottom: 25%; position: relative; height: 0; overflow: hidden;margin-bottom: 2em"\n          >\n            <iframe src="/examples/tips-blank-character-chinese-align/space-and-text-layout.html" style="\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n          "></iframe>\n          </div>\n          </div>\n<p><div class="gatsby-highlight">\n        <pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>X-UA-Compatible<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ie=edge<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n    <span class="token selector">html,\n    body</span> <span class="token punctuation">{</span>\n      <span class="token property">background-color</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span>\n      <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token selector">ul</span> <span class="token punctuation">{</span>\n      <span class="token property">list-style-type</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>\n      <span class="token property">font-size</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token selector">.li</span> <span class="token punctuation">{</span>\n      <span class="token property">margin-top</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>\n      <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">\'宋体\'</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>li<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>姓<span class="token entity" title="&emsp;">&amp;emsp;</span><span class="token entity" title="&emsp;">&amp;emsp;</span>名：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>li<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>手<span class="token entity" title="&ensp;">&amp;ensp;</span>机<span class="token entity" title="&ensp;">&amp;ensp;</span>号：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>li<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>电子邮箱：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre>\n        </div></p>\n<p>上面的空白字符中文对齐方法在 IE6 下不能完全兼容</p>\n<h1 id="总结"><a href="#%E6%80%BB%E7%BB%93" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>总结</h1>\n<p>当中文和英文混杂的时候，使用<code class="language-text">&amp;ensp;</code>, <code class="language-text">&amp;emsp;</code>等空格实现冒号的完美对齐还是有些困难的，除非英文使用的是等宽字体，于是乎，我们就可以使用普通的<code class="language-text">&amp;nbsp;</code>空格做英文字符的宽度调节。</p>\n<ol>\n<li>HTML 中字符输出使用&#x26;#x 配上 charCode 值；</li>\n<li>在 JavaScript 文件中为防止乱码转义，则是\\u 配上 charCode 值；</li>\n<li>而在 CSS 文件中，如 CSS 伪元素的 content 属性，直接使用\\配上 charCode 值。</li>\n</ol>\n<p>因此，想在 HTML/JS/CSS 中转义“我”这个汉字，分别是：</p>\n<ol>\n<li><code class="language-text">&amp;#x6211</code>;</li>\n<li>\\u6211, 如<code class="language-text">console.log(&#39;\\u6211&#39;)</code>;</li>\n<li>\\6211, 如<code class="language-text">.xxx:before { content: &#39;\\6211&#39;; }</code></li>\n</ol>\n<p>考虑到直接<code class="language-text">&amp;#x3000;</code>这种形式暴露在 HTML 中，可能会让屏幕阅读器等辅助设备读取，从而影响正常阅读流，因此，我们可以进一步优化下，使用标签，利用伪元素，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="23444125387718940000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.half:before {\n  content: \'\\2002\'; /* &ensp; */\n  speak: none;\n}\n\n.full:before {\n  content: \'\\2003\'; /* &emsp; */\n  speak: none;\n}`, `23444125387718940000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.half:before</span> <span class="token punctuation">{</span>\n  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">\'\\2002\'</span><span class="token punctuation">;</span> <span class="token comment">/* &amp;ensp; */</span>\n  <span class="token property">speak</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.full:before</span> <span class="token punctuation">{</span>\n  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">\'\\2003\'</span><span class="token punctuation">;</span> <span class="token comment">/* &amp;emsp; */</span>\n  <span class="token property">speak</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>',id:"/home/runner/work/GatsbyBlog/GatsbyBlog/blog/使用&#x3000;等空格实现最小成本中文对齐/index.md absPath of file >>> MarkdownRemark",timeToRead:2,frontmatter:{date:"2020-01-20 10:29:05",path:"/tips-blank-character-chinese-align/",tags:"前端, CSS, CSS知识点",title:"使用&#x3000;等空格实现最小成本中文对齐",draft:null}},{excerpt:"魔鬼属性 float float 的本质与特性 浮动的本质就是为了实现文字环绕效果。 包裹性； 块状化并格式化上下文； 破坏文档流； 没有任何 margin 合并； 所谓“包裹性”，由“包裹”和“自适应性”两部分组成。 包裹。假设浮动元素父元素宽度 200px，浮动元素子元素是一个 128px 宽度的图片，则此时浮动元素宽度表现为“包裹”，就是里面图片的宽度 128px，代码如下： 自适应性。如果浮动元素的子元素不只是一张 128px…",html:'<h1 id="魔鬼属性-float"><a href="#%E9%AD%94%E9%AC%BC%E5%B1%9E%E6%80%A7-float" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>魔鬼属性 float</h1>\n<h2 id="float-的本质与特性"><a href="#float-%E7%9A%84%E6%9C%AC%E8%B4%A8%E4%B8%8E%E7%89%B9%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>float 的本质与特性</h2>\n<p>浮动的本质就是为了实现文字环绕效果。</p>\n<ul>\n<li>包裹性；</li>\n<li>块状化并格式化上下文；</li>\n<li>破坏文档流；</li>\n<li>没有任何 margin 合并；</li>\n</ul>\n<p>所谓“包裹性”，由“包裹”和“自适应性”两部分组成。</p>\n<ol>\n<li>\n<p>包裹。假设浮动元素父元素宽度 200px，浮动元素子元素是一个 128px 宽度的图片，则此时浮动元素宽度表现为“包裹”，就是里面图片的宽度 128px，代码如下：</p>\n<html><head></head><body><div class="gatsby-code-button-container" data-toaster-id="8777317864996492000" data-toaster-class="gatsby-code-button-toaster" data-toaster-text-class="gatsby-code-button-toaster-text" data-toaster-text="复制成功" data-toaster-duration="3500" onclick="copyToClipboard(`<style>\n    .father {\n        width: 200px;\n    }\n    .float {\n        float: left;\n    }\n    .float img {\n        width: 128px;\n    }\n</style>\n<div class=&quot;father&quot;>\n    <div class=&quot;float&quot;>\n        <img data-src=&quot;1.jpg&quot; />\n    </div>\n</div>`, `8777317864996492000`)">\n              <div class="gatsby-code-button" title="html">\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div></body></html>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n    <span class="token selector">.father</span> <span class="token punctuation">{</span>\n        <span class="token property">width</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token selector">.float</span> <span class="token punctuation">{</span>\n        <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token selector">.float img</span> <span class="token punctuation">{</span>\n        <span class="token property">width</span><span class="token punctuation">:</span> 128px<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>father<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>float<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1.jpg<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>自适应性。如果浮动元素的子元素不只是一张 128px 宽度的图片，还有一大波普通的文字，例如：</p>\n<html><head></head><body><div class="gatsby-code-button-container" data-toaster-id="76469562374963050000" data-toaster-class="gatsby-code-button-toaster" data-toaster-text-class="gatsby-code-button-toaster-text" data-toaster-text="复制成功" data-toaster-duration="3500" onclick="copyToClipboard(`<div class=&quot;father&quot;>\n    <div class=&quot;float&quot;><img data-src=&quot;1.jpg&quot; />我是帅哥，好巧啊，我也是帅哥，原来看这本书的人都是帅哥~</div>\n</div>`, `76469562374963050000`)">\n              <div class="gatsby-code-button" title="html">\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div></body></html>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>father<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>float<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1.jpg<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>我是帅哥，好巧啊，我也是帅哥，原来看这本书的人都是帅哥~<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>则此时浮动元素宽度就自适应父元素的 200px 宽度，最终的宽度表现也是 200px。</p>\n</li>\n</ol>\n<p>当然，要想最大宽度自适应父元素宽度，一定是在浮动元素的“首选最小宽度”比父元素的宽度要小的前提下，比方说上面示意的“我是帅哥”等文字全是一连串超长的英文字母，则浮动元素的宽度显然就不是 200px 了。</p>\n<p>块状化的意思是，元素一旦 float 的属性值不为 none，则其 display 计算值就是 block 或者 table。举个例子，打开浏览器控制台，输入如下 JavaScript 代码：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="63653934992259240000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`var span = document.createElement(\'span\');\ndocument.body.appendChild(span);\nconsole.log(\'1. \' + window.getComputedStyle(span).display);\n// 设置元素左浮动\nspan.style.cssFloat = \'left\';\nconsole.log(\'2. \' + window.getComputedStyle(span).display);`, `63653934992259240000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">var</span> span <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">\'span\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\ndocument<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>span<span class="token punctuation">)</span><span class="token punctuation">;</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">\'1. \'</span> <span class="token operator">+</span> window<span class="token punctuation">.</span><span class="token function">getComputedStyle</span><span class="token punctuation">(</span>span<span class="token punctuation">)</span><span class="token punctuation">.</span>display<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">// 设置元素左浮动</span>\nspan<span class="token punctuation">.</span>style<span class="token punctuation">.</span>cssFloat <span class="token operator">=</span> <span class="token string">\'left\'</span><span class="token punctuation">;</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">\'2. \'</span> <span class="token operator">+</span> window<span class="token punctuation">.</span><span class="token function">getComputedStyle</span><span class="token punctuation">(</span>span<span class="token punctuation">)</span><span class="token punctuation">.</span>display<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>结果如图 6-2 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2020-01-07-15-50-34-5128d15fdd663e9cde6b44b1cc01f870-16a51.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 324px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 37.96296296296296%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAAA9ElEQVQY03WQiY6EIBBE/f9P9MBRgZFLQBGz4zFbYjLZuJmK6XSavLa6spf/MdpYa0MIfZJzTgrRP5/ovfe7s6u1r3V9/1PGKa/KilLaPB6Cc8ZY0zRlWVaE5HmutQ7OjWn1HMKyLPM8T9OE5oTbtgUJpmtbK4TR2gzDwKiqiTGnoyF9sIDxOI5oMAd/HEcGb5zzszK2eL/ECEAJofpeoColpUQFiWqTMMGKE4YfmbTv++cYPBxX/a7TNm6ADaz4S76/6A5/HnAG4okxbtvmkqakyzN+gIPvaWPHZRjPRVHgTvCIAEEiRWSJzOu6JoR0XXeDfwG8s8cVPG/PfgAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2020 01 07 15 50 34" title="" data-src="/static/2020-01-07-15-50-34-5128d15fdd663e9cde6b44b1cc01f870-16a51.png" data-srcset="/static/2020-01-07-15-50-34-5128d15fdd663e9cde6b44b1cc01f870-6752f.png 200w,\n/static/2020-01-07-15-50-34-5128d15fdd663e9cde6b44b1cc01f870-16a51.png 324w" data-sizes="(max-width: 324px) 100vw, 324px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>因此，没有任何理由出现下面的样式组合：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="29566390533108232000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`span {\n    display: block; /* 多余 */\n    float: left;\n}\n\nspan {\n    float: left;\n    vertical-align: middle; /* 多余 */\n}`, `29566390533108232000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">span</span> <span class="token punctuation">{</span>\n    <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span> <span class="token comment">/* 多余 */</span>\n    <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">span</span> <span class="token punctuation">{</span>\n    <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>\n    <span class="token property">vertical-align</span><span class="token punctuation">:</span> middle<span class="token punctuation">;</span> <span class="token comment">/* 多余 */</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>也不要指望使用 text-align 属性控制浮动元素的左右对齐，因为 text-align 对块级元素是无效的。</p>\n<p>float 属性与 display 属性值转换关系如表 6-1 所示。</p>\n<table>\n<thead>\n<tr>\n<th align="center">设定值</th>\n<th align="center">计算值</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align="center">inline</td>\n<td align="center">block</td>\n</tr>\n<tr>\n<td align="center">inline-block</td>\n<td align="center">block</td>\n</tr>\n<tr>\n<td align="center">inline-table</td>\n<td align="center">table</td>\n</tr>\n<tr>\n<td align="center">table-row</td>\n<td align="center">block</td>\n</tr>\n<tr>\n<td align="center">table-row-group</td>\n<td align="center">block</td>\n</tr>\n<tr>\n<td align="center">table-column</td>\n<td align="center">block</td>\n</tr>\n<tr>\n<td align="center">table-column-group</td>\n<td align="center">block</td>\n</tr>\n<tr>\n<td align="center">table-cell</td>\n<td align="center">block</td>\n</tr>\n<tr>\n<td align="center">table-caption</td>\n<td align="center">block</td>\n</tr>\n<tr>\n<td align="center">table-header-group</td>\n<td align="center">block</td>\n</tr>\n<tr>\n<td align="center">table-footer-group</td>\n<td align="center">block</td>\n</tr>\n</tbody>\n</table>\n<p>除了 inline-table 计算为 table 外，其他全都是 block。</p>\n<h2 id="float-的作用机制"><a href="#float-%E7%9A%84%E4%BD%9C%E7%94%A8%E6%9C%BA%E5%88%B6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>float 的作用机制</h2>\n<p>float 属性有个著名的特性表现，就是会让父元素的高度塌陷，大多数场景下，这种特性会影响“正常的”布局，float 属性让父元素高度塌陷的原因就是为了实现文字环绕效果，然而这种效果现在已经不流行。于是 float 很少发挥其原本的作用，反而被大肆使用满屏布局。</p>\n<html><head></head><body><div class="gatsby-code-button-container" data-toaster-id="75397587885624740000" data-toaster-class="gatsby-code-button-toaster" data-toaster-text-class="gatsby-code-button-toaster-text" data-toaster-text="复制成功" data-toaster-duration="3500" onclick="copyToClipboard(`<div class=&quot;father&quot;>\n    <img data-src=&quot;me.jpg&quot; />\n</div>\n<p class=&quot;animal&quot;>小猫 1，小猫 2，...</p>`, `75397587885624740000`)">\n              <div class="gatsby-code-button" title="html">\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div></body></html>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>father<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>me.jpg<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>animal<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>小猫 1，小猫 2，...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2020-01-07-15-59-39-6348f66d2fb22e324d771d8e1317d01a-3e688.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 589px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 23.59932088285229%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsSAAALEgHS3X78AAAA3klEQVQY012PsWrDMBRF81X9oYJ/oD8RupWuGUsyB7qEDtkMzdLFFDJEGWIRKYpkWVIlWw5yrwqBpA/0hvvuee9qsphPv7dfxjhjjPdeax1jHO9r+T5bfbwdKG2UCiHA6ZyDPikeHz436xCi+3GAd4Sg34AJb/pcvL48ibNKKbVtW1UV5zzDZVkSspdSMs4ZOzLGuq67Q8exrinZ7dm1aF3jeIaRRAgByViLm0j1L3MaU6u1ECfYpJJ93wfvh+GSYcTAGgyapkEYpRTGmUn5Kv4GBR0Gay1WwyP+ilL6C3JeFNFmWvDgAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2020 01 07 15 59 39" title="" data-src="/static/2020-01-07-15-59-39-6348f66d2fb22e324d771d8e1317d01a-3e688.png" data-srcset="/static/2020-01-07-15-59-39-6348f66d2fb22e324d771d8e1317d01a-c6c0d.png 200w,\n/static/2020-01-07-15-59-39-6348f66d2fb22e324d771d8e1317d01a-69d2c.png 400w,\n/static/2020-01-07-15-59-39-6348f66d2fb22e324d771d8e1317d01a-3e688.png 589w" data-sizes="(max-width: 589px) 100vw, 589px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>然而，“高度塌陷”只是让跟随的内容可以和浮动元素在一个水平线上，但这只是实现“环绕效果”的条件之一，要想实现真正的“环绕效果”，就需要另外一个平时大家不太在意的特性，那就是“行框盒子和浮动元素的不可重叠性”，也就是“行框盒子如果和浮动元素的垂直高度有重叠，则行框盒子在正常定位状态下只会跟随浮动元素，而不会发生重叠”。</p>\n<p>注意，这里说的是“行框盒子”，也就是每行内联元素所在的那个盒子，而非外部的块状盒子。实际上，由于浮动元素的塌陷，块状盒子是和图片完全重叠的，例如，我们给环绕的<code class="language-text">&lt;p&gt;</code>元素设置个背景色，同时把图片搞透明，则效果如图 6-6 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2020-01-07-16-06-15-700fc077bef1d5a21bbdd9710fe9d78a-08a78.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 574px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 18.46689895470383%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsSAAALEgHS3X78AAAAwElEQVQI112PTwqCQBjFPVznadE5ukXoorbWDVqoCM5IRKYhOn9V0hoHUSZrJILw8fhtHo/3fcZuu45uUckLQgmllDHWdd37p3EcNVPMXXBxwNUDNzeIXZA4QXxvhLFaLuAJVkWJUE4I4Zz3fT8r++fc2vvWAZp7aNoTNzbEhTBcz2nbVik1fNUPSr3+yhNRIY5BCqIqTB5h0sC4BnH9lIMhhJBSZlmmb8YYI4RmszqllEjZMkY5Z3meaTdNrR/8AJRT2ByBaKY5AAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2020 01 07 16 06 15" title="" data-src="/static/2020-01-07-16-06-15-700fc077bef1d5a21bbdd9710fe9d78a-08a78.png" data-srcset="/static/2020-01-07-16-06-15-700fc077bef1d5a21bbdd9710fe9d78a-683d3.png 200w,\n/static/2020-01-07-16-06-15-700fc077bef1d5a21bbdd9710fe9d78a-6bdc6.png 400w,\n/static/2020-01-07-16-06-15-700fc077bef1d5a21bbdd9710fe9d78a-08a78.png 574w" data-sizes="(max-width: 574px) 100vw, 574px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>但是，块状盒子中的“行框盒子”却被浮动元素限制，没有任何的重叠，我们可以借助::first-line 伪元素暴露第一行的“行框盒子”区域，CSS 代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="69673827463790490000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.animal:first-line {\n    background: red;\n    color: white;\n}`, `69673827463790490000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.animal:first-line</span> <span class="token punctuation">{</span>\n    <span class="token property">background</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>\n    <span class="token property">color</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>结果如图 6-7 所示。</p>\n<p>这种“限制”是根深蒂固的，也就是“行框盒子”的区域永远就这么大，只要不改变当前布局方式，我们是无法通过其他 CSS 属性改变这个区域大小的。这就是在 4.3 节提到的浮动后面元素 margin 负无穷大依然无效的原因。例如，这里再新增如下 CSS 代码：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="94748019889982960000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.animal {\n    margin-left: -100px;\n}`, `94748019889982960000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.animal</span> <span class="token punctuation">{</span>\n    <span class="token property">margin-left</span><span class="token punctuation">:</span> -100px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>就会发现，只有外部的块状容器盒子尺寸变大，而和浮动元素垂直方向有重叠的“行框盒子”依然被限死在那里，如图 6-8 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2020-01-07-16-11-37-dc29f9bdd678ccf262854229d5944b39-b2673.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 620px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 20.64516129032258%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsSAAALEgHS3X78AAAA4ElEQVQI11WNPU/CQACG++NhskzE3YXFhQEqxYBQTARMIIZYkV4xVvpx/eA46LXljl7PViee4VnePHkl8cclv3jWtwOM8MfiCRGMimuKouA8F+dMpInI0so0k8ohJung9UNvtc2avLlpmvUG7PargPPSFkyXxmmuw8fpanV3v63LhnwLarLbVqr4lNCOtlZG6/4YqJrRHX4udff/rfT7Fj287J4Wvjr96j2bqgbUCVBGm9mbLRFC4pj4Iba9yAkOIU5sHwX7I0KIMlbGZ5oHEYbBIULEgXsvxDs3woRlrPgFCeHUw2ucgK8AAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2020 01 07 16 11 37" title="" data-src="/static/2020-01-07-16-11-37-dc29f9bdd678ccf262854229d5944b39-b2673.png" data-srcset="/static/2020-01-07-16-11-37-dc29f9bdd678ccf262854229d5944b39-fcc72.png 200w,\n/static/2020-01-07-16-11-37-dc29f9bdd678ccf262854229d5944b39-3d8b3.png 400w,\n/static/2020-01-07-16-11-37-dc29f9bdd678ccf262854229d5944b39-b2673.png 620w" data-sizes="(max-width: 620px) 100vw, 620px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>一个元素只要设置了具体的高度值，就不需要担心 float 属性造成的高度塌陷的问题了，既然有了高度，何来“高度塌陷”。这句话对不对呢？是对的。但是，其中也隐含了陷阱，因为“文字环绕效果”是由两个特性（即“父级高度塌陷”和“行框盒子区域限制”）共同作用的结果，定高只能解决“父级高度塌陷”带来的影响，但是对“行框盒子区域限制”却没有任何效果，结果导致的问题是浮动元素垂直区域一旦超出高度范围，或者下面元素 margin-top 负值上偏移，就很容易使后面的元素发生“环绕效果”，代码示意如下：</p>\n<html><head></head><body><div class="gatsby-code-button-container" data-toaster-id="84020406151979430000" data-toaster-class="gatsby-code-button-toaster" data-toaster-text-class="gatsby-code-button-toaster-text" data-toaster-text="复制成功" data-toaster-duration="3500" onclick="copyToClipboard(`<style>\n    .father {\n        height: 64px;\n        border: 1px solid #444;\n    }\n    .float {\n        float: left;\n    }\n    .float img {\n        width: 60px;\n        height: 64px;\n    }\n</style>\n<div class=&quot;father&quot;>\n    <div class=&quot;float&quot;>\n        <img data-src=&quot;zxx.jpg&quot; />\n    </div>\n    我是帅哥，好巧啊，我也是帅哥，原来看这本书的人都是帅哥~\n</div>\n<div>\n    虽然你很帅，但是我对你不感兴趣。\n</div>`, `84020406151979430000`)">\n              <div class="gatsby-code-button" title="html">\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div></body></html>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n    <span class="token selector">.father</span> <span class="token punctuation">{</span>\n        <span class="token property">height</span><span class="token punctuation">:</span> 64px<span class="token punctuation">;</span>\n        <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #444<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token selector">.float</span> <span class="token punctuation">{</span>\n        <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token selector">.float img</span> <span class="token punctuation">{</span>\n        <span class="token property">width</span><span class="token punctuation">:</span> 60px<span class="token punctuation">;</span>\n        <span class="token property">height</span><span class="token punctuation">:</span> 64px<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>father<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>float<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>zxx.jpg<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n    我是帅哥，好巧啊，我也是帅哥，原来看这本书的人都是帅哥~\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>\n    虽然你很帅，但是我对你不感兴趣。\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2020-01-07-16-15-53-759e37b3696197fee0021cc5761e5450-960c5.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 229px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 56.76855895196506%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB9klEQVQoz3WSOY/TUBDH83mQaOhoqRAFQhxaio2UYoGCpVsKkBBCot6Ogq9AFQEdgs1mIVlMjt3Yie1cvuIjthPfMbGTZ/4xaAkFUzzN88xv3n9mXMhya9NUpf5JmehDiRPlsWXZ5tS0bNvzPNOcGoYxm8NmlmWZpum6LiEEVGGDkmz/1e6j0uXy24PS8xvlj+8oqvG9dnpO08583udZqtGQJEmdTJrNxilFqZqxBWfZ/sv7j0uXPr/ZufXg6teTymAwiuOo3W63zs4o6scYJgpdpmfoxjndMSzrH/jh05vFvSudyuGL10/efyjzLM/xvOf5YRhAeRhGcRwHfoAzikLf91er1V/44NnenbvX7u1cLxZvV6uViaRyHJ+kK9Rfk3VGSP4UWa/hZ57nptvwIoxcZ27bdrNJ1eq1VqvF8uxxtdrrDUxDPz6pfDk6wiDQB9NloOg39QdWVRVjZNmeJEuQGi0WP5fLKIrSZJUmCXQGQYArZC+TZd5vDm/0EDIWBFmRe92upuvYjeM49do31MJ4VU0lF+mQvknP9V+8vBXbGFrCWsMA03KTNMn+Y4XZbIYdQhgaBoZTlmX8DBA5zQ0+Bo5amqahO0ThiKKIzIKu6zRNj0Yj7BLF+v1+p9MZDoeKogiCwHEcfADAkAAfUZZlGYbBx1+uuUUYtU63lgAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2020 01 07 16 15 53" title="" data-src="/static/2020-01-07-16-15-53-759e37b3696197fee0021cc5761e5450-960c5.png" data-srcset="/static/2020-01-07-16-15-53-759e37b3696197fee0021cc5761e5450-6f066.png 200w,\n/static/2020-01-07-16-15-53-759e37b3696197fee0021cc5761e5450-960c5.png 229w" data-sizes="(max-width: 229px) 100vw, 229px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>从这段代码可以看出父级元素.father 高度设置的和图片高度一模一样，都是 64px。按道理，下面的“虽然你很帅，但是我对你不感兴趣。”这些文字应该居左显示，但最后的结果却是图 6-9 所示的这样。</p>\n<p>虽然肉眼看上去容器和图片一样高，但是，大家都读过 5.3 节，应该都知道内联状态下的图片底部是有间隙的，也就是.float 这个浮动元素的实际高度并不是 64px，而是要比 64px 高几像素，带来的问题就是浮动元素的高度超出.father 几像素。于是，下面的文字就遭殃了，因为“虽然你很帅……”这段文字所在的“行框盒子”和浮动元素在垂直位置有了重叠，尽管就那么几像素。于是，区域被限制，形成了图 6-9 所示的“被环绕”效果。</p>\n<p>因此，当使用浮动元素的时候，比较稳妥的做法还是采用一些手段干净地清除浮动带来的影响，以避免很多意料之外的样式问题的发生。</p>\n<h2 id="float-更深入的作用机制"><a href="#float-%E6%9B%B4%E6%B7%B1%E5%85%A5%E7%9A%84%E4%BD%9C%E7%94%A8%E6%9C%BA%E5%88%B6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>float 更深入的作用机制</h2>\n<p>实际项目开发中不可能总是浮动元素在正常流元素的前面，下面来看一个例子。例如，有一个标题，代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="62734898600875420000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<h3>\n    标题\n</h3>`, `62734898600875420000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>\n    标题\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>一直用得好好的，突然来了一个需求，要在右侧加一个“更多”链接，于是 HTML 变成下面这样（我们这里先忽略语义是否得当的问题）：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="8401670855224119000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<h3>\n    标题\n    <a href=&quot;#&quot;>\n        更多\n    </a>\n</h3>`, `8401670855224119000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>\n    标题\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>#<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n        更多\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>请问：我们直接让<code class="language-text">&lt;a&gt;</code>元素 float:right 可不可以？</p>\n<p>考虑到本书的目标浏览器是 IE8 及以上版本浏览器，因此，答案是：可以。但是，如果你的项目很不幸还需要兼容 IE7 之类的浏览器，则不能这样处理，因为“更多”文字会浮动在下一行内容的右边，而非标题的右边。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2020-01-07-16-23-19-48150d8b1d1e20b162595fae2e31d001-55cf7.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 507px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 16.56804733727811%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAkUlEQVQI12WL3Q6CIBhAef9HUvtDIHDLny1na2uMT8VEkNYDSK42bzpX5+IcVJVFURZSPg7HU32tosje7q8QwrKEH8vXlFKUkhYUZUwIzs9CSoWapsYpZowmu32eXygrnXtvzybj+EzimBDChcgygrFOiUPOOTMZay0AGGO6Dqydwh/zPK+N935thkH3eoRWfwBSgqAfi8FllwAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2020 01 07 16 23 19" title="" data-src="/static/2020-01-07-16-23-19-48150d8b1d1e20b162595fae2e31d001-55cf7.png" data-srcset="/static/2020-01-07-16-23-19-48150d8b1d1e20b162595fae2e31d001-3fad5.png 200w,\n/static/2020-01-07-16-23-19-48150d8b1d1e20b162595fae2e31d001-bb138.png 400w,\n/static/2020-01-07-16-23-19-48150d8b1d1e20b162595fae2e31d001-55cf7.png 507w" data-sizes="(max-width: 507px) 100vw, 507px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>比方说，还是这个例子，假设这里的“标题”内容非常长，超过了一行内容，请问：这里的“更多”<code class="language-text">&lt;a&gt;</code>链接元素该如何显示？是图 6-10 所示的这样吗？答案是：不是的。正确表现应该如图 6-11 所示。</p>\n<p>为什么呢？首先，我们需要了解两个和 float 相关的术语，一是“浮动锚点”（float anchor），二是“浮动参考”（float reference）。</p>\n<ul>\n<li>浮动锚点是 float 元素所在的“流”中的一个点，这个点本身并不浮动，就表现而言更像一个没有 margin、border 和 padding 的空的内联元素。</li>\n<li>浮动参考指的是浮动元素对齐参考的实体。</li>\n</ul>\n<p>在 CSS 世界中，float 元素的“浮动参考”是“行框盒子”，也就是 float 元素在当前“行框盒子”内定位。再强调一遍，是“行框盒子”，不是外面的包含块盒子之类的东西，因为 CSS 浮动设计的初衷仅仅是实现文字环绕效果。在 CSS 新世界中，float 被赋予了更多的作用和使命，“浮动参考”就不仅仅是“行框盒子”了，不过此非本书重点，就不展开了。</p>\n<p>正是因为 float 定位参考的是“行框盒子”，所以“更多”才会在第二行显示。还没理解？那再具体解释一下：每一行内联元素都有一个“行框盒子”，这个例子中标题文字比较多，两行显示了，因此有上下两个“行框盒子”，而“更多”所在的<code class="language-text">&lt;a&gt;</code>元素是在标题文字后面，位于第二行，因此，这里设置了 float:right 的<code class="language-text">&lt;a&gt;</code>元素是相对于第二行的“行框盒子”对齐的，也就是图 6-11 所示的效果。</p>\n<p>假如说我们的标题文字再多两个字，正好两行，请问：“更多”两字又当如何显示呢？估计不少人已经可以脑补出最终的样式表现了，“更多”会孤零零地显示在第三行的右边，但容器高度仍然是两行文字的高度，如图 6-12 所示</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2020-01-07-16-30-58-b01bb870dc8996cb2153731b3fd778a6-42b5b.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 209px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 53.110047846889955%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABwUlEQVQoz4VS2W7aQBT177aP7XekalXSFKkv9BGMwhK6EIwpKV7AwWASYZbIWPStJPFuxpbHPdgkfWuPNHfunNG5c3XuMCmlQRgSsgeCIHBd1/dBhDhGhIDxM4QZPM+zLCuO4zQDQym9u1s16jW2WhHlke9518qI47jLzmWlXB4I4hBQrlsXzXqjNZloQRC6rgMlhEySUNM0WLZcKpV+CtJ+T35tt4OrPs9z9fp5l+/1ej8Gosjz3fNa8+bmNopjdPcsTrYbY6HPhyNZnUxN05REYayqmjYVBEnTNFVVZVlWp1NREDSIo+ivGNutplZZ9uzstFj81Gg13797+6H4sXBaODl5U2HZL60Ltlr99v3r51Kh023jZdu2j2Isx3EeHh5Bua7nHOE6Dgi4Y4Hck9Cy/Hbb4TquPLSShBwNS/8HSg/x8T55+eL+1evftebBrSR5EtMMh+SfJWw7DsMoTeNnksEMsWF0cAIl8sHmM0cEn8coIlkaxBmQwWkGZi4WC13X1+s1qux2O0mSZrOZoiiostlsYPVqtRqPx/O53u9fITcMY7lc4pbJX0DE78mb8TKgEeSEEAwmeEL+1UAios0/3QZP+70A9K0AAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2020 01 07 16 30 58" title="" data-src="/static/2020-01-07-16-30-58-b01bb870dc8996cb2153731b3fd778a6-42b5b.png" data-srcset="/static/2020-01-07-16-30-58-b01bb870dc8996cb2153731b3fd778a6-8ec51.png 200w,\n/static/2020-01-07-16-30-58-b01bb870dc8996cb2153731b3fd778a6-42b5b.png 209w" data-sizes="(max-width: 209px) 100vw, 209px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>然而，上面的解释有一个很大的漏洞就是，如果 float 元素前后全是块元素，那根本没有“行框盒子”，何来对齐的说法？此时，就需要上面提到的“浮动锚点”出马了。“浮动锚点”这个术语名称本身很具有欺骗性，看上去应该与 float 的定位位置有关，实际上关系浅薄，在我看来，其作用就是产生“行框盒子”，因为“浮动锚点”表现如同一个空的内联元素，有内联元素自然就有“行框盒子”，于是，float 元素对齐的参考实体“行框盒子”对于块状元素也同样适用了，只不过这个“行框盒子”由于没有任何内容，所以无尺寸，看不见也摸不着罢了。</p>\n<h2 id="float-与流体布局"><a href="#float-%E4%B8%8E%E6%B5%81%E4%BD%93%E5%B8%83%E5%B1%80" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>float 与流体布局</h2>\n<p>float 通过破坏正常 CSS 流实现 CSS 环绕，带来了烦人的“高度塌陷”的问题，然而，凡事都具有两面性，只要了解透彻，说不定就可以变废为宝、化腐朽为神奇。例如。我们可以利用 float 破坏 CSS 正常流的特性，实现两栏或多栏的自适应布局。还记不记得之前小动物环绕的例子？其实我们稍加改造，就能变成一侧定宽的两栏自适应布局，HTML 和 CSS 代码如下：</p>\n<html><head></head><body><div class="gatsby-code-button-container" data-toaster-id="25001356832482260000" data-toaster-class="gatsby-code-button-toaster" data-toaster-text-class="gatsby-code-button-toaster-text" data-toaster-text="复制成功" data-toaster-duration="3500" onclick="copyToClipboard(`<style>\n    .father {\n        overflow: hidden;\n    }\n    .father > img {\n        width: 60px;\n        height: 64px;\n        float: left;\n    }\n    .animal {\n        margin-left: 70px;\n    }\n</style>\n<div class=&quot;father&quot;>\n    <img data-src=&quot;me.jpg&quot; />\n    <p class=&quot;animal&quot;>\n        小猫 1，小猫 2，...\n    </p>\n</div>`, `25001356832482260000`)">\n              <div class="gatsby-code-button" title="html">\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div></body></html>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n    <span class="token selector">.father</span> <span class="token punctuation">{</span>\n        <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token selector">.father > img</span> <span class="token punctuation">{</span>\n        <span class="token property">width</span><span class="token punctuation">:</span> 60px<span class="token punctuation">;</span>\n        <span class="token property">height</span><span class="token punctuation">:</span> 64px<span class="token punctuation">;</span>\n        <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token selector">.animal</span> <span class="token punctuation">{</span>\n        <span class="token property">margin-left</span><span class="token punctuation">:</span> 70px<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>father<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>me.jpg<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>animal<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n        小猫 1，小猫 2，...\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>和文字环绕效果相比，区别就在于.animal 多了一个 margin-left:70px，也就是所有小动物都要跟男主保持至少 70px 的距离，由于图片宽度就 60px，因此不会发生环绕，自适应效果达成。</p>\n<p>原理其实很简单，.animal 元素没有浮动，也没有设置宽度，因此，流动性保持得很好，设置 margin-left、border-left 或者 padding-left 都可以自动改变 content box 的尺寸，继而实现了宽度自适应布局效果。我们不妨对比一下环绕效果的背景区域和这里自适应效果的背景区域（见图 6-13），理解起来应该会更加直白。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2020-01-07-16-35-49-87162b15ca34826d460a4dc9717ff841-6db8f.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 383px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 29.242819843342037%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABNUlEQVQY0yWKiW6CQBRF+f8PqTVq0LqXihpbl5i4VIZlGDYBoewIWMDadmpfXm7OXQgo67Jhi4qpmQFSLdX0Jc1WDO9ohY7reK4dRr5p+0i1cYUH/zPtFOR5SfSm+ya9e2iv21NU6WAVsT5Nxf6rpOjHwD1GsUvPQZ3i6oM9SXO14a5OgRbNhnFGNF7em6MDScPH3rY1gdXehhwLmLszpJmGY+th4L5ttdozU+3vSJqvdDfNMWxQzDktiM6EHa+VwYydH5wl8JaMs2L9BWbGDozT1bJK5wMAYzgX6ZU0WiJqgVbAm++tJMuJosgvl6zIP8s/SJPkjD9LkyxLU+ywiaJzHKc4vCcYLln6dS2/bzcC1xBCXddxYxgGx3EAAFEUJVnmeV6RZWwFCDEjhAQBI1RV9ed+v+AfNKiR4XvjAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2020 01 07 16 35 49" title="" data-src="/static/2020-01-07-16-35-49-87162b15ca34826d460a4dc9717ff841-6db8f.png" data-srcset="/static/2020-01-07-16-35-49-87162b15ca34826d460a4dc9717ff841-89fca.png 200w,\n/static/2020-01-07-16-35-49-87162b15ca34826d460a4dc9717ff841-6db8f.png 383w" data-sizes="(max-width: 383px) 100vw, 383px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>没有对比就没有震撼。很多人实现这样的效果会采用下面这样的砖头式的浮动布局：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="13245463720033790000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.animal {\n    width: 170px;\n    float: right;\n}`, `13245463720033790000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.animal</span> <span class="token punctuation">{</span>\n    <span class="token property">width</span><span class="token punctuation">:</span> 170px<span class="token punctuation">;</span>\n    <span class="token property">float</span><span class="token punctuation">:</span> right<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>乍一看，效果一样，但是实际上这容错性和可拓展性就差远了。一旦我们的容器宽度发生了变化，那么这个布局就基本作废，宽度小了，两栏内容上下错位，宽度变大，中间间隙宽到可以撑船，就是因为浮动和宽度破坏了 CSS 的流动性。这种感觉就像是把记忆合金变成了死板砖头。在我看来，这类布局是没有任何理由使用这种“砌砖头”式的技术方案的。一个简简单单的 margin-left 岂不比需要计算、代码量多、可维护性差的一堆 CSS 代码好很多！</p>\n<p>一般而言，上面的技巧适用于一侧定宽一侧自适应：如果是宽度不固定，也有办法处理，这会在 6.3.2 节中介绍。如果是百分比宽度，则也是可以的，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="73322639968991890000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.left {\n    float: left;\n    width: 50%;\n}\n\n.right {\n    margin-left: 50%;\n}`, `73322639968991890000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.left</span> <span class="token punctuation">{</span>\n    <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>\n    <span class="token property">width</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.right</span> <span class="token punctuation">{</span>\n    <span class="token property">margin-left</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>如果是多栏布局，也同样适用，尤其图 6-14 所示的这种布局。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2020-01-07-16-41-11-1237c59940ab14b6f9f34e262f3622a2-59488.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 331px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 22.356495468277945%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsSAAALEgHS3X78AAAAvUlEQVQI1yVOyw6DMAzj//9n27Vs4jBxn0CC0lZCUAYdLX1A6WCBOYdEie04cs4657TSejLLMgOMMcMwSDn2PfSBd/zd98CZT1h7kCdl3OwiOcquFtWr6epP+K4hhPEjkiRJ0ydCcYzQ7Xq5PxLQhPUoJSaatSRr1aQi7z2YwjdttAUKGDoLMQDmbOYEnP4DbM4Ui/drtG3bvu9CiKIoKKVaa6UUxrjCOM9zQghjtCwLznnTNIwxOIEFSED4AzxD3ln6upO8AAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2020 01 07 16 41 11" title="" data-src="/static/2020-01-07-16-41-11-1237c59940ab14b6f9f34e262f3622a2-59488.png" data-srcset="/static/2020-01-07-16-41-11-1237c59940ab14b6f9f34e262f3622a2-4eb6c.png 200w,\n/static/2020-01-07-16-41-11-1237c59940ab14b6f9f34e262f3622a2-59488.png 331w" data-sizes="(max-width: 331px) 100vw, 331px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>假设 HTML 结构如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="54300010623449915000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<div class=&quot;box&quot;>\n    <a href class=&quot;prev&quot;>\n        &laquo; 上一章\n    </a>\n    <a href class=&quot;next&quot;>\n        下一章 &raquo;\n    </a>\n    <h3 class=&quot;title&quot;>\n        第 112 章 动物环绕\n    </h3>\n</div>`, `54300010623449915000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>prev<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n        <span class="token entity" title="&laquo;">&amp;laquo;</span> 上一章\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>next<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n        下一章 <span class="token entity" title="&raquo;">&amp;raquo;</span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n        第 112 章 动物环绕\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>则 CSS 可以如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="97978582071955980000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.prev {\n    float: left;\n}\n\n.next {\n    float: right;\n}\n\n.title {\n    margin: 0 70px;\n    text-align: center;\n}`, `97978582071955980000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.prev</span> <span class="token punctuation">{</span>\n    <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.next</span> <span class="token punctuation">{</span>\n    <span class="token property">float</span><span class="token punctuation">:</span> right<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.title</span> <span class="token punctuation">{</span>\n    <span class="token property">margin</span><span class="token punctuation">:</span> 0 70px<span class="token punctuation">;</span>\n    <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>也就是说，.title 所在的<code class="language-text">&lt;h3&gt;</code>标题元素直接左右 margin，借助流体特性，保证不会和两个文字链接重叠。</p>\n<h1 id="float-的天然克星-clear"><a href="#float-%E7%9A%84%E5%A4%A9%E7%84%B6%E5%85%8B%E6%98%9F-clear" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>float 的天然克星 clear</h1>\n<h2 id="什么是-clear-属性"><a href="#%E4%BB%80%E4%B9%88%E6%98%AF-clear-%E5%B1%9E%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>什么是 clear 属性</h2>\n<p>生生相克，float 这个魔鬼属性也不例外。CSS 有一个专门用来处理 float 属性带来的高度塌陷等问题的属性，这个属性就是 clear。其语法如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="89163643270298000000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`clear: none | left | right | both`, `89163643270298000000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title=""\n              >\n                \n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">clear: none | left | right | both</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>如果单看字面意思，clear:left 应该是“清除左浮动”，clear:right 应该是“清除右浮动”的意思，实际上，这种解释是有问题的，因为浮动一直还在，并没有清除。没错，并没有清除。</p>\n<p>官方对 clear 属性的解释是：“元素盒子的边不能和前面的浮动元素相邻。”虽然有些拗口，但是有一点是可以体会出来的，就是设置了 clear 属性的元素自身如何如何，而不是让 float 元素如何如何，有种“己所不欲勿施于人”的意味在里面。因此，我对 clear 属性值的理解是下面这样的。</p>\n<ul>\n<li>none：默认值，左右浮动来就来。</li>\n<li>left：左侧抗浮动。</li>\n<li>right：右侧抗浮动。</li>\n<li>both：两侧抗浮动。</li>\n</ul>\n<p>大家有没有发现，我们平时除了 clear:both 这个声明比较多以外，left 和 right 这两个属性值几乎无人问津，是因为 left 和 right 这两个值没有作用吗？</p>\n<p>没错，确实没有什么用！凡是 clear:left 或者 clear:right 起作用的地方，一定可以使用 clear:both 替换！</p>\n<p>举个例子，假设容器宽度足够宽，有 10 个<code class="language-text">&lt;li&gt;</code>元素，设置了如下 CSS 代码：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="75212321707002540000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`li {\n    width: 20px;\n    height: 20px;\n    margin: 5px;\n    float: left;\n}\n\nli:nth-of-type(3) {\n    clear: both;\n}`, `75212321707002540000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">li</span> <span class="token punctuation">{</span>\n    <span class="token property">width</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>\n    <span class="token property">height</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>\n    <span class="token property">margin</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>\n    <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">li:nth-of-type(3)</span> <span class="token punctuation">{</span>\n    <span class="token property">clear</span><span class="token punctuation">:</span> both<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>列表最后是 1 行显示、2 行显示，还是 3 行显示呢？</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2020-01-07-16-49-05-2f8f74a18cd52d1f38aaf49f55dc217c-e6d69.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 193px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 42.487046632124354%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAABI0lEQVQY04VRTauCUBTsL/cXKlq3V9zYogQXrgUN1MxFCCEUip+5EDEjUFPLV+O7j168Fm/Awzlzz+jccfB4PGazGU3TqqoOh8M8z8F0Xff1BjCfI+oAz3a73e12cRzLsny9Xl9n/6IXr1YrXddd1xUEIU3TxWLhOI4kSYqiHA4HjuOSJFkul57niaKoaRpI7OAzvZiiqPl8vtlsRqOR7/vj8RheWJaFAOR0OsV7J5OJaZoMw/A8DxJjURS9+Ha7kUuiEs9o7vc7Md99g4zkCGjbFv2AbMBYEARwUtd1lmUgm6aJouh0OiHCsixRz+cz1i6XC5qfOxPxfr9fr9eIDbbhGcqqqgzDQBaWZYVhiBSOxyMMo7Ft+zewP3iP+mX1828BTyytrmMw09aqAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2020 01 07 16 49 05" title="" data-src="/static/2020-01-07-16-49-05-2f8f74a18cd52d1f38aaf49f55dc217c-e6d69.png" data-srcset="/static/2020-01-07-16-49-05-2f8f74a18cd52d1f38aaf49f55dc217c-e6d69.png 193w" data-sizes="(max-width: 193px) 100vw, 193px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>原因在于，clear 属性是让自身不能和前面的浮动元素相邻，注意这里“前面的”3 个字，也就是 clear 属性对“后面的”浮动元素是不闻不问的，因此才 2 行显示而非 3 行。</p>\n<h2 id="成事不足败事有余的-clear"><a href="#%E6%88%90%E4%BA%8B%E4%B8%8D%E8%B6%B3%E8%B4%A5%E4%BA%8B%E6%9C%89%E4%BD%99%E7%9A%84-clear" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>成事不足败事有余的 clear</h2>\n<p>clear 属性只有块级元素才有效的，而::after 等伪元素默认都是内联水平，这就是借助伪元素清除浮动影响时需要设置 display 属性值的原因。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="41013401016184720000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.clear:after {\n    content: \'\';\n    /* 也可以是\'block\'，或者是\'list-item\' */\n    display: table;\n    clear: both;\n}`, `41013401016184720000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.clear:after</span> <span class="token punctuation">{</span>\n    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">\'\'</span><span class="token punctuation">;</span>\n    <span class="token comment">/* 也可以是\'block\'，或者是\'list-item\' */</span>\n    <span class="token property">display</span><span class="token punctuation">:</span> table<span class="token punctuation">;</span>\n    <span class="token property">clear</span><span class="token punctuation">:</span> both<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>然而，利用伪元素或者直接使用下面 HTML，有时候也会产生一些意想不到的问题：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="67995679598450370000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<div style=&quot;clear:both;&quot;></div>`, `67995679598450370000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">clear</span><span class="token punctuation">:</span>both<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>继续前面那个小动物环绕的例子，如果我们在右侧自适应内容里面使用了类似这样的样式，则可能会发生右边的内容跑到图片下边的情况，HTML 代码如下：</p>\n<html><head></head><body><div class="gatsby-code-button-container" data-toaster-id="33492077012652577000" data-toaster-class="gatsby-code-button-toaster" data-toaster-text-class="gatsby-code-button-toaster-text" data-toaster-text="复制成功" data-toaster-duration="3500" onclick="copyToClipboard(`<div class=&quot;father&quot;>\n    <img data-src=&quot;me.jpg&quot; />\n    <div class=&quot;animal&quot;>\n        小猫 1，小猫 2，\n        <div class=&quot;clear&quot;></div>\n        小猫 3，小猫 4，...\n    </div>\n</div>`, `33492077012652577000`)">\n              <div class="gatsby-code-button" title="html">\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div></body></html>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>father<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>me.jpg<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>animal<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n        小猫 1，小猫 2，\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>clear<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n        小猫 3，小猫 4，...\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>结果却是如图 6-16 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2020-01-07-16-56-17-ecebc44056122dc064b47ea4e09130df-43b87.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 330px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 41.515151515151516%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABN0lEQVQY03VRS07DMBTsoeASXII1SNwAIVjBoqIrJDbs2HICQEggoAtYVSoUmqYocWLHKXZjO/8mTBuBWqnM4tnPfvPGb9yqF6iqCvFz/H7/dD2w+h5zGGVSSs45ZSxN0yRJ4jjGpl5Cq1nKskS8uDrb3908PNi6e7mdsFDKKfWp7/toPJvNiqIwxvxLPr9s7+1snJ5sP7926zmhXC4FH/pryLhAfHi8abePOp3jr7FttI7jRCslpIBmGIZ5nq9XbpClWTO8UqrX6ykVDQYflFJC3JE95jyABX8GzcnVL5CgMUQW5IhS5hGXeH7IA8uycPXW739PRENu6leUG1fTBYzRlPra6JBzIaeRUjAvy/KVZ3ueRwgJggAjaa2jCGVKCIF/gpo9slHgOI7rurAdcTgc4gSzIP0B0je97tvrpn4AAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2020 01 07 16 56 17" title="" data-src="/static/2020-01-07-16-56-17-ecebc44056122dc064b47ea4e09130df-43b87.png" data-srcset="/static/2020-01-07-16-56-17-ecebc44056122dc064b47ea4e09130df-12832.png 200w,\n/static/2020-01-07-16-56-17-ecebc44056122dc064b47ea4e09130df-43b87.png 330w" data-sizes="(max-width: 330px) 100vw, 330px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>由于 clear:both 的作用本质是让自己不和 float 元素在一行显示，并不是真正意义上的清除浮动，因此 float 元素一些不好的特性依然存在，于是，会有类似下面的现象。</p>\n<ol>\n<li>\n<p>如果 clear:both 元素前面的元素就是 float 元素，则 margin-top 负值即使设成-9999px，也不见任何效果。</p>\n</li>\n<li>\n<p>clear:both 后面的元素依旧可能会发生文字环绕的现象。举个例子，如下 HTML 和 CSS：</p>\n<html><head></head><body><div class="gatsby-code-button-container" data-toaster-id="30489384138243870000" data-toaster-class="gatsby-code-button-toaster" data-toaster-text-class="gatsby-code-button-toaster-text" data-toaster-text="复制成功" data-toaster-duration="3500" onclick="copyToClipboard(`<style>\n    .father:after {\n        content: \'\';\n        display: table;\n        clear: both;\n    }\n    .father img {\n        float: left;\n        width: 60px;\n        height: 64px;\n    }\n    .father + div {\n        margin-top: -2px;\n    }\n</style>\n<div class=&quot;father&quot;>\n    <img data-src=&quot;zxx.jpg&quot; />\n    我是帅哥，好巧啊，我也是帅哥，原来看这本书的人都是帅哥~\n</div>\n<div>虽然你很帅，但是我对你不感兴趣。</div>`, `30489384138243870000`)">\n              <div class="gatsby-code-button" title="html">\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div></body></html>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n    <span class="token selector">.father:after</span> <span class="token punctuation">{</span>\n        <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">\'\'</span><span class="token punctuation">;</span>\n        <span class="token property">display</span><span class="token punctuation">:</span> table<span class="token punctuation">;</span>\n        <span class="token property">clear</span><span class="token punctuation">:</span> both<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token selector">.father img</span> <span class="token punctuation">{</span>\n        <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>\n        <span class="token property">width</span><span class="token punctuation">:</span> 60px<span class="token punctuation">;</span>\n        <span class="token property">height</span><span class="token punctuation">:</span> 64px<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token selector">.father + div</span> <span class="token punctuation">{</span>\n        <span class="token property">margin-top</span><span class="token punctuation">:</span> -2px<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>father<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>zxx.jpg<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>\n    我是帅哥，好巧啊，我也是帅哥，原来看这本书的人都是帅哥~\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>虽然你很帅，但是我对你不感兴趣。<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>虽然.father 父元素的最后设置了 clear:both 来阻止浮动对后面元素的影响，但是最后结果错位依然发生了，如图 6-17 所示。</p>\n</li>\n</ol>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2020-01-07-17-00-30-7b76ecee855496990616a1a6d1610811-b4b51.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 200px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 73.5%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAChklEQVQoz4VSPW/TUBT1b+EXMCEBRTAB3WgnKiEm1IqCYKGoSJXYyFaxdGNgYWBgoaqoaFSlTanT2E4cf71nx7HdFjWfre1nx07jj3LjQhQGxBmurq7vPdf3vENdTCBJUohpmmYhSZPk/Pw8jpM4jqEyHA6jKB59SNI4jqBIBUGQW1tZyS18/fKpyOY/fF5FksxwVSQpXKXiEqJrKsKozLDtdvvo0EIIK7KoYNXzfKrf9x8t3X25cLXy8fn88p1XuSd1rLIV3tR0XhDCwcAyjWarJUoSIV6n3QIijJWGaY2GfZ88XLz9YObK7vvZ+ZdTb3IvDFwXJAn+ky6VDlhud2e7WhFM01BVhWGqnXYXY1nC2Pd9injO3OKtx0+vG6XV9fW1t++WVaQqMtLqmm07QRASQmzb9jxvMBi4Lun3+67reLCTEIr4zuzc1P3pazOzN+9N33i99AxhTVd1URSjOLn4B0A2YKSiKCrRPwrbW/nvm1tbmyxLw3mqquqGXuWrtZrc6/VAMoZluEpVEESkIIQU07JAaWqSDCJxHbp8oDcahtmQJLGuGWE4sIwGw3F8raZpdV3Xj38ewkXQTCXxsLCzIyvyt40N6+h4zPJfQBtsToN+AE/i2HYYhpfVSYxbR3lmovE8BSVC3Gg4hAQ8NDn/19ifBDwHj+S6LshOQXc+n+d5XsvQ7XahD0RqtVpHGRzHOTk5gVMhhyL4rFgs7u/vg25UkiTwhkBxenp6dnYGfMDdywAzlmVB4mSAhk6n02w2IYE2GKHGCpmmyTAM8GGMWZYVBAE27O3tcRwHn6BYLpdpmi4UCmCPsWC/h2EhVOEecBKwZn4aHXYJP7MURHhesMbl1C8PlRjB1/R4egAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2020 01 07 17 00 30" title="" data-src="/static/2020-01-07-17-00-30-7b76ecee855496990616a1a6d1610811-b4b51.png" data-srcset="/static/2020-01-07-17-00-30-7b76ecee855496990616a1a6d1610811-b4b51.png 200w" data-sizes="(max-width: 200px) 100vw, 200px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>由此可见，clear:both 只能在一定程度上消除浮动的影响，要想完美地去除浮动元素的影响，还需要使用其他 CSS 声明。那应该使用哪些 CSS 声明呢？请看 6.3 节。</p>\n<h1 id="css-世界的结界-bfc"><a href="#css-%E4%B8%96%E7%95%8C%E7%9A%84%E7%BB%93%E7%95%8C-bfc" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>CSS 世界的结界 ——BFC</h1>\n<h2 id="bfc-的定义"><a href="#bfc-%E7%9A%84%E5%AE%9A%E4%B9%89" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>BFC 的定义</h2>\n<p>BFC 全称为 block formatting context，中文为“块级格式化上下文”。相对应的还有 IFC，也就是 inline formatting context，中文为“内联格式化上下”。不过 IFC 作用和影响比较隐晦，我们就不介绍了，我们将学习重点放在 BFC 上。</p>\n<p>关于 BFC 各种特性什么的，说起来很啰嗦，而我喜欢用“CSS 世界的结界”这种称谓概括 BFC 的特性。“结界”这个词大家应该都理解的，指通过一些特定的手段形成的封闭空间，里面的人出不去，外面的人进不来，具有极强的防御力。BFC 的特性表现如出一辙。</p>\n<p>大家请记住下面这个表现原则：如果一个元素具有 BFC，内部子元素再怎么翻江倒海、翻云覆雨，都不会影响外部的元素。所以，BFC 元素是不可能发生 margin 重叠的，因为 margin 重叠是会影响外面的元素的；BFC 元素也可以用来清除浮动的影响，因为如果不清除，子元素浮动则父元素高度塌陷，必然会影响后面元素布局和定位，这显然有违 BFC 元素的子元素不会影响外部元素的设定。</p>\n<p>那什么时候会触发 BFC 呢？常见的情况如下：</p>\n<ul>\n<li><code class="language-text">&lt;html&gt;</code>根元素；</li>\n<li>float 的值不为 none；</li>\n<li>overflow 的值为 auto、scroll 或 hidden；</li>\n<li>display 的值为 table-cell、table-caption 和 inline-block 中的任何一个；</li>\n<li>position 的值不为 relative 和 static。</li>\n</ul>\n<p>换言之，只要元素符合上面任意一个条件，就无须使用 clear:both 属性去清除浮动的影响了。因此，不要见到一个<code class="language-text">&lt;div&gt;</code>元素就加个类似.clearfix 的类名，否则只能暴露你孱弱的 CSS 基本功。</p>\n<h2 id="bfc-与流体布局"><a href="#bfc-%E4%B8%8E%E6%B5%81%E4%BD%93%E5%B8%83%E5%B1%80" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>BFC 与流体布局</h2>\n<p>BFC 的结界特性最重要的用途其实不是去 margin 重叠或者是清除 float 影响，而是实现更健壮、更智能的自适应布局。</p>\n<p>我们还是从最基本的文字环绕效果说起。还是那个小动物环绕的例子：</p>\n<html><head></head><body><div class="gatsby-code-button-container" data-toaster-id="50322025875332170000" data-toaster-class="gatsby-code-button-toaster" data-toaster-text-class="gatsby-code-button-toaster-text" data-toaster-text="复制成功" data-toaster-duration="3500" onclick="copyToClipboard(`<style>\n    img {\n        float: left;\n    }\n</style>\n<div class=&quot;father&quot;>\n    <img data-src=&quot;me.jpg&quot; />\n    <p class=&quot;animal&quot;>\n        小猫 1，小猫 2，...\n    </p>\n</div>`, `50322025875332170000`)">\n              <div class="gatsby-code-button" title="html">\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div></body></html>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n    <span class="token selector">img</span> <span class="token punctuation">{</span>\n        <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>father<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>me.jpg<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>animal<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n        小猫 1，小猫 2，...\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>效果如图 6-18 所示。此时.animal 的内容显然受到了设置了 float 属性值的图片的影响而被环绕了。此时如果我们给.animal 元素设置具有 BFC 特性的属性，如 overflow:hidden，如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="17699623395908248000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.animal {\n    overflow: hidden;\n}`, `17699623395908248000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.animal</span> <span class="token punctuation">{</span>\n    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>则根据 BFC 的表现原则，具有 BFC 特性的元素的子元素不会受外部元素影响，也不会影响外部元素。于是，这里的.animal 元素为了不和浮动元素产生任何交集，顺着浮动边缘形成自己的封闭上下文，如图 6-19 所示（垂直虚线为辅助示意）。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2020-01-07-17-12-08-6c9def1612017095b6c31b626c8e0729-3e688.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 589px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 19.01528013582343%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsSAAALEgHS3X78AAAA0klEQVQI1z2N3W6CQBCFef+nMCnGi97YIMb0GXQRhBUliogCZRf3j58lWlagSScncy7OfHO07f68cUPgXYEXA3i1/YSJRinVKTXuwRmnCCW7/QXA2ILxxovcIHv9dtrMXOsLoBv21HR005ku3RSJARvpbjRS5On5MF9Zky9LN7Yfhv35DZ+vTus/2f7dPaFDRP0LgWHBK6n+Z4RbQmQUHYO7c0x3QTZchsXQXJWibRvywGlyw+inF2fsD6SUYoyllIxzUdd1VZaCNXX5KHKUZ336BiiD18G+ZeQTAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2020 01 07 17 12 08" title="" data-src="/static/2020-01-07-17-12-08-6c9def1612017095b6c31b626c8e0729-3e688.png" data-srcset="/static/2020-01-07-17-12-08-6c9def1612017095b6c31b626c8e0729-c6c0d.png 200w,\n/static/2020-01-07-17-12-08-6c9def1612017095b6c31b626c8e0729-69d2c.png 400w,\n/static/2020-01-07-17-12-08-6c9def1612017095b6c31b626c8e0729-3e688.png 589w" data-sizes="(max-width: 589px) 100vw, 589px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>也就是说，普通流体元素在设置了 overflow:hidden 后，会自动填满容器中除了浮动元素以外的剩余空间，形成自适应布局效果，而且这种自适应布局要比纯流体自适应更加智能。比方说，我们让图片的尺寸变小或变大，右侧自适应内容无须更改任何样式代码，都可以自动填满剩余的空间。例如，我们把图片的宽度从 60px 改成 30px，结果如图 6-20 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2020-01-07-17-13-24-792d30578568378143373951ece7754d-42b5b.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 209px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 55.50239234449761%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACAklEQVQozzWQC3OaQBDH/f7foOm0yUxSHZIMobVaNRqNNaFKDI0RKsjrQN5IfEASedkF2529m/8t/9/eHqUkSQxTd1375WUVhm/bbbBebzbbMAjf1pst5DZ43QZhUQyC8BUWOIMg2O/3pV0U8fPp0kV3j3z5aoBf04Mnp9ZjykS/cSf0afOyRmLfye7YaJFChfiJN8a3tC0iO4ejKFKQuF45g7F0VOmefh1eP9j4NfPhrIV3uNbIOiPIE/y+OTKrfeH4vI/9eGqObAG5ORzHMYwEiprqn85vsfpj58EiOuxn7Ibocm3KwGpUpUq1KKvWn5erw6s2Ax3FAxzF8WaTw7+eF0eVHlb/3RjZF83nj1j3sv2nOTRO8fsTnKyTOtGbH1/0v3wbNylvrjj/bl4ul7v3d9PxBcVUFo5m+srClVQL6Z5q+DKyQIOAo4RMWbM1a+V6fg7DAh5eniRRlqVRtEviKE3jLE2KPU5zkaRJDAnFrND7LMthRVFomnZdV5ZlURShhBDieV6SZMdxEVIZhuXn89mM43ieYVldNyBVVYUrS47jzGYzXdflIgA2TdOyLNCapgmCAB0lSQIBTaFoGAYY4FMO7/9HmqbgmE6nk8kETGCFpovFguM4lmWhCLvv50/NipnzsUEBBgqeDX/O8zxoDONAb6sIOBpFwHQHGPwH/i+n5UQbwDjFcQAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2020 01 07 17 13 24" title="" data-src="/static/2020-01-07-17-13-24-792d30578568378143373951ece7754d-42b5b.png" data-srcset="/static/2020-01-07-17-13-24-792d30578568378143373951ece7754d-8ec51.png 200w,\n/static/2020-01-07-17-13-24-792d30578568378143373951ece7754d-42b5b.png 209w" data-sizes="(max-width: 209px) 100vw, 209px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>实际项目开发的时候，图片和文字不可能靠这么近，如果想要保持合适的间距，那也很简单，如果元素是左浮动，则浮动元素可以设置 margin-right 成透明 border-right 或 padding-right；又或者右侧 BFC 元素设置成透明 border-left 或者 padding-left，但不包括 margin-left，因为如果想要使用 margin-left，则其值必须是浮动元素的宽度加间隙的大小，就变成动态不可控的了，无法大规模复用。因此，套用上面例子的 HTML，假设我们希望间隙是 10px，则下面这几种写法都是可以的：</p>\n<ul>\n<li>img { margin-right: 10px; }</li>\n<li>img { border-right: 10px solid transparent; }</li>\n<li>img { padding-right: 10px; }</li>\n<li>.animal { border-left: 10px solid transparent; }</li>\n<li>.animal { padding-right: 10px; }</li>\n</ul>\n<p>一般而言，我喜欢通过在浮动元素上设置 margin 来控制间距，也就是下面的 CSS 代码：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="92263534669628100000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`img {\n    float: left;\n    margin-right: 10px;\n}\n\n.animal {\n    overflow: hidden;\n}`, `92263534669628100000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">img</span> <span class="token punctuation">{</span>\n    <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>\n    <span class="token property">margin-right</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.animal</span> <span class="token punctuation">{</span>\n    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>布局效果如图 6-21 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2020-01-07-17-17-03-289e8d9c19bb6c2276242bf725b1a833-43b87.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 330px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 76.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACEklEQVQoz3WSS2/TQBSF87tY8UeQkNgiWCB1xy5iwao7thXQBUVqkqpJJFDVRml4VzSBqCWNHT/HHo89Hjt+jOM8uHhoFCJzFs6Vfb87Z85NZXWr+XxuIMUnWjglXwfSXu1zsyu/rPWOu5PXjU+1k6vDk2vTptC5XC4FUtmENWOCbZUx8u3H5KgjHbQu6qfXjdOrN+3vx51fB+1L7IblcJ7njPnT6TTjyc8xqZ9Jr+ofmz11/+hLozNu9bTWBx170wJebcOLxWI2m8H5MIWyyMSBahLkBLpFDZsRn9tenKTZakOVtQ3HcUxkusSJowhj2zT0gPkOti1kUo842LKQAYLRJbDneT5lKc/z+ZwQ17Is13UxxgghG2MYbVk2CKz9A6/52rv9w7cv3nfrELui6HB/TVUp9QGY3Wrb9hreefZgd+dO9fk9WZcDFmZZRimNk2RZCEYkSfJf+MnT+48f3q1WH5kW2lzJOtE0TUtg0dq/vGi3m+fnnTBkE0XNODd0jQUBxGXbGMgoisphCIrzv5tApqGoGnGILMthwEajkUeprv9JoRyGKwVBEMdxmiYugaTd4XAIv5IkmQhpmnYzutm2DXsDw3AfEYkIFl5yzmEQ5ymEBHUSQ3AJvBedgqrAeFgL7BO+EUIgXq8Q1ONCcDLYhh6oB4OBWqjf7/u+XxFHwRMmiU2Kf6hwAYUwIupNQf9vVOpCMU5MFVMAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2020 01 07 17 17 03" title="" data-src="/static/2020-01-07-17-17-03-289e8d9c19bb6c2276242bf725b1a833-43b87.png" data-srcset="/static/2020-01-07-17-17-03-289e8d9c19bb6c2276242bf725b1a833-12832.png 200w,\n/static/2020-01-07-17-17-03-289e8d9c19bb6c2276242bf725b1a833-43b87.png 330w" data-sizes="(max-width: 330px) 100vw, 330px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>和基于纯流体特性实现的两栏或多栏自适应布局相比，基于 BFC 特性的自适应布局有如下优点：</p>\n<ol>\n<li>\n<p>自适应内容由于封闭而更健壮，容错性更强。比方说，内部设置 clear:both 不会与 float 元素相互干扰而导致错位，也就不会发生类似于图 6-22 所示的问题。</p>\n</li>\n<li>\n<p>自适应内容自动填满浮动以外区域，无须关心浮动元素宽度，可以整站大规模应用。比方说，抽象几个通用的布局类名，如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="28556924481012257000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.left {\n    float: left;\n}\n.right {\n    float: right;\n}\n.bfc {\n    overflow: hidden;\n}`, `28556924481012257000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.left</span> <span class="token punctuation">{</span>\n    <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token selector">.right</span> <span class="token punctuation">{</span>\n    <span class="token property">float</span><span class="token punctuation">:</span> right<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token selector">.bfc</span> <span class="token punctuation">{</span>\n    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n</ol>\n<p>于是，只要遇到两栏结构，直接使用上面的结构类名就可以完成基本的布局。HTML 示意如下：</p>\n<html><head></head><body><div class="gatsby-code-button-container" data-toaster-id="20111032423321285000" data-toaster-class="gatsby-code-button-toaster" data-toaster-text-class="gatsby-code-button-toaster-text" data-toaster-text="复制成功" data-toaster-duration="3500" onclick="copyToClipboard(`<div class=&quot;bfc&quot;>\n    <img data-src=&quot;me.jpg&quot; class=&quot;left&quot; />\n    <p class=&quot;bfc&quot;>\n        小猫 1，小猫 2，...\n    </p>\n</div>`, `20111032423321285000`)">\n              <div class="gatsby-code-button" title="html">\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div></body></html>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>bfc<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>me.jpg<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>left<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>bfc<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n        小猫 1，小猫 2，...\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>上面的类名只是示意，具体可根据自己项目的规范设定，甚至直接用.l 或者.r 这样的极短命名也是可以的。</p>\n<p>而纯流体布局需要大小不确定的 margin 或 padding 等值撑开合适间距，无法 CSS 组件化。例如，前面出现的 70px，其他类似布局可能就是 90px，无法大规模复用：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="56574211085947870000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.animal {\n    margin-left: 70px;\n}`, `56574211085947870000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.animal</span> <span class="token punctuation">{</span>\n    <span class="token property">margin-left</span><span class="token punctuation">:</span> 70px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>两种不同原理的自适应布局策略的高下一看便知。甚至可以这么说，有了 BFC 自适应布局，纯流体特性布局基本上没有了存在的价值。然而，只是理论上如此。如果 BFC 自适应布局真那么超能，那为何并没有口口相传呢？</p>\n<p>理论上，任何 BFC 元素和 float 元素相遇的时候，都可以实现自动填充的自适应布局。但是，由于绝大多数的触发 BFC 的属性自身有一些古怪的特性，所以，实际操作的时候，能兼顾流体特性和 BFC 特性来实现无敌自适应布局的属性并不多。下面我们一个一个来看，每个 CSS 属性选一个代表来进行说明。</p>\n<ol>\n<li>\n<p>float:left。浮动元素本身 BFC 化，然而浮动元素有破坏性和包裹性，失去了元素本身的流体自适应性，因此，无法用来实现自动填满容器的自适应布局。不过，其因兼容性还算良好，与搭积木这种现实认知匹配，上手简单，因此在旧时代被大肆使用，也就是常说的“浮动布局”，也算阴差阳错地开创了自己的一套布局。</p>\n</li>\n<li>\n<p>position:absolute。这个脱离文档流有些严重，过于清高，和非定位元素很难玩到一块儿去，我就不说什么了。</p>\n</li>\n<li>\n<p>overflow:hidden。这个超棒！不像浮动和绝对定位，玩得有点儿过。其本身还是一个很普通的元素，因此，块状元素的流体特性保存得相当完好，附上 BFC 的独立区域特性，可谓如虎添翼、宇宙无敌！而且 overflow:hidden 的 BFC 特性从 IE7 浏览器开始就支持，兼容性也很不错。唯一的问题就是容器盒子外的元素可能会被隐藏掉，一定程度上限制了这种特性的大规模使用。不过，溢出隐藏的交互场景比例不算很高，所以它还是可以作为常用 BFC 布局属性使用的。</p>\n</li>\n<li>\n<p>display:inline-block。这是 CSS 世界最伟大的声明之一，但是用在这里，就有些捉襟见肘了。display:inline-block 会让元素尺寸包裹收缩，完全就不是我们想要的 block 水平的流动特性。只能是一声叹息舍弃掉！然而，峰回路转，世事难料。大家应该知道，IE6 和 IE7 浏览器下，block 水平的元素设置 display:inline-block 元素还是 block 水平，也就是还是会自适应容器的可用宽度显示。于是，对于 IE6 和 IE7 浏览器，我们会阴差阳错得到一个比 overflow:hidden 更强大的声明，既 BFC 特性加身，又流体特性保留</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="1850788031612871200"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.float-left {\n    float: left;\n}\n.bfc-content {\n    display: inline-block;\n}`, `1850788031612871200`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.float-left</span> <span class="token punctuation">{</span>\n    <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token selector">.bfc-content</span> <span class="token punctuation">{</span>\n    <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>当然，*zoom: 1 也是类似效果，不过只适用于低级的 IE 浏览器，如 IE7。</p>\n</li>\n<li>\n<p>display:table-cell。其让元素表现得像单元格一样，IE8 及以上版本浏览器才支持。跟 display:inline-block 一样，它会跟随内部元素的宽度显示，看样子也是不合适的命。但是，单元格有一个非常神奇的特性，就是宽度值设置得再大，实际宽度也不会超过表格容器的宽度。第 3 章单元格一柱擎天的例子利用的就是这种特性，如图 6-23 所示。 <html><head></head><body><a class="gatsby-resp-image-link" href="/static/2020-01-07-17-37-05-9abb6f26d2a61259f5caf6503a10d818-8c692.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 234px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 102.13675213675214%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsSAAALEgHS3X78AAACp0lEQVQ4y41T53KjMBDO+7/V1bjHScbgIIQAgzHFNmCaRLtPwplcMvfjdoSQvt3V9oeuH4lhRsmVc9E0dfMX8aYpK6xP4ETAh2F8EG2fJHFZ1g2f6P2vqK6xPiGTTFVzqdx2w+FwSLNb23Vti9UKRRABAOWGi677ileNkMrKbSNOLlVVZ1l6u90qRVwIXKuGZ9ktz/OiKADWsMi5xGF5VG5HUYSL73vP283Ly6u+3+ua5vtHSkh2Kxljr68vIE3iu1MYEmKmeTGOym3f96HMLPrj+7ed/kZME9I7TQ8C/xTFhvH269fPnb6n1Nxut3vDOAXB8RRKZbhtUeua5sHRv1yufd8jsPZOgovWsR3EgrA/cCHuMcOy49hwLwwjZjFmMz8IbMpMagZB0PDW830HsONMB9M04XnN22EYZMznc4KsxnGiaRpTbM87wFqDKjXidDppum4zZhCCvMi01fjes21Z0u3z+QI1ZlsWpfP5XNf3YRjC7aMfmNRyHIea5PHxt2GQOI7vlqFMKb2mtygKn7fPkNus1+vNerlcwhEE5R5clIAxa7VerVbrxXLxZhD4209u4yXE5roupRbq6dh2GEXH4xExt10Pdxz3UBYFEoKier4Hj5rJsuww10UnpGmW5TmyChR7L6lDe8XJuSjK9gOX+71JugEdRtBhnSqSbNz7WEhSHSXaCZ/aWtG9t1W2z2p0vk6FUINR/WMw+MdgoM4YDLTAF4n/Ukad0hy2BcTULupagI1rUfGywgEtJfdpgVVOde5lzhG8pH4YccRdYuM4oThPOJIll+IppeFhs9mYJrFte7fbQRSzTYiBUZnPZ4YicJEvHBbzxdPTk+d5kJzNZijbAy5IWJIkuOAx1DnLMlQY5b1er2ABx6NA8CJYAFFnaJVl+QemP2HkNG4oRwAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2020 01 07 17 37 05" title="" data-src="/static/2020-01-07-17-37-05-9abb6f26d2a61259f5caf6503a10d818-8c692.png" data-srcset="/static/2020-01-07-17-37-05-9abb6f26d2a61259f5caf6503a10d818-95d77.png 200w,\n/static/2020-01-07-17-37-05-9abb6f26d2a61259f5caf6503a10d818-8c692.png 234w" data-sizes="(max-width: 234px) 100vw, 234px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html> 因此，如果我们把 display:table-cell 这个 BFC 元素宽度设置得很大，比方说 3000px，那其实就跟 block 水平元素自动适应容器空间效果一模一样了，除非你的容器宽度超过 3000px。实际上，一般 Web 页面不会有 3000px 宽的模块，所以，要是实在不放心，设个 9999px 好了！</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="34305836027442860000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.float-left {\n    float: left;\n}\n.bfc-content {\n    display: table-cell;\n    width: 9999px;\n}`, `34305836027442860000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.float-left</span> <span class="token punctuation">{</span>\n    <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token selector">.bfc-content</span> <span class="token punctuation">{</span>\n    <span class="token property">display</span><span class="token punctuation">:</span> table-cell<span class="token punctuation">;</span>\n    <span class="token property">width</span><span class="token punctuation">:</span> 9999px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>看上去好像还不错。但是，还是有两点制约，一是需要 IE8 及以上版本的浏览器；二是应付连续英文字符换行有些吃力。但是，总体来看，其适用的场景要比 overflow:hidden 更为广泛。</p>\n</li>\n<li>\n<p>display:table-row。对 width 无感，无法自适应剩余容器空间。</p>\n</li>\n<li>\n<p>display:table-caption。此属性一无是处。</p>\n</li>\n</ol>\n<p>总结一下，我们对 BFC 声明家族大致过了一遍，能担任自适应布局重任的也就是以下几个。</p>\n<ul>\n<li>overflow:auto/hidden，适用于 IE7 及以上版本浏览器；</li>\n<li>display:inline-block，适用于 IE6 和 IE7；</li>\n<li>display:table-cell，适用于 IE8 及以上版本浏览器。</li>\n</ul>\n<p>最后，我们可以提炼出两套 IE7 及以上版本浏览器适配的自适应解决方案。</p>\n<ol>\n<li>\n<p>借助 overflow 属性，如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="93389696998392710000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.lbf-content {\n    overflow: hidden;\n}`, `93389696998392710000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.lbf-content</span> <span class="token punctuation">{</span>\n    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>融合 display:table-cell 和 display:inline-block，如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="32761778376038000000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.lbf-content {\n    display: table-cell;\n    width: 9999px;\n    /* 如果不需要兼容 IE7，下面样式可以省略 */\n    *display: inline-block;\n    *width: auto;\n}`, `32761778376038000000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.lbf-content</span> <span class="token punctuation">{</span>\n    <span class="token property">display</span><span class="token punctuation">:</span> table-cell<span class="token punctuation">;</span>\n    <span class="token property">width</span><span class="token punctuation">:</span> 9999px<span class="token punctuation">;</span>\n    <span class="token comment">/* 如果不需要兼容 IE7，下面样式可以省略 */</span>\n    *<span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>\n    *<span class="token property">width</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n</ol>\n<p>这两种基于 BFC 的自适应方案均支持无限嵌套，因此，多栏自适应可以通过嵌套方式实现。这两种方案均有一点不足，前者如果子元素要定位到父元素的外面可能会被隐藏，后者无法直接让连续英文字符换行。所以，大家可以根据实际的项目场景选择合适的技术方案。</p>\n<p>最后，关于 display:table-cell 元素内连续英文字符无法换行的问题，事实上是可以解决的，就是使用类似下面的 CSS 代码：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="94964737513879040000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.word-break {\n    display: table;\n    width: 100%;\n    table-layout: fixed;\n    word-break: break-all;\n}`, `94964737513879040000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.word-break</span> <span class="token punctuation">{</span>\n    <span class="token property">display</span><span class="token punctuation">:</span> table<span class="token punctuation">;</span>\n    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>\n    <span class="token property">table-layout</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>\n    <span class="token property">word-break</span><span class="token punctuation">:</span> break-all<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h1 id="最佳结界-overflow"><a href="#%E6%9C%80%E4%BD%B3%E7%BB%93%E7%95%8C-overflow" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>最佳结界 overflow</h1>\n<p>要想彻底清除浮动的影响，最适合的属性不是 clear 而是 overflow。一般使用 overflow:hidden，利用 BFC 的“结界”特性彻底解决浮动对外部或兄弟元素的影响。虽然有很多其他 CSS 声明也能清除浮动，但基本上都会让元素的宽度表现为“包裹性”，也就是会影响原来的样式布局，而 overflow:hidden 声明不会影响元素原先的流体特性或宽度表现，因此在我看来是最佳“结界”。</p>\n<p>不过话又说回来，overflow 属性原本的作用指定了块容器元素的内容溢出时是否需要裁剪，也就是“结界”只是其衍生出来的特性，“剪裁”才是其本职工作。</p>\n<h2 id="overflow-剪裁界线-border-box"><a href="#overflow-%E5%89%AA%E8%A3%81%E7%95%8C%E7%BA%BF-border-box" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>overflow 剪裁界线 border box</h2>\n<p>一个设置了 overflow:hidden 声明的元素，假设同时存在 border 属性和 padding 属性，类似于下面的 CSS 代码：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="77332219262442300000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.box {\n    width: 200px;\n    height: 80px;\n    padding: 10px;\n    border: 10px solid;\n    overflow: hidden;\n}`, `77332219262442300000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.box</span> <span class="token punctuation">{</span>\n    <span class="token property">width</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>\n    <span class="token property">height</span><span class="token punctuation">:</span> 80px<span class="token punctuation">;</span>\n    <span class="token property">padding</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>\n    <span class="token property">border</span><span class="token punctuation">:</span> 10px solid<span class="token punctuation">;</span>\n    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>则当子元素内容超出容器宽度高度限制的时候，剪裁的边界是 border box 的内边缘，而非 padding box 的内边缘，如图 6-24 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2020-01-07-19-28-04-90941b46ba1dbe5227fc4a51aa729c2f-f51cc.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 247px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 52.22672064777327%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAACEUlEQVQoz2P48+fP////l69YtWje9FPbpm1b3LVxYfeRDT2X9vRd2tN/cWff+W1957b2nQWS23tPrJ9SmpW8a89eoJa/f/8yADGQtX7jtn2b55zoVJ2fITktRWp/q8yThQpPFig8nCF/qVV+d4Hs9iLZh9MV16VKRZsqHD56HKoZYvPaDVt2rZ9+carG5hqZDZXyJ7oV7s1Tvjtb+c40xev9ituL5VdnydWEyugrCOspyR49dgxF87oNW3aun35pqua2OpltDTLHe+RvTle6PlHxcofS5XaFg1UKtd5S5vKi0sJCEpKSx+GaYc7eum/z7IcLdI61KexvVjrcpnipV/nhDJUH01Rvtiufq1FaE61wKlplg5+Clbr84aOoNq9as3HD0t5r0xWPtIgcaRY/1ipxol3iwhSJu0slbk2VuNggNtdLaKGTyFInoXwjid0HDoE0//kDtfngwUMVZYWtlclNZQnN5QmtlUktlYlNIEZCW1V8a0lCUUpccWp8XjKQjLt46RLU5h8/fkAsh4N/QIl//4FCf/6B2Jjg379/f8CA4cKFC9euXbt///6lixf//f3z5Mmj8+fOAtHpUyfPnjn94P69Rw/vv3r54umTx7du3njz+tXdu3euXr168uTJK1euMHwHg2/fvn39+hVoKpD98eNHCPfz589AdwHZQBIo/uXLl58/f/769QvIAEoBRQBwvaUtlcAmjwAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2020 01 07 19 28 04" title="" data-src="/static/2020-01-07-19-28-04-90941b46ba1dbe5227fc4a51aa729c2f-f51cc.png" data-srcset="/static/2020-01-07-19-28-04-90941b46ba1dbe5227fc4a51aa729c2f-4915e.png 200w,\n/static/2020-01-07-19-28-04-90941b46ba1dbe5227fc4a51aa729c2f-f51cc.png 247w" data-sizes="(max-width: 247px) 100vw, 247px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>如果想实现元素剪裁同时四周留有间隙的效果的话，可以试试使用透明边框，此时内间距 padding 属性是无能为力的。这里举这个实例并不只是为了传授这个小技能，也是为了以此为契机，深入探讨一下 overflow 属性的一个很经典的不兼容问题，即 Chrome 浏览器下，如果容器可滚动（假设是垂直滚动），则 padding-bottom 也算在滚动尺寸之内，IE 和 Firefox 浏览器忽略 padding-bottom。例如，上面的 .box，我们把 overflow 属性值改成 auto，滚动到底部会发现，Chrome 浏览器下面是有 10 像素的空白的，如图 6-25 所示。Firefox 和 IE 却没有，Firefox 浏览器呈现的效果如图 6-26 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2020-01-07-19-33-16-20e9102feb5db11e7653a26ad70e40ee-4c6f5.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 607px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 23.887973640856675%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABHElEQVQY02NYMrNhSbX+chuDChsDf0ON9ECfi5cu/f///9+/f3By747NM2pN15VbTDc1L3A2rPa3X796BVCc4cienuflupfctc9VaG0Ik1nZEHb52k24NiANxGdO7jrbLn5DX3Crp3CPBXu1m/LOrZuAEgx792y9cmTnySNbLh7Y8PL87uvn9p87fwHN5iPH9uybkr+vuWDvssKrq8vOrGzavn07yOYrV6+fOHv+zLmLR0+eOXb6/NETpx88uP/r1y+wtf///Pnz5euXe/fun7p49ez1G8dPXTp+7urxMxevXbv+9etXhr9//756+fLp0ydA8vmzZ58+fQKKfv/+HaIZKAsUAXKfP3sKRC9fPH/+9MnHD+9//vwJFAcAs8fn50S0pPgAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2020 01 07 19 33 16" title="" data-src="/static/2020-01-07-19-33-16-20e9102feb5db11e7653a26ad70e40ee-4c6f5.png" data-srcset="/static/2020-01-07-19-33-16-20e9102feb5db11e7653a26ad70e40ee-3bd24.png 200w,\n/static/2020-01-07-19-33-16-20e9102feb5db11e7653a26ad70e40ee-52f0c.png 400w,\n/static/2020-01-07-19-33-16-20e9102feb5db11e7653a26ad70e40ee-4c6f5.png 607w" data-sizes="(max-width: 607px) 100vw, 607px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>曾经有人写邮件和我交流过这个问题，认为 Chrome 浏览器的解析是正确的，IE 和 Firefox 浏览器则是不准确的。在我看来，Chrome 浏览器的解析反而是不准确的，只是 Chrome 浏览器的渲染表现是我们开发所需要的，我们就会偏心地认为 Chrome 是正确的。但是，正如一开始的例子所展示的，overflow 的剪裁或者滚动的边界是 border box 的内边缘，而非 padding box 的内边缘，因此，忽略 padding-bottom 才是符合解析规则的渲染行为。</p>\n<p>但是事已至此，争辩到底谁对谁错其实并没有多大的意义，重要的是我们知道了这种不兼容性，所以我们在实际项目开发的时候，要尽量避免滚动容器设置 padding-bottom 值，除了样式表现不一致外，还会导致 scrollHeight 值不一样，这往往会给开发带来难以察觉的麻烦，需要引起注意。</p>\n<h2 id="了解-overflow-x-和-overflow-y"><a href="#%E4%BA%86%E8%A7%A3-overflow-x-%E5%92%8C-overflow-y" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>了解 overflow-x 和 overflow-y</h2>\n<p>自 IE8 以上版本的浏览器开始，overflow 属性家族增加了两个属性，就是这里的 overflow-x 和 overflow-y，分别表示单独控制水平或垂直方向上的剪裁规则。</p>\n<p>支持的属性值和 overflow 属性一模一样。</p>\n<ul>\n<li>visible：默认值。</li>\n<li>hidden：剪裁。</li>\n<li>scroll：滚动条区域一直在。</li>\n<li>auto：不足以滚动时没有滚动条，可以滚动时滚动条出现。</li>\n</ul>\n<p>这种相似性很容易让大家产生一个误区，认为只要 overflow-x 和 overflow-y 设置了上面的属性值，就一定会是这样的表现，实际上 overflow-x 和 overflow-y 的表现规则要比看上去复杂些：如果 overflow-x 和 overflow-y 属性中的一个值设置为 visible 而另外一个设置为 scroll、auto 或 hidden，则 visible 的样式表现会如同 auto。也就是说，除非 overflow-x 和 overflow-y 的属性值都是 visible，否则 visible 会当成 auto 来解析。换句话说，永远不可能实现一个方向溢出剪裁或滚动，另一方向内容溢出显示的效果。</p>\n<p>因此，下面 CSS 代码中的 overflow-y:auto 是多余的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="23578684348384195000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`html {\n    overflow-x: hidden;\n    overflow-y: auto; /* 多余 */\n}`, `23578684348384195000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">html</span> <span class="token punctuation">{</span>\n    <span class="token property">overflow-x</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>\n    <span class="token property">overflow-y</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span> <span class="token comment">/* 多余 */</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>但是，scroll、auto 和 hidden 这 3 个属性值是可以共存的。</p>\n<h2 id="overflow-与滚动条"><a href="#overflow-%E4%B8%8E%E6%BB%9A%E5%8A%A8%E6%9D%A1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>overflow 与滚动条</h2>\n<p>HTML 中有两个标签是默认可以产生滚动条的，一个是根元素<code class="language-text">&lt;html&gt;</code>，另一个是文本域<code class="language-text">&lt;textarea&gt;</code>。之所以可以出现滚动条，是因为这两个标签默认的 overflow 属性值不是 visible，从 IE8 浏览器开始，都使用 auto 作为默认的属性值。这也就意味着，从 IE8 浏览器开始，默认状态下是没有滚动栏的，尺寸溢出才会出现，对于 IE7 浏览器，其样式表现就好像设置了 overflow-y:scroll 一般。</p>\n<p>关于浏览器的滚动条，有以下几个小而美的结论。</p>\n<ol>\n<li>\n<p>在 PC 端，无论是什么浏览器，默认滚动条均来自<code class="language-text">&lt;html&gt;</code>，而不是<code class="language-text">&lt;body&gt;</code>标签。验证很简单，新建一个空白页面，此时<code class="language-text">&lt;body&gt;</code>标签的默认 margin 值是.5em，如果滚动条是由<code class="language-text">&lt;body&gt;</code>标签产生的，那么效果应该如图 6-27 所示这般边缘留有间隙。但是最后实现结果却是图 6-28 所示的这样没有间隙。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2020-01-07-19-45-09-3eb82d9ed877077a1e30743739f3c746-0e173.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 646px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 28.173374613003098%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsSAAALEgHS3X78AAAAwUlEQVQY03VOyw6CMBDk/7/IxKOiJxNNQLSJyqsUDPJoCyRAW5c2IRDjHJqdnZmdWkqpYRgZb4IYo4cv+l6tIaRkTUspdzwUJSlspJRGsiZZgEEkJD1ttt3no7S+ygsB7+PpO/vDSOlssOZLBCdn+yjXMQOzRK7n7uyfZk0wSS/eHb4gF7IZTPP1htAr1HQRNmjbLogwhP81p9kbJ2TVzBjjnFdVVRQF1gjDkJDJVJZlnud1XcdxDJssy4DCDGaq8QWWS1ko3VT6OgAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2020 01 07 19 45 09" title="" data-src="/static/2020-01-07-19-45-09-3eb82d9ed877077a1e30743739f3c746-0e173.png" data-srcset="/static/2020-01-07-19-45-09-3eb82d9ed877077a1e30743739f3c746-2fb9f.png 200w,\n/static/2020-01-07-19-45-09-3eb82d9ed877077a1e30743739f3c746-f1e72.png 400w,\n/static/2020-01-07-19-45-09-3eb82d9ed877077a1e30743739f3c746-0e173.png 646w" data-sizes="(max-width: 646px) 100vw, 646px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>所以，如果我们想要去除页面默认滚动条，只需要：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="49526130610392170000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`html {\n    overflow: hidden;\n}`, `49526130610392170000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">html</span> <span class="token punctuation">{</span>\n    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>而没必要把<code class="language-text">&lt;body&gt;</code>也拉下水：</p>\n<p>注意，上述规则只对 PC 端有效，对于移动端并不一定适用。例如，在 PC 端，对<code class="language-text">&lt;html&gt;</code>标签设置 overflow:hidden 可以隐藏滚动条禁止滚动，但是在移动端基本上无效。在 PC 端，窗体滚动高度可以使用 document.documentElement.scrollTop 获取，但是在移动端，可能就要使用 document.body.scrollTop 获取。</p>\n</li>\n<li>\n<p>滚动条会占用容器的可用宽度或高度。假设一个元素的宽度是 400px，CSS 代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="82250016304565830000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.box {\n    width: 400px;\n    height: 100px;\n    overflow: auto;\n}`, `82250016304565830000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.box</span> <span class="token punctuation">{</span>\n    <span class="token property">width</span><span class="token punctuation">:</span> 400px<span class="token punctuation">;</span>\n    <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>\n    <span class="token property">overflow</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>当子元素高度超过 100px 出现滚动条的时候，子元素可用的实际宽度实际上要小于 400px，因为滚动条（准确地说应该是滚动栏）占据了一定的宽度。当然这还要看操作系统，比方说在移动端就不会有这样的问题，因为移动端的屏幕尺寸本身就有限，滚动条一般都是悬浮模式，不会占据可用宽度，但是在 PC 端，尤其 Windows 操作系统下，几乎所有浏览器的滚动栏都会占据宽度，而且这个宽度大小是固定的。我通过在 Windows 7 系统下的测试和对比发现，IE7 及以上版本 IE、Chrome、Firefox 浏览器滚动栏所占据的宽度均是 17px，注意，很精准的是 17px，我不知道网上那些误人子弟的 20px、14px 是从哪里来的。当然，随着以后操作系统的升级，滚动栏的宽度发生变化也是有可能的。</p>\n</li>\n</ol>\n<p>要知道自己浏览器的滚动栏宽度是多少其实很简单，代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="72277550014061950000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<style>\n    .box {\n        width: 400px;\n        overflow: scroll;\n    }\n</style>\n<div class=&quot;box&quot;>\n    <div id=&quot;in&quot; class=&quot;in&quot;></div>\n</div>\n<script>\n    console.log(400 - document.getElementById(\'in\').clientWidth);\n</script>`, `72277550014061950000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n    <span class="token selector">.box</span> <span class="token punctuation">{</span>\n        <span class="token property">width</span><span class="token punctuation">:</span> 400px<span class="token punctuation">;</span>\n        <span class="token property">overflow</span><span class="token punctuation">:</span> scroll<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>in<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>in<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">400</span> <span class="token operator">-</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">\'in\'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>clientWidth<span class="token punctuation">)</span><span class="token punctuation">;</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>这种滚动栏占据宽度的特性有时候会给我们的布局带来不小的麻烦。比方说，布局直接错位，如宽度设定死的浮动布局；又或者布局不对齐，如我们希望实现一个表格头固定、表格主体可以滚动的效果，常见的实现方法是使用双<code class="language-text">&lt;table&gt;</code>，表格头是一个独立的<code class="language-text">&lt;table&gt;</code>，主体也是一个独立的<code class="language-text">&lt;table&gt;</code>元素，放在一个 overflow:auto 的<code class="language-text">&lt;div&gt;</code>元素中，这种实现，如果滚动条不出现还好，两个表格的表格列可以完美对齐，但是一旦滚动条出现，主题表格可用宽度被压缩，表格列往往就无法完美对齐了。</p>\n<p>常用的解决方法有下面两种：一种是<code class="language-text">&lt;table&gt;</code>元素使用固定的宽度值，但是距离右侧留有 17px 的间隙，这样即使滚动条出现，也不会产生任何的宽度影响；另一种就是表格的最后一列不设定宽度（文字最好左对齐），前面每一列都定死宽度，这样最后一列就是自适应结构，就算滚动条出现，也只是自身有一些宽度变小，对整体对齐并无多大影响。</p>\n<p>然而，滚动栏占据宽度的特性最大的问题就是页面加载的时候水平居中的布局可能会产生晃动，因为窗体默认是没有滚动条的，而 HTML 内容是自上而下加载的，就会发生一开始没有滚动条，后来突然出现滚动条的情况，此时页面的可用宽度发生变化，水平居中重新计算，导致页面发生晃动，这个体验是非常不好的。比较简单的做法是设置如下 CSS：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="78476102535207290000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`html {\n    overflow-y: scroll;\n}`, `78476102535207290000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">html</span> <span class="token punctuation">{</span>\n    <span class="token property">overflow-y</span><span class="token punctuation">:</span> scroll<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>如果页面注定会很高，这种做法也是可以接受的，但是如果是 404 页面这种不足一屏高度的页面，右侧也依然有个滚动栏，那就有种回到解放前的感觉了。</p>\n<p>这里分享一个可以让页面滚动条不发生晃动的小技巧，即使用如下 CSS 代码：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="12594651448292526000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`html {\n    overflow-y: scroll; /* for IE8 */\n}\n\n/* :root 这个 CSS 伪类匹配文档树的根元素。对于 HTML 来说，:root 表示 <html> 元素，除了优先级更高之外，与 html 选择器相同。 */\n:root {\n    overflow-y: auto;\n    overflow-x: hidden;\n}\n\n:root body {\n    position: absolute;\n}\n\nbody {\n    width: 100vw;\n    overflow: hidden;\n}`, `12594651448292526000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">html</span> <span class="token punctuation">{</span>\n    <span class="token property">overflow-y</span><span class="token punctuation">:</span> scroll<span class="token punctuation">;</span> <span class="token comment">/* for IE8 */</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">/* :root 这个 CSS 伪类匹配文档树的根元素。对于 HTML 来说，:root 表示 &lt;html> 元素，除了优先级更高之外，与 html 选择器相同。 */</span>\n<span class="token selector">:root</span> <span class="token punctuation">{</span>\n    <span class="token property">overflow-y</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>\n    <span class="token property">overflow-x</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">:root body</span> <span class="token punctuation">{</span>\n    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">body</span> <span class="token punctuation">{</span>\n    <span class="token property">width</span><span class="token punctuation">:</span> 100vw<span class="token punctuation">;</span>\n    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>滚动条是可以自定义的。因为 IE 浏览器的自定义效果实在是比原生的还要难看，就不浪费大家时间了，就此打住。</p>\n<p>倒是支持-webkit-前缀的浏览器可以说说。例如，对于 Chrome 浏览器：</p>\n<ul>\n<li>整体部分，::-webkit-scrollbar；</li>\n<li>两端按钮，::-webkit-scrollbar-button；</li>\n<li>外层轨道，::-webkit-scrollbar-track；</li>\n<li>内层轨道，::-webkit-scrollbar-track-piece；</li>\n<li>滚动滑块，::-webkit-scrollbar-thumb；</li>\n<li>边角，::-webkit-scrollbar-corner。</li>\n</ul>\n<p>但是我们平时开发中只用下面 3 个属性：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="55660555127280980000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`::-webkit-scrollbar {\n    /* 血槽宽度 */\n    width: 8px;\n    height: 8px;\n}\n\n::-webkit-scrollbar-thumb {\n    /* 拖动条 */\n    background-color: rgba(0, 0, 0, 0.3);\n    border-radius: 6px;\n}\n\n::-webkit-scrollbar-track {\n    /* 背景槽 */\n    background-color: #ddd;\n    border-radius: 6px;\n}`, `55660555127280980000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">::-webkit-scrollbar</span> <span class="token punctuation">{</span>\n    <span class="token comment">/* 血槽宽度 */</span>\n    <span class="token property">width</span><span class="token punctuation">:</span> 8px<span class="token punctuation">;</span>\n    <span class="token property">height</span><span class="token punctuation">:</span> 8px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">::-webkit-scrollbar-thumb</span> <span class="token punctuation">{</span>\n    <span class="token comment">/* 拖动条 */</span>\n    <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.3<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token property">border-radius</span><span class="token punctuation">:</span> 6px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">::-webkit-scrollbar-track</span> <span class="token punctuation">{</span>\n    <span class="token comment">/* 背景槽 */</span>\n    <span class="token property">background-color</span><span class="token punctuation">:</span> #ddd<span class="token punctuation">;</span>\n    <span class="token property">border-radius</span><span class="token punctuation">:</span> 6px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>在目标浏览器下的滚动条效果就会如图 6-29 所示这般。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2020-01-07-20-02-18-070f6cb99fa3ea9f35a2a388567cff3e-1d954.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 219px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.55707762557078%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAAC50lEQVQoz02SbUxSURjH+Wa+pFMR4cLl3EtbS/vWVrnlF5samrbKpa2YreXaWn1w2ctSZ75NZ6TTUnOkzdoy0yVQptNSacLlNabAHQgKCOLLWr4UCIJCF+/cOnv2P+f/nP2e//lwKIHtjTWzzGWS2wzYqkW+vazcL4VnSeFZVroJdSncToXLKDdpsDmt3D4rXbEavL6dUChE2bRKPj9MFtyGmouhwcewWcCZ70YtAkT/HMEqwdd7sKQStrWD/pusinRG1VnoUUZ8RUnegm0xDP91TE3XM8RPQP991vcaeL4bsfYgC52o5QVQV7P7SphjZeyOW1B2KjXvGK0uh8U7GXe9IHdx8QDGGpnj1cjIUyBtQswC1NIFjK2osRnomhBRKfsBlw5R46Ji4w/HJ6TANE5C9KXz/8FqPjRRA0ar2JO1iJaPmtqAkQ/0dehsFTJ8FzzLYr7lMktPMZjURIhGjYmI5GblOhyOMOxZkuAvWdpmRN4AFI2IpgmY2tGlD6izF7XwUVU5KiyAsUJ4/CLrRiqNTqXGHYo8l8m12+1kskTXxtS3cnRtCN6JmASI4RVqfs9ZHgDOXkRZBrqymH35rNfZzI85MO8oIyU2Kv/C5Y319TC8ZZ/StEDqVvRnB4r3oOb+IyYBR1sE5us41lqO/g6YuMKWX0NnijnCPLg8jUWPibjK4wX39sLwxsLEdH2CpIGOtdB0Pcl4A6Q5Th+hJA6cpr7Jo3ZnJLWnJb1LTxrJT246k5B5IjY6klJUWOj3+8Ow3722avi0hot+m8WbVuHmhOhXn9gmFM1NCnGpUP1NJB0esk+KbBIxNjqE/RCPfRlUY/JgMLj/Sbb+EBtxDIRtKLBfZIdU8sq/73f8u4Fd4sFBr9dLhFNkMpnJZMRxA4bJQsG9FZdLq9HgBoPTsajRqKXT0zMzM0qFQo5hYSuVEmebzaZSqaxWK8Xn8xEzSA0nBwLEVLfbTXRIJfoej4eM8h0s0v4DjDXqxYC7y/8AAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2020 01 07 20 02 18" title="" data-src="/static/2020-01-07-20-02-18-070f6cb99fa3ea9f35a2a388567cff3e-1d954.png" data-srcset="/static/2020-01-07-20-02-18-070f6cb99fa3ea9f35a2a388567cff3e-7d0db.png 200w,\n/static/2020-01-07-20-02-18-070f6cb99fa3ea9f35a2a388567cff3e-1d954.png 219w" data-sizes="(max-width: 219px) 100vw, 219px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h2 id="依赖-overflow-的样式表现"><a href="#%E4%BE%9D%E8%B5%96-overflow-%E7%9A%84%E6%A0%B7%E5%BC%8F%E8%A1%A8%E7%8E%B0" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>依赖 overflow 的样式表现</h2>\n<p>在 CSS 世界中，很多属性要想生效都必须要有其他 CSS 属性配合，其中有一种效果就离不开 overflow:hidden 声明，即单行文字溢出点点点效果。虽然效果的核心是 text-overflow:ellipsis，效果实现必需的 3 个声明如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="13752802504781769000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.ell {\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    overflow: hidden;\n}`, `13752802504781769000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.ell</span> <span class="token punctuation">{</span>\n    <span class="token property">text-overflow</span><span class="token punctuation">:</span> ellipsis<span class="token punctuation">;</span>\n    <span class="token property">white-space</span><span class="token punctuation">:</span> nowrap<span class="token punctuation">;</span>\n    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>这 3 个声明缺一不可。</p>\n<p>目前，对-webkit-私有前缀支持良好的浏览器还可以实现多行文字打点效果，但是却无须依赖 overflow:hidden。比方说，最多显示 2 行内容，再多就打点的核心 CSS 代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="94076667812312630000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.ell-rows-2 {\n    display: -webkit-box;\n    -webkit-box-orient: vertical;\n    -webkit-line-clamp: 2;\n}`, `94076667812312630000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.ell-rows-2</span> <span class="token punctuation">{</span>\n    <span class="token property">display</span><span class="token punctuation">:</span> -webkit-box<span class="token punctuation">;</span>\n    <span class="token property">-webkit-box-orient</span><span class="token punctuation">:</span> vertical<span class="token punctuation">;</span>\n    <span class="token property">-webkit-line-clamp</span><span class="token punctuation">:</span> 2<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="overflow-与锚点定位"><a href="#overflow-%E4%B8%8E%E9%94%9A%E7%82%B9%E5%AE%9A%E4%BD%8D" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>overflow 与锚点定位</h2>\n<p>锚点，通俗点的解释就是可以让页面定位到某个位置的点。其在高度较高的页面中经常见到，如百度百科页面中标题条目的快速定位效果，如图 6-30 所示。点击其中任意一个标题链接，比如说“发展历程”，页面就会快速定位到“发展历程”这一块内容，同时地址栏中的 URL 地址最后多了一个#1，如图 6-31 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2020-01-07-20-08-02-931441544d5eb1324345448889e5000f-715c5.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 658px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 18.541033434650455%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAArklEQVQI1yWO2xKCMAxE+f+vw1dnHC2gLS3UtEaIpBdjPW/J7mbTMfNr45tB3LnWyimrGcYZaiMJfIinNGQ6BOYDMTN3Ijig0/UZ30cthTmdL7fhYUotEg4hPOxyn+7Oum3biAgAngBhHAmxE8eb0rjuuKdfVS4ufkAONT5EV0dqGPr+JIdkI/1/Kefcee8hBK2NmedpmpRS1hp5rxl+Pu/XGCMiaq2XZbEiNyT8BYUh5IQVrxzBAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2020 01 07 20 08 02" title="" data-src="/static/2020-01-07-20-08-02-931441544d5eb1324345448889e5000f-715c5.png" data-srcset="/static/2020-01-07-20-08-02-931441544d5eb1324345448889e5000f-c456f.png 200w,\n/static/2020-01-07-20-08-02-931441544d5eb1324345448889e5000f-60786.png 400w,\n/static/2020-01-07-20-08-02-931441544d5eb1324345448889e5000f-715c5.png 658w" data-sizes="(max-width: 658px) 100vw, 658px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>我所知道的基于 URL 地址的锚链（如上面的#1，可以使用 location.hash 获取）实现锚点跳转的方法有两种，一种是<code class="language-text">&lt;a&gt;</code>标签以及 name 属性，还有一种就是使用标签的 id 属性。百度百科就是使用<code class="language-text">&lt;a&gt;</code>标签的 name 属性实现锚点跳转的，其代码如图 6-32 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2020-01-07-20-08-50-1864653ba5ac8ef18fb9b69d8a7c4a73-4712e.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 337px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 31.454005934718104%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABD0lEQVQY0zWP207DMAyG9/4vxAOgCYRAwAUqElqintJDGjunJmmybngT/LIty/Yn24fr9VpKWaRyxlmtrNagvTYewHrnQlhvtt5j8Otd1tp93wk8kKeSxx/mjq/L44N6fpneq6nvmxrr2gKsiEHrCBBmSViINhitad8fXM7n6Fzhjfk84jf7emo4x2X2ZgEQYhoMY2vbroMI3qTsN299Of/DOWc5LzAalL0E+/YhGUdvwMEIyg7CzLOVi6PjHVoaRkSKN3i/yzvvNX2YYgz7vm1bDDHGtKUUc95yTpSQQgwkepuQy+Vy6LquruthGKjHGGuaBlG3bXs6nbquHccJAKWUfd9zzqlYVZUQgiaVUr9dfFBh+ndAZAAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2020 01 07 20 08 50" title="" data-src="/static/2020-01-07-20-08-50-1864653ba5ac8ef18fb9b69d8a7c4a73-4712e.png" data-srcset="/static/2020-01-07-20-08-50-1864653ba5ac8ef18fb9b69d8a7c4a73-8f8fd.png 200w,\n/static/2020-01-07-20-08-50-1864653ba5ac8ef18fb9b69d8a7c4a73-4712e.png 337w" data-sizes="(max-width: 337px) 100vw, 337px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>使用更精练的代码表示就是：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="29374986930078982000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<a href=&quot;#1&quot;>发展历程></a> <a name=&quot;1&quot;></a>`, `29374986930078982000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>#1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>发展历程><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>就我个人而言，我更喜欢使用下面的做法，也就是利用标签的 id 属性，因为 HTML 会显得更干净一些，也不存在任何兼容性问题：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="51290154240487465000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<a href=&quot;#1&quot;>发展历程></a>\n<h2 id=&quot;1&quot;>发展历程</h2>`, `51290154240487465000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>#1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>发展历程><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>发展历程<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>下面思考这两个问题：锚点定位行为是基于什么条件触发的？锚点定位作用的发生本质上是什么在起作用？</p>\n<h3 id="锚点定位行为的触发条件"><a href="#%E9%94%9A%E7%82%B9%E5%AE%9A%E4%BD%8D%E8%A1%8C%E4%B8%BA%E7%9A%84%E8%A7%A6%E5%8F%91%E6%9D%A1%E4%BB%B6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>锚点定位行为的触发条件</h3>\n<p>下面两种情况可以触发锚点定位行为的发生：</p>\n<ol>\n<li>URL 地址中的锚链与锚点元素对应并有交互行为；</li>\n<li>可 focus 的锚点元素处于 focus 状态。</li>\n</ol>\n<p>上面百度百科的例子就是基于 URL 地址的锚链与锚点实现的，定位效果的发生需要行为触发。比方说，点击一个链接，改变地址栏的锚链值，或者新打开一个链接，后面带有一个锚链值，当然前提是这个锚链值可以找到页面中对应的元素，并且是非隐藏状态，否则不会有任何的定位行为发生。如果我们的锚链就是一个很简单的#，则定位行为发生的时候，页面是定位到顶部的，所以我们一般实现返回顶部效果都是使用这样的 HTML：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="54353617069881310000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<a href=&quot;#&quot;>返回顶部></a>`, `54353617069881310000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>#<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>返回顶部><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>然后配合 JavaScript 实现一些动效或者避免点击时候 URL 地址出现#，而很多人实现返回顶部效果的时候使用的是类似下面的 HTML：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="36724182097751835000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<a href=&quot;javascript:&quot;>返回顶部></a>`, `36724182097751835000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>javascript:<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>返回顶部><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>然后使用 JavaScript 实现定位或者加一些平滑动效之类。显然我是推荐上面那种做法的，因为锚点定位行为的发生是不需要依赖 JavaScript 的，所以即使页面 JavaScript 代码失效或者加载缓慢，也不会影响正常的功能体验，也就是用户无论在什么状态下都能准确地返回顶部。</p>\n<p>“focus 锚点定位”指的是类似链接或者按钮、输入框等可以被 focus 的元素在被 focus 时发生的页面重定位现象。</p>\n<p>举个很简单的例子，在 PC 端，我们使用 Tab 快速定位可 focus 的元素的时候，如果我们的元素正好在屏幕之外，浏览器就会自动重定位，将这个屏幕之外的元素定位到屏幕之中。</p>\n<p>再举一个例子，一个可读写的<code class="language-text">&lt;input&gt;</code>输入框在屏幕之外，则执行类似下面的 JavaScript 代码的时候：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="58408429956577200000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`document.querySelector(\'input\').focus();`, `58408429956577200000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js">document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">\'input\'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>这个输入框会自动定位在屏幕之中，这些就是“focus 锚点定位”。</p>\n<p>同样，“focus 锚点定位”也不依赖于 JavaScript，是浏览器内置的无障碍访问行为，并且所有浏览器都是如此。</p>\n<p>虽然都是锚点定位，但是这两种定位方法的行为表现还是有差异的，“URL 地址锚链定位”是让元素定位在浏览器窗体的上边缘，而“focus 锚点定位”是让元素在浏览器窗体范围内显示即可，不一定是在上边缘。</p>\n<h3 id="锚点定位作用的本质"><a href="#%E9%94%9A%E7%82%B9%E5%AE%9A%E4%BD%8D%E4%BD%9C%E7%94%A8%E7%9A%84%E6%9C%AC%E8%B4%A8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>锚点定位作用的本质</h3>\n<p>锚点定位行为的发生，本质上是通过改变容器滚动高度或者宽度来实现的。由于平时大多数页面都是垂直滚动，且水平滚动与之类似，因此接下来的内容我都是以垂直滚动示意。</p>\n<p>注意，这里说的是容器的滚动高度，而不是浏览器的滚动高度，这一点小小区分非常重要。没错，非常重要。由于我们平常接触锚点定位都是浏览器窗体滚动条级别的，因此很容易被一些表象迷惑而产生一些错误的认识。</p>\n<p>首先，锚点定位也可以发生在普通的容器元素上，而且定位行为的发生是由内而外的。什么意思呢？例如，我们的页面上有一个<code class="language-text">&lt;div&gt;</code>元素设置了 overflow:auto，且子元素高度超出其自身高度限制，代码示意 CSS 和 HTML 如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="50514211433290140000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<style>\n    .box {\n        height: 120px;\n        border: 1px solid #bbb;\n        overflow: auto;\n    }\n    .content {\n        height: 200px;\n        background-color: #eee;\n    }\n</style>\n<div class=&quot;box&quot;>\n    <div class=&quot;content&quot;></div>\n    <h4 id=&quot;title&quot;>\n        底部标题\n    </h4>\n</div>\n<p>\n    <a href=&quot;#title&quot;>点击测试</a>\n</p>`, `50514211433290140000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n    <span class="token selector">.box</span> <span class="token punctuation">{</span>\n        <span class="token property">height</span><span class="token punctuation">:</span> 120px<span class="token punctuation">;</span>\n        <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #bbb<span class="token punctuation">;</span>\n        <span class="token property">overflow</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token selector">.content</span> <span class="token punctuation">{</span>\n        <span class="token property">height</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>\n        <span class="token property">background-color</span><span class="token punctuation">:</span> #eee<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>content<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h4</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n        底部标题\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h4</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>#title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>点击测试<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>由于 .content 元素高度超过 .box 容器，因此<code class="language-text">&lt;h4&gt;</code>元素必然不可见，如图 6-33 所示。然后，我们点击下面的“点击测试”链接，则滚动条位置变化（实际上改变了 scrollTop 值），“底部标题”自动出现了，如图 6-34 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2020-01-07-20-21-16-246e51bd275c3de2456554ddc4edd42f-5d925.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 508px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 29.330708661417322%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsSAAALEgHS3X78AAAAr0lEQVQY022Q6w6CMAxG9/4PSGJiFKSMyWV3RNyGftFIRvT8aLLmfO1SNk2TMcZm4Omce2aEEOwP0JjWehiG8YuUUghBRH/DMkMphbBBNu9iBLw8/FgWupDgAlNijKjrumIrw36tR6V24e3bkFCX+/10OFbnKqX1A5pwGFEsiuh92myQUso3x5Akv5luzpvQmJS6rltrHee8aZruzTzvPCDaK9WEI5VliaP0fe+9fwFc6VdsAmq4fwAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2020 01 07 20 21 16" title="" data-src="/static/2020-01-07-20-21-16-246e51bd275c3de2456554ddc4edd42f-5d925.png" data-srcset="/static/2020-01-07-20-21-16-246e51bd275c3de2456554ddc4edd42f-7e12f.png 200w,\n/static/2020-01-07-20-21-16-246e51bd275c3de2456554ddc4edd42f-6877e.png 400w,\n/static/2020-01-07-20-21-16-246e51bd275c3de2456554ddc4edd42f-5d925.png 508w" data-sizes="(max-width: 508px) 100vw, 508px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>“由内而外”指的是，普通元素和窗体同时可滚动的时候，会由内而外触发所有可滚动窗体的锚点定位行为。继续上面的例子，假设我们的浏览器窗体也是可滚动的，则点击“点击测试”链接后，“底部标题”先触发.box 容器的锚点定位，也就是滚动到底部，然后再触发窗体的锚点定位，“底部标题”和浏览器窗口的上边缘对齐，如图 6-35 所示（图中最上方一条线就是浏览器窗体上边缘）。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2020-01-07-20-22-28-6b1c50cac8dad9d286d8d042af0ac677-1d954.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 219px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 58.9041095890411%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAABcElEQVQoz31STU+DQBTc/3/yogejafTgxbsHLx56aCimtsEUSgskBQQKy7ItH6V8OYJBo6GTQDb7ZnbevF1SluWec8aiiEU8AvjxeMwGgNLhcGCMJUmS5znJs+xx9DC6ur+9uL67vHl+emmapiiK6h9gg5JlWbPZLAiCMAwJ9lzToX7I2Z4FNE3SZgB1XeMPja7rcRzDnGCrqquuig8OxTBgDg2ypWmKCHCubY3aOlXfPnTJjaOsPaI+AxC+2y6Lynj3IFNESxas0Iv7Ds80v1qt1us1GWJUv9y7gfVrEKBEctKzEb0Z9PsL3NNXZqxs20aA0+mEP7YwGN/3HcdxXRezQbzdbud5nt8Ca845mKARtCEIgqIom81GkiQU8BhEUZxMJovFArcqy/J4PJ5Op6jO53PQKKXgg0b6GcB/u93CwTRNwzCgwVRghR27RWeLUvdaoPoRq6oKK2jgsFwuX1tomgY2TkEVR2NOMEfALvkn8S2jpY4HFgEAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2020 01 07 20 22 28" title="" data-src="/static/2020-01-07-20-22-28-6b1c50cac8dad9d286d8d042af0ac677-1d954.png" data-srcset="/static/2020-01-07-20-22-28-6b1c50cac8dad9d286d8d042af0ac677-7d0db.png 200w,\n/static/2020-01-07-20-22-28-6b1c50cac8dad9d286d8d042af0ac677-1d954.png 219w" data-sizes="(max-width: 219px) 100vw, 219px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>其次就是设置了 overflow:hidden 的元素也是可滚动的，这也是本小节的核心。说得更干脆点儿就是：overflow:hidden 跟 overflow:auto 和 overflow：scroll 的差别就在于有没有那个滚动条。元素设置了 overflow:hidden 声明，里面内容高度溢出的时候，滚动依然存在，仅仅滚动条不存在！</p>\n<p>有人肯定会反驳：不会呀，元素设置了 overflow:hidden，同时高度溢出，我的鼠标无论怎么滚，都没有滚动行为发生啊！</p>\n<p>对，你说的那是表现，表面看起来确实是那样，但是如果发生锚点定位，你就会发现滚动发生了。还是上面的例子，假设 .box 元素的 css 变成下面这样，overflow 属性值不是 auto，而是 hidden：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="50889329280727200000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.box {\n    height: 120px;\n    border: 1px solid #bbb;\n    overflow: hidden;\n}`, `50889329280727200000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.box</span> <span class="token punctuation">{</span>\n    <span class="token property">height</span><span class="token punctuation">:</span> 120px<span class="token punctuation">;</span>\n    <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #bbb<span class="token punctuation">;</span>\n    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>我们点击下面的“点击测试”链接时，标题同样发生了重定位，如图 6-36 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2020-01-07-20-26-28-94798d72f47bdf88ef47c1c46094dc07-344e0.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 307px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 48.85993485342019%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAAA7klEQVQoz4WS3U6EMBCFef/H0hskxoTNQtmtCSSthAAVkAhsfz1ANG7srl8vOp32zExmGrgNY8w4jh93GYZBSul+EfyIu657v0vbtsuy+MVCiGYDj4QPXN0Ua613Wyk1z/Pyh2macOURO2ePL4enhzB8DEtermdr3TXwIIdHDPcroWdCKTmLRuy12Gv0hk+8hrUOy6yBtA/UfCOztezUZM88DdnYTZvH/UuA0aE9CKmkklJdLtiU+U6+Z0Or8Av6vsfLz429eUFRFGma4oxJlOUb57yqKsZYXdewKaWw8zyP4ziKoiRJCCGwsyxDrC8RzD80Yuj5JAAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2020 01 07 20 26 28" title="" data-src="/static/2020-01-07-20-26-28-94798d72f47bdf88ef47c1c46094dc07-344e0.png" data-srcset="/static/2020-01-07-20-26-28-94798d72f47bdf88ef47c1c46094dc07-73b08.png 200w,\n/static/2020-01-07-20-26-28-94798d72f47bdf88ef47c1c46094dc07-344e0.png 307w" data-sizes="(max-width: 307px) 100vw, 307px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>锚点定位本质上是改变了 scrollTop 或 scrollLeft 值，因此，上面的定位效果等同于执行了下面的 JavaScript 代码：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="24142238619336800000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`document.querySelector(\'.box\').scrollTop = 200; // 随便一个足够大的值即可`, `24142238619336800000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js">document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">\'.box\'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>scrollTop <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span> <span class="token comment">// 随便一个足够大的值即可</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>什么？浏览器的锚点定位实现了类似 JavaScript 的效果？那岂不是我们可以利用这种兼容的浏览器行为实现更复杂的无 JavaScript 的交互效果？例如，实现选项卡切换效果，这个示例是基于 URL 地址的锚链触发锚点定位实现的选项卡切换效果。例如，点击切换按钮 3，效果如图 6-37 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2020-01-07-20-27-48-8cd657511f00da3517aeae1b3094bdef-960c5.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 229px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 84.27947598253274%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAIAAABSJhvpAAAACXBIWXMAAAsSAAALEgHS3X78AAACF0lEQVQ4y41R32vTUBjt/+ijTz74KMzXIUPUPWzgw1BQGQOdwhRxqFvXpj/sNhGmgYn9kbbpjzRJm7bJmuTemzY3t2nqt6bWrlbY4RC+e75z7vclibg+U12zSa1FuqbS7wGXtKiluKbj00jXQwd2LooK8zy08zGnlA7klN+IYmGhe4SEj1ZWpr2I7uEYEjhcmjGOism+uK/8ePD66cb+DmcXOVKaNyRw+dAuqNRcHk4NqrvZ1PbZwZ311Xvbj7+OmzGrcK3wlKScdMRHe8/W3704CZSYLVx3Mqz9STtf2Vy7cevm7q9kmtbisPw1J4eb82Pz1c/E7dWVDJNAWR6OIyFxKU3JoeIXWtvi9jY+7NzdXLv/cut42ODsv54kLkfDMPwq+PoxXJwxCosMxDfF44dvnz/JvOf6ZRCP5gxxXPps5xUIXzCSQeIJrk5JJsTVb1Tmx50zvwX16R8x5CmuplFZ8+zIKAjYyJ/R8xk86dCDgjI6oK43ZC6U/pAO2bwTgpHxVYChrWmEOEa3cwHQjXpdHvSdhtTwKF0wL4YZY51OGxNi6F3LtrW29p0/JwQ31Sb9Xzi4itEIlgpA9zwvm807jgN1KIb68sn/Yt69ZDJCiOd5VVUVRdE0DZRKpSKKYq1WgyO8uCRJ9boky7IgCLlcHmzhpZdh13WhrU1ACAGlMYGu65ZlwtWtVguSvV4PDKAbhhGGfwOiKoWKYMml+AAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2020 01 07 20 27 48" title="" data-src="/static/2020-01-07-20-27-48-8cd657511f00da3517aeae1b3094bdef-960c5.png" data-srcset="/static/2020-01-07-20-27-48-8cd657511f00da3517aeae1b3094bdef-6f066.png 200w,\n/static/2020-01-07-20-27-48-8cd657511f00da3517aeae1b3094bdef-960c5.png 229w" data-sizes="(max-width: 229px) 100vw, 229px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>HTML 和核心 CSS 代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="72447299874645220000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<style>\n    .box {\n        height: 10em;\n        border: 1px solid #ddd;\n        overflow: hidden;\n    }\n\n    .list {\n        line-height: 10em;\n        background: #ddd;\n    }\n</style>\n<div class=&quot;box&quot;>\n    <div class=&quot;list&quot; id=&quot;one&quot;>1</div>\n    <div class=&quot;list&quot; id=&quot;two&quot;>2</div>\n    <div class=&quot;list&quot; id=&quot;three&quot;>3</div>\n    <div class=&quot;list&quot; id=&quot;four&quot;>4</div>\n</div>\n<div class=&quot;link&quot;>\n    <a href=&quot;#one&quot;>1</a>\n    <a href=&quot;#two&quot;>2</a>\n    <a href=&quot;#three&quot;>3</a>\n    <a href=&quot;#four&quot;>4</a>\n</div>`, `72447299874645220000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n    <span class="token selector">.box</span> <span class="token punctuation">{</span>\n        <span class="token property">height</span><span class="token punctuation">:</span> 10em<span class="token punctuation">;</span>\n        <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #ddd<span class="token punctuation">;</span>\n        <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token selector">.list</span> <span class="token punctuation">{</span>\n        <span class="token property">line-height</span><span class="token punctuation">:</span> 10em<span class="token punctuation">;</span>\n        <span class="token property">background</span><span class="token punctuation">:</span> #ddd<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>list<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>one<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>list<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>two<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>list<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>three<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>list<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>four<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>link<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>#one<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>#two<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>#three<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>#four<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>容器设置了 overflow:hidden，且每个列表高度和容器的高度一样高，这样保证永远只显示一个列表。当我们点击按钮，如第三个按钮，会改变 URL 地址的锚链为#three，从而触发 id 为 three 的第三个列表发生的锚点定位，也就是改变容器滚动高度让列表 3 的上边缘和滚动容器上边缘对齐，从而实现选项卡效果，如图 6-38 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2020-01-07-20-30-36-d20ac11572d882fb02748dd1ac1b33bf-ae33f.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 391px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 81.32992327365729%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACWUlEQVQoz41T32/SUBTmn/TZP8OY+WKciWY+mCwmGh7cw6IuBLcoDDPFjRUKopTBBAaFtHD7+9IfdJQy2nuvt2VjW4xm56G5PT1fz3e++50EuVuEYSiIQ8u2byYTdwQjhNqnJ5Uiw3EcHJv0NQJjQvBVBcb4b9gyFyCSaZo59rRwmK9VS45jX3de/QLHcQscPxYIv+bw4yP/DSPnql3LdiJwwwxVPyqYuhND15d8rjBk7OOWjYKYeE6GGyxcyxrrDBqYUS7xruc/ORL3BY8TtHKJqXF1ICuLIFiCRx55WobJn2ptvDjwxIzT/jAYbNYnvBnP3J+g7VNr/Vvvfop/meeLhe/F46M+31u2n4UkP/I3mOGDz63nBeZA/ZWSKvteT5m7lzOHhGhz9Kjo39sLkiz8yHZ/d3hyLSR2Q1IA3t7utlvZ4s++lKxmRxOhpsdqx1W8672oT9ay6sOvs1Trgg4ZUgEwRhgRHJH0QWPKbql7z4Lq23CqC+IoseoAAidz3kmD/mZ9/L4dzGdet9cbAdDv84IgXHK4mIZKM+R2iDWUVGMJjuC2qxQhtzOq7JoNdqLQjGVZnufdvP+rGw1sqE1cN3HtA60TlJOgnS0pP2rzERgCCCElvojDpzHzYxMg1z034HhlkgiMXI0008qnDffwlTcsQZMa2TIMYzAYsOXyMcOwbNm2bMOAjm0vudz2dnix0M6CkzRuZRAmmqrSOspcVVXKwnEcSoFuyH8XgzpqZv1rQ276N7HSQ9d1WZIgNKhOQyDTbrIsU51FUQQASJJEz/RAv64gfwC553XqSqF+twAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2020 01 07 20 30 36" title="" data-src="/static/2020-01-07-20-30-36-d20ac11572d882fb02748dd1ac1b33bf-ae33f.png" data-srcset="/static/2020-01-07-20-30-36-d20ac11572d882fb02748dd1ac1b33bf-12493.png 200w,\n/static/2020-01-07-20-30-36-d20ac11572d882fb02748dd1ac1b33bf-ae33f.png 391w" data-sizes="(max-width: 391px) 100vw, 391px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>此效果乍一看很酷，但却有不少不足之处：其一，容器高度需要固定；其二，也是最麻烦的，就是“由内而外”的锚点定位会触发窗体的重定位，也就是说，如果页面也是可以滚动的，则点击选项卡按钮后页面会发生跳动，这种体验显然是非常不好的。那有没有什么解决办法呢？</p>\n<p>有，还记不记得前面提过有两种方法可以触发锚点定位，其中有一种方法就是“focus 锚点定位”，只要定位的元素在浏览器窗体中，就不会触发窗体的滚动，也就是选项卡切换的时候页面不会发生跳动。</p>\n<p>可以发现，就算页面窗体就有滚动条，绝大多数情况下，也都不会发生跳动现象，HTML 和核心 CSS 代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="23067984107776730000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<style>\n    .box {\n        height: 10em;\n        border: 1px solid #ddd;\n        overflow: hidden;\n    }\n\n    .list {\n        height: 100%;\n        background: #ddd;\n        position: relative;\n    }\n\n    .list > input {\n        position: absolute;\n        top: 0;\n        height: 100%;\n        width: 1px;\n        border: 0;\n        padding: 0;\n        margin: 0;\n        clip: rect(0 0 0 0);\n    }\n</style>\n<div class=&quot;box&quot;>\n    <div class=&quot;list&quot;>\n        <input id=&quot;one&quot; />\n        1\n    </div>\n    <div class=&quot;list&quot;>\n        <input id=&quot;two&quot; />\n        2\n    </div>\n    <div class=&quot;list&quot;>\n        <input id=&quot;three&quot; />\n        3\n    </div>\n    <div class=&quot;list&quot;>\n        <input id=&quot;four&quot; />\n        4\n    </div>\n</div>\n<div class=&quot;link&quot;>\n    <label class=&quot;click&quot; for=&quot;one&quot;>\n        1\n    </label>\n    <label class=&quot;click&quot; for=&quot;two&quot;>\n        2\n    </label>\n    <label class=&quot;click&quot; for=&quot;three&quot;>\n        3\n    </label>\n    <label class=&quot;click&quot; for=&quot;four&quot;>\n        4\n    </label>\n</div>`, `23067984107776730000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n    <span class="token selector">.box</span> <span class="token punctuation">{</span>\n        <span class="token property">height</span><span class="token punctuation">:</span> 10em<span class="token punctuation">;</span>\n        <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #ddd<span class="token punctuation">;</span>\n        <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token selector">.list</span> <span class="token punctuation">{</span>\n        <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>\n        <span class="token property">background</span><span class="token punctuation">:</span> #ddd<span class="token punctuation">;</span>\n        <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token selector">.list > input</span> <span class="token punctuation">{</span>\n        <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n        <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n        <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>\n        <span class="token property">width</span><span class="token punctuation">:</span> 1px<span class="token punctuation">;</span>\n        <span class="token property">border</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n        <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n        <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n        <span class="token property">clip</span><span class="token punctuation">:</span> <span class="token function">rect</span><span class="token punctuation">(</span>0 0 0 0<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>list<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>one<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>\n        1\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>list<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>two<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>\n        2\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>list<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>three<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>\n        3\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>list<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>four<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>\n        4\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>link<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>click<span class="token punctuation">"</span></span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>one<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n        1\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>click<span class="token punctuation">"</span></span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>two<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n        2\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>click<span class="token punctuation">"</span></span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>three<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n        3\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>click<span class="token punctuation">"</span></span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>four<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n        4\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>原理其实很简单，就是在每个列表里塞入一个肉眼看不见的<code class="language-text">&lt;input&gt;</code>输入框，然后选项卡按钮变成<code class="language-text">&lt;label&gt;</code>元素，并通过 for 属性与<code class="language-text">&lt;input&gt;</code>输入框的 id 相关联，这样，点击选项按钮会触发输入框的 focus 行为，触发锚点定位，实现选项卡切换效果。</p>\n<p>这种原理实现的选项卡还有一个优点就是，我们可以直接使用 Tab 键来切换、浏览各个选项面板的内容，传统的选项卡实现并没有如此便捷的可访问性。</p>\n<p>然而，上面这种技术要想用在实际项目中还离不开 JavaScript 的支持，一个是选项卡按钮的选中效果，另一个就是处理列表部分区域在浏览器外面时依然会跳动的问题。相关处理类似下面的做法，即使用 jQuery 语法：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="25600943148104640000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`\\$(\'label.click\')\n    .removeAttr(\'for\')\n    .on(\'click\', function() {\n        // \'xxx\'表示滚动数值\n        \\$(\'.box\').scrollTop(xxx);\n    });`, `25600943148104640000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">\'label.click\'</span><span class="token punctuation">)</span>\n    <span class="token punctuation">.</span><span class="token function">removeAttr</span><span class="token punctuation">(</span><span class="token string">\'for\'</span><span class="token punctuation">)</span>\n    <span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">\'click\'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token comment">// \'xxx\'表示滚动数值</span>\n        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">\'.box\'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">scrollTop</span><span class="token punctuation">(</span>xxx<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>于是，就算 JavaScript 出现异常或者加载缓慢，选项卡点击功能依然正常，并且直接用 Tab 键浏览选项卡内容的超级便捷的可访问性也保留下来了。综合来看，这是非常不错的一种选项卡实现技巧。</p>\n<p>同样，这一技术只适用于高度固定的选项卡效果，如各大站点首页经常出现的幻灯片广告切换效果等。</p>\n<p>实际上，如果不用考虑 IE8 浏览器，可以利用:checked 伪类、单选按钮和<code class="language-text">&lt;label&gt;</code>标签的点击行为实现选项卡切换，由于本书知识点面向 IE8 及以上版本的浏览器，因此这一技术不做详细介绍。</p>\n<p>知道 overflow:hidden 元素依然可以滚动，除了可以帮助我们实现无 JavaScript 的选项卡效果外，还可以帮助我们理解一些现象发生的原因。例如，我之前提到过的使用 margin-bottom 负值加 padding-bottom 正值以及父元素 overflow:hidden 配合实现的等高布局，在大多数情况下，这种布局使用是没有任何问题的，但是如果使用 dom.scrollIntoView() 或者触发窗体视区范围之外的内部元素的锚点定位行为，布局就会飞掉，没错，布局就像长了翅膀一样飞掉了。因为，此时容器的 scrollHeight（视区高度+可滚动高度）要远远大于 clientHeight（视区高度），而锚点定位的本质就是改变容器的滚动高度，因此，容器的滚动高度不是 0，发生了与上面无 JavaScript 的选项卡类似的效果，产生布局问题。</p>\n<p>时刻牢记 overflow:hidden 元素依然可以滚动这一点，可以让我们以更简单、更原生的方式实现一些交互效果。举个例子，实现自定义的滚动条效果，因为 Windows 系统下浏览器的滚动条会占据宽度，而且长得不好看，所以就存在实现自定义滚动条的需求，也就是类似移动端的悬浮式滚动条。</p>\n<p>传统实现都是父容器设置 overflow:hidden，然后子元素使用一个大的<code class="language-text">&lt;div&gt;</code>包起来，设置绝对定位，然后通过改变 top 值，或者使用 transform 进行偏移。</p>\n<p>但是在我看来，最推荐的实现还是基于父容器自身的 scrollTop 值改变来实现自定义滚动条效果，其好处有如下这些。</p>\n<ol>\n<li>\n<p>实现简单，无须做边界判断。因为就算 scrollTop 设为-999，浏览器依然按照 0 来渲染，要想滚动到底部，直接一个很大的 scrollTop 值就可以了，无须任何计算。例如：</p>\n<p>container.scrollTop = 99999;</p>\n<p>列表滚动了多少直接就是 scrollTop 值，实时获取，天然存储。传统实现要变量以及边界更新，很啰嗦。</p>\n</li>\n<li>\n<p>可与原生的 scroll 事件天然集成，无缝对接。例如，我们的滚动延迟加载图片效果就可以直接应用，因为图片位置的计算往往都是和 scrollTop 值相关联的，所以传统实现 scrollTop 值一直是 0，很可能导致这类组件出现异常。</p>\n</li>\n<li>\n<p>无须改变子元素的结构。传统实现为了定位方便，会给所有的列表元素外面包一层独立的<code class="language-text">&lt;div&gt;</code>元素，这可能会导致某些选择器（类似于.container > .list{}）失效，但是，基于父容器本身的 scrollTop 滚动实现则无此问题，即使子元素全是兄弟元素也是可以的。</p>\n</li>\n</ol>\n<p>当然，没有哪种技术是万能的，基于改变 overflow:hidden 父容器的 scrollTop 实现自定义滚动条效果也有几点不足：一是无法添加类似 Bounce 回弹这种动效；二是渲染要比一般的渲染慢一些，但大多数场景下用户都是无感知的。</p>\n<h1 id="float-的兄弟-positionabsolute"><a href="#float-%E7%9A%84%E5%85%84%E5%BC%9F-positionabsolute" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>float 的兄弟 position:absolute</h1>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="84417583769440620000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.brother {\n    position: absolute;\n    float: left; /* 无效 */\n}`, `84417583769440620000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.brother</span> <span class="token punctuation">{</span>\n    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n    <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span> <span class="token comment">/* 无效 */</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>“块状化”和浮动类似，元素一旦 position 属性值为 absolute 或 fixed，其 display 计算值就是 block 或者 table。</p>\n<p>“破坏性”，指的是破坏正常的流特性。</p>\n<p>都能“块状格式化上下文”，也就是 BFC。</p>\n<p>两者都具有“包裹性”，也就是尺寸收缩包裹，同时具有自适应性。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="74835683720498640000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.wrap {\n    display: inline-block; /* 没有必要 */\n    position: absolute;\n}`, `74835683720498640000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.wrap</span> <span class="token punctuation">{</span>\n    <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span> <span class="token comment">/* 没有必要 */</span>\n    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>实际上 absolute 天然具有“包裹性”，因此没有必要使用 display:inline-block，如果要让元素显示或者“无依赖定位”，可以试试更简短的 display:inline。但是，和 float 或其他“包裹性”声明带来的“自适应性”相比，absolute 有一个平时不太被人注意的差异，那就是 absolute 的自适应性最大宽度往往不是由父元素决定的，本质上说，这个差异是由“包含块”的差异决定的。换句话说，absolute 元素具有与众不同的“包含块”。</p>\n<h2 id="absolute-的包含块"><a href="#absolute-%E7%9A%84%E5%8C%85%E5%90%AB%E5%9D%97" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>absolute 的包含块</h2>\n<p>包含块（containing block）: 元素用来计算和定位的一个框。</p>\n<p>比方说，width:50%，也就是宽度一半，那到底是哪个“元素”宽度的一半呢？注意，这里的这个“元素”实际上就是指的“包含块”。</p>\n<p>普通元素的百分比宽度是相对于父元素的 content box 宽度计算的，而绝对定位元素的宽度是相对于第一个 position 不为 static 的祖先元素计算的，具体如下（剔除了不常用的部分内容）。</p>\n<ol>\n<li>\n<p>根元素（很多场景下可以看成是<code class="language-text">&lt;html&gt;</code>）被称为“初始包含块”，其尺寸等同于浏览器可视窗口的大小。</p>\n</li>\n<li>\n<p>对于其他元素，如果该元素的 position 是 relative 或者 static，则“包含块”由其最近的块容器祖先盒的 content box 边界形成。</p>\n</li>\n<li>\n<p>如果元素 position:fixed，则“包含块”是“初始包含块”。</p>\n</li>\n<li>\n<p>如果元素 position:absolute，则“包含块”由最近的 position 不为 static 的祖先元素建立，具体方式如下：</p>\n<p>如果该祖先元素是纯 inline 元素，则规则略复杂：</p>\n<ul>\n<li>假设给内联元素的前后各生成一个宽度为 0 的内联盒子（inline box），则这两个内联盒子的 padding box 外面的包围盒就是内联元素的“包含块”；</li>\n<li>如果该内联元素被跨行分割了，那么“包含块”是未定义的，也就是 CSS2.1 规范并没有明确定义，浏览器自行发挥。</li>\n</ul>\n<p>否则，“包含块”由该祖先的 padding box 边界形成。</p>\n<p>如果没有符合条件的祖先元素，则“包含块”是“初始包含块”。</p>\n</li>\n</ol>\n<p>可以看到，和常规元素相比，absolute 绝对定位元素的“包含块”有以下 3 个明显差异：</p>\n<ol>\n<li>内联元素也可以作为“包含块”所在的元素；</li>\n<li>“包含块”所在的元素不是父块级元素，而是最近的 position 不为 static 的祖先元素或根元素；</li>\n<li>边界是 padding box 而不是 content box。</li>\n</ol>\n<h3 id="差异点一：内联元素可以作为包含块"><a href="#%E5%B7%AE%E5%BC%82%E7%82%B9%E4%B8%80%EF%BC%9A%E5%86%85%E8%81%94%E5%85%83%E7%B4%A0%E5%8F%AF%E4%BB%A5%E4%BD%9C%E4%B8%BA%E5%8C%85%E5%90%AB%E5%9D%97" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>差异点一：内联元素可以作为“包含块”</h3>\n<p>首先讲第一点差异，也就是内联元素可以作为“包含块”。这一点估计很多人都不知道，因为平时使用得少。为何平时用得少？原因如下。</p>\n<ol>\n<li>\n<p>我们一旦使用 absolute 绝对定位，基本上都是用来布局，而内联元素主要的作用是图文展示，所谓道不同不相为谋，因此两者很难凑到一块儿。</p>\n</li>\n<li>\n<p>理解和学习成本比较高。内联元素的“包含块”不能按照常规块级元素的“包含块”来理解。举个例子，如下 HTML 代码：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="57329914600248030000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<span style=&quot;position:relative;&quot;> 我是<big style=&quot;font-size:200%;&quot;>字号很大</big>的文字！ </span>`, `57329914600248030000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">position</span><span class="token punctuation">:</span>relative<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span> 我是<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>big</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">font-size</span><span class="token punctuation">:</span>200%<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>字号很大<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>big</span><span class="token punctuation">></span></span>的文字！ <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>其效果如图 6-41 所示。请问：此时<code class="language-text">&lt;span&gt;</code>元素的“包含块”范围是什么？</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2020-01-08-10-38-00-2e0244a1a6b52618a9110139f842e951-21a81.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 580px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 13.448275862068964%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAAsSAAALEgHS3X78AAAAhklEQVQI11XLyw6CMBBA0f7/l0miskESXcAsCtLHtJREmOJQbFjhXZ8rrDFqGLz3y0Ibbyml/b9IZG1WJozjun55/jBA0mZDK+r6cT1qGkDnmPl8cozwfFX3W1kUZXGRTYvvged5P5iYpkkplTetdQuAiOeZiKSU2ThEnZm1fdeFELq+z/IHa1OoKr6aSYkAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2020 01 08 10 38 00" title="" data-src="/static/2020-01-08-10-38-00-2e0244a1a6b52618a9110139f842e951-21a81.png" data-srcset="/static/2020-01-08-10-38-00-2e0244a1a6b52618a9110139f842e951-3d86f.png 200w,\n/static/2020-01-08-10-38-00-2e0244a1a6b52618a9110139f842e951-5ea2c.png 400w,\n/static/2020-01-08-10-38-00-2e0244a1a6b52618a9110139f842e951-21a81.png 580w" data-sizes="(max-width: 580px) 100vw, 580px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>如果对定义理解不够，很容易误认为包含块的上下边缘被其中“字号很大”的<code class="language-text">&lt;big&gt;</code>元素给撑大了。实际上，此时元素的“包含块”范围与<code class="language-text">&lt;big&gt;</code>元素毫无关系，就算其字号大小设置得再大，“包含块”范围依然是图 6-42 虚线所示的那么大。原因很简单，内联元素的“包含块”是由“生成的”前后内联盒子决定的，与里面的内联盒子细节没有任何关系。</p>\n<p>我根据自己的进一步测试发现，内联元素的“包含块”可以受::first-line 伪元素影响，但不受::first-letter 伪元素影响。</p>\n<p>可以看出，内联元素的“包含块”范围相对稳固，不会受 line-height 等属性影响，因此，理论上其还是有实用价值的。</p>\n</li>\n<li>\n<p>兼容性问题。无论内联元素是单行还是跨行都存在兼容性问题。单行的兼容性问题存在于“包含块”是一个空的内联元素的时候。例如，按照我们的理解，下面的代码实现的效果应该是图片在容器的右上角对齐：</p>\n<html><head></head><body><div class="gatsby-code-button-container" data-toaster-id="55081989741284730000" data-toaster-class="gatsby-code-button-toaster" data-toaster-text-class="gatsby-code-button-toaster-text" data-toaster-text="复制成功" data-toaster-duration="3500" onclick="copyToClipboard(`<p>\n    <span>\n        <img data-src=&quot;1.jpg&quot; />\n    </span>\n</p>\n<style>\n    p {\n        text-align: right;\n    }\n\n    p > span {\n        position: relative;\n    }\n\n    p > span > img {\n        position: absolute;\n        right: 0;\n    }\n</style>`, `55081989741284730000`)">\n              <div class="gatsby-code-button" title="html">\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div></body></html>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1.jpg<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n    <span class="token selector">p</span> <span class="token punctuation">{</span>\n        <span class="token property">text-align</span><span class="token punctuation">:</span> right<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token selector">p > span</span> <span class="token punctuation">{</span>\n        <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token selector">p > span > img</span> <span class="token punctuation">{</span>\n        <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n        <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>在 IE8 至 IE10 浏览器下，图片完全在<code class="language-text">&lt;p&gt;</code>容器的左侧外部显示了，IE、Edge 中则无此问题。需要给空的<code class="language-text">&lt;span&gt;</code>元素设置 border 或 padding 让“幽灵空白节点”显现或者直接插入字符才能表现一致。</p>\n<p>跨行的兼容性问题在于规范对此行为并未定义，导致浏览器在实现上各有差异。主要差异在于，Firefox 浏览器的“包含块”仅覆盖第一行，而 IE 和 Chrome 浏览器“包含块”的表现完全符合定义，由第一行开头和最后一行结尾的内联盒子共同决定。差异如图 6-43 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2020-01-08-11-00-27-13dc0aeec498b62db66806487f4dbf84-f3838.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 253px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 73.51778656126483%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACUElEQVQoz31TW3OaUBDm/7/nsU+dNo5tMs1LbrVGWyJCHRFUEOQSFBQQAbXlIpxzukTtJJ1pdnZgz+x+e3b320MRjMl/5eTa75EgoG4XmybZbLCuI1XFhkGdvPs0TYuyLFGl+6LAL5PCATC7HXYc7Hk4SchuR5KEitylN5/znceLj+d3V1eX5+dX9U+19x/YdqvHMJtVELvu2nHy7Y5kOfZ9kqZ/c1JzWfp2ey/xfJ/lHNPkaLp5d39Zq7F0h2fZ742HQa8nCkK8dElR/tMVNTMMutVufm086fpiNp8Mhz2mG67WUCsqyqr0cE2WSxLHJAiqsjWtuv8ADsP1RFHGkuz5frBeLxYLXdPDKAIfQqjqN47RdApDgmkhRUFgOM4RTN4U/BYXhCrTDBixNJVuPgg97ifTEfs812E0RdZN65DgyBoYUAvoKSM1n0zazQeObt9fX3OP9Jd6/XP94t3ZWfPmttlqsRwvTZSBIETbzSvmD2BvNhuMx2NZXvirX2k2c2xFN5a2nWy3WZ6FUfzbXebbLcoyAuQD2zCtzeYIdg2D/UG3G40nVZ1pxlSWBZYNbIeg8niLphFpDPuEZBmLIhYEbFlHMIwEP0/12F6lBD83BvsGO/ey0AJV8oyATSwp1/O6LGtZ1kAQgyBYrVbD0YgfDHTDME1TkiTDMPr9PnQGxmg4HIqipmnwZxiGggR5nmdpmiQJbHgYhlNVdV3Xtm3g3HEcXdfhCIaqqr7vQzyEAQTewiuei6IAwGg0Akccx4qiwBG+EB1FEWTxT7t1kD/4ejnvGHecmQAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2020 01 08 11 00 27" title="" data-src="/static/2020-01-08-11-00-27-13dc0aeec498b62db66806487f4dbf84-f3838.png" data-srcset="/static/2020-01-08-11-00-27-13dc0aeec498b62db66806487f4dbf84-72de9.png 200w,\n/static/2020-01-08-11-00-27-13dc0aeec498b62db66806487f4dbf84-f3838.png 253w" data-sizes="(max-width: 253px) 100vw, 253px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>个人认为，IE（包括 IE8）和 Chrome 浏览器的渲染规则是更准确的，但这种渲染可能会带来另外一个疑惑：如果内联元素最后一个内联盒子的右边缘比第一个内联盒子的左边缘还要靠左，那岂不是“包含块”宽度要为负了？眼见为实，例如，我们修改一下 HTML，让“包含块”从后面的文字开始算起：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="37182969627830660000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`我是<big style=&quot;font-size:200%;&quot;>字号很大</big> <span style=&quot;position:relative;&quot;>的文字！我是第二行内容。</span>`, `37182969627830660000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html">我是<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>big</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">font-size</span><span class="token punctuation">:</span>200%<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>字号很大<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>big</span><span class="token punctuation">></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">position</span><span class="token punctuation">:</span>relative<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>的文字！我是第二行内容。<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>结果“包含块”的宽度按照 0 来处理了，起始位置为第一个内联盒子所在的位置，如图 6-44 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2020-01-08-11-03-55-b1a6d23be04b7005f8249b4776e5bcc9-ba5d6.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 254px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 32.28346456692913%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA+0lEQVQY02VQXU+DMBTl/7/xrP6C+aJGo3GbL2YJ0rAIAUZLSAlM09WNjoLhq+CVKGbxpLk599xzmttqwzD0fQ91z3cvJjIMY3Y5e1ouL87Pbm7vdF2/nz8+XF+569cAY8dxjlJOEW1iIjs4rosJSbbbtm3TNKUxJYQchDgy9hZF+ywTQsBo+MVfmLP359VqsZhvgoDGsYfxGqEd+/g2VNUA5xSQ0rquU0r9H4xVAVEj+lPPz9q2bfu+TymF90CfJInneWEYIoRgSWjhF0DBGFuWBSJjjHMeRZFpmtrnCCllnucQhkWKogAFKlxfVVVZlpMCtrqum6YBEfgXmsZKgh/Vc1wAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2020 01 08 11 03 55" title="" data-src="/static/2020-01-08-11-03-55-b1a6d23be04b7005f8249b4776e5bcc9-ba5d6.png" data-srcset="/static/2020-01-08-11-03-55-b1a6d23be04b7005f8249b4776e5bcc9-e9711.png 200w,\n/static/2020-01-08-11-03-55-b1a6d23be04b7005f8249b4776e5bcc9-ba5d6.png 254w" data-sizes="(max-width: 254px) 100vw, 254px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n</ol>\n<h3 id="差异点二：绝对定位元素计算的容器"><a href="#%E5%B7%AE%E5%BC%82%E7%82%B9%E4%BA%8C%EF%BC%9A%E7%BB%9D%E5%AF%B9%E5%AE%9A%E4%BD%8D%E5%85%83%E7%B4%A0%E8%AE%A1%E7%AE%97%E7%9A%84%E5%AE%B9%E5%99%A8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>差异点二：绝对定位元素计算的容器</h3>\n<p>第二点差异，也就是绝对定位元素计算的容器是第一个 position 不为 static 的祖先元素。这个很多人知道，因为平时 left、top 定位用得很频繁，用着用着就知道了百分比宽度、高度以及定位什么的和普通元素不一样。这也衍生出了另外一个有意思的小问题，就是 height:100% 和 height:inherit 的区别。对于普通元素，两者确实没什么区别，但是对于绝对定位元素就不一样了。height:100% 是第一个具有定位属性值的祖先元素的高度，而 height:inherit 则是单纯的父元素的高度继承，在某些场景下非常好用。</p>\n<p>绝对定位元素的“包裹性”中的“宽度自适应性”其实也是相对于“包含块”来表现的。</p>\n<p>我们先从一个简单的例子说起，代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="29888218620675744000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<style>\n    .box {\n        position: absolute;\n    }\n</style>\n<div class=&quot;box&quot;>\n    文字内容\n</div>`, `29888218620675744000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n    <span class="token selector">.box</span> <span class="token punctuation">{</span>\n        <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n    文字内容\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>请问：.box 元素的宽度是多少？文字会换行吗？如果.box 元素中有满满 1000 个汉字，文字会换行吗？如果换行，在哪里换行？</p>\n<p>在通常场景下，.box 元素宽度就是里面文字的宽度，不会换行；随着文字越来越多，如果文字足够多，.box 元素宽度会越来越大，但是不会无限制大下去，因为超过一定限制是会自动换行的，而这个限制就是 .box 元素的“包含块”。</p>\n<p>注意这里的几个措辞，第一个是“通常场景下”，第二个是“会自动换行”。“会自动换行”说的就是“包裹性”中的“宽度自适应性”。举个简单的例子，假设.box 元素有一个宽度 200px 同时 position 为 relative 的容器元素，CSS 代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="16382888505012550000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.container {\n    width: 200px;\n    border: 1px solid;\n    position: relative;\n}\n\n.box {\n    position: absolute;\n}`, `16382888505012550000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.container</span> <span class="token punctuation">{</span>\n    <span class="token property">width</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>\n    <span class="token property">border</span><span class="token punctuation">:</span> 1px solid<span class="token punctuation">;</span>\n    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.box</span> <span class="token punctuation">{</span>\n    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>同时.box 元素里面的文字内容非常多，此时，.box 元素的“包含块”就是.container 元素，因此，.box 元素最终的宽度就是 200px（见图 6-45），也就是说，绝对定位元素默认的最大宽度就是“包含块”的宽度。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2020-01-08-11-16-16-75b156c237bc82e1fb69fd3496a91c80-a3fce.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 515px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 23.106796116504853%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsSAAALEgHS3X78AAAA0ElEQVQY032OSwuCQBRG/eEtWvSOImjRLogW5SIKS4LoQS2CVgbRw1wK4zijTCk0gznakFHQwsvlcrh8Bz4J3x7t2aG7OncWp8782F2exboei+M4iqI4dSSL0JKiV8d6TTUqii5YXHj7lxOmlMp9ea9pgjnnkuV49d66Odi2Rjt5c11dyPLk3h/Pt/AzE1kIE3V6NYyPDAHMZoqFaiOXLw+HSkrb5E/InTL2qY0xjjgnhLiOEwSB7/sIYQhhGIZfTWRs22aMIYQsC5imKQIAgBfpSw7xlXcLegAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2020 01 08 11 16 16" title="" data-src="/static/2020-01-08-11-16-16-75b156c237bc82e1fb69fd3496a91c80-a3fce.png" data-srcset="/static/2020-01-08-11-16-16-75b156c237bc82e1fb69fd3496a91c80-96d1c.png 200w,\n/static/2020-01-08-11-16-16-75b156c237bc82e1fb69fd3496a91c80-2b9d0.png 400w,\n/static/2020-01-08-11-16-16-75b156c237bc82e1fb69fd3496a91c80-a3fce.png 515w" data-sizes="(max-width: 515px) 100vw, 515px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>.container 高度塌陷是因为 absolute 破坏了正常的 CSS 流，此乃“破坏性”；宽度被 relative 限制在最大 200px，此乃“包裹性”，因此，对于弹框这种绝对定位或固定定位的元素是没有必要设置 max-width: 100% 的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="43663112566581840000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`dialog {\n    position: absolute;\n    max-width: 100%; /* 多余 */\n}`, `43663112566581840000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">dialog</span> <span class="token punctuation">{</span>\n    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n    <span class="token property">max-width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span> <span class="token comment">/* 多余 */</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>而“通常场景下”说的是，有可能我们的“包含块”（或者“包含块”剩余的空间）小到不足以放下“文字内容”这 4 个汉字。于是，一些“怪异”的现象就很好理解了，比方说纯 CSS 定位或 JavaScript 计算定位实现的提示效果一柱擎天的问题。</p>\n<p>我们的目标效果是鼠标 hover 图标出现类似于如图 6-46 所示的效果。</p>\n<p>我们可以利用::before 和::after 伪元素实现我们想要的效果，一个实现三角，一个实现矩形区。为了不干扰布局，显然实现提示效果的两个伪元素会使用 absolute 绝对定位，为了定位准确，我们会给小图标元素设置 position:relative。此时问题来了：由于提示信息的内容有长有短，我们不可能给提示元素设置一个特定的宽度，于是宽度表现走“包裹性”，也就是最大宽度不超过“包含块”的宽度，但是恰好此时“包含块”就是我们的小图标元素，并且宽度往往都不超过 20 像素，也就是我们的提示信息只能够在 20 像素宽的区域内显示，这就导致了最终的文字内容“一柱擎天”，如图 6-47 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2020-01-08-11-24-51-a1b26bf50e763eddfa6f4268dbb2caa2-28558.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 514px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 24.708171206225682%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAqUlEQVQY03WOQQqDMBREc/u6zT3syo29QUvBbhU0rYpSUCSJmliJsQOhUoqdxc/8P28gZP1onmel1PpHxhjMMDxRSmGWZcEk1loXBEHgHTzH4bhbjqKb7x9dGQyBcyi7P86X67buappeVfXcVtJ13TiO+LDWmnMOj4sQ4ruDFBGAvu/bth2GQUoJjOBBkGVZWZZpmjZNE8cxiJ9ykiR5noOp67ooCsYYKm8HqBu+DG3WogAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2020 01 08 11 24 51" title="" data-src="/static/2020-01-08-11-24-51-a1b26bf50e763eddfa6f4268dbb2caa2-28558.png" data-srcset="/static/2020-01-08-11-24-51-a1b26bf50e763eddfa6f4268dbb2caa2-843f4.png 200w,\n/static/2020-01-08-11-24-51-a1b26bf50e763eddfa6f4268dbb2caa2-8216e.png 400w,\n/static/2020-01-08-11-24-51-a1b26bf50e763eddfa6f4268dbb2caa2-28558.png 514w" data-sizes="(max-width: 514px) 100vw, 514px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>要修复这一问题其实很简单，只要改变默认的宽度显示类型就可以，添加 white-space: nowrap，让宽度表现从“包裹性”变成“最大可用宽度”，点击演示页面的删除图标可看到修复“一柱擎天”问题后的效果。</p>\n<p>绝对定位元素“包裹性”的“包含块”限制不仅出现在宽度不足的时候，有时候就算“包含块”的宽度足够大，也依然会出现“一柱擎天”。眼见为实，还是提示信息效果，不过这次我们使用 JavaScript 实现，黑色提示条相关的 HTML 内容直接插入<code class="language-text">&lt;body&gt;</code>标签中，此时“包含块”的宽度就是浏览器窗体的宽度，按道理讲，是不会出现“一柱擎天”效果的，但是人算不如天算，不该发生的还是发生了！</p>\n<p>原因不难理解。虽然说黑色的提示元素的“包含块”宽度是整个浏览器窗体宽度，放几个文字绰绰有余，但是，由于我们的图标位于浏览器的右边缘，JavaScript 定位的时候，就会设置一个很大的 left 属性值，导致“包含块”剩余的空间不足，也就是提示元素的“自适应宽度”不足，导致文字只能竖着显示，从而出现“一柱擎天”。</p>\n<p>要修复此问题其实很简单，只要改变默认的宽度显示类型就可以，添加 white-space:nowrap，让宽度表现从“包裹性”变成“最大可用宽度”，点击演示页面的删除图标可看到修复“一柱擎天”问题后的效果。当然，实际开发的时候，最好改变提示的方向，例如右边缘的时候，左侧提示。</p>\n<h3 id="差异点三：计算和定位是相对于祖先定位元素的-padding-box"><a href="#%E5%B7%AE%E5%BC%82%E7%82%B9%E4%B8%89%EF%BC%9A%E8%AE%A1%E7%AE%97%E5%92%8C%E5%AE%9A%E4%BD%8D%E6%98%AF%E7%9B%B8%E5%AF%B9%E4%BA%8E%E7%A5%96%E5%85%88%E5%AE%9A%E4%BD%8D%E5%85%83%E7%B4%A0%E7%9A%84-padding-box" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>差异点三：计算和定位是相对于祖先定位元素的 padding box</h3>\n<p>第三点差异，也就是计算和定位是相对于祖先定位元素的 padding box。为何绝对定位的定位要相对于 padding box 呢？这其实和 overflow 隐藏也是 padding box 边界类似，都是由使用场景决定的。</p>\n<p>举个例子，在移动端，为了实现良好的视觉感受，列表或者模块的信息内容主体距离窗体两侧都有一定的空白，这个空白一般都会使用 padding 撑开的，而不是 margin，原因在于这些列表是链接，外部一定会使用<code class="language-text">&lt;a&gt;</code>元素，而为了准确反馈响应区域，<code class="language-text">&lt;a&gt;</code>元素在 tap 的时候会由加深的背景块示意（参见微信列表 tap 时候的反馈），所以，如果左右的间距使用 margin 撑开，就会出现列表的点击反馈背景区域左右边距透明的问题，视觉效果和体验都是不好的，因为 margin box 永远是透明的。</p>\n<p>现在来需求了：需要在列表或者模块的右上角显示一个明显的标签，如“精华”“皇冠”之类。此时，我们无须任何计算，直接使用数值 0 定位在列表的右上角即可，代码示意如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="49741420490445900000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.list {\n    padding: 1rem;\n}\n\n.tag {\n    position: absolute;\n    top: 0;\n    right: 0;\n}`, `49741420490445900000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.list</span> <span class="token punctuation">{</span>\n    <span class="token property">padding</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.tag</span> <span class="token punctuation">{</span>\n    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n    <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n    <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>但是，如果我们的定位是相对于 content box 计算的，则 CSS 代码应该类似这样：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="62863116439852564000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.list {\n    padding: 1rem;\n}\n\n.tag {\n    position: absolute;\n    top: 1rem;\n    right: 1rem;\n}`, `62863116439852564000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.list</span> <span class="token punctuation">{</span>\n    <span class="token property">padding</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.tag</span> <span class="token punctuation">{</span>\n    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n    <span class="token property">top</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span>\n    <span class="token property">right</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>看上去好像没什么问题，但实际上增加了我们日后开发维护的成本，因为绝对定位元素的定位值和列表容器的 padding 值耦合在一起了：当我们对 padding 间距进行调整的时候，绝对定位元素的 right、top 值也一定要跟着一起调整，否则就会出现样式问题，而实际开发的时候，忘记调整绝对定位元素的定位值是非常常见的，bug 继而出现。</p>\n<p>对一个项目而言，间距并非一成不变，列表间的上下左右间距会因为内容或者场景的不同而不同，这就导致每一次出现有差异的布局，我们都需要重新额外写一个定位样式。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="14980470799889201000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.list-2 {\n    padding: 0.75rem;\n}\n\n.tag-2 {\n    position: absolute;\n    top: 0.75rem;\n    right: 0.75rem;\n}`, `14980470799889201000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.list-2</span> <span class="token punctuation">{</span>\n    <span class="token property">padding</span><span class="token punctuation">:</span> 0.75rem<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.tag-2</span> <span class="token punctuation">{</span>\n    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n    <span class="token property">top</span><span class="token punctuation">:</span> 0.75rem<span class="token punctuation">;</span>\n    <span class="token property">right</span><span class="token punctuation">:</span> 0.75rem<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>这显然增加了一定的开发成本。而相对于 padding box 定位，列表的 padding 属性值是多少对我们的样式表现没有任何影响。点击列表下面的按钮改变列表的 padding 值大小会发现，我们的标签在右上角微丝不动，如图 6-49 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2020-01-08-11-53-04-d125475c78b56f08082d20ed216f1ecf-32723.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 355px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 59.436619718309856%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAABVklEQVQoz4VRXY+CMBDkj/sH/EM++KDveF4kRh+EYjREAfmqQFtb2htrDrhLzpuQzXS7s11mHWOh/0XXaWNkFN0mk3w61XUNlWNG0Pr5vQf3PLb+eJUPYilV07SMcUrpxtukafqa6EdvY1Sea85fiUGsFPJFVVHWsvP5HMdxURRZll0uF/C6rnG8U6riuO84flkWZXWnddM0EENWlmUURdfrNc/zNEmS2y05HnVZ9lMM4q7rhBDyIRljELRta375genSVEvZ55w33ozNfnbnXGVZ32gQ9xV/tXmKYZUQeuSiM35HCC4sMHPzDXD8iOCcFYV4PMY9nX4fnPPA94MgOBwOy8ViNpvN5/Olxed6HRISEBKGYTca0JHWALiFiBewZGyFYmMWlQVsB0fEFeqVBYjjeZ7v+4QQXCBiN1gSyOl0QtxutxgEBTju93vw1Wq12+2Qd133C4z3r1D/1/eSAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2020 01 08 11 53 04" title="" data-src="/static/2020-01-08-11-53-04-d125475c78b56f08082d20ed216f1ecf-32723.png" data-srcset="/static/2020-01-08-11-53-04-d125475c78b56f08082d20ed216f1ecf-d1052.png 200w,\n/static/2020-01-08-11-53-04-d125475c78b56f08082d20ed216f1ecf-32723.png 355w" data-sizes="(max-width: 355px) 100vw, 355px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>然而，实际项目场景千变万化，有时候，我们需要的效果并不是定位在列表的边缘，而是定位在内容的边缘，很多人不假思索就直接使用类似下面的代码实现：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="78234020131563320000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.list {\n    padding: 1rem;\n}\n\n.tag {\n    position: absolute;\n    top: 1rem;\n    right: 1rem;\n}`, `78234020131563320000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.list</span> <span class="token punctuation">{</span>\n    <span class="token property">padding</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.tag</span> <span class="token punctuation">{</span>\n    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n    <span class="token property">top</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span>\n    <span class="token property">right</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>效果虽然达成了，但是底子还是不够稳固，因为 top、right 属性值大小和 padding 属性值耦合在了一起。实际上，有小技巧可以使其不耦合，那就是间距不是使用 padding 撑开，而是使用透明的 border 撑开。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="32977770008685183000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.list {\n    border: 1rem solid transparent;\n}\n\n.tag {\n    position: absolute;\n    top: 0;\n    right: 0;\n}`, `32977770008685183000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.list</span> <span class="token punctuation">{</span>\n    <span class="token property">border</span><span class="token punctuation">:</span> 1rem solid transparent<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.tag</span> <span class="token punctuation">{</span>\n    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n    <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n    <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>top、right 属性值都是 0，被固定了下来，于是当间距发生变化的时候，只需要改变 border 宽度就可以，示意如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="98881857959788680000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.list-2 {\n    border: 0.75rem solid transparent;\n}`, `98881857959788680000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.list-2</span> <span class="token punctuation">{</span>\n    <span class="token property">border</span><span class="token punctuation">:</span> 0.75rem solid transparent<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>此技巧唯一需要注意的就是尽量不要设置 overflow:hidden。</p>\n<h2 id="具有相对特性的无依赖-absolute-绝对定位"><a href="#%E5%85%B7%E6%9C%89%E7%9B%B8%E5%AF%B9%E7%89%B9%E6%80%A7%E7%9A%84%E6%97%A0%E4%BE%9D%E8%B5%96-absolute-%E7%BB%9D%E5%AF%B9%E5%AE%9A%E4%BD%8D" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>具有相对特性的无依赖 absolute 绝对定位</h2>\n<p>即使写了很多年 CSS 代码的人也可能会错误地回答下面这个问题：一个绝对定位元素，没有任何 left/top/right/bottom 属性设置，并且其祖先元素全部都是非定位元素，其位置在哪里？</p>\n<p>很多人都认为是在浏览器窗口左上方。实际上，还是当前位置，不是在浏览器左上方。</p>\n<p>这是关于 absolute 绝对定位最典型的错误认知。正是这种错误认知导致凡是使用 absolute 绝对定位的地方，一定父容器 position: relative，同时 left/top 等属性定位，甚至必同时使用 z-index 属性设置层级。</p>\n<p>absolute 是非常独立的 CSS 属性值，其样式和行为表现不依赖其他任何 CSS 属性就可以完成。</p>\n<p>图 6-50 左上角有一个“TOP1”的图形标志，请问如何布局？</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2020-01-08-14-11-11-eb0a67791e68bcaace6e7cc1a0f5b51b-63541.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 207px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 96.1352657004831%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAIAAAAf7rriAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEe0lEQVQ4yyWRC0xTVxjHb5a4OZRHL+1tL7e999wWZM49TDQz2brNRSDLIpmbxg0M2bRTN4wQRafbCG8BEVCUx0BdZWwMHBqnthUUaNU+oKVwbx9AXzgLOGGCFZC29LE7+efkO7/vf75/TnIO5B+1eS5fmT1ZvVB2zlWe45TtedQpmbz9zaRc8qBD4uyQjLRK7FckD69L1HW7L36fUX8oozn3q98Kd407zNBit+qfw8dn8qvoLz5pz2RTNRxnI9fWwB09wxsqRLoPIi274M4ctr0akabBxzZGF4ljipNZ2958uV/dAy10dU8fKXDl77+WE6coJkYbRC6pyHle5KhLsJ8T9RUL277Dbx4Gh1Kx13HOOgEnbQN6NAVfD2CtWgV5r98ZS0++XQBkRbjqBLDWC+2N5EgtsFSS5lPAUIa3H+Dv/QDls2EOO5bFYiGxcEIcgkTFaFRK6Jn6sj4vtvcEqcjHu4pwXTmwVgPbaWApB0OFhDEXv7afOJ2MXf2UXyJGE7kwyoYxbuyqVyJ7e5TQrK3ZdDZ2sFKoLSU0pXh/OTBVgb8vkRNtwgc/i0ZLge44cWO7oG8nodmJ/7gxDmfDSCwrcuXqHiY8Y26hqjjUWRFVAyy1YKQRWOpI63nSfVU42S4cv0DezQLVm9E/UgUVH2K3tuEZa9EknMeKiOrpVULTdIu+gj1QIxqsBdYLpO0X0t4qostI80+Eu0k0ViLU7yMVOwhdBnE/nejaTpx6D0tPjIuIjOpVKqHHdIu6HNZUkvozuKmJHG0XDp8UGl8T9GL8/t2gN53QpBF/fSy4kiIw7AJXU/GDYl48yV4Vvfr/8ORgy51CWHUS6M4Q9O+k5Rhp5BBdK3EpEJRuxXI+wrI3CXav4zZv4Uu3CrLe4e3YzE0So/GcqPsqFeQ2NCvyYu5VAr0U0FnAysINEYIKgv/ZBn5qIj+Lh76NsN/AkM/XclMSeFtEaOomNFmM8thRPcxXTRhblKWwoZkc+oEcYQFqBf5nIr8nh+jMJi+K+fUw+jWbu4bLfZeHvc/H3kK4azBOAs5b8WqUknntKfOv+gYOVRM/TJAjLwHNeqIjA3QeIqakooECsi8TqDPJtr2CG/uIG9+SNV8KpBlEYxpRJkbc2ntM+JKuaXXffsyEIZZk1FnML0mCWw9w/m3FjCXcu9kInY/a83ijeaijBB3JRQeP8IaOorf3RD82qyD/vHt27PrUsGzOpvCOK57ZZUPdN+dccp9b7h275RlWPHco5izyp2b5nFUxPSh/QslmKMWY+qbP8wSa9cw/9y6Fw2F/MLwUYvZwMBQMMBwMzy8uLfqD/mDItxT0BkLMqTcY8geCTPvc65+bX4C0Wo3JRA8PWw36/qFBIxMec7ncDx96ns4OGPTMcjodfp/XRFN9Oq1cJnO5nIHAEk0xrQ5aXFz0+Xx+vz8QCDAwNTU1PT09MTHB1EcvxDDjezwehpmZYDDIXMA4Xq8XCr9QKBRatoxGo8PhoGlar9ebzeaBgQGtVmuz2RimKGp5bLky+g9ZkHcz4b83dwAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2020 01 08 14 11 11" title="" data-src="/static/2020-01-08-14-11-11-eb0a67791e68bcaace6e7cc1a0f5b51b-63541.png" data-srcset="/static/2020-01-08-14-11-11-eb0a67791e68bcaace6e7cc1a0f5b51b-7ebab.png 200w,\n/static/2020-01-08-14-11-11-eb0a67791e68bcaace6e7cc1a0f5b51b-63541.png 207w" data-sizes="(max-width: 207px) 100vw, 207px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>很多人是这么实现的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="42354371771827500000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.father {\n    position: relative;\n}\n\n.shape {\n    position: absolute;\n    top: 0;\n    left: 0;\n}`, `42354371771827500000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.father</span> <span class="token punctuation">{</span>\n    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.shape</span> <span class="token punctuation">{</span>\n    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n    <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>如果你也是这么实现的，就要注意了，因为这说明你对 absolute 认知还是太浅薄了。实际上，只用下面一行 CSS 就足够了：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="36009596787884980000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.shape {\n    position: absolute;\n}`, `36009596787884980000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.shape</span> <span class="token punctuation">{</span>\n    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>这种没有设置 left/top/right/bottom 属性值的绝对定位称为“无依赖绝对定位”。很多场景下，“无依赖绝对定位”要比使用 left/top 之类属性定位实用和强大很多，因为其除了代码更简洁外，还有一个很棒的特性，就是“相对定位特性”。</p>\n<p>明明 absolute 是‘绝对定位’的意思，怎么又扯到‘相对定位特性’了呢？没错，“无依赖绝对定位”本质上就是“相对定位”，仅仅是不占据 CSS 流的尺寸空间而已。“相对性”和“不占据空间”这两个特性在实际开发的时候非常有用，除了上面左上角加“TOP1”图形标志的案例，我再举几个实用例子，展示一下“无依赖绝对定位”的强大之处。</p>\n<h3 id="各类图标定位"><a href="#%E5%90%84%E7%B1%BB%E5%9B%BE%E6%A0%87%E5%AE%9A%E4%BD%8D" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>各类图标定位</h3>\n<p>我们经常会在导航右上方增加一个“NEW”或者“HOT”这样的小图标，如图 6-51 所示。要实现在导航文字右上方的定位很简单，直接对加图标这个元素进行样式设定就可以了，原来纯文字导航时的样式完全不需要有一丁点儿的修改。下面以“HOT”图标为例：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="69467010977788850000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.icon-hot {\n    position: absolute;\n    margin: -6px 0 0 2px;\n    width: 28px;\n    height: 11px;\n    background: url(hot.gif);\n}`, `69467010977788850000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.icon-hot</span> <span class="token punctuation">{</span>\n    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n    <span class="token property">margin</span><span class="token punctuation">:</span> -6px 0 0 2px<span class="token punctuation">;</span>\n    <span class="token property">width</span><span class="token punctuation">:</span> 28px<span class="token punctuation">;</span>\n    <span class="token property">height</span><span class="token punctuation">:</span> 11px<span class="token punctuation">;</span>\n    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>hot.gif<span class="token punctuation">)</span></span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2020-01-08-14-21-46-e5dc6937fad1232b9835815593e82af2-cf562.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 246px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 35.36585365853659%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsSAAALEgHS3X78AAABU0lEQVQY0z2N32qCYBiHvYGdD2owmEO/tEVqITG307FqizqILDxp8x52GYEjY1chXYe6VZLWUUUdmBFB9E+CvdPac/Dj/R7e3/di7XZbURRVVZsBrTP/pqmqjc8vNZAn0Wo1FEXTNEwUxUgkQlEUTdMIIRzHbwIIgiBJEsWoeOz2o3jxwEavrnFEEoim0iR6voyWymVMlmWe5yVJgl8qlYogCKlUiuO4fD6fy2artdrrS+7pMXGfAZ0uFApitVouljLxu3dZ/ivDQdhmGIYNSCaTTMBpYNl4ggvH0LAcRyD0Vq9jg8Hg+4xhGLqu/wSYphlKGMBDgux0OqEBHMfBfN8fjUabzWa1Wu33++PxOJ/PF4vFbrcDuV6vIQ+HAzxd151Op2CgAjuQGBS63e5kMhkOh8vlEsowWJY1Ho9nsxl4SM/zoAa+1+vZtg3H+v3+drv9BVJK7DR2UJCDAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2020 01 08 14 21 46" title="" data-src="/static/2020-01-08-14-21-46-e5dc6937fad1232b9835815593e82af2-cf562.png" data-srcset="/static/2020-01-08-14-21-46-e5dc6937fad1232b9835815593e82af2-c493e.png 200w,\n/static/2020-01-08-14-21-46-e5dc6937fad1232b9835815593e82af2-cf562.png 246w" data-sizes="(max-width: 246px) 100vw, 246px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>一个简简单单的 position:absolute，然后通过 margin 属性进行定位，效果即达成，包括 IE6 在内的浏览器都是兼容良好的。</p>\n<p>日后这个图标下架了，我们只需要把图标对应的 HTML 代码和 CSS 删掉就可以，原来的代码完全不需要改动。不仅代码简洁，日后的维护也很方便，更关键的是，即使导航中的文字长度发生了变化，我们的图标依然定位良好，因为“无依赖绝对定位”的图标是自动跟在文字后面显示的。</p>\n<p>设想一下，如果给父元素设置 position:relative，然后 right/top 定位，文字长度一旦发生变化，CSS 代码就要重新调整，这维护成本显然要比前一种方法高了很多。实际上，即使是普通的水平对齐的图标也可以使用“无依赖绝对定位”实现，类似图 6-52 所示效果。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2020-01-08-14-26-23-7d7d52680a0071a4abd0647b8deff857-e3ec8.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 203px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 34.48275862068966%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsSAAALEgHS3X78AAAA+0lEQVQY03VR0WqEMBD0/3+lT323tCBcoX0QKooGc2pPD9Qku0laOR/0OtfrlWtph2TZ2czALAmOF1hrR6X4/Y2sI+/IOcNsLBNbUPRKqXVdj1cIcM8jOOE2LynVlRaS5Na13el0e5WLSRkI5nn+x2yMaXavN7f756fdQ9RtHvsk1WWlC9Hc3dttDcF8OPxttmyHcWTviZksGyKtNSp9htdEiL0syw/zN//aZ11/LXaN5YKzJoiiSEophMiyDLxpmjAMy7IEjeO4ruuqqoqiSNMUsjzPoUySBPRkbtsWebBv3/fg3ntMGMmJMERy9BjiFc00TfiUYRhQIf4AyiWI6dwOGP4AAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2020 01 08 14 26 23" title="" data-src="/static/2020-01-08-14-26-23-7d7d52680a0071a4abd0647b8deff857-e3ec8.png" data-srcset="/static/2020-01-08-14-26-23-7d7d52680a0071a4abd0647b8deff857-79bd1.png 200w,\n/static/2020-01-08-14-26-23-7d7d52680a0071a4abd0647b8deff857-e3ec8.png 203w" data-sizes="(max-width: 203px) 100vw, 203px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="69862385144167290000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<style>\n    .icon-x {\n        line-height: 20px;\n        padding-left: 20px;\n    }\n\n    .icon-warn {\n        position: absolute;\n        margin-left: -20px;\n        width: 20px;\n        height: 20px;\n        background: url(warn.png) no-repeat center;\n    }\n</style>\n<span class=&quot;icon-x&quot;> <i class=&quot;icon-warn&quot;></i>邮箱格式不准确 </span>`, `69862385144167290000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n    <span class="token selector">.icon-x</span> <span class="token punctuation">{</span>\n        <span class="token property">line-height</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>\n        <span class="token property">padding-left</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token selector">.icon-warn</span> <span class="token punctuation">{</span>\n        <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n        <span class="token property">margin-left</span><span class="token punctuation">:</span> -20px<span class="token punctuation">;</span>\n        <span class="token property">width</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>\n        <span class="token property">height</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>\n        <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>warn.png<span class="token punctuation">)</span></span> no-repeat center<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>icon-x<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>icon-warn<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span>邮箱格式不准确 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>同样是 position:absolute，然后简单的 margin 偏移实现。此方法兼容性很好，与 inline-block 对齐相比的好处在于，inline-block 对齐最终行框高度并不是 20px，因为中文下沉，图标居中，要想视觉上水平，图标 vertical-align 对齐要比实际低一点儿，这就会导致最终整个行框的高度不是预期的 20px，而是 21px 或者更大。但是，如果使用“无依赖绝对定位”实现，则完全不要担心这一问题，因为绝对定位元素不会改变正常流的尺寸空间，就算我们的图标有 30px 大小，行框高度依然是纯文本所在的 20px 高度。</p>\n<h3 id="超越常规布局的排版"><a href="#%E8%B6%85%E8%B6%8A%E5%B8%B8%E8%A7%84%E5%B8%83%E5%B1%80%E7%9A%84%E6%8E%92%E7%89%88" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>超越常规布局的排版</h3>\n<p>图 6-53 给出的是一个常见的注册表单，为了保证视觉舒适，我们往往会让表单水平居中对齐。例如，这里宽度 300 多像素，于是有：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="37751980070194360000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.box {\n    width: 356px;\n    margin: auto;\n}`, `37751980070194360000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.box</span> <span class="token punctuation">{</span>\n    <span class="token property">width</span><span class="token punctuation">:</span> 356px<span class="token punctuation">;</span>\n    <span class="token property">margin</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>通过设置 margin:auto 实现水平居中效果，乍一看效果达成，但是实际开发的时候还有提示或报错等交互效果。有一种做法是提示信息放在输入框的下面，但这样做会带来一种不好的体验，那就是提示信息出现和隐藏的时候，整个容器的高度会突然变化；还有一种做法就是在输入框的后面显示，但是为了让默认状态下表单水平居中，外面容器的宽度不是很大，因此如果在后面显示，就会有宽度不够的问题。如果我们使用“无依赖绝对定位”，那这个问题就不再是问题了。假设提示文字内容元素的类名是.remark，则有 CSS 代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="39526060680363440000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.remark {\n    position: absolute;\n    margin-left: 10px;\n}`, `39526060680363440000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.remark</span> <span class="token punctuation">{</span>\n    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n    <span class="token property">margin-left</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>就这么简简单单的 CSS 代码，效果即达成，既在输入框的后面显示，又跳出了容器宽度的限制，同时显隐不会影响原先的布局。效果如图 6-54 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2020-01-08-14-32-31-0835f44d6233b95c06327214735c2b97-73362.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 609px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 37.931034482758626%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAABmklEQVQY002Q7U/TUBSH+9cbQ1wcVK3tRlsHw23QaYggCtZt7dqy3tvO7gWi0U+mZevLBjh6z92oDjC65MmT8+Gc5Px+DO1VaX8X+ntZv/LdbVRRXHdCBUcKfnBUx+MKmhru8NbbAa9GezW6tLsz//aRgdOXYBeJXcwQN9D3ueaFpPubWvAPUfO5VnhsOLfNPDSe0aMnVN2Akxzt1hjoCIBEgsQM82fGQUEbye0LaQW5HQjt+LiNU+vFL5OfNdiZxV/rLOkpK8eIP7cOhdZI0vx7godB1gNBi04Md97h006BuBJxpHT57+ANA6gAWCJYyhzhzHrPffZfWeMtPC2hyZ07cUn3i3qkWt2FLcD+Gv3wlKos2AIdvl3JbHPn5kHBTLiylXu0m984zD3eYzebkjm+y9yyF808abCgrkPrOZxydKAw9EuZehXwqpm3/WPZtntZfteTxU+liimL6lYdK93kNZoYzjDzyrCsun9Pd3v+9Yj5PSd/oWkSR2FyOb0hP6MkiKfh9U10NRuFcTCKwyi+moQZTf/vL+APv8F/gKTB5XIAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2020 01 08 14 32 31" title="" data-src="/static/2020-01-08-14-32-31-0835f44d6233b95c06327214735c2b97-73362.png" data-srcset="/static/2020-01-08-14-32-31-0835f44d6233b95c06327214735c2b97-06e0b.png 200w,\n/static/2020-01-08-14-32-31-0835f44d6233b95c06327214735c2b97-70531.png 400w,\n/static/2020-01-08-14-32-31-0835f44d6233b95c06327214735c2b97-73362.png 609w" data-sizes="(max-width: 609px) 100vw, 609px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>更为关键的是，提示信息的位置智能跟随输入框。例如，我们这里把输入框的宽度改小，会看到提示信息会自动跟着往前走，如图 6-55 所示。与容器设置 position: relative 再通过 left 属性实现的定位相比，其代码更简洁，容错性更强，维护成本更低。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2020-01-08-14-35-31-61429f91a15e0825e24a6b564632606d-268c7.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 632px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 32.75316455696203%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA30lEQVQY022Q3W6DMAyFeaU+ArvennxSfyZV3LZqIaGgAk5CqGOHeam6daJHR4ll5bOOk7EoxmfPCzWDMRNOPHuKE0WDfJ1I+tkPwH8mIk6SS+oQgjzqAVR9uWGgOAeOyDKCH7AAyUJ7740x1ortMAx918nE0bmqKhHDb5aYAmZuHJ8Tvowtg5RSGBawt87s97Ddwm4nJ3m/hJ1zr2EC2OT5+i3/+nj/XK384ZAC8H/YKq3v+8ekez+Txdrj0VbVuShORXFtW1lXa13XtSyPiE3TyEd0XV+WpdQAIP026RtuIpCDmhDWwgAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2020 01 08 14 35 31" title="" data-src="/static/2020-01-08-14-35-31-61429f91a15e0825e24a6b564632606d-268c7.png" data-srcset="/static/2020-01-08-14-35-31-61429f91a15e0825e24a6b564632606d-84bc0.png 200w,\n/static/2020-01-08-14-35-31-61429f91a15e0825e24a6b564632606d-99319.png 400w,\n/static/2020-01-08-14-35-31-61429f91a15e0825e24a6b564632606d-268c7.png 632w" data-sizes="(max-width: 632px) 100vw, 632px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>此外，页面中的星号也是典型的“无依赖绝对定位”，自身绝对定位，然后通过 margin-left 负值偏移实现，从而保证所有输入信息头左对齐，同时又不会影响原先的布局，也就是星号有没有对布局没有任何影响。</p>\n<h3 id="下拉列表的定位"><a href="#%E4%B8%8B%E6%8B%89%E5%88%97%E8%A1%A8%E7%9A%84%E5%AE%9A%E4%BD%8D" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>下拉列表的定位</h3>\n<p>在实现静态下拉效果的时候，也是可以使用“无依赖绝对定位”的。当我们 focus 输入框的时候，下拉列表会呈现，如图 6-56 所示。</p>\n<p>这里，这个下拉列表的定位采用的就是“无依赖绝对定位”，相关 HTML 和 CSS 代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="36204652219766030000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<style>\n    /* 下拉列表的无依赖绝对定位 */\n    .datalist {\n        position: absolute;\n    }\n\n    /* 列表的显隐控制 */\n    .search-result {\n        display: none;\n    }\n\n    input:focus ~ .search-result {\n        display: block;\n    }\n</style>\n<input />\n<div class=&quot;search-result&quot;>\n    <div class=&quot;datalist&quot;>\n        <a href>搜索结果 1</a>\n        <a href>搜索结果 2</a>\n        <a href>搜索结果 3</a>\n    </div>\n</div>`, `36204652219766030000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n    <span class="token comment">/* 下拉列表的无依赖绝对定位 */</span>\n    <span class="token selector">.datalist</span> <span class="token punctuation">{</span>\n        <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token comment">/* 列表的显隐控制 */</span>\n    <span class="token selector">.search-result</span> <span class="token punctuation">{</span>\n        <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token selector">input:focus ~ .search-result</span> <span class="token punctuation">{</span>\n        <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token punctuation">/></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>search-result<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>datalist<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token punctuation">></span></span>搜索结果 1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token punctuation">></span></span>搜索结果 2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token punctuation">></span></span>搜索结果 3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>就一个 position: absolute 就实现了我们想要的效果，没有 left、top 定位，父元素也没有 position: relative 设定，效果就达成了，而且兼容性好到 IE6 都完美定位。</p>\n<p>除了代码少这个好处外，维护成本也在一定程度上降低了，比方说，输入框的高度发生了变化，我们不需要修改任何 CSS 代码，列表依然在输入框的底部完美对齐显示。不仅如此，没有了父元素 position: relative 限定，我们的 z-index 层级管理规则更简单了，并且也无须担心父元素设置 oveflow:hidden 会裁剪下拉列表。</p>\n<p>虽然“无依赖绝对定位”好处多多，但建议只用在静态交互效果上，比方说，导航二级菜单的显示与定位。如果是动态呈现的列表，建议还是使用 JavaScript 来计算和定位。</p>\n<h3 id="占位符效果模拟"><a href="#%E5%8D%A0%E4%BD%8D%E7%AC%A6%E6%95%88%E6%9E%9C%E6%A8%A1%E6%8B%9F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>占位符效果模拟</h3>\n<p>IE9 及其以下浏览器不支持 placeholder 占位符效果，实际开发的时候，针对这些浏览器，需要进行模拟。比较好的做法是使用<code class="language-text">&lt;label&gt;</code>标签和输入框关联并覆盖在输入框上面，好处是点击占位文字输入框天然 focus，并且不会污染输入框的 value。</p>\n<p>这里的覆盖效果也可以使用“无依赖绝对定位”实现，好处是组件化的时候适用性更广，因为不会对父级元素进行定位属性限制。用下面的代码简单演示一下实现原理：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="87603996109544130000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<style>\n    /* 和输入框一样的样式 */\n    .placeholder,\n    input {\n    }\n\n    /* 占位符元素特有样式 */\n    .placeholder {\n        position: absolute;\n    }\n</style>\n<label class=&quot;placeholder&quot; for=&quot;text&quot;>\n    占位符\n</label>\n<input id=&quot;test&quot; />`, `87603996109544130000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n    <span class="token comment">/* 和输入框一样的样式 */</span>\n    <span class="token selector">.placeholder,\n    input</span> <span class="token punctuation">{</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token comment">/* 占位符元素特有样式 */</span>\n    <span class="token selector">.placeholder</span> <span class="token punctuation">{</span>\n        <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>placeholder<span class="token punctuation">"</span></span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n    占位符\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>test<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>由于“无依赖绝对定位”本质上就是一个不占据任何空间的相对定位元素，因此这里我们让占位符元素和输入框的布局样式一模一样，再设置绝对定位，就可以和输入完美重叠定位。当然有一些样式是需要重置的，比方说，输入框经常会设置 border 边框样式，那么我们的占位符元素就需要把边框颜色设置成透明的，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="15689123809265881000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.placeholder {\n    border-color: transparent;\n}`, `15689123809265881000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.placeholder</span> <span class="token punctuation">{</span>\n    <span class="token property">border-color</span><span class="token punctuation">:</span> transparent<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<h3 id="进一步深入无依赖绝对定位"><a href="#%E8%BF%9B%E4%B8%80%E6%AD%A5%E6%B7%B1%E5%85%A5%E6%97%A0%E4%BE%9D%E8%B5%96%E7%BB%9D%E5%AF%B9%E5%AE%9A%E4%BD%8D" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>进一步深入“无依赖绝对定位”</h3>\n<p>虽然说元素 position: absolute 后的 display 计算值都是块状的，但是其定位的位置和没有设置 position: absolute 时候的位置相关。举个简单的例子，有下面两段 HTML 代码：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="44978273792184660000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<h3>\n    标题\n    <span class=&quot;follow&quot;>\n        span\n    </span>\n</h3>\n<h3>\n    标题\n    <div class=&quot;follow&quot;>\n        div\n    </div>\n</h3>`, `44978273792184660000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>\n    标题\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>follow<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n        span\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>\n    标题\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>follow<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n        div\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>其差别就在于“标题”文字后面跟随的标签，一个是内联的<code class="language-text">&lt;span&gt;</code>，还有一个是块状的<code class="language-text">&lt;div&gt;</code>，此时，显然 span 字符是跟在“标题”后面显示，div 字符则换行在“标题”下面显示，这个想必大家都知道。好，现在有如下 CSS 代码：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="41248769972827360000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.follow {\n    position: absolute;\n}`, `41248769972827360000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.follow</span> <span class="token punctuation">{</span>\n    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>虽然此时无论是内联的<code class="language-text">&lt;span&gt;</code>还是块状的<code class="language-text">&lt;div&gt;</code>，计算值都是 block，但是它们的位置还和没有应用 position:absolute 的时候一样，一个在后面，一个在下面，如图 6-57 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2020-01-08-15-06-49-d0a226f7e54492e4d694e79c7e4cd572-891f5.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 162px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 76.54320987654322%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsSAAALEgHS3X78AAAB1klEQVQoz4VSXU/iQBTldxuTjUYfVv0FbvZJ99GEaCKpRSpCsqVYwncpQpfvKe0UbMM3bfXYQdOoK+dhcnvvPXPumd7Icwie5xmGMRwOCdFNSgf9Qb8/eApgO87IsnRdN00Tbaw/EibPZrNOp4Pg8uLiz/nZ8eHB3tFJoVAQxUxKEJRHzfd9kEejEXoQfyTjbgRKtSzw8evrq7iQyPyV4nz8luOURhslTGFZ1tdkzMwKz5/Akt+S9VeyPX5aLheWSQ1qgQKTnut6W8mEEOb59+mv/d2dHz9P3jW3KzPPhqFXymVVrTU1jfUB7JHH4/EWstqo3wgCGZDJbBn0/d+zF4CRFUWh1JTlh7vkvSRltH8tQvC3N4ApTdPA/0I5NKEfzuBq/w3h5gi+6/V6s9nEfdPptNvtQgEFbALGgxQ+kWwEaLfbrVbLDPBKdl1XFMVsNpvP57FM1WqVPfhkMqGUyrIsSVIul0skEhzHJZPJdDpdLBYrlcpGeT6fwy1OKOMxESC5Xq9Xq5UVABdhkHkAx3FworrZbdu2oQnlUqmEDUMN+jzPQyeVwlILOKPRKJK1Wk1V1Vgshnk35MVigWyv18PAUEMGMazixFvAMHwiwF9EjCSaGfkFFFg+LZid798AAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2020 01 08 15 06 49" title="" data-src="/static/2020-01-08-15-06-49-d0a226f7e54492e4d694e79c7e4cd572-891f5.png" data-srcset="/static/2020-01-08-15-06-49-d0a226f7e54492e4d694e79c7e4cd572-891f5.png 162w" data-sizes="(max-width: 162px) 100vw, 162px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>假如 HTML 是下面这样的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="6346345189458047000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<h3>\n    标题\n</h3>\n<span class=&quot;follow&quot;>\n    span\n</span>\n<h3>\n    标题\n</h3>\n<div class=&quot;follow&quot;>\n    div\n</div>`, `6346345189458047000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>\n    标题\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>follow<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n    span\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>\n    标题\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>follow<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n    div\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>那么由于非绝对定位状态下 span 和 div 都在“标题”的下面，因此，这里最后的效果也同样是都在“标题”的下面。</p>\n<p>“无依赖绝对定位”的定位原理还是挺简单的，但是在实际开发的时候，有时候会遇到一点问题。</p>\n<p>首先，IE7 浏览器下，块状的<code class="language-text">&lt;div&gt;</code>“无依赖绝对定位”的定位表现如同内联的<code class="language-text">&lt;span&gt;</code>，也就是无论是块级元素还是内联元素，“无依赖绝对定位”后都和内联元素一行显示。若要保证兼容，可以在外部套一层空的<code class="language-text">&lt;div&gt;</code>标签来维持原始的块状特性。不过，因为现在很少需要兼容 IE7 浏览器，所以这不算事儿。</p>\n<p>其次，前文提到浮动和绝对定位是死对头，当“浮动”和“无依赖绝对定位”相遇的时候，就会发生一些不愉快的事情。HTML 代码如下：</p>\n<html><head></head><body><div class="gatsby-code-button-container" data-toaster-id="23989504819251905000" data-toaster-class="gatsby-code-button-toaster" data-toaster-text-class="gatsby-code-button-toaster-text" data-toaster-text="复制成功" data-toaster-duration="3500" onclick="copyToClipboard(`<div class=&quot;nav&quot;>\n    导航 1\n</div>\n<img data-src=&quot;new.png&quot; class=&quot;follow&quot; />\n<div class=&quot;nav&quot;>\n    导航 2\n</div>`, `23989504819251905000`)">\n              <div class="gatsby-code-button" title="html">\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div></body></html>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>nav<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n    导航 1\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>new.png<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>follow<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>nav<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n    导航 2\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>这里.nav 是一个浮动色块，相关 CSS 如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="3150127973221828000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.follow {\n    position: absolute;\n}\n\n.nav {\n    width: 100px;\n    line-height: 40px;\n    background-color: #333;\n    color: #fff;\n    text-align: center;\n    float: left;\n}`, `3150127973221828000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.follow</span> <span class="token punctuation">{</span>\n    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.nav</span> <span class="token punctuation">{</span>\n    <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>\n    <span class="token property">line-height</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>\n    <span class="token property">background-color</span><span class="token punctuation">:</span> #333<span class="token punctuation">;</span>\n    <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>\n    <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>\n    <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>结果在 IE 和 Chrome 浏览器下，夹在中间的<code class="language-text">&lt;img&gt;</code>在中间显示（见图 6-58 上），但是 Firefox 浏览器却是在最后显示（见图 6-58 下）。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2020-01-08-15-21-33-f036049f3c7bd8eedd6339d2c5b01878-2b946.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 194px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 69.0721649484536%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACY0lEQVQoz61S30taYRjuz2g3ChPU1ONFzNwmMifF5k2sX8YK3dFtOXSzjAnqcINuBBX8sZtudpse0Q1sV90kg9lFLqJCFMNfqOWypJIUKt1zMmrXYy+c97zf837P87x839fT6XTOzs6i0Wg4HA6FQktLS8FgMBKJ4PsR+ZahvlKRcIiiAoEARVE0Hgyura2B1W63e/Db29uTSCQcDkculw8PD8tkMiFBsAWCQZ5gqo9g83lDQ0PApVJpf38/g8GYm5sD6+Ligibv7++jweVyFQqFXq/XarUikYggCL5QyBFChxgZGdHpdCqVCh5MJtNkMt2SDw8PDQYDemq1GpkkSY1GQ2eS1JJ0qK8CIHSVSuVnvx+sy8tLmvzPQZOPj48dDofdbv9gs5nNZqvFgvrTX2GzWmjcav1ot1sXFr6Y3rdiP6/J3QNjs9nPRkffGo3Pp6ckD8Q8Hk9wFXw+f2Jy8t2scWx8TCp5yGDd1Y9PdH7X2jdksVjMYrEeyR6/0s2QLzX3B+5Bq49LB25h8MnT129mVC+mBwZEd3p7jfPztwd2enq6uLjo8XjcbjfmdzqdHo/X5/N5vXT2+/0ulws4Mpbofl9e/h8HlslkVldXkXO5XCwWw2vDILu7u5ubm8lkcmdn5+TkZHt7O5FI1Ov1fD4PEPX6+vrKykrPwcFBsVisVqu1Wg29VqsFSRDK5XKpVML76T4EbLvBcUagpFIpeuyjo6N4PJ7NZmEIf7hBBT6NRgP1+fl5pVL5dRWw3dra2tjYQHF9VdDDAj6Q7PK7Ps1mExN1ndPpdKFQgAF0sQHbgP8Bg2Y/eGv7vBwAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2020 01 08 15 21 33" title="" data-src="/static/2020-01-08-15-21-33-f036049f3c7bd8eedd6339d2c5b01878-2b946.png" data-srcset="/static/2020-01-08-15-21-33-f036049f3c7bd8eedd6339d2c5b01878-2b946.png 194w" data-sizes="(max-width: 194px) 100vw, 194px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>此处的浏览器不一致的行为表现应该属于“未定义行为”，没有谁对谁错，只是各自按照自己的渲染规则表现而已。Firefox 浏览器下的定位位置或许比较好理解，因为和没有设置 position: absolute 表现一致，符合我们对上面规则的理解。那为何 IE 和 Chrome 浏览器却在中间显示呢？我认为是这样的：浏览器对于 DOM 元素的样式渲染是从前往后、由外及内的，因此渲染顺序是先“导航 1”，再“图片”，最后是“导航 2”。当渲染到“图片”的时候，由于“导航 1”左浮动，因此内联的图片跟在后面显示，此时由于设置了 position: absolute，因此当前位置定位并不占据任何空间，再渲染“导航 2”的时候，中间的“图片”基本上跟不存在没什么区别，因此也就和“导航 1”紧密相连了，最终形成了“图片”在中间显示的样式表现。</p>\n<p>对于上述场景，如果希望各个浏览器的表现都是一样的，<code class="language-text">&lt;img&gt;</code>外层嵌套一层标签并浮动即可，注意，是外层标签浮动。由于浮动和绝对定位水火不容，本身设置浮动是没有任何效果的。</p>\n<h2 id="absolute-与-text-align"><a href="#absolute-%E4%B8%8E-text-align" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>absolute 与 text-align</h2>\n<p>按道理讲，absolute 和 float 一样，都可以让元素块状化，应该不会受控制内联元素对齐的 text-align 属性影响，但是最后的结果却出人意料，text-align 居然可以改变 absolute 元素的位置。</p>\n<p>如下简单的 HTML 和 CSS 代码：</p>\n<html><head></head><body><div class="gatsby-code-button-container" data-toaster-id="92622278779795950000" data-toaster-class="gatsby-code-button-toaster" data-toaster-text-class="gatsby-code-button-toaster-text" data-toaster-text="复制成功" data-toaster-duration="3500" onclick="copyToClipboard(`<style>\n    p {\n        text-align: center;\n    }\n\n    img {\n        position: absolute;\n    }\n</style>\n<p>\n    <img data-src=&quot;1.jpg&quot; />\n</p>`, `92622278779795950000`)">\n              <div class="gatsby-code-button" title="html">\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div></body></html>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n    <span class="token selector">p</span> <span class="token punctuation">{</span>\n        <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token selector">img</span> <span class="token punctuation">{</span>\n        <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1.jpg<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>在 Chrome 和 Firefox 浏览器下，图片在中间位置显示了，但是仅仅是在中间区域显示，并不是水平居中，如果我们给<code class="language-text">&lt;p&gt;</code>设定尺寸并添加背景色，就会看到如图 6-59 所示的效果。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2020-01-08-15-34-09-0cb3877ff1e6cf889d6fc48837f6b652-d2c27.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 240px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 53.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACKUlEQVQozzVRTWgTQRRekeLPxYhRJKmhsYIQKAiiWPHizSKeW6wJthVPQawePCmFgkh76MUipYgi6MXipUEEc9JobJOgadJd80tyU7M7+5Pd2d2Z2V1ndtPh4/G9mffN93iPs21iI4IwiwMwjrHrid2fQm7jL58x2hmwu6nVMspuZufzRpffxo7nui4nyrqkGAxyAEijKKmq5ZXfp1/f2Z9fjrRenNx6cuLt3WPTl49eO8Ut3rvVtzyMCScBpgEKBL6MQYES0BToNT4+yD4ObS2N1lfjlaX4y8nh1FjkwNBQKjljYY82S50N4IupOdUDPw3ErU/zpWeh8tpo89XIn/X419nYl8nTN0cOJadvW8h3FgduzBD4hH0kaYrlVT7M51aO1JbPZBOx9YnhlavRd9djU2OH52ZnTJuK8Z44MN/rQgSaCr1fm+kf9w+WwtE3V44vnA9PREM3zobPRfal55IwEEsDtwAw6F+SNUX3GvmF36nEt6nx3OqFzvNLpcWL20/Hsw8T39ceqdAlhHA9SWfj9SEBXQSGDz2YeQ/Ioib/68mUACDLQFGALEkqfSWOwyHsmja2kUNhmoimjNvBwl3Epuoh4tLFIuJhwiK9t2zC9gwAcBxabVmWSXP6uWEYJoQmPRD22dF0vS+KPUo0TdV1HUKDVjNxsVhst9vl8k6z2XQct1AoCILQarVq9Xqj0RAEvlKpVKvVfD7f7XZpGa3neb7T6SCE/gO+rhTPFnSSHQAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2020 01 08 15 34 09" title="" data-src="/static/2020-01-08-15-34-09-0cb3877ff1e6cf889d6fc48837f6b652-d2c27.png" data-srcset="/static/2020-01-08-15-34-09-0cb3877ff1e6cf889d6fc48837f6b652-789fe.png 200w,\n/static/2020-01-08-15-34-09-0cb3877ff1e6cf889d6fc48837f6b652-d2c27.png 240w" data-sizes="(max-width: 240px) 100vw, 240px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>虽然本示例中图片位置确实受 text-align 属性影响，但是并不是 text-align 和 absolute 元素直接发生关系，absolute 元素的 display 计算值是块状的，text-align 是不会有作用的。这里之所以产生了位置变化，本质上是“幽灵空白节点”和“无依赖绝对定位”共同作用的结果。</p>\n<p>具体的渲染原理如下：</p>\n<ol>\n<li>由于<code class="language-text">&lt;img&gt;</code>是内联水平，<code class="language-text">&lt;p&gt;</code>标签中存在一个宽度为 0、看不见摸不着的“幽灵空白节点”，也是内联水平，于是受 text-align:center 影响而水平居中显示。</li>\n<li><code class="language-text">&lt;img&gt;</code>设置了 position:absolute，表现为“无依赖绝对定位”，因此在“幽灵空白节点”后面定位显示；同时由于图片不占据空间，这里的“幽灵空白节点”当仁不让，正好在<code class="language-text">&lt;p&gt;</code>元素水平中心位置显示，于是我们就看到了图片从<code class="language-text">&lt;p&gt;</code>元素水平中间位置显示的效果。</li>\n</ol>\n<p>这是非常简约的定位表现。此时，我们只要 margin-left 一半图片宽度负值大小，就可以实现图片的水平居中效果了，与父元素 position:relative 然后定位元素设置 left:50% 的方法相比，其优势在于不需要改变父元素的定位属性，避免可能不希望出现的层级问题等。</p>\n<p>然而，IE 浏览器的支持不一样导致此方法的场景实用性打了折扣。当然，有小技巧可以使所有浏览器都完美支持，如果只需要兼容 IE Edge（移动端开发时候），额外加下面这一段 CSS 语句就可以了：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="74287608717142640000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`p:before {\n    content: \'\';\n}`, `74287608717142640000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">p:before</span> <span class="token punctuation">{</span>\n    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">\'\'</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>如果希望兼容 IE8 浏览器，则 CSS 代码还要再多一点儿：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="22795016832856720000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`p {\n    text-align: center;\n    font-size: 0.1px;\n    font-size: -webkit-calc(1px - 1px);\n}\n\np:before {\n    content: \'\\2002\';\n}\n\nimg {\n    position: absolute;\n}`, `22795016832856720000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">p</span> <span class="token punctuation">{</span>\n    <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>\n    <span class="token property">font-size</span><span class="token punctuation">:</span> 0.1px<span class="token punctuation">;</span>\n    <span class="token property">font-size</span><span class="token punctuation">:</span> <span class="token function">-webkit-calc</span><span class="token punctuation">(</span>1px - 1px<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">p:before</span> <span class="token punctuation">{</span>\n    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">\'\\2002\'</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">img</span> <span class="token punctuation">{</span>\n    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>其中，\\2002 表示某一种空格。通过插入显式的内联字符，而非借助飘渺的“幽灵空白节点”实现所有浏览器下的一致表现。</p>\n<p>需要注意的是，只有原本是内联水平的元素绝对定位后可以受 text-align 属性影响，这不难理解，因为块级元素的“无依赖绝对定位”是掉在下面显示的，水平方向上并无可“依赖”的内联元素，text-align 属性自然鞭长莫及。</p>\n<p>利用 text-align 控制 absolute 元素的定位最适合的使用场景就是主窗体右侧的“返回顶部”以及“反馈”等小布局的实现。核心区域如图 6-60 所示。图 6-60 所示的效果的核心 HTML 和 CSS 代码如下：</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2020-01-08-17-02-32-d4170b21664c83eec5eb9a40808dcbae-99660.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 277px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 45.12635379061371%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsSAAALEgHS3X78AAABGElEQVQoz5VQu06EUBTkO+3s7LSzprbaxGYbarOxMCZ2RIv1B0iAiAnvVyCAcoG9PO6yzl6CJisWTkHmTmbOHI5wmNG2bVVV9RIqQvrDgb290/uHkVRH9zjiI3yHm6YpiuLjN6CW5S7LydV1cXberKWje78/DcP5uQSolJDd7bq+uKSPT/8Lo7tnrIwi4/mFMba89l9hoKnru83mZrV63W55MW8eZ+AwxYw8z08IbilJkiiKsiwjhn5EfpqHYaCUdl3Xc0xk4ACHASNUVYXIt+ZrR1E0XRTNWAYbZlmWpimeIL7vx3E8Xb0sS/waxOkKUATTND3PMwwjSRJMdV0XiqZpYRgGQaAoiq7rUKA7jmPbtmVZ8INg7hfdnfQEv3Q1UAAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2020 01 08 17 02 32" title="" data-src="/static/2020-01-08-17-02-32-d4170b21664c83eec5eb9a40808dcbae-99660.png" data-srcset="/static/2020-01-08-17-02-32-d4170b21664c83eec5eb9a40808dcbae-e2e94.png 200w,\n/static/2020-01-08-17-02-32-d4170b21664c83eec5eb9a40808dcbae-99660.png 277w" data-sizes="(max-width: 277px) 100vw, 277px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="888175171311167400"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<style>\n    .alignright {\n        height: 0;\n        text-align: right;\n        overflow: hidden;\n    }\n\n    .alignright:before {\n        content: \'\\2002\';\n    }\n\n    .follow {\n        position: fixed;\n        bottom: 100px;\n        z-index: 1;\n    }\n</style>\n<div class=&quot;alignright&quot;>\n    <span class=&quot;follow&quot;></span>\n</div>`, `888175171311167400`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n    <span class="token selector">.alignright</span> <span class="token punctuation">{</span>\n        <span class="token property">height</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n        <span class="token property">text-align</span><span class="token punctuation">:</span> right<span class="token punctuation">;</span>\n        <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token selector">.alignright:before</span> <span class="token punctuation">{</span>\n        <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">\'\\2002\'</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token selector">.follow</span> <span class="token punctuation">{</span>\n        <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>\n        <span class="token property">bottom</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>\n        <span class="token property">z-index</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>alignright<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>follow<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>使用:before 伪元素在前面插入一个空格，此时 .alignright 设置 text-align:right，则此空格对齐主结构的右边缘显示，后面的固定定位元素（同绝对定位元素）由于“无依赖定位”特性，左边缘正好就是主结构的右边缘，天然跑到主结构的外面显示了，而这个效果正是固定在右下角的“返回顶部”以及“反馈”小按钮布局需要的效果。</p>\n<p>此方法兼容性很好，层级单纯，唯一的问题就是插入了一个空格，会占据一定的高度，这是不推荐的，最好就是有没有“返回顶部”等元素都不影响主结构的布局。所以，我们要把占据的高度抹掉，方法很简单，设置 height：0 同时 overflow:hidden 即可。</p>\n<p>此时，有人可能会惊呼：什么？设置 height:0 同时 overflow:hidden？那岂不是里面所有元素都被剪裁看不见啦？</p>\n<p>如果是普通元素确实会如此，但是对于 absolute 绝对定位以及 fixed 固定定位元素，规则要更复杂！</p>\n<h1 id="absolute-与-overflow"><a href="#absolute-%E4%B8%8E-overflow" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>absolute 与 overflow</h1>\n<p>overflow 对 absolute 元素的剪裁规则用一句话表述就是：绝对定位元素不总是被父级 overflow 属性剪裁，尤其当 overflow 在绝对定位元素及其包含块之间的时候。</p>\n<p>如果 overflow 不是定位元素，同时绝对定位元素和 overflow 容器之间也没有定位元素，则 overflow 无法对 absolute 元素进行剪裁。</p>\n<p>因此下面 HTML 中的图片不会被剪裁：</p>\n<html><head></head><body><div class="gatsby-code-button-container" data-toaster-id="95946524382508380000" data-toaster-class="gatsby-code-button-toaster" data-toaster-text-class="gatsby-code-button-toaster-text" data-toaster-text="复制成功" data-toaster-duration="3500" onclick="copyToClipboard(`<div style=&quot;overflow: hidden;&quot;>\n    <img data-src=&quot;1.jpg&quot; style=&quot;position: absolute;&quot; />\n</div>`, `95946524382508380000`)">\n              <div class="gatsby-code-button" title="html">\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div></body></html>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1.jpg<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>overflow 元素父级是定位元素也不会剪裁，例如：</p>\n<html><head></head><body><div class="gatsby-code-button-container" data-toaster-id="85579802287878160000" data-toaster-class="gatsby-code-button-toaster" data-toaster-text-class="gatsby-code-button-toaster-text" data-toaster-text="复制成功" data-toaster-duration="3500" onclick="copyToClipboard(`<div style=&quot;position: relative;&quot;>\n    <div style=&quot;overflow: hidden;&quot;>\n        <img data-src=&quot;1.jpg&quot; style=&quot;position: absolute;&quot; />\n    </div>\n</div>`, `85579802287878160000`)">\n              <div class="gatsby-code-button" title="html">\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div></body></html>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1.jpg<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>但是，如果 overflow 属性所在的元素同时也是定位元素，里面的绝对定位元素会被剪裁：</p>\n<html><head></head><body><div class="gatsby-code-button-container" data-toaster-id="12846379071559766000" data-toaster-class="gatsby-code-button-toaster" data-toaster-text-class="gatsby-code-button-toaster-text" data-toaster-text="复制成功" data-toaster-duration="3500" onclick="copyToClipboard(`<div style=&quot;overflow: hidden; position: relative;&quot;>\n    <img data-src=&quot;1.jpg&quot; style=&quot;position: absolute;&quot; />\n    <!-- 剪裁 -->\n</div>`, `12846379071559766000`)">\n              <div class="gatsby-code-button" title="html">\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div></body></html>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span> <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1.jpg<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>\n    <span class="token comment">&lt;!-- 剪裁 --></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>如果 overflow 元素和绝对定位元素之间有定位元素，也会被剪裁：</p>\n<html><head></head><body><div class="gatsby-code-button-container" data-toaster-id="21278971767298140000" data-toaster-class="gatsby-code-button-toaster" data-toaster-text-class="gatsby-code-button-toaster-text" data-toaster-text="复制成功" data-toaster-duration="3500" onclick="copyToClipboard(`<div style=&quot;overflow: hidden;&quot;>\n    <div style=&quot;position: relative;&quot;>\n        <img data-src=&quot;1.jpg&quot; style=&quot;position: absolute;&quot; />\n        <!-- 剪裁 -->\n    </div>\n</div>`, `21278971767298140000`)">\n              <div class="gatsby-code-button" title="html">\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div></body></html>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1.jpg<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>\n        <span class="token comment">&lt;!-- 剪裁 --></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>如果 overflow 的属性值不是 hidden 而是 auto 或者 scroll，即使绝对定位元素高宽比 overflow 元素高宽还要大，也都不会出现滚动条。例如，下面的 HTML 和 CSS 代码：</p>\n<html><head></head><body><div class="gatsby-code-button-container" data-toaster-id="89431509952457600000" data-toaster-class="gatsby-code-button-toaster" data-toaster-text-class="gatsby-code-button-toaster-text" data-toaster-text="复制成功" data-toaster-duration="3500" onclick="copyToClipboard(`<style>\n    .box {\n        width: 300px;\n        height: 100px;\n        background-color: #f0f3f9;\n        overflow: auto;\n    }\n\n    .box > img {\n        width: 256px;\n        height: 192px;\n        position: absolute;\n    }\n</style>\n<div class=&quot;box&quot;>\n    <img data-src=&quot;1.jpg&quot; />\n</div>`, `89431509952457600000`)">\n              <div class="gatsby-code-button" title="html">\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div></body></html>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n    <span class="token selector">.box</span> <span class="token punctuation">{</span>\n        <span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>\n        <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>\n        <span class="token property">background-color</span><span class="token punctuation">:</span> #f0f3f9<span class="token punctuation">;</span>\n        <span class="token property">overflow</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token selector">.box > img</span> <span class="token punctuation">{</span>\n        <span class="token property">width</span><span class="token punctuation">:</span> 256px<span class="token punctuation">;</span>\n        <span class="token property">height</span><span class="token punctuation">:</span> 192px<span class="token punctuation">;</span>\n        <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1.jpg<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>图片高度 256px 比容器 .box 高度 100px 明显高出了一截，但是，没有滚动条出现。</p>\n<p>实际开发的时候，绝对定位元素和非绝对定位元素往往可能混杂在一起，虽然绝对定位元素不能让滚动条出现，但是非绝对定位元素可以，于是，就可能出现另外一种很有特色的现象，即当容器滚动的时候，绝对定位元素微丝不动，不跟着滚动，表现类似 fixed 固定定位，如图 6-61 所示，滚动到头和滚动到尾，图片的位置都是一样的。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2020-01-09-09-53-36-71c9d78c18695e1d96cbd0597a914e96-26430.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 270px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 89.62962962962962%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEQElEQVQ4y12ReUzTdxjGf9mRzE7H6EUp094UNDrGlMGuiLoh2ZQwtiVkKiQbg4Izgcg6mLSywuQUHTOuAholiiLHuKW/lmPd5CqlpQel1EJbel9QkB7QX1cJ+2efP97km7xP3u/zPMCKUaGc6lcIOKoZjmWB61BznSquQ8kzz3MdC6BZwVVOcoSjg2L+gHr2qWvtucfrgyAoEASCgOme4rpzsMoz2Os54b1X8GAlASzD9RbuY2diOwuw/SU4VjI6/310wcd7LnwVPy6YVS8tr9uskMkIBSBA9oTRTQ9tyCe3XsKLbpLAajJYQeayyM15+OsZ+5LiwogYxNEozJdvv5n6yUcSuUooltp0Wu+9u26JBFCCzNYCeGMhqZtBGKkiT9YQu38m9RWT2vNxF4+HfxYZRsUikAgEHLYr8cNEz1ZAJp+3Wa3BX/usNmBxlMktQfSUUB4VEf8sIQ7VkMfqKUOlpN58QsfXOG46oTZx7/5w1Ou7Xos7HC9VqLU6g3tj44XlQABQcEuHf0WDVdF9FdSByujB36I5TQf4N/cPM6k3TuHrPye0niYwEvAxyND4IwmTAolOb/L5vDuBLQwWDjNe+rsKPXENOcNGj/2A4iQhJwvRTzMQj5PgnFPw0RTEtYTQg7uBg7GxrtX1jQ23378V2AawSB/K2zOfDZzX/5Vn7MtT02iSjOzxipzRchq/NOefX7JFtbS7pdnZOWfKWKXb96DAfwCqiYcdV882VWb3/5El7cpV8XInu86Pt+RONeeMPaDNduZ2VGaxi769XXK2p5EVDMzuXPF6PTtiaS+96buX6zJRt2gIsAIzXB3GK8d0XUTfSg9to8Ebs+Bp0bDv39mTfeSV9E/fXVg0WKyOzU3fjmcFyOz8Cd5SHNnGIHFrqLxaypNyMq+c+riAwEh9ixiB2h0Cx2PRMRFvHPsgXiiem5tXuVZXX2j9fmAOZHQXw1uKSM0/EvuYJJBFaadTOvLJbRfwV5L33jmJ++YQBomAh8BgMYcOC0XyGZHUZrdBWq1bJgPk4OWOInTXpch+JolbRh6pjhxvoATb7qWTbqfi2lIIDSdxyZQwOAwWF/uebH5Rpnxmlcs89+9vOp2AZID1qAjbV3WAX0cdvhE18juVXxMlYUcP0SPvfUG8k0Z6kEaqP0FODA89euyEDwo4Vlzejec7galB+ujlVydqMWI2SsEOFx1H8HDwoXMoTgqyLRE5kIQYOY1iJiAiQoC4hPigwA/5g20FDQcH4FnRrOkF60ah1ylaV0+t86ed48Jl8bRWPG0QC4wSgVMpVEmnhKIJpULx/57dHu+cUm1fWdMum4Nvg82yaDJYHA6D2WJ3rdlWXRq90Wpz6HTLivkXLC4t6bfRarWA1+vWL2usFpNOuwT5txxWq0GnMxkMWs2Sw24zGQ06jcZhtwdXlUqlTqczGo1ms9lisZhMpn8B6+aaUmhKxxoAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2020 01 09 09 53 36" title="" data-src="/static/2020-01-09-09-53-36-71c9d78c18695e1d96cbd0597a914e96-26430.png" data-srcset="/static/2020-01-09-09-53-36-71c9d78c18695e1d96cbd0597a914e96-5f479.png 200w,\n/static/2020-01-09-09-53-36-71c9d78c18695e1d96cbd0597a914e96-26430.png 270w" data-sizes="(max-width: 270px) 100vw, 270px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>由于 position:fixed 固定定位元素的包含块是根元素，因此，除非是窗体滚动，否则上面讨论的所有 overflow 剪裁规则对固定定位都不适用。这一点后面还会提及。</p>\n<h2 id="overflow-的作用"><a href="#overflow-%E7%9A%84%E4%BD%9C%E7%94%A8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>overflow 的作用</h2>\n<p>作用一是解决实际问题。例如上一节最后“返回顶部”的案例，保证高度为 0，同时里面的定位内容不会被剪裁，或者在局部滚动的容器中模拟近似 position:fixed 的效果。作用二是在遇到类似现象的时候知道问题所在，可以“对症下药”，快速解决问题。</p>\n<p>然而，虽然实际开发的时候，对于局部滚动，我们经常会有元素不跟随滚动的需求，如表头固定，但是从可维护性的角度讲，建议还是将这个表头元素移动到滚动容器外进行模拟，因为我们总会不小心在某一层标签添加个类似 position:relative 的声明，此时，原本的不跟随滚动的表头会因为包含块的变化变得可以滚动了，这显然是我们不愿意看到的。当然，如果 HTML 结构被限制无法修改，则利用 overflow 滚动 absolute 元素不滚动的特性来实现表头固定的效果则是上上之选，会让人眼前一亮！</p>\n<p>在 CSS 世界中，上面说的这些几乎都是完美无瑕的，但是，随着 CSS3 新世界到来的冲击，规则在不经意间发生了一些变化，其中最明显的就是 transform 属性对 overflow 剪裁规则的影响，CSS3 新世界中 transform 属性似乎扮演了原本“定位元素”的角色，但是这种角色扮演并不完全。什么意思呢？我们先看下面我统计的出现 transform 属性时 overflow 剪裁绝对定位元素的数据。</p>\n<p>overflow 元素自身 transform：</p>\n<ul>\n<li>IE9 及以上版本浏览器、Firefox 和 Safari（OS X、iOS）剪裁；</li>\n<li>Chrome 和 Opera 不剪裁。</li>\n</ul>\n<p>overflow 子元素 transform：</p>\n<ul>\n<li>IE9 及以上版本浏览器、Firefox 和 Safari（OS X、iOS）剪裁；</li>\n<li>Chrome 和 Opera 剪裁。</li>\n</ul>\n<p>可以看到 overflow 元素自身 transform 的时候，Chrome 和 Opera 浏览器下的 overflow 剪裁是无效的，这是唯一和有定位属性时的 overflow 剪裁不一样的地方，因此才有“角色扮演并不完全”的说法。</p>\n<p>transform 除了改变 overflow 属性原有规则，对层叠上下文以及 position:fixed 的渲染都有影响。因此，当大家遇到 absolute 元素被剪裁或者 fixed 固定定位失效时，可以看看是不是 transform 属性在作祟。</p>\n<h1 id="absolute-与-clip"><a href="#absolute-%E4%B8%8E-clip" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>absolute 与 clip</h1>\n<p>CSS 世界中有些属性或者特性必须和其他属性一起使用才有效，比方说剪裁属性 clip。clip 属性要想起作用，元素必须是绝对定位或者固定定位，也就是 position 属性值必须是 absolute 或者 fixed。</p>\n<p>clip 属性语法如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="8635215223539405000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`clip: rect(top right bottom left);`, `8635215223539405000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">clip</span><span class="token punctuation">:</span> <span class="token function">rect</span><span class="token punctuation">(</span>top right bottom left<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>实际上，标准语法应该是：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="98668661067662880000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`clip: rect(top, right, bottom, left);`, `98668661067662880000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">clip</span><span class="token punctuation">:</span> <span class="token function">rect</span><span class="token punctuation">(</span>top<span class="token punctuation">,</span> right<span class="token punctuation">,</span> bottom<span class="token punctuation">,</span> left<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>但是使用没有逗号的语法比较好，因为其兼容性更好，<strong>IE6</strong> 和 <strong>IE7</strong> 也支持，而且字符更少。</p>\n<p>就顺序而言，top→right→bottom→left 在 CSS 世界中是一脉相承的，和 margin/border-width 等属性的 4 个值的顺序一样，都是从 top 开始，顺时针旋转。不过这里的 4 个值有一个明显不一样的地方，就是不能缩写，且和 border-width 类似，是不支持百分比值的。</p>\n<p>那具体是如何剪裁的呢？我们看一个例子，CSS 如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="31733606807769555000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`clip: rect(30px 200px 200px 20px);`, `31733606807769555000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">clip</span><span class="token punctuation">:</span> <span class="token function">rect</span><span class="token punctuation">(</span>30px 200px 200px 20px<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>可以想象，我们手中有一把剪刀，面前有一块画布，rect(30px 200px 200px 20px) 表示的含义就是：距离画布上边缘 30px 的地方剪一刀，距离画布右边缘 200px 的地方剪一刀，距离画布下边缘 200px 的地方剪一刀，距离画布左边缘 20px 的地方剪一刀。最终我们就得到一个新的剪裁好的矩形画布，如图 6-62 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2020-01-16-16-12-27-74a6447b709808ca2e067249cc4573cf-16a51.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 324px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 115.12345679012346%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAIAAACEf/j0AAAACXBIWXMAAAsSAAALEgHS3X78AAADfklEQVQ4y6WT2U8TQRjAR+2xbTlasJWqiUeiPqBIi5xVH9QWEegBclQo3hofjBqjMfoH+FCtRKHQ7S6WakQCoiZq9EHt7vaCKthQNEBrrYKGhBoTXqV1Cq1b4hETN7/MfvPl+81+O5kB4cCbMaon6LwftPcm857qgdAZOHX2BVwPYBB03AsQXd8mRkG/8WSzAmBKBCsF2G4avCw2mhNJvBSYKtltmpQOBejYw2jbBoZ79cBluWjQivCm1XjdMrw+K4ZWjNUK75zI7bsg79y/FqsT4fVivE5k1q0yHl6HaoXmxuUtGq73kRG4sbMtSo5tu4gsSCUK02iK0qmtmWQxPz4tSLHJhNa9YlyD3KxObS8Fww+aQT962riHQZYIHFLEnsehkXIoCZvKSySlbKqQf1stxCuXWFQcdCfw3TdA+YyxnEnKMmAFtYX7R/IQslBgVWVCuVPNNe2C8rWEvDWTlvN5NMmyTNilXXOzimNRc9CEfNpYwSJKBJSENVfHIyUsYtMiImcJuZlBza8IV5GwHPLVj8/v7j22waJC4rLbdMpUnT54ZKd7xwpSipAS9kDFBu8xxVBjyasaib04Pe7nIUSR4JZqaYeSkfzlWNv2HSsdBamwiJSy3YpVgw3Fr/dKPKpsexEtk1DWiOZk7gKZKOHbpUi87VwWsREQOYvJnETbf5cX7HY+JOU3G/ZP8k/+USZkGbBDEv5zMlCAJGK4Ybd/kWMnzF4kcOUiTgknGXch31WQ5pjP57Id+fET1vnzhDmtlwzaZd01a7uV4m7Vchql+OHR/Kfnyvt02Xcrs+C0q3pN+8H1pn0iVLfiRhXP+7gNDKBnriuZWB0fU7MwDXsBKia8BlgVEovVTLQ2zaQVWZRMi4aLyufa9pjPtqiRztoM2Aw8tAvQ8OhYhXTUCLCGLKsasVanwss/Am+Vq/WkQQ7MFYgZjorfg8JRDtrLWa1qHgywMkarDHh79MD/4tazKzpb82GbXme70jQ/ElebiPlY3xRLwgJ948trh55fP07oGwnDgReXaz55noDofzxg9vt3+PoQfO9yOj6GPgT84+/e+qKR2akvn/vdrre+4RHf8CvPgGeg/92I79PHkHdo8NvXcDQaiczOgkgkAuXp6elAIDA5ORkKhfx+P8yEw+Hx8XE4nZiYCAaDo6OjsGBqampsbGxmZiYasyM/AMl5gzKQvC3DAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2020 01 16 16 12 27" title="" data-src="/static/2020-01-16-16-12-27-74a6447b709808ca2e067249cc4573cf-16a51.png" data-srcset="/static/2020-01-16-16-12-27-74a6447b709808ca2e067249cc4573cf-6752f.png 200w,\n/static/2020-01-16-16-12-27-74a6447b709808ca2e067249cc4573cf-16a51.png 324w" data-sizes="(max-width: 324px) 100vw, 324px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h2 id="重新认识的-clip-属性"><a href="#%E9%87%8D%E6%96%B0%E8%AE%A4%E8%AF%86%E7%9A%84-clip-%E5%B1%9E%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>重新认识的 clip 属性</h2>\n<h3 id="fixed-固定定位的剪裁"><a href="#fixed-%E5%9B%BA%E5%AE%9A%E5%AE%9A%E4%BD%8D%E7%9A%84%E5%89%AA%E8%A3%81" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>fixed 固定定位的剪裁</h3>\n<p>对于普通元素或者绝对定位元素，想要对其进行剪裁，我们可以利用语义更明显的 overflow 属性，但是对于 position:fixed 元素，overflow 属性往往就力不能及了，因为 fixed 固定定位元素的包含块是根元素，除非是根元素滚动条，普通元素的 overflow 是根本无法对其进行剪裁的。怎么办呢？此时就要用到名不经传的 clip 属性了。再嚣张的固定定位，clip 属性也能立马将它剪裁得服服帖帖的。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="9553333818413945000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.fixed-clip {\n    position: fixed;\n    clip: rect(30px 200px 200px 20px);\n}`, `9553333818413945000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.fixed-clip</span> <span class="token punctuation">{</span>\n    <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>\n    <span class="token property">clip</span><span class="token punctuation">:</span> <span class="token function">rect</span><span class="token punctuation">(</span>30px 200px 200px 20px<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="最佳可访问性隐藏"><a href="#%E6%9C%80%E4%BD%B3%E5%8F%AF%E8%AE%BF%E9%97%AE%E6%80%A7%E9%9A%90%E8%97%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>最佳可访问性隐藏</h3>\n<p>所谓“可访问性隐藏”，指的是虽然内容肉眼看不见，但是其他辅助设备却能够进行识别和访问的隐藏。</p>\n<p>举个例子，很多网站左上角都有包含自己网站名称的标识（logo），而这些标识一般都是图片，为了更好地 SEO 以及无障碍识别，我们一般会使用<code class="language-text">&lt;h1&gt;</code>标签写上网站的名称，代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="78541791446901600000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<a href=&quot;/&quot; class=&quot;logo&quot;>\n    <h1>CSS 世界</h1>\n</a>`, `78541791446901600000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>logo<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>CSS 世界<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>如何隐藏<code class="language-text">&lt;h1&gt;</code>标签中的“CSS 世界”这几个文字，通常有以下一些技术选型。</p>\n<ul>\n<li>\n<p>下策是 display: none 或者 visibility: hidden 隐藏，因为屏幕阅读设备会忽略这里的文字。</p>\n</li>\n<li>\n<p>text-indent 缩进是中策，但文字如果缩进过大，大到屏幕之外，屏幕阅读设备也是不会读取的。</p>\n</li>\n<li>\n<p>color: transparent 是移动端上策，但却是桌面端中策，因为原生 IE8 浏览器并不支持它。color: transparent 声明，很难用简单的方式阻止文本被框选。</p>\n</li>\n<li>\n<p>clip 剪裁隐藏是上策，既满足视觉上的隐藏，屏幕阅读设备等辅助设备也支持得很好。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="35416908930047853000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.logo h1 {\n    position: absolute;\n    clip: rect(0 0 0 0);\n}`, `35416908930047853000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.logo h1</span> <span class="token punctuation">{</span>\n    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n    <span class="token property">clip</span><span class="token punctuation">:</span> <span class="token function">rect</span><span class="token punctuation">(</span>0 0 0 0<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n</ul>\n<p>clip 剪裁被我称为“最佳可访问性隐藏”的另外一个原因就是，它具有更强的普遍适应性，任何元素、任何场景都可以无障碍使用。例如，我定义一个如下的 CSS 语句块：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="96371061012657780000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.clip {\n    position: absolute;\n    clip: rect(0 0 0 0);\n}`, `96371061012657780000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.clip</span> <span class="token punctuation">{</span>\n    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n    <span class="token property">clip</span><span class="token punctuation">:</span> <span class="token function">rect</span><span class="token punctuation">(</span>0 0 0 0<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>就可以整站使用，哪里需要“可访问性隐藏”就加一个类名 .clip 即可，无论是图片、文字还是块级元素，都可以满足隐藏需求（与文字透明、缩进等方法相比）。同时，clip 语法简单，功能单一，与其他 CSS 属性相比，和元素原本 CSS 样式冲突的概率更低。</p>\n<p>不仅如此，元素原本的行为特性也很好用。例如，依然可以被 focus，而且非常难得的是就地剪裁，因为属于“无依赖的绝对定位”。这一点很重要，我们来看下面这个实用案例。</p>\n<p>如果<code class="language-text">&lt;form&gt;</code>表单元素里面有一个 type 为 submit 或者 image 类型的按钮，那么表单自动有回车提交行为，可以节约大量啰嗦的键盘相关的事件的代码。但是，submit 类型按钮在 IE7 下有黑框，很难所有浏览器（包括 Firefox 在内的浏览器）UI 完全一致，对视觉呈现是个一挑战。于是就有了下面这个使用<code class="language-text">&lt;label&gt;</code>元素李代桃僵的经典策略：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="36391106541420835000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<form>\n    <input type=&quot;submit&quot; id=&quot;someID&quot; class=&quot;clip&quot; />\n    <label for=&quot;someID&quot;>提交</label>\n</form>`, `36391106541420835000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>someID<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>clip<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>someID<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>提交<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>原本的 submit 按钮隐藏，肉眼所见的按钮 UI 实际上是<code class="language-text">&lt;label&gt;</code>标签渲染。由于<code class="language-text">&lt;label&gt;</code>是非替换元素，没有内置的 UI，因此兼容性非常好。</p>\n<p>这里使用的 clip 剪裁隐藏是我工作这么多年大浪淘沙筛选后的最佳实践，有对比才能显出好在何处。</p>\n<ul>\n<li>\n<p>display:none 或者 visibility:hidden 隐藏有两个问题，一个是按钮无法被 focus 了，另外一个是 IE8 浏览器下提交行为丢失，原因应该与按钮 focus 特性丢失有关。</p>\n</li>\n<li>\n<p>透明度 0 覆盖也是一个不错的实践。如果是移动端项目，建议这么做；但如果是桌面端项目，则完全没有必要。使用透明度 0 覆盖的问题是每一个场景都需要根据环境的不同重新定位，以保证点击区域的准确性，成本较高，但 clip 隐藏直接用一个类名加一下就好。</p>\n</li>\n<li>\n<p>还有一种比较具有适用性的“可访问隐藏”是下面这种屏幕外隐藏：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="59206188758577370000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.abs-out {\n    position: absolute;\n    left: -999px;\n    top: -999px;\n}`, `59206188758577370000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.abs-out</span> <span class="token punctuation">{</span>\n    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n    <span class="token property">left</span><span class="token punctuation">:</span> -999px<span class="token punctuation">;</span>\n    <span class="token property">top</span><span class="token punctuation">:</span> -999px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>然而，在本例中，会出现一个比较麻烦的问题。当一个控件元素被 focus 的时候，浏览器会自动改变滚动高度，让这个控件元素在屏幕内显示。假如说我们的<code class="language-text">&lt;label&gt;</code>“提交”按钮在第二屏，则点击按钮的时候浏览器会自动跳到第一屏置顶，因为按钮隐藏在了屏幕外，于是发生了非常糟糕的体验问题。而 clip 就地剪裁，就不会有“页面跳动”的体验问题。于是，权衡成本和效果，clip 隐藏成为了最佳选择，特别是对于桌面端项目。</p>\n</li>\n</ul>\n<h2 id="深入了解-clip-的渲染"><a href="#%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3-clip-%E7%9A%84%E6%B8%B2%E6%9F%93" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>深入了解 clip 的渲染</h2>\n<p>尝试了解 clip 属性是如何渲染的，我们先看一个示例：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="66348498532109380000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.box {\n    width: 300px;\n    height: 100px;\n    background-color: #f0f3f9;\n    position: relative;\n    overflow: auto;\n}\n\n.box > img {\n    width: 256px;\n    height: 192px;\n    position: absolute;\n}`, `66348498532109380000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.box</span> <span class="token punctuation">{</span>\n    <span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>\n    <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>\n    <span class="token property">background-color</span><span class="token punctuation">:</span> #f0f3f9<span class="token punctuation">;</span>\n    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>\n    <span class="token property">overflow</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.box > img</span> <span class="token punctuation">{</span>\n    <span class="token property">width</span><span class="token punctuation">:</span> 256px<span class="token punctuation">;</span>\n    <span class="token property">height</span><span class="token punctuation">:</span> 192px<span class="token punctuation">;</span>\n    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>此时 .box 为定位元素，因此滚动条显示得很好，如图 6-63 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2020-01-16-16-25-45-50d52f188a61c8d0054e09e3e2c102c1-b8c76.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 17.914691943127963%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA4ElEQVQI12M4PD/x1f7sO6szTy/JXFwbu2Ve96dvP//9/fsfBn7++vvl2++v35HQjz8fPn7++/cvw+ZChuu9fKequOvs2KUYGLyc7N9//Pr3z59/YADU/Pnbr7cffrz7CEff33/6+fzF69+/fzFcX+DwaJ3n4xUeZyo8JgZZFGTn//77H8Xm3/++fP/77effbz/+fv3x98v3P0CXfQeK/vvH8OzZ048fP7x48fzpkyevgeTjx1++fgXqef369atXr96+ffvs2TMg4ykQPHv25s2bz58/P3z48MGDBy9evAAAPuHLMXIsk/gAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2020 01 16 16 25 45" title="" data-src="/static/2020-01-16-16-25-45-50d52f188a61c8d0054e09e3e2c102c1-fee1c.png" data-srcset="/static/2020-01-16-16-25-45-50d52f188a61c8d0054e09e3e2c102c1-a67b7.png 200w,\n/static/2020-01-16-16-25-45-50d52f188a61c8d0054e09e3e2c102c1-0b187.png 400w,\n/static/2020-01-16-16-25-45-50d52f188a61c8d0054e09e3e2c102c1-fee1c.png 800w,\n/static/2020-01-16-16-25-45-50d52f188a61c8d0054e09e3e2c102c1-b8c76.png 1055w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>如果对图片进行 clip 剪裁，那效果又将怎样呢？</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="60695261156601730000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.box > img {\n    width: 256px;\n    height: 192px;\n    position: absolute;\n    clip: rect(0 0 0 0);\n}`, `60695261156601730000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.box > img</span> <span class="token punctuation">{</span>\n    <span class="token property">width</span><span class="token punctuation">:</span> 256px<span class="token punctuation">;</span>\n    <span class="token property">height</span><span class="token punctuation">:</span> 192px<span class="token punctuation">;</span>\n    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n    <span class="token property">clip</span><span class="token punctuation">:</span> <span class="token function">rect</span><span class="token punctuation">(</span>0 0 0 0<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>图片显然看不见了，但是注意，在 Chrome 浏览器下，.box 元素的滚动条依旧存在，如图 6-64 所示。</p>\n<p>它说明，至少在 Chrome 浏览器下，clip 仅仅是决定了哪一部分是可见的，对于原来占据的空间并无影响。然而，并不是所有浏览器都这么认为，在 IE 和 Firefox 浏览器下是没有滚动条的，只有光秃秃的一小撮背景色在那里。这又是“未定义行为”的表现，看起来 IE 和 Firefox 对于 clip 渲染采用的是另外的方式。</p>\n<p>但是无论怎样，下面这些特性大家的认识都是一致的：使用 clip 进行剪裁的元素其 clientWidth 和 clientHeight 包括样式计算的宽高都还是原来的大小，从这一点看，Chrome 的渲染似乎更合理。虽然尺寸还是原来的尺寸，但是，隐藏的区域是无法影响我们的点击行为的，说明 clip 隐藏还是很干脆的。</p>\n<p>最后总结一下：clip 隐藏仅仅是决定了哪部分是可见的，非可见部分无法响应点击事件等；然后，虽然视觉上隐藏，但是元素的尺寸依然是原本的尺寸，在 IE 浏览器和 Firefox 浏览器下抹掉了不可见区域尺寸对布局的影响，Chrome 浏览器却保留了。</p>\n<p>Chrome 浏览器的这种特性表现实际上让 clip 隐藏有了瑕疵，好在通常使用场景是看不到这个差异的，故影响甚微。</p>\n<h1 id="absolute-的流体特性"><a href="#absolute-%E7%9A%84%E6%B5%81%E4%BD%93%E7%89%B9%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>absolute 的流体特性</h1>\n<h2 id="当-absolute-遇到-lefttoprightbottom-属性"><a href="#%E5%BD%93-absolute-%E9%81%87%E5%88%B0-lefttoprightbottom-%E5%B1%9E%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>当 absolute 遇到 left/top/right/bottom 属性</h2>\n<p>当 absolute 遇到 left/top/right/bottom 属性的时候，absolute 元素才真正变成绝对定位元素。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="38775681595566326000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.box {\n    position: absolute;\n    left: 0;\n    top: 0;\n}`, `38775681595566326000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.box</span> <span class="token punctuation">{</span>\n    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n    <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>表示相对于绝对定位元素包含块的左上角对齐，此时原本的相对特性丢失。但是，如果我们仅设置了一个方向的绝对定位，又会如何呢？例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="65700338857531700000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.box {\n    position: absolute;\n    left: 0;\n}`, `65700338857531700000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.box</span> <span class="token punctuation">{</span>\n    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>此时，水平方向绝对定位，但垂直方向的定位依然保持了相对特性。</p>\n<h2 id="absolute-的流体特性-1"><a href="#absolute-%E7%9A%84%E6%B5%81%E4%BD%93%E7%89%B9%E6%80%A7-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>absolute 的流体特性</h2>\n<p>说到流体特性，我们通常第一反应就是<code class="language-text">&lt;div&gt;</code>之类的普通块级元素。实际上，绝对定位元素也具有类似的流体特性，当然，不是默认就有的，而是在特定条件下才具有，这个条件就是“对立方向同时发生定位的时候”。</p>\n<p>left/top/right/bottom 是具有定位特性元素专用的 CSS 属性，其中 left 和 right 属于水平对立定位方向，而 top 和 bottom 属于垂直对立定位方向。</p>\n<p>当一个绝对定位元素，其对立定位方向属性同时有具体定位数值的时候，流体特性就发生了。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="81435698624058440000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<style>\n    .box {\n        position: absolute;\n        left: 0;\n        right: 0;\n    }\n</style>\n<div class=&quot;box&quot;></div>`, `81435698624058440000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n    <span class="token selector">.box</span> <span class="token punctuation">{</span>\n        <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n        <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n        <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>如果只有 left 属性或者只有 right 属性，则由于包裹性，此时 .box 宽度是 0。但是在本例中，因为 left 和 right 同时存在，所以宽度就不是 0，而是表现为“格式化宽度”，宽度大小自适应于 .box 包含块的 padding box，也就是说，如果包含块 padding box 宽度发生变化，.box 的宽度也会跟着一起变。</p>\n<p>因此，假设 .box 元素的包含块是根元素，则下面的代码可以让 .box 元素正好完全覆盖浏览器的可视窗口，并且如果改变浏览器窗口大小，.box 会自动跟着一起变化：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="86546473842025990000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.box {\n    position: absolute;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n}`, `86546473842025990000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.box</span> <span class="token punctuation">{</span>\n    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n    <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n    <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n    <span class="token property">bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>绝对定位元素的这种流体自适应特性从 IE7 就开始支持了，但是出于历史习惯或者其他什么原因，很多同行依然使用下面这样的写法：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="70293192915763995000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.box {\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n}`, `70293192915763995000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.box</span> <span class="token punctuation">{</span>\n    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n    <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>\n    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>好像也能覆盖浏览器的可视窗口，并且用得挺好。那问题来了：这两种实现有什么区别呢？</p>\n<p>乍一看，效果都是一样的，但是骨子里却已经严重分化了。后者，也就是设定宽高都是 100% 的那个 .box，实际上已经完全丧失了流动性，我们可以通过添加简单的 CSS 声明让大家一眼就看出差别。例如，对两者都添加 padding: 30px：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="65102413914549430000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.box {\n    position: absolute;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    padding: 30px;\n    /* 或 margin: 30px; */\n}\n\n.box {\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    padding: 30px;\n    /* 或 margin: 30px; */\n}`, `65102413914549430000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.box</span> <span class="token punctuation">{</span>\n    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n    <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n    <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n    <span class="token property">bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n    <span class="token property">padding</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>\n    <span class="token comment">/* 或 margin: 30px; */</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.box</span> <span class="token punctuation">{</span>\n    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n    <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>\n    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>\n    <span class="token property">padding</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>\n    <span class="token comment">/* 或 margin: 30px; */</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>前者此时宽高依然是窗体可视区域的宽高，但是，后者此时的尺寸是 100%+60px，多出了 60px。有人可能会立马想到使用 box-sizing: border-box，这样确实可以让 padding 表现保持一致，但是，如果添加的是 margin:30px 呢？</p>\n<p>前者自动上下左右留白 30px，但是后者的布局已经跑到窗体外面去了，并不支持 margin box 的 box-sizing 此时也无能为力。</p>\n<p>通过上面几个例子可以看到，设置了对立定位属性的绝对定位元素的表现神似普通的 <code class="language-text">&lt;div&gt;</code> 元素，无论设置 padding 还是 margin，其占据的空间一直不变，变化的就是 content box 的尺寸，这就是典型的流体表现特性。</p>\n<p>所以，如果想让绝对定位元素宽高自适应于包含块，没有理由不使用流体特性写法，除非是替换元素的拉伸。而绝对定位元素的这种流体特性比普通元素要更强大，普通元素流体特性只有一个方向，默认是水平方向，但是绝对定位元素可以让垂直方向和水平方向同时保持流动性。</p>\n<p>有人可能还没意识到垂直方向也保持流动性的好处，实际上，其对我们的布局非常有价值。举个最简单的例子，因为子元素的 height 百分比值可以生效了（IE8 及以上版本浏览器），所以高度自适应、高度等比例布局等效果都可以从容实现了。</p>\n<h2 id="absolute-的-marginauto-居中"><a href="#absolute-%E7%9A%84-marginauto-%E5%B1%85%E4%B8%AD" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>absolute 的 margin:auto 居中</h2>\n<p>当绝对定位元素处于流体状态的时候，各个盒模型相关属性的解析和普通流体元素都是一模一样的，margin 负值可以让元素的尺寸更大，并且可以使用 margin:auto 让绝对定位元素保持居中。</p>\n<p>绝对定位元素的 margin:auto 的填充规则和普通流体元素的一模一样：</p>\n<ul>\n<li>如果一侧定值，一侧 auto，auto 为剩余空间大小；</li>\n<li>如果两侧均是 auto，则平分剩余空间。</li>\n</ul>\n<p>唯一的区别在于，绝对定位元素 margin:auto 居中从 IE8 浏览器开始支持，而普通元素的 margin:auto 居中很早就支持了。</p>\n<p>如果项目不需要管 IE7 浏览器的话，下面这种绝对定位元素水平垂直居中用法就可以直接淘汰了：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="68160303927580656000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.element {\n    width: 300px;\n    height: 200px;\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    margin-left: -150px; /* 宽度的一半 */\n    margin-top: -100px; /* 高度的一半 */\n}`, `68160303927580656000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.element</span> <span class="token punctuation">{</span>\n    <span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>\n    <span class="token property">height</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>\n    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n    <span class="token property">left</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>\n    <span class="token property">top</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>\n    <span class="token property">margin-left</span><span class="token punctuation">:</span> -150px<span class="token punctuation">;</span> <span class="token comment">/* 宽度的一半 */</span>\n    <span class="token property">margin-top</span><span class="token punctuation">:</span> -100px<span class="token punctuation">;</span> <span class="token comment">/* 高度的一半 */</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>如果绝对定位元素的尺寸是已知的，也没有必要使用下面这种用法，因为按照我的经验，在有些场景下，百分比 transform 会让 iOS 微信闪退，还是尽量避免的好。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="16684104460894767000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.element {\n    width: 300px;\n    height: 200px;\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%); /* 50%为自身尺寸的一半 */\n}`, `16684104460894767000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.element</span> <span class="token punctuation">{</span>\n    <span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>\n    <span class="token property">height</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>\n    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n    <span class="token property">left</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>\n    <span class="token property">top</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>\n    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate</span><span class="token punctuation">(</span>-50%<span class="token punctuation">,</span> -50%<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* 50%为自身尺寸的一半 */</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>首推的方法就是利用绝对定位元素的流体特性和 margin:auto 的自动分配特性实现居中，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="42113510680588840000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.element {\n    width: 300px;\n    height: 200px;\n    position: absolute;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    margin: auto;\n}`, `42113510680588840000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.element</span> <span class="token punctuation">{</span>\n    <span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>\n    <span class="token property">height</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>\n    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n    <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n    <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n    <span class="token property">bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n    <span class="token property">margin</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h1 id="positionrelative-才是大哥"><a href="#positionrelative-%E6%89%8D%E6%98%AF%E5%A4%A7%E5%93%A5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>position:relative 才是大哥</h1>\n<h2 id="relative-对-absolute-的限制"><a href="#relative-%E5%AF%B9-absolute-%E7%9A%84%E9%99%90%E5%88%B6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>relative 对 absolute 的限制</h2>\n<p>虽然说 relative/absolute/fixed 都能对 absolute 的“包裹性”以及“定位”产生限制，但只有 relative 可以让元素依然保持在正常的文档流中。</p>\n<p>下面举个简单例子示意一下 relative 对 absolute 的限制。下面的 CSS 代码之前出现过，是冲着覆盖整个浏览器可视窗体去的，这出手甚为霸气。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="75803977261915440000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.box {\n    position: absolute;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n}`, `75803977261915440000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.box</span> <span class="token punctuation">{</span>\n    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n    <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n    <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n    <span class="token property">bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>现在有如下的小图标样式：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="86773723014995800000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.icon {\n    width: 20px;\n    height: 20px;\n    position: relative;\n}`, `86773723014995800000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.icon</span> <span class="token punctuation">{</span>\n    <span class="token property">width</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>\n    <span class="token property">height</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>\n    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>并且 HTML 结构关系如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="15294491949661792000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<div class=&quot;icon&quot;>\n    <div class=&quot;box&quot;></div>\n</div>`, `15294491949661792000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>icon<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>请问，此时 .box 尺寸多少？</p>\n<p>原本霸气的窗体尺寸一下子被限制到这里的小不溜丢的 20px×20px，瞬间从天上掉到地上。最根本的原因是，此时.box 元素的包含块变成了.icon。</p>\n<h2 id="relative-与定位"><a href="#relative-%E4%B8%8E%E5%AE%9A%E4%BD%8D" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>relative 与定位</h2>\n<p>relative 的定位有两大特性：一是相对自身；二是无侵入。</p>\n<p>“无侵入”的意思是，当 relative 进行定位偏移的时候，一般情况下不会影响周围元素的布局。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2020-01-09-17-57-57-1ca912ac90f96c11d25facd7df4fc58e-43b87.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 330px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 51.81818181818182%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACAUlEQVQoz21RTWgTQRTeg1KhKgqFplCbGBJBBI/2JBbpoe1B0IOXihepePMiIipoUZEqxYMW26QNCAr1VKJ46UGoNtvE5GBbQjfN7mZ3s2Q32b+MyWZ3Z3/iZJXWgB9vPt57fN/MYx7W/gdsWdgpUAwvEhTHVaqO67peu0ixxC5dpLkiXebFmud5e3rM507tWHopn66VMhKTrVFpbjsFZMHS6+TWusz+kEs5pZRltnAdyB2DfwXmZy5iwOKf7p/Ivzm1MxuNTUVGo70Ls8+0QnLlzvFi7PTP59EXk+GLkaOflxOdlxy7y6zzqcxMYHshyMdDX64FLw0cvHtv2maT36cPFxJh5nVo+fLQ+b6et/NxJLbtbrPG4Nm5wc2p8IexYGz85O2zvQ8fP21QyczLY7nJSGJ8aGksdP3MkfnFpf+Y1ep67kbf13MD7672PxoJ3Bo+8P7VE41bSU8cWr0wGL/S/2AkcHO4Z/XjYtfYfz/MBq18SiVTnrTh8RsWvQYlxjGlxua3Ooe3a7hbxk1qDWoV3+HtmTvQmwZVqfJVpSzUJaDXWzb02gA0d3lBlAAvAk2HvwwbuvurxaAPtFE0CbRMCC3EKEOBeigs0zCNlt5soIPCNAxo28jiOA4myzLlQ1EUAIAgCKijqqokSX86qBRFkWVZmqZJkiQIAuVIjwS/AV445eRMgkgHAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2020 01 09 17 57 57" title="" data-src="/static/2020-01-09-17-57-57-1ca912ac90f96c11d25facd7df4fc58e-43b87.png" data-srcset="/static/2020-01-09-17-57-57-1ca912ac90f96c11d25facd7df4fc58e-12832.png 200w,\n/static/2020-01-09-17-57-57-1ca912ac90f96c11d25facd7df4fc58e-43b87.png 330w" data-sizes="(max-width: 330px) 100vw, 330px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="22073555515196006000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.pk-1 {\n    margin-top: -50px;\n}`, `22073555515196006000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.pk-1</span> <span class="token punctuation">{</span>\n    <span class="token property">margin-top</span><span class="token punctuation">:</span> -50px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>relative 则是：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="80745717821306160000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.pk-2 {\n    position: relative;\n    top: -50px;\n}`, `80745717821306160000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.pk-2</span> <span class="token punctuation">{</span>\n    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>\n    <span class="token property">top</span><span class="token punctuation">:</span> -50px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>作用于图片上，结果从视觉效果看，图片最终定位的位置是一样的，但是，图片后面的元素却表现出了明显的差异：margin 定位的图片后面的文字跟着上来了，而使用 relative 定位的图片后面的文字依然在原地纹丝不动，中间区域留出了一大块空白，如图 6-67 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2020-01-09-17-59-15-31a0b5a259c007281057d6fd80b9f008-306e5.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 280px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 64.64285714285715%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAACiElEQVQoz11SW0gUURieHnqwwDtIIcHqaoUP9VCvGUUkSJAGiQauRURUhhcCsYfyoQgUyW4IlhsRS1RSYXSBpHuL1y47uqs7u7ozsxdnbWeb3T27OzNnTv/sqGE/h3N+vv//zvefb4bSNI0QgkTfz7f9/nGrRFuDo4OhsfujT24z3z+rsuR4NzBvH5RmdFyYsE4+63d8GiZ6aJSGVTgj7tePz67/drXQ3Vsw0pLXXJlblkVdajtDkO9py8b3l/OYvsKPF/I7q3IqsqmTh/fqVA3Imk6W2JGxa5snb5j5R+aZK6W2Q6Z9RVmnTrcShRvv3jLRa2JtZe5e81CN6Ygpu+pA9QrZUGZG7Dc3zd4qt9eVPD9e8qrW3Lkr53xrO0lwX68XuwZKxxpKhk+YhmtKuysL6mqrM1OvkBc9b750bJjYVmTdXXBua/ax7Xl7iqmLbc1KwvehK2dyZ6FtR357RW59ee5B0zpL7f7VsTFkseiPhZ56R0fT7AuL74HFcbfJ3lPjfDkoY8F7p2G6rZEeauRsFvpe02jf0amHXcuGZQ6iKCpSMSJYxiSpqMYnWA0QwArGaRn6iCyTlSpl9EUiv2kHPe345XW6XE6nKIp+vz8WixnjyWIU+QMJz3yC45HPh+EKg7xGASEsSQbhP3GCsV5aC1Ik06WgJHIzaN6TFITUUjgVEZd/HoQCgQDLs4s8z866EghJ0h8Ajdup1WfBYzRYCixFU1UDhj6e5zhuIby0FAiG4vG4KEYAXFZWVDUcDieTyVg8rgANzNH90UNVVdg18m/UdDqdyASYAhQqlUrRNO31ej0ejyzLwWAQhFiWDYVC0WgUZoYEzBMEARIozc3Nwc4wDCB/AepscGi2iZQ8AAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2020 01 09 17 59 15" title="" data-src="/static/2020-01-09-17-59-15-31a0b5a259c007281057d6fd80b9f008-306e5.png" data-srcset="/static/2020-01-09-17-59-15-31a0b5a259c007281057d6fd80b9f008-a6776.png 200w,\n/static/2020-01-09-17-59-15-31a0b5a259c007281057d6fd80b9f008-306e5.png 280w" data-sizes="(max-width: 280px) 100vw, 280px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>relative 的定位还有另外两点值得一提：相对定位元素的 left/top/right/bottom 的百分比值是相对于包含块计算的，而不是自身。注意，虽然定位位移是相对自身，但是百分比值的计算值不是。</p>\n<p>top 和 bottom 这两个垂直方向的百分比值计算跟 height 的百分比值是一样的，都是相对高度计算的。同时，如果包含块的高度是 auto，那么计算值是 0，偏移无效，也就是说，如果父元素没有设定高度或者不是“格式化高度”，那么 relative 类似 top:20% 的代码等同于 top:0。</p>\n<p>当相对定位元素同时应用对立方向定位值的时候，也就是 top/bottom 和 left/right 同时使用的时候，其表现和绝对定位差异很大。绝对定位是尺寸拉伸，保持流体特性，但是相对定位却是“你死我活”的表现，也就是说，只有一个方向的定位属性会起作用。而孰强孰弱则是与文档流的顺序有关的，默认的文档流是自上而下、从左往右，因此 top/bottom 同时使用的时候，bottom 被干掉；left/right 同时使用的时候，right 毙命。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="51455735641916100000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.example {\n    position: relative;\n    top: 10px;\n    right: 10px; /* 无效 */\n    bottom: 10px; /* 无效 */\n    left: 10px;\n}`, `51455735641916100000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.example</span> <span class="token punctuation">{</span>\n    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>\n    <span class="token property">top</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>\n    <span class="token property">right</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span> <span class="token comment">/* 无效 */</span>\n    <span class="token property">bottom</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span> <span class="token comment">/* 无效 */</span>\n    <span class="token property">left</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="relative-的最小化影响原则"><a href="#relative-%E7%9A%84%E6%9C%80%E5%B0%8F%E5%8C%96%E5%BD%B1%E5%93%8D%E5%8E%9F%E5%88%99" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>relative 的最小化影响原则</h2>\n<p>“relative 的最小化影响原则”是我自己总结的一套更好地布局实践的原则，主要分为以下两部分：</p>\n<ol>\n<li>尽量不使用 relative，如果想定位某些元素，看看能否使用“无依赖的绝对定位”；</li>\n<li>如果场景受限，一定要使用 relative，则该 relative 务必最小化。</li>\n</ol>\n<p>第一点前文有重点介绍，应该很好理解，关键是第二点，“relative 最小化”是什么意思？</p>\n<p>我们可以看一个简单的例子。例如，我们希望在某个模块的右上角定位一个图标，初始 HTML 结构如下：</p>\n<html><head></head><body><div class="gatsby-code-button-container" data-toaster-id="22011035953179927000" data-toaster-class="gatsby-code-button-toaster" data-toaster-text-class="gatsby-code-button-toaster-text" data-toaster-text="复制成功" data-toaster-duration="3500" onclick="copyToClipboard(`<div>\n    <img data-src=&quot;icon.png&quot; />\n    <p>内容 1</p>\n    <p>内容 2</p>\n    <p>内容 3</p>\n    <p>内容 4</p>\n</div>`, `22011035953179927000`)">\n              <div class="gatsby-code-button" title="html">\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div></body></html>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>icon.png<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>内容 1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>内容 2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>内容 3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>内容 4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>如果让大家去实现的话，我估计十有八九都会如下面这样实现：</p>\n<html><head></head><body><div class="gatsby-code-button-container" data-toaster-id="96943356762746300000" data-toaster-class="gatsby-code-button-toaster" data-toaster-text-class="gatsby-code-button-toaster-text" data-toaster-text="复制成功" data-toaster-duration="3500" onclick="copyToClipboard(`<div style=&quot;position:relative;&quot;>\n    <img data-src=&quot;icon.png&quot; style=&quot;position:absolute;top:0;right:0;&quot; />\n    <p>内容 1</p>\n    <p>内容 2</p>\n    <p>内容 3</p>\n    <p>内容 4</p>\n</div>`, `96943356762746300000`)">\n              <div class="gatsby-code-button" title="html">\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div></body></html>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">position</span><span class="token punctuation">:</span>relative<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>icon.png<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">position</span><span class="token punctuation">:</span>absolute<span class="token punctuation">;</span><span class="token property">top</span><span class="token punctuation">:</span>0<span class="token punctuation">;</span><span class="token property">right</span><span class="token punctuation">:</span>0<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>内容 1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>内容 2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>内容 3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>内容 4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>但是，如果采用“relative 的最小化影响原则”则应该是如下面这般实现：</p>\n<html><head></head><body><div class="gatsby-code-button-container" data-toaster-id="43147424671927870000" data-toaster-class="gatsby-code-button-toaster" data-toaster-text-class="gatsby-code-button-toaster-text" data-toaster-text="复制成功" data-toaster-duration="3500" onclick="copyToClipboard(`<div>\n    <div style=&quot;position:relative;&quot;>\n        <img data-src=&quot;icon.png&quot; style=&quot;position:absolute;top:0;right:0;&quot; />\n    </div>\n    <p>内容 1</p>\n    <p>内容 2</p>\n    <p>内容 3</p>\n    <p>内容 4</p>\n</div>`, `43147424671927870000`)">\n              <div class="gatsby-code-button" title="html">\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div></body></html>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">position</span><span class="token punctuation">:</span>relative<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>icon.png<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">position</span><span class="token punctuation">:</span>absolute<span class="token punctuation">;</span><span class="token property">top</span><span class="token punctuation">:</span>0<span class="token punctuation">;</span><span class="token property">right</span><span class="token punctuation">:</span>0<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>内容 1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>内容 2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>内容 3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>内容 4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>差别在于，此时 relative 影响的元素只是我们的图标，后面的“内容 1”之类的元素依然保持开始时干净的状态。</p>\n<p>页面一旦复杂，第一种实现方法就会留下隐患。因为一个普通元素变成相对定位元素，看上去长相什么的没有变化，但是实际上元素的层叠顺序提高了，甚至在 IE6 和 IE7 浏览器下无须设置 z-index 就直接创建了新的层叠上下文，会导致一些绝对定位浮层无论怎么设置 z-index 都会被其他元素覆盖。当然，z-index 无效已经算是比较严重的问题了。</p>\n<p>这里我们不妨看一个看似无伤大雅的小问题。场景是这样的：A 模块下方有一个“B 模块”，这个“B 模块”设置了 margin-top:-100px，希望可以覆盖“A 模块”后面的部分内容，此时两种实现的差异就显现出来了。</p>\n<p>如果是前面 position:relative 设置在容器上的实现，会发现“B 模块”并没有覆盖“A 模块”，反而是被“A 模块”覆盖了！原因很简单，相比普通元素，相对定位元素的层叠顺序是“鬼畜”级别的，自然“A 模块”要覆盖“B 模块”。如果要想实现目标效果，就需要给“B 模块”也设置 position:relative。</p>\n<p>但是，如果是后面“relative 的最小化影响原则”的实现，由于 relative 只影响右上角的图标，“A 模块”后面的内容都还是普通元素，那么，最终的效果就是我们希望的“B 模块”覆盖“A 模块”。</p>\n<p>“relative 的最小化影响原则”不仅规避了复杂场景可能出现样式问题的隐患，从日后的维护角度讲也更方便，比方说过了一个月，我们不需要右上角的图标了，直接移除这个 relative 最小化的单元即可！但是，如果 relative 是这个容器上的，这段样式代码你敢删吗？万一其他元素定位也需要呢？万一 relative 还有提高层叠顺序的作用呢？留着没问题，删掉可能出 bug，我想大多数的开发者一定会留着的，这也是为什么随着项目进程的推进代码会越来越冗余的原因。</p>\n<p>从这一点可以看出来，项目代码越来越臃肿、越来越冗余，归根结底还是一开始实现项目的人的技术水平和能力火候还不够。实现时 “洋溢着灿烂的笑容”没什么好得意的，能够让日后维护甚至其他人接手项目维护的时候也“洋溢着灿烂的笑容”，那才是真厉害！</p>\n<h1 id="强悍的-positionfixed-固定定位"><a href="#%E5%BC%BA%E6%82%8D%E7%9A%84-positionfixed-%E5%9B%BA%E5%AE%9A%E5%AE%9A%E4%BD%8D" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>强悍的 position:fixed 固定定位</h1>\n<p>定位属性值三兄弟的老三 position:fixed 固定定位是三人中最强悍的，一副天不怕地不怕的感觉，主要表现为把 absolute 管得服服帖帖的 relative 对 fixed 是一点儿办法都没有，普通元素想要 overflow:hidden 剪裁 position:fixed 也是痴人说梦。固定定位之所以这么强悍，根本原本是其“包含块”和其他元素不一样。</p>\n<h2 id="positionfixed-不一样的包含块"><a href="#positionfixed-%E4%B8%8D%E4%B8%80%E6%A0%B7%E7%9A%84%E5%8C%85%E5%90%AB%E5%9D%97" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>position:fixed 不一样的“包含块”</h2>\n<p>position:fixed 固定定位元素的“包含块”是根元素，我们可以将其近似看成<code class="language-text">&lt;html&gt;</code>元素。换句话说，唯一可以限制固定定位元素的就是<code class="language-text">&lt;html&gt;</code>根元素，而根元素就这么一个，也就是全世界只有一个人能限制 position:fixed 元素，可见人家强悍还是有强悍的资本的。</p>\n<p>所以，如果想把某个元素固定定位在某个模块的右上角，下面这种做法是没有用的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="80478320013981190000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<style>\n    .father {\n        width: 300px;\n        height: 200px;\n        position: relative;\n    }\n\n    .son {\n        width: 40px;\n        height: 40px;\n        position: fixed;\n        top: 0;\n        right: 0;\n    }\n</style>\n<div class=&quot;father&quot;>\n    <div class=&quot;son&quot;></div>\n</div>`, `80478320013981190000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n    <span class="token selector">.father</span> <span class="token punctuation">{</span>\n        <span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>\n        <span class="token property">height</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>\n        <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token selector">.son</span> <span class="token punctuation">{</span>\n        <span class="token property">width</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>\n        <span class="token property">height</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>\n        <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>\n        <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n        <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>father<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>son<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>.son 元素只会跑到窗体的右上角，是不会在.father 的右上角的，relative 对 fixed 定位没有任何限制作用。</p>\n<p>但是，并不是说我们无法把 .son 元素精确定位到 .father 的右上角，事实上是可以实现的，如何实现呢？</p>\n<p>和“无依赖的绝对定位”类似，就是“无依赖的固定定位”，利用 absolute/fixed 元素没有设置 left/top/right/bottom 的相对定位特性，可以将目标元素定位到我们想要的位置，处理如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="84911244954155940000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<style>\n    .father {\n        width: 300px;\n        height: 200px;\n        position: relative;\n    }\n\n    .right {\n        height: 0;\n        text-align: right;\n        overflow: hidden;\n    }\n\n    .son {\n        display: inline;\n        width: 40px;\n        height: 40px;\n        position: fixed;\n        margin-left: -40px;\n    }\n</style>\n<div class=&quot;father&quot;>\n    <div class=&quot;right&quot;>\n        <!-- 内联元素充当幽灵结点 -->\n        &nbsp;\n        <div class=&quot;son&quot;></div>\n    </div>\n</div>`, `84911244954155940000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n    <span class="token selector">.father</span> <span class="token punctuation">{</span>\n        <span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>\n        <span class="token property">height</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>\n        <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token selector">.right</span> <span class="token punctuation">{</span>\n        <span class="token property">height</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n        <span class="token property">text-align</span><span class="token punctuation">:</span> right<span class="token punctuation">;</span>\n        <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token selector">.son</span> <span class="token punctuation">{</span>\n        <span class="token property">display</span><span class="token punctuation">:</span> inline<span class="token punctuation">;</span>\n        <span class="token property">width</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>\n        <span class="token property">height</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>\n        <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>\n        <span class="token property">margin-left</span><span class="token punctuation">:</span> -40px<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>father<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>right<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n        <span class="token comment">&lt;!-- 内联元素充当幽灵结点 --></span>\n        <span class="token entity" title="&nbsp;">&amp;nbsp;</span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>son<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="positionfixed-的-absolute-模拟"><a href="#positionfixed-%E7%9A%84-absolute-%E6%A8%A1%E6%8B%9F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>position:fixed 的 absolute 模拟</h2>\n<p>有时候我们希望元素既有不跟随滚动的固定定位效果，又能被定位元素限制和精准定位，那该怎么办呢？</p>\n<p>我们可以使用 position:absolute 进行模拟，原理其实很简单：页面的滚动使用普通元素替代，此时滚动元素之外的其他元素自然就有了“固定定位”的效果了。</p>\n<p>常规的 HTML 结构和 CSS 代码是下面这样的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="75778540626964560000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<style>\n  .fixed {\n    position: fixed;\n  }\n</style>\n<html>\n  <body>\n    <div class=&quot;fixed&quot;><div>\n  </body>\n</html>`, `75778540626964560000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n  <span class="token selector">.fixed</span> <span class="token punctuation">{</span>\n    <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>fixed<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>使用 position:absolute 进行模拟则需要一个滚动容器，假设类名是 .page，则有：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="98316513754448180000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<style>\n  html,\n  body {\n    height: 100%;\n    overflow: hidden;\n  }\n\n  .page {\n    height: 100%;\n    overflow: auto;\n  }\n\n  .fixed {\n    position: absolute;\n  }\n</style>\n<html>\n  <body>\n    <div class=&quot;page&quot;>固定定位元素<div>\n    <div class=&quot;fixed&quot;><div>\n  </body>\n</html>`, `98316513754448180000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n  <span class="token selector">html,\n  body</span> <span class="token punctuation">{</span>\n    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>\n    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token selector">.page</span> <span class="token punctuation">{</span>\n    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>\n    <span class="token property">overflow</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token selector">.fixed</span> <span class="token punctuation">{</span>\n    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>page<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>固定定位元素<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>fixed<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>整个网页的滚动条由 .page 元素产生，而非根元素，此时 .fixed 元素虽然是绝对定位，但是并不在滚动元素内部，自然滚动时不会跟随，如同固定定位效果，同时本身绝对定位。因此，可以使用 relative 进行限制或者 overflow 进行裁剪等。</p>\n<p>然而，将网页的窗体滚动变成内部滚动，很多窗体滚动相关的小 JavaScript 组件需要跟着进行调整，并且可能会丢失其他一些浏览器内置行为，需要谨慎使用。</p>\n<h2 id="positionfixed-与背景锁定"><a href="#positionfixed-%E4%B8%8E%E8%83%8C%E6%99%AF%E9%94%81%E5%AE%9A" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>position:fixed 与背景锁定</h2>\n<p>蒙层弹窗是网页中常见的交互，其中黑色半透明全屏覆盖的蒙层基本上都是使用 position: fixed 定位实现的。但是，如果细致一点儿就会发现蒙层无法覆盖浏览器右侧的滚动栏，并且鼠标滚动的时候后面的背景内容依然可以被滚动，并没有被锁定，体验略打折扣。</p>\n<p>如果希望背景锁定，该如何实现呢？</p>\n<p>要想解决一个问题，可以从发生这个问题的原因入手。position:fixed 蒙层之所以出现背景依然滚动，那是因为滚动元素是根元素，正好是 position:fixed 的“包含块”。所以，如果希望背景被锁定，可以借鉴“absolute 模拟 fixed 定位”的思路，让页面滚动条由内部的普通元素产生即可。</p>\n<p>如果网站的滚动结构不方便调整，则需要借助 JavaScript 来实现锁定。</p>\n<p>如果是移动端项目，阻止 touchmove 事件的默认行为可以防止滚动；如果是桌面端项目，可以让根元素直接 overflow:hidden。但是，Windows 操作系统下的浏览器的滚动条都是占据一定宽度的，滚动条的消失必然会导致页面的可用宽度变化，页面会产生体验更糟糕的晃动问题，那怎么办呢？很简单，我们只需要找个东西填补消失的滚动条就好了。那该找什么东西填充呢？这时候就轮到功勋卓越的 border 属性出马了 — 消失的滚动条使用同等宽度的透明边框填充！</p>\n<p>于是，在蒙层显示的同时执行下面的 JavaScript 代码：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="88090590837250380000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`var widthBar = 17,\n    root = document.documentElement;\nif (typeof window.innerWidth == \'number\') {\n    widthBar = window.innerWidth - root.clientWidth;\n}\nroot.style.overflow = \'hidden\';\nroot.style.borderRight = widthBar + \'px solid transparent\';`, `88090590837250380000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">var</span> widthBar <span class="token operator">=</span> <span class="token number">17</span><span class="token punctuation">,</span>\n    root <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">;</span>\n<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> window<span class="token punctuation">.</span>innerWidth <span class="token operator">==</span> <span class="token string">\'number\'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    widthBar <span class="token operator">=</span> window<span class="token punctuation">.</span>innerWidth <span class="token operator">-</span> root<span class="token punctuation">.</span>clientWidth<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\nroot<span class="token punctuation">.</span>style<span class="token punctuation">.</span>overflow <span class="token operator">=</span> <span class="token string">\'hidden\'</span><span class="token punctuation">;</span>\nroot<span class="token punctuation">.</span>style<span class="token punctuation">.</span>borderRight <span class="token operator">=</span> widthBar <span class="token operator">+</span> <span class="token string">\'px solid transparent\'</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>隐藏的时候执行下面的 JavaScript 代码：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="78192023562317000000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`var root = document.documentElement;\nroot.style.overflow = \'\';\nroot.style.borderRight = \'\';`, `78192023562317000000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">var</span> root <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">;</span>\nroot<span class="token punctuation">.</span>style<span class="token punctuation">.</span>overflow <span class="token operator">=</span> <span class="token string">\'\'</span><span class="token punctuation">;</span>\nroot<span class="token punctuation">.</span>style<span class="token punctuation">.</span>borderRight <span class="token operator">=</span> <span class="token string">\'\'</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>就可以实现我们期望的锁定效果了。</p>',
id:"/home/runner/work/GatsbyBlog/GatsbyBlog/blog/CSS世界流的破坏与保护/index.md absPath of file >>> MarkdownRemark",timeToRead:49,frontmatter:{date:"2020-01-16 16:03:27",path:"/css-world-flow-destroy-protect/",tags:"前端, CSS, CSS世界, 读书笔记",title:"CSS世界流的破坏与保护",draft:null}},{excerpt:"了解 CSS :focus-within 伪类 CSS :focus-within 伪类选择器和 IE8 就开始支持的:focus 可以说是近亲，区别在于:focus 表示当前元素处于 focus 状态时候干嘛干嘛，而:focus-within 表示当前元素或者当前元素的子元素处于 focus 状态时候干嘛干嘛。 举个例子： 表示仅仅当 处于 focus 状态时候， 元素 outline 出现。换句话说，子元素 focus…",html:'<h1 id="了解-css-focus-within-伪类"><a href="#%E4%BA%86%E8%A7%A3-css-focus-within-%E4%BC%AA%E7%B1%BB" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>了解 CSS :focus-within 伪类</h1>\n<p>CSS :focus-within 伪类选择器和 IE8 就开始支持的:focus 可以说是近亲，区别在于:focus 表示当前元素处于 focus 状态时候干嘛干嘛，而:focus-within 表示当前元素或者当前元素的子元素处于 focus 状态时候干嘛干嘛。</p>\n<p>举个例子：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="61093231572718290000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`form:focus {\n  outline: solid;\n}`, `61093231572718290000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">form:focus</span> <span class="token punctuation">{</span>\n  <span class="token property">outline</span><span class="token punctuation">:</span> solid<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>表示仅仅当<code class="language-text">&lt;form&gt;</code>处于 focus 状态时候，<code class="language-text">&lt;form&gt;</code>元素 outline 出现。换句话说，子元素 focus，可以让任意父级元素样式发生变化。</p>\n<p>这个新特性的支持，未来势必会带来更加丰富的交互形式，以及特定场景简化我们实现。</p>\n<h1 id="css-focus-within-伪类实际应用举例"><a href="#css-focus-within-%E4%BC%AA%E7%B1%BB%E5%AE%9E%E9%99%85%E5%BA%94%E7%94%A8%E4%B8%BE%E4%BE%8B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>CSS :focus-within 伪类实际应用举例</h1>\n<h2 id="表单输入勿扰模式"><a href="#%E8%A1%A8%E5%8D%95%E8%BE%93%E5%85%A5%E5%8B%BF%E6%89%B0%E6%A8%A1%E5%BC%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>表单输入勿扰模式</h2>\n<p>当我们表单输入，选择或者进行交互时候，页面上表单以为其他内容全部都不可见。</p>\n<div>\n          <div\n            class="gatsby-resp-iframe-wrapper"\n            style="padding-bottom: 25%; position: relative; height: 0; overflow: hidden;margin-bottom: 2em"\n          >\n            <iframe src="/examples/css-focus-within-pseudo-class-selector/focus-within-form-dnd-mode.html" style="\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n          "></iframe>\n          </div>\n          </div>\n<p><div class="gatsby-highlight">\n        <pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>X-UA-Compatible<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ie=edge<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n    <span class="token selector">html,\n    body</span> <span class="token punctuation">{</span>\n      <span class="token property">background-color</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span>\n      <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token selector">form</span> <span class="token punctuation">{</span>\n      <span class="token property">transition</span><span class="token punctuation">:</span> outline .2s<span class="token punctuation">;</span>\n      <span class="token property">outline</span><span class="token punctuation">:</span> 2000px solid <span class="token function">hsla</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span>0%<span class="token punctuation">,</span>100%<span class="token punctuation">,</span>0<span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>\n      <span class="token property">z-index</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token selector">form:focus-within</span> <span class="token punctuation">{</span>\n      <span class="token property">outline</span><span class="token punctuation">:</span> 2000px solid <span class="token function">hsla</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span>0%<span class="token punctuation">,</span>100%<span class="token punctuation">,</span>1<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>\n  购物订单详情\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>p20 bgwh<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h6</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>f14 b<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>完成您的购物订单 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>icon icon_title_inf vn ui-tips<span class="token punctuation">"</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>星号为必填<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h6</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>clearfix mt15<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>left<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>邮箱<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>red abs<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>cell<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ui-input<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span> <span class="token attr-name">required</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>clearfix mt15<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>left<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>手机号<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>red abs<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>cell<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>tel<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ui-input<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>tel<span class="token punctuation">"</span></span> <span class="token attr-name">required</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>clearfix mt15<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>left<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>您的款式<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>red abs<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>cell<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>radio<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>radioMale<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>type<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>488<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ui-radio<span class="token punctuation">"</span></span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>radioMale<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>mr20 ml5<span class="token punctuation">"</span></span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>radioMale<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>男款<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>radio<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>radioFemale<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>type<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>388<span class="token punctuation">"</span></span> <span class="token attr-name">required</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ui-radio<span class="token punctuation">"</span></span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>radioFemale<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>radioFemale<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ml5<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>女款<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>radioMaleP<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>dn mt10<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>男款每件488元<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>radioFemaleP<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>dn mt10<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>女款每件388元<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>clearfix mt15<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>left<span class="token punctuation">"</span></span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>number<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>购买数量<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>red abs<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>cell<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>number<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>number<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ui-input<span class="token punctuation">"</span></span> <span class="token attr-name">min</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span> <span class="token attr-name">max</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>10<span class="token punctuation">"</span></span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>5<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span> <span class="token attr-name">required</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>直接输入数值<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>clearfix mt15<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>left<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>所在城市<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>red abs<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>cell<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>citySelect<span class="token punctuation">"</span></span> <span class="token attr-name">required</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>请选择<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">></span></span>\n          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>10<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>深圳<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">></span></span>\n          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>5<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>上海<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">></span></span>\n          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>7<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>北京<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">></span></span>\n          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>成都<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">></span></span>\n          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>6<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>武汉<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">></span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>mt10 dn<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>运费： <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>strong</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>transPrice<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>red<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>strong</span><span class="token punctuation">></span></span> 元<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>clearfix mt15<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>left<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>给商家留言<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>cell<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ui-textarea<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>textarea</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>message<span class="token punctuation">"</span></span> <span class="token attr-name">rows</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>4<span class="token punctuation">"</span></span> <span class="token attr-name">maxlength</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>200<span class="token punctuation">"</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>少于200字符<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>textarea</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>clearfix mt15<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>left<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token entity" title="&nbsp;">&amp;nbsp;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>cell<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>checkbox<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>checkInsur<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>insurance<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0.4<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ui-checkbox<span class="token punctuation">"</span></span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>checkInsur<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ml5<span class="token punctuation">"</span></span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>checkInsur<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>使用运费险0.4元<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>pay<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>您总共需要支付 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>strong</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>total<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>red<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>strong</span><span class="token punctuation">></span></span> 元<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>clearfix mt15<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>left<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>是否货到付款<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>cell<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>checkbox<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>switch<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>pay<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ui-switch<span class="token punctuation">"</span></span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>switch<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>clearfix mt15<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>left<span class="token punctuation">"</span></span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>achieveDate<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>希望到货日期<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>cell<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ui-input ui-date-input<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>date<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>achieveDate<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>achieve<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>2015-12-27<span class="token punctuation">"</span></span> <span class="token attr-name">min</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>2015-12-27<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>gray ml20<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>默认尽快发货<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>clearfix mt20<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>left<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token entity" title="&nbsp;">&amp;nbsp;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>cell<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>validateSubmit<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ui-button ui-button-primary<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>提交<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre>\n        </div></p>\n<p>本案例是真实的勿扰模式效果可以放心大胆在实际项目中使用，因为这是一个体验增强的交互，就算浏览器不支持，对原本功能也不会有任何影响。</p>\n<h2 id="带计数文本域的-focus-高亮"><a href="#%E5%B8%A6%E8%AE%A1%E6%95%B0%E6%96%87%E6%9C%AC%E5%9F%9F%E7%9A%84-focus-%E9%AB%98%E4%BA%AE" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>带计数文本域的 focus 高亮</h2>\n<p>对于带计数的组件化的多行文本域，计数的数值通常是设计在文本域的右下角，这样能够适应各种复杂的场景。如下截图：</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2020-01-14-17-56-25-bc35fac4d861db7324bc3cb681303424-8d9bd.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 308px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 38.31168831168831%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAVklEQVQY053Quw0AIQwDUPbfhwXYg4KGDlFC/hekWyCx3D5ZSeFsEKlYNkQJrPoaxiJ2zu/D2E3vNoa7FPa0ZrU+jBi+mVTWnHut921mCdUHD8C94PgDBefaNL7bsOgAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2020 01 14 17 56 25" title="" data-src="/static/2020-01-14-17-56-25-bc35fac4d861db7324bc3cb681303424-8d9bd.png" data-srcset="/static/2020-01-14-17-56-25-bc35fac4d861db7324bc3cb681303424-b87a4.png 200w,\n/static/2020-01-14-17-56-25-bc35fac4d861db7324bc3cb681303424-8d9bd.png 308w" data-sizes="(max-width: 308px) 100vw, 308px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>然而这种设计对我们的布局实现带来的挑战。</p>\n<p>我们通常想到的方法是，计数元素浮在下面的 textarea 元素上。然而这种实现存在有致命的不足，那就是输入框的内容有可能和我们的计数重叠，以及出现的滚动条和技术文本重叠，如下截图所示：</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2020-01-14-17-57-04-9d5ad8d1fcc36b08ff9b500dd85ab344-35f12.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 311px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 38.90675241157556%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAwUlEQVQY05VRSQ7CMAzM/z/DCXgBSAWxHMquorZUkCaUtUtSbIe0cC5lNAfLY9ljm50VyExfNf5HBadHzmT+0nlKpiW+hUTo7T0mMi2loDrdihUMAIwmUxY/i91mjdQ4+6NybqLIINoQESazOTve0rHjWJWohfc4Ntut8X3UqposUrVwXW6ztl/d4LftTgeXi1Ceq52d4aDf696ul9og/TyYAkgED8IDE3m5Ck+Ou/F4cilJFi/7vCYWIFMlsjJI7m+N3s6RP7y/QgAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2020 01 14 17 57 04" title="" data-src="/static/2020-01-14-17-57-04-9d5ad8d1fcc36b08ff9b500dd85ab344-35f12.png" data-srcset="/static/2020-01-14-17-57-04-9d5ad8d1fcc36b08ff9b500dd85ab344-5e330.png 200w,\n/static/2020-01-14-17-57-04-9d5ad8d1fcc36b08ff9b500dd85ab344-35f12.png 311w" data-sizes="(max-width: 311px) 100vw, 311px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>因此，我们通常做法就是：边框使用父级<code class="language-text">&lt;div&gt;</code>元素模拟，文本域元素和技术元素上下依次排列（非重叠），文本域原本的边框去除。</p>\n<p>假设 HTML 如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="53749875022958250000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<div class=&quot;textarea-x&quot;>\n  <textarea></textarea>\n  <label class=&quot;textarea-count&quot;>0/250</label>\n</div>`, `53749875022958250000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>textarea-x<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>textarea</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>textarea</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>textarea-count<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>0/250<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>则核心 CSS 这样：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="72586003794721956000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 父级div元素模拟边框 */\n.textarea-x {\n  border: 1px solid #d0d0d5;\n  border-radius: 4px;\n  background-color: #fff;\n}\n\n/* 文本域原本的边框去除 */\n.textarea-x > textarea {\n  border: 0;\n  background: none;\n}`, `72586003794721956000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 父级div元素模拟边框 */</span>\n<span class="token selector">.textarea-x</span> <span class="token punctuation">{</span>\n  <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #d0d0d5<span class="token punctuation">;</span>\n  <span class="token property">border-radius</span><span class="token punctuation">:</span> 4px<span class="token punctuation">;</span>\n  <span class="token property">background-color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">/* 文本域原本的边框去除 */</span>\n<span class="token selector">.textarea-x > textarea</span> <span class="token punctuation">{</span>\n  <span class="token property">border</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n  <span class="token property">background</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>然而上面的实现有个非常严重的不足，那就是<code class="language-text">&lt;textarea&gt;</code>元素 :focus 时候，边框无法高亮，因为 CSS 中没有父选择器！</p>\n<p>因此，实际开发的时候，我们会使用相邻兄弟选择器，以及新建一个兄弟元素来模拟边框。</p>\n<p>HTML 结构如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="83938286019594300000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<div class=&quot;textarea-x&quot;>\n  <textarea></textarea>\n  <div class=&quot;textarea&quot;></div>\n  <label class=&quot;textarea-count&quot;>0/250</label>\n</div>`, `83938286019594300000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>textarea-x<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>textarea</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>textarea</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>textarea<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>textarea-count<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>0/250<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>原理如下图示意：</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2020-01-14-18-00-12-6d52881cbb1a1945591f355f92ebe243-dab2c.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 397px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 44.58438287153652%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABfUlEQVQoz3WR226jMBCG8/5v0ptIlbpVlUjJkmp7AiqSqs3ukgOQJgVSsI2xHYztqWmam672l/V7ZM83mtH0tNbqf2pbJUQXNI2SUjHW+fGRcyllz37BvzKm86oCz4OzMxiN4OICFgu4uoJ+HxwHdjtG6Rd8TP4OYwyzWQf4PtzewmoF43FXqyggTbmFZSP3uTlIwERVXDHFigPCDa5MzctML5cmzczkGly3g9drCEN4e4Mo4px3MKWmKg7LZxYv+HZDkngbRyhZk2Rlq0sQFIJHIMR0DRk4OWOs19qboLI/fP3xtB+6ybn7PrrZDkevg/H6clBObtD5z3wwa+/uoSy7WbS2+AnWBg6Cei9/h0nuR+/+n/jXfP8y3QROMr3eTu+yp1nsPaAgyJPNLksxEpvIjgy0rm3bTZbLtACpzLGm+nR9Oq3RQku7sZrVhBBK66oSXLQI454QApUIl5hgRBAiGFcYfzlCdh+/5/OJ4/iu63/K8234EEyDMAw/AEKt8tL/9lXnAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2020 01 14 18 00 12" title="" data-src="/static/2020-01-14-18-00-12-6d52881cbb1a1945591f355f92ebe243-dab2c.png" data-srcset="/static/2020-01-14-18-00-12-6d52881cbb1a1945591f355f92ebe243-06022.png 200w,\n/static/2020-01-14-18-00-12-6d52881cbb1a1945591f355f92ebe243-dab2c.png 397w" data-sizes="(max-width: 397px) 100vw, 397px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="72172172035511480000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.textarea-x {\n  position: relative;\n  z-index: 0;\n}\n\n.textarea-x > textarea {\n  border: 0;\n  background: none;\n  outline: 0;\n  resize: none;\n  position: relative;\n}\n\n.textarea-x > .textarea {\n  position: absolute;\n  border: 1px solid #d0d0d5;\n  border-radius: 4px;\n  background-color: #fff;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  z-index: -1;\n}\n\n.textarea-x > :focus + .textarea {\n  border-color: #00a5e0;\n}`, `72172172035511480000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.textarea-x</span> <span class="token punctuation">{</span>\n  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>\n  <span class="token property">z-index</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.textarea-x > textarea</span> <span class="token punctuation">{</span>\n  <span class="token property">border</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n  <span class="token property">background</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>\n  <span class="token property">outline</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n  <span class="token property">resize</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>\n  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.textarea-x > .textarea</span> <span class="token punctuation">{</span>\n  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n  <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #d0d0d5<span class="token punctuation">;</span>\n  <span class="token property">border-radius</span><span class="token punctuation">:</span> 4px<span class="token punctuation">;</span>\n  <span class="token property">background-color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>\n  <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n  <span class="token property">bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n  <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n  <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n  <span class="token property">z-index</span><span class="token punctuation">:</span> -1<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.textarea-x > :focus + .textarea</span> <span class="token punctuation">{</span>\n  <span class="token property">border-color</span><span class="token punctuation">:</span> #00a5e0<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>由于.textarea 元素和原生的<code class="language-text">&lt;textarea&gt;</code>元素是相邻兄弟关系，因此我们可以借助相邻兄弟选择器，让<code class="language-text">&lt;textarea&gt;</code>元素 focus 时候后面用来模拟边框的 .textarea 元素高亮。也就是这么一段 CSS 代码：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="12039986263666047000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.textarea-x > :focus + .textarea {\n  border-color: #00a5e0;\n}`, `12039986263666047000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.textarea-x > :focus + .textarea</span> <span class="token punctuation">{</span>\n  <span class="token property">border-color</span><span class="token punctuation">:</span> #00a5e0<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>这种实现兼容 IE7+ 浏览器。</p>\n<div>\n          <div\n            class="gatsby-resp-iframe-wrapper"\n            style="padding-bottom: 25%; position: relative; height: 0; overflow: hidden;margin-bottom: 2em"\n          >\n            <iframe src="/examples/css-focus-within-pseudo-class-selector/focus-textarea-border-highlight-compatible.html" style="\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n          "></iframe>\n          </div>\n          </div>\n<p><div class="gatsby-highlight">\n        <pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>X-UA-Compatible<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ie=edge<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n    <span class="token selector">html,\n    body</span> <span class="token punctuation">{</span>\n      <span class="token property">background-color</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span>\n      <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token selector">.textarea-x</span> <span class="token punctuation">{</span>\n      <span class="token property">max-width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>\n      <span class="token property">padding</span><span class="token punctuation">:</span> 1px 1px 24px 0<span class="token punctuation">;</span>\n      <span class="token property">border-radius</span><span class="token punctuation">:</span> 4px<span class="token punctuation">;</span>\n      <span class="token property">-ms-box-sizing</span><span class="token punctuation">:</span> border-box<span class="token punctuation">;</span>\n      <span class="token property">box-sizing</span><span class="token punctuation">:</span> border-box<span class="token punctuation">;</span>\n      <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>\n      <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>\n      <span class="token property">z-index</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token selector">.textarea-count</span> <span class="token punctuation">{</span>\n      <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n      <span class="token property">font-size</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>\n      <span class="token property">line-height</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>\n      <span class="token property">bottom</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span> <span class="token property">right</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>\n      <span class="token property">color</span><span class="token punctuation">:</span> #999<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token selector">.textarea-x > textarea</span> <span class="token punctuation">{</span>\n      <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>\n      <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>\n      <span class="token property">padding</span><span class="token punctuation">:</span> 7px 9px<span class="token punctuation">;</span>\n      <span class="token property">border</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n      <span class="token property">background</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>\n      <span class="token property">-ms-box-sizing</span><span class="token punctuation">:</span> border-box<span class="token punctuation">;</span>\n      <span class="token property">box-sizing</span><span class="token punctuation">:</span> border-box<span class="token punctuation">;</span>\n      <span class="token property">outline</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n      <span class="token property">resize</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>\n      <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token selector">.textarea-x > .textarea</span> <span class="token punctuation">{</span>\n      <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n      <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #d0d0d5<span class="token punctuation">;</span>\n      <span class="token property">border-radius</span><span class="token punctuation">:</span> 4px<span class="token punctuation">;</span>\n      <span class="token property">background-color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>\n      <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n      <span class="token property">bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n      <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n      <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n      <span class="token property">transition</span><span class="token punctuation">:</span> border-color .2s<span class="token punctuation">;</span>\n      <span class="token property">z-index</span><span class="token punctuation">:</span> -1<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token selector">.textarea-x > :focus + .textarea</span> <span class="token punctuation">{</span>\n      <span class="token property">border-color</span><span class="token punctuation">:</span> #00a5e0<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>textarea-x<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>textarea</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>forFocus<span class="token punctuation">"</span></span> <span class="token attr-name">maxlength</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>250<span class="token punctuation">"</span></span> <span class="token attr-name">rows</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>5<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>textarea</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>textarea<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>forFocus<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>textarea-count<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>0/250<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre>\n        </div></p>\n<p>但是，现在有了 CSS :focus-within 伪类选择器，我们的事情就简单多了。</p>\n<div>\n          <div\n            class="gatsby-resp-iframe-wrapper"\n            style="padding-bottom: 25%; position: relative; height: 0; overflow: hidden;margin-bottom: 2em"\n          >\n            <iframe src="/examples/css-focus-within-pseudo-class-selector/focus-within-textarea-highlight.html" style="\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n          "></iframe>\n          </div>\n          </div>\n<p><div class="gatsby-highlight">\n        <pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>X-UA-Compatible<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ie=edge<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n    <span class="token selector">html,\n    body</span> <span class="token punctuation">{</span>\n      <span class="token property">background-color</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span>\n      <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token selector">.textarea-x</span> <span class="token punctuation">{</span>\n      <span class="token property">max-width</span><span class="token punctuation">:</span> 298px<span class="token punctuation">;</span>\n      <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #d0d0d5<span class="token punctuation">;</span>\n      <span class="token property">border-radius</span><span class="token punctuation">:</span> 4px<span class="token punctuation">;</span>\n      <span class="token property">background-color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>\n      <span class="token property">padding-bottom</span><span class="token punctuation">:</span> 24px<span class="token punctuation">;</span>\n      <span class="token property">transition</span><span class="token punctuation">:</span> border-color .2s<span class="token punctuation">;</span>\n      <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>\n      <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token selector">.textarea-count</span> <span class="token punctuation">{</span>\n      <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n      <span class="token property">font-size</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>\n      <span class="token property">line-height</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>\n      <span class="token property">bottom</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span> <span class="token property">right</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>\n      <span class="token property">color</span><span class="token punctuation">:</span> #999<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token selector">.textarea-x > textarea</span> <span class="token punctuation">{</span>\n      <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>\n      <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>\n      <span class="token property">padding</span><span class="token punctuation">:</span> 7px 9px<span class="token punctuation">;</span>\n      <span class="token property">border</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n      <span class="token property">background</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>\n      <span class="token property">-ms-box-sizing</span><span class="token punctuation">:</span> border-box<span class="token punctuation">;</span>\n      <span class="token property">box-sizing</span><span class="token punctuation">:</span> border-box<span class="token punctuation">;</span>\n      <span class="token property">outline</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n      <span class="token property">resize</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token selector">.textarea-x:focus-within</span> <span class="token punctuation">{</span>\n      <span class="token property">border-color</span><span class="token punctuation">:</span> #00a5e0<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>textarea-x<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>textarea</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>forFocus<span class="token punctuation">"</span></span> <span class="token attr-name">maxlength</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>250<span class="token punctuation">"</span></span> <span class="token attr-name">rows</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>5<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>textarea</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>forFocus<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>textarea-count<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>0/250<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre>\n        </div></p>\n<h1 id="更多场景"><a href="#%E6%9B%B4%E5%A4%9A%E5%9C%BA%E6%99%AF" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>更多场景</h1>\n<p>:focus-within 伪类原本设计的作用是原生表单元素 focus 时候，祖先<code class="language-text">&lt;form&gt;</code>元素可以也有状态变化。</p>\n<p>但是在我看来，:focus-within 功能之强悍，远远不是仅仅和祖先<code class="language-text">&lt;form&gt;</code>元素玩过家家这么简单。</p>\n<p>理论上，只要页面上任意一个元素 focus，通过:focus-within 就能对页面上任意的元素进行样式控制。</p>\n<p>例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="88138979992964940000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`html:focus-within xxx {\n}`, `88138979992964940000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">html:focus-within xxx</span> <span class="token punctuation">{</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<ol>\n<li>\n<p>相邻选择器，加号，或者弯弯都只能选择后面的元素，但是有了:focus-within，我们就可以对前面元素进行控制，虽然只能在:focus 行为场景下。例如请重复输入密码时候，让上面的输入密码框也高亮。</p>\n</li>\n<li>\n<p>基于纯 CSS 和 focus 行为实现下拉列表的交互成为了可能。只要把按钮和下拉元素放在一个容器中，就可以了。</p>\n<div>\n          <div\n            class="gatsby-resp-iframe-wrapper"\n            style="padding-bottom: 25%; position: relative; height: 0; overflow: hidden;margin-bottom: 2em"\n          >\n            <iframe src="/examples/css-focus-within-pseudo-class-selector/focus-within-pure-css-droplist.html" style="\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n          "></iframe>\n          </div>\n          </div>\n<p><div class="gatsby-highlight">\n        <pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>X-UA-Compatible<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ie=edge<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n    <span class="token selector">html,\n    body</span> <span class="token punctuation">{</span>\n      <span class="token property">background-color</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span>\n      <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token selector">.bar</span> <span class="token punctuation">{</span>\n      <span class="token property">background-color</span><span class="token punctuation">:</span> #e3e4e5<span class="token punctuation">;</span>\n      <span class="token property">color</span><span class="token punctuation">:</span> #888<span class="token punctuation">;</span>\n      <span class="token property">padding-left</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token selector">.summary</span> <span class="token punctuation">{</span>\n      <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>\n      <span class="token property">padding</span><span class="token punctuation">:</span> 5px 28px<span class="token punctuation">;</span>\n      <span class="token property">text-indent</span><span class="token punctuation">:</span> -15px<span class="token punctuation">;</span>\n      <span class="token property">-webkit-user-select</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>\n      <span class="token property">-moz-user-select</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>\n      <span class="token property">-ms-user-select</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>\n      <span class="token property">user-select</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>\n      <span class="token property">outline</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n      <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>\n      <span class="token property">z-index</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token selector">.summary::after</span> <span class="token punctuation">{</span>\n      <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">\'\'</span><span class="token punctuation">;</span>\n      <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n      <span class="token property">width</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>\n      <span class="token property">margin</span><span class="token punctuation">:</span> 4px 0 0 .5ch<span class="token punctuation">;</span>\n      <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./arrow-on.svg<span class="token punctuation">)</span></span> no-repeat<span class="token punctuation">;</span>\n      <span class="token property">background-size</span><span class="token punctuation">:</span> 100% 100%<span class="token punctuation">;</span>\n      <span class="token property">transition</span><span class="token punctuation">:</span> transform .2s<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token selector">.details:focus-within .summary,\n    .summary:hover</span> <span class="token punctuation">{</span>\n      <span class="token property">background-color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>\n      <span class="token property">box-shadow</span><span class="token punctuation">:</span> inset 1px 0 #ddd<span class="token punctuation">,</span> inset -1px 0 #ddd<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token selector">.details:focus-within .summary::after</span> <span class="token punctuation">{</span>\n      <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>180deg<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token selector">.box</span> <span class="token punctuation">{</span>\n      <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>\n      <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n      <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #ddd<span class="token punctuation">;</span>\n      <span class="token property">background-color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>\n      <span class="token property">min-width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>\n      <span class="token property">padding</span><span class="token punctuation">:</span> 5px 0<span class="token punctuation">;</span>\n      <span class="token property">margin-top</span><span class="token punctuation">:</span> -1px<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token selector">.details:focus-within .box</span> <span class="token punctuation">{</span>\n      <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token selector">.box a</span> <span class="token punctuation">{</span>\n      <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>\n      <span class="token property">padding</span><span class="token punctuation">:</span> 5px 10px<span class="token punctuation">;</span>\n      <span class="token property">transition</span><span class="token punctuation">:</span> background-color .2s<span class="token punctuation">,</span> color .2s<span class="token punctuation">;</span>\n      <span class="token property">color</span><span class="token punctuation">:</span> inherit<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token selector">.box a:hover</span> <span class="token punctuation">{</span>\n      <span class="token property">background-color</span><span class="token punctuation">:</span> #f5f5f5<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token selector">.box a:active</span> <span class="token punctuation">{</span>\n      <span class="token property">background-color</span><span class="token punctuation">:</span> #f0f0f0<span class="token punctuation">;</span>\n      <span class="token property">color</span><span class="token punctuation">:</span> #555<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token selector">.box sup</span> <span class="token punctuation">{</span>\n      <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n      <span class="token property">color</span><span class="token punctuation">:</span> #cd0000<span class="token punctuation">;</span>\n      <span class="token property">font-size</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>\n      <span class="token property">margin-top</span><span class="token punctuation">:</span> -.25em<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token selector">a</span> <span class="token punctuation">{</span>\n      <span class="token property">color</span><span class="token punctuation">:</span> inherit<span class="token punctuation">;</span>\n      <span class="token property">text-decoration</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>bar<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>details<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>javascript:<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>summary<span class="token punctuation">"</span></span> <span class="token attr-name">tabindex</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>我的消息<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>javascript:<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>我的回答<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sup</span><span class="token punctuation">></span></span>12<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>sup</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>javascript:<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>我的私信<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>javascript:<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>未评价订单<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sup</span><span class="token punctuation">></span></span>2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>sup</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>javascript:<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>我的关注<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>这里放一段文字表明上面的是悬浮效果。<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre>\n        </div></p>\n</li>\n</ol>',
id:"/home/runner/work/GatsbyBlog/GatsbyBlog/blog/focus-within伪类及其交互应用/index.md absPath of file >>> MarkdownRemark",timeToRead:10,frontmatter:{date:"2020-01-14 17:34:53",path:"/css-focus-within-pseudo-class-selector/",tags:"前端, CSS, CSS知识点",title:"focus-within伪类及其交互应用",draft:null}},{excerpt:"填充的两种规则 只要是路径填充，都有两种规则 nonzero 和 evenodd，无论是 SVG 中的路径填充，还是 Canvas 中的路径填充，如果还有其他和路径相关的技术（甚至设计软件），也离不开这两种填充规则。 如果我们用 3 个点，连成一个三角形，则这两种填充规则没什么区别，如下对比 如果是两个三角形，并且发生重叠，差异就出现了，如下： 交叉点 填充规则的关键，就是确定复杂路径构成的图形，哪些是内部，哪些是外部。内部则填充，外部则透明。 “nonzero…",html:'<h1 id="填充的两种规则"><a href="#%E5%A1%AB%E5%85%85%E7%9A%84%E4%B8%A4%E7%A7%8D%E8%A7%84%E5%88%99" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>填充的两种规则</h1>\n<p>只要是路径填充，都有两种规则 nonzero 和 evenodd，无论是 SVG 中的路径填充，还是 Canvas 中的路径填充，如果还有其他和路径相关的技术（甚至设计软件），也离不开这两种填充规则。</p>\n<p>如果我们用 3 个点，连成一个三角形，则这两种填充规则没什么区别，如下对比</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2020-01-14-16-50-54-634b2c9af2b7fb631c9f18ee72a24ce9-83562.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 315px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 60%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB50lEQVQoz11Sz2vUQBQe0PaiiIhgxZt3T/4hoie9dItaLW29SC9Cz15FBBFEvYgK4sWLVLRdTHezrWXrstVtzVYX3aINaxqTJpmfid/MlLVteDzee9/7Zt77MoRylTGVZHw75fBxQoMwRoxiaixjtkEkqUbRoyGqmFDkT8SCv7TZ+u4u1OuN1caK9+btXONzuxcyP8g2g6wXUljzS3thqVmtffI6v7digfpWzElCpRAKRrnA8RiEi5xpjwtlClQqGIKECsok6jA0pEwSdBdFwWVe7PpsIlUuVI4Yvtj7IccdBFshee765+6s3J3pzrVCP+K5aRYyB1+pfPTR1/En3tPKZvPndsIkUBgDOTPkjYAdH6uSi+XDVysnJ2vDD1YtzaL3Zrrk/PvBEefY9erpm4svXB9FQHpsM1ox/bJzsOQMTbrkUnnq2ToqTK+noSiTZ24tHRmtHL1WOXRlfrkTazI3ZLvQ2q/0xIQLbGjC/eZnVgg7OeLbr38cGP4wUHIwlJVDj20Fsx1jjz1yYRYeMcbRgkm7ftEN6KkbtYERp9wK95OVIbvtaLDkuF60m9w/+vLDtbPTdSv1jmCWbM/HGvffbdjKzq8yZCvK4nr06mPPpv/Vhip9A9CP7cvtp9Lsz3huXpFG/wEkpn+iJdYH0QAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2020 01 14 16 50 54" title="" data-src="/static/2020-01-14-16-50-54-634b2c9af2b7fb631c9f18ee72a24ce9-83562.png" data-srcset="/static/2020-01-14-16-50-54-634b2c9af2b7fb631c9f18ee72a24ce9-738c0.png 200w,\n/static/2020-01-14-16-50-54-634b2c9af2b7fb631c9f18ee72a24ce9-83562.png 315w" data-sizes="(max-width: 315px) 100vw, 315px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>如果是两个三角形，并且发生重叠，差异就出现了，如下：</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2020-01-14-16-51-17-e24da6c822da9f9d233816fd49a58eed-83562.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 315px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 57.77777777777777%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAACNElEQVQozz1RS2sTURQeVyqiVRQX3bpQ8B+4cSt0J1JEEXzVF7oRqW5duFEXUh8bQVsQSnFTdCMGNebdtBHTPE0zmSQ1NJlJJslkMs977/jdmVoYmDPf45zvnBEGI6fZUirVzbL4t74ppzO5YqUh98bAuwOrr9koFFUvbTQrtRYoRTWAqENbN4kw1N1qfStbqDbqzU5bzmRL+XKt09WhkFVu7muO3BvVREmSGuslSelzM286dgWHMMqY53krNSNUGKJwmedSZrtsbFHOgmZeUhz/KGlgLYc6LoMArIDvbGM0PVeYmImffLimGS73EwYFgqGuK+bsYm335ejxB2nN4AghDIJtc/TPYM+V6NE7yYmZxKMlKdvUVd0llI18aXJDexduix3z7fet5bXuqqihBaUeN2MCFBfflPdejU3eS+27Fjt8K5EWeUKY0QJDLrwuh3J9IN8K/SO3E7mmzlkczPbNoZx6YCY+eTd18EZ8+mURkOPvjA3BLqWU/dfj4eIA9YdYx7ApDXZ2/QVwkjNPc3Bi/tTzPETBwQIWz6nHvw/dTHz+1VuIcjMJzHgF7ReT8q5LkdNPsmdfFD9lekFs2AJ2PtIRzoennuXPzRW/rKsBKxD/sIhhOvTE7Oqrry3MfP+zDdDwJ6NArqFBjt1Pz0faukUWIm0gfDL+IoY7hLdfznQl2UShWxS9TD9ecDOAH1eURtdCoZnEdinCC1DsPIR4trN9J8umCLZDIQUy/mf5LkD+AV8vcwadBTcDAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2020 01 14 16 51 17" title="" data-src="/static/2020-01-14-16-51-17-e24da6c822da9f9d233816fd49a58eed-83562.png" data-srcset="/static/2020-01-14-16-51-17-e24da6c822da9f9d233816fd49a58eed-738c0.png 200w,\n/static/2020-01-14-16-51-17-e24da6c822da9f9d233816fd49a58eed-83562.png 315w" data-sizes="(max-width: 315px) 100vw, 315px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h1 id="交叉点"><a href="#%E4%BA%A4%E5%8F%89%E7%82%B9" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>交叉点</h1>\n<p>填充规则的关键，就是确定复杂路径构成的图形，哪些是内部，哪些是外部。内部则填充，外部则透明。</p>\n<p>“nonzero 规则”顾名思意就是“非零规则”，用通俗的话讲，就算计算某些东西是不是 0，如果不是 0 则内部，填充；如果是 0 则外部，不填充。</p>\n<p>“evenodd 规则”顾名思意就是“奇偶规则”，用通俗的话讲，就算计算某些东西是不是奇数，如果是是奇数则内部，填充；如果是偶数则外部，不填充。</p>\n<p>nonzero 规则和 evenodd 规则计算的东西还不一样，nonzero 是计算顺时针逆时针数量，evenodd 是交叉路径数量。</p>\n<h2 id="nonzero-规则"><a href="#nonzero-%E8%A7%84%E5%88%99" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>nonzero 规则</h2>\n<p>起始值为 0，射线会和路径相交，如果路径方向和射线方向形成的是顺时针方向则+1，如果是逆时针方向则-1，最后如果数值为 0，则是路径的外部；如果不是 0，则是路径的内部，因此被称为“非 0 规则”。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2020-01-14-16-52-41-00eba3716cad33a43dfc044d84c647d5-ba5d6.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 254px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 107.08661417322833%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAIAAADJt1n/AAAACXBIWXMAAA7DAAAOwwHHb6hkAAADrUlEQVQ4y2P4////3z9/f/768xvIOnfh76ePb6p7LhZ1//jz5z8M/Pv37z82wPD/79//f0Fy/x4/ueOWVJS51CB8jYHfoks7DgMFHz96/OHDh69fv/748QOb5v//v756t3Xx4cDsTVKxO3iSDolmHWNLOd5Qs/br66ez5szbtm3b1atXHz16hOkEhv9T53ZbFSiEb1CM2SqZflAy7aBw5jGZ5L1+QXMu7z12/dbNt6/fAMGnT58gmiEAwmb43zW5UTNFL3GLUfR6m9CltqFLtGM3+fvPSLBs7Gzf/P/np38wG9E8Dtb8//+E9m0GPgtk0w4IZxyVTD2gEbvFIGqdZfDSGJ+J+2atfXHj8f8P7/9//vjv+/ePnz9fv3bt0KFDr1+/fvLkCUjz45PXdCLWOIYsVEjaLZx6RKjsFG/XZcHcE5LZR2ys27RDl/sW71vlXf2wfuKnP78OHzq8cePG+/fvX7lyhQEUIb++lVRt5Y/d4x4yXz5+l2DtWZHeC8L9F/k6LhsXbhbP38SYe5jNc87c1tk/P7779Or1l69f//79++XLFwYgBdR+dcdpsajtQJe7BM2TS9ojknpELOWQSPoR6dxD/hGzYsN6XMpWTrh+tejv373PnwPD/+fPn+DQ/vcPpPvrp6yiDSxpJ2VT9wP1yybvlUo7APQFT+apEO+pXXKRu2fvBap68Ofvh///QTaDkxADJIUByUNrT2r7L1VP2gGMJ8vw5f0GaSnO7Zx55+Tid2SHTP7y9BUohIHJCSnQGeBR/+PDl/muxfH2rTy5Z6RT9hfY1jgGLxLMPsWVeLgtbdb/n1/+/EePLgYIBfH5qSnrlANXiWcdE00/IpF20CFkoVj64UD/GRUmRddO3gIrw6YZavmTF3Ypm/jSjkqlHQTqV0jaZR6+vNisNNCus7p51///P/9gpm0I+AM2dcGkXdwxe6UyDkumHhRIP2aUuGVW2hTBpAM6cZvfXbgJ9TamZojo+2v3DGM3CGYck0k/yJl4KL148//vnxZO3s3ot3nahD1AVX/+YbMZZDlI4m9nyzbOuP3S2UdFIrafWH8cJPHr+8wJe0yCln158BTZchTN/8DB9vDkNa2YTdypR8My1/9/++YvyK/AGPo9vX3Lqo71IOP/YbMZZDmI+FlVt5Uh+tCOxQehYfEPhIBSDzPr/y9bC1b3B4tmSJyd33sx07Dk96XrcOdA4+Pjp//PXv6HRTi6Zojon0+fv+RV/3/+4j9ywviHnqUB8DrHdiRXNVsAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2020 01 14 16 52 41" title="" data-src="/static/2020-01-14-16-52-41-00eba3716cad33a43dfc044d84c647d5-ba5d6.png" data-srcset="/static/2020-01-14-16-52-41-00eba3716cad33a43dfc044d84c647d5-e9711.png 200w,\n/static/2020-01-14-16-52-41-00eba3716cad33a43dfc044d84c647d5-ba5d6.png 254w" data-sizes="(max-width: 254px) 100vw, 254px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>例如上图点 A，我们随便发出一条射线，结果经过了路径 5 和路径 2，我们顺着路径前进方向和射线前进方向，可以看到，合并后的运动方向都是逆时针，逆时针方向-1，因此，最后计算值是-2，不是 0，因此，是内部，fill 时候可以被填充。</p>\n<p>再看外部的例子：</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2020-01-14-16-53-41-ac5cfceb8f2cae07afde42aaa5a65661-092d7.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 211px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 129.38388625592415%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAaCAIAAAA44esqAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEsklEQVQ4y3VUa0xTZxg+y8wSROWOQIzIFjUDEbM5HLgxFASGTG4FyymliKUXCrsmm+JlW5aFiYwMfwByvxNAyv1SoFBaStshMQ4QCJqBCht3LNjWnsu3r6eCJRlfzjk53znneZ/3fd7nvAjYXCQAhO4VKVUScPN79uTJiNWRx4bnBAF2WAjACUyP63Hqi45u9XH/zFuiiLC7RwOK835rBQDHSbAz2PhudXm8SX6VX+4TUrA7rm9fksosefgsWoONT1Hk/x8AIebmxUU9sYk1tvT2tzgq85RhR67UMVFygCfdxZQIs9rgR/hOYDKEnmPh5x5d602v+Qi9dzSuzZ4jtefKrJKU0ecyY2MK8WezsCQSxze1IU3SzsxJ/5B/OLbFJb7T82LN6ajKgLCCM5Gl7ozGjJMCt+BSUbHYSA5BuAFLgk0JEXjeTW/3Dsj2YDXDOu05Mni4JHR5MBp8aeWfhhbdpGUs9ih1088ApjUQY5gJMwAvhsfc0Qa/8KIP0HtWfIVDYr8ddwDeWPEU1kmK95htoWdueyW2Cb6uL89sfxmEEt1SA5QgEEMcUpdxXbgrXnY+PP8EKrTkKxw5EhjCMbEfXq35Cn9a2QFW19tshTmrz9czbbKg0YDFCcTYhtne+0fojZYCVWBYngdDaODn9O/nSOHVhic/FtvkH1lyiCeBWoYnNYOlJZIqHvaZNOio3Uj9pvadhAEH3kBgWD7EW1L5QyQMYceR+dDKy9xQmtcvdQUSsGkdhEreoN54s/xgTIuVQGnLHQgMzTvOaLDkK2HnnNh91rxBN2bLH26sK/4/rU/PbdkGMbaOoEyWwK9zQZsPscU2XLlfRNG58MJW58896bVW/EEnnszfL6syTUi1zUTtLXJx9UDaYealoAxzwRDE04KzCt9HITnMfF/K0KmQoo3OXgMXTmwDG31DzC+W+aZ8Elpsw5dDqSDh2YhCmL8FX+nCFsd4/dyUXk8xkdvBmwZuye7czex3Slbt58jsOFJrwZ/BF3KPxHf4RlfWHwwORKuwv59ur9nITe31U9OfRebuYQgdEnsdeHJbZrM9d8A7LJ/58bXU01dt6R2ivK4tJsTU6xhVuYD1HeJ6yfbCHZuLVdZf3LG53ONEqxByM46xRQhbxUioBgsLJIVCYJP1ALwyykb9Ol1lVe/6XLNi1NuzWu2iS8xihFFoHuzFaKPMld5gHtN1v0L82mH/6HRpQ0P8tbXzen07ADMEUVpVzmTd3oO2OMaJHC5L9oaUdWe3G1ObEPY7RzUkpNSDFyuQB9FqNN2treMzM+0ryw+WluTPZztWl4WyIecfui1u9pt9LzrFrl6cml4DYB0zFDXSNHgiqPBBi+qNYHq9fvbJk0cPH2o3NibGxtanxlOvNOz9UmWTLLtVIpkGoIIEcKCVECT8kRR18pyoX8HYI4Sk1FKr1UXFxRUVFbNzc93iXrVuY7Cw0ZbZ4xrfoVb+ZbTRAgAiyE/psnEjHf/qxmuwRqORSqWjI6NarXZyYlKjx1YeT3yL5haE/QhnALblos0hTeox8O+CSZ+hw6F3qAW387qXM9fTMQb/zVg3XeR2k5hGMaiA44vPnwJMv/PYBv8B6N5rupMYvfgAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2020 01 14 16 53 41" title="" data-src="/static/2020-01-14-16-53-41-ac5cfceb8f2cae07afde42aaa5a65661-092d7.png" data-srcset="/static/2020-01-14-16-53-41-ac5cfceb8f2cae07afde42aaa5a65661-6cb69.png 200w,\n/static/2020-01-14-16-53-41-ac5cfceb8f2cae07afde42aaa5a65661-092d7.png 211w" data-sizes="(max-width: 211px) 100vw, 211px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>点 B 再发出一条射线，经过两条路径片段，为路径 2 和路径 3，我们顺着路径前进方向和射线前进方向，可以看到，合并后的运动方向一个是逆时针，-1，一个是顺时针，+1，因此，最后的计算值是 0，是外部，因此，不被填充。</p>\n<h2 id="evenodd-规则"><a href="#evenodd-%E8%A7%84%E5%88%99" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>evenodd 规则</h2>\n<p>起始值为 0，射线会和路径相交，每交叉一条路径，我们计数就+1，最后看我们的总计算数值，如果是奇数，则认为是路径内部，如果是偶数，则认为是路径外部。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2020-01-14-16-55-04-64e9f45a8247ace473419aec9f21d09c-4fbd0.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 255px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 106.27450980392157%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAIAAADJt1n/AAAACXBIWXMAAA7DAAAOwwHHb6hkAAADVElEQVQ4y31Ta0hTYRiedPmjZheIBO2H4q9+RH9KCEOzKCJQycx5ZxenzMhLISFYWd4yyxCRhkIkWpn3yeZMq+1sLnGb0jQv003dai5v0+HO3M53vs5l3q2Pw+Gc9/ue73nf93leBty2cAw4MdyFOvBZE1y1rmQ9+aMYIuMAh/stxgYOhxggH+JTKBmOyMh6JAm+UPYwpwmCdQDh/8A4dbV11tL+TsHkNQXeafXiyL0zB/0TxHrlyL/IGQSODLtcc3nl95jVvpHNBxO/ebKQoxzkJF95mimsKGiHEGAY7mbA94JR+6/gqImqRsvMvKReXlzUFZslOsMSx118evVK5cwPA3EEAIDROeL4Vto0fEE/x+PUmYZn3BHr8pLOpBcp35aJ5K+bV0enoM1G8mLY7pqpTsHi0u5z0R/mB8foIuchnAbkhk3zMyq24eZd8Yv8NkN05vqYHlAHNhpGHVoc1gXEd4awO8zqUeJX7cR6XZgQwAnMyi+875Gj9MhQ3Yp57hzXwe1gkpzqW2mhyCNFfp3dPKci+Z1OlxNAG7T3IvW3ubXh/IYHgux213I1hEtwGxhQYkwptEEJwkPpA2EpLRYVyY/Z1ugOIbF5j4NY07pJI4QKgJu2TELjSW40M7cjkNnhw5Zd4nRYJAqYX+L8bSF2hiTqqtx6kmXDGDvBVN8GJJrKgJjzCS2H+arQ6Lq5/ArosBMb6waj+WMX3SCc0nsHmLiPRK9ai+JenUju9UuTeab2XU7tNKvJ+icLqgs5Aghc+L7MlGZktKux3yeu+1S63I8n9WIjYazWxf5haWTO2Wu1E/KRzRx3g93uMZtvcFu9uArfVKk/T3qA+z0jsSY7ScCIR57lCwkRsB1TtYe8SfDFM/6zbxrimy4/wuwW1vc59bPhnDbC7Qvqsd06b3FTYLtuOoTVfpynOMZThLLb7AZCILis1YUmfSop6aZ9wcB3LhpP9+RNeZd38lefxF7BSwlpGBdZp3nEwE+osQzp9k97k3xlcCwoRRzE7VnSuv2IU30yD4yYI1IhijJMJpNSqZTJZAiCaDQaFEXpqaLcCopz3pczy92DQ+XlFnl8Eq6hDKPRSGBUKhXx1mq1DofDPZKUkdaEPet5xZSB8G2CuMv7CzhzF1NVYiZmAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2020 01 14 16 55 04" title="" data-src="/static/2020-01-14-16-55-04-64e9f45a8247ace473419aec9f21d09c-4fbd0.png" data-srcset="/static/2020-01-14-16-55-04-64e9f45a8247ace473419aec9f21d09c-9c75c.png 200w,\n/static/2020-01-14-16-55-04-64e9f45a8247ace473419aec9f21d09c-4fbd0.png 255w" data-sizes="(max-width: 255px) 100vw, 255px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>例如上图点 A，我们随便发出一条射线，结果经过了路径 5 和路径 2，交叉的路径个数为 2，是偶数，因此，属于路径外，不填充。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2020-01-14-16-55-22-f28effae307a0172bb31d7aa650f8fdb-f4849.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 249px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 106.82730923694778%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAIAAADJt1n/AAAACXBIWXMAAA7DAAAOwwHHb6hkAAADf0lEQVQ4y21TW0xTWRS9HxNjjC8wIqCOJibqZCbBmJj4Y5wffMSYjA/QCEh1sFJ8UBXFyENhDGo0YgiaSpyBUWeGh4Va+xKRciktgjAKpmpBkCAR5NFYLKXtvedszzm3Qaicj9vm7Lv2XmvtdTmYerCIEPl52Q5u1/hVlV2W4fWJrIDhu8N9+yuImAHR4GD31t8z5MXr9qlXbrvXbmqll6w0PRizxqP9I6Z/rAlK7YpEY2hSfdiRxhlJNmW6FrxjdDqeDoxFWhJvFt/ZcvaneO2cHY9+2M/PkvGzkxoi5PzG30o+2Oz0Bb8QII8nTxYE8nCfzGmNTUPDw/Z6+4O/6jOz9dHHqzfvKtnz8+nU7MeAvGSCiLGAiDgsdQnQZoJQVnrlvaI60hlh1n946NOLzma19d/c8g9V5i99gzA2StSD3z9Fs+SHg3+1dNt/6ttPAQs+HKAnsmfp5aqomHJZdm2ZomDoeA6e4jbGVLdnVHFGNyvWZLhTQ1ACIk1EwU/h7jfda2Q6LuX/eTu1t06UkCqavCrEuLZU2kITqsPjHxuKnpA7AdMCGy4W/qGN3nxz7Z4Kx7O3EtlJe8aYUneOxKWoZyiaF8YZH6oInm4C0zHwpaktf1nsdbkKkB8Hh4RSoZfGu/URux/+mGIJidHrSp9BWbmgukvRwnhhSpGlspGOZe2mgKWouAeceZuyFBvOzz3WEnbQrNmdCTqDwF4YUD/xvX03kVYuKDSS7U15f6/fdJskLELRsOhAraaYp9t0fb4fm2tR2yYMCgZLK/78ri9Kpp9/2Bop5xckW0N2aTX3bWA2Zy1PPHRaBz43+l5zQDlzo+CKYWZCbWSyJVzOhxy2LjtQ/efeS6vitIvjDF11L4LddgN0A7wGGGHDh1461u43hh6yRSbVhSY3RiXqh57bCwtquZjqnAt6Ka3cRM5HAUgyj5KZAOQ76AR8Kj89TKkNV7bMkRkvX6ygssfH8vMMS7aXfWzrDNBG7FCrmYfEWB9CHoBGXrU67cHs3Pe/ZF6tst5oAOAR+iR4rmRU5Z6rnF6z9NFRS7zjqUoNF29Ly6gAz0AfgAHhJuqKaEot8F5TcV6v1+Fw9PT0dHR0dHV1uVyuQNSZ8ufG1hXRxe36ZikYmGWB9MX9/ahUwzmdTp1Ox/N8TU2NyWTq7e0NpIVJ8Ls9bb8mgNkiZSCI31e5VQ0QXHVGBgAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2020 01 14 16 55 22" title="" data-src="/static/2020-01-14-16-55-22-f28effae307a0172bb31d7aa650f8fdb-f4849.png" data-srcset="/static/2020-01-14-16-55-22-f28effae307a0172bb31d7aa650f8fdb-4cd05.png 200w,\n/static/2020-01-14-16-55-22-f28effae307a0172bb31d7aa650f8fdb-f4849.png 249w" data-sizes="(max-width: 249px) 100vw, 249px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>点 B 再发出一条射线，经过路径片段路径 2 和路径 3，交叉的路径个数为 2，是偶数，因此，也属于路径外，不填充。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2020-01-14-16-56-50-a5f0f6b0f9471fd45397e4263f76f16f-21b91.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 252px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 107.53968253968253%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAIAAABPIytRAAAACXBIWXMAAA7DAAAOwwHHb6hkAAADgklEQVQ4y3VTe0hTURy+RBZpFFTYkvqjfyoIghDpj8qgsuyBYRSmQnOmrOm0Igp8hIqhVPayh6vWw1JhujbXtLWl1uamW74ftTSd7qFp+cjWpm3nntO5965pphfuj3PvOd/v+853zkegWQ8JSVy/DlNjkfhHwQs0/0N4RxBCkoTUaHwUHo8V31bE7b8WtvPqV2M/NctMzQvGL3ANtXTlZ8v2HxEuj1L6JTctjNUV5L2hZsh5mDEnrk6V5gZPuP5QMRH5zofXsCqhfl2ilpVQt+9kmdNkoclJD8c0GEIG/HPHkU52qqFlQHhTlXiufHt8BStasTms6NCWdMF9NV7wG0CAxeMWAMxmnuzqy0goHGB26J4CZotRZ1Q9eyc4+yTl9HPQYcTa8TrspNvLjL9xnynajwd3a4LCi0dbur0dsUpK69h3UfrzMxdfXS9rNEgU6FkxOdMwxsypPvNWjjQ4Rmo11E+iCZuL7CFhLyDNCAmr767MvEPcMa+LevnwaBaacmI8MY5QM0K3EBQhZAETqY95i640B6alSQ1PvyD0EbiNJOiFyOnoPp9euCm6knXitaqinfIfkEQFhUQXEHoEkQ2hnuaaoFjpCr768Omy0aYuRhRJ+9z66oMgICw5WuAaGWP2Rcw8N9pEd25mpS+n1pdr2M0WD3WaUFuHS9dAoSfGsg5mi/MrGdppw9x0BTTDJ60xZntGePjDBdwPBxIqR5IuoeJS5nA+l6hGOr54PfqH2WOx21VxLCV0721/vt6PWxcSUTSibWZc1V8psdS2eS8MMTsXdMs2Wb1/lMKfp1vLVS/h6vdg/V0W1NqYtYGTm6PE7QFEc4AxOdVzfIzNl/rGaQO4GoxfzNGE8l/Xnr0ZGpIfGCN3dHqUE/9fd0CTV79QL4tUsnja1fFqFk+3hq2qulq6L1lJRNSI7imZqMwBZu46HBw+cEqyNJ5WHlvLTZIgl3O0rXtXjHQbR4as1rlkzyAvLajyi3obwK9bGanQirTM1I/OnuDjRSVCzbxg5iRwEoPZEp94/dE4Mfr2Hf8i6TxZ2k05kbfcTR0E7TBJ5xICADx5+Jt+QZ6CiHhfXqjxyoE03i6v+s1PI2w2m0QikclkcrlcqVQODg56tk0vtX40X97Isb/X0zBy2hTMYf9F2O12k8nU399vNptxdTgc03mkLwPIzkPWAQY001Wc1j8E/EIlP58P6wAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2020 01 14 16 56 50" title="" data-src="/static/2020-01-14-16-56-50-a5f0f6b0f9471fd45397e4263f76f16f-21b91.png" data-srcset="/static/2020-01-14-16-56-50-a5f0f6b0f9471fd45397e4263f76f16f-0777d.png 200w,\n/static/2020-01-14-16-56-50-a5f0f6b0f9471fd45397e4263f76f16f-21b91.png 252w" data-sizes="(max-width: 252px) 100vw, 252px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>最后这个点 C，发出的射线总共和 3 个路径交叉，是奇数。因此，属于路径内，填充。</p>',id:"/home/runner/work/GatsbyBlog/GatsbyBlog/blog/SVG、Canvas中nonzero和evenodd填充规则/index.md absPath of file >>> MarkdownRemark",timeToRead:2,frontmatter:{date:"2020-01-14 16:48:52",path:"/svg-canvas-nonzero-evenodd/",tags:"前端, CSS, CSS知识点",title:"SVG/Canvas中nonzero和evenodd填充规则",draft:null}}],length:30,tag:"CSS",pagesSum:6,page:2}}}});