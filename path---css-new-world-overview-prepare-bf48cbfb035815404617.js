webpackJsonp([84843808736774],{1206:function(a,n){a.exports={data:{file:{childImageSharp:{sizes:{base64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAeCAYAAAAsEj5rAAAACXBIWXMAAAsSAAALEgHS3X78AAAHlElEQVRIx12We2xT5xXAbcI2Vmn7o1I1uhVYRxL8tuPn9bXv0+/4/YgdOyYkkATCCEEYsqVNC2wCIYQWShmUBFh4hMAWECot0BUtlI4yAS1oKqJQXimsDBgTU8codnLO7r0uUPpJn87Rp+/8vvOdc75zr8xmZmTieI1NykU5yxOfxDncz3NUjAlyDXMjXGMhys+cG+FzGQ8VU4t7XuV8z8m+GUkrJclSqVReYJ0ZWQ8Tl2AdTPhnq9ns2QKd+crDZiHha8NsYCE21HZiXphpb3sxxTf99Tdsw51ldHqFaLOXXyzvYqOyZ0YPk5soylfouuUbvHOxh56JbiqJfi4/FnE1lxKetrGUZ954nbcdU/752ORpxWVsc6mZjPxctFtApeVtra1lmIPwTxClgeCqvGTsX/WWOEbtyTGWSoGbToOPzUHQ1QghVxOEhRniZ5U8XB4TzvTdgj1ZJdq2OOrkGhVRBnrYFum6TiK0l2fr0emMlVxcBhlnEniqDjlBuqg0CnD0MPWiDrwzhR4u+5B3x3WiLUNHJjxzZYvR8ZKTCP+Xo1JoM/nBYvSB1egHuyUIrCOBPj4LtD0KlD2K4h7SGip62aygxzaK9rHA3Aqt2vw0MRYjnyJtYaQdsXG9hgWFwgmVlXZUKUjUqmm0CgfwhA80Kgr1Wg40Sue4SuFEnZq+YjMbJ0kh0zmfemjQ0j2EJYh2a23RVOODIBvHmCsBUaoWLDoWKIsP50bTApxC5QwH1Ghp0Gk4MBk8aDLQEslooCc88VClsK+zGANI2mqLer0XFuea8PSuN+DM7o3QWyhAR7IBfj+vDbyOICS9aSjkZo8nvSlUKuxXLDUOKdN6LSl/AlRUE+vNAnD50l8XeTIEPiYEzXYG5mlNeGz7BvjPpY/g5snDcHxwE+zs7oCh1zvHCrNm48u/ML8j2muVQblBZ3t6ZY2KXKtQcDiwdk1xx9rV0BlqghEuD4fNUTy1Zwhw7Cbioxu461fdsOgFDa5pbh3zu6NifE9f+XCPlGHS5nuaFI3K8brJ4EUHES4WFiyEP2/dCPc2vYH/3NIHePcywP1LWLp3Ec4tWQa3FvbAu7294yqVA801rju5utYfiQyKDD4DnC8GWEhMafJPtBALxuHjo3+C8bufIn59DfHBFcDiDcQvzyF+/iEsbWuDadNMaDW5H7nY6Iyyh165zfLNtdUqIqLTsEJSQqBVUTD1JQPqdRT8sf9NuH7kMHy0fRg+O3EUzp96H/Zs2SBklxFKxwFmowtdTCIoPQx7oKLzl32PPTRPVSudDwQgCrUGL0+twdzsDjjSdwD2J1fh/q7N0N+1EtykB178qVY4lAahRktWkw95JrG4DAxPvHU3Wwb+rlcsHfK0WNxCoMdUCgdUaxnMBPKw7dVe2LyhDw4MboORA4NQOd2CaiUFaqWjZJGAyQGRUeubP8FqElqZspquEBeUM2zrnEQUa3R8USVcp2qGDZV6ErqXL4PfrlwFhSU9cPL4MejfshOsZq90sCg5KvHZ5MnPfa+cmFrxukRFuRZNcYqIoNngHheeFmiF11ClIDBdPwfqG9qhc1E3rF25GnrX90M204JqBfWItPrP8lTqa7vFpSw3GJ9cZjI4pW5TXaWezpKxh4Q5gEY9LwApVOtZMApxVWhd2DKvC7K5FjTUsFCj45Ah4yXaHuz1MBlgyHCb1HXISIXMTcekOJqN1h/72Mx92h5DwuwHjeChWseBQsNgJJ6H944eB5oNgaLajnaL/07E24wuKr7Cz+XuuenUsMioCxYmyHhnSPLQTYVVYVfjI46Mo80WBLMgLY4E1FhCOENBAsfHQG/0juuNPqGguU8ywXas5XNbg6783wJ8w781GtUPJc+irkap/Ufdje0JXytStnDJbA2D1Z4EKxEHsyUMRmsIdcZaNFpCYBYqwWQLPhD3Btn6t2Pe5uF0cD7Sdr/xmSab8racFaDooOvuk0wDEs40EFQGbVQGbEKXJoTPgZ3JoJGIgULvR6M1jE67rzvpae5ojC7GEJ9rfgILc7lC3NV0T6flTtjoPLK+VuD8rcD65gDtaQInPxOtzoxQRrXgD8/BdW/+YezYByfxvfdHvnxl+ZLKCDfzUMIze60Ey+brJukrqcjA1u3tBw8dfZiZuRQFaNFory/WEPUlE5kFK5WDQKRtbFPfUOnChUvFL27cwKuj/8CBHXv2iQw/k/KGuNwyCYiIkhw+sO/569eu7b1+ffR/H5z4BAcG38X1m/biyjX9ODR8GC9dHsXLV0fx5KlzePDIyFd7ht9ZJZhJrcvLhV/wMuUPljQWtC6Z+FjfuWPHlPMXLq64Onpz3d8/Pf9WX//OW2vWbITBof3n3tqya9fbh/7SvW1gZ9Xj/V1dr8kf614qIZONjBwrezi8Ty54K5d9ZzTmF+xe1LnioaD+4Nvrn4/ermif3yHp8UCDLMCky7Z+n192+/YdST9z5mPZ7t1D8ouXv6gQ4S9WTplks7mut8xZijxbKz2vvi2D39/cPyB/HC5xOm2czPvd35F8rkGCS0+I4WXV1QbJaMq06XqbNXCQJIILpH8hOic3GghZMpl62qG/Nf4PRzaQ862MzO4AAAAASUVORK5CYII=",aspectRatio:.6666666666666666,src:"/static/avatar-dc7bc85837bf005ae32d2a37dfdfa8a2-25c91.png",srcSet:"/static/avatar-dc7bc85837bf005ae32d2a37dfdfa8a2-8a97b.png 200w,\n/static/avatar-dc7bc85837bf005ae32d2a37dfdfa8a2-0fdf3.png 400w,\n/static/avatar-dc7bc85837bf005ae32d2a37dfdfa8a2-25c91.png 600w",srcWebp:"/static/avatar-dc7bc85837bf005ae32d2a37dfdfa8a2-216f6.webp",srcSetWebp:"/static/avatar-dc7bc85837bf005ae32d2a37dfdfa8a2-5d70e.webp 200w,\n/static/avatar-dc7bc85837bf005ae32d2a37dfdfa8a2-d1677.webp 400w,\n/static/avatar-dc7bc85837bf005ae32d2a37dfdfa8a2-216f6.webp 600w",sizes:"(max-width: 600px) 100vw, 600px"}}},site:{siteMetadata:{title:"女王控的博客",description:'前端工程师，黑猫女王控，欢迎勾搭，技术相关<a href="https://github.com/towavephone" target="_blank">@towavephone</a>，QQ闲聊<a href="tencent://AddContact/?fromId=45&fromSubId=1&subcmd=all&uin=634407147&website=www.oicqzone.com">@towave</a>，bili关注<a href="https://space.bilibili.com/11507708#/" target="_blank">@towave</a>',siteUrl:"https://blog.towavephone.com"}},mainPost:{html:'<h1 id="概述"><a href="#%E6%A6%82%E8%BF%B0" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>概述</h1>\n<h2 id="css3-出现的历史和背景"><a href="#css3-%E5%87%BA%E7%8E%B0%E7%9A%84%E5%8E%86%E5%8F%B2%E5%92%8C%E8%83%8C%E6%99%AF" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>CSS3 出现的历史和背景</h2>\n<p>CSS2.1 中的 CSS 属性的设计初衷是展示图文。因为在 CSS2.1 时代，互联网刚刚兴起，计算机硬件、网络带宽等基础设施都比较薄弱。例如：</p>\n<ul>\n<li>屏幕像素低，所以丰富的色彩和细腻的图形细节无法呈现；</li>\n<li>硬件性能差，所以动画和滤镜渲染效果不佳；</li>\n<li>网络速度慢，所以高清大图和视频加载不出来。</li>\n</ul>\n<p>迫于当时的环境，Web 页面只能显示图文内容，而图文内容的显示并不需要特别复杂的布局。所以，严格来说，CSS2.1 并没有专门的与布局相关的 CSS 属性</p>\n<p>而 js 方面由于 Ajax 技术的兴起导致交互、布局越来越复杂，但 css 没有跟着进步，只能尽可能的挖掘 css 的潜力。于是会有很多当初看起来很奇怪的用法，如 float 属性，明明设计这个 CSS 属性的初衷是实现简单的文字环绕效果，结果最后这个 CSS 属性居然成了实现网站布局的中流砥柱。</p>\n<p>因此扩展 CSS2.1 的功能势在必行，于是有了后来的 CSS3。很具有代表性的例子就是环境变量函数 env()。这个函数的出现是因为 iPhone X 等设备顶部的“刘海儿”和底部的触摸横条会和页面内容冲突，所以需要 env() 函数给网页设置安全距离。</p>\n<p>又比如说 CSS 布局，Multi-column 多栏布局的第一版规范居然是在 1999 年 6 月制定的，比弹性布局早了整整 10 年。我们仅从规范制定的时间就可以推断 Multi-column 多栏布局和 CSS 中的 float 属性一样，它们都是为图文排版布局服务的，因为 1999 年的时候复杂布局还不是强需求，图文内容展示才是主要的用户需求。</p>\n<p>根据应用场景的类型将 CSS 新特性划分为下面 4 个方向</p>\n<ul>\n<li>更复杂、更具弹性的布局的支持，如弹性布局、网格布局等；</li>\n<li>更丰富的视觉表现的支持，如圆角、盒阴影、动画和渐变等；</li>\n<li>更多样的浏览设备的支持，如 CSS Media Queries 媒体查询等；</li>\n<li>开发者 CSS 自定义能力的支持，如 CSS Houdini 等。</li>\n</ul>\n<p>下面再说一说 CSS 新特性的另外一个特点，那就是语法更加复杂，但是理解更加简单。在 CSS2.1 的世界中，很多 CSS 属性虽然语法很简单，但是要理解渲染出来的样式表现，可是要花费大功夫的。除盒模型、块级格式化上下文、包含块等 CSS 特有的概念增加了学习成本之外，更重要的是下面两个原因。</p>\n<ol>\n<li>CSS2.1 中 CSS 属性主要为图文排版服务，而图文排版是有一定难度的，更不用说是在英语框架体系下的排版设计了。这就导致中文开发者无法轻松理解一些样式表现，例如图文元素默认的基线对齐，这个“基线”就是英语中特有的概念。</li>\n<li>CSS 属性用在了远离设计本意的场景中。例如之前提到的 Float 布局，很多人都不明白为什么容器元素的高度会塌陷，这是因为 CSS 的 float 属性的设计初衷本来就不包括将该属性用在模块布局上。</li>\n</ol>\n<p>CSS 新特性则不一样，其语法设计非常明确，布局相关的 CSS 特性就用来布局，视觉表现相关的 CSS 特性就用来实现视觉效果，背后没有其他看不见的 CSS 特性互相干涉。只要记住了语法，就不会出现意料之外的渲染场景。</p>\n<p>但是，这并不表示学习 CSS 新特性就很容易，因为简洁明了的语法是牺牲 CSS 属性的数量换来的，也就是理解成本降低了，但是记忆的成本提高了。例如，网格布局中共有 27 个完全不同的 CSS 属性，其中还有网格布局专用的 CSS 函数和单位，想要学透网格布局是要下苦功的。</p>\n<p>最后，总结一下，CSS 新特性是跟随时代发展而产生的，旨在构建更加丰富的 Web 应用程序。CSS 新特性分工很细，这带来的好处是让语法理解起来更简单，但是这些 CSS 特性属性种类更复杂，我们需要记住很多 CSS 特性，本书会详细介绍的 CSS 特性就不止 100 个。</p>\n<h2 id="模块化的-css-新世界"><a href="#%E6%A8%A1%E5%9D%97%E5%8C%96%E7%9A%84-css-%E6%96%B0%E4%B8%96%E7%95%8C" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模块化的 CSS 新世界</h2>\n<p>CSS 世界已经有了 CSS2 和 CSS3，那会有 CSS4 吗？</p>\n<p>答案是：不会有 CSS4！实际上，现在连 CSS3 这个词都已经名存实亡了，因为 CSS3 已经解体了。</p>\n<p>为什么说 CSS3 解体了呢？</p>\n<p>因为 CSS 按照大版本的方式进行迭代实在是太低效了。低效的原因其实很好理解，如果 CSS 这门语言必须按照大版本迭代发布的话，只要其中一个版本有一个 CSS 特性存在极大的争议，那这个版本的 CSS 的发布时间就会延后。例如，CSS2.1 的规范在 2002 年开始制定，而一直到 2011 年才成为推荐规范，整个过程足足花费了 10 年的时间，就是因为一些次要的 CSS 特性拖了后腿。</p>\n<p>在 Web 前端领域，新技术的发展十分迅速，而 CSS 的规范又是基于当前环境制定的。如果 CSS 的规范从开始制定到最终浏览器完全支持需要横跨很多年，保不准这个 CSS 新特性很快就过时了，或者开发者都约定俗成使用其他方案替代实现了，那之前辛苦做的工作就白费了。CSS 这门语言的竞争力和潜力也会因此下降，因为不能快速响应时代变化的语言不是一门好语言。</p>\n<p>为了加速没有争议的 CSS 特性的标准化，W3C 的 CSS 工作组做出了一项被称为“Beijing doctrine”的决定，该决定将 CSS 划分为更小的组件，并把这些组件称为模块。这些模块互相独立，各自按照自己的速度走向标准化。例如，CSS 选择器模块已经到了 Level 4 了，弹性布局模块还是 Level 1。</p>\n<p>将 CSS 划分为独立的模块是一个非常明智的决定，浏览器厂商可以根据对自己需求的判断决定究竟对哪些模块进行支持，哪怕这个模块还处于草案状态。例如 CSS 的 env() 函数的规范还是草案状态，但是 Chrome 和 Safari 浏览器的厂商却快速响应，对其进行了支持。对开发者而言，如此迅速地支持新特性犹如一场及时雨。</p>\n<p>近几年，浏览器陆续支持一个又一个新的 CSS 特性，这已经成为一种常态。得益于 CSS 这种模块化的划分，以及浏览器厂商的积极支持，我们可以非常及时地使用这些 CSS 新特性来让我们的 Web 应用程序变得更丰富多彩，毕竟有很多内部的项目是不需要考虑兼容性问题的。</p>\n<p>当然，这种模块化的设计也不是没有弊端，最大的问题就是设计冗余。例如，弹性布局和网格布局中的对齐属性其实可以统一，但它们却是分离的，这就会徒增学习成本；分栏布局、弹性布局和网格布局中的间隙其实可以统一，但它们也都是分离的，各有各的间隙属性。好在纠正及时，现在这三大布局全部开始改用 gap 属性表示间隙，减少了因为模块化带来的设计冗余。</p>\n<p>模块化策略带来的好处远远大于弊端，正所谓瑕不掩瑜，与带来的好处相比，模块化设计的弊端几乎可以忽略不计。从这个角度看，CSS2.1 之后的 CSS 世界就是模块化的新世界，所以我称之为 CSS 新世界。这个 CSS 新世界带来了新的 CSS 属性，并让很多 CSS2 中模糊的概念有了明确的定义，如尺寸体系、逻辑属性、CSS 值类型划分等。CSS 新世界中各模块虽然发展独立，但是相互间还是有很多共性和联系的。因此，CSS 新世界不仅是一个模块化的世界，还是一个缤纷多彩，同时又自成一体的严谨的世界。</p>\n<p>最后，本书和《CSS 世界》相互补充，《CSS 世界》中讲解的都是 CSS2.1 的知识，本书讲解的都是 CSS2.1 之后的知识，再加上《CSS 选择器世界》，这 3 本书中的内容一起构成 CSS 这门语言的完整面貌。</p>\n<h1 id="需要提前了解的知识"><a href="#%E9%9C%80%E8%A6%81%E6%8F%90%E5%89%8D%E4%BA%86%E8%A7%A3%E7%9A%84%E7%9F%A5%E8%AF%86" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>需要提前了解的知识</h1>\n<p>本章主要介绍 CSS 数据类型、CSS 属性值定义语法和 CSS 全局关键字属性值。这些知识适用于任何 CSS 属性</p>\n<h2 id="互通互联的-css-数据类型"><a href="#%E4%BA%92%E9%80%9A%E4%BA%92%E8%81%94%E7%9A%84-css-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>互通互联的 CSS 数据类型</h2>\n<p>CSS 数据类型定义的是 CSS 属性中具有代表性的值，在规范的语法格式中，使用关键字外加一对尖括号（“&#x3C;”和“>”）表示，例如数值类型是 <code class="language-text">&lt;number&gt;</code>、色值类型是 <code class="language-text">&lt;color&gt;</code> 等。</p>\n<p>掌握 CSS 数据类型对了解 CSS 新世界的体系和快速学习 CSS 新特性非常有帮助。</p>\n<h3 id="为什么要关注-css-数据类型"><a href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E5%85%B3%E6%B3%A8-css-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>为什么要关注 CSS 数据类型</h3>\n<p>任何 CSS 属性值一定包含一个或多个数据类型。</p>\n<p>在 CSS2 时代，CSS 数据类型的概念并不怎么重要，因为常用的 CSS 属性翻来覆去就那几个，这些 CSS 属性支持的属性值我们反复使用就记住了。但是在 CSS 新世界中，由于各个 CSS 模块独立发展，没有统一的大版本进行约束，因此 CSS 的发展和变化非常快，这导致短时间内大量的 CSS 新属性如雨后春笋般涌现。</p>\n<p>如果此时还和过去一样，只是凭借经验去学习 CSS 新特性，那么学习起来肯定是十分困难的，因为效率比较低下。此时 CSS 数据类型的价值就体现出来了，当 CSS 新属性出现的时候，我们无须记忆数量众多的属性值名称，只需要记住支持的数据类型即可，这样学习成本就大大降低了。</p>\n<p>举一个例子，background-image 是使用频率非常高的一个 CSS 属性，这个 CSS 属性的语法结构是下面这样的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="84312019653006900000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`background-image: none | <image>;`, `84312019653006900000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">background-image</span><span class="token punctuation">:</span> none | &lt;image><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>这个语法中出现的 <code class="language-text">&lt;image&gt;</code> 就是一种数据类型，它包括下面这些类型和函数：</p>\n<ul>\n<li><code class="language-text">&lt;url&gt;</code>；</li>\n<li><code class="language-text">&lt;gradient&gt;</code>；</li>\n<li>element()；</li>\n<li>image()；</li>\n<li>image-set()；</li>\n<li>cross-fade()。</li>\n</ul>\n<p>也就是说，CSS 的 background-image 属性不仅支持 url() 函数和渐变图像，还支持 element()、image()、image-set() 和 cross-fade() 等函数。</p>\n<p>通过上面这段描述大家已经知道了 background-image 属性原来支持这么多种类型的属性值，那么请问，CSS 的 mask-image 属性支持的属性值都有哪些呢？</p>\n<p>这么突然一问，想必大家一时也想不出准确的答案，毕竟见得少、用得少，这么细节的知识哪能知道呢？没关系，我们看一看 mask-image 属性的语法：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="66914123253254480000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`mask-image: none | <image> | <mask-source>;`, `66914123253254480000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">mask-image</span><span class="token punctuation">:</span> none | &lt;image> | &lt;mask-source><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>这个语法中出现了 <code class="language-text">&lt;image&gt;</code> 数据类型！这下就豁然开朗了，这个 <code class="language-text">&lt;image&gt;</code> 不就是 background-image 语法中的 <code class="language-text">&lt;image&gt;</code> 吗？没错，两者是一样的。也就是说，mask-image 属性不仅支持 url() 函数和渐变图像，还支持 element()、image()、image-set() 和 cross-fade() 等函数。这样 CSS 的 mask-image 属性的语法就学会了一半，真是高效！</p>\n<p>由于 CSS 属性值包含的 CSS 数据类型都是互通互联的，因此，CSS 数据类型只要学习一次，就可以广泛运用，这样要比根据经验记忆几个片面的 CSS 属性值实用多了。</p>\n<p>CSS 数据类型除了可以帮助我们快速掌握 CSS 的语法，还能快速更新整个 CSS 世界的知识库。例如上面介绍的 <code class="language-text">&lt;image&gt;</code> 数据类型中，我还故意漏了一个新成员，那就是 paint() 函数，它是 CSS Paint API 带来的新成员，相关规范在 2016 年才开始制定。</p>\n<p>如果你是通过记住具体的 CSS 属性值来学习 CSS，那么你应该会知道 background-image 属性支持 paint() 函数，因为几乎所有 CSS Paint API 案例都是用 background-image 属性来举例的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="20299272148442604000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.example {\n   background-image: paint(some-ident);\n}`, `20299272148442604000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.example</span> <span class="token punctuation">{</span>\n   <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token function">paint</span><span class="token punctuation">(</span>some-ident<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>不过要是此时问你 mask-image 属性是否支持 paint() 函数，由于你大脑中的记忆库里没有相关信息的储备，因此你会疑惑，会不确定，会想要重新去翻阅资料学习，甚至还会做个演示案例确认一下。</p>\n<p>如果你记忆的是 <code class="language-text">&lt;image&gt;</code> 数据类型，再问你 mask-image 属性是否支持 paint() 函数，你肯定会毫不犹豫地回复支持，因为 mask-image 属性值支持 <code class="language-text">&lt;image&gt;</code> 数据类型，而 paint() 函数就属于 <code class="language-text">&lt;image&gt;</code> 数据类型。</p>\n<p>不仅是 mask-image 属性，CSS 新世界中还有很多支持 <code class="language-text">&lt;image&gt;</code> 数据类型的 CSS 属性，以及以后会支持 <code class="language-text">&lt;image&gt;</code> 数据类型的 CSS 属性都会同步更新 paint() 函数这个新特性。因此，大家一定要关注 CSS 数据类型，这可以让我们学习 CSS 新特性更迅速，理解 CSS 新特性更轻松。</p>\n<h3 id="几个常见数据类型的简单介绍"><a href="#%E5%87%A0%E4%B8%AA%E5%B8%B8%E8%A7%81%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E7%AE%80%E5%8D%95%E4%BB%8B%E7%BB%8D" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>几个常见数据类型的简单介绍</h3>\n<p>CSS 数据类型非常多，保守估计，至少有 50 个，这里介绍几个常见且值得一提的数据类型。</p>\n<p>CSS Shapes 布局中有一个名为 shape-outside 的属性，我们不用关心这个 CSS 属性的含义，只看这个 CSS 属性的语法：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="77130153678038930000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`shape-outside: none | <shape-box> || <basic-shape> | <image>;`, `77130153678038930000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">shape-outside</span><span class="token punctuation">:</span> none | &lt;shape-box> || &lt;basic-shape> | &lt;image><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>这里出现了 3 种不同的数据类型，下面分别介绍一下。</p>\n<ol>\n<li>\n<p><code class="language-text">&lt;shape-box&gt;</code> 支持的属性值如下：</p>\n<ul>\n<li><code class="language-text">&lt;box&gt;</code>；</li>\n<li>margin-box。</li>\n</ul>\n<p>在 CSS 世界中，需要用到 margin-box 的属性并不多，shape-outside 属性就是一个特例。虽然 <code class="language-text">&lt;shape-box&gt;</code> 数据类型并不常用，但是 <code class="language-text">&lt;box&gt;</code> 数据类型却很常见，<code class="language-text">&lt;box&gt;</code> 数据类型包括下面这些属性值：</p>\n<ul>\n<li>content-box；</li>\n<li>padding-box；</li>\n<li>border-box。</li>\n</ul>\n<p>background-origin 和 background-clip 等 CSS 属性的属性值就是 <code class="language-text">&lt;box&gt;</code> 数据类型。</p>\n</li>\n<li>\n<p><code class="language-text">&lt;basic-shape&gt;</code> 支持的属性值如下：</p>\n<ul>\n<li>inset()；</li>\n<li>circle()；</li>\n<li>ellipse()；</li>\n<li>polygon()；</li>\n<li>path()。</li>\n</ul>\n<p>clip-path 和 offset-path 等 CSS 属性的属性值属于 <code class="language-text">&lt;basic-shape&gt;</code>数据类型。</p>\n</li>\n<li>\n<p><code class="language-text">&lt;image&gt;</code> 支持的属性值如下：</p>\n<ul>\n<li><code class="language-text">&lt;url&gt;</code>；</li>\n<li><code class="language-text">&lt;gradient&gt;</code>；</li>\n<li>element()；</li>\n<li>image()；</li>\n<li>image-set()；</li>\n<li>cross-fade()；</li>\n<li>paint()。</li>\n</ul>\n<p>上述属性值中 <code class="language-text">&lt;url&gt;</code> 也是一种数据类型，用于表示使用 url() 函数调用的图像资源；<code class="language-text">&lt;gradient&gt;</code> 也是一种数据类型，用于表示渐变图像。</p>\n<p>background-image 和 mask-image 等 CSS 属性的属性值属于 <code class="language-text">&lt;image&gt;</code> 数据类型。</p>\n</li>\n</ol>\n<p>从上面的介绍可以看出，CSS 的 shape-outside 支持的属性值非常庞杂，不过只要牢记这 3 个数据类型，就可以轻松记住很多属性值，至于其中的每一个属性值究竟有什么含义，在这里不展开讲解，之后会有详细的阐述。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="98736912682975440000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`color: <color>;`, `98736912682975440000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">color</span><span class="token punctuation">:</span> &lt;color><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>这里的 <code class="language-text">&lt;color&gt;</code> 数据类型支持的属性值如下：</p>\n<ul>\n<li><code class="language-text">&lt;rgb()&gt;</code>；</li>\n<li><code class="language-text">&lt;rgba()&gt;</code>；</li>\n<li><code class="language-text">&lt;hsl()&gt;</code>；</li>\n<li><code class="language-text">&lt;hsla()&gt;</code>；</li>\n<li><code class="language-text">&lt;hex-color&gt;</code>；</li>\n<li><code class="language-text">&lt;named-color&gt;</code>；</li>\n<li>currentColor；</li>\n<li><code class="language-text">&lt;deprecated-system-color&gt;</code>。</li>\n</ul>\n<p>最后一个属性值 <code class="language-text">&lt;deprecated-system-color&gt;</code> 指废弃的系统颜色，这在《CSS 世界》有专门的介绍，本书不再赘述，其他属性值在对应章节都会有详细的讲解。</p>\n<p>以上就是我要简单介绍的几个常见且值得一提的数据类型。至于其他数据类型，要么比较简单，例如 <code class="language-text">&lt;number&gt;</code>、<code class="language-text">&lt;percent&gt;</code> 等数据类型，指数值和百分比值；要么比较生僻且唯一，例如 <code class="language-text">&lt;quote&gt;</code> 数据类型，指 content 属性中表示各类引号的关键字值，如 open-quote 和 close-quote 等。</p>\n<p>本书不会逐个展开介绍 CSS 数据类型，想要了解更完整的 CSS 数据类型，可以参考的一篇文章 <a href="https://www.zhangxinxu.com/wordpress/2019/11/css-value-type/" target="_blank" rel="nofollow noreferrer noopener">CSS 值类型文档大全</a>。</p>\n<h2 id="学会看懂-css-属性值定义语法"><a href="#%E5%AD%A6%E4%BC%9A%E7%9C%8B%E6%87%82-css-%E5%B1%9E%E6%80%A7%E5%80%BC%E5%AE%9A%E4%B9%89%E8%AF%AD%E6%B3%95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>学会看懂 CSS 属性值定义语法</h2>\n<p>CSS 属性值有专门的定义语法，用来表示 CSS 属性值的合法组成。例如，线性渐变的语法为：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="36512194193997206000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`linear-gradinent([<angle> | to <side-or-corner>,]?<color-stop-list>)`, `36512194193997206000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token function">linear-gradinent</span><span class="token punctuation">(</span>[&lt;angle> | to &lt;side-or-corner><span class="token punctuation">,</span>]?&lt;color-stop-list><span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<h3 id="学习-css-属性值定义语法的好处"><a href="#%E5%AD%A6%E4%B9%A0-css-%E5%B1%9E%E6%80%A7%E5%80%BC%E5%AE%9A%E4%B9%89%E8%AF%AD%E6%B3%95%E7%9A%84%E5%A5%BD%E5%A4%84" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>学习 CSS 属性值定义语法的好处</h3>\n<p>在开始介绍具体的语法规则之前，我想先说说我们为什么要学会看懂 CSS 属性值定义语法（CSS value definition syntax）。就拿线性渐变的语法举例，根据我的观察，几乎无一例外，CSS 开发者会写出类似下面这样的 CSS 线性渐变代码：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="57574782178626750000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`background: linear-gradient(to bottom, deepskyblue, deeppink);`, `57574782178626750000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>to bottom<span class="token punctuation">,</span> deepskyblue<span class="token punctuation">,</span> deeppink<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>上面这句 CSS 声明有问题吗？从语法和功能上讲是没有任何问题的，线性渐变可以正常渲染，但是在写法上却有瑕疵，<code class="language-text">to bottom,</code> 这几个字符是多余的。我们直接使用下面这样的书写方式就可以了：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="85116918718687040000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`background: linear-gradient(deepskyblue, deeppink);`, `85116918718687040000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>deepskyblue<span class="token punctuation">,</span> deeppink<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>如果你看得懂 CSS 的语法，那么在学习 CSS 的时候，只要稍微看一看线性渐变的语法，就能很轻松地知道 <code class="language-text">线性渐变的方向设置是可以省略的</code> 这样一个细节知识，也就能写出更简洁的 CSS 代码。</p>\n<p>这就是看懂 CSS 属性值定义语法的好处：不仅有助于快速了解 CSS 新属性，还有助于发现别人注意不到的细节知识，而这些细节知识就是你的竞争力所在，也是从众多 CSS 开发者中脱颖而出的重要因素之一。</p>\n<h3 id="css-属性值定义语法详解"><a href="#css-%E5%B1%9E%E6%80%A7%E5%80%BC%E5%AE%9A%E4%B9%89%E8%AF%AD%E6%B3%95%E8%AF%A6%E8%A7%A3" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>CSS 属性值定义语法详解</h3>\n<p>CSS 属性值定义语法是专门用来限定 CSS 属性合法取值的语法，这种语法包含以下 3 种基本组成元素：</p>\n<ul>\n<li>关键字；</li>\n<li>数据类型；</li>\n<li>符号。</li>\n</ul>\n<p>线性渐变的语法就包含上面这 3 种基本组成元素：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="14485250225302426000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`linear-gradinent([<angle> | to <side-or-corner>,]?<color-stop-list>)`, `14485250225302426000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token function">linear-gradinent</span><span class="token punctuation">(</span>[&lt;angle> | to &lt;side-or-corner><span class="token punctuation">,</span>]?&lt;color-stop-list><span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>先讲一下这一语法中的几个关键点：</p>\n<ul>\n<li>to 是关键字；</li>\n<li><code class="language-text">&lt;angle&gt;</code>、<code class="language-text">&lt;side-or-corner&gt;</code> 和 <code class="language-text">&lt;color-stop-list&gt;</code> 是数据类型，如果对这几个数据类型不了解，可以参考文章 <a href="https://www.zhangxinxu.com/wordpress/2019/11/css-value-type/" target="_blank" rel="nofollow noreferrer noopener">CSS 值类型文档大全</a>；</li>\n<li><code class="language-text">[]</code> <code class="language-text">?</code> <code class="language-text">,</code> 是符号。</li>\n</ul>\n<p>下面稍微展开介绍一下这 3 种基本组成元素。</p>\n<h4 id="关键字"><a href="#%E5%85%B3%E9%94%AE%E5%AD%97" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>关键字</h4>\n<p>关键字分为通用关键字和全局关键字：</p>\n<ul>\n<li>auto、none、ease 等关键字是通用关键字，或者可以称为普通关键字，这些关键字均只被部分 CSS 属性支持；</li>\n<li>inherit、initial、unset 和 revert 是全局关键字，属于被所有 CSS 属性支持的特殊关键字，全局关键字在 2.3 节会介绍，这里不展开。</li>\n</ul>\n<h4 id="数据类型"><a href="#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>数据类型</h4>\n<p>数据类型外面有一对尖括号（“&#x3C;”和“>”）。有些数据类型是 CSS 规范中专门定义的，它们被称为基本类型，其他数据类型就被称为其他类型。</p>\n<h4 id="符号"><a href="#%E7%AC%A6%E5%8F%B7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>符号</h4>\n<p>符号是 CSS 语法中的重点和难点。</p>\n<p>CSS 语法中的符号分为字面符号、组合符号和数量符号这 3 类，下面就介绍一下它们对应的含义。</p>\n<ol>\n<li>字面符号指的是 CSS 属性值中原本就支持的合法符号，这些符号在 CSS 语法中会按照其原本的字面意义呈现。目前字面符号就两个，一个是逗号（,），另一个是斜杠（/）。具体描述如表 2-1 所示。</li>\n</ol>\n<table>\n<thead>\n<tr>\n<th align="left">符号</th>\n<th align="left">名称</th>\n<th align="left">描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align="left">,</td>\n<td align="left">并列分隔符</td>\n<td align="left">用来分隔多个并列值，或者分隔函数的参数值</td>\n</tr>\n<tr>\n<td align="left">/</td>\n<td align="left">缩写分隔符</td>\n<td align="left">用来分隔一个值的多个部分，在 CSS 缩写中用于分离类型相同但属于不同 CSS 属性的值，以及用在部分 CSS 函数中</td>\n</tr>\n</tbody>\n</table>\n<ol start="2">\n<li>组合符号用来表示数个基本元素之间的组合关系。目前共有 5 个组合符号，其中大多数组合符号的含义一目了然，除了“|”这个组合符号。因为“|”表示互斥，这在编程语言中比较少见，大家可以特别关注一下。具体描述如表 2-2 所示（表中从上往下组合符号的优先级越来越高）。</li>\n</ol>\n<table>\n<thead>\n<tr>\n<th align="left">符号</th>\n<th align="left">名称</th>\n<th align="left">描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align="left"></td>\n<td align="left">并列</td>\n<td align="left">符号为普通空格字符，表示各部分必须出现，同时需要按顺序出现</td>\n</tr>\n<tr>\n<td align="left"><code class="language-text">&amp;&amp;</code></td>\n<td align="left">“与”组合符</td>\n<td align="left">各部分必须出现，且可以不按顺序出现</td>\n</tr>\n<tr>\n<td align="left"><code class="language-text">||</code></td>\n<td align="left">“或”组合符</td>\n<td align="left">各部分至少出现一个，可以不按顺序出现</td>\n</tr>\n<tr>\n<td align="left"><code class="language-text">|</code></td>\n<td align="left">“互斥”组合符</td>\n<td align="left">各部分恰好出现其中一个</td>\n</tr>\n<tr>\n<td align="left"><code class="language-text">[]</code></td>\n<td align="left">方括号</td>\n<td align="left">将各部分进行分组以绕过上面几个符号的优先规则，因此方括号的优先级最高</td>\n</tr>\n</tbody>\n</table>\n<ol start="3">\n<li>数量符号用来描述一个元素可以出现多少次，数量符号不能叠加出现，并且优先级高于组合符号。目前共有 6 个数量符号，大多数的数量符号的含义和在正则表达式中的含义是一样的，具体描述如表 2-3 所示。</li>\n</ol>\n<table>\n<thead>\n<tr>\n<th align="left">符号</th>\n<th align="left">名称</th>\n<th align="left">描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align="left"></td>\n<td align="left">无数量符号</td>\n<td align="left">恰好出现一次</td>\n</tr>\n<tr>\n<td align="left"><code class="language-text">*</code></td>\n<td align="left">星号</td>\n<td align="left">可以出现任意次数</td>\n</tr>\n<tr>\n<td align="left"><code class="language-text">+</code></td>\n<td align="left">加号</td>\n<td align="left">可以出现一次或多次</td>\n</tr>\n<tr>\n<td align="left"><code class="language-text">?</code></td>\n<td align="left">问号</td>\n<td align="left">可以出现零次或一次，即为可选</td>\n</tr>\n<tr>\n<td align="left"><code class="language-text">{A,B}</code></td>\n<td align="left">花括号</td>\n<td align="left">出现最少 A 次，最多 B 次</td>\n</tr>\n<tr>\n<td align="left"><code class="language-text">#</code></td>\n<td align="left">井号</td>\n<td align="left">可以出现一次或多次，但多次出现时必须以逗号分隔</td>\n</tr>\n<tr>\n<td align="left"><code class="language-text">!</code></td>\n<td align="left">叹号</td>\n<td align="left">表示当前分组必须产生一个值，该符号多出现在组合符号方括号的后面</td>\n</tr>\n</tbody>\n</table>\n<p>有了表 2-1 ～ 表 2-3，理解 CSS 属性值定义语法就变得很容易了。例如，线性渐变的语法解析如图 2-1 的标注说明所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-20-11-41-27-dd83164e308efdd6b3a9ae0db1a86a01-889e2.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 34.71376370280146%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA/UlEQVQY011Qi06DMBTl/7/MMRA3o0tMliwkOsbKo9y2t719WRCM8+Q07X333CzGsDEGo/04hmly7c0DxBlrKHpvLxc6Hv2tWdw+nSz+BZkoRZDgr19B6yVpqRTgm2tqGn+cGzIy2iRqRFTWWnJOE9EwOEtk0ovmGzX1A9X1YlsyJjH5Mz70fOz7ru1YK4WASQyMo1SIcuICuFAS+aTkyLFlvP5MCQAKBCrUj99eRcaHRZAJfHTn8yzE2dA0gd1jx0LfZUnVL7bKf918kNLfWbR2tqTyaQWQKNbJ616k3OUlon4/fTzlxS4v9mVVPB+K6lC9vu3LFwCxJK8zvgHNEZP2YA/V3gAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 20 11 41 27" title="" data-src="/static/2021-12-20-11-41-27-dd83164e308efdd6b3a9ae0db1a86a01-fee1c.png" data-srcset="/static/2021-12-20-11-41-27-dd83164e308efdd6b3a9ae0db1a86a01-a67b7.png 200w,\n/static/2021-12-20-11-41-27-dd83164e308efdd6b3a9ae0db1a86a01-0b187.png 400w,\n/static/2021-12-20-11-41-27-dd83164e308efdd6b3a9ae0db1a86a01-fee1c.png 800w,\n/static/2021-12-20-11-41-27-dd83164e308efdd6b3a9ae0db1a86a01-889e2.png 821w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>下面先讲一下语法中的元素。</p>\n<ul>\n<li>\n<p>逗号 <code class="language-text">,</code> 是字面符号，没有什么特殊的含义，只表示这里需要有一个逗号字符。要注意下面这种写法是不合法的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="10215924088819083000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 缺少逗号 */\nbackground: linear-gradient(0deg blue, pink);`, `10215924088819083000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 缺少逗号 */</span>\n<span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>0deg blue<span class="token punctuation">,</span> pink<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>空格是组合符号，表示并列，同时保证各部分按顺序出现。因此如果把 <code class="language-text">&lt;color-stop-list&gt;</code> 数据放前面，就不合法</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="22803713831563035000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 顺序不对 */\nbackground: linear-gradient(blue, pink, 0deg);`, `22803713831563035000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 顺序不对 */</span>\n<span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>blue<span class="token punctuation">,</span> pink<span class="token punctuation">,</span> 0deg<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>“互斥”组合符 <code class="language-text">|</code> 表示角度和方位只能出现一个，两者不能同时存在</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="58939772454155470000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 角度与方位不能同时出现 */\nbackground: linear-gradient(0deg to top, blue, pink);`, `58939772454155470000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 角度与方位不能同时出现 */</span>\n<span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>0deg to top<span class="token punctuation">,</span> blue<span class="token punctuation">,</span> pink<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>方括号 <code class="language-text">[]</code> 用来分组，方便指定数量</p>\n</li>\n<li>\n<p>问号 <code class="language-text">?</code> 是数量符号，表示方括号框起来的元素可以出现零次或者一次，零次的意思就是这个元素可以不出现。因此，下面的写法是不合法的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="63914780759786360000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 角度或者方位最多出现一次 */\nbackground: linear-gradient(0deg, 0deg, blue, pink);`, `63914780759786360000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 角度或者方位最多出现一次 */</span>\n<span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>0deg<span class="token punctuation">,</span> 0deg<span class="token punctuation">,</span> blue<span class="token punctuation">,</span> pink<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n</li>\n</ul>\n<p>综上分析，下面这些线性渐变语法都是合法的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="84362420774479400000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`linear-gradient(<color-stop-list>);\nlinear-gradient(<angle>, <color-stop-list>);\nlinear-gradient(to <side-or-corner>, <color-stop-list>);`, `84362420774479400000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token function">linear-gradient</span><span class="token punctuation">(</span>&lt;color-stop-list><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token function">linear-gradient</span><span class="token punctuation">(</span>&lt;angle><span class="token punctuation">,</span> &lt;color-stop-list><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token function">linear-gradient</span><span class="token punctuation">(</span>to &lt;side-or-corner><span class="token punctuation">,</span> &lt;color-stop-list><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>接下来只要弄清楚 <code class="language-text">&lt;angle&gt;</code>、<code class="language-text">&lt;side-or-corner&gt;</code> 和 <code class="language-text">&lt;color-stop-list&gt;</code> 这几个数据类型的含义和语法，我们就可以理解线性渐变的语法了。相关内容在后面对应的章节会有非常详细且深入的介绍，这里不做展开。</p>\n<p>最后再通过一些案例介绍一下线性渐变语法之外的符号。</p>\n<h4 id="字面符号斜杠（）的详细介绍"><a href="#%E5%AD%97%E9%9D%A2%E7%AC%A6%E5%8F%B7%E6%96%9C%E6%9D%A0%EF%BC%88%EF%BC%89%E7%9A%84%E8%AF%A6%E7%BB%86%E4%BB%8B%E7%BB%8D" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>字面符号斜杠（/）的详细介绍</h4>\n<p>在 CSS 这门语言中，凡是出现斜杠（/）的地方，斜杠前后的数据类型一定是相同或者部分相同的，否则整个语句就是非法的。很多开发者总是记不住包含斜杠的 CSS 缩写语法，那么只要记住这个规则就可以了。</p>\n<p>例如，background 属性值中需要使用斜杠分隔的两个属性一定是 background-position 和 background-size，因为只有这两个属性的值的类型相似，且都可以使用百分比值表示。这样就会出现很有趣的现象，像下面这样的 CSS 语句是合法的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="1744239710441930500"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 合法 */\nbackground: 0 / 0;`, `1744239710441930500`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 合法 */</span>\n<span class="token property">background</span><span class="token punctuation">:</span> 0 / 0<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>但是下面这个看上去合法的缩写却是非法的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="3145910793333128700"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 不合法 */\nbackground: #eee url(https://demo.png) no-repeat / contain;`, `3145910793333128700`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 不合法 */</span>\n<span class="token property">background</span><span class="token punctuation">:</span> #eee <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>https://demo.png<span class="token punctuation">)</span></span> no-repeat / contain<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>因为斜杠前面的值 no-repeat 属于 background-repeat 属性，斜杠后面的值 contain 属于 background-size 属性，而 background-repeat 的属性值的类型绝不可能和 background-size 的属性值的类型一致，这不符合斜杠前后数据类型至少部分相同的要求，所以这条语句是非法的。</p>\n<p>记住，background 缩写语法中斜杠前面只能是 background-position 的属性值，上面的 CSS 语句要想合法，可以把 background-position 属性的初始值 0 0 写上：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="92214084186182370000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 合法 */\nbackground: #eee url(https://demo.png) no-repeat 0 0 / contain;`, `92214084186182370000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 合法 */</span>\n<span class="token property">background</span><span class="token punctuation">:</span> #eee <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>https://demo.png<span class="token punctuation">)</span></span> no-repeat 0 0 / contain<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>又如，font 属性的斜杠前后一定是 font-size 的属性值和 line-height 的属性值，因为两者都可以使用 px 长度单位值。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="56063694966404220000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.example {\n   font: 16px / 1.5 sans-serif;\n}`, `56063694966404220000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.example</span> <span class="token punctuation">{</span>\n   <span class="token property">font</span><span class="token punctuation">:</span> 16px / 1.5 sans-serif<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>斜杠这个符号除了出现在部分 CSS 的缩写语法中，还会出现在一些 CSS 函数中用来表示分隔，例如 rgba() 函数的语法：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="39128783345283850000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<rgba()> = rgba(<percentage>{3} [/<alpha-value>]?) | rgba(<number>{3} [/<alpha-value>]?) | rgba(<percentage>#{3}, <alpha-value>?) | rgba(<number>#{3}, <alpha-value>?)`, `39128783345283850000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">&lt;rgba()> = rgba(&lt;percentage></span><span class="token punctuation">{</span>3<span class="token punctuation">}</span> <span class="token selector">[/&lt;alpha-value>]?) | rgba(&lt;number></span><span class="token punctuation">{</span>3<span class="token punctuation">}</span> <span class="token selector">[/&lt;alpha-value>]?) | rgba(&lt;percentage>#</span><span class="token punctuation">{</span>3<span class="token punctuation">}</span><span class="token selector">, &lt;alpha-value>?) | rgba(&lt;number>#</span><span class="token punctuation">{</span>3<span class="token punctuation">}</span><span class="token punctuation">,</span> &lt;alpha-value>?<span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>从上面的语法我们可以看出 rgba() 函数也是支持斜杠的，因此，下面的属性值都是合法的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="67776762477489430000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 合法 */\nrgba(100% 0% 0% / .5);\nrgba(255 0 0 / .5);`, `67776762477489430000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 合法 */</span>\n<span class="token function">rgba</span><span class="token punctuation">(</span>100% 0% 0% / .5<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token function">rgba</span><span class="token punctuation">(</span>255 0 0 / .5<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>类似 <code class="language-text">rgba() 函数支持斜杠语法</code> 这样的细节知识，如果不看语法是绝对不知道的。还是那句话，要想 CSS 学得好，CSS 属性值定义语法必须要学好，其重要性不亚于 JavaScript 中的正则表达式。</p>\n<h4 id="其他符号介绍"><a href="#%E5%85%B6%E4%BB%96%E7%AC%A6%E5%8F%B7%E4%BB%8B%E7%BB%8D" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>其他符号介绍</h4>\n<p>下面介绍其他符号。</p>\n<ol>\n<li>\n<p>“或”组合符（||）。“或”组合符（||）在 CSS 语法中很常见，例如 border 属性的语法：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="25727590670381773000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`border: <line-width> || <line-style> || <color>;`, `25727590670381773000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">border</span><span class="token punctuation">:</span> &lt;line-width> || &lt;line-style> || &lt;color><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>这一语法表示 border 属性的 3 个值的顺序是随机的，组合也是随机的。</p>\n</li>\n<li>\n<p>叹号（!）。叹号（!）在 image()函数中出现过：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="89135100545898840000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<image()> = image(<image-tags>? [<image-src>?, <color>?]!)`, `89135100545898840000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css">&lt;<span class="token function">image</span><span class="token punctuation">(</span><span class="token punctuation">)</span>> = <span class="token function">image</span><span class="token punctuation">(</span>&lt;image-tags>? [&lt;image-src>?<span class="token punctuation">,</span> &lt;color>?]!<span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>这一语法表示 <code class="language-text">&lt;image-src&gt;</code> 数据类型和 <code class="language-text">&lt;color&gt;</code> 数据类型至少出现一个，当然，两者也可以同时出现。</p>\n</li>\n<li>\n<p>其他数量符号和“与”组合符（&#x26;&#x26;）。到目前为止，还有井号（#）、星号（*）、花括号（{A,B}）等数量符号和“与”组合符（&#x26;&#x26;）没有介绍，这里用 box-shadow 属性的语法加以说明，如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="82020846183947080000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`box-shadow: none | <shadow>#;`, `82020846183947080000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">box-shadow</span><span class="token punctuation">:</span> none | &lt;shadow>#<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>等同于</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="16802003978342883000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`box-shadow: none | [<shadow>, ] *;`, `16802003978342883000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">box-shadow</span><span class="token punctuation">:</span> none | [&lt;shadow><span class="token punctuation">,</span> ] *<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>或可写成</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="41823468271256650000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`box-shadow: none | [inset? && <length>{2, 4} && <color>?]#;`, `41823468271256650000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">box-shadow: none | [inset? &amp;&amp; &lt;length></span><span class="token punctuation">{</span>2<span class="token punctuation">,</span> 4<span class="token punctuation">}</span> &amp;&amp; &lt;color>?]#<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>其中出现的“与”组合符（&#x26;&#x26;），表明 inset 关键字、<code class="language-text">&lt;length&gt;</code> 数据类型和 <code class="language-text">&lt;color&gt;</code> 数据类型的顺序是可以随意排列的，所以下面这几种写法都是合法的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="89012770189949340000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`box-shadow: 2px 2px inset #000;\nbox-shadow: inset #000 2px 2px;\nbox-shadow: #000 2px 2px inset;`, `89012770189949340000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">box-shadow</span><span class="token punctuation">:</span> 2px 2px inset #000<span class="token punctuation">;</span>\n<span class="token property">box-shadow</span><span class="token punctuation">:</span> inset #000 2px 2px<span class="token punctuation">;</span>\n<span class="token property">box-shadow</span><span class="token punctuation">:</span> #000 2px 2px inset<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>其中 <code class="language-text">&lt;length&gt;{2,4}</code> 表示可以使用 2 ～ 4 个 <code class="language-text">&lt;length&gt;</code>数据类型，很好理解。</p>\n</li>\n</ol>\n<p>下面要抛出一个很有意思的问题了：既然 <code class="language-text">[&lt;shadow&gt;,]*</code> 等同于 <code class="language-text">&lt;shadow&gt;#</code>，那这个 # 符号是不是一个多余的设计呢？</p>\n<p>这不是多余的设计，虽然多了一个 # 符号就多了一点学习成本，但是语法更简洁了，更重要的是 # 符号有一个和其他数量符号不一样的特性，那就是 # 符号可以在后面指定数量范围。例如 rgba() 函数的语法中有下面这一段内容：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="62036959554392830000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`rgba(<number>#{3}, <alpha-value>?)`, `62036959554392830000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">rgba(&lt;number>#</span><span class="token punctuation">{</span>3<span class="token punctuation">}</span><span class="token punctuation">,</span> &lt;alpha-value>?<span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<h2 id="了解-css-全局关键字属性值"><a href="#%E4%BA%86%E8%A7%A3-css-%E5%85%A8%E5%B1%80%E5%85%B3%E9%94%AE%E5%AD%97%E5%B1%9E%E6%80%A7%E5%80%BC" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>了解 CSS 全局关键字属性值</h2>\n<p>inherit、initial、unset 和 revert 都是 CSS 全局关键字属性值，也就是说所有 CSS 属性都可以使用这几个关键字作为属性值。</p>\n<p>我根据实用性和兼容性整理了一个全局关键字属性值评价表，如表 2-4 所示。</p>\n<table>\n<thead>\n<tr>\n<th align="left">关键字属性值</th>\n<th align="left">使用性</th>\n<th align="left">兼容性</th>\n<th align="left">整体评价</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align="left">inherit</td>\n<td align="left">A</td>\n<td align="left">A+</td>\n<td align="left">A+</td>\n</tr>\n<tr>\n<td align="left">initial</td>\n<td align="left">B</td>\n<td align="left">B+</td>\n<td align="left">B</td>\n</tr>\n<tr>\n<td align="left">unset</td>\n<td align="left">B-</td>\n<td align="left">B-</td>\n<td align="left">B-</td>\n</tr>\n<tr>\n<td align="left">revert</td>\n<td align="left">B</td>\n<td align="left">C</td>\n<td align="left">B-</td>\n</tr>\n</tbody>\n</table>\n<h3 id="用过都说好的继承关键字-inherit"><a href="#%E7%94%A8%E8%BF%87%E9%83%BD%E8%AF%B4%E5%A5%BD%E7%9A%84%E7%BB%A7%E6%89%BF%E5%85%B3%E9%94%AE%E5%AD%97-inherit" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>用过都说好的继承关键字 inherit</h3>\n<p>inherit 这个关键字是继承的意思。IE 浏览器从 IE8（标准版）开始就已经支持该关键字了，而不是从 IE9 浏览器开始支持的。请记住，不是从 IE9 开始支持的，网络上的某些在线文档是错误的。</p>\n<p>是一个实用性和兼容性俱佳的 CSS 属性值，例如我比较喜欢使用 inherit 关键字重置输入框的内置字体：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="51396148964926595000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`input,\ntextarea {\n   font-family: inherit;\n}`, `51396148964926595000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">input,\ntextarea</span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> inherit<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>又如，子元素设置 height: inherit 实现高度继承，或者子元素设置 background-image: inherit 实现背景图像继承等，这些都是非常实用的场景。</p>\n<p>大家一定要养成使用 inherit 关键字的好习惯，这可以有效地降低开发和维护成本，谁用谁说好。</p>\n<h3 id="可以一用的初始值关键字-initial"><a href="#%E5%8F%AF%E4%BB%A5%E4%B8%80%E7%94%A8%E7%9A%84%E5%88%9D%E5%A7%8B%E5%80%BC%E5%85%B3%E9%94%AE%E5%AD%97-initial" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>可以一用的初始值关键字 initial</h3>\n<p>initial 是初始值关键字，可以把当前的 CSS 属性的计算值还原成 CSS 语法中规定的初始值。</p>\n<p>下面我们就通过一个简单的案例快速了解一下这个 CSS 关键字。</p>\n<p>例如，下面这段 HTML 表示的是一个热门话题列表：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="90029239485008330000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<ul class=&quot;initial-ul&quot;>\n   <li>#追梦人# <small>1亿</small></li>\n   <li>#票房# <small>3亿</small></li>\n   <li>#醉拳舞# <small>1亿</small></li>\n   <li>#余年MV# <small>2亿</small></li>\n   <li>#CSS新世界# <small>666</small></li>\n</ul>`, `90029239485008330000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>initial-ul<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>#追梦人# <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>small</span><span class="token punctuation">></span></span>1亿<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>small</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>#票房# <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>small</span><span class="token punctuation">></span></span>3亿<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>small</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>#醉拳舞# <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>small</span><span class="token punctuation">></span></span>1亿<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>small</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>#余年MV# <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>small</span><span class="token punctuation">></span></span>2亿<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>small</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>#CSS新世界# <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>small</span><span class="token punctuation">></span></span>666<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>small</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>然后，我们给最后一行列表设置 font-size: initial，CSS 代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="14387324400938572000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.initial-ul {\n   font-size: 13px;\n}\n\n.initial-ul li:last-child {\n   font-size: initial;\n}`, `14387324400938572000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.initial-ul</span> <span class="token punctuation">{</span>\n   <span class="token property">font-size</span><span class="token punctuation">:</span> 13px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.initial-ul li:last-child</span> <span class="token punctuation">{</span>\n   <span class="token property">font-size</span><span class="token punctuation">:</span> initial<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>结果如图 2-2 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-21-10-58-13-edf6c4d1389f5961af67ec8e5301f3ca-09bf7.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 452px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 72.12389380530973%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsSAAALEgHS3X78AAABtUlEQVQoz51Ri27aMBT1/3/MpKkbKh0dFGk0JJDwKqGQhxMSmwDBcZLmQZxkLmxakRCVdmRZV+fec+6RDd444lASxG77yTSgu3bSNKvrOiS+hzdVfQuAa4OD3+08dVotZajkecFZx167LuZFVd2SgyRJQ0oUWX7+1e/8bIuCyBne4I7+fl9/tjmhxO8LwkAaCL3nsTIhfsAbMQ2wixgrz/uvRgBpmvq7rfqiGrqxVFVnjebzBWPvo1tvs98dboQHMUcU2pbtIWyZpqq+OtA2NG02VV3HLauyZCUNaBRFV8S73Y4SslqubNOaTSZDUR71lcFQ7rZ7EK75RJ5l0DCRi+pThn83F19YndjK35cIfRy6glMLVB9RlpxjYfgmSUeEWBzzOtP03LJzaCXyKFUX2VJL52rheUeEwXVfxgqECtctuT6g74fSwtseMeamvGAkYISAyyzVRf76E4D6P/D32cB5m4vQl6/fFq8r3TDz/DiezkRpOJBH9w+PjWbr4bHduP9x12j2+tLd9ybGm3PMP2JCAmU8jaI4SRLOUBqSIDiQYLnSNN3QTagbEEIbY88w4fnP+dhvsmIYREfVfgsAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 21 10 58 13" title="" data-src="/static/2021-12-21-10-58-13-edf6c4d1389f5961af67ec8e5301f3ca-09bf7.png" data-srcset="/static/2021-12-21-10-58-13-edf6c4d1389f5961af67ec8e5301f3ca-eb2f6.png 200w,\n/static/2021-12-21-10-58-13-edf6c4d1389f5961af67ec8e5301f3ca-ffac0.png 400w,\n/static/2021-12-21-10-58-13-edf6c4d1389f5961af67ec8e5301f3ca-09bf7.png 452w" data-sizes="(max-width: 452px) 100vw, 452px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>从图 2-2 中可以看到最后一行 <code class="language-text">#CSS 新世界#</code> 这几个文字的字号明显比上面几行文字的字号大了一些。这是因为最后一个 <code class="language-text">&lt;li&gt;</code> 列表项设置了 <code class="language-text">font-size: initial</code>，这就意味着最后一个 <code class="language-text">&lt;li&gt;</code> 列表项的字号大小使用的是 CSS 规范中定义的初始值，这个初始值就是 medium 关键字。如果用户没有修改过浏览器中的默认字号设置，则 medium 关键字的计算值是 16px。</p>\n<p>因此在本案例中，前几行的字号大小是 13px，最后一项的字号大小是 16px。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/kmw97g?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>initial 关键字适合用在需要重置某些 CSS 样式，但又不记得初始值的场景。initial 关键字还可以帮助我们了解 CSS 属性的初始值。例如，display 属性的初始值是什么 MDN 文档就没有明说，那我们就可以设置 display: initial 看一下效果：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="64761967499491480000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`p {\n   display: initial;\n}`, `64761967499491480000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">p</span> <span class="token punctuation">{</span>\n   <span class="token property">display</span><span class="token punctuation">:</span> initial<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>结果 <code class="language-text">&lt;p&gt;</code> 元素垂直方向的 margin 和 text-indent 属性都失效了，这些失效现象是典型的内联元素特性，因此，display 属性的初始值是 inline。</p>\n<h4 id="可能的误区"><a href="#%E5%8F%AF%E8%83%BD%E7%9A%84%E8%AF%AF%E5%8C%BA" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>可能的误区</h4>\n<p>很多人有这样一个误区：把 initial 关键字理解为浏览器设置的元素的初始值。实际上两者是不一样的。</p>\n<p>举个例子，实际开发的时候，<code class="language-text">&lt;ul&gt;</code> 元素或 <code class="language-text">&lt;ol&gt;</code> 元素默认的 list-style-type 样式会被 CSS 重置。但是可能会遇到这样的场景，即某些区域需要增加一些描述信息，因此需要重新使用 list-style-type 样式（小圆点或者数字），此时有些开发者就会使用 initial 关键字对该样式进行还原：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="50922536977746756000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`ol {\n   padding: initial;\n   list-style-type: initial;\n}`, `50922536977746756000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">ol</span> <span class="token punctuation">{</span>\n   <span class="token property">padding</span><span class="token punctuation">:</span> initial<span class="token punctuation">;</span>\n   <span class="token property">list-style-type</span><span class="token punctuation">:</span> initial<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>但是没有用！因为上面的 CSS 设置等同于下面的设置：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="91829419080412430000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`ol {\n   padding: 0;\n   list-style-type: disc;\n}`, `91829419080412430000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">ol</span> <span class="token punctuation">{</span>\n   <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n   <span class="token property">list-style-type</span><span class="token punctuation">:</span> disc<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>而不是预想的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="54316724901961780000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`ol {\n   padding: 0 0 0 40px;\n   list-style-type: decimal;\n}`, `54316724901961780000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">ol</span> <span class="token punctuation">{</span>\n   <span class="token property">padding</span><span class="token punctuation">:</span> 0 0 0 40px<span class="token punctuation">;</span>\n   <span class="token property">list-style-type</span><span class="token punctuation">:</span> decimal<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>此时需要的全局关键字属性值其实是 revert，而不是 initial。</p>\n<h4 id="兼容性"><a href="#%E5%85%BC%E5%AE%B9%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>兼容性</h4>\n<p>initial 关键字属性值的兼容性如表 2-5 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-21-11-08-59-b904ecc22879f2c812b4c1c6f8796924-42e87.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 30.359212050984937%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABRUlEQVQY0w2LTU+DMABA+fcejRcvM94WT8aDMXrQGCfRxGUfsI2xD1Y+S1s+tkEpbYFVbi8v72lKKdcPESbncwG8YGXZhrE0F6vp1JgZi7+JAVEym5vjqbndHyKIHOCZS6soaT9qkleqqQSnXctaWclGNJdOcqZUJ6RoJe26itdUXapW0JqVUvBL0/Y951SDaTB0CcnD99nmx3Yqb36yXnHmzJ8fmPv7BchwHMoyuBujmRuKEh0L245eapafck/bEHi9JZThx5E5sr1y8u0PblHpD97uaqR/7JIbPVAcXn36+tZXIsPZ5Em/hzFkFGopcaoM5CnwDgsMQYx2YbhLMYhCC2OQxfYRrQlyiG+QaJ0mwANrd78MfCtLgJYQ0LWnLHGLU8gZxvFe8gQjp64Io6gHUae95HUqeRZHW87IpT12zbHv/wGCJkEyX0v6zgAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 21 11 08 59" title="" data-src="/static/2021-12-21-11-08-59-b904ecc22879f2c812b4c1c6f8796924-fee1c.png" data-srcset="/static/2021-12-21-11-08-59-b904ecc22879f2c812b4c1c6f8796924-a67b7.png 200w,\n/static/2021-12-21-11-08-59-b904ecc22879f2c812b4c1c6f8796924-0b187.png 400w,\n/static/2021-12-21-11-08-59-b904ecc22879f2c812b4c1c6f8796924-fee1c.png 800w,\n/static/2021-12-21-11-08-59-b904ecc22879f2c812b4c1c6f8796924-42e87.png 863w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>除 IE 浏览器之外，其他浏览器都很早就支持了 initial，因此，至少在移动端项目（包括微信小程序）中大家可以百分之百放心使用这个关键字属性值。</p>\n<h3 id="了解一下不固定值关键字-unset"><a href="#%E4%BA%86%E8%A7%A3%E4%B8%80%E4%B8%8B%E4%B8%8D%E5%9B%BA%E5%AE%9A%E5%80%BC%E5%85%B3%E9%94%AE%E5%AD%97-unset" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>了解一下不固定值关键字 unset</h3>\n<p>unset 是不固定值关键字，其特性如下：如果当前使用的 CSS 属性是具有继承特性的，如 color 属性，则等同于使用 inherit 关键字；如果当前使用的 CSS 属性是没有继承特性的，如 background-color，则等同于使用 initial 关键字。</p>\n<p>unset 这个关键字只有配合 all 属性使用才有意义，因为对于某个具体的 CSS 属性，想要继承某个属性，那就使用 inherit 关键字；想要使用初始值，那就使用 initial 关键字，没有任何理由使用 unset 关键字。</p>\n<p>举个例子，Chrome 浏览器支持 HTML 5.1 规范中的 <code class="language-text">&lt;dialog&gt;</code> 元素，我们自然会想到借助这个 <code class="language-text">&lt;dialog&gt;</code> 元素实现语义更好的弹框组件。然而有一个小问题，这个 <code class="language-text">&lt;dialog&gt;</code> 元素内置了很多我们不需要的样式，内容如下（来自 Chrome 79）：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="1744802703327641300"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`dialog {\n   display: block;\n   position: absolute;\n   left: 0px;\n   right: 0px;\n   width: -webkit-fit-content;\n   height: -webkit-fit-content;\n   color: black;\n   margin: auto;\n   border-width: initial;\n   border-style: solid;\n   border-color: initial;\n   border-image: initial;\n   padding: 1em;\n   background: white;\n}`, `1744802703327641300`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">dialog</span> <span class="token punctuation">{</span>\n   <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>\n   <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n   <span class="token property">left</span><span class="token punctuation">:</span> 0px<span class="token punctuation">;</span>\n   <span class="token property">right</span><span class="token punctuation">:</span> 0px<span class="token punctuation">;</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> -webkit-fit-content<span class="token punctuation">;</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> -webkit-fit-content<span class="token punctuation">;</span>\n   <span class="token property">color</span><span class="token punctuation">:</span> black<span class="token punctuation">;</span>\n   <span class="token property">margin</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>\n   <span class="token property">border-width</span><span class="token punctuation">:</span> initial<span class="token punctuation">;</span>\n   <span class="token property">border-style</span><span class="token punctuation">:</span> solid<span class="token punctuation">;</span>\n   <span class="token property">border-color</span><span class="token punctuation">:</span> initial<span class="token punctuation">;</span>\n   <span class="token property">border-image</span><span class="token punctuation">:</span> initial<span class="token punctuation">;</span>\n   <span class="token property">padding</span><span class="token punctuation">:</span> 1em<span class="token punctuation">;</span>\n   <span class="token property">background</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>可以看到 <code class="language-text">&lt;dialog&gt;</code> 元素默认有黑色边框和 padding 内间距，还有纯白色的背景颜色和纯黑色的文字颜色，因此下面这段 HTML 就会有图 2-3 所示的效果：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="16566626167641018000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<dialog open>CSS新世界</dialog>`, `16566626167641018000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dialog</span> <span class="token attr-name">open</span><span class="token punctuation">></span></span>CSS新世界<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dialog</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-21-11-17-36-74fb7035133269f7e6d097ec15435ad8-8d56d.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 465px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 67.09677419354838%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABUUlEQVQoz6WRzW+CQBDF+f+vciMcjcTE1mjAE03aaKFNURAoaEwxhVJaYlJDxA/w44UtKlbbQ38Jm50Z3s7bWWqes16vt3+x2WzmR1D44jherVaiKFar1Xq9fp1xlUP2WGu1Gs/zURQtFouDmMCyrOu6HxlBEHzmIAzDEJnJZFIul8fjcZqm6HcQz2YztEWWeMO6XC5hJ0kSYhUbJAVBcBznVIyA4zhcG817GQibzSZOlCSJYRjDMCBG5ry4UqmgFUwOBgPTNGVZVhRFVdXRaKRpGg6FuNFonLeNVsT2pTnvbcPgQUymTdM0RtpqtfAHf8Q+RKlUKvm+j/sXxBiP53m6rpuXQRVtT9+Z6H/xvAeGC+KEkH6TFPmZOS5R239AdXtdRe3778HXdApXeBjLti17+Op63puv9Q3x5rYjyfbw5dm07tqdtvSo9/X7hyfMfwfqn8Dv+pyMqgAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 21 11 17 36" title="" data-src="/static/2021-12-21-11-17-36-74fb7035133269f7e6d097ec15435ad8-8d56d.png" data-srcset="/static/2021-12-21-11-17-36-74fb7035133269f7e6d097ec15435ad8-afa68.png 200w,\n/static/2021-12-21-11-17-36-74fb7035133269f7e6d097ec15435ad8-5df89.png 400w,\n/static/2021-12-21-11-17-36-74fb7035133269f7e6d097ec15435ad8-8d56d.png 465w" data-sizes="(max-width: 465px) 100vw, 465px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>这个粗糙的效果显然不是我们想要的，但是我们又不想一个属性接一个属性地进行重置，怎么办呢？此时就可以先使用 all: unset 进行批量重置，再设置我们需要的 CSS 属性：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="97475455112921970000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`dialog {\n   all: unset;\n   /* ... */\n}`, `97475455112921970000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">dialog</span> <span class="token punctuation">{</span>\n   <span class="token property">all</span><span class="token punctuation">:</span> unset<span class="token punctuation">;</span>\n   <span class="token comment">/* ... */</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>这样，无论当前浏览器是否支持 <code class="language-text">&lt;dialog&gt;</code> 元素，最终渲染出来的样式效果都是一致的。因为不支持 <code class="language-text">&lt;dialog&gt;</code> 元素的浏览器会把 <code class="language-text">&lt;dialog&gt;</code> 元素按照 <code class="language-text">&lt;span&gt;</code> 这个内联元素渲染，这就和设置了 all:unset 的效果一模一样。</p>\n<h4 id="兼容性-1"><a href="#%E5%85%BC%E5%AE%B9%E6%80%A7-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>兼容性</h4>\n<p>unset 关键字属性值的兼容性要比 initial 差一些，主要是因为被浏览器支持的时间晚了一点，具体如表 2-6 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-21-11-23-03-acae237c570eab56b33d82d79022895f-31a59.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 30.267753201396975%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABPklEQVQY0w3OyU7CQAAA0P6/Fw8m6okYEs8uiUcVRGNwLYUOUqDTdTZKp7O2Sqkk7wOes9/vYZxSWggh4iQH84U39f35YuLOJh749nzCCm8G3r+85QoiTKI4nfqgEqrrOqepdWu4VtVvLa2ulFVm96eV+GusVKoxvN1JIXjb8MZWQpRKysZYo0VtjUO3WT/aoDJ7cIMhCG3sCveK8XB8e1nD52FU9MaotdnZmH2sk64uuPanyU1juRK5AzfoeI4rQ+9ep49gLb238PyUibh3f6HxaLCkJy9pZ/KjQfL0A7sdx8Xn9ahPKKoNcQoGbQnLIkKpz3CAySrH6w2FKAWEQJaDigCClyx2aQYYXSdwnh0kgG9Th1FoDd3QcFtEhwnJAyMRxauKp5KnBK+0wgQtOc+kyHEeaIUaS2tDqzL7B48AQOf9NQwQAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 21 11 23 03" title="" data-src="/static/2021-12-21-11-23-03-acae237c570eab56b33d82d79022895f-fee1c.png" data-srcset="/static/2021-12-21-11-23-03-acae237c570eab56b33d82d79022895f-a67b7.png 200w,\n/static/2021-12-21-11-23-03-acae237c570eab56b33d82d79022895f-0b187.png 400w,\n/static/2021-12-21-11-23-03-acae237c570eab56b33d82d79022895f-fee1c.png 800w,\n/static/2021-12-21-11-23-03-acae237c570eab56b33d82d79022895f-31a59.png 859w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>虽然兼容性逊色了一点，但并不影响 unset 的使用，主要有以下两方面的原因。</p>\n<ol>\n<li>需要使用 unset 的场景非常有限，既然使用的机会很少，那么兼容性问题就不是问题。</li>\n<li><code class="language-text">&lt;dialog&gt;</code> 元素的样式重置是很难得的 unset 使用场景，由于支持 <code class="language-text">&lt;dialog&gt;</code> 元素的浏览器一定支持 unset，因此也不用担心兼容性的问题。</li>\n</ol>\n<h3 id="我个人很喜欢的恢复关键字-revert"><a href="#%E6%88%91%E4%B8%AA%E4%BA%BA%E5%BE%88%E5%96%9C%E6%AC%A2%E7%9A%84%E6%81%A2%E5%A4%8D%E5%85%B3%E9%94%AE%E5%AD%97-revert" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我个人很喜欢的恢复关键字 revert</h3>\n<p>revert 关键字可以让当前元素的样式还原成浏览器内置的样式。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="91997967921415650000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`ol {\n   padding: revert;\n   list-style-type: revert;\n}`, `91997967921415650000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">ol</span> <span class="token punctuation">{</span>\n   <span class="token property">padding</span><span class="token punctuation">:</span> revert<span class="token punctuation">;</span>\n   <span class="token property">list-style-type</span><span class="token punctuation">:</span> revert<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>那么 <code class="language-text">&lt;ol&gt;</code> 中的每一个 <code class="language-text">&lt;li&gt;</code> 项都会有数字效果呈现，当然，前提是你没有对子元素 <code class="language-text">&lt;li&gt;</code> 的 list-style-type 属性做过样式重置。</p>\n<p>这里有必要插一句，请记住：没有任何理由对 <code class="language-text">&lt;li&gt;</code> 元素进行任何样式重置。因为所有浏览器的 <code class="language-text">&lt;li&gt;</code> 元素默认都没有 margin 外间距，也没有 padding 内间距，list-style-type 也是继承 <code class="language-text">&lt;ul&gt;</code> 或 <code class="language-text">&lt;ol&gt;</code> 元素，所以对 <code class="language-text">&lt;li&gt;</code> 元素进行任何样式重置，既浪费 CSS 代码，也不利于列表序号的样式设置。此刻，你就可以看看手中的项目中的代码有没有对 <code class="language-text">&lt;li&gt;</code> 元素做过样式重置，如果有，赶快删掉：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="89734546488638010000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 删除以下代码 */\nli {\n   padding: 0;\n   margin: 0;\n   list-style-type: none;\n}`, `89734546488638010000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 删除以下代码 */</span>\n<span class="token selector">li</span> <span class="token punctuation">{</span>\n   <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n   <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n   <span class="token property">list-style-type</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>我们来看一下实际效果，如图 2-4 所示（截自 Firefox 浏览器）。</p>\n<p>完整的测试代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="80814353853701130000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<ol class=&quot;revert-ol&quot;>\n   <li>inherit关键字实用</li>\n   <li>initial关键字可用</li>\n   <li>unset关键字配合all使用</li>\n   <li>revert关键字有用</li>\n</ol>\n\n<style>\n   .revert-ol {\n      list-style: none;\n   }\n\n   @supports (padding: revert) {\n      .revert-ol {\n         padding: revert;\n         list-style-type: revert;\n      }\n   }\n</style>`, `80814353853701130000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ol</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>revert-ol<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>inherit关键字实用<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>initial关键字可用<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>unset关键字配合all使用<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>revert关键字有用<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ol</span><span class="token punctuation">></span></span>\n\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n   <span class="token selector">.revert-ol</span> <span class="token punctuation">{</span>\n      <span class="token property">list-style</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token atrule"><span class="token rule">@supports</span> <span class="token punctuation">(</span><span class="token property">padding</span><span class="token punctuation">:</span> revert<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>\n      <span class="token selector">.revert-ol</span> <span class="token punctuation">{</span>\n         <span class="token property">padding</span><span class="token punctuation">:</span> revert<span class="token punctuation">;</span>\n         <span class="token property">list-style-type</span><span class="token punctuation">:</span> revert<span class="token punctuation">;</span>\n      <span class="token punctuation">}</span>\n   <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>对于不支持 revert 关键字的浏览器，如 Chrome 79，则看不到前面的数字序号，如图 2-5 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-21-11-31-14-68d81e62f38a5839c1249a5850e332b7-d6910.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 568px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 120.59859154929578%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAYAAAD6S912AAAACXBIWXMAAAsSAAALEgHS3X78AAAD+klEQVQ4y61VWXPaSBjk/7/uVt6SrX1xdmMnla14XeslNmDuS4BBXLLEYSOExH2aQ+rtGcMWxH6MqgbNjIZP/X3dX8u3eV6h27UwnYygqmWolQqeOh05r1YryOfzCAUDCIfDyGYVlEoqymUV19fX6A9GEJfneThcvu3mGZ2nDmy7B7WoMmAVRVVlsBqqFRX3hQL+vvyG4N0d96pIpVIolctIxBNwnP7rgGLR7/exXMwxmU5hWRZmsyn6joNWs4VWq4kyX2IYBtrtNveaKBXv0bUHMoDrujLg4U6Ea2jaAx5bBsKhCILhKCKxCEKBICKRKD6ff8T7335HNBqTKcdjcQT8V8irdbx1+dzdDpPJBK54C+ebzRa73RaLxQKr1VI+c2yHqGcSdadjYrFcynPz+QKj0RDj8QSPRL9cPYuUd6hrGiyzhVg4gkQmg2iMKCNh+P1+XJx/wi+/vsPtzQ3Ozs7w19ev8H+/wd1dCN9vQszgD/x5/gVfPp2jbVoMyNzn8znW6zXruMCWKJdEsGBNp0TV61lUQVfOB6y1mIshaj1fLIluhMFwSJVMZAzJciabYToWa5QlixlklRzS6RSlEsIVGX7/4QOu//UjcHsr798uL3F59c/bNRQIh6zDZDwkmh4eKSHTNCUC27ZJVgtKLsd1TyJ5bLeoU1OiPLC743D3w4effPnSmTTFXEefbxcIKhRvuVKDphtMO0ty4ogn06jWNZKnw2g0kGRZovEk8oWiLE+C5/L5ezZEBT4BfTAcUSLPWG82lMEIQ8pAvMDq2WizBBZlI0Qv9ickxxkMYbJde/0BuiyNmNs80+f67ZSPWunk2m5Ea4BCfVkf7iek8M8ng4dcRYGbTMKNxeCSeffiAi716UYicNl6Lln2ePeoU49Zeft+lq0n0ewReWTVI5tgunh6ehlknBYD0gwM2L+rFZgfwBKIoD9m5dt3uHwLHQAexTkQJsE2c1jbDgMZtLNyrQ6DZtFsP0LjubVI/QeneQm4Ryi3aVueY6PHYAZZbpHRBodaLFLwaWhkWqUfagwuusKT2vP+D+y9CsgUPSIS6HQGNHQNlXIVadYzl8uj2WygdE+R0ztPOTzyw0P+h03xO2bnCNcW/qfrOoPlqM8aKjRcjUZimi+9/MC5rjfeQHjEkljbbEFhrm3WyzB09nhGuniB6IokSHvQUatVodAftQfjNOCxZA4PrG6HHcGUG03U+ccQ7T/BtMsMlkikUKvrr1L29um9GVAYqzDU2Wwurc3pO/IzISxqzCHs7dj2j8fPN4ctlR4I3eGBxRX9apNh8VHSaAS60USj2aYJFBAIx+ibOaQyWfhvg0ikslAUsVa4ryCZVuRn5D+N7v4X9QxfvgAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 21 11 31 14" title="" data-src="/static/2021-12-21-11-31-14-68d81e62f38a5839c1249a5850e332b7-d6910.png" data-srcset="/static/2021-12-21-11-31-14-68d81e62f38a5839c1249a5850e332b7-487ad.png 200w,\n/static/2021-12-21-11-31-14-68d81e62f38a5839c1249a5850e332b7-1cefb.png 400w,\n/static/2021-12-21-11-31-14-68d81e62f38a5839c1249a5850e332b7-d6910.png 568w" data-sizes="(max-width: 568px) 100vw, 568px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/pp7vd3?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<h4 id="兼容性-2"><a href="#%E5%85%BC%E5%AE%B9%E6%80%A7-2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>兼容性</h4>\n<p>revert 关键字属性值的兼容性具体信息如表 2-7 所示，可以看到 Chrome84 版本已经支持 revert 关键字属性值。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-21-11-32-29-1c4f820a5c049c66813741efe59af570-40f0e.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 30.08225616921269%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABQUlEQVQY0w3MTU+DMACAYf6/J49m0cx4NUt2MnqZWcw+jLpNx4TBBv2A0ZZCuwLtYA65vHlOr9XUjefvK2PSLEcYu66/Xm/sjfNjO4tVRzdOmG07n4uVtwsJoRAi+9cV8ti2rVVrddFCV+pklC5FYSp9rqtS/elCFUVj5KVRhRJtI42WSuVloWqtq1IaU1oBRb0g5QIPZ87Ug3o7Ecsh5f7rY/8czZ62/P49qsv4ekK+AtyaVBSbbzDQZa5Laq0O+MYjpiKD8WKJUPY22vfviAK9l9uGzZ9dejeHTRVfjYKpB9o6j9nHcPyAEGhOmcXJ7iRRzgFLvDwNE7pPM5ySgCU+Y5AnruI7RnY8WmfE74CAEwGHHrziSKwYu+p46Cpz3C1gaB8F7prSkNMQI0eKCIJNyoDIIAzXEXYY2SsZyTz6B0dOP7S1qmmTAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 21 11 32 29" title="" data-src="/static/2021-12-21-11-32-29-1c4f820a5c049c66813741efe59af570-fee1c.png" data-srcset="/static/2021-12-21-11-32-29-1c4f820a5c049c66813741efe59af570-a67b7.png 200w,\n/static/2021-12-21-11-32-29-1c4f820a5c049c66813741efe59af570-0b187.png 400w,\n/static/2021-12-21-11-32-29-1c4f820a5c049c66813741efe59af570-fee1c.png 800w,\n/static/2021-12-21-11-32-29-1c4f820a5c049c66813741efe59af570-40f0e.png 851w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>移动端的支持稍微滞后了一点，不过 revert 在实际项目中应用的时机估计也快到了。</p>\n<h2 id="指代所有-css-属性的-all-属性"><a href="#%E6%8C%87%E4%BB%A3%E6%89%80%E6%9C%89-css-%E5%B1%9E%E6%80%A7%E7%9A%84-all-%E5%B1%9E%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>指代所有 CSS 属性的 all 属性</h2>\n<p>all 属性可以重置除 unicode-bidi、direction 以及 CSS 自定义属性以外的所有 CSS 属性。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="90370928940153420000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`input {\n   all: inherit;\n}`, `90370928940153420000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">input</span> <span class="token punctuation">{</span>\n   <span class="token property">all</span><span class="token punctuation">:</span> inherit<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>该段代码表示 <code class="language-text">&lt;input&gt;</code> 元素中所有 CSS 属性都使用 inherit 关键字作为属性值。all 属性的语法如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="84222322799853800000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`all: initial | inherit | unset | revert;`, `84222322799853800000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">all</span><span class="token punctuation">:</span> initial | inherit | unset | revert<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>从 all 的语法中可看出，只能使用 inherit、initial、unset 和 revert 中的一个值作为属性值。</p>\n<p>all: inherit 没有任何实用价值，all: initial 也没有任何实用价值。有实用价值的是 all: unset 和 all: revert。all: unset 可以让任意一个元素样式表现和 <code class="language-text">&lt;span&gt;</code> 元素一样。all: revert 可以让元素恢复成浏览器默认的样式，也是很有用的。例如 <code class="language-text">&lt;progress&gt;</code> 进度条效果在 iOS 端很好看，很有质感，那么无须对其自定义样式，我们就可以使用 all: revert 将进度条一键还原成系统默认的样式：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="74306639660982900000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 仅 iOS Safari 有效 */\n@supports (-webkit-overflow-scrolling: touch) {\n   progress {\n      all: revert;\n   }\n}`, `74306639660982900000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="ts"\n              >\n                <span class="gatsby-code-button-language">ts</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="ts"><pre style="counter-reset: linenumber NaN" class="language-ts line-numbers"><code class="language-ts"><span class="token comment">/* 仅 iOS Safari 有效 */</span>\n@<span class="token function">supports</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">-</span>webkit<span class="token operator">-</span>overflow<span class="token operator">-</span>scrolling<span class="token punctuation">:</span> touch</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n   progress <span class="token punctuation">{</span>\n      all<span class="token punctuation">:</span> revert<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>最后讲讲为什么 unicode-bidi 和 direction 这两个 CSS 属性不受 all 属性影响。</p>\n<p>我们不妨反问一下，如果 unicode-bidi 和 direction 这两个 CSS 属性会受到 all 属性影响，那会出现什么问题呢？阿拉伯文的呈现形式是从右往左的，但是 direction 属性的初始值却是 ltr，即从左往右。如果 all 属性可以影响 direction 属性，那么执行 all: initial 的时候，这些阿拉伯文的网页文字全部都会变成从左往右呈现。大家可以想象一下我们的中文网页上的中文内容全部从右往左显示是什么样的，我敢保证，使用阿拉伯文的前端开发者绝对不会使用这个 all 属性的，all 属性在阿拉伯文中从此名存实亡。</p>\n<p>于是答案就出来了，之所以 direction 属性不受 all 影响，是因为当年 direction 属性设计失误，将其初始值设为了 ltr，而不是 auto。现在为了照顾从右往左阅读的场景，direction 属性就被设计成不受 all 属性影响。</p>\n<p>unicode-bidi 属性是 direction 属性的“跟屁虫”，而且它的功能还挺强大的，可以精确控制每一个文字的呈现方向，只是离开了 direction 属性就没用。既然这两个 CSS 属性形影不离，那就把 unicode-bidi 属性加入不会受 all 属性影响的属性队列吧。</p>\n<h2 id="css-新特性的渐进增强处理技巧"><a href="#css-%E6%96%B0%E7%89%B9%E6%80%A7%E7%9A%84%E6%B8%90%E8%BF%9B%E5%A2%9E%E5%BC%BA%E5%A4%84%E7%90%86%E6%8A%80%E5%B7%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>CSS 新特性的渐进增强处理技巧</h2>\n<p>在 CSS2 时代，浏览器层出不穷的奇怪 bug 让 CSS Hack 技巧一度盛行，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="53850771725645365000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* IE8+ */\ndisplay: table-cell;\n/* IE7 */\n*display: inline-block;\n/* IE6 */\n_display: inline;`, `53850771725645365000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* IE8+ */</span>\n<span class="token property">display</span><span class="token punctuation">:</span> table-cell<span class="token punctuation">;</span>\n<span class="token comment">/* IE7 */</span>\n*<span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>\n<span class="token comment">/* IE6 */</span>\n<span class="token property">_display</span><span class="token punctuation">:</span> inline<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>这种利用语法错误实现浏览器判别的做法可以说是 CSS 历史上的一道奇观了，直到现在，还有很多开发者在区分更高版本的 IE 浏览器的时候，使用在 CSS 属性值后面加 \\0 或者加 \\9 的方法。现在的 CSS 世界已不同于过去，CSS 特性的问题已经不在于渲染 bug，更多的是浏览器支持与不支持的问题，所以上面这些做法已经过时，且没有意义，请不要再使用了。</p>\n<p>如果你想渐进增强使用某些 CSS 新特性，可以看看本节介绍的几个技巧，它们足以应付各种各样的场景。在开始之前，为了让我的表述更简洁，有一些名词所表示的含义需要提前和大家说明。</p>\n<ul>\n<li>IE 浏览器：一直到 IE11 版本的所有 IE 浏览器。</li>\n<li>Edge 浏览器：专指 Edge12 ～ Edge18 版本的浏览器。</li>\n<li>Chromium Edge 浏览器：使用 Chromium 作为核心的 Edge 浏览器，并且是 Edge18 之后的版本，版本号从 76 开始。</li>\n<li>现代浏览器：使用 Web 标准渲染网站，不需要使用 CSS Hack，拥有高性能，同时和 CSS 新特性与时俱进的浏览器。在本书中专指 Chrome 浏览器、Safari 浏览器、Firefox 浏览器、Opera 浏览器和 ChromiumEdge 浏览器</li>\n<li>IE9+ 浏览器：特指 IE9 及其以上版本的 IE 浏览器，以及所有 Edge 版本浏览器和所有现代浏览器。以此类推，IE10+ 浏览器、IE11+ 浏览器、Edge12+ 浏览器这些名词的含义也是类似的。</li>\n<li>webkit 浏览器：特指以 webkit 为渲染引擎，或者前身是 webkit 渲染引擎的浏览器。特指 Chrome 浏览器、Safari 浏览器、Opera 浏览器和 Chromium Edge 浏览器。</li>\n</ul>\n<h3 id="直接使用-css-新特性"><a href="#%E7%9B%B4%E6%8E%A5%E4%BD%BF%E7%94%A8-css-%E6%96%B0%E7%89%B9%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>直接使用 CSS 新特性</h3>\n<p>有很多 CSS 新特性是对现有 Web 特性的体验升级，我们直接使用这些 CSS 新特性就好了，不要担心兼容性问题。因为在支持的浏览器中体验更好，在不支持的浏览器中也就是保持原来的样子而已。例如很常见的 border-radius、box-shadow、text-shadow、filter 等与视觉表现相关的 CSS 属性，或者 scroll-behavior、overscroll-behavior 等交互体验增强的 CSS 属性，还有 will-change 等性能增强的 CSS 属性，都是可以直接使用的。</p>\n<p>用常见的 border-radius 属性举例。我们经常会把用户头像设置成圆的，代码很简单：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="40624504858597230000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`img {\n   border-radius: 50%;\n}`, `40624504858597230000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">img</span> <span class="token punctuation">{</span>\n   <span class="token property">border-radius</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>对于不支持的浏览器怎么办呢？不需要做什么，放着就好了，矩形也挺好看的。</p>\n<p>记住，做 Web 开发是没有必要让所有浏览器都显示得一模一样的，好的浏览器有更好的显示，糟糕的浏览器就只有普通的显示，这才是对用户更负责任的做法。</p>\n<h3 id="利用属性值的语法差异实现兼容"><a href="#%E5%88%A9%E7%94%A8%E5%B1%9E%E6%80%A7%E5%80%BC%E7%9A%84%E8%AF%AD%E6%B3%95%E5%B7%AE%E5%BC%82%E5%AE%9E%E7%8E%B0%E5%85%BC%E5%AE%B9" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>利用属性值的语法差异实现兼容</h3>\n<p>有时候我们想要渐进增强使用某些新特性，则可以在属性值语法上做文章，借助全新的属性值语法有效区分新旧浏览器。</p>\n<p>举个例子，IE10+ 浏览器支持 CSS 动画属性 animation，我们要实现加载效果就可以使用一个很小的 PNG 图片，再借助旋转动画。这个方法的优点是资源占用少，动画效果细腻。于是，我们的需求来了，IE9 及其以下版本浏览器还是使用传统的 GIF 动图作为背景，IE10+浏览器则使用 PNG 背景图外加 animation 属性实现加载效果。这个需求的难点在于我们该如何区分 IE9 和 IE10 浏览器。大家千万不要再去找什么 CSS Hack 了，我们可以利用属性值的语法差异实现渐进增强效果。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="38837414752360710000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.icon-loading {\n   display: inline-block;\n   width: 30px;\n   height: 30px;\n   /* 所有浏览器识别 */\n   background: url(./loading.gif)\n   /* IE10+ 浏览器识别，覆盖上一行的 background 声明 */\n   background: url(./loading.png), linear-gradient(transparent, transparent);\n   animation: spin 1s linear infinite;\n}\n\n@keyframe spin {\n   from {\n      transform: rotate(360deg);\n   }\n\n   to {\n      transform: rotate(0deg);\n   }\n}`, `38837414752360710000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css{8}"\n              >\n                <span class="gatsby-code-button-language">css{8}</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight has-highlighted-lines" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.icon-loading</span> <span class="token punctuation">{</span>\n   <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>\n   <span class="token comment">/* 所有浏览器识别 */</span>\n   <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./loading.gif<span class="token punctuation">)</span></span>\n   <span class="token comment">/* IE10+ 浏览器识别，覆盖上一行的 background 声明 */</span>\n<span class="gatsby-highlight-code-line">   <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./loading.png<span class="token punctuation">)</span></span><span class="token punctuation">,</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>transparent<span class="token punctuation">,</span> transparent<span class="token punctuation">)</span><span class="token punctuation">;</span></span>   <span class="token property">animation</span><span class="token punctuation">:</span> spin 1s linear infinite<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token atrule"><span class="token rule">@keyframe</span> spin</span> <span class="token punctuation">{</span>\n   <span class="token selector">from</span> <span class="token punctuation">{</span>\n      <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>360deg<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">to</span> <span class="token punctuation">{</span>\n      <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>0deg<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>关键的 CSS 代码就是上面高亮的部分。由于线性渐变函数 linear-gradient() 需要 IE10+ 浏览器支持，因此，高亮的这行 CSS 声明在 IE9 浏览器中是无法识别的，IE9 浏览器下的 GIF 背景图不会被 PNG 背景图覆盖。图 2-6 所示就是 IE9 模式下 CSS 样式的应用细节，可以看到 background 属性值和 animation 属性下方都有红色波浪线，这是无法识别的意思。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-23-13-55-17-be823230116b2bf6388d56d42edefb87-28460.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 48.49215922798552%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABOklEQVQoz5VRaVPCMBDt//9djsIglwK2tKSHtaQmvWgbhBzrhmNw/CK+yexskn1vL6fIaRMnDdmUGetatf8CYwzcB6coC+F58P6RpJBTYMxIeSGjiNU5axUFZBmkKRACTXP+RnIpgkBn1CfQ9fqX9o2820EcQRRau7uS67raBwGQUKa0qzrGgOYQxTZNHGNB5nAAZeB4kMd3KhUcAaQGdKQEx3aIUS5WnrCkjV2xfhHetPfnfbgSGRF52OfRPvXa7breEkE3HU/6LenppncUKjBuJmNJP3kBTSlZrkquOJNaKTAatDIanZOPL/p2HIV3RNdB28I/4ViDybFF1zW+b5YrI9VpTBf8RUbg9Dm3I60quH/P15VYAi+ryWJV1U0YxePJ7OFxsFi+rf3gaTh6Hs8Gw9F0/qp/SH8DsuA+ldGcwuYAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 23 13 55 17" title="" data-src="/static/2021-12-23-13-55-17-be823230116b2bf6388d56d42edefb87-fee1c.png" data-srcset="/static/2021-12-23-13-55-17-be823230116b2bf6388d56d42edefb87-a67b7.png 200w,\n/static/2021-12-23-13-55-17-be823230116b2bf6388d56d42edefb87-0b187.png 400w,\n/static/2021-12-23-13-55-17-be823230116b2bf6388d56d42edefb87-fee1c.png 800w,\n/static/2021-12-23-13-55-17-be823230116b2bf6388d56d42edefb87-28460.png 829w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>图 2-7 所示则是 IE9 浏览器中的实时加载效果。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-23-13-55-55-405a527518036b9407ca81ac032eef9d-2c55a.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 587px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 45.4855195911414%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsSAAALEgHS3X78AAAAr0lEQVQoz6WPywrCMBBF8/9f4N5fEC19P0xpra0LxUXRCioIPkAUI5RMxlQpdhO1eFaTublzZwgqKDmebshKBKH6gkQlFEc8s2oEh/Zmv6hiJdDKLJ575gfsptiJcHd5N39Nlsib99cPutos8DsE/4AAgKhp1jJbPjmH17V1E0UD0teMxXLF2H292cZJGtBINx3bC6az+SjJegPdtD0axqbjSUnTLdenhuWOs8kwjB5arwoyvO6ciQAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 23 13 55 55" title="" data-src="/static/2021-12-23-13-55-55-405a527518036b9407ca81ac032eef9d-2c55a.png" data-srcset="/static/2021-12-23-13-55-55-405a527518036b9407ca81ac032eef9d-44ad4.png 200w,\n/static/2021-12-23-13-55-55-405a527518036b9407ca81ac032eef9d-d4623.png 400w,\n/static/2021-12-23-13-55-55-405a527518036b9407ca81ac032eef9d-2c55a.png 587w" data-sizes="(max-width: 587px) 100vw, 587px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/2i6t7m?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>类似的例子还有很多，例如，下拉浮层效果通过在 IE9+ 浏览器中使用 box-shadow 盒阴影、在 IE8 等浏览器中使用 border 边框来实现：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="39993123101096640000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.panel-x {\n   /* 所有浏览器识别 */\n   border: 1px solid #ddd;\n   /* rgba() IE9+ 识别，覆盖上一行 border 声明 */\n   border: 1px solid rgba(0, 0, 0, 0);\n   box-shadow: 2px 2px;\n}`, `39993123101096640000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.panel-x</span> <span class="token punctuation">{</span>\n   <span class="token comment">/* 所有浏览器识别 */</span>\n   <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #ddd<span class="token punctuation">;</span>\n   <span class="token comment">/* rgba() IE9+ 识别，覆盖上一行 border 声明 */</span>\n   <span class="token property">border</span><span class="token punctuation">:</span> 1px solid <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token property">box-shadow</span><span class="token punctuation">:</span> 2px 2px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>又如，下面这段代码既可以去除 inline-block 元素间的空白间隙，又能保持空格特性：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="69709098860174840000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.space-size-zero {\n   font-size: 0.1px;\n   font-size: -webkit-calc(1px - 1px);\n}`, `69709098860174840000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.space-size-zero</span> <span class="token punctuation">{</span>\n   <span class="token property">font-size</span><span class="token punctuation">:</span> 0.1px<span class="token punctuation">;</span>\n   <span class="token property">font-size</span><span class="token punctuation">:</span> <span class="token function">-webkit-calc</span><span class="token punctuation">(</span>1px - 1px<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>理论上讲，直接使用 font-size: 0 就可以实现想要的效果，但是在 IE 浏览器中直接设置 font-size: 0 会失去空格特性，如无法实现两端对齐效果等，因此只能设置成 font-size: 0.1px，此时字号大小按照 0px 渲染，空格特性也保留了。但是，这种做法又带来另外一个问题，由于 Chrome 浏览器有一个 12px 的最小字号限制规则，因此 font-size: .1px 会按照 font-size: 12px 渲染，怎么办呢？我们使用一个 IE 浏览器无法识别的语法就可以了，这里就使用了 -webkit-calc(1px - 1px)。</p>\n<p>又如，我们可以使用 background-blend-mode 属性让背景纹理更好看，但是 IE/Edge 浏览器均不支持这个 CSS 属性，那就退而求其次，使用资源开销较大的背景图片代替。技术方案有了，那如何区分 IE/Edge 浏览器呢？可以试试使用 #RRGGBBAA 色值（下面 CSS 代码中高亮的部分）：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="7964060827501917000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.background-pattern {\n   background: url(./pattern.png);\n   background: repeating-linear-gradient(...), repeating-linear-gradient(...), #00000000;\n   background-blend-mode: multiply;\n}`, `7964060827501917000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css{3}"\n              >\n                <span class="gatsby-code-button-language">css{3}</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight has-highlighted-lines" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.background-pattern</span> <span class="token punctuation">{</span>\n   <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./pattern.png<span class="token punctuation">)</span></span><span class="token punctuation">;</span>\n<span class="gatsby-highlight-code-line">   <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">repeating-linear-gradient</span><span class="token punctuation">(</span>...<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">repeating-linear-gradient</span><span class="token punctuation">(</span>...<span class="token punctuation">)</span><span class="token punctuation">,</span> #00000000<span class="token punctuation">;</span></span>   <span class="token property">background-blend-mode</span><span class="token punctuation">:</span> multiply<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><code class="language-text">#00000000</code> 指透明度为 0 的黑色，也就是纯透明颜色。其不影响视觉表现，作用是让 IE/Edge 浏览器无法识别这行 CSS 声明，因为 IE/Edge 浏览器并不支持 #RRGGBBAA 色值语法。于是，IE/Edge 浏览器会加载并渲染 pattern.png，而其余浏览器则使用纯 CSS 绘制的带有混合模式效果的很美的纹理背景。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/5ep1mx?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>大家在实际开发的时候，要是遇到类似的场景，可以想一想是不是可以借助属性值语法巧妙地解决浏览器的兼容性问题。</p>\n<h3 id="借助伪类或伪元素区分浏览器的技巧"><a href="#%E5%80%9F%E5%8A%A9%E4%BC%AA%E7%B1%BB%E6%88%96%E4%BC%AA%E5%85%83%E7%B4%A0%E5%8C%BA%E5%88%86%E6%B5%8F%E8%A7%88%E5%99%A8%E7%9A%84%E6%8A%80%E5%B7%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>借助伪类或伪元素区分浏览器的技巧</h3>\n<p>利用属性值的语法差异渐进增强使用 CSS 新特性固然精妙，但并不是所有 CSS 属性都可以这样使用。我们可以试试借助伪类或伪元素区分浏览器，其优点是可以一次性区分多个 CSS 属性，同时不会影响选择器的优先级。</p>\n<h4 id="ie-浏览器、edge-浏览器和其他浏览器的区分"><a href="#ie-%E6%B5%8F%E8%A7%88%E5%99%A8%E3%80%81edge-%E6%B5%8F%E8%A7%88%E5%99%A8%E5%92%8C%E5%85%B6%E4%BB%96%E6%B5%8F%E8%A7%88%E5%99%A8%E7%9A%84%E5%8C%BA%E5%88%86" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>IE 浏览器、Edge 浏览器和其他浏览器的区分</h4>\n<p>想要区分 IE9+ 浏览器，可以使用 IE9 浏览器才开始支持的伪类或伪元素。例如，使用下面几个伪元素：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="83699671389654220000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* IE9+ 浏览器识别 */\n_::before,\n.some-class {\n}\n/* 或者 */\n_::after,\n.some-class {\n}\n/* 或者 */\n_::selection,\n.some-class {\n}`, `83699671389654220000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* IE9+ 浏览器识别 */</span>\n<span class="token selector">_::before,\n.some-class</span> <span class="token punctuation">{</span>\n<span class="token punctuation">}</span>\n<span class="token comment">/* 或者 */</span>\n<span class="token selector">_::after,\n.some-class</span> <span class="token punctuation">{</span>\n<span class="token punctuation">}</span>\n<span class="token comment">/* 或者 */</span>\n<span class="token selector">_::selection,\n.some-class</span> <span class="token punctuation">{</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>或者下面几个伪类：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="88087041734594200000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`_:checked,\n.some-class {\n}\n/* 或者 */\n_:disabled,\n.some-class {\n}`, `88087041734594200000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">_:checked,\n.some-class</span> <span class="token punctuation">{</span>\n<span class="token punctuation">}</span>\n<span class="token comment">/* 或者 */</span>\n<span class="token selector">_:disabled,\n.some-class</span> <span class="token punctuation">{</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>之所以上面的写法可以有效地区分不同版本的浏览器，是因为 <code class="language-text">CSS 选择器语句中如果存在浏览器无法识别的伪类或伪元素，整个 CSS 规则集都会被忽略</code>。</p>\n<p>可能有开发者会对 <code class="language-text">_::before</code> 或者 <code class="language-text">_::selection</code> 前面的下划线的作用感到好奇。这个下划线是作为一个标签选择器用来占位的，本身不会产生任何匹配，因为我们的页面中没有标签名为下划线的元素。这里换成 some-tag-hahaha::before 或者 some-tag-hahaha::selection，效果也是一样的，之所以使用下划线是因为可以节省字符数量，下划线只需要占用一个字符。</p>\n<p>要想区分 IE10+ 浏览器，可以使用从 IE10 才开始支持的与表单验证相关的伪类，比如 :required、:optional、:valid 和 :invalid。由于 animation 属性也是从 IE10 浏览器才开始支持的，因此前面出现的加载的例子的 CSS 代码也可以这么写：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="92427395203452900000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.icon-loading {\n   display: inline-block;\n   width: 30px;\n   height: 30px;\n   background: url(./loading.gif);\n}\n\n/* IE10+ 浏览器识别 */\n_:valid,\n.icon-loading {\n   background: url(./loading.png);\n   animation: spin 1s linear infinite;\n}\n\n@keyframes spin {\n   from {\n      transform: rotate(360deg);\n   }\n\n   to {\n      transform: rotate(0deg);\n   }\n}`, `92427395203452900000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.icon-loading</span> <span class="token punctuation">{</span>\n   <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>\n   <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./loading.gif<span class="token punctuation">)</span></span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">/* IE10+ 浏览器识别 */</span>\n<span class="token selector">_:valid,\n.icon-loading</span> <span class="token punctuation">{</span>\n   <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./loading.png<span class="token punctuation">)</span></span><span class="token punctuation">;</span>\n   <span class="token property">animation</span><span class="token punctuation">:</span> spin 1s linear infinite<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token atrule"><span class="token rule">@keyframes</span> spin</span> <span class="token punctuation">{</span>\n   <span class="token selector">from</span> <span class="token punctuation">{</span>\n      <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>360deg<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">to</span> <span class="token punctuation">{</span>\n      <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>0deg<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>区分 IE11+ 浏览器可以使用 ::-ms-backdrop 伪元素。::backdrop 是一个从 IE11 开始支持的伪元素，可以控制全屏元素或者元素全屏时候的背景层的样式。在 IE11 浏览器中使用该元素时需要加 -ms- 私有前缀，在 Edge 等其他的浏览器中使用则不需要加私有前缀，加了反而无法识别。</p>\n<p>因此，最终的 CSS 代码会有冗余，.some-class 下的 CSS 样式需要写两遍：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="7469164364694181000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* IE11+ 浏览器识别 */\n_::-ms-backdrop,\n.some-class {\n   @supports (display: none) {\n      .some-class {\n      }\n   }\n}`, `7469164364694181000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* IE11+ 浏览器识别 */</span>\n<span class="token selector">_::-ms-backdrop,\n.some-class</span> <span class="token punctuation">{</span>\n   <span class="token atrule"><span class="token rule">@supports</span> <span class="token punctuation">(</span><span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>\n      <span class="token selector">.some-class</span> <span class="token punctuation">{</span>\n      <span class="token punctuation">}</span>\n   <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>区分 Edge12+浏览器可以使用 @supports 规则，区分 Edge13+ 浏览器可以使用 :in-range 或者 :out-of-range 伪类，示例如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="47627861119204516000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* Edge13+ 浏览器识别 */\n_:in-range,\n.some-class {\n}\n\n_:out-of-range,\n.some-class {\n}`, `47627861119204516000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* Edge13+ 浏览器识别 */</span>\n<span class="token selector">_:in-range,\n.some-class</span> <span class="token punctuation">{</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">_:out-of-range,\n.some-class</span> <span class="token punctuation">{</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>再往后的 Edge 版本区分就没什么意义了，也不会有这样的需求场景，我们无须关心。</p>\n<h4 id="浏览器类型的区分"><a href="#%E6%B5%8F%E8%A7%88%E5%99%A8%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%8C%BA%E5%88%86" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>浏览器类型的区分</h4>\n<p>若只想让 Firefox 浏览器识别，可以使用一个带有 -moz- 私有前缀的伪类或伪元素，示例如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="47849725912378770000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* Firefox only */\n_::moz-progress-bar,\n.some-class {\n}`, `47849725912378770000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* Firefox only */</span>\n<span class="token selector">_::moz-progress-bar,\n.some-class</span> <span class="token punctuation">{</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>若只想让现代浏览器识别，可用以下语句</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="79628803562578770000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 现代浏览器 */\n_:default,\n.some-class {\n}`, `79628803562578770000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 现代浏览器 */</span>\n<span class="token selector">_:default,\n.some-class</span> <span class="token punctuation">{</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>若只想让 webkit 浏览器识别，则只能使用带有 -webkit- 前缀的伪类，而不能使用带有 -webkit- 前缀的伪元素，因为 Firefox 浏览器会认为带有 -webkit- 前缀的伪元素语法是合法的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="84800622749918400000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* webkit 浏览器 */\n:webkit-any(_),\n.some-class {\n}`, `84800622749918400000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* webkit 浏览器 */</span>\n<span class="token selector">:webkit-any(_),\n.some-class</span> <span class="token punctuation">{</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>若只想让 Chromium Edge 浏览器识别，可以用如下语句：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="72361011082703585000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* Chromium Edge only */\n_::ms-any,\n.some-class {\n}`, `72361011082703585000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* Chromium Edge only */</span>\n<span class="token selector">_::ms-any,\n.some-class</span> <span class="token punctuation">{</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Chromium Edge 浏览器会把任意带有 -ms- 前缀的伪元素都认为是合法的，这应该是借鉴了 Firefox、Chrome、Safari 等浏览器认为带有-webkit-前缀的伪元素是合法的这一做法。</p>\n<p>当然，使用伪类或伪元素处理浏览器的兼容性也是有风险的，说不定哪一天浏览器就改变规则了。例如，浏览器突然不支持某个伪类了，-webkit-any() 伪类就有不被浏览器支持的风险；或者哪天 Firefox 浏览器也支持使用带有 -moz- 和 -webkit- 前缀的伪类了，就像 Chromium Edge 浏览器一样。</p>\n<p>因此，本节所提供的技巧，尤其是浏览器类型的区分，只能用在一些特殊场合，解决特殊问题，切不可当作金科玉律或者炫技的资本。</p>\n<h3 id="supports-规则下的渐进增强处理"><a href="#supports-%E8%A7%84%E5%88%99%E4%B8%8B%E7%9A%84%E6%B8%90%E8%BF%9B%E5%A2%9E%E5%BC%BA%E5%A4%84%E7%90%86" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>@supports 规则下的渐进增强处理</h3>\n<p>@supports 是 CSS 中的常见的 @ 规则，可以用来检测当前浏览器是否支持某个 CSS 新特性，这是最规范、最正统的 CSS 渐进增强处理方法，尤其适合多个 CSS 属性需要同时处理的场景。</p>\n<p>@supports 规则的设计初衷非常好，理论上应该很常用才对，毕竟 IE 浏览器的兼容性问题非常严重。但是在实际开发的时候，@supports 规则并没有在 IE 浏览器的兼容性问题上做出什么大的贡献。原因很简单，@supports 规则的支持是从 Edge12 浏览器开始的，根本就没有 IE 浏览器什么事情。</p>\n<p>如果非要强制使用 @supports 规则，则要牺牲 IE 浏览器的部分体验。用上面加载效果实现来举例，如果我们用 @supports 规则书写代码则是下面这样的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="32525581462578600000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.icon-loading {\n   display: inline-block;\n   width: 30px;\n   height: 30px;\n   background: url(./loading.gif);\n}\n\n/* Edge12+ 浏览器识别 */\n@supports (animation: none) {\n   .icon-loading {\n      background: url(./loading.png);\n      animation: spin 1s linear infinite;\n   }\n}\n\n@keyframes spin {\n   from {\n      transform: rotate(360deg);\n   }\n\n   to {\n      transform: rotate(0deg);\n   }\n}`, `32525581462578600000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.icon-loading</span> <span class="token punctuation">{</span>\n   <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>\n   <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./loading.gif<span class="token punctuation">)</span></span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">/* Edge12+ 浏览器识别 */</span>\n<span class="token atrule"><span class="token rule">@supports</span> <span class="token punctuation">(</span><span class="token property">animation</span><span class="token punctuation">:</span> none<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>\n   <span class="token selector">.icon-loading</span> <span class="token punctuation">{</span>\n      <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./loading.png<span class="token punctuation">)</span></span><span class="token punctuation">;</span>\n      <span class="token property">animation</span><span class="token punctuation">:</span> spin 1s linear infinite<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token atrule"><span class="token rule">@keyframes</span> spin</span> <span class="token punctuation">{</span>\n   <span class="token selector">from</span> <span class="token punctuation">{</span>\n      <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>360deg<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">to</span> <span class="token punctuation">{</span>\n      <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>0deg<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>此时，明明 IE10 和 IE11 浏览器都支持 animation 属性，却使用了 GIF 动图作为背景，这是因为 IE10 和 IE11 浏览器不支持 @supports 规则。</p>\n<p>对追求极致用户体验的开发者而言，这种做法显然是无法容忍的，于是他们就会放弃使用 @supports 规则，转而使用其他的技巧。不过，随着浏览器的不断发展，IE10 和 IE11 浏览器用户的占比一定会越来越小，我相信这个比例很快就会小于 1%。这个时候，牺牲小部分 IE10 和 IE11 浏览器用户的体验，换来代码层面的稳健，权衡来看，也是可以接受的。</p>\n<p>因此，在我看来，@supports 规则的应用前景一定会越来越好，对于这个 CSS 规则，我是极力推荐大家学习的。当你在实际项目中使用 @supports 规则应用了一个很帅气的 CSS 新特性的时候，那种愉悦的感觉会让你终生难忘。</p>\n<h4 id="从-supports-规则常用的语法说起"><a href="#%E4%BB%8E-supports-%E8%A7%84%E5%88%99%E5%B8%B8%E7%94%A8%E7%9A%84%E8%AF%AD%E6%B3%95%E8%AF%B4%E8%B5%B7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>从 @supports 规则常用的语法说起</h4>\n<p>所有开发者都能轻易掌握@supports 规则最基本的用法，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="84255960384792690000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`@supports (display: flex) {\n   .item {\n      flex: 1;\n   }\n}`, `84255960384792690000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token atrule"><span class="token rule">@supports</span> <span class="token punctuation">(</span><span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>\n   <span class="token selector">.item</span> <span class="token punctuation">{</span>\n      <span class="token property">flex</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>这段代码的意思很明了，如果浏览器支持 display:flex，则匹配.item 类名的元素就设置 flex: 1。</p>\n<p>@supports 规则还支持使用操作符进行判断，这些操作符是 not、and 和 or，分别表示“否定”“并且”“或者”。利用这些操作符实现简单的逻辑判断也没什么问题，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="79929784366769670000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`@supports (display: flex) {\n}\n\n@supports not (display: flex) {\n}\n\n@supports (display: flex) and (display: grid) {\n}\n\n@supports (display: flex) or (display: grid) {\n}`, `79929784366769670000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token atrule"><span class="token rule">@supports</span> <span class="token punctuation">(</span><span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>\n<span class="token punctuation">}</span>\n\n<span class="token atrule"><span class="token rule">@supports</span> not <span class="token punctuation">(</span><span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>\n<span class="token punctuation">}</span>\n\n<span class="token atrule"><span class="token rule">@supports</span> <span class="token punctuation">(</span><span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">)</span> and <span class="token punctuation">(</span><span class="token property">display</span><span class="token punctuation">:</span> grid<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>\n<span class="token punctuation">}</span>\n\n<span class="token atrule"><span class="token rule">@supports</span> <span class="token punctuation">(</span><span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">)</span> or <span class="token punctuation">(</span><span class="token property">display</span><span class="token punctuation">:</span> grid<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>甚至连续判断 3 个以上的 CSS 声明也没问题：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="37261255445467960000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 合法 */\n@supports (display: flex) and (display: grid) and (gap: 0) {\n}\n\n@supports (display: flex) or (display: grid) or (gap: 0) {\n}`, `37261255445467960000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 合法 */</span>\n<span class="token atrule"><span class="token rule">@supports</span> <span class="token punctuation">(</span><span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">)</span> and <span class="token punctuation">(</span><span class="token property">display</span><span class="token punctuation">:</span> grid<span class="token punctuation">)</span> and <span class="token punctuation">(</span><span class="token property">gap</span><span class="token punctuation">:</span> 0<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>\n<span class="token punctuation">}</span>\n\n<span class="token atrule"><span class="token rule">@supports</span> <span class="token punctuation">(</span><span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">)</span> or <span class="token punctuation">(</span><span class="token property">display</span><span class="token punctuation">:</span> grid<span class="token punctuation">)</span> or <span class="token punctuation">(</span><span class="token property">gap</span><span class="token punctuation">:</span> 0<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>但是，一旦遇到复杂逻辑判断，运行会出现问题，语法怎么写都写不对。</p>\n<p>例如，写一个判断当前浏览器支持弹性布局，但不支持网格布局的@support 语句，很多人按照自己的想法就会写成下面这样，结果语法错误，最后只能找别人已经写好的复杂语法例子去套用，这哪是学习呢？这是应付工作！实际上，稍微多花一点点功夫，就能完全学会 @supports 的条件判断语法，级联、嵌套，都完全不在话下。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="69887782418092370000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 不合法 */\n@supports (display: flex) and not (display: grid) {\n}\n\n@supports not (display: grid) and (display: flex) {\n}`, `69887782418092370000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 不合法 */</span>\n<span class="token atrule"><span class="token rule">@supports</span> <span class="token punctuation">(</span><span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">)</span> and not <span class="token punctuation">(</span><span class="token property">display</span><span class="token punctuation">:</span> grid<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>\n<span class="token punctuation">}</span>\n\n<span class="token atrule"><span class="token rule">@supports</span> not <span class="token punctuation">(</span><span class="token property">display</span><span class="token punctuation">:</span> grid<span class="token punctuation">)</span> and <span class="token punctuation">(</span><span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>接下来的内容会用到 CSS 属性值定义语法，我现在就认定你已经掌握了这方面的知识。</p>\n<p>我们先随便定义一个数据类型，将其命名为 <code class="language-text">&lt;var&gt;</code>，用于表示括号里面的东西，然后我们依葫芦画瓢：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="79075663526597590000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`(display: flex)\nnot (display: flex)\n(display: flex) and (display: grid) and (gap: 0)\n(display: flex) or (display: grid) or (gap: 0)`, `79075663526597590000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token punctuation">(</span><span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">)</span>\nnot <span class="token punctuation">(</span><span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">)</span>\n<span class="token punctuation">(</span><span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">)</span> and <span class="token punctuation">(</span><span class="token property">display</span><span class="token punctuation">:</span> grid<span class="token punctuation">)</span> and <span class="token punctuation">(</span><span class="token property">gap</span><span class="token punctuation">:</span> 0<span class="token punctuation">)</span>\n<span class="token punctuation">(</span><span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">)</span> or <span class="token punctuation">(</span><span class="token property">display</span><span class="token punctuation">:</span> grid<span class="token punctuation">)</span> or <span class="token punctuation">(</span><span class="token property">gap</span><span class="token punctuation">:</span> 0<span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>上面这些条件判断语句可以抽象成下面这样的正式语法：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="88915905870057240000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<supports-condition> = (<var>) | not (<var>) | (<var>)[ and (<var>)]+ | (<var>)[or (<var>)]+`, `88915905870057240000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css">&lt;supports-condition> = <span class="token punctuation">(</span>&lt;var><span class="token punctuation">)</span> | not <span class="token punctuation">(</span>&lt;var><span class="token punctuation">)</span> | <span class="token punctuation">(</span>&lt;var><span class="token punctuation">)</span>[ and <span class="token punctuation">(</span>&lt;var><span class="token punctuation">)</span>]+ | <span class="token punctuation">(</span>&lt;var><span class="token punctuation">)</span>[or <span class="token punctuation">(</span>&lt;var><span class="token punctuation">)</span>]+</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>最重点的部分来了！这个自定义的 <code class="language-text">&lt;var&gt;</code> 的语法很神奇、很有趣：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="50147504868567335000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<var> = <declaration> | <supports-condition>`, `50147504868567335000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css">&lt;var> = &lt;declaration> | &lt;supports-condition></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>居然在 CSS 语法中看到了递归——<code class="language-text">&lt;supports-condition&gt;</code>嵌套<code class="language-text">&lt;supports-condition&gt;</code>数据类型。原来 @supports 规则的复杂条件判断就是把合法的逻辑语句放在括号里不断嵌套！</p>\n<p>此刻才发现，“判断当前浏览器支持弹性布局，但不支持网格布局”这样的问题实在是太简单了，先把基础语法写好：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="71696256451053240000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`@supports (display: flex) and (不支持网格布局) {\n}`, `71696256451053240000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token atrule"><span class="token rule">@supports</span> <span class="token punctuation">(</span><span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">)</span> and <span class="token punctuation">(</span>不支持网格布局<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>然后“不支持网格布局”的基础语法是 not (display: grid)，将语法嵌套一下，就可以得到正确的写法：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="68300820332588350000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`@supoorts (display: flex) and (not (display: grid)) {\n}`, `68300820332588350000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token atrule"><span class="token rule">@supoorts</span> <span class="token punctuation">(</span><span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">)</span> and <span class="token punctuation">(</span>not <span class="token punctuation">(</span><span class="token property">display</span><span class="token punctuation">:</span> grid<span class="token punctuation">)</span><span class="token punctuation">)</span></span> <span class="token punctuation">{</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>Edge12 ～ Edge15 浏览器正好是符合上面的条件判断的，我们不妨验证一下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="9258897626009754000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<span class=&quot;supports-match&quot;>如果有背景色，则是匹配</span>\n<style>\n   .supports-match {\n      padding: 5px;\n      border: 1px solid;\n   }\n\n   @supports (display: flex) and (not (display: grid)) {\n      .supports-match {\n         background-color: #333;\n         color: #fff;\n      }\n   }\n</style>`, `9258897626009754000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>supports-match<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>如果有背景色，则是匹配<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n   <span class="token selector">.supports-match</span> <span class="token punctuation">{</span>\n      <span class="token property">padding</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>\n      <span class="token property">border</span><span class="token punctuation">:</span> 1px solid<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token atrule"><span class="token rule">@supports</span> <span class="token punctuation">(</span><span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">)</span> and <span class="token punctuation">(</span>not <span class="token punctuation">(</span><span class="token property">display</span><span class="token punctuation">:</span> grid<span class="token punctuation">)</span><span class="token punctuation">)</span></span> <span class="token punctuation">{</span>\n      <span class="token selector">.supports-match</span> <span class="token punctuation">{</span>\n         <span class="token property">background-color</span><span class="token punctuation">:</span> #333<span class="token punctuation">;</span>\n         <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>\n      <span class="token punctuation">}</span>\n   <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>在 Edge14 浏览器中的效果有背景色，但是在 Chrome 浏览器中则只有边框。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/5ce06l?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<h4 id="supports-规则完整语法和细节"><a href="#supports-%E8%A7%84%E5%88%99%E5%AE%8C%E6%95%B4%E8%AF%AD%E6%B3%95%E5%92%8C%E7%BB%86%E8%8A%82" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>@supports 规则完整语法和细节</h4>\n<p>至此，是时候看一下 @supports 规则的正式语法了，如下所示：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="58014987792266860000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`@supports <supports-condition> {\n   /* CSS 规则集 */\n}`, `58014987792266860000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token atrule"><span class="token rule">@supports</span> &lt;supports-condition></span> <span class="token punctuation">{</span>\n   <span class="token comment">/* CSS 规则集 */</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>其中，<code class="language-text">&lt;supports-condition&gt;</code> 就是前面不断出现的 <code class="language-text">&lt;supports-condition&gt;</code>，之前对它的常规用法已经讲得很详细了，这里再说说它的其他用法，也就是 @supports 规则支持 CSS 自定义属性的检测和 CSS 选择器语法的检测。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="68446325359521130000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 这里不能使用 css 语法高亮，否则会格式化到 :default */\n@supports (--var: blue) {\n}\n\n@supports selector(:default) {\n}`, `68446325359521130000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title=""\n              >\n                \n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">/* 这里不能使用 css 语法高亮，否则会格式化到 :default */\n@supports (--var: blue) {\n}\n\n@supports selector(:default) {\n}</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>其中，CSS 自定义属性的检测没有任何实用价值，本书不展开讲解；而 CSS 选择器语法的检测属于 CSS Conditional Rules Module Level 4 规范中的内容，目前浏览器尚未大规模支持，暂时没有实用价值，因此本书暂不讲解。</p>\n<p>我们现在先把条件判断的语法放一边，来看几个你可能不知道但很有用的关于 @supports 规则的细节知识。</p>\n<ol>\n<li>\n<p>在现代浏览器中，每一个逻辑判断的语法的合法性是独立的。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="62225586159195005000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`@supports (display: flex) or (anything;) {\n}`, `62225586159195005000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token atrule"><span class="token rule">@supports</span> <span class="token punctuation">(</span><span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">)</span> or <span class="token punctuation">(</span>anything<span class="token punctuation">;</span></span><span class="token selector">)</span> <span class="token punctuation">{</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>但 Edge 浏览器会认为上面的语句是不合法的，会忽略整行语句，我认为这是 Edge 浏览器的 bug。因此 Edge12 ～ Edge14 浏览器虽然不支持 CSS 自定义属性，但无法使用 @supports 规则检测出来：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="12786079366770276000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* Edge12 ~ Edge14 忽略以下语句 */\n@supports not (--var: blue) {\n}`, `12786079366770276000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* Edge12 ~ Edge14 忽略以下语句 */</span>\n<span class="token atrule"><span class="token rule">@supports</span> not <span class="token punctuation">(</span><span class="token property">--var</span><span class="token punctuation">:</span> blue<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>浏览器还提供了 CSS.supports() 接口，让我们可以在 JavaScript 代码中检测当前浏览器是否支持某个 CSS 特性，语法如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="54253327418241270000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`CSS.supports(propertyName, value);\nCSS.supports(supportCondition);`, `54253327418241270000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token constant">CSS</span><span class="token punctuation">.</span><span class="token function">supports</span><span class="token punctuation">(</span>propertyName<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token constant">CSS</span><span class="token punctuation">.</span><span class="token function">supports</span><span class="token punctuation">(</span>supportCondition<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>@supports 规则的花括号可以包含其他任意 @ 规则，甚至是包含 @supports 规则自身。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="34138917355741950000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`@supports (display: flex) {\n  /* 支持内嵌媒体查询语法 */\n  @media screen and (max-width: 9999px) {\n     .supports-match {\n        color: #fff;\n     }\n  }\n  \n  /* 支持内嵌 @supports 语法 */\n  @supports (animation: none) {\n     .supports-match {\n        animation: colorful 1s linear alternate infinite;\n     }\n  }\n\n  /* 支持内嵌 @keyframes 语法 */\n  @keyframe colorful {\n     from {\n        background-color: deepskyblue;\n     }\n     to {\n        background-color: deeppink;\n     }\n  }\n}`, `34138917355741950000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token atrule"><span class="token rule">@supports</span> <span class="token punctuation">(</span><span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>\n  <span class="token comment">/* 支持内嵌媒体查询语法 */</span>\n  <span class="token atrule"><span class="token rule">@media</span> screen and <span class="token punctuation">(</span><span class="token property">max-width</span><span class="token punctuation">:</span> 9999px<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>\n     <span class="token selector">.supports-match</span> <span class="token punctuation">{</span>\n        <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>\n     <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n  \n  <span class="token comment">/* 支持内嵌 @supports 语法 */</span>\n  <span class="token atrule"><span class="token rule">@supports</span> <span class="token punctuation">(</span><span class="token property">animation</span><span class="token punctuation">:</span> none<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>\n     <span class="token selector">.supports-match</span> <span class="token punctuation">{</span>\n        <span class="token property">animation</span><span class="token punctuation">:</span> colorful 1s linear alternate infinite<span class="token punctuation">;</span>\n     <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token comment">/* 支持内嵌 @keyframes 语法 */</span>\n  <span class="token atrule"><span class="token rule">@keyframe</span> colorful</span> <span class="token punctuation">{</span>\n     <span class="token selector">from</span> <span class="token punctuation">{</span>\n        <span class="token property">background-color</span><span class="token punctuation">:</span> deepskyblue<span class="token punctuation">;</span>\n     <span class="token punctuation">}</span>\n     <span class="token selector">to</span> <span class="token punctuation">{</span>\n        <span class="token property">background-color</span><span class="token punctuation">:</span> deeppink<span class="token punctuation">;</span>\n     <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>此时，在现代浏览器中可以看到文字背景色不停变化的动画效果。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/6573gr?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n</li>\n</ol>\n<h4 id="supports-规则与渐进增强案例"><a href="#supports-%E8%A7%84%E5%88%99%E4%B8%8E%E6%B8%90%E8%BF%9B%E5%A2%9E%E5%BC%BA%E6%A1%88%E4%BE%8B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>@supports 规则与渐进增强案例</h4>\n<p>@supports 规则使用案例在后续章节会多次出现，到时候大家可以仔细研究，这里就先不展示了。</p>\n<h3 id="对-css-新特性渐进增强处理的总结"><a href="#%E5%AF%B9-css-%E6%96%B0%E7%89%B9%E6%80%A7%E6%B8%90%E8%BF%9B%E5%A2%9E%E5%BC%BA%E5%A4%84%E7%90%86%E7%9A%84%E6%80%BB%E7%BB%93" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>对 CSS 新特性渐进增强处理的总结</h3>\n<p>接下来将陆续介绍上百个 CSS 新特性，其中很多新特性都存在兼容性的问题，主要是 IE 浏览器不支持。现在移动端用户的浏览器都是现代浏览器，80%～ 90% 桌面端用户的浏览器也都是现代浏览器，如果我们因为占比很少的低版本浏览器用户，而放弃使用这些让用户体验更好的 CSS 新特性，那将是一件非常遗憾的事情。身为前端开发者，如果没能在用户体验上创造更大的价值，总是使用传统的技术做一些重复性的工作，那么我们的工作激情很快就会被消磨掉，我们的竞争优势也会在日复一日的重复劳动中逐渐丧失。</p>\n<p>因此，我觉得大家在日常工作中，应该大胆使用 CSS 新特性，同时再多花一点额外的时间对这些新特性做一些兼容性方面的工作。这绝对是一件非常划算的事情，无论是对用户还是对自身的成长都非常有帮助。</p>\n<p>当然，虽然本节介绍了多个 CSS 新特性兼容处理的技巧，但是在实际开发的时候还是会遇到很多单纯使用 CSS 无法搞定的情况，此时就需要借助 JavaScript 代码和 DOM API 来实现兼容，即如果出现 CSS 无法做到兼容，或者低版本浏览器希望有近似的交互体验效果的情况，就需要 JavaScript 代码的处理。例如使用 position: sticky 实现滚动粘滞效果，传统方法都是使用 JavaScript 脚本来实现的，但现在大部分浏览器已经支持这个特性，我们可以让传统浏览器继续使用传统的 JavaScript 方法，现代浏览器则单纯使用 CSS 方法以得到更好的交互体验。</p>\n<p>千万不要觉得麻烦，说什么“所有浏览器都直接使用 JavaScript 实现就好啦”。所谓技术成就人生，如果完成需求的心态都是为了应付工作，哪里来的足以成就人生的技术呢？要知道，你所获得的报酬是跟你创造的价值成正比的，如果你想获得超出常人的报酬，那你就需要比那些普通开发者创造的价值更高，而这些价值的差异往往就源自对这些技术细节的处理，日积月累之后就会有明显的差异。</p>\n<p>这额外的一点兼容性处理工作其实也花不了你什么时间，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="25414786875862917000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.adsense {\n   position: relative;\n   position: sticky;\n}`, `25414786875862917000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.adsense</span> <span class="token punctuation">{</span>\n   <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>\n   <span class="token property">position</span><span class="token punctuation">:</span> sticky<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>JavaScript 代码中就多一行判断代码而已：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="44656032135241380000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`if (!window.CSS || !CSS.supports || !CSS.supports(\'position\', \'sticky\')) {\n   // 传统的 js 调用\n}`, `44656032135241380000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>window<span class="token punctuation">.</span><span class="token constant">CSS</span> <span class="token operator">||</span> <span class="token operator">!</span><span class="token constant">CSS</span><span class="token punctuation">.</span>supports <span class="token operator">||</span> <span class="token operator">!</span><span class="token constant">CSS</span><span class="token punctuation">.</span><span class="token function">supports</span><span class="token punctuation">(</span><span class="token string">\'position\'</span><span class="token punctuation">,</span> <span class="token string">\'sticky\'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n   <span class="token comment">// 传统的 js 调用</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>',
excerpt:"概述 CSS3 出现的历史和背景 CSS2.1 中的 CSS 属性的设计初衷是展示图文。因为在 CSS2.…",timeToRead:29,tableOfContents:'<ul>\n<li>\n<p><a href="/css-new-world-overview-prepare/#%E6%A6%82%E8%BF%B0">概述</a></p>\n<ul>\n<li><a href="/css-new-world-overview-prepare/#css3-%E5%87%BA%E7%8E%B0%E7%9A%84%E5%8E%86%E5%8F%B2%E5%92%8C%E8%83%8C%E6%99%AF">CSS3 出现的历史和背景</a></li>\n<li><a href="/css-new-world-overview-prepare/#%E6%A8%A1%E5%9D%97%E5%8C%96%E7%9A%84-css-%E6%96%B0%E4%B8%96%E7%95%8C">模块化的 CSS 新世界</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/css-new-world-overview-prepare/#%E9%9C%80%E8%A6%81%E6%8F%90%E5%89%8D%E4%BA%86%E8%A7%A3%E7%9A%84%E7%9F%A5%E8%AF%86">需要提前了解的知识</a></p>\n<ul>\n<li>\n<p><a href="/css-new-world-overview-prepare/#%E4%BA%92%E9%80%9A%E4%BA%92%E8%81%94%E7%9A%84-css-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B">互通互联的 CSS 数据类型</a></p>\n<ul>\n<li><a href="/css-new-world-overview-prepare/#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E5%85%B3%E6%B3%A8-css-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B">为什么要关注 CSS 数据类型</a></li>\n<li><a href="/css-new-world-overview-prepare/#%E5%87%A0%E4%B8%AA%E5%B8%B8%E8%A7%81%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E7%AE%80%E5%8D%95%E4%BB%8B%E7%BB%8D">几个常见数据类型的简单介绍</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/css-new-world-overview-prepare/#%E5%AD%A6%E4%BC%9A%E7%9C%8B%E6%87%82-css-%E5%B1%9E%E6%80%A7%E5%80%BC%E5%AE%9A%E4%B9%89%E8%AF%AD%E6%B3%95">学会看懂 CSS 属性值定义语法</a></p>\n<ul>\n<li><a href="/css-new-world-overview-prepare/#%E5%AD%A6%E4%B9%A0-css-%E5%B1%9E%E6%80%A7%E5%80%BC%E5%AE%9A%E4%B9%89%E8%AF%AD%E6%B3%95%E7%9A%84%E5%A5%BD%E5%A4%84">学习 CSS 属性值定义语法的好处</a></li>\n<li>\n<p><a href="/css-new-world-overview-prepare/#css-%E5%B1%9E%E6%80%A7%E5%80%BC%E5%AE%9A%E4%B9%89%E8%AF%AD%E6%B3%95%E8%AF%A6%E8%A7%A3">CSS 属性值定义语法详解</a></p>\n<ul>\n<li><a href="/css-new-world-overview-prepare/#%E5%85%B3%E9%94%AE%E5%AD%97">关键字</a></li>\n<li><a href="/css-new-world-overview-prepare/#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B">数据类型</a></li>\n<li><a href="/css-new-world-overview-prepare/#%E7%AC%A6%E5%8F%B7">符号</a></li>\n<li><a href="/css-new-world-overview-prepare/#%E5%AD%97%E9%9D%A2%E7%AC%A6%E5%8F%B7%E6%96%9C%E6%9D%A0%EF%BC%88%EF%BC%89%E7%9A%84%E8%AF%A6%E7%BB%86%E4%BB%8B%E7%BB%8D">字面符号斜杠（/）的详细介绍</a></li>\n<li><a href="/css-new-world-overview-prepare/#%E5%85%B6%E4%BB%96%E7%AC%A6%E5%8F%B7%E4%BB%8B%E7%BB%8D">其他符号介绍</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href="/css-new-world-overview-prepare/#%E4%BA%86%E8%A7%A3-css-%E5%85%A8%E5%B1%80%E5%85%B3%E9%94%AE%E5%AD%97%E5%B1%9E%E6%80%A7%E5%80%BC">了解 CSS 全局关键字属性值</a></p>\n<ul>\n<li><a href="/css-new-world-overview-prepare/#%E7%94%A8%E8%BF%87%E9%83%BD%E8%AF%B4%E5%A5%BD%E7%9A%84%E7%BB%A7%E6%89%BF%E5%85%B3%E9%94%AE%E5%AD%97-inherit">用过都说好的继承关键字 inherit</a></li>\n<li>\n<p><a href="/css-new-world-overview-prepare/#%E5%8F%AF%E4%BB%A5%E4%B8%80%E7%94%A8%E7%9A%84%E5%88%9D%E5%A7%8B%E5%80%BC%E5%85%B3%E9%94%AE%E5%AD%97-initial">可以一用的初始值关键字 initial</a></p>\n<ul>\n<li><a href="/css-new-world-overview-prepare/#%E5%8F%AF%E8%83%BD%E7%9A%84%E8%AF%AF%E5%8C%BA">可能的误区</a></li>\n<li><a href="/css-new-world-overview-prepare/#%E5%85%BC%E5%AE%B9%E6%80%A7">兼容性</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/css-new-world-overview-prepare/#%E4%BA%86%E8%A7%A3%E4%B8%80%E4%B8%8B%E4%B8%8D%E5%9B%BA%E5%AE%9A%E5%80%BC%E5%85%B3%E9%94%AE%E5%AD%97-unset">了解一下不固定值关键字 unset</a></p>\n<ul>\n<li><a href="/css-new-world-overview-prepare/#%E5%85%BC%E5%AE%B9%E6%80%A7-1">兼容性</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/css-new-world-overview-prepare/#%E6%88%91%E4%B8%AA%E4%BA%BA%E5%BE%88%E5%96%9C%E6%AC%A2%E7%9A%84%E6%81%A2%E5%A4%8D%E5%85%B3%E9%94%AE%E5%AD%97-revert">我个人很喜欢的恢复关键字 revert</a></p>\n<ul>\n<li><a href="/css-new-world-overview-prepare/#%E5%85%BC%E5%AE%B9%E6%80%A7-2">兼容性</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href="/css-new-world-overview-prepare/#%E6%8C%87%E4%BB%A3%E6%89%80%E6%9C%89-css-%E5%B1%9E%E6%80%A7%E7%9A%84-all-%E5%B1%9E%E6%80%A7">指代所有 CSS 属性的 all 属性</a></li>\n<li>\n<p><a href="/css-new-world-overview-prepare/#css-%E6%96%B0%E7%89%B9%E6%80%A7%E7%9A%84%E6%B8%90%E8%BF%9B%E5%A2%9E%E5%BC%BA%E5%A4%84%E7%90%86%E6%8A%80%E5%B7%A7">CSS 新特性的渐进增强处理技巧</a></p>\n<ul>\n<li><a href="/css-new-world-overview-prepare/#%E7%9B%B4%E6%8E%A5%E4%BD%BF%E7%94%A8-css-%E6%96%B0%E7%89%B9%E6%80%A7">直接使用 CSS 新特性</a></li>\n<li><a href="/css-new-world-overview-prepare/#%E5%88%A9%E7%94%A8%E5%B1%9E%E6%80%A7%E5%80%BC%E7%9A%84%E8%AF%AD%E6%B3%95%E5%B7%AE%E5%BC%82%E5%AE%9E%E7%8E%B0%E5%85%BC%E5%AE%B9">利用属性值的语法差异实现兼容</a></li>\n<li>\n<p><a href="/css-new-world-overview-prepare/#%E5%80%9F%E5%8A%A9%E4%BC%AA%E7%B1%BB%E6%88%96%E4%BC%AA%E5%85%83%E7%B4%A0%E5%8C%BA%E5%88%86%E6%B5%8F%E8%A7%88%E5%99%A8%E7%9A%84%E6%8A%80%E5%B7%A7">借助伪类或伪元素区分浏览器的技巧</a></p>\n<ul>\n<li><a href="/css-new-world-overview-prepare/#ie-%E6%B5%8F%E8%A7%88%E5%99%A8%E3%80%81edge-%E6%B5%8F%E8%A7%88%E5%99%A8%E5%92%8C%E5%85%B6%E4%BB%96%E6%B5%8F%E8%A7%88%E5%99%A8%E7%9A%84%E5%8C%BA%E5%88%86">IE 浏览器、Edge 浏览器和其他浏览器的区分</a></li>\n<li><a href="/css-new-world-overview-prepare/#%E6%B5%8F%E8%A7%88%E5%99%A8%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%8C%BA%E5%88%86">浏览器类型的区分</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/css-new-world-overview-prepare/#supports-%E8%A7%84%E5%88%99%E4%B8%8B%E7%9A%84%E6%B8%90%E8%BF%9B%E5%A2%9E%E5%BC%BA%E5%A4%84%E7%90%86">@supports 规则下的渐进增强处理</a></p>\n<ul>\n<li><a href="/css-new-world-overview-prepare/#%E4%BB%8E-supports-%E8%A7%84%E5%88%99%E5%B8%B8%E7%94%A8%E7%9A%84%E8%AF%AD%E6%B3%95%E8%AF%B4%E8%B5%B7">从 @supports 规则常用的语法说起</a></li>\n<li><a href="/css-new-world-overview-prepare/#supports-%E8%A7%84%E5%88%99%E5%AE%8C%E6%95%B4%E8%AF%AD%E6%B3%95%E5%92%8C%E7%BB%86%E8%8A%82">@supports 规则完整语法和细节</a></li>\n<li><a href="/css-new-world-overview-prepare/#supports-%E8%A7%84%E5%88%99%E4%B8%8E%E6%B8%90%E8%BF%9B%E5%A2%9E%E5%BC%BA%E6%A1%88%E4%BE%8B">@supports 规则与渐进增强案例</a></li>\n</ul>\n</li>\n<li><a href="/css-new-world-overview-prepare/#%E5%AF%B9-css-%E6%96%B0%E7%89%B9%E6%80%A7%E6%B8%90%E8%BF%9B%E5%A2%9E%E5%BC%BA%E5%A4%84%E7%90%86%E7%9A%84%E6%80%BB%E7%BB%93">对 CSS 新特性渐进增强处理的总结</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>',wordCount:{words:2594},frontmatter:{date:"2021-12-19 23:44:24",path:"/css-new-world-overview-prepare/",tags:"前端, CSS, CSS新世界, 读书笔记",title:"CSS新世界概述及准备",draft:null,catalog_number:null}},nextPost:{html:'<h1 id="line-height-的另外一个朋友-font-size"><a href="#line-height-%E7%9A%84%E5%8F%A6%E5%A4%96%E4%B8%80%E4%B8%AA%E6%9C%8B%E5%8F%8B-font-size" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>line-height 的另外一个朋友 font-size</h1>\n<p>第 5 章介绍过 line-height 和 vertical-align 的好朋友关系，实际上 font-size 也和 line-height 是好朋友，同样也无处不在，并且纸面上 line-height 的数值属性值和百分比值属性值都是相对于 font-size 计算的，其关系可谓不言而喻。</p>\n<h2 id="font-size-和-vertical-align-的隐秘故事"><a href="#font-size-%E5%92%8C-vertical-align-%E7%9A%84%E9%9A%90%E7%A7%98%E6%95%85%E4%BA%8B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>font-size 和 vertical-align 的隐秘故事</h2>\n<p>line-height 的部分类别属性值是相对于 font-size 计算的，vertical-align 百分比值属性值又是相对于 line-height 计算的，于是，看上去八辈子都搭不上边的 vertical-align 和 font-size 属性背后其实也有有着关联的。</p>\n<p>例如，下面的 CSS 代码组合：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="97867754712785080000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`p {\n   font-size: 16px;\n   line-height: 1.5;\n}\n\np > img {\n   vertical-align: -25%;\n}`, `97867754712785080000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">p</span> <span class="token punctuation">{</span>\n   <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>\n   <span class="token property">line-height</span><span class="token punctuation">:</span> 1.5<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">p > img</span> <span class="token punctuation">{</span>\n   <span class="token property">vertical-align</span><span class="token punctuation">:</span> -25%<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>此时，p > img 选择器对应元素的 vertical-align 计算值应该是：</p>\n<p>16px * 1.5 * -25% = -6px</p>\n<p>也就是上面的 CSS 代码等同于：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="51982260987297430000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`p {\n   font-size: 16px;\n   line-height: 1.5;\n}\n\np > img {\n   vertical-align: -6px;\n}`, `51982260987297430000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">p</span> <span class="token punctuation">{</span>\n   <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>\n   <span class="token property">line-height</span><span class="token punctuation">:</span> 1.5<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">p > img</span> <span class="token punctuation">{</span>\n   <span class="token property">vertical-align</span><span class="token punctuation">:</span> -6px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>但是两者又有所不同，很显然 <code class="language-text">-25%</code> 是一个相对计算属性值，如果此时元素的 font-size 发生变化，则图片会自动进行垂直位置调整。我们可以看一个无论 font-size 如何变化、后面图标都垂直居中对齐的例子，无论文字字号是大还是小，后面的图标都非常良好地垂直居中对齐，如图 8-1 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2020-01-10-11-53-07-9938aa85812a1fb84f2ae86eeeec6915-70b68.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 266px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 44.73684210526316%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsSAAALEgHS3X78AAABHElEQVQoz31QyWqFQBD0/z/Dk8tVwaMGPCR4EYQoonEDd8cVd5NCyUsi5NVh6O7q6q5p6vMvuq6r67ppmqqq8jxP07SqSNu2hJC+72/N1O9k2zZo8B7HkcSxZVnyy2sUxaDGcQKFANS/YixZlgXvVcE2FBHs+w47zzYDrutKkiQIgqZpqqrSNC2KIj6yrltZls82r+s6jqNpmrIsE1Ih4DiOZVl4edP0d9O+i49vXITveYqiMAyj63pRlDzPh2E4TVPbdrjf5f/R/7P5ynFV2EN3HMe4vOd58zzDzjAMKN7/jBvatp0kyXQiPwENxFEUpSfAIkbRMAwYwXTf9zGOwg2DIHiIEbvuB1rDExhUFEWWZZgFynEcyNB8ib8ASuP46qRLJt4AAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2020 01 10 11 53 07" title="" data-src="/static/2020-01-10-11-53-07-9938aa85812a1fb84f2ae86eeeec6915-70b68.png" data-srcset="/static/2020-01-10-11-53-07-9938aa85812a1fb84f2ae86eeeec6915-74086.png 200w,\n/static/2020-01-10-11-53-07-9938aa85812a1fb84f2ae86eeeec6915-70b68.png 266w" data-sizes="(max-width: 266px) 100vw, 266px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>核心 CSS 代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="81597920987302230000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`p > img {\n   width: 16px;\n   height: 16px;\n   vertical-align: 25%;\n   position: relative;\n   top: 8px;\n}`, `81597920987302230000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">p > img</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>\n   <span class="token property">vertical-align</span><span class="token punctuation">:</span> 25%<span class="token punctuation">;</span>\n   <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>\n   <span class="token property">top</span><span class="token punctuation">:</span> 8px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>原理如下：内联元素默认基线对齐，图片的基线可以看成是图片的下边缘，文字内容的基线是字符 x 下边缘，因此，本例中，图片下边缘默认和“中文”两个汉字字形底边缘往上一点的位置对齐。然后，我们通过 <code class="language-text">vertical-align: 25%</code> 声明让图片的下边缘和中文汉字的中心线对齐。此时，图标和文字的状态应该如图 8-2 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2020-01-10-11-55-22-e5a618701a17fdcd82a83923c544c0b6-3a985.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 186px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 55.91397849462365%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABuElEQVQoz41RXW+iUBD1n/cPtE/btElj3Jj2wZpN3WW7gWLVxA3djcaP4lcFEVRULuUCAuIGUfdEmybd+LDzAHNnzpk5M5PY7Xbb7Rbf5XLpeR4xjKGiwHcdJwiC0WikqWrg+5RS0zQptcIwfKck3j1d13+w7Je7u6tkkuP535XKt+9MMpX6nE5/ZZihpgEkKaphGEfIrm1XSiXh8dHU9dz19cqynp+efnJc+vJS4POR63rk9dPpRf9FAniz2Xwgm4Rs47h0f39zfh4Aapq/WPYhmz07OSnmcnQ4xGBU1V4JOdJ5Pp8/iyIUQmq+UJgR4odhjmHyxeKfKFruR12tVhalR8jYB8dyk8kEe8rzvCiKNqW3mUy/3/cWCwIzjKmuY6kfyP/YIfE/lnBdt1wua5o2GAxwGITG47EgCN1u13EcVVWRQnNEms1mrVbDdFAnSZLv+wmIRBR3Amg6nR70g4mT4No4L1Ive+t0OqiFLMiz2SyKojfZcRyDCQLQrVYLPvqDhp6QgydGtm3bsqx2u71er99kH34oAxAKK4rSaDTr9YYsSxgEUGyu1+vJsqzsrVqtYueH1fwFnSdPPjUI9wcAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2020 01 10 11 55 22" title="" data-src="/static/2020-01-10-11-55-22-e5a618701a17fdcd82a83923c544c0b6-3a985.png" data-srcset="/static/2020-01-10-11-55-22-e5a618701a17fdcd82a83923c544c0b6-3a985.png 186w" data-sizes="(max-width: 186px) 100vw, 186px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>图 8-2 完全就是实例效果注释 <code class="language-text">top: 8px</code> 后的截图标注，没有任何加工。看上去似乎上面小，实际上是视觉误差，分隔线上下完全均等，1 像素不差。</p>\n<p>由于我们这里的图标是固定的像素尺寸，因此，通过偏移自身 1/2 高度来实现真正的居中，可以使用 CSS3 transform 位移，我这里为了兼容性，使用了 relative 相对定位。</p>\n<p>其居中原理本质上和绝对定位元素 50% 定位加偏移自身 1/2 尺寸实现居中是一样的，只不过这里的偏移使用的是 vertical-align 百分比值。</p>\n<p>这么一看，vertical-align 百分比属性值似乎还是有点用的！如果再联想到 <code class="language-text">vertical-align: middle</code> 实现垂直居中效果经常不尽如人意，说不定还能找到一块更好的宝。但我要告诉你，其实还有更好的实现，那就是使用单位 ex。例如，将前面例子中的 <code class="language-text">vertical-align: 25%</code> 改成 <code class="language-text">vertical-align: .6ex</code>，效果基本上就是一样的，并且还多了一个优点，就是使用 <code class="language-text">vertical-align: .6ex</code> 实现的垂直居中效果不会受 line-height 变化影响，而使用 <code class="language-text">vertical-align: 25%</code>，line-height 一旦变化，就必须改变原来的 vertical-align 大小、重新调整垂直位置，这容错性明显就降了一个层次。</p>\n<p>因此，虽然例子演示的是 vertical-align 百分比值，实际上是推荐使用与 font-size 有着密切关系的 ex 单位。</p>\n<p>说到这里，忍不住想介绍另外一些和 font-size 有着密切的关系的东西。</p>\n<h2 id="理解-font-size-与-ex、em-和-rem-的关系"><a href="#%E7%90%86%E8%A7%A3-font-size-%E4%B8%8E-ex%E3%80%81em-%E5%92%8C-rem-%E7%9A%84%E5%85%B3%E7%B3%BB" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>理解 font-size 与 ex、em 和 rem 的关系</h2>\n<p>ex 是字符 x 高度，显然和 font-size 关系密切，font-size 值越大，自然 ex 对应的大小也就大，对此本书前面已经有介绍，这里不赘述。</p>\n<p>下面来看看单位 em。如果说 ex 是字符 x 高度，那是不是 em 就是字符 m 的高度？</p>\n<p>我的回答是“不是的”，但是 em 和字符 m 确实有关。em 在传统排版中指一个字模的高度（可以脑补下活字印刷的字模）。</p>\n<p>例如，浏览器默认 font-size 大小是 16px，假设一个<code class="language-text">&lt;div&gt;</code>宽度是 160px，则正好可以放下 10 个汉字不换行；如果是 159px 像素，第十个汉字就会掉下来；如果再同时设置 line-height:1 和一个背景色，代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="1024361736808088200"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`div {\n   width: 160px;\n   line-height: 1;\n   background-color: #eee;\n}`, `1024361736808088200`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">div</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 160px<span class="token punctuation">;</span>\n   <span class="token property">line-height</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>\n   <span class="token property">background-color</span><span class="token punctuation">:</span> #eee<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>我们就会发现中文汉字的尺寸就可以看作 em 单位的代名词，尤其在高度这一块，简直分毫不差，如图 8-3 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2020-01-13-15-12-20-4714542444b599c959ead4224b3f1738-2ee65.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 220px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 50.45454545454545%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAABW0lEQVQoz12SSY+CQBCF+f+/gqsJ8eYSIqLCJB6MQqJBUTQuxCWekE3FYT5ohzhTiZXqV+81r6qVXq/XZrNZrVbz+Zzsed5yuVwsFl4ZAiRc1wWkWK/Xs9nscDjkeS7dbjdZlpvNZqPRUFW1Vqv1ej1N0+r1OmCr1ep2u4DtdpuuoigcacEpxGmaQup0OoZhAEH6KgMqPKMMCP1+H5AuR64eDoeFOC/j+zfyv/GJVHVVSFRZljG5QKtC1FWI478PSIyOQ5Y0mUwulwtbieOYxvl8FohlWWx0Op3u93vf92GCMAXzFmJd19EMBgMyAiGGx3jX65WFn04n9GT04gloJUki4fnTSVbG8/nkCnIURY/Hgxe53+/U5DAMQd62+XHAHhZom6bJVm3bdhzneDxyxD9vgxG+udvtRqPReDwWeynEQRCweiaBJ1zhHzGe+T8g4DoyhO12y3WMJsQ/Qu0Qoyp8orIAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2020 01 13 15 12 20" title="" data-src="/static/2020-01-13-15-12-20-4714542444b599c959ead4224b3f1738-2ee65.png" data-srcset="/static/2020-01-13-15-12-20-4714542444b599c959ead4224b3f1738-6af5a.png 200w,\n/static/2020-01-13-15-12-20-4714542444b599c959ead4224b3f1738-2ee65.png 220w" data-sizes="(max-width: 220px) 100vw, 220px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>也就是说，em 就是’中’等汉字的高度！于是，我们对 em 的理解就更加简单了，直接看一个很容易理解错误的题目，在 Chrome 浏览器下，<code class="language-text">&lt;h1&gt;</code>元素有如下的默认 CSS：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="82493166458146830000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`h1 {\n   font-size: 2em;\n   -webkit-margin-before: 0.67em;\n   -webkit-margin-after: 0.67em;\n}`, `82493166458146830000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">h1</span> <span class="token punctuation">{</span>\n   <span class="token property">font-size</span><span class="token punctuation">:</span> 2em<span class="token punctuation">;</span>\n   <span class="token property">-webkit-margin-before</span><span class="token punctuation">:</span> 0.67em<span class="token punctuation">;</span>\n   <span class="token property">-webkit-margin-after</span><span class="token punctuation">:</span> 0.67em<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>那么，假设页面没有任何 CSS 重置，根元素 font-size 就是默认的 16px，请问：此时<code class="language-text">&lt;h1&gt;</code>元素 margin-before 的像素计算值是多少？</p>\n<p>如果对 em 了解不够，很容易认为 1em 大小就是 16px，于是计算值是 <code class="language-text">16px × 0.67 = 10.72px</code>，实际上这是错误的。</p>\n<p>我们可以这样想，假设 <code class="language-text">&lt;h1&gt;</code> 里面有汉字，此时汉字的高度是多少？这个高度就是此时 1em 大小。<code class="language-text">&lt;h1&gt;</code> 元素此时 font-size 是 2em，算一下就是 32px，因此，此时里面汉字的高度应该是 32px，也就是说，此时<code class="language-text">&lt;h1&gt;</code>元素的 1em 应该是 32px，于是 margin-before 的像素计算值为 <code class="language-text">32px × 0.67 = 21.44px</code>，和浏览器自己的计算值一样，如图 8-4 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2020-01-13-15-15-42-1bf2eb3d92fd3fe07d9f3f18a628b52e-4c7f3.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 384px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 41.92708333333333%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAABKklEQVQY001Qi46DIBD0/z+uD2MkqGe1obSaCoIilVO5OWmTToIs7u7szEZ6GIwQNs+nspybZqJ0+vmZ29ZQ+ivE5v22rtsHTdM8Ho+6rp1z3vtI9r243VQcK0p1XcvzuSdkqGuVpqoozDBMHxhjGGNVVRFClFLoj5TWQ9uOhJiytJwPaWqKAsFUVYtzy7Ks67rsQICZUsrwhJBISNkx1p9OGKguF3E4yCTRjIk41pwba80HGE4phezX6zWO4zzPEQhAieM3GPQbJji3R/+f/X4HIQ5Yd0Qhd71e8zzHPrTW1lrI45zfOBdCIJVlGawWRQGroSBwvZvRhjTqns8nJAUu9LAd2Q5oRlmLBY3ju/lbG1hRkSQJBnZdh92AC1bv9zt+Ho9HMH4b+QO7rL/fNhCp+QAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2020 01 13 15 15 42" title="" data-src="/static/2020-01-13-15-15-42-1bf2eb3d92fd3fe07d9f3f18a628b52e-4c7f3.png" data-srcset="/static/2020-01-13-15-15-42-1bf2eb3d92fd3fe07d9f3f18a628b52e-370ca.png 200w,\n/static/2020-01-13-15-15-42-1bf2eb3d92fd3fe07d9f3f18a628b52e-4c7f3.png 384w" data-sizes="(max-width: 384px) 100vw, 384px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>乍一看，似乎出现了死循环悖论：<code class="language-text">font-size: 2em</code>，于是 1em 变成 32px，那此时的 2em 不又是 64px，然后又……</p>\n<p>正如前面提到过的一样，CSS 世界的渲染是一次渲染，是不会有死循环的。这里是先计算 font-size，然后再计算给其他使用 em 单位的属性值大小。</p>\n<p>总结如下：在 CSS 中，1em 的计算值等同于当前元素所在的 font-size 计算值，可以将其想象成当前元素中（如果有）汉字的高度。</p>\n<p>所有相对单位的好处都是一样的，样式表现更具有弹性。例如，理论上，有一个布局，希望小屏时整体缩小，大屏时再弹性扩大，此时就可以让所有元素宽高尺寸等都使用 em，于是，最后只要改变布局祖先元素的 font-size 大小就可以实现整体的弹性变化。</p>\n<p>这种策略很棒，也确实可行，但是有一个比较麻烦的事情，它和上面 <code class="language-text">&lt;h1&gt;</code> 元素计算一样的麻烦，em 是根据当前 font-size 大小计算的，一旦布局中出现标题这种跟基础 font-size 大小不一样的场景的时候，标题里面所有元素 em 都要重新计算一遍，甚为麻烦，最终的成品维护成本就比较高了。</p>\n<p>正是由于这种局限性，另外一个和 font-size 密切相关的单位出现了，就是 rem，即 root em，顾名思义，就是根元素 em 大小。em 相对于当前元素，rem 相对于根元素，本质差别在于当前元素是多变的，根元素是固定的，也就是说，如果使用 rem，我们的计算值不会受当前元素 font-size 大小的影响，假设 <code class="language-text">&lt;h1&gt;</code> 的默认 CSS 是这样：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="68099428676375890000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`h1 {\n   font-size: 2em;\n   -webkit-margin-before: 0.67rem;\n   -webkit-margin-after: 0.67rem;\n}`, `68099428676375890000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">h1</span> <span class="token punctuation">{</span>\n   <span class="token property">font-size</span><span class="token punctuation">:</span> 2em<span class="token punctuation">;</span>\n   <span class="token property">-webkit-margin-before</span><span class="token punctuation">:</span> 0.67rem<span class="token punctuation">;</span>\n   <span class="token property">-webkit-margin-after</span><span class="token punctuation">:</span> 0.67rem<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>那么 2em 的 font-size 计算值会被忽略，直接使用根元素的 16px 进行计算，于是 margin-before 计算值是 16 像素 ×0.67 = 10.72 像素。</p>\n<p>因此，要想实现带有缩放性质的弹性布局，使用 rem 是最佳策略，但 rem 是 CSS3 单位，IE9 以上浏览器才支持，需要注意兼容性，我这里就不再多介绍了。</p>\n<p>回到 em 单位。em 实际上更适用于图文内容展示的场景，对此进行弹性布局。例如 <code class="language-text">&lt;h1&gt;～&lt;h6&gt;</code> 以及 <code class="language-text">&lt;p&gt;</code> 等与文本内容展示的元素的 margin 都是用 em 作为单位，这样，当用户把浏览器默认字号从“中”设置成“大”或改成“小”的时候，上下间距也能根据字号大小自动调整，使阅读更舒服。</p>\n<p>再举个适用于 em 的场景，如果我们使用 SVG 矢量图标，建议设置 SVG 宽高如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="90318548438491300000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`svg {\n   width: 1em;\n   height: 1em;\n}`, `90318548438491300000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">svg</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 1em<span class="token punctuation">;</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 1em<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>这样，无论图标是个大号文字混在一起还是和小号文字混在一起，都能和当前文字大小保持一致，既省时又省力。</p>\n<h2 id="理解-font-size-的关键字属性值"><a href="#%E7%90%86%E8%A7%A3-font-size-%E7%9A%84%E5%85%B3%E9%94%AE%E5%AD%97%E5%B1%9E%E6%80%A7%E5%80%BC" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>理解 font-size 的关键字属性值</h2>\n<p>font-size 支持长度值，如 1em，也支持百分比值，如 100%。这两点想必众所周知，但 font-size 还支持关键字属性值这一点怕是就有不少人不清楚了。</p>\n<p>font-size 的关键字属性值分以下两类。</p>\n<ol>\n<li>\n<p><strong>相对尺寸关键字。</strong></p>\n<p>指相对于当前元素 font-size 计算，包括：</p>\n<ul>\n<li>larger：大一点，是 <code class="language-text">&lt;big&gt;</code> 元素的默认 font-size 属性值。</li>\n<li>smaller：小一点，是 <code class="language-text">&lt;small&gt;</code> 元素的默认 font-size 属性值。</li>\n</ul>\n</li>\n<li>\n<p><strong>绝对尺寸关键字。</strong></p>\n<p>与当前元素 font-size 无关，仅受浏览器设置的字号影响。注意这里的措辞，是“浏览器设置”，而非“根元素”，两者是有区别的。</p>\n<ul>\n<li>xx-large：好大好大，和 <code class="language-text">&lt;h1&gt;</code> 元素计算值一样。</li>\n<li>x-large：好大，和 <code class="language-text">&lt;h2&gt;</code> 元素计算值一样。</li>\n<li>large：大，和 <code class="language-text">&lt;h3&gt;</code> 元素计算值近似</li>\n<li>medium：不上不下，是 font-size 的初始值，和 <code class="language-text">&lt;h4&gt;</code> 元素计算值一样。</li>\n<li>small：小，和 <code class="language-text">&lt;h5&gt;</code> 元素计算值近似。</li>\n<li>x-small：好小，和 <code class="language-text">&lt;h6&gt;</code> 元素计算值近似。</li>\n<li>xx-small：好小好小，无对应的 HTML 元素。</li>\n</ul>\n</li>\n</ol>\n<p>其中，相对尺寸关键字 larger 和 smaller 由于计算的系数在不同浏览器下差异很大，因此实用价值有限，只有类似文档页、帮助页这类对文字尺寸要求不高的场合才有用；而绝对尺寸关键字的实用性要大一些，而且在某些场合是推荐使用的关键字属性值，这个要慢慢讲。</p>\n<p>下面两个 CSS 代码有什么区别？</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="90949643478638850000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`html {\n   font-size: 14px;\n}\n\nhtml {\n   font-size: 87.5%;\n}`, `90949643478638850000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">html</span> <span class="token punctuation">{</span>\n   <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">html</span> <span class="token punctuation">{</span>\n   <span class="token property">font-size</span><span class="token punctuation">:</span> 87.5%<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>在绝大多数场景下，两者没有差别，全都计算为 14px，但是如果用户对浏览器的字号进行了调整，例如，把默认的“中”设置成了“大”，如图 8-5 所示（截自 Chrome 浏览器），那么此时，font-size: 14px 计算值还是 14px，但 font-size: 87.5% 的计算值则大了一圈，于是差别就出现了。如果是像素单位 font-size，用户改变浏览器的默认字号后，页面会微丝不动；如果是百分比值 font-size，则字号相应放大，这就涉及用户体验和可访问性问题了。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-14-13-54-00-e41e5062f8fdbd9552cf845c2b9ac92f-f0556.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 596px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 59.56375838926174%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB7ElEQVQoz1VSy46bMBTlN6tuqq7bZX+kf9FNNYuRKs1ITTaV2pm0E5WnDcZgA+ERCIQBAhjoJUyT9ujKutb1uY9zLVnEXq9WP75/+/W0jaI4CILdbheChefzamEUzogA59N1XYlSxzRNzlmaZsMwCCG6XuRlUzyfjlV3sbw8Hcq6LMvDIQeU5TMhtpQkyX6/T/bZ9BetmBREMWFemLIgAeO7vUl97IQmxpvHzXa7VWRZUVQJGkjTNI5jyCHEAGQxTrrFZcyySqRld7WibU9gM/qum9sGGpA93+Oc930/k4fpWBz6tpr+xzAO4ziCs5ygjuR5XlW9vFtCdTveq4c71KzouKZiTYev9nBniY3XQQZIANK8kFVNe3h4XO4LuThNH75Urz8d39xO72/ydzfHt7fTq8/jx4el/j+V58XMGwijOIIRYA+E0qefG+X3NuCu59iujcOABZxijFVNRxib2KzqBsaUsiwjNoGARSzOmONQFaAjYjs6MjUDqwYyTEszkCyfI7ouy7LjuoHvSxc9mrqmNoEdNqe2rutdEBR5fixykBOKeIzB36COG8XJRTNpPGMmNw0oTimFGaB/w4AaBsbIcVxwETIgBH6czORhFm68Vl5S+D7XNA2ZlqrAL1BgQGiBMWZZBHKen1zxB7rpj8T9dgNrAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 14 13 54 00" title="" data-src="/static/2021-12-14-13-54-00-e41e5062f8fdbd9552cf845c2b9ac92f-f0556.png" data-srcset="/static/2021-12-14-13-54-00-e41e5062f8fdbd9552cf845c2b9ac92f-ae33b.png 200w,\n/static/2021-12-14-13-54-00-e41e5062f8fdbd9552cf845c2b9ac92f-daf23.png 400w,\n/static/2021-12-14-13-54-00-e41e5062f8fdbd9552cf845c2b9ac92f-f0556.png 596w" data-sizes="(max-width: 596px) 100vw, 596px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>正常情况下，14 像素的文字大小是足够的，但是，如果是高度近视的用户，或者上班急急忙忙忘记戴眼镜，或者在投影仪上投影网页内容，此时就有大字号浏览网页的需求，如果使用固定的像素单位，显然对这些使用场景是不友好的。</p>\n<p>好在浏览器还提供了“网页缩放”功能，但是此功能也是有局限性的：如果网页是定宽非响应式的，则网页放大后窗体以外的内容就看不到了，在 Chrome/Firefox 浏览器下甚至连个水平滚动条都没有，说不定重要信息就会看不到。由此可见，我们是不能轻易忽视浏览器字号设置功能的。</p>\n<p>然而，现代网页设计得很精致，要想网页布局跟随字体内容缩放实在两难，要么使用 em，但 em 计算与当前 font-size 耦合，不好维护；要么使用 rem，但 IE8 不支持，桌面端使用尴尬。因此，现实的压迫导致我们只能使用 px 进行布局，尤其桌面端网页。</p>\n<p>如何权衡“易于实现维护”“视觉还原”“可访问性”这三者，我这里有两个建议。</p>\n<ol>\n<li>\n<p>即使是定宽的传统桌面端网页，也需要做响应式处理，尤其是针对 1200 像素宽度设计的网页，但只需要响应到 800 像素即可，可以保证至少有 1.5 倍的缩放空间，如果做到这一步，那么是否需要响应浏览器的字号设置这一点就可以忽略。</p>\n</li>\n<li>\n<p>如果因各种原因无法做响应式处理，也没有必要全局都使用相对单位，毕竟成本等现实问题摆在那里，其实只需要在图文内容为主的重要局部区域使用可缩放的 font-size 处理即可。例如，小说网站的阅读页、微信公众号文章展示区、私信对话内容区、搜索引擎的落地页、评论区等，都强烈建议摒弃 px 单位，而采用下面的实践策略。</p>\n<ul>\n<li>\n<p>容器设置 font-size: medium，此时，这个局部展示区域的字号就跟着浏览器的设置走了，默认计算值是 16px。</p>\n</li>\n<li>\n<p>容器内的文字字号全部使用相对单位，如百分比值或者 em 都可以，然后基于 16px 进行转换。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="58127682996907800000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.article {\n font-size: medium;\n}\n.article h1 {\n font-size: 2em;\n margin: 0.875em 0;\n}\n.article p {\n font-size: 87.5%; /* 默认字号下计算值是 14px */\n margin: 1em 0;\n}`, `58127682996907800000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.article</span> <span class="token punctuation">{</span>\n <span class="token property">font-size</span><span class="token punctuation">:</span> medium<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token selector">.article h1</span> <span class="token punctuation">{</span>\n <span class="token property">font-size</span><span class="token punctuation">:</span> 2em<span class="token punctuation">;</span>\n <span class="token property">margin</span><span class="token punctuation">:</span> 0.875em 0<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token selector">.article p</span> <span class="token punctuation">{</span>\n <span class="token property">font-size</span><span class="token punctuation">:</span> 87.5%<span class="token punctuation">;</span> <span class="token comment">/* 默认字号下计算值是 14px */</span>\n <span class="token property">margin</span><span class="token punctuation">:</span> 1em 0<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n</ul>\n</li>\n</ol>\n<p>同时使用自适应流体布局，间距什么的也使用相对单位，例如上面 margin 使用的是 em 单位。于是，当用户改变了浏览器的字号后，整个阅读区域的所有字样甚至布局都会跟着放大，文字一下子就看清楚了。这种局部处理的好处在于，页面的导航、侧边栏这些不需要长时间阅读的模块还是原来的像素布局，还是那么精致，丝毫不受影响。就这么很微小的变动，就可以让你的网页在可访问性这一块超越大多数的网站，何乐而不为？</p>\n<p>可以看到，绝对尺寸关键字在实际项目中还有很有价值的，但有价值的仅仅是 medium，至于其他关键字，作用仅限于字面上的那点儿，大家了解一下即可。</p>\n<h2 id="font-size-0-与文本的隐藏"><a href="#font-size-0-%E4%B8%8E%E6%96%87%E6%9C%AC%E7%9A%84%E9%9A%90%E8%97%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>font-size: 0 与文本的隐藏</h2>\n<p>桌面 Chrome 浏览器下有个 12px 的字号限制，就是文字的 font-size 计算值不能小于 12px，我猜是因为中文，如宋体，要是小于 12px，就会挤成成一团，略丑，Chrome 看不下去，就直接禁用了。</p>\n<p>正是这种限制导致我们在使用 em 或 rem 进行布局的时候，不能这么处理：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="39021375193564520000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`html {\n   font-size: 62.5%;\n}`, `39021375193564520000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">html</span> <span class="token punctuation">{</span>\n   <span class="token property">font-size</span><span class="token punctuation">:</span> 62.5%<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>理论上，此时根字号计算值是 16px*0.625=10px，于是 <code class="language-text">width: 14px</code> 可以写成 <code class="language-text">width: 1.4em</code>，省了很多计算的麻烦。但是，在 Chrome 下由于 12px 的限制，根字号计算值实际不是 10px，而是 12px，所以，可以试试处理成这样：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="8042946598749179000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`html {\n   font-size: 625%;\n}`, `8042946598749179000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">html</span> <span class="token punctuation">{</span>\n   <span class="token property">font-size</span><span class="token punctuation">:</span> 625%<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>此时根字号计算值是 100px，既计算无忧，又没有 12px 的最小字号限制。</p>\n<p>但是我个人建议还是不要这样处理，尤其使用 em 的时候，因为 font-size 属性和 line-height 属性一样，由于继承性的存在，会影响贯穿整个网页，100px 的环境 font-size 一定会将平时不显山露水的底边对齐问题、间隙问题等放大，导致出现一些明显的样式问题，如果对 CSS 了解不是很深刻，怕是很难明白为什么会发生这样的问题。同时这样做也限制了 px 等其他单位的使用，有时候是比较要命的。</p>\n<p>因此，我的建议是仍基于浏览器默认的字号进行相对计算，也就是 medium 对应的 16px，16 这个数字是一定可以整除的，因此计算成本还行，或者使用 Sass 或 Less 之类的工具辅助计算。</p>\n<p>还是回到字号限制的问题。实际上，并不是所有小于 12px 的 font-size 都会被当作 12px 处理，有一个值例外，那就是 0，也就是说，如果 font-size:0 的字号表现就是 0，那么文字会直接被隐藏掉，并且只能是 <code class="language-text">font-size: 0</code>，哪怕设置成 font-size: 0.0000001px，都还是会被当作 12px 处理的。</p>\n<p>因此，如果希望隐藏 logo 对应元素内的文字，除了 text-indent 缩进隐藏外，还可以试试下面这种方法：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="25029165017847600000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.logo {\n   font-size: 0;\n}`, `25029165017847600000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.logo</span> <span class="token punctuation">{</span>\n   <span class="token property">font-size</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<h1 id="字体属性家族的大家长-font-family"><a href="#%E5%AD%97%E4%BD%93%E5%B1%9E%E6%80%A7%E5%AE%B6%E6%97%8F%E7%9A%84%E5%A4%A7%E5%AE%B6%E9%95%BF-font-family" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>字体属性家族的大家长 font-family</h1>\n<p>font-family 默认值由操作系统和浏览器共同决定，例如 Windows 和 OS X 下的 Chrome 默认字体不一样，同一台 Windows 系统的 Chrome 和 Firefox 浏览器默认字体也不一样。</p>\n<p>font-family 支持两类属性值，一类是“字体名”，一类是“字体族”。“字体名”很好理解，就是使用的对应字体的名称。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="17843842432966062000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`body {\n   font-family: simsun;\n}`, `17843842432966062000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">body</span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> simsun<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>就表示使用的是“宋体”。如果字体名包含空格，需要使用引号包起来。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="79113434155178560000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`body {\n   font-family: \'Microsoft Yahei\';\n}`, `79113434155178560000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">body</span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">\'Microsoft Yahei\'</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>根据我的实践，可以不用区分大小写。如果有多个字体设定，从左往右依次寻找本地是否有对应的字体即可。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="68295753402892160000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`body {\n   font-family: \'PingFang SC\', \'Microsoft Yahei\';\n}`, `68295753402892160000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">body</span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">\'PingFang SC\'</span><span class="token punctuation">,</span> <span class="token string">\'Microsoft Yahei\'</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>就是先寻找是否本地有 PingFang SC 字体；如果没有，则继续寻找本地是否有 Microsoft Yahei 字体；如果都没找到，就使用默认值。</p>\n<p>但是，“字体族”分为很多类，MDN 上文档分类如下：</p>\n<ul>\n<li>font-family: serif;</li>\n<li>font-family: sans-serif;</li>\n<li>font-family: monospace;</li>\n<li>font-family: cursive;</li>\n<li>font-family: fantasy;</li>\n<li>font-family: system-ui;</li>\n</ul>\n<p>具体含义解释如下。</p>\n<ul>\n<li>serif：衬线字体。</li>\n<li>sans-serif：无衬线字体。</li>\n<li>monospace：等宽字体。</li>\n<li>cursive：手写字体。</li>\n<li>fantasy：奇幻字体。</li>\n<li>system-ui：系统 UI 字体。</li>\n</ul>\n<p>对于中文网站，cursive 和 fantasy 应用场景有限，因此这里不予探讨，这里着重介绍一下衬线字体、无衬线字体和等宽字体。</p>\n<h2 id="了解衬线字体和无衬线字体"><a href="#%E4%BA%86%E8%A7%A3%E8%A1%AC%E7%BA%BF%E5%AD%97%E4%BD%93%E5%92%8C%E6%97%A0%E8%A1%AC%E7%BA%BF%E5%AD%97%E4%BD%93" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>了解衬线字体和无衬线字体</h2>\n<p>字体分衬线字体和无衬线字体。所谓衬线字体，通俗讲就是笔画开始、结束的地方有额外装饰而且笔画的粗细会有所不同的字体。网页中常用中文衬线字体是“宋体”，常用英文衬线字体有 Times New Roman、Georgia 等。无衬线字体没有这些额外的装饰，而且笔画的粗细差不多，如中文的“雅黑”字体，英文包括 Arial、Verdana、Tahoma、Helivetica、Calibri 等</p>\n<p>以前人们排正文喜欢使用衬线字体，但是如今，不知是审美疲劳还是人们更加追求简洁干净的缘故，更喜欢使用无衬线字体，如“微软雅黑”或者“苹方”之类的字体。</p>\n<p>在 CSS 世界中，字体是有对应的属性值的，如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="99657447842733740000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`font-family: serif; /* 衬线字体 */\nfont-family: sans-serif; /* 无衬线字体 */`, `99657447842733740000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">font-family</span><span class="token punctuation">:</span> serif<span class="token punctuation">;</span> <span class="token comment">/* 衬线字体 */</span>\n<span class="token property">font-family</span><span class="token punctuation">:</span> sans-serif<span class="token punctuation">;</span> <span class="token comment">/* 无衬线字体 */</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>我们在移动端 Web 开发的时候，虽然设备的默认中文字体不一样，但都是无衬线，都挺好看的，因此可以直接使用下面的 CSS 代码：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="16394366692233198000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`body {\n   font-family: sans-serif;\n}`, `16394366692233198000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">body</span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> sans-serif<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>没有必要特别指定中文字体，否则说不定会画蛇添足。</p>\n<p>serif 和 sans-serif 还可以和具体的字体名称写在一起，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="9564097919692927000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`body {\n   font-family: \'Microsoft Yahei\', sans-serif;\n}`, `9564097919692927000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">body</span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">\'Microsoft Yahei\'</span><span class="token punctuation">,</span> sans-serif<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>但是需要注意的是，serif 和 sans-serif 一定要写在最后，因为在大多数浏览器下，写在 serif 和 sans-serif 后面的所有字体都会被忽略。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="87442076994650600000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`body {\n   font-family: sans-serif, \'Microsoft Yahei\';\n}`, `87442076994650600000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">body</span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> sans-serif<span class="token punctuation">,</span> <span class="token string">\'Microsoft Yahei\'</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>在 Chrome 浏览器下，后面的 Microsoft Yahei 字体是不会被渲染的。据我的推测，有可能浏览器认为当前“字体族”已经满足了文本渲染的需要，没必要再往后解析了</p>\n<h2 id="等宽字体的实践价值"><a href="#%E7%AD%89%E5%AE%BD%E5%AD%97%E4%BD%93%E7%9A%84%E5%AE%9E%E8%B7%B5%E4%BB%B7%E5%80%BC" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>等宽字体的实践价值</h2>\n<p>所谓等宽字体，一般是针对英文字体而言的。据我所知，东亚字体应该都是等宽的，就是每个字符在同等 font-size 下占据的宽度是一样的。但是英文字体就不一定了，我随便写一个单词，就 iMac 吧，大家很明显地发现这个字符 i 要比 M 占据的宽度小。如果这样看着还不够清楚，那我换一种呈现方式，上下两行，上一行 6 个 i，下一行 6 个 M，如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="49470612874833986000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`iiiiii\nMMMMMM`, `49470612874833986000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title=""\n              >\n                \n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">iiiiii\nMMMMMM</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>实际的两行文本的宽度可能就如图 8-6 所示这般差异明显。</p>\n<p>但是，如果是等宽字体（可以让英文字符同等宽度显示的字体就称为“等宽字体”），如 Consolas、Monaco、monospace，则宽度表现就不一样了，如图 8-7 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-15-11-28-20-1e4bef06e0935327554432992b9e4271-8aa68.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 758px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 17.150395778364118%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAAsSAAALEgHS3X78AAAAbUlEQVQI14WNQQ6DMAwE8/83lkDcUBuRCuQEirBLapVbJdSV9jCH2XW1VhUhItV3/RdmfqY0zfPxRWcVEd/c7gBd2yENqnrhHojoW49EJ7tSymvb7BlCgAAxxmVdfySbyznLvpvcP/o0jobM+QNTTK0T0xvTPwAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 15 11 28 20" title="" data-src="/static/2021-12-15-11-28-20-1e4bef06e0935327554432992b9e4271-8aa68.png" data-srcset="/static/2021-12-15-11-28-20-1e4bef06e0935327554432992b9e4271-9e0f4.png 200w,\n/static/2021-12-15-11-28-20-1e4bef06e0935327554432992b9e4271-8ee5b.png 400w,\n/static/2021-12-15-11-28-20-1e4bef06e0935327554432992b9e4271-8aa68.png 758w" data-sizes="(max-width: 758px) 100vw, 758px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>等宽字体在 Web 中有什么用呢？</p>\n<ol>\n<li>\n<p>等宽字体与代码呈现</p>\n<p>首先等宽字体利于代码呈现。对于写代码的人来说，无论是什么语言，易读是第一位，使用等宽字体，我们阅读起来会更轻松舒服。因此，一般编辑器使用的字体或者 Web 上需要呈现源代码的字体都是等宽字体。例如，即将出现的演示页面的源代码如图 8-8 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-15-11-30-20-2e255f122f2cc56180ecf01cc7d98fd1-5df43.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 503px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 41.5506958250497%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAABLElEQVQY05VRR27EMAz0/z+318W6xyq25CKrd0deZIEAOWVAELzMDIespml6PB5t2wruvqaEcDpZQEgvq8Q7Ahv4WqfSD86vN/J1pXyldA9VjNFa3492HAMlEQINkZl3OlJATkoogRhCBLedKWWlNEIYCMKM036E6hZLaRjDMOaVRgDUMCp44Hp+DWRkp3DWWWtOprvG9n0g1BVKcS5VhZCEiE3rJxAZi2Qx82JXvqEDz2yR2sQbQUpXDDFOB/PXB5UxnpJESDYmXf9EISets/ORK3Xqs5TzXorIheNaMMWE5sY4fkal4vtev8iCx+O4N9+52OTG7ZlSPnbPeVRe7XKTVpZojGWp/jj/PCDfkkrK+lXPJbQ1fdc8n08IUFO3bddvGx2GTr4F8sf+G9SJyPCpbeFTAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 15 11 30 20" title="" data-src="/static/2021-12-15-11-30-20-2e255f122f2cc56180ecf01cc7d98fd1-5df43.png" data-srcset="/static/2021-12-15-11-30-20-2e255f122f2cc56180ecf01cc7d98fd1-ac36e.png 200w,\n/static/2021-12-15-11-30-20-2e255f122f2cc56180ecf01cc7d98fd1-3a669.png 400w,\n/static/2021-12-15-11-30-20-2e255f122f2cc56180ecf01cc7d98fd1-5df43.png 503w" data-sizes="(max-width: 503px) 100vw, 503px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n<li>\n<p>等宽字体与图形呈现案例一则</p>\n<p>假设某工具有这么一个功能：通过下拉选择，可以改变元素的边框样式，也就是 borderStyle 在 solid/dashed/dotted 间切换。</p>\n<p>大家都知道，原生的 <code class="language-text">&lt;select&gt;</code> 的 <code class="language-text">&lt;option&gt;</code> 元素的 innerHTML 只能是纯 text 字符，不能有 html，也不支持伪元素，因此，要模拟 solid、dashed 和 dotted，只能使用字符，而字符有长有短，可以模拟成像样的规整的图形吗？</p>\n<p>可以的，试试使用等宽字体。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/g72o6b?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n</li>\n<li>\n<p>ch 单位与等宽字体布局</p>\n<p>ch 和 em、rem、ex 一样，是 CSS 中和字符相关的相对单位。和 ch 相关的字符是 0，没错，就是阿拉伯数字 0。1ch 表示一个 0 字符的宽度，所以 6 个 0 所占据的宽度就是 6ch。</p>\n<p>由于 ch 是个 CSS3 单位，且 IE9 浏览器的宽度和其他浏览器明显不一样，因此此处不展开，但可以提一提一些不错的应用场景。例如，有些输入框是输入手机号的，在中国，手机号是 11 位，因此我们可以设置该输入框宽度为 11ch，同时让字体等宽，则用户一眼就能看出自己是否少输入或者多输入了 1 位数字。又如，我们想实现一个屏幕上代码一个一个出现的动效，如果代码是等宽字体，此时使用 ch 单位来控制宽度，配合 overflow 属性和 CSS animation 就能在完全不使用 JavaScript 的情况下将此效果模拟出来。当然，还有其他一些应用场景，不一一说明。</p>\n</li>\n</ol>\n<h2 id="中文字体和英文名称"><a href="#%E4%B8%AD%E6%96%87%E5%AD%97%E4%BD%93%E5%92%8C%E8%8B%B1%E6%96%87%E5%90%8D%E7%A7%B0" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>中文字体和英文名称</h2>\n<p>使用中文字体，就必须要知道其对应的英文名称，下面是一些常见中文字体对应的 font-family 英文属性名称。</p>\n<ol>\n<li>Windows 常见内置中文字体和对应英文名称见图 8-10</li>\n<li>OS X 系统内置中文字体和对应英文名称见图 8-11</li>\n<li>Office 软件安装新增中文字体和对应英文名称见图 8-12</li>\n<li>其他一些中文字体和对应英文名称见图 8-13</li>\n</ol>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-15-13-39-01-82d0a90f746c275e5e4a267ccdec2e89-27a33.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 352px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 152.27272727272728%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAeCAIAAACjcKk8AAAACXBIWXMAAA7DAAAOwwHHb6hkAAADBklEQVQ4y41ViXKiQBDl//9od2t3o6lNjMYLPBDlBgFFQeWcAbMPiBExqcqrcQqn53X3dL8BJopjjJRQQrM4SesjjOKEEEwYSUoaViwxp9Op8/Ty++ffbncwHrLPT113fyBZHoTha2/468efh9+tQZ/999jZ7P2UZhGYcFT6YsI43u08XTNte7PZuGvTPpzChFBs2u99TTMMY+04rqGbxyDC+juzIhNK325xvuCr9QpZljFxHLMsO51OG7spSTVVm8/mmq6jHG93KMiEkDAMgyBoOM7zHOue55+OR+w736Eg00va9+avEq6lHYWd585sxue3aadpYtu2ICyd7fbtMxTkJIlFUTLNdSMaMnK3m+Xyg3wuf+fmmev+chy2HPfVbuyhGUXkRNP09XptWZa5trIsvzimrrvz/QPagZp5nnc4HHzPRxWvkaMwaLdbvd5rq/XQaj8m6Xv9IL9ZgbksyyzHyooirlbD4UjR9CuZflskdwWjxZkLjZMUQLdxBT4aDRNcV12BHc9oPgyg4aFqVdR5eh6zY9S82+2NRmNQ4BhdmE2ni4WgqSqSX61WgiDwiwVOMuEm7m6PDMvIAKYyThWqUlhhItWUIg5M2BYEIZayKnL9zF8p7N30dq76XD1nFCKJY47lJFn52FzRguC0EmXcijAKG/K4EYnv+6cgQJ4NG3qLEt63o0amV4XlNTQuRn4HOGWiKOJ5XipRD05IYllru0QYRZ9HBhkawg7TNOtkSsl2uzFKQKTfSPtyKxpp35zosqdIGwU7Ho5Ao2Cw4Q5AKpihgHu1FpEhEMMwDeTceBkkia7phcI0VZYVvCs/unhDrtKplEyuoFVJCxmX64WVXoEVpu7vO5epDua194JWiaI4m89olpu62h8MhOWCX/Cqqm5sGy0csyzHcStJXi2FdvthISwlUbEchzEMzcGnwnEc28aXyXW3kijyfHGNFFl2nI2NdluWqiqSJKNt4O/23h7wPKauZ01VRuPRYNCfcIg1FRY8N5lOJhNFlsDpD4b4Wz/mf7mbuPaXmxUHAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 15 13 39 01" title="" data-src="/static/2021-12-15-13-39-01-82d0a90f746c275e5e4a267ccdec2e89-27a33.png" data-srcset="/static/2021-12-15-13-39-01-82d0a90f746c275e5e4a267ccdec2e89-a9510.png 200w,\n/static/2021-12-15-13-39-01-82d0a90f746c275e5e4a267ccdec2e89-27a33.png 352w" data-sizes="(max-width: 352px) 100vw, 352px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-15-13-39-14-e964d4aa205be3bb736a3ec31baa91ee-2a196.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 762px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 90.15748031496064%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAAAsSAAALEgHS3X78AAACQElEQVQ4y0WTiXajMAxF+f8f6wfM2pmmlECGzTbYZgsEOtcWbXVyHC960tOTSLLs+vP7779/Lsr0WZb/+PYrTa+m65tW970tbrfn5+fXy2Ucx7Ztizwvy/IfVpZKqaQsK62Ms37bd2sd10rp9fG4r6u11hhT1zWw4/39vtw7Y8ZhsH0/DKP3PuFtnuf3aN65pmnatlnXdX88nHNtq/I8J8RxHLg10bQxOA/DkHBIX1OycXbOdn0vgbZt895ppUO2aQK8LDPhvPOEDmAyG635URJnVsgcxy5gYmdvwbiUVFAgAYHOzJw7003jFGh7wg3xCXCgzRvCUDw30zh2HcwoeIhgn0DMGH2eIeqc0H7EmiMt42LmZQ60acE0zTGTD5mts6IZtHm+3+8C5rmsyltxg4XwVFp9qesjbZyWZREwrKR+ycwrN/IKzPYhzbHvJzj2RgltvDmQjQ2qsFIwDvQ/1DxNSmsu9xPsk6oq0VNahx6AcdqiIcGVkapK6Y21fVVV9gMc1KYZT09PDClnxi4vis8+B8GUYmUfBFuWcRih/ZXZdB1/4zjEmget9TQvZ83eh5q7bl03UUTatu/HWTNnRneQMYitksCiNjyZ33UT8ERoAskgBDBIPEQwvKUTqBXH08tX8YitGuOEHdFO2kHtjxnicymKQuSJ4+lfXl4ul9fP4W2aWkb1BKMwMwiY5Owhxi17F62OJiPJyiueUzQ2CRykSK1VcSugXVd1lmV892maRtr19XrlhuqK4oZGogjA/6n9AH2sBjRgAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 15 13 39 14" title="" data-src="/static/2021-12-15-13-39-14-e964d4aa205be3bb736a3ec31baa91ee-2a196.png" data-srcset="/static/2021-12-15-13-39-14-e964d4aa205be3bb736a3ec31baa91ee-ac3c7.png 200w,\n/static/2021-12-15-13-39-14-e964d4aa205be3bb736a3ec31baa91ee-daea7.png 400w,\n/static/2021-12-15-13-39-14-e964d4aa205be3bb736a3ec31baa91ee-2a196.png 762w" data-sizes="(max-width: 762px) 100vw, 762px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-15-13-39-37-4fbc123eacb7a79030b0f8761b26bc35-dbf5d.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 789px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 83.7769328263625%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAIAAABSJhvpAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABUklEQVQ4y5WTyXKDMBBE/f9faaiUY5DQvm+4QU4qFS6WODBIeprpUXPTxt7vs5BqJXSev5SxPsTW2v7BuMUYrbVtb855Z137GR/BIQTwiBCUUsZgkJzxUqpzDjymBuCcs9a61hOOse0jmVNKSqlSCySneLSq4vk8c/AeCX0I77L3Ec29bO89SogxjTVMCFlOWEoRYxiAjTHTNOVSBM5QElNXzf3zeugNDgGccuaCS9nhkW4jOe4ZZkHD6jn+wkrpdSVwMaXs+SQ+phAT9r81o08AQKLz1/IopTA/DE8IfTy+Ic5Yh/3vq0Lm3m1IuMJaK845ArjIWqOkPP6FcwPgwyS1lNDv+eJtmOfXglobYw3SwEqn5pyEgLeLNX22/dMMC3HOsIocjHEpRK/0gHHexhiEzdNECNnotiwLoRQxeon7U1qxjaFyhtdGl2U91ghxPrwA9lblrIeGmsAAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 15 13 39 37" title="" data-src="/static/2021-12-15-13-39-37-4fbc123eacb7a79030b0f8761b26bc35-dbf5d.png" data-srcset="/static/2021-12-15-13-39-37-4fbc123eacb7a79030b0f8761b26bc35-604dc.png 200w,\n/static/2021-12-15-13-39-37-4fbc123eacb7a79030b0f8761b26bc35-70418.png 400w,\n/static/2021-12-15-13-39-37-4fbc123eacb7a79030b0f8761b26bc35-dbf5d.png 789w" data-sizes="(max-width: 789px) 100vw, 789px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h2 id="一些补充说明"><a href="#%E4%B8%80%E4%BA%9B%E8%A1%A5%E5%85%85%E8%AF%B4%E6%98%8E" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>一些补充说明</h2>\n<p>微软正黑体是一款全面支持 ClearType 技术的 TrueType 无衬线字体，用于繁体中文系统。相对应地，中国大陆地区用的是微软雅黑。但由于中国大陆和中国港、澳、台地区在各自的文字规范中对汉字的写法规定有很多细节上的不同，所以这两套字形在正式场合是不能混淆使用的。</p>\n<p>我们平常所说的“宋体”，指的都是“中易宋体”，英文名称 SimSun，“黑体”类似的是“中易黑体”。在 OS X 常见内置中文字体中我罗列了一个“宋体-简”，需要注意的是，这个“宋体- 简”和我们平常所说的“宋体”并不是同一个字体，其英文名称是“Songti SC”，字形表现也有差异。</p>\n<p>OS X 也就是苹果操作系统的字体名称中经常会出现“SC”，这个“SC”指的是“简体” （simplified chinese）的意思，相对应的还有“TC”，指的是“繁体”（traditional chinese）的意思。</p>\n<h1 id="字体家族其他成员"><a href="#%E5%AD%97%E4%BD%93%E5%AE%B6%E6%97%8F%E5%85%B6%E4%BB%96%E6%88%90%E5%91%98" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>字体家族其他成员</h1>\n<h2 id="貌似粗犷、实则精细无比的-font-weight"><a href="#%E8%B2%8C%E4%BC%BC%E7%B2%97%E7%8A%B7%E3%80%81%E5%AE%9E%E5%88%99%E7%B2%BE%E7%BB%86%E6%97%A0%E6%AF%94%E7%9A%84-font-weight" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>貌似粗犷、实则精细无比的 font-weight</h2>\n<p>font-weight 都支持哪些属性值。具体如下</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="70502268212505936000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 平常用的最多的 */\nfont-weight: normal;\nfont-weight: bold;\n/* 相对于父级元素 */\nfont-weight: lighter;\nfont-weight: bolder;\n/* 字重的精细控制 */\nfont-weight: 100;\nfont-weight: 200;\nfont-weight: 300;\nfont-weight: 400;\nfont-weight: 500;\nfont-weight: 600;\nfont-weight: 700;\nfont-weight: 800;\nfont-weight: 900;`, `70502268212505936000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 平常用的最多的 */</span>\n<span class="token property">font-weight</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>\n<span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>\n<span class="token comment">/* 相对于父级元素 */</span>\n<span class="token property">font-weight</span><span class="token punctuation">:</span> lighter<span class="token punctuation">;</span>\n<span class="token property">font-weight</span><span class="token punctuation">:</span> bolder<span class="token punctuation">;</span>\n<span class="token comment">/* 字重的精细控制 */</span>\n<span class="token property">font-weight</span><span class="token punctuation">:</span> 100<span class="token punctuation">;</span>\n<span class="token property">font-weight</span><span class="token punctuation">:</span> 200<span class="token punctuation">;</span>\n<span class="token property">font-weight</span><span class="token punctuation">:</span> 300<span class="token punctuation">;</span>\n<span class="token property">font-weight</span><span class="token punctuation">:</span> 400<span class="token punctuation">;</span>\n<span class="token property">font-weight</span><span class="token punctuation">:</span> 500<span class="token punctuation">;</span>\n<span class="token property">font-weight</span><span class="token punctuation">:</span> 600<span class="token punctuation">;</span>\n<span class="token property">font-weight</span><span class="token punctuation">:</span> 700<span class="token punctuation">;</span>\n<span class="token property">font-weight</span><span class="token punctuation">:</span> 800<span class="token punctuation">;</span>\n<span class="token property">font-weight</span><span class="token punctuation">:</span> 900<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>如果使用数值作为 font-weight 属性值，必须是 100 ～ 900 的整百数。这里的数值关键字和字母关键字之间是有对应关系的，例如，font-weight:400 实际上等同于 font-weight: normal，font-weight:700 等同于 font-weight:bold。</p>\n<p>因此 400 和 700 是文字粗细与否的重要临界点，加上最小的 100 和最大的 900，就构成了 font-weight 完整的字重临界点。知道这个有什么意义呢？意义就在于 lighter 和 bolder 这两个具有相对特定的关键字就是基于这 4 个临界点进行解析和渲染的。</p>\n<p>以下是 lighter 和 bolder 解析规则表</p>\n<table>\n<thead>\n<tr>\n<th align="center">继承的值</th>\n<th align="center">bolder</th>\n<th align="center">lighter</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align="center">100</td>\n<td align="center">400</td>\n<td align="center">100</td>\n</tr>\n<tr>\n<td align="center">200</td>\n<td align="center">400</td>\n<td align="center">100</td>\n</tr>\n<tr>\n<td align="center">300</td>\n<td align="center">400</td>\n<td align="center">100</td>\n</tr>\n<tr>\n<td align="center">400</td>\n<td align="center">700</td>\n<td align="center">100</td>\n</tr>\n<tr>\n<td align="center">500</td>\n<td align="center">700</td>\n<td align="center">100</td>\n</tr>\n<tr>\n<td align="center">600</td>\n<td align="center">900</td>\n<td align="center">400</td>\n</tr>\n<tr>\n<td align="center">700</td>\n<td align="center">900</td>\n<td align="center">400</td>\n</tr>\n<tr>\n<td align="center">800</td>\n<td align="center">900</td>\n<td align="center">700</td>\n</tr>\n<tr>\n<td align="center">900</td>\n<td align="center">900</td>\n<td align="center">700</td>\n</tr>\n</tbody>\n</table>\n<p>然而很多人发现 font-weight 无论是设置 300、400、500 还是 600，文字的粗细都没有任何变化，只有到 700 的时候才会加粗一下，感觉浏览器好像不支持这些数值，那么搞这么多档位不就是多余的吗？</p>\n<p>实际上，所有这些数值关键字浏览器都是支持的，之所以没有看到任何粗细的变化，是因为我们的系统里面缺乏对应粗细的字体。尤其我们做桌面端项目时，大部分用户都是使用 Windows 系统，而 Windows 系统中的中文字体粗细就一个型号，如“宋体”，或者说“微软雅黑”，因此，最终的效果就是 CSS 层面的“加粗”和“正常尺寸” 两种表现。</p>\n<p>假如我们的操作系统安装了该字体家族全部的字重字体，则设置 300、400、500 时，彼此之间就能看出明显的变化了。例如，OS X 系统中的“苹方”，又如我这里即将要演示的“思源黑体”。“思源黑体”是一款免费的开源字体，我自己电脑上的版本有 7 个字重，如图 8-14 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-19-22-39-31-23bd8a6cede3dd198c7fdd0bbb1c9249-db488.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 292px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 88.35616438356165%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACwklEQVQ4y5VT2XbaMBTk/7+pUILjGGIw4H2VvNuSbQJhS8OWEdCXvlUHOMjS3Lkzd9wzTNfzPEWWtZmmqu+Dfl8aSaORpLwp4/F49PIykobD38PXV/lNeZtpGucc94/H4+126xGaHA6Hqix403RdV1dVVZRFUbCasbouyxJHZYGn2NWHO6ZpGkAE2PXpx8fa91xCKCXE1HXLNG3Ldh03DEPTMgPfcVwHDx3Lmc+mEaG/BoPtdivANE62ux2rq6btOON1VYIcfJyJVdV1w3lV1WDLs4wSulp9hGH0aKHneFHXrWwTDGEQBMv5XF8s8bFMC+S6oVuGoS+XlmUTQpbLxel8WnXds20ap7vdHuVXKzzsQCrEMcZZ07VdzcDJob+E7rpu2wYYnD8N8wICzZ7jRGEURaEQbAjNnuP6vm/ZNo1CbTrzPc+yHbgHDPvrXI/EKdRnacphd9OkcZKnaRzH0FnkBerFNPLDKAwJjOjaNqZAZH++vgTYD+jm8zOJaZKkMaXQjQ+JSBSEaZphpWmKR7btCFSSRISkWf71AAchDFwBkGV5kiboP/B81/VgLGgdsXWDIEKVAFPFMKOwqvnxeDcMbR4ORy6MwbBaEZJSRINVDC6KacFCxtfrdVVUDW82mzXjzdOwxdJG1dm7quvGYrGQJUkRQRyrExWBVRSEVBlJkjySVVU1Let9qgaB/wTzpkX5okAEMqSyKiv4BOoiz/Fb30MC3cgfTvO8wOW2bc/nswBfr9fb/6/L5QJ8z7ZtwzAQ4+l0+v39jZxgTrIsjxWl3+8Ph0NN0waDQZ7nIER3OEXUgEJTPXzFO8QYjk+nE6puNhsx3jh2XRcvIC7g/+W+IBWh2O/3GBAS2nu08Wget9EFCkMtCLHFqGA/pXQymQD8T/NC86MqNkmSAIlUgA1gvCfAoy/Ums/nD5MeNNf7+gFMpcUwIPT+OgAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 19 22 39 31" title="" data-src="/static/2021-12-19-22-39-31-23bd8a6cede3dd198c7fdd0bbb1c9249-db488.png" data-srcset="/static/2021-12-19-22-39-31-23bd8a6cede3dd198c7fdd0bbb1c9249-b8b66.png 200w,\n/static/2021-12-19-22-39-31-23bd8a6cede3dd198c7fdd0bbb1c9249-db488.png 292w" data-sizes="(max-width: 292px) 100vw, 292px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>此时，应用如下 HTML 和 CSS 代码：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="15863061860974991000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<p class=&quot;f100&quot;>轻如鸿毛，重如泰山</p>\n<p class=&quot;f200&quot;>轻如鸿毛，重如泰山</p>\n<p class=&quot;f300&quot;>轻如鸿毛，重如泰山</p>\n<p class=&quot;f400&quot;>轻如鸿毛，重如泰山</p>\n<p class=&quot;f500&quot;>轻如鸿毛，重如泰山</p>\n<p class=&quot;f600&quot;>轻如鸿毛，重如泰山</p>\n<p class=&quot;f700&quot;>轻如鸿毛，重如泰山</p>\n<p class=&quot;f800&quot;>轻如鸿毛，重如泰山</p>\n<p class=&quot;f900&quot;>轻如鸿毛，重如泰山</p>\n<style>\n   p {\n      font-family: \'Source Han Sans CN\';\n   }\n   .f100 {\n      font-weight: 100;\n   }\n   .f200 {\n      font-weight: 200;\n   }\n   .f300 {\n      font-weight: 300;\n   }\n   .f400 {\n      font-weight: 400;\n   }\n   .f500 {\n      font-weight: 500;\n   }\n   .f600 {\n      font-weight: 600;\n   }\n   .f700 {\n      font-weight: 700;\n   }\n   .f800 {\n      font-weight: 800;\n   }\n   .f900 {\n      font-weight: 900;\n   }\n</style>`, `15863061860974991000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>f100<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>轻如鸿毛，重如泰山<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>f200<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>轻如鸿毛，重如泰山<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>f300<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>轻如鸿毛，重如泰山<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>f400<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>轻如鸿毛，重如泰山<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>f500<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>轻如鸿毛，重如泰山<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>f600<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>轻如鸿毛，重如泰山<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>f700<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>轻如鸿毛，重如泰山<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>f800<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>轻如鸿毛，重如泰山<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>f900<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>轻如鸿毛，重如泰山<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n   <span class="token selector">p</span> <span class="token punctuation">{</span>\n      <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">\'Source Han Sans CN\'</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n   <span class="token selector">.f100</span> <span class="token punctuation">{</span>\n      <span class="token property">font-weight</span><span class="token punctuation">:</span> 100<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n   <span class="token selector">.f200</span> <span class="token punctuation">{</span>\n      <span class="token property">font-weight</span><span class="token punctuation">:</span> 200<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n   <span class="token selector">.f300</span> <span class="token punctuation">{</span>\n      <span class="token property">font-weight</span><span class="token punctuation">:</span> 300<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n   <span class="token selector">.f400</span> <span class="token punctuation">{</span>\n      <span class="token property">font-weight</span><span class="token punctuation">:</span> 400<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n   <span class="token selector">.f500</span> <span class="token punctuation">{</span>\n      <span class="token property">font-weight</span><span class="token punctuation">:</span> 500<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n   <span class="token selector">.f600</span> <span class="token punctuation">{</span>\n      <span class="token property">font-weight</span><span class="token punctuation">:</span> 600<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n   <span class="token selector">.f700</span> <span class="token punctuation">{</span>\n      <span class="token property">font-weight</span><span class="token punctuation">:</span> 700<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n   <span class="token selector">.f800</span> <span class="token punctuation">{</span>\n      <span class="token property">font-weight</span><span class="token punctuation">:</span> 800<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n   <span class="token selector">.f900</span> <span class="token punctuation">{</span>\n      <span class="token property">font-weight</span><span class="token punctuation">:</span> 900<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>结果可以看到明显的字重变化，而不是单纯的加粗和正常两种形态，如图 8-15 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-19-22-41-24-9a79d11ff8cfbf8877a2be9071bc9aeb-a4730.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 357px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 96.63865546218487%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAIAAAAf7rriAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAC70lEQVQ4y52TWVPaUBTH/bzt9As4dayj41SppVi1GkAFJKGalMWtoh21ZZPVkAVISAhZIBsEiPjgONpb2/Ghk770PNy585/zu/9zztwz8fj4+PDwAM7hcHh9XSEpCidJ/LpM01RHVRVZzheuCIrECaLeaNB1xh7Zz8jE863f79WZmihJvCgqsqSq6uhmfHs7JmiqLUlMk5MVpckLA2v4D7hRawkCw/Ntge90FMCOxzdVqtrkuDrDipJYZ5vOsNXvUxTJclyT54UW1xJa9vj2xh4VSyWggJpFUWoJ7cHA0dk0c5k06LlKETRNEBRh9KzR0Lq4OCcpulAqkDWqhOO9vuUAm4Z+dnqau8qlUplMOp3NZM3+0OqZiXg8m7s6PUnm88VSsdzr9Zxg0zhNJlNpENlCPp9JZVTN7Bk6uoumM9nL8/NKpZLL5JxhQ9cRGN7FUDSR+HZ2FovGuJZo6t1NyIfGEjswfHx0mECjmqo5w+je3sHR0cHx8UkyebB/oKia1pGh9Y3Dr0kEgU++nlx+/2GYpgOs69ra2mowtAN/jmAYFggEaywvCdz83FxkD11e9sBhBI3Gu5ruBGuqz+cNhkIhBI7HE+FQWBAVqcXNTE+HYMSz/AGBf8GqZjhPO7C9DcMRLBbd308gSIQDdJt/53LtYTG/F/qCYfuHR5ruBOuqOjM15fZ4IMgXCu0sLrwt4wTXoF+9fOHbCszPzq5+WvMHtlTHgXU7intpCbS6tR0Mh2EIggRRFnn2zfQ0HNldWnRtbm3uRjFnZ9MwlhYXP66sQF4/aNztfn9+maqWi68nJzd8ftfCwvrGunfTr/01sP+OiWw222g0BEHgeX48Htu2TZJUoVAolUrgSxWLRZZlb2ybYVlFUWq1Gk3TnU4HIOA+ASTDMMCnsyzr7u7uaTf7QJRlGYhgq4F+f3/f7XZ1XZckCdgMnsI0zT9la5oGngAnSAUYyAMltNvt0WgErBiGAW44jlNg56pVUNRv6idORdA9NIpEGwAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 19 22 41 24" title="" data-src="/static/2021-12-19-22-41-24-9a79d11ff8cfbf8877a2be9071bc9aeb-a4730.png" data-srcset="/static/2021-12-19-22-41-24-9a79d11ff8cfbf8877a2be9071bc9aeb-11629.png 200w,\n/static/2021-12-19-22-41-24-9a79d11ff8cfbf8877a2be9071bc9aeb-a4730.png 357w" data-sizes="(max-width: 357px) 100vw, 357px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>也就是说，font-weight 要想真正发挥潜力，问题不在于 CSS 的支持，而在于是否存在对应的字体文件。如果没有对应的字体文件，我又想有多档字重效果，该怎么办呢？可以试试看看之后的 font-face 章节</p>\n<h2 id="具有近似姐妹花属性值的-font-style"><a href="#%E5%85%B7%E6%9C%89%E8%BF%91%E4%BC%BC%E5%A7%90%E5%A6%B9%E8%8A%B1%E5%B1%9E%E6%80%A7%E5%80%BC%E7%9A%84-font-style" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>具有近似姐妹花属性值的 font-style</h2>\n<p>font-style 表示文字造型是斜还是正，与 font-weight 相比，其属性值就要少很多，如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="10499965035626535000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`font-style: normal;\nfont-style: italic;\nfont-style: oblique;`, `10499965035626535000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">font-style</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>\n<span class="token property">font-style</span><span class="token punctuation">:</span> italic<span class="token punctuation">;</span>\n<span class="token property">font-style</span><span class="token punctuation">:</span> oblique<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>italic 和 oblique 这两个关键字都表示“斜体”的意思，差别在于：italic 是使用当前字体的斜体字体，而 oblique 只是单纯地让文字倾斜。如果当前字体没有对应的斜体字体，则退而求其次，解析为 oblique，也就是单纯形状倾斜。</p>\n<p>我们平常在 Web 上使用比较多的中文字体，如“宋体”“微软雅黑”等，是没有专门的倾斜字体的，因此，从最终表现上来看 font-style:italic 和 font-style:oblique 是没有区别的。但是，对于一些英文字体，如“Georgia”，情况就不一样了，因为“Georgia”有一个专门设计的斜体字体文件。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="635578234541012100"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<p class=&quot;i&quot;>Georgia italic</p>\n<p class=&quot;o&quot;>Georgia oblique</p>\n<p>Georgia normal</p>\n<style>\n   p {\n      font-size: 50px;\n      font-family: Georgia;\n   }\n   .i {\n      font-style: italic;\n   }\n   .o {\n      font-style: oblique;\n   }\n</style>`, `635578234541012100`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>i<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Georgia italic<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>o<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Georgia oblique<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>Georgia normal<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n   <span class="token selector">p</span> <span class="token punctuation">{</span>\n      <span class="token property">font-size</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>\n      <span class="token property">font-family</span><span class="token punctuation">:</span> Georgia<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n   <span class="token selector">.i</span> <span class="token punctuation">{</span>\n      <span class="token property">font-style</span><span class="token punctuation">:</span> italic<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n   <span class="token selector">.o</span> <span class="token punctuation">{</span>\n      <span class="token property">font-style</span><span class="token punctuation">:</span> oblique<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>结果可以看出，两个“倾斜”有着明显的不同，例如非常明显的字母 g，属性值为 italic 时长得像鱼钩，而为 oblique 时长得像糖葫芦，如图 8-16 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-19-22-47-44-0e5f1d6d55a8367f8b53fe55881d7cb1-ff6e4.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 479px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 56.57620041753654%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABsUlEQVQozz2SSdPBUBBF3///D5SFIXwxBWXBhoWFIlXGGBMUMU8RM8WRVH1voTrdr2+f2494v9+VSqVarU4mk+VyOZ1OCebzeafTmc1m6/W62Wz2ej2CfD5PsFgsLMvabDaXy0Wcz+d0Ok1BkqRMJhMMBrPZrCzLkUiEzGg0CofDf86RnDMejz+fz/V6pVE8n08mMIqxyJ9OJxpUVSUmzyV+t9utSwHX/X6n+Xa7/Zpfrxdtuq6vVitStm3zCRhyCFFFvdFodLvder0O6n6/5w7wVAUyqVSqWCyClEgksBCPx8FOJpPk6YnFYoFAABf8KopCiQBrSPwmm6aJEqMAYxOtVqtUKgHP5hhlOse9UCgU8EyeazgSj8ej3W5TdgmxBM/hcDgej0BRJcOLuBuiREy13+9TEtiDEIxQKASzz+eDDbBoNJrL5Wq1msfjgd/r9WLH7/fjjipPyySBEiQoDYdDeIjL5TJauGWLGOFtDcPABavmDu8PKRYgEpBgHSow3OD/wLnb7UjCCSCfeCFmEZZzxGAwYALCqPCeDOQvpWkaN1gSnwyEi+E8ErukigpdlL6bhTe18QjkZgAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 19 22 47 44" title="" data-src="/static/2021-12-19-22-47-44-0e5f1d6d55a8367f8b53fe55881d7cb1-ff6e4.png" data-srcset="/static/2021-12-19-22-47-44-0e5f1d6d55a8367f8b53fe55881d7cb1-d5807.png 200w,\n/static/2021-12-19-22-47-44-0e5f1d6d55a8367f8b53fe55881d7cb1-dba8d.png 400w,\n/static/2021-12-19-22-47-44-0e5f1d6d55a8367f8b53fe55881d7cb1-ff6e4.png 479w" data-sizes="(max-width: 479px) 100vw, 479px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>之所以会专门为一个字体设计倾斜字体，就是因为单纯倾斜的时候不好看，比方说上面的 “Georgia” 字体，当字号比较小同时文字倾斜的时候，字符会挤作一团，疏密不规则，可读性比较糟糕。相比之下，专门设计的“Georgia”斜体阅读体验就要好很多。再加上没有斜体字体时 italic 表现会和 oblique 一致，因此，我们在实际开发的时候，几乎没有任何理由需要使用 font-style: oblique。</p>\n<h2 id="不适合国情的-font-variant"><a href="#%E4%B8%8D%E9%80%82%E5%90%88%E5%9B%BD%E6%83%85%E7%9A%84-font-variant" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>不适合国情的 font-variant</h2>\n<p>font-variant 是一个从 IE6 时代就过来的 CSS 属性，实现小体型大写字母，两个属性值要么 normal，要么 small-caps，font-variant: small-caps 就是可以让英文字符表现为小体型大写字母。</p>\n<p>代码示意如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="63089707811594265000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`http://www.<span style=&quot;font-variant:small-caps&quot;>css-world.com</span>/`, `63089707811594265000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html">http://www.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">font-variant</span><span class="token punctuation">:</span>small-caps</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>css-world.com<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>/</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-19-22-51-50-f3904a07d8406945f66f7f7a2917a761-fb41b.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 334px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 8.982035928143713%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAIAAADXZGvcAAAACXBIWXMAAAsSAAALEgHS3X78AAAAfUlEQVQI1w3IUQqCQBAAUO9/EukAkhmFGG4alta2o4KzA21qI62LXSDf5/PaBuRTzdY654hIa0IixI6ZnZvX+Vo7mH6FGgfmzzQtv8WY18jsJadk4/v3qnr3I2GX55fiWmTnTEEt5SPcRRJqUOpWlkG4DfZRLFKARoj0GB/+3cJlS8I4QOAAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 19 22 51 50" title="" data-src="/static/2021-12-19-22-51-50-f3904a07d8406945f66f7f7a2917a761-fb41b.png" data-srcset="/static/2021-12-19-22-51-50-f3904a07d8406945f66f7f7a2917a761-7193b.png 200w,\n/static/2021-12-19-22-51-50-f3904a07d8406945f66f7f7a2917a761-fb41b.png 334w" data-sizes="(max-width: 334px) 100vw, 334px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>也就是大小跟小写字母一样，但样式是大写。</p>\n<h1 id="font-属性"><a href="#font-%E5%B1%9E%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>font 属性</h1>\n<h2 id="作为缩写的-font-属性"><a href="#%E4%BD%9C%E4%B8%BA%E7%BC%A9%E5%86%99%E7%9A%84-font-%E5%B1%9E%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>作为缩写的 font 属性</h2>\n<p>如果在一段 CSS 代码中发现了 font 属性，八九不离十就是利用 font 属性进行文本相关样式的缩写。可以缩写在 font 属性中的属性非常多，包括 font-style、font-variant、 font-weight、font-size、line-height、font-family 等。完整语法为：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="74577315177309440000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`font: [ [ font-style || font-variant || font-weight ]? font-size [ / line-height ]? font-family ];`, `74577315177309440000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">font</span><span class="token punctuation">:</span> [ [ font-style || font-variant || font-weight ]? font-size [ / line-height ]? font-family ]<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>|| 表示或，? 和正则表达式中的 ? 的含义一致，表示 0 个或 1 个。仔细观察上面的语法，会发现 font-size 和 font-family 后面没有问号，也就是说是必需的，是不可以省略的。这和 background 属性不一样，background 属性虽然也支持缩写，但是并没有需要两个属性值同时存在的限制。</p>\n<p>因此，如果你的 font 属性缩写无效，检查一下 font-size 和 font-family 这两个属性是否同时存在。例如，下面 CSS 语句看上去写了很多属性，实际却是无效的，因为缺字体：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="86490520792000800000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.font {\n   font: normal 700 14px/20px;\n}`, `86490520792000800000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.font</span> <span class="token punctuation">{</span>\n   <span class="token property">font</span><span class="token punctuation">:</span> normal 700 14px/20px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>而下面这个反而是有效的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="60197514743523860000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.font {\n   font: 14px \'☺\';\n}`, `60197514743523860000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.font</span> <span class="token punctuation">{</span>\n   <span class="token property">font</span><span class="token punctuation">:</span> 14px <span class="token string">\'☺\'</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>需要注意的是，font 缩写会破坏部分属性的继承性。举个简单的例子，假设你的页面行高是 20px，当你使用了下面的 CSS 后：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="44138143522460970000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.font {\n   font: 400 30px \'Microsoft Yahei\';\n}`, `44138143522460970000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.font</span> <span class="token punctuation">{</span>\n   <span class="token property">font</span><span class="token punctuation">:</span> 400 30px <span class="token string">\'Microsoft Yahei\'</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>.font 元素的行高 line-height 属性值就被重置为了 normal，而不同浏览器上 line-height: normal 是不一样的，因此，在使用 font 缩写的时候，如果不设定行高值，一定会出现不兼容的问题。换句话说，如果你的 CSS 代码原本就没有 line-height 属性，使用 font 缩写反而是不推荐的。</p>\n<p>另外，还有一个令人很头疼的问题，就是 font 缩写必须要带上 font-family，然而，原本真实继承的 font-family 属性值可能会很长，每次 font 缩写后面都挂一个长长的字体列表，有什么小技巧可以避免吗？</p>\n<p>这里有两个方法。</p>\n<ol>\n<li>\n<p>我们可以随便找一个系统根本不存在的字体名占位，如字母 a，或者特殊一点，用笑脸表情 ☺，然后再设置 font-family: inherit 来重置这个占位字体。例如，我们想把字号和行高合并缩写，就可以这样：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="19128258703048840000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.font {\n  font: 30px/30px \'☺\';\n  font-family: inherit;\n}`, `19128258703048840000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.font</span> <span class="token punctuation">{</span>\n  <span class="token property">font</span><span class="token punctuation">:</span> 30px/30px <span class="token string">\'☺\'</span><span class="token punctuation">;</span>\n  <span class="token property">font-family</span><span class="token punctuation">:</span> inherit<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>是不是有点拆东墙补西墙的感觉？这么做主要是因为 font 缩写不能使用 inherit 等全局关键字。</p>\n</li>\n<li>\n<p>利用 @font-face 规则将我们的字体列表重定义为一个字体，这是兼容性很好、效益很高的一种解决方法，会在之后详细介绍</p>\n</li>\n</ol>\n<h2 id="使用关键字值的-font-属性"><a href="#%E4%BD%BF%E7%94%A8%E5%85%B3%E9%94%AE%E5%AD%97%E5%80%BC%E7%9A%84-font-%E5%B1%9E%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>使用关键字值的 font 属性</h2>\n<p>font 属性除了缩写用法，还支持关键字属性值，这个怕是很多人都不知道的。其语法如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="81348124759287170000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`font: caption | icon | menu | message-box | small-caption | status-bar;`, `81348124759287170000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">font</span><span class="token punctuation">:</span> caption | icon | menu | message-box | small-caption | status-bar<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>如果将 font 属性设置为上面的一个值，就等同于设置 font 为操作系统该部件对应的 font，也就是说直接使用系统字体。</p>\n<p>根据 W3C 官方维基的解释，以及我自己在 Windows 系统下的测试，各个关键字的含义如下。</p>\n<ul>\n<li>caption：活动窗口标题栏使用的字体。</li>\n<li>icon：包含图标内容所使用的字体，如所有文件夹名称、文件名称、磁盘名称，甚至浏览器窗口标题所使用的字体。</li>\n<li>menu：菜单使用的字体，如文件夹菜单。</li>\n<li>message-box：消息盒里面使用的字体。</li>\n<li>small-caption：调色板标题所使用的字体。</li>\n<li>status-bar：窗体状态栏使用的字体</li>\n</ul>\n<p>使用示例：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="47541907557678130000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.menu {\n   font: menu;\n}`, `47541907557678130000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.menu</span> <span class="token punctuation">{</span>\n   <span class="token property">font</span><span class="token punctuation">:</span> menu<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>需要注意的是，使用关键字作为属性值的时候必须是独立的，不能添加 font-family 或者 font-size 之类的，这和 font 属性缩写不是一个路子。如果混用，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="32325233881098340000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.menu {\n   font: 14px menu;\n}`, `32325233881098340000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.menu</span> <span class="token punctuation">{</span>\n   <span class="token property">font</span><span class="token punctuation">:</span> 14px menu<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>则此时的 menu 是作为自定义的字体名称存在的，而不是表示系统的 menu 菜单字体。</p>\n<p>实际上，font 关键字属性值本质上也是一种缩写，里面已经包含了诸如 font-size 等信息，如图 8-17、图 8-19 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-19-23-10-10-2feb81c5ba170d9e80859d57062f94e6-c328b.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 35.820895522388064%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABBUlEQVQY02WQx27EMAxE9f/fl4UPVnFRody9lnvZjBMkWSA6EALIx5khk1IKIdI0lUpxITx551wI47qur5+ntf54PHgcR1EkhbTGNE3T9z0zxnhfVFVVFHcdhuE4juu6tm37hT2RShQmsyyz1j6fTwyM48i00UT+W7Dregju+z7P87Is/2EYtNZ1fT9PMyqDJWBFAZiwom1bWKrrBvwf7D0wcpTnORFBGR7xZ0ZrOAFvrA1hAAvb53m+23bOxjwGr6QEg91Vecdk90oiWFJK1XWNCLgE9KdpAoZsqGVZogsNecMaIe/nHOu6DhNoc84RIUkSDIF8t4382BhCSJTCzfSXEix8AkJPhPYhzRlvAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 19 23 10 10" title="" data-src="/static/2021-12-19-23-10-10-2feb81c5ba170d9e80859d57062f94e6-fee1c.png" data-srcset="/static/2021-12-19-23-10-10-2feb81c5ba170d9e80859d57062f94e6-a67b7.png 200w,\n/static/2021-12-19-23-10-10-2feb81c5ba170d9e80859d57062f94e6-0b187.png 400w,\n/static/2021-12-19-23-10-10-2feb81c5ba170d9e80859d57062f94e6-fee1c.png 800w,\n/static/2021-12-19-23-10-10-2feb81c5ba170d9e80859d57062f94e6-c328b.png 871w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-19-23-11-15-278767d697e6edde5b28f75ceeefa4ae-4fbc8.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 431px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 66.35730858468676%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAAB8UlEQVQoz0VSiZKjIBD1/79ttiaJOcoJgpyKFyIeSTbHPnWqtlNFALv7HU1EruTr68/pdDocDqc1vr938SFmjGmtkuRHSqm1lmsIKSmlZVl2XVdVVcQ5NyYvS1vkeV3XVV0Zbay1QxjGaarqep7n+9/HNM/DMNzuN9/7+/3++Xycc1FKSJJcs4ylKUEjxugPjpTWVeVa17muda5t26Zpm7a1tng8Hp81lmIUKKVxC3xrwahUUoGF934cxxDC7XYD5jROOOISRN7v928xpWmaUil4xhi6KKVSQtERaMF7yEA2akLfu4WCg9r/yIxSQinM4DxDJUyhKVuLXe/7PC/wgyNN64Zx6Hzn0WWRURtjooyhRoMnLLWFLYoCnuKv73ugNXVT2hLJOMI/3EDIMIR5mpC8IAupBAeyNDqH4IxzayskFSYHiMlz2AbBC+PO+XVIEA0tEYVghTEqISQ8AwvBBZwLfaiaJaBtWp3rkb7Ud8/nE5pBJxKc/5CUUjBgKMPbuF6J0hr8Oc5CwAeMXa9h9NIaZeiDRxFt1k3QEwKmj2eASWCPG/iMFcfX6wU0fMUGyduKiLYdfI7jGE8PUHgG2BNCgBnHh+PxuNvtoBNQGwXnlmmh6S/ydtgoJElyuVyyLDufz9hjRdP9fo/iDXbLRPwDfcnMf5qKYxQAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 19 23 11 15" title="" data-src="/static/2021-12-19-23-11-15-278767d697e6edde5b28f75ceeefa4ae-4fbc8.png" data-srcset="/static/2021-12-19-23-11-15-278767d697e6edde5b28f75ceeefa4ae-3b445.png 200w,\n/static/2021-12-19-23-11-15-278767d697e6edde5b28f75ceeefa4ae-b6b36.png 400w,\n/static/2021-12-19-23-11-15-278767d697e6edde5b28f75ceeefa4ae-4fbc8.png 431w" data-sizes="(max-width: 431px) 100vw, 431px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>这 3 张图透露出不少重要的信息。从 Windows 下 Chrome 和 IE 浏览器部分关键字的字体和字号表现不一样可以看出，同一系统下浏览器的表现是有差异的。既然 font 关键字属性值的样式表现是跟着系统走的，那为何同一系统下不同浏览器的表现会不一样呢？</p>\n<p>显然是某个浏览器出现了问题。后来，通过设置修改 Windows 系统相关控件的默认字体我发现，这次是 Chrome 浏览器拖了后腿。caption、icon、message-box 这 3 个关键字在 Windows 系统下的 Chrome 浏览器中似乎是无效的，并不会实时跟着系统字体走。</p>\n<p>而所有这些问题在 Firefox 和 IE 浏览器中一个都没有，表现非常一致，非常符合预期，例如，修改“图标”字体为“思源黑体”，如图 8-20 所示，则所有文件名称全部变成了“思源黑体”，同时 font: icon 所在元素 font-family 计算值也成了“思源黑体”，如图 8-21 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-19-23-14-51-eb81252f8bc0145b4b704c36203fa8f4-7c992.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 18.28463713477851%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAkElEQVQI12VPOQ7DIBDk/2+LOzoHZJAAmcNcokGCZBQUF8kUq9md2YtQSkMI3vvwhdY6xvT6YM55x38QxlgpJeecUoox1lpbazmXMcZvD9I57yII2R4b5/w4hLV2rcU4EMi9d0ioCCGcczgH07EGKlIQcp7n/twZZ6sNVaXUisYYnCOFhHu1xeuSUuJHOOF/A2QL4JyByeKIAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 19 23 14 51" title="" data-src="/static/2021-12-19-23-14-51-eb81252f8bc0145b4b704c36203fa8f4-fee1c.png" data-srcset="/static/2021-12-19-23-14-51-eb81252f8bc0145b4b704c36203fa8f4-a67b7.png 200w,\n/static/2021-12-19-23-14-51-eb81252f8bc0145b4b704c36203fa8f4-0b187.png 400w,\n/static/2021-12-19-23-14-51-eb81252f8bc0145b4b704c36203fa8f4-fee1c.png 800w,\n/static/2021-12-19-23-14-51-eb81252f8bc0145b4b704c36203fa8f4-7c992.png 1061w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>考虑到 Chrome 浏览器的市场占有率，我们在使用 font 属性的时候，要避开 caption、icon 和 message-box 这 3 个关键字。</p>\n<p>对于不同的操作系统，字体表现不一样，这是预料之中的，毕竟使用系统字体，而不同系统默认字体肯定是不一样的；然后字体大小也不一样。例如，在 Windows 下 Chrome 的 caption 字体大小 16px，而在 OS X 下却只有 13px。因此，在实际使用时，我们还需要在下面再设定一下 font-size 大小来保证一致性。照理讲，直接这样设置就可以了：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="47976632692916500000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`html {\n   font: menu;\n   font-size: 16px;\n}`, `47976632692916500000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">html</span> <span class="token punctuation">{</span>\n   <span class="token property">font</span><span class="token punctuation">:</span> menu<span class="token punctuation">;</span>\n   <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>但是，实际上 IE8 浏览器会莫名其妙地忽略这里的 font-size: 16px，因此，一般都是下面这样处理：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="82905762420373370000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`html {\n   font: menu;\n}\nbody {\n   font-size: 16px;\n}`, `82905762420373370000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">html</span> <span class="token punctuation">{</span>\n   <span class="token property">font</span><span class="token punctuation">:</span> menu<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token selector">body</span> <span class="token punctuation">{</span>\n   <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>除了 caption、icon、menu、message-box、small-caption 和 status-bar，还有很多其他非标准的关键字，如 button、checkbox、checkbox-group、combo-box、desktop、dialog、document、field、hyperlink、list-menu、menu-item、menubar、outline-tree、password、pop-up-menu、 pull-down-menu、push-button、radio-button、radio-group、range、signature、tab、tooltip、window 和 workspace。不过，这些关键字浏览器大多不支持，尽管 Firefox 浏览器支持一部分，但是需要添加私有前缀 -moz-。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="21121425983013810000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`font: -moz-button;`, `21121425983013810000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">font</span><span class="token punctuation">:</span> -moz-button<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>因此，它们的实际应用价值不大。另外，WebKit 浏览器还支持其他关键字，如 font: -webkit-control，如下图所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-19-23-20-00-bd6052472aca2dc0286023e9454c9225-f5a61.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 226px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.38938053097345%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB60lEQVQoz01Si46bMBDk//+pUlWpTXXNpWpCHryOtzGYRzAGG0Ogc0l6vZVlrWFnZ2ZtoyzLjFLKWKdUkmUZzQllGWUJoUVZN62QahKD6oTsein+LRylGo11XSetVV0rSmXTJEXz/eXw5dvL1x+vppPsTHezPbpxWfUrbfSnNeWVMKZ5XuZ5jGPlOCLPeS/jNLMcz3J9WtRYYURiUrCad/2opkXpm9LLOK9cDAbnfJ7n9R63260XIvD9y/li23Zd11VVkYwUeZ4RIqVcPwWOhhACRaLrcEZeVXUUxQA7rvfIKc2v1/Z6vcZxQrIsTVKlFIqHYTCKorAdJ0nSdVnqe2B+juO67+Aqz3NCCGNlyUp0YYw1TaO1fjI/5OowHCyr9wP88zzPPJin0xngKAwBC4LAsuzgHrD2XzY8o9NtHBelJqU473Bfb29eFEZoBCow4zpRVhQMQrBD3RMMAx/NpmmCE4BB7r/5bduCPE1TfEFZdY/yHk/PaHa+XGjBeilHrTvO77IPp9MJgt/dlhWoIPhoHh+cy7I8wdAsWs6jSOIyuq7tuiAIMeogDMMoRl4wFsUxJg8LbcshAYKxA2iggRqGCcJcd6AUM/2z3e42P/e7nbnf//61PR8Or5uNfb7MegIhHsU4QqIeBvkXWGSZcLi35d4AAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 19 23 20 00" title="" data-src="/static/2021-12-19-23-20-00-bd6052472aca2dc0286023e9454c9225-f5a61.png" data-srcset="/static/2021-12-19-23-20-00-bd6052472aca2dc0286023e9454c9225-a2845.png 200w,\n/static/2021-12-19-23-20-00-bd6052472aca2dc0286023e9454c9225-f5a61.png 226w" data-sizes="(max-width: 226px) 100vw, 226px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h2 id="font-关键字属性值的应用价值"><a href="#font-%E5%85%B3%E9%94%AE%E5%AD%97%E5%B1%9E%E6%80%A7%E5%80%BC%E7%9A%84%E5%BA%94%E7%94%A8%E4%BB%B7%E5%80%BC" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>font 关键字属性值的应用价值</h2>\n<p>font 关键字属性值的价值如何呢？有没有合适的使用场景呢？有，并且相当适合！</p>\n<p>目前，非常多网站的通用 font-family 直接就是：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="92818528884010270000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`html {\n   font-family: \'Microsoft YaHei\';\n}`, `92818528884010270000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">html</span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">\'Microsoft YaHei\'</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>知道问题在哪里吗？这样一设置，就意味着所有操作系统下的所有浏览器都要使用“微软雅黑”字体。假如说用户的 iMac 或者 macbook 因为某些原因安装了“微软雅黑”字体，那岂不是这些系统原本更加漂亮的中文字体就不能使用了？</p>\n<p>于是，人们就会有这样的需求：希望非 Windows 系统下不要使用“微软雅黑”字体，而是使用其系统字体。怎么处理呢？</p>\n<p>一种方法是可以试试使用非标准的 -apple-system 等关键字字体，具体方法如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="79986751438383430000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`html {\n   font-family: -apple-system, BlinkMacSystemFont, \'Microsoft YaHei\';\n}`, `79986751438383430000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">html</span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> -apple-system<span class="token punctuation">,</span> BlinkMacSystemFont<span class="token punctuation">,</span> <span class="token string">\'Microsoft YaHei\'</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>这能够一定程度上满足我们的需求，但是毕竟是非标准的属性值，说不定哪天就被浏览器舍弃了，因此若非迫不得已，还是少用为妙。</p>\n<p>顺便多说两句，实际上还真有标准的系统字体关键字，叫作 system-ui，使用示例如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="9545635003167230000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`html {\n   font-family: system-ui;\n}`, `9545635003167230000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">html</span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> system-ui<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>在我写这段内容的时候，仅 Chrome 浏览器支持它（从版本 56 开始），并且，根据我的在 Windows 电脑上的测试，Chrome 浏览器的 system-ui 指的就是“调色板标题”对应关键字 small-caption 使用的字体，有点儿出乎我的意料。</p>\n<p>显然还有个更好的方法就是使用这里的 font 关键字，这是标准属性，10 年前浏览器就支持了，可以放心使用。CSS 代码如下（三选一即可）：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="72909291906469110000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`html {\n   font: menu;\n}\nbody {\n   font-size: 16px;\n}\n\nhtml {\n   font: small-caption;\n}\nbody {\n   font-size: 16px;\n}\n\nhtml {\n   font: status-bar;\n}\nbody {\n   font-size: 16px;\n}`, `72909291906469110000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">html</span> <span class="token punctuation">{</span>\n   <span class="token property">font</span><span class="token punctuation">:</span> menu<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token selector">body</span> <span class="token punctuation">{</span>\n   <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">html</span> <span class="token punctuation">{</span>\n   <span class="token property">font</span><span class="token punctuation">:</span> small-caption<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token selector">body</span> <span class="token punctuation">{</span>\n   <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">html</span> <span class="token punctuation">{</span>\n   <span class="token property">font</span><span class="token punctuation">:</span> status-bar<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token selector">body</span> <span class="token punctuation">{</span>\n   <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>这几个声明就可以让各个系统使用各自引以为傲的字体，推荐最短的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="85187026573839930000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`html {\n   font: menu;\n}\nbody {\n   font-size: 16px;\n}`, `85187026573839930000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">html</span> <span class="token punctuation">{</span>\n   <span class="token property">font</span><span class="token punctuation">:</span> menu<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token selector">body</span> <span class="token punctuation">{</span>\n   <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>最后，我要对 font 关键字属性值的用法做一个点评。</p>\n<p>让网页的字体跟系统走，对设计师而言，其实是一个比较冒险的做法，因为最终呈现的字体是不可控的。举个例子，某女生非常喜欢可爱风格，于是就把她的电脑主题变成了非常可爱的风格，菜单栏的字体全部变成那种很可爱的字体，此时，font: menu 所呈现的就不是“微软雅黑”，而是这个用户定义的“可爱字体”，这可能不是设计师想看到的，因为往往会跟自己的网页设计风格不一致。但是，转念一想，万一这是用户想看到的呢？既然用户把自己的主题设为该字体，那就说明这个用户对这个字体并不排斥，而是喜欢。当她浏览网页的时候，发现就你的网站呈现出了她喜欢的那种字体，你说会不会给用户一种“你懂我的心”的感觉呢？对用户而言，反而成了一种情感化的设计！</p>\n<p>另外，让网页的字体跟系统走，还有一个更加长远的好处。随着软件的不断发展，我们的操作系统的默认中文字体一定是越来越好看，如果网页的 font-family 定死为某个字体，用户就无法及时享受到新系统新字体带来的愉悦的视觉感受。举个例子，OS X 的默认中文字体其实已经变过好多次了，例如，你今天写了个页面，字体设置为很潮的“苹方”，过两年说不定会出来更好的名叫“梨方”的字体，我打包票，网站绝对是不会跟进的，因为大多数的线上项目维护都不会管 font-family 这种边边角角的事情，因此，就算很多年过去了，网站使用的依然是老字体。但是，如果使用的是 font 关键字属性值，就完全不会有这样的问题，网站字体能时时刻刻与时俱进。</p>\n<p>// TODO CSS 世界读书笔记待完成</p>',
excerpt:"line-height 的另外一个朋友 font-size 第 5 章介绍过 line-height 和 vertical-align 的好朋友关系，实际上 font-size 也和 line-height 是好朋友，同样也无处不在，并且纸面上 line-height…",frontmatter:{date:"2021-12-14 14:07:08",path:"/css-world-text-processing/",tags:"前端, CSS, CSS世界, 读书笔记",title:"CSS世界强大文本处理能力",draft:null}},prePost:{html:'<p>CSS 新世界中有大量的 CSS 新特性源自对 CSS2.1 中已有的 CSS 属性的增强，本章内容所讲述的就是在已有 CSS 属性上新增的那些 CSS 新特性</p>\n<h1 id="贯穿全书的尺寸体系"><a href="#%E8%B4%AF%E7%A9%BF%E5%85%A8%E4%B9%A6%E7%9A%84%E5%B0%BA%E5%AF%B8%E4%BD%93%E7%B3%BB" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>贯穿全书的尺寸体系</h1>\n<p>在 CSS2.1 中，CSS 中的尺寸概念都隐藏在具体的 CSS 用法中。例如，<code class="language-text">display: inline-block</code>、<code class="language-text">float: left</code> 和 <code class="language-text">position: absolute</code> 等 CSS 声明带来的 <code class="language-text">shrink-to-fit</code> 收缩；<code class="language-text">white-space: nowrap</code> 带来的“最大内容宽度”；连续英文字符的宽度溢出其实是因为“最小内容宽度”。</p>\n<p>因为这些尺寸的表现过于隐晦，所以学习时很难理解，学起来就很吃力，这就是我在第 1 章提过的，CSS2.1 中的 CSS 语法虽简单，但理解很难。这种困扰在纯理性思维的开发者身上体现得尤为明显，因为过于理性的人不擅长将模糊的概念转换为感性的认知来进行学习，所以他们学习 JavaScript 得心应手，但是学习 CSS 就会觉得比较困难。</p>\n<p>不过从 CSS3 开始，以前很多模糊的概念有了明确的定义，并且这些明确的定义有与之相匹配的 CSS 属性或 CSS 属性值。这种变化的优点很明显，那就是我们不需要再去理解 CSS 属性背后隐藏的含义和特性，知识变得更表层、更浅显了。虽说 CSS 学习的广度有所增加，但是总体来看，把概念规范起来的利还是远远大于弊的。例如接下来要介绍的尺寸体系，如果用一个金字塔来表示，那么在最上层的概念就是 <code class="language-text">Intrinsic Sizing</code> 和 <code class="language-text">Extrinsic Sizing</code>。<code class="language-text">Intrinsic Sizing</code> 被称为 <code class="language-text">内在尺寸</code>，表示元素最终的尺寸表现是由内容决定的；<code class="language-text">Extrinsic Sizing</code> 被称为 <code class="language-text">外在尺寸</code>，表示元素最终的尺寸表现是由上下文决定的。</p>\n<p>由于新的尺寸关键字在 width 属性中最常用，因此，本节以 width 属性为示例属性，和大家深入探讨 CSS 新世界中的尺寸概念。本节内容很重要，大家请仔细阅读，如有必要，可以反复阅读。</p>\n<p>CSS 的 width 属性新增了 4 个与尺寸概念相匹配的关键字，包括 fit-content、fill-available、min-content 和 max-content，每一个关键字背后都有知识点。我们先从最常用的 fit-content 关键字开始讲解。</p>\n<h2 id="从-width-fit-content-声明开始"><a href="#%E4%BB%8E-width-fit-content-%E5%A3%B0%E6%98%8E%E5%BC%80%E5%A7%8B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>从 width: fit-content 声明开始</h2>\n<p>fit-content 关键字是新的尺寸体系关键字中使用频率最高的关键字。你可以把 fit-content 关键字的尺寸表现想象成“紧身裤”，大腿的肉对应的就是元素里面的内容，如果是宽松的裤子，那肉眼所见的尺寸就比较大，但是如果是紧身裤，则呈现的尺寸就是大腿实际的尺寸。同样，元素应用 fit-content 关键字就像给元素里面的内容穿上了超薄紧身裤，此时元素的尺寸就是里面内容的尺寸。</p>\n<p>实际上，fit-content 关键字的样式表现就是 CSS2.1 规范中的“shrink-to-fit”，我称其为“包裹性”。这种尺寸表现和元素应用 display: inline-block、position: absolute 等 CSS 声明类似，尺寸收缩但不会超出包含块级元素的尺寸限制。</p>\n<p>举个例子，要实现和 <a href="/css-world-flow-element-size/#%E5%8C%85%E8%A3%B9%E6%80%A7">CSS 世界流、元素与基本尺寸——包裹性</a> 的例子一样的效果，需求描述为：一段文字，字数少的时候居中显示，字数多的时候左对齐显示。当然这里使用了不一样的方法，关键 CSS 代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="63028781982050240000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 传统实现 display: table */\n.cw-content {\n   display: table;\n   margin: auto;\n}\n\n/* fit-content 实现 */\n.cw-content {\n   width: fit-content;\n   margin: auto;\n}`, `63028781982050240000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 传统实现 display: table */</span>\n<span class="token selector">.cw-content</span> <span class="token punctuation">{</span>\n   <span class="token property">display</span><span class="token punctuation">:</span> table<span class="token punctuation">;</span>\n   <span class="token property">margin</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">/* fit-content 实现 */</span>\n<span class="token selector">.cw-content</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> fit-content<span class="token punctuation">;</span>\n   <span class="token property">margin</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>可以看到，在现代浏览器中，两种方法实现的效果一模一样：</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/8u5i6f?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>如果是内联元素要收缩，可以使用 display: inline-block 声明；如果是块级元素要收缩，可以使用 display: table 声明。这两种方式效果一样，兼容性还更好，IE8+ 浏览器都提供了支持。这么一看，fit-content 关键字岂不是没什么用？实际上并不是这样，使用 fit-content 关键字有两大优点。</p>\n<ol>\n<li>\n<p>保护了元素原始的 display 计算值，例如 <code class="language-text">&lt;li&gt;</code> 元素要是设置成了 display: table，前面的项目符号就不会出现，::marker 伪元素也会失效。</p>\n</li>\n<li>\n<p>让元素的尺寸有了确定的值，这是 fit-content 关键字最重要也最可贵的优点。第二个优点有必要展开讲一下。</p>\n</li>\n</ol>\n<h3 id="fit-content-关键字让元素有了确定的尺寸"><a href="#fit-content-%E5%85%B3%E9%94%AE%E5%AD%97%E8%AE%A9%E5%85%83%E7%B4%A0%E6%9C%89%E4%BA%86%E7%A1%AE%E5%AE%9A%E7%9A%84%E5%B0%BA%E5%AF%B8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>fit-content 关键字让元素有了确定的尺寸</h3>\n<p>CSS 中有不少布局需要有明确的元素的尺寸才能实现，非常典型的例子就是绝对定位元素使用 margin: auto 实现居中效果时需要设置具体的 width 或 height 的属性值，CSS 代码示意如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="17048752264072364000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.cw-dialog {\n   width: 300px;\n   height: 200px;\n   position: absolute;\n   left: 0;\n   top: 0;\n   right: 0;\n   bottom: 0;\n   margin: auto;\n   border: solid;\n}`, `17048752264072364000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.cw-dialog</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>\n   <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n   <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n   <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n   <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n   <span class="token property">bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n   <span class="token property">margin</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>\n   <span class="token property">border</span><span class="token punctuation">:</span> solid<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>但是，很多时候绝对定位元素的尺寸是不固定的，最终的尺寸会根据内容自动变化，此时上面的 CSS 代码就不适合，该怎么办呢？很多人会想到使用 transform 属性进行偏移：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="28562542926960034000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.cw-dialog {\n   position: absolute;\n   left: 50%;\n   top: 50%;\n   border: solid;\n   transform: translate(-50%, -50%);\n}`, `28562542926960034000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.cw-dialog</span> <span class="token punctuation">{</span>\n   <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n   <span class="token property">left</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>\n   <span class="token property">top</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>\n   <span class="token property">border</span><span class="token punctuation">:</span> solid<span class="token punctuation">;</span>\n   <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate</span><span class="token punctuation">(</span>-50%<span class="token punctuation">,</span> -50%<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>这是一种不错的方法，但并不完美，而且这个方法占用了 transform 属性，这会导致绝对定位元素无法使用包含 transform 属性的动画效果。例如，现在项目中有一个整站通用的体验增强的位移小动画：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="13873565108571540000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`@keyframe tinyUp {\n   from {\n      transform: translateY(5px);\n   }\n\n   to {\n      transform: translateY(0);\n   }\n}`, `13873565108571540000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token atrule"><span class="token rule">@keyframe</span> tinyUp</span> <span class="token punctuation">{</span>\n   <span class="token selector">from</span> <span class="token punctuation">{</span>\n      <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateY</span><span class="token punctuation">(</span>5px<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">to</span> <span class="token punctuation">{</span>\n      <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateY</span><span class="token punctuation">(</span>0<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>.cw-dialog 元素就没办法使用这个名为 tinyUp 的位移小动画，因为 CSS 动画关键帧中的 CSS 语句的优先级最高，会干扰原本设置的 transform 偏移值：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="38271459001146030000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.cw-dialog {\n   position: absolute;\n   left: 50%;\n   top: 50%;\n   border: solid;\n   /* transform 会被 animation 动画干扰 */\n   transform: translate(-50%, -50%);\n   animation: tinyUp 0.2s;\n}`, `38271459001146030000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.cw-dialog</span> <span class="token punctuation">{</span>\n   <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n   <span class="token property">left</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>\n   <span class="token property">top</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>\n   <span class="token property">border</span><span class="token punctuation">:</span> solid<span class="token punctuation">;</span>\n   <span class="token comment">/* transform 会被 animation 动画干扰 */</span>\n   <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate</span><span class="token punctuation">(</span>-50%<span class="token punctuation">,</span> -50%<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token property">animation</span><span class="token punctuation">:</span> tinyUp 0.2s<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>有没有什么更好的方法呢？有，就是使用 fit-content 关键字，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="25020253388507420000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.cw-dialog {\n   width: fit-content;\n   height: fit-content;\n   position: absolute;\n   left: 0;\n   top: 0;\n   right: 0;\n   bottom: 0;\n   margin: auto;\n   border: solid;\n   animation: tinyUp 0.2s;\n}`, `25020253388507420000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.cw-dialog</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> fit-content<span class="token punctuation">;</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> fit-content<span class="token punctuation">;</span>\n   <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n   <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n   <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n   <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n   <span class="token property">bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n   <span class="token property">margin</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>\n   <span class="token property">border</span><span class="token punctuation">:</span> solid<span class="token punctuation">;</span>\n   <span class="token property">animation</span><span class="token punctuation">:</span> tinyUp 0.2s<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>此时元素尺寸自适应，同时完全居中，不用担心包括 transform 属性的动画带来的冲突。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/cexesq?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>在 webkit 浏览器中，大家可以看到弹框出现的时候会有一个向上微移的动画，这就是 fit-content 关键字带来的体验增强。其他浏览器则做了降级处理（兼容到 IE9），即居中功能正常，但没有动画，兼容细节可参见示例页面源码。</p>\n<h3 id="fit-content-关键字的兼容性"><a href="#fit-content-%E5%85%B3%E9%94%AE%E5%AD%97%E7%9A%84%E5%85%BC%E5%AE%B9%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>fit-content 关键字的兼容性</h3>\n<p>fit-content 关键字的兼容性比较复杂，很多人会误认为 width 属性和 height 属性都表示尺寸，fit-content 关键字作为这两个属性的属性值，兼容性应该与它们一样，然而实际上差异很大，具体细节如下。</p>\n<ol>\n<li>\n<p>IE 浏览器和 Edge 浏览器不支持 fit-content 关键字，若要兼容，可以使用传统方法进行模拟。</p>\n<p>Chrome 浏览器最早在 2012 年的时候就已支持 width: fit-content，Safari 等浏览器紧随其后很快也支持了，因此 width: fit-content 目前在移动端是可以放心使用的。为了兼顾少部分陈旧手机用户，稳妥起见，我们可以加上 -webkit- 私有前缀：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="42247181498981280000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.example {\n  width: -webkit-fit-content;\n  width: fit-content;\n}`, `42247181498981280000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.example</span> <span class="token punctuation">{</span>\n  <span class="token property">width</span><span class="token punctuation">:</span> -webkit-fit-content<span class="token punctuation">;</span>\n  <span class="token property">width</span><span class="token punctuation">:</span> fit-content<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>对于 Firefox 浏览器，还需要添加 -moz- 私有前缀，因此，对于用户量较大的对外项目，下面的书写方式是最稳妥的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="31002582561584325000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.example {\n  width: -webkit-fit-content;\n  width: -moz-fit-content;\n  width: fit-content;\n}`, `31002582561584325000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.example</span> <span class="token punctuation">{</span>\n  <span class="token property">width</span><span class="token punctuation">:</span> -webkit-fit-content<span class="token punctuation">;</span>\n  <span class="token property">width</span><span class="token punctuation">:</span> -moz-fit-content<span class="token punctuation">;</span>\n  <span class="token property">width</span><span class="token punctuation">:</span> fit-content<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>height: fit-content 则是在 2015 年才开始被支持的，比 width: fit-content 晚了 3 年，不过依旧可以放心大胆使用：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="68101653970087740000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.example {\n  height: -webkit-fit-content;\n  height: fit-content;\n}`, `68101653970087740000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.example</span> <span class="token punctuation">{</span>\n  <span class="token property">height</span><span class="token punctuation">:</span> -webkit-fit-content<span class="token punctuation">;</span>\n  <span class="token property">height</span><span class="token punctuation">:</span> fit-content<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>至于 Firefox 浏览器，虽然它在语法上支持 height: fit-content，但是并没有任何实际的效果。例如我们设置 height: -moz-fit-content，Firefox 浏览器不会认为它是错误的语法，但是没有任何实际的效果，可以说 Firefox 浏览器目前并不支持 height: fit-content。因此，请勿出现下面的特征检测语法：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="55536343642733660000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`@support (height: fit-content) or (height: -moz-fit-content) {\n  .example {\n     height: -moz-fit-content;\n     height: fit-content;\n  }\n}`, `55536343642733660000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token atrule"><span class="token rule">@support</span> <span class="token punctuation">(</span><span class="token property">height</span><span class="token punctuation">:</span> fit-content<span class="token punctuation">)</span> or <span class="token punctuation">(</span><span class="token property">height</span><span class="token punctuation">:</span> -moz-fit-content<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>\n  <span class="token selector">.example</span> <span class="token punctuation">{</span>\n     <span class="token property">height</span><span class="token punctuation">:</span> -moz-fit-content<span class="token punctuation">;</span>\n     <span class="token property">height</span><span class="token punctuation">:</span> fit-content<span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>当然，随着时间推进，若干年后，Firefox 浏览器也可能会完美支持 height: fit-content 声明。</p>\n</li>\n<li>\n<p>min-width 属性和 max-width 属性可以正确渲染 fit-content 关键字，而 max-height 和 min-height 属性设置 fit-content 关键字虽然语法正确，但没有任何具体的样式表现。</p>\n<p>有人可能会问，既然无效，那浏览器还认为 fit-content 关键字对于 max-height 和 min-height 属性是合法的，这也太奇怪了吧？</p>\n<p>实际并不是这样，max-height: fit-content、min-height: fit-content 和 Firefox 浏览器中的 height: -moz-fit-content 声明在某些情况下也是有效的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="30478747653308936000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.parent {\n  writing-mode: vertical-rl;\n}\n\n.child {\n  /* 有效 */\n  max-height: fit-content;\n}`, `30478747653308936000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.parent</span> <span class="token punctuation">{</span>\n  <span class="token property">writing-mode</span><span class="token punctuation">:</span> vertical-rl<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.child</span> <span class="token punctuation">{</span>\n  <span class="token comment">/* 有效 */</span>\n  <span class="token property">max-height</span><span class="token punctuation">:</span> fit-content<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>即在图文内容垂直排版的时候，height 相关的 CSS 属性是可以准确渲染 fit-content 关键字的。</p>\n</li>\n</ol>\n<h2 id="stretch、available-和-fill-available-关键字究竟用哪个"><a href="#stretch%E3%80%81available-%E5%92%8C-fill-available-%E5%85%B3%E9%94%AE%E5%AD%97%E7%A9%B6%E7%AB%9F%E7%94%A8%E5%93%AA%E4%B8%AA" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>stretch、available 和 fill-available 关键字究竟用哪个</h2>\n<p>我们在页面中放置一个没有样式设置的 <code class="language-text">&lt;div&gt;</code> 元素，此时，该 <code class="language-text">&lt;div&gt;</code> 元素的宽度自动填满可用空间。</p>\n<p>stretch、available 和 fill-available 这 3 个关键字虽然名称有所不同，但是作用都是一致的，那就是让元素的尺寸自动填满可用空间，就如同 <code class="language-text">&lt;div&gt;</code> 元素的默认尺寸表现。</p>\n<p>下面问题来了，究竟该使用 stretch、available 和 fill-available 这 3 个关键字中的哪一个呢？先简单分析一下这 3 个关键字。</p>\n<ul>\n<li>stretch 指 <code class="language-text">弹性拉伸</code>，是最新的规范中定义的关键字，替换之前的 fill-available 和 available。</li>\n<li>available 指 <code class="language-text">可用空间</code>，是 Firefox 浏览器使用的关键字，需要配合 -moz- 私有前缀使用。</li>\n<li>fill-available 指 <code class="language-text">填充可用空间</code>，是 webkit 浏览器使用的关键字，需要配合 -webkit- 私有前缀使用。</li>\n</ul>\n<p>因此，立足现在，面向未来，我们的 CSS 应该这么写：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="32018815131405988000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.element {\n   width: -webkit-fill-available;\n   width: -moz-available;\n   width: stretch;\n}`, `32018815131405988000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.element</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> -webkit-fill-available<span class="token punctuation">;</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> -moz-available<span class="token punctuation">;</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> stretch<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>为了统一，接下来分享的内容都以 stretch 关键字为代表进行介绍。</p>\n<h3 id="stretch-关键字的应用场景"><a href="#stretch-%E5%85%B3%E9%94%AE%E5%AD%97%E7%9A%84%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>stretch 关键字的应用场景</h3>\n<p>实际开发的时候，我们需要用到 stretch 关键字的场景并不多。首先，block 水平的元素、弹性布局和网格布局中的子项默认都自带弹性拉伸特性；其次，对于替换元素、表格元素、内联块级元素等这些具有“包裹性”的元素，建议使用 <code class="language-text">宽度分离原则</code> 进行自适应，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="4499924562798662700"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.container {\n   margin: 15px;\n   padding: 10px;\n}\n\n.container > img {\n   width: 100%;\n}`, `4499924562798662700`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.container</span> <span class="token punctuation">{</span>\n   <span class="token property">margin</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>\n   <span class="token property">padding</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.container > img</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>也就是外面嵌套一层普通的块级元素，块级元素具有弹性拉伸特性，因此可以很好地实现替换元素的宽度自适应布局效果。</p>\n<p>只有当我们的 HTML 标签使用受限的时候，才需要考虑使用 stretch 关键字。例如一个 <code class="language-text">&lt;button&gt;</code> 按钮元素，希望距离容器左右边缘各 15px 的间距，但是外部又不方便嵌套其他标签元素，此时就非常适合使用 stretch 关键字，这样连 box-sizing 属性都可以省略：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="10976272464498770000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`button {\n   height: 40px;\n   width: -webkit-fill-available;\n   width: -moz-available;\n   width: stretch;\n   margin-left: 15px;\n   margin-right: 15px;\n}`, `10976272464498770000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">button</span> <span class="token punctuation">{</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> -webkit-fill-available<span class="token punctuation">;</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> -moz-available<span class="token punctuation">;</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> stretch<span class="token punctuation">;</span>\n   <span class="token property">margin-left</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>\n   <span class="token property">margin-right</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/e992x2?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>然而，IE 浏览器和 Edge 浏览器是不支持 stretch 关键字的，因此如果你的项目需要兼容这两个浏览器，stretch 关键字就不能使用，需要换成其他兼容性更好的方法，那就是使用 calc() 函数，示例如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="44423300875272995000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`button {\n   height: 40px;\n   width: calc(100% - 30px);\n   margin-left: 15px;\n   margin-right: 15px;\n   box-sizing: border-box;\n}`, `44423300875272995000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">button</span> <span class="token punctuation">{</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>100% - 30px<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token property">margin-left</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>\n   <span class="token property">margin-right</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>\n   <span class="token property">box-sizing</span><span class="token punctuation">:</span> border-box<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>其实现效果和使用 stretch 关键字是一样的。兼容性问题限制了 stretch 关键字的使用场景。</p>\n<p>当然，如果你的项目没有兼容性的顾虑，例如后台产品、实验项目或者是移动端项目，我还是建议使用 stretch 关键字。因为 calc() 函数的代码有些麻烦，宽度要手动计算，而且当 margin 在水平方向的大小发生变化的时候，width 属性值也要同步变化，这增加了维护成本，不如使用 stretch 关键字省心。</p>\n<p>或者各退一步，既使用新特性，又兜底低版本浏览器；既满足使用新特性的要求，又不用担心兼容问题：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="60846028033634120000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`button {\n   height: 40px;\n   width: calc(100% - 30px);\n   width: -webkit-fill-available;\n   width: -moz-available;\n   width: stretch;\n   margin-left: 15px;\n   margin-right: 15px;\n   box-sizing: border-box;\n}`, `60846028033634120000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">button</span> <span class="token punctuation">{</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>100% - 30px<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> -webkit-fill-available<span class="token punctuation">;</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> -moz-available<span class="token punctuation">;</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> stretch<span class="token punctuation">;</span>\n   <span class="token property">margin-left</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>\n   <span class="token property">margin-right</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>\n   <span class="token property">box-sizing</span><span class="token punctuation">:</span> border-box<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>个中权衡还需要大家根据实际场景进行判断。</p>\n<h3 id="stretch-关键字在-firefox-浏览器中的问题"><a href="#stretch-%E5%85%B3%E9%94%AE%E5%AD%97%E5%9C%A8-firefox-%E6%B5%8F%E8%A7%88%E5%99%A8%E4%B8%AD%E7%9A%84%E9%97%AE%E9%A2%98" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>stretch 关键字在 Firefox 浏览器中的问题</h3>\n<p><code class="language-text">&lt;table&gt;</code> 元素的默认尺寸表现是收缩，并且实际开发的时候往往需要宽度自适应于外部容器，因此 <code class="language-text">&lt;table&gt;</code> 元素很适合使用 stretch 关键字。在 CSS 重置的时候，不要再使用下面这样的 CSS 代码：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="35550615735909610000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`table {\n   width: 100%;\n   table-layout: fixed;\n   box-sizing: border-box;\n}`, `35550615735909610000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">table</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>\n   <span class="token property">table-layout</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>\n   <span class="token property">box-sizing</span><span class="token punctuation">:</span> border-box<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>可以优化成：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="35782654703204987000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`table {\n   width: 100%;\n   width: -webkit-fill-available;\n   width: -moz-available;\n   width: stretch;\n   table-layout: fixed;\n   box-sizing: border-box;\n}`, `35782654703204987000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">table</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> -webkit-fill-available<span class="token punctuation">;</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> -moz-available<span class="token punctuation">;</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> stretch<span class="token punctuation">;</span>\n   <span class="token property">table-layout</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>\n   <span class="token property">box-sizing</span><span class="token punctuation">:</span> border-box<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>这样就算我们的 <code class="language-text">&lt;table&gt;</code> 元素设置 margin 属性，也能完美自适应尺寸。</p>\n<p>但是有一个例外，那就是 Firefox 浏览器。Firefox 浏览器在其他所有场景下都运行完美，唯独对 table 和 inline-table 水平的元素的渲染有问题，这些元素设置 width: -moz-available 的效果和设置 width: 100% 是一样的。</p>\n<p>我们不妨来看一个例子，实现一个左右留有 15px 间距的 <code class="language-text">&lt;table&gt;</code> 元素布局：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="94582853686653620000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`table {\n   width: calc(100% - 32px);\n   width: -webkit-fill-available;\n   /* width: -moz-available; */\n   width: stretch;\n   margin-left: 15px;\n   margin-right: 15px;\n   border: 1px solid lightgray;\n}`, `94582853686653620000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">table</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>100% - 32px<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> -webkit-fill-available<span class="token punctuation">;</span>\n   <span class="token comment">/* width: -moz-available; */</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> stretch<span class="token punctuation">;</span>\n   <span class="token property">margin-left</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>\n   <span class="token property">margin-right</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>\n   <span class="token property">border</span><span class="token punctuation">:</span> 1px solid lightgray<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>此时，无论 <code class="language-text">&lt;table&gt;</code> 元素的 width、margin 或者 border 如何变化，<code class="language-text">&lt;table&gt;</code> 元素的宽度永远自适应外部容器。图 3-4 展示的就是上述代码在 375px 宽度屏幕下的运行效果，可以看到 <code class="language-text">&lt;table&gt;</code> 元素的尺寸正好自适应屏幕尺寸。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-23-01-10-13-48788eb9bc511d6c10e27d17cfa6182e-9ac90.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 64.16739319965127%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAACVElEQVQoz51SXW/SYBTuf/XGO+OVN0tcohcat4yyQVsoGBMzp1fiaAeUtrRl0zmgMD5ayuj353BLBq4rbDDfunhrjE9Oznlycp7zvufkQIsoisJoHi2ieYwomi9ub5fL1fJvWMV2dwdNL0K/YV1PrqbTy+h6Fs6ulneL+3/AanUPTa2eOFDrXf2or38bmIc9vTUOuuZFR5s0R74Y88uG4jbPvLY2OdV/9M1L2Z0CmwVjKOwX9oRhmnVQxsRYC2EMlDbStLFDaXBZ3a6ogMMHI7h0htJauqojjIXzQYZz7GYRCgfkHq8gXIBzLlZzcN7L1M9xwc/z3jtQx/k5wcvXz/OCv0E5COPhnJlipSzn2mIJmkvEFjV8UvJeEdrTDwpGaWtYJUEOt6va8yz1luq/rniPd5WdqvPovbxeMLK8vP6ZgcuW2y5BNxIBU/ILyoPLxsvCGKOtN3kmTcpJ1lorHOOskqhYzz7JKOvABypC2yijbxalZEl1wMuhRO6yA4RxwKgJQkFoK1nRU1UTrRo7pfF2xUCqeqp8BjayuS+lKC1BjjYK0hahxN8OB8SeoGSEIMe7YDzg87H34lEFL/eH47yLshbYU4azMzULq1kP4uJHfojXgMbN1+xc3cdYExdcUI3QBiCZmg0yWd4BJM5zDgK68I4tktCNWmc7GtGZkG2faLlkJyiK3oN9aToxabn7LRcQ4PdFlxA9AlS2/cnwEAKH8n+IL+x3iBsEwXmvL89mPzXd6PYGqqqfNFr1o+N2p9s+7XW7/ZOG+PX7yVjTY8l9LPkFSWeBoYXeTD4AAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 23 01 10 13" title="" data-src="/static/2021-12-23-01-10-13-48788eb9bc511d6c10e27d17cfa6182e-fee1c.png" data-srcset="/static/2021-12-23-01-10-13-48788eb9bc511d6c10e27d17cfa6182e-a67b7.png 200w,\n/static/2021-12-23-01-10-13-48788eb9bc511d6c10e27d17cfa6182e-0b187.png 400w,\n/static/2021-12-23-01-10-13-48788eb9bc511d6c10e27d17cfa6182e-fee1c.png 800w,\n/static/2021-12-23-01-10-13-48788eb9bc511d6c10e27d17cfa6182e-9ac90.png 1147w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>但是，如果打开 Firefox 浏览器的开发者工具，取消将 width: -moz-available 当作注释，就会发现 <code class="language-text">&lt;table&gt;</code> 元素的宽度超出了屏幕的尺寸，如图 3-5 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-23-01-11-00-cd88f4f0c1403742e07a71ed049f3c1e-04367.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 69.95670995670994%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAAC8ElEQVQ4y2WUS28jRRSF/e9YICQgmyxYDBI7VqwZsWfBAoEUYJEBRpqZPGac2O5E9kTYnsSJ7UDiOG4/43a32++32xMnit3+uN1OpMCUdFSnbt17+lSrbnlm8xm3szm2bTO/x2w+xxmFYhn/7lv8SggleIB/X/h+iOBBmOnNDYsFzOfLGttecDeb4REtCSz471iuvVs+Vj56wucrX/Dxp6t88tkqK6tP+PKrr5lOLD4Y9hzP4DbH3x2LZOOaY2NIvGZxXB1xIojJOlxuEym1eXl4QVCtES422b80iJa7kjPmxBzzT2vKefcWtTvFM7zzEW+ESdZiIhAhbr4TwaiIL3m8dsSRs64fkRA4e4eVvzjUwyTMqIhGJR7jtJkg3T53BEMErip4r/rsaV28hTaKfD2g9fBpTqxH0HGlmi5XXCzjv6SavC502NeabORTRPQOHusuyJpa59vUe17khnz3tsrz7Jg/DpL8oByzV53y47tL1g8OCeoDvk/0eRqp4y1ZfBMy+PVsQKDS4afTGG8yIjgWwWfZKr+pI0kaspYw2SqO2DjJ8Tx6Jk4t1i40nqUy4nzI+nmLnxM1/GXJuWyyIzXeQo8/z6oEsg3nyEF2ClW8+QG7V0NepExe53ts5rq8Uju8KfTZzrR5lXaON2A722Iz03Djv59qbKrOXoP1pIYvYy7/oV9roOjXKJUxe/pEZos9B7rlckV/xN31RJyP8YmBgDZysSuOI8ZIrs2dgq9UxS9f9xsT/PmO/JOxHF+clYQbFtsS2yp22K2MxFmP7Qde6rGjSZ0IbuTahPQent5NhpjZIlEbk6yP5PoM5RqMXJ54wH0s/jj2vxxn76IpDt0uc3rI6Y6FveTuLLBt9/YvZ/u+gx7nfgiPVqnQbLXp9fuUNR3DrJHNF0mlVdRcgXRG5UriumHS7w+oN1q02h3K5YqLQqns4iyVRqsYeJxHYSGuXLhmF+5DYbuO4P31NVkRzheKWNZk2bKPah74Q82/OFHh/4asdmYAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 23 01 11 00" title="" data-src="/static/2021-12-23-01-11-00-cd88f4f0c1403742e07a71ed049f3c1e-fee1c.png" data-srcset="/static/2021-12-23-01-11-00-cd88f4f0c1403742e07a71ed049f3c1e-a67b7.png 200w,\n/static/2021-12-23-01-11-00-cd88f4f0c1403742e07a71ed049f3c1e-0b187.png 400w,\n/static/2021-12-23-01-11-00-cd88f4f0c1403742e07a71ed049f3c1e-fee1c.png 800w,\n/static/2021-12-23-01-11-00-cd88f4f0c1403742e07a71ed049f3c1e-04367.png 1155w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/2olzvs?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>因此，如果宽度自适应拉伸效果用在 <code class="language-text">&lt;table&gt;</code> 元素上，就不要再使用 -moz-available。</p>\n<h2 id="深入了解-min-content-关键字"><a href="#%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3-min-content-%E5%85%B3%E9%94%AE%E5%AD%97" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>深入了解 min-content 关键字</h2>\n<p>min-content 关键字实际上就是 CSS2.1 规范中提到的“preferred minimum width”或者“minimum content width”，即“首选最小宽度”或者“最小内容宽度”。</p>\n<p>“首选最小宽度”在 CSS 世界中有过简单的介绍，这里再把最小宽度规则深入讲解一下。</p>\n<p>众所周知，元素由 content-box、padding-box、border-box 和 margin-box 组成，元素最终占据的尺寸由这 4 个盒子占据的尺寸决定。其中 padding-box、border-box 和 margin-box 的尺寸表现规则不会因为元素的不同而有所不同，但是 content-box 不一样，它随着内容的不同，首选最小宽度也会不同。这个有必要好好讲一讲。</p>\n<h3 id="替换元素"><a href="#%E6%9B%BF%E6%8D%A2%E5%85%83%E7%B4%A0" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>替换元素</h3>\n<p>按钮、视频和图片等元素属于替换元素，替换元素的首选最小宽度是当前元素内容自身的宽度。例如：</p>\n<html><head></head><body><div class="gatsby-code-button-container" data-toaster-id="96164886778322220000" data-toaster-class="gatsby-code-button-toaster" data-toaster-text-class="gatsby-code-button-toaster-text" data-toaster-text="复制成功" data-toaster-duration="3500" onclick="copyToClipboard(`<section>\n   <img data-src=&quot;./1.jpg&quot; />\n</section>`, `96164886778322220000`)">\n              <div class="gatsby-code-button" title="html">\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div></body></html>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>./1.jpg<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>上面这段 HTML 代码中的图片，如果原始尺寸是 256px×192px，则 <code class="language-text">&lt;section&gt;</code> 元素的首选最小宽度就是 256px。</p>\n<h3 id="cjk-文字"><a href="#cjk-%E6%96%87%E5%AD%97" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>CJK 文字</h3>\n<p>CJK 是 Chinese/Japanese/Korean 的缩写，指的是中文、日文、韩文这几种文字。这里以中文为代表加以说明。如果是一段没有标点的中文文字，则首选最小宽度是单个汉字的宽度。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="31519535716294443000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<style>\n   p {\n      width: min-content;\n      outline: 1px dotted;\n   }\n</style>\n<p>感谢你的支持</p>`, `31519535716294443000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n   <span class="token selector">p</span> <span class="token punctuation">{</span>\n      <span class="token property">width</span><span class="token punctuation">:</span> min-content<span class="token punctuation">;</span>\n      <span class="token property">outline</span><span class="token punctuation">:</span> 1px dotted<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>感谢你的支持<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>最终的宽度表现效果如图 3-6 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-27-10-30-44-6f3c88d3bf0d1f4d2ceeb940677d4b48-72b6c.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 527px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 47.81783681214421%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA7UlEQVQoz52RTU/CQBCG9///FWPijUhoqxH8oF/EAwbLQRBrFOJ2t93ZLZ3uutaUQ4EYfE5vJvPMJDPE7KGNBiZwiyAhb9Bam0OQrtm0vaebVboWoqCUcs7NEbpy3dhPy83dNLUB69ocZ3/zjzxbUT/53M06TX5+o+H8v7LdHMzXJ8i/Wit/+clHR97dXLeQgyO3WKsKzV8QkLIsS0SkGQOQwv6nEFhVSimbbYXnhVQKALKM2dyGnDFOprPkZfEqpRyN7m8fgnEQ+cEkjCaee9MfuO7V8Oz8YhzGURz3Lp3ewHOca88dhvFj3/G+AU/iQRTa15R6AAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 27 10 30 44" title="" data-src="/static/2021-12-27-10-30-44-6f3c88d3bf0d1f4d2ceeb940677d4b48-72b6c.png" data-srcset="/static/2021-12-27-10-30-44-6f3c88d3bf0d1f4d2ceeb940677d4b48-96efc.png 200w,\n/static/2021-12-27-10-30-44-6f3c88d3bf0d1f4d2ceeb940677d4b48-b717e.png 400w,\n/static/2021-12-27-10-30-44-6f3c88d3bf0d1f4d2ceeb940677d4b48-72b6c.png 527w" data-sizes="(max-width: 527px) 100vw, 527px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>但是，如果这段中文文字包含避头标点或避尾标点，同时 line-break 的属性值不是 anywhere，则最终的首选最小宽度需要包含标点字符的宽度。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="10619947205963220000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<p>感谢你的支持！</p>`, `10619947205963220000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>感谢你的支持！<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>最终的宽度表现效果如图 3-7 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-27-10-32-24-c3ee1703b0e82f57a85fb45598119293-2e6f6.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 529px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 43.28922495274102%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsSAAALEgHS3X78AAAA4klEQVQoz52Ry2rCQBSG8/5bN0V8A2mKaTUaQ4xCMbfSRbWICwU33lKjE8zcZ3ri1tiiH8xwzj98HDhj6Csopfh41kphjPM8RwhxznUVxnVECFktN+nhlGVZeuEOWSlZe/1sRwsouRBSSn2DSlk9OXP3a32p9R9UyDCq4S1Gs58H5bozG063j8gAKhhhQv+HAZsUQsCSMCGMlQ3jTEnBOaMlrCgwJPBCSdnCX0ACNxxj8j3f7VOETna3/x4lQRiPg2gcfgy8od1z23a/abaCOAnjpGlab52u6/qO4wdR8vxi/QJoaANm8h6LpAAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 27 10 32 24" title="" data-src="/static/2021-12-27-10-32-24-c3ee1703b0e82f57a85fb45598119293-2e6f6.png" data-srcset="/static/2021-12-27-10-32-24-c3ee1703b0e82f57a85fb45598119293-31cb9.png 200w,\n/static/2021-12-27-10-32-24-c3ee1703b0e82f57a85fb45598119293-8e573.png 400w,\n/static/2021-12-27-10-32-24-c3ee1703b0e82f57a85fb45598119293-2e6f6.png 529w" data-sizes="(max-width: 529px) 100vw, 529px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>之所以首选最小宽度是两个字符的宽度，是因为叹号是避头标点，不能出现在一行的头部，前面需要其他文字字符。</p>\n<p>有一个比较特别的标点是中文破折号，在 IE 浏览器和 Edge 浏览器中它既是避头标点，又是避尾标点；在 Firefox 浏览器中它是避头标点，不是避尾标点；在 Chrome 等 webkit 浏览器中它既不是避头标点，也不是避尾标点。但是，无论在哪个浏览器中，连续的中文破折号都会被认为是一个字符单元。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="37665718290092600000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<p>感谢————————比心</p>`, `37665718290092600000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>感谢————————比心<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>上述代码在各个浏览器中运行的首选最小宽度表现效果如图 3-8 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-27-10-36-30-18b7843ab93958f2597d4f7e946966d0-35569.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 49.57575757575758%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABS0lEQVQoz21Ra2+CQBDk//8pP9lURR4lSNFYFZ+0iMDBcXBw210wRG0n5HK7OzMZ9jQIQ5hO6RuNYLsFRNvS6XnUNE2YTCDPoYeUYFlgGDAeo1CjOo4hSSAIIMuIoRSdZQmMkTVOkdMDR0JAFBFfCI1aWCNjkD3ien1q9vc0JQlAJ8ZUq9U/4qq691/Emw2FQnEc3xpMNQQjgurc08v5IjJWVVXbbwHdhEjSVHHeVlXTNJqu6yzPW6WklEII1QF5u93GNG0p0Zlw/4nox3VdvNQdWfM+vVuSlGWJxeF45LzseUVRCFFyXjDGBnGS3PzlErNwzvM8106ns2yax8x9yGC/X3+t0RFd67ru42RZ5vs+Y/RyFBtd1d8l02O3ncvrCMkowxGJhw2F36HjelF0tWzHsGw8p/rcdhYfzuLtfTY3zJlu6LoR7A+D5Betqz3fVL14YAAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 27 10 36 30" title="" data-src="/static/2021-12-27-10-36-30-18b7843ab93958f2597d4f7e946966d0-fee1c.png" data-srcset="/static/2021-12-27-10-36-30-18b7843ab93958f2597d4f7e946966d0-a67b7.png 200w,\n/static/2021-12-27-10-36-30-18b7843ab93958f2597d4f7e946966d0-0b187.png 400w,\n/static/2021-12-27-10-36-30-18b7843ab93958f2597d4f7e946966d0-fee1c.png 800w,\n/static/2021-12-27-10-36-30-18b7843ab93958f2597d4f7e946966d0-35569.png 825w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h3 id="非-cjk-文字"><a href="#%E9%9D%9E-cjk-%E6%96%87%E5%AD%97" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>非 CJK 文字</h3>\n<p>非 CJK 文字指的是除中文、日文、韩文之外的文字，如英文、数字和标点等字符。非 CJK 文字的首选最小宽度是由字符单元的宽度决定的，所有连续的英文字母、数字和标点都被认为是一个字符单元，直到遇到中断字符。</p>\n<p>哪些字符可以中断字符单元呢？首先无论是哪个浏览器，Space 空格（U+0020）都能中断字符单元，并且忽略 Space 空格前后字符的类型，例如 <code class="language-text">min content</code> 的最小宽度排版是：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="37871806963093250000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`min\ncontent`, `37871806963093250000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title=""\n              >\n                \n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">min\ncontent</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>而其他字符的中断规则在每个浏览器中都是不一样的。</p>\n<ol>\n<li>\n<p>在 webkit 浏览器中，短横线（即连字符）（U+002D）和英文问号（U+003F）可以中断字符单元，各种前括号（如“(”“[”“{”）也可以中断字符单元。其中，短横线和英文问号只有当后面是字母或数字的时候才会中断字符单元，前括号则只有当前面不是字母和数字的时候才会中断字符单元。例如，min-content 字符在最小宽度下的排版是：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="92388688962539240000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`min-\ncontent`, `92388688962539240000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title=""\n              >\n                \n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">min-\ncontent</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>如果短横线后面的字符不是字母，而是其他标点，例如 min-.content，则最小宽度排版就会是下面这样，不会换行：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="88753823407152680000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`min-.content`, `88753823407152680000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title=""\n              >\n                \n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">min-.content</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>如果新加一对括号变成 min-.(content)，则由于前括号前面是点字符，不是字母和数字，因此前括号会中断字符单元，最小宽度排版效果是下面这样的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="84480808799719390000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`min-.\n(content)`, `84480808799719390000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title=""\n              >\n                \n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">min-.\n(content)</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>如果前括号前面的字符是字母或者数字，如 min-.2(content)，则不会发生换行：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="31635825206997680000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`min-.2(content)`, `31635825206997680000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title=""\n              >\n                \n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">min-.2(content)</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n</li>\n<li>\n<p>在 Firefox 浏览器中，英文问号（U+003F）不能中断字符单元，而短横线（U+002D）可以，不过后面的字符必须是字母而不能是数字。例如 min-content 字符在最小宽度下的排版是：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="82875124148695900000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`min-\ncontent`, `82875124148695900000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title=""\n              >\n                \n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">min-\ncontent</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>但是，如果短横线后面是数字，如 min-2content，则不会换行：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="34937569822658500000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`min-2content`, `34937569822658500000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title=""\n              >\n                \n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">min-2content</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>Firefox 浏览器中前括号的中断规则和 webkit 浏览器一致，这里就不重复介绍了。Firefox 浏览器还对斜杠（/）做了特别的中断处理，目的是优化 URL 地址的排版体验，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="52523898782347400000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<p>https://demo.cssworld.cn/new/3/3-1.php</p>`, `52523898782347400000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>https://demo.cssworld.cn/new/3/3-1.php<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>在 Chrome 浏览器和 Firefox 浏览器中的排版效果分别是：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="75430123912444410000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* Chrome 浏览器中 */\nhttps://demo.cssworld.cn/new/3/3-1.php\n/* Firefox 浏览器中 */\nhttps://demo.cssworld.cn/new/3/3-1.php`, `75430123912444410000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title=""\n              >\n                \n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">/* Chrome 浏览器中 */\nhttps://demo.cssworld.cn/new/3/3-1.php\n/* Firefox 浏览器中 */\nhttps://demo.cssworld.cn/new/3/3-1.php</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>至于从哪一处斜杠中断 URL 地址，是浏览器按照整体宽度最小、行数最少的算法进行计算的，因此不同的字符串的中断位置会有所不同。</p>\n</li>\n<li>\n<p>在 IE 浏览器和 Edge 浏览器中，英文问号（U+003F）不能中断字符单元，而短横线（U+002D）可以，但是要求短横线前后是由字母、数字或短横线组成的字符单元，且这个字符单元的长度要大于 1，例如 min-content 字符可以换行：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="52902730421602140000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`min-\ncontent`, `52902730421602140000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title=""\n              >\n                \n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">min-\ncontent</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>但是 m-content 就不会换行，因为虽然短横线前面是字母，但是只有一个字符：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="79996943797224570000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`m-content`, `79996943797224570000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title=""\n              >\n                \n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">m-content</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>m-i-n-content 可以换行，从前往后遍历短横线，m, i-n-content 不符合要求，m-i, n-content 和 m-i-n, content 符合要求，本着“宽度尽可能小，行数尽可能少”的原则，最终的排版是下面这样的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="75021809541490750000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`m-i-n\n-content`, `75021809541490750000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title=""\n              >\n                \n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">m-i-n\n-content</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>如果将前面几个短横线改成下划线 m<em>i</em>n-content，由于短横线前面符合“字母、数字或短横线”规则的字符只有 1 个 n，因此无法换行：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="59802506253257010000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`m_i_n-content`, `59802506253257010000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title=""\n              >\n                \n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">m_i_n-content</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>但是 m_in-content 就可以，短横线前面符合“字母、数字或短横线”规则的字符是 2 个（字符 in），因此可以换行：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="82407213262300610000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`m_in\n-content`, `82407213262300610000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title=""\n              >\n                \n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">m_in\n-content</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>在 IE 浏览器和 Edge 浏览器中，各种前括号也可以中断字符单元，而且无论前面的字符类型是字母数字还是标点，各种前括号都能中断字符单元，例如 min-.2(content) 的最小宽度排版是：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="53332821479058980000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`min-.2\n(content)`, `53332821479058980000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title=""\n              >\n                \n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">min-.2\n(content)</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>另外，在 IE 浏览器和 Edge 浏览器中，百分号（%）的前面也是百分号的时候也能中断字符单元。</p>\n</li>\n</ol>\n<p>可以看到，不同浏览器中的非 CJK 文字的字符单元的中断规则都不一样，但是不要紧张，我们平常是不会使用 min-content 关键字的，因为在实际开发中没有任何场景需要专门把一个元素设置为首选最小宽度。但是，学习 min-content 关键字的含义还是很有用的，因为我们在实际开发的时候会非常频繁地遇到 min-content 的表现场景。如果你不了解 min-content 关键字，就不明白为什么会有这样的行为表现。这一点在弹性布局和网格布局的学习过程中非常重要，因为在弹性布局中，尺寸不足是非常容易遇到的问题。就算抛开弹性布局不谈，平常普通的文本呈现也会用到 min-content 的相关知识，例如，我们经常遇到的连续英文字符不换行的问题：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="56188239032824310000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<style>\n   p {\n      width: 210px;\n      border: 1px solid deepskyblue;\n   }\n</style>\n<p>https://demo.cssworld.cn/new/3/3-1.php</p>`, `56188239032824310000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n   <span class="token selector">p</span> <span class="token punctuation">{</span>\n      <span class="token property">width</span><span class="token punctuation">:</span> 210px<span class="token punctuation">;</span>\n      <span class="token property">border</span><span class="token punctuation">:</span> 1px solid deepskyblue<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>https://demo.cssworld.cn/new/3/3-1.php<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>链接地址没有换行，而是跑到了容器的外部，如图 3-9 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-27-11-26-35-c2d5fc40243ef77c4c66c7b51e3d94da-7bb57.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 37.724550898203596%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAABFElEQVQY042Q646CMBCF+/6vpb+MZgOIgELLRbEqF9dIKWJ7tjVkNzG7yZ5Mmm+mPcmcErxJa3tGERwHiwVmM6xW+PiwredhPkeWIUlsyzmZLK/6UdPgxJHloBSMoSyRprbCEJcL8hyHA6Qk+I/GEXUNpd7G5NwNlRzP4lF+dqe7rAdlmN8lvwl71Y/HW9cvl7Jpur4fhJiivdIRlsRFUVRVFQSB53nXto3j2DCltNjv+bF0dnQdRlmeMcbMs5d3ikgcPwjT/AH0WvcK4qmFggGpDUMq1KN+6N/TkFaO1+F5f6JTtgwIPYGdaNv+4cX0YVL2Ztu2aTk/ue46ZWkSJ76/2W53ruvHCU0oM7DZRHXTfm/+BfOzxrQKLueIAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 27 11 26 35" title="" data-src="/static/2021-12-27-11-26-35-c2d5fc40243ef77c4c66c7b51e3d94da-fee1c.png" data-srcset="/static/2021-12-27-11-26-35-c2d5fc40243ef77c4c66c7b51e3d94da-a67b7.png 200w,\n/static/2021-12-27-11-26-35-c2d5fc40243ef77c4c66c7b51e3d94da-0b187.png 400w,\n/static/2021-12-27-11-26-35-c2d5fc40243ef77c4c66c7b51e3d94da-fee1c.png 800w,\n/static/2021-12-27-11-26-35-c2d5fc40243ef77c4c66c7b51e3d94da-7bb57.png 835w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>这是因为 content-box 的宽度不会小于首选最小宽度，所以字符内容跑到容器的外面去了。我们可以使用 word-break: break-all 或者 word-wrap: break-word 改变字符单元的中断规则，从而改变容器元素的首选最小宽度。但是，中断的效果不太理想，因为完整的英文单词被分开了，如图 3-10 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-27-11-27-33-a707c86e71c2a7a04ac126340ab5ff88-05a55.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 34.44976076555024%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA60lEQVQY03VRf0+DMBTk+3+v+c8SnEzaUZkDpUBHwZZRpPzokzINxs3mcrm+9PLuUgf+O8ZYxhhcF3Y7QAg8DzYbK+IYfB+SxJlfrbga1glA21oIYQ11DZyDlHbS96C1MwIMM4zladHjIsYfTFpDGMIw3IZzUFq8syKtZMw4Oka5uER5gU/xK82Tooqy8ynjg+7vNnMefIKDAL+EbzTduo8zi0vDyqoUspT1h5RUNp9zEjOZ71K/zFQ0vGm56krV0UpWqpuj6gX9tdHS4v7mP3elFCGkYGeWZYdDgBH2np4JCfd7P6Hp8gnr/i+ngJFOAWPNVwAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 27 11 27 33" title="" data-src="/static/2021-12-27-11-27-33-a707c86e71c2a7a04ac126340ab5ff88-fee1c.png" data-srcset="/static/2021-12-27-11-27-33-a707c86e71c2a7a04ac126340ab5ff88-a67b7.png 200w,\n/static/2021-12-27-11-27-33-a707c86e71c2a7a04ac126340ab5ff88-0b187.png 400w,\n/static/2021-12-27-11-27-33-a707c86e71c2a7a04ac126340ab5ff88-fee1c.png 800w,\n/static/2021-12-27-11-27-33-a707c86e71c2a7a04ac126340ab5ff88-05a55.png 836w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>对于这个问题，一种解决方法是使用 hyphen 属性优化；另外一种解决方法就是使用 <code class="language-text">&lt;wbr&gt;</code> 标签。不过这两种方法非本节重点，因此不在这里展开介绍，详见之后介绍。</p>\n<h3 id="最终的首选最小宽度"><a href="#%E6%9C%80%E7%BB%88%E7%9A%84%E9%A6%96%E9%80%89%E6%9C%80%E5%B0%8F%E5%AE%BD%E5%BA%A6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>最终的首选最小宽度</h3>\n<p>一个元素最终的首选最小宽度是所有内部子元素中最大的那个首选最小宽度值。例如：</p>\n<html><head></head><body><div class="gatsby-code-button-container" data-toaster-id="88064921244945000000" data-toaster-class="gatsby-code-button-toaster" data-toaster-text-class="gatsby-code-button-toaster-text" data-toaster-text="复制成功" data-toaster-duration="3500" onclick="copyToClipboard(`<section>\n   <img data-src=&quot;./1.jpg&quot; />\n   <p>感谢您的支持</p>\n   <p>感谢您的支持！</p>\n   <p>感谢————————比心</p>\n   <p>https://demo.cssworld.cn/new/3/3-1.php</p>\n</section>`, `88064921244945000000`)">\n              <div class="gatsby-code-button" title="html">\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div></body></html>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>./1.jpg<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>感谢您的支持<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>感谢您的支持！<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>感谢————————比心<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>https://demo.cssworld.cn/new/3/3-1.php<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>每个 <code class="language-text">&lt;img&gt;</code> 元素和 <code class="language-text">&lt;p&gt;</code> 元素都有一个首选最小宽度的值，这些值中最大的那个值就是 <code class="language-text">&lt;section&gt;</code> 元素的首选最小宽度，如图 3-11 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-27-11-32-35-3fc1d253d4d7d55dda9698a3d533faa9-cb2f0.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 44.19551934826884%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA7ElEQVQoz5WQQW7CMBBFcxfO0yuw4Axd9Rgcgk2XBVUVCSGggNouWkAksCGi0ADBKQ1J3ST2jDEKQgKBRL7Go7H+f2PJijgXypNweH8slYuF57qWCBEk/GCcSrkMC25VHp7u70a9N3ndpnAjvNd/yrwgynalKCIu8sHLn999HCA3HDM293wxnwnHSSdOxDAHnDDukg1sA/RJ7C7yvcwAJyt/HVLyFy9DGrKrH4aZzgwZB0TAAyMDAJANx66omj79mnmEUEote9wfWEPL/nYXerNV1wxVa8pq6K2Pz3619mK0u4OhbXZe1YZhmt0dO0wDebvy11QAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 27 11 32 35" title="" data-src="/static/2021-12-27-11-32-35-3fc1d253d4d7d55dda9698a3d533faa9-fee1c.png" data-srcset="/static/2021-12-27-11-32-35-3fc1d253d4d7d55dda9698a3d533faa9-a67b7.png 200w,\n/static/2021-12-27-11-32-35-3fc1d253d4d7d55dda9698a3d533faa9-0b187.png 400w,\n/static/2021-12-27-11-32-35-3fc1d253d4d7d55dda9698a3d533faa9-fee1c.png 800w,\n/static/2021-12-27-11-32-35-3fc1d253d4d7d55dda9698a3d533faa9-cb2f0.png 982w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/s7qlth?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>最后再补充一句，随着浏览器的迭代，首选最小宽度规则的细节可能会发生变化。</p>\n<h2 id="快速了解-max-content-关键字"><a href="#%E5%BF%AB%E9%80%9F%E4%BA%86%E8%A7%A3-max-content-%E5%85%B3%E9%94%AE%E5%AD%97" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>快速了解 max-content 关键字</h2>\n<p>max-content 关键字表示最大内容宽度，max-content 关键字的作用是让元素尽可能大，保证图文内容在一行显示，哪怕最终的宽度溢出外部容器元素。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="89367513524955660000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<div class=&quot;container&quot;>\n   <p>可以让元素尽可能的大，保证图文内容在一行显示</p>\n</div>\n<style>\n   .container {\n      border: solid deepskyblue;\n   }\n\n   .container > p {\n      width: max-content;\n   }\n</style>`, `89367513524955660000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>可以让元素尽可能的大，保证图文内容在一行显示<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n   <span class="token selector">.container</span> <span class="token punctuation">{</span>\n      <span class="token property">border</span><span class="token punctuation">:</span> solid deepskyblue<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">.container > p</span> <span class="token punctuation">{</span>\n      <span class="token property">width</span><span class="token punctuation">:</span> max-content<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>最终的效果如图 3-12 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-27-11-36-57-ebff747b7b55eb71fa47fed27f15608b-6604a.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 24.64622641509434%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsSAAALEgHS3X78AAAA20lEQVQY01WKy26DMBBF+f+P6r4bSHgEQxxqCFACpq1c3h7P1G6VRa+ORkf3jvcyQrFgNmOq9C/AlGYKsslY8gXz2Qn7Bgufja9wOIgIDaL3WrRftZDvDY/PRZrwOCpzNtTiEvgVz/dlknV1S8KCJX1TlWmUiDp/jNeMvQnhBQrVAXIzcoNxt+L848B+2eVqGyNX3S/HsGrbf26aT/BYgQxoAK/dqXlS79QBPQy1h7s9OgYLObGT/ekOAqS/ePQMouuGrhP8Nit1FyXPsvB0Dnz/EsWhf7qXJf3PDxUgF1y58JbBAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 27 11 36 57" title="" data-src="/static/2021-12-27-11-36-57-ebff747b7b55eb71fa47fed27f15608b-fee1c.png" data-srcset="/static/2021-12-27-11-36-57-ebff747b7b55eb71fa47fed27f15608b-a67b7.png 200w,\n/static/2021-12-27-11-36-57-ebff747b7b55eb71fa47fed27f15608b-0b187.png 400w,\n/static/2021-12-27-11-36-57-ebff747b7b55eb71fa47fed27f15608b-fee1c.png 800w,\n/static/2021-12-27-11-36-57-ebff747b7b55eb71fa47fed27f15608b-6604a.png 848w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/y338i3?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>max-content 关键字和 min-content 关键字的兼容性一样，IE 浏览器和 Edge 浏览器都不支持，其他浏览器都支持，因此这两个关键字在移动端项目中是可以放心使用的。不过实际开发中却没有任何场景必须要使用 max-content 关键字。理论上，满足以下条件的场景是可以体现 max-content 关键字的价值的。</p>\n<ol>\n<li>各项宽度不确定，整体宽度自适应。</li>\n<li>当前项的内容较少。</li>\n<li>当前项的宽度需要尽可能的小。</li>\n</ol>\n<p>表格布局、弹性布局和网格布局都可以满足上述条件，但是很遗憾，这些布局自带与内容相关的尺寸规则，在大多数时候，给子项设置 width: max-content 是没有任何效果的。同时所有需要使用 max-content 关键字的场景，都能使用 white-space: nowrap 声明实现一模一样的效果，并且 white-space: nowrap 的兼容性更好，所以实际上 max-content 关键字没有任何实用价值。但是，当遇到合适的场景时，我还是推荐大家使用 width: max-content，而不是 white-space: nowrap。因为使用 width: max-content 更有档次，可以彰显自己的 CSS 技术深度。另外，我认为 max-content 关键字最大的作用还是其概念本身，抽象出这样一个关键字，能帮助我们更好地理解 CSS 新世界的尺寸体系。</p>\n<p>最后，对 CSS 新的尺寸体系做一个总结。带 content 这个单词的 3 个关键字 fit-content、min-content 和 max-content 都是“内在尺寸”（intrinsic sizing），尺寸表现和内容相关；stretch 关键字（也包括 available 关键字和 fill-available 关键字）是“外在尺寸”（extrinsicsizing），尺寸表现和上下文有关。这 4 个关键字一起撑起了 CSS 世界的尺寸体系。</p>\n<h1 id="深入了解-css-逻辑属性"><a href="#%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3-css-%E9%80%BB%E8%BE%91%E5%B1%9E%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>深入了解 CSS 逻辑属性</h1>\n<p>整个 CSS 世界就是围绕“流”来构建的。在 CSS2.1 时代，CSS 属性的定位都是基于方向的，而不是“流”。这样的设计其实是有问题的，基于方向进行定位虽然符合现实世界认知，但和 CSS 世界基于“流”的底层设计理念不符，这样就会产生不合理的问题。举个例子，有两个按钮，HTML 代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="95300707815653300000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<p>\n   <button>\n      确定\n   </button>\n   <button>\n      取消\n   </button>\n</p>`, `95300707815653300000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">></span></span>\n      确定\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">></span></span>\n      取消\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>这两个按钮是左对齐按钮，因为彼此之间需要一点间距，所以就设置了下面这样的 CSS：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="73640044549881850000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`button {\n   margin-right: 10px;\n}`, `73640044549881850000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">button</span> <span class="token punctuation">{</span>\n   <span class="token property">margin-right</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>其中，margin-right 就是一个基于方向的 CSS 属性，因为 right 表示右侧，和现实世界的右侧匹配。</p>\n<p>通常情况下，我们这么使用是不会有任何问题的。但是，如果开发者使用 direction 属性改变了文档的水平流向，希望按钮从右往左排列，这段 CSS 声明就会有预期之外的表现，示例如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="56958946068139114000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`p {\n   background-color: deepskyblue;\n   direction: rtl;\n}`, `56958946068139114000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">p</span> <span class="token punctuation">{</span>\n   <span class="token property">background-color</span><span class="token punctuation">:</span> deepskyblue<span class="token punctuation">;</span>\n   <span class="token property">direction</span><span class="token punctuation">:</span> rtl<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>此时 margin-right 产生的 10px 间隙就不是我们想要的，如图 3-13 所示。margin-left: 10px 才是我们想要的。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-28-09-55-40-e3056dfd41a1683223d4ce1cd80a04b1-40f0e.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 21.034077555816687%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsSAAALEgHS3X78AAAA50lEQVQI1y2LvUrDUBxH8xjuDroIgs/ga9jBRRBHi+4OnX0URz9wEqFRLCnNxyU3ufemmNy0uQlUTNIm/59KPZzlDMfKPefZEw8s+WTu8Ud3YOPoDYc2dsfYG2Pfxs4rngwBfRfF4BxhCCnhutDauuXfo7AZ8faG1ReMzgM68+kq7N9ldqdWj6K4T6qJMqhMFwTk++Q4NJ3C8zCbWZccQ45rgQHDwMcpwwnDMKKF5C9z48SJE88nX/ilJ/xDhPUam421zSrXbVn0bd1UpimXdWlSnedZlqV/6jSNhJQqESqJpVosi+31A0utzgyp+NpxAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 28 09 55 40" title="" data-src="/static/2021-12-28-09-55-40-e3056dfd41a1683223d4ce1cd80a04b1-fee1c.png" data-srcset="/static/2021-12-28-09-55-40-e3056dfd41a1683223d4ce1cd80a04b1-a67b7.png 200w,\n/static/2021-12-28-09-55-40-e3056dfd41a1683223d4ce1cd80a04b1-0b187.png 400w,\n/static/2021-12-28-09-55-40-e3056dfd41a1683223d4ce1cd80a04b1-fee1c.png 800w,\n/static/2021-12-28-09-55-40-e3056dfd41a1683223d4ce1cd80a04b1-40f0e.png 851w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>但是，如果我们一开始设置的不是符合现实世界认知的 margin-right 属性，而是符合 CSS 世界“流”概念的逻辑属性 margin-inline-end，代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="47233362308592880000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`button {\n   margin-inline-end: 10px;\n}`, `47233362308592880000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">button</span> <span class="token punctuation">{</span>\n   <span class="token property">margin-inline-end</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>那么我们使用 direction 属性改变文档的水平流向是不会出现布局上的任何问题的，如图 3-14 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-28-09-57-19-64fc560c6f5bfe92536f99538cffb30c-c7bf1.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 20.070422535211264%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA6klEQVQI1yWLQU6DQBhGuYYHcO3ChXoTV8aVRzBudGMTV0bjDdx7AS9gNNIIlBkCQqTDFBiobdUyIQX+zzF+eYsveXnWMvQeQzkJ35+CZP8NezYdjLFrY/sVOza2numuAH5WfZpCSgiBqoL5dY2ytC7i/izqT6P+hHdHnI45HTKch22STh8+VnY8/VQ1inxgjHyfXJcYQxSBcziOdZvhRuBaYmQQuJK4nOG+HJq5eql0qapNswYRzIbhj75D16FtobX1L/Ri/i0SrJcLmVYh/8qzvFBqJk2cisz1+YQFHgtsxwuiuNHaJET0C2fBzypQXR8AAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 28 09 57 19" title="" data-src="/static/2021-12-28-09-57-19-64fc560c6f5bfe92536f99538cffb30c-fee1c.png" data-srcset="/static/2021-12-28-09-57-19-64fc560c6f5bfe92536f99538cffb30c-a67b7.png 200w,\n/static/2021-12-28-09-57-19-64fc560c6f5bfe92536f99538cffb30c-0b187.png 400w,\n/static/2021-12-28-09-57-19-64fc560c6f5bfe92536f99538cffb30c-fee1c.png 800w,\n/static/2021-12-28-09-57-19-64fc560c6f5bfe92536f99538cffb30c-c7bf1.png 852w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>margin-inline-end 是一个“流淌”在文档流中的 CSS 逻辑属性，表示内联元素文档流结束的方向。也就是说，当文档流的方向是从左往右的时候，margin-inline-end 属性的渲染表现就等同于 margin-right 属性；当文档流的方向是从右往左的时候，margin-inline-end 属性的渲染表现就等同于 margin-left 属性。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/5q8807?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<h2 id="css-逻辑属性有限的使用场景"><a href="#css-%E9%80%BB%E8%BE%91%E5%B1%9E%E6%80%A7%E6%9C%89%E9%99%90%E7%9A%84%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>CSS 逻辑属性有限的使用场景</h2>\n<p>CSS 逻辑属性需要配合 writing-mode 属性、direction 属性或者 text-orientation 属性使用才有意义。</p>\n<p>CSS 中还有其他一些 CSS 属性值也可以改变 DOM 元素的呈现方向，例如 flex-direction 属性中的属性值 row-reverse 和 column-reverse，但是请注意，这些属性值和 CSS 逻辑属性之间没有任何关系。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="43338195068848190000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<div class=&quot;flex&quot;>\n   <div class=&quot;item&quot;>1</div>\n   <div class=&quot;item&quot;>2</div>\n   <div class=&quot;item&quot;>3</div>\n</div>\n<style>\n   .flex {\n      display: flex;\n      flex-direction: row-reverse;\n   }\n\n   .item {\n      flex: 1;\n      padding: 40px;\n      border-inline-start: 1rem solid deepskyblue;\n      background-color: azure;\n   }\n</style>`, `43338195068848190000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html{9,15}"\n              >\n                <span class="gatsby-code-button-language">html{9,15}</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight has-highlighted-lines" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>flex<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n   <span class="token selector">.flex</span> <span class="token punctuation">{</span>\n      <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>\n<span class="gatsby-highlight-code-line">      <span class="token property">flex-direction</span><span class="token punctuation">:</span> row-reverse<span class="token punctuation">;</span></span>   <span class="token punctuation">}</span>\n\n   <span class="token selector">.item</span> <span class="token punctuation">{</span>\n      <span class="token property">flex</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>\n      <span class="token property">padding</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>\n<span class="gatsby-highlight-code-line">      <span class="token property">border-inline-start</span><span class="token punctuation">:</span> 1rem solid deepskyblue<span class="token punctuation">;</span></span>      <span class="token property">background-color</span><span class="token punctuation">:</span> azure<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>结果如图 3-15 所示，虽然 .item 从右往左呈现，但是 border-inline-start 属性表示的依然是左边框。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-28-10-06-31-89f4b2f7bbc7174ab8795928eb026f3a-3c344.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 32.31850117096019%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsSAAALEgHS3X78AAAA5klEQVQY00WPPU4DQQyF92DQ5Ap0FKRIgdIjQcGBQHQIcQ2aCAWQUBr+ksn8D7PZmZ3H2JsNlgv76X16dnP6jO+MABhAFxTgQeF6hZ5XC6gqAZfveFQ0DOLQzfETPjIcmcqW4RuB81eCZdmLtaZL3Aoa6qqx72bCsAd+YlynXJ3VNH9jGPgMQfREz15wx/C6SyJlM8BHY7I8JG/+k6soOPlsSRfVqqs6JJ8s8MXJbvz5XuFqRT5bSLcMX4w/W/7ZcDe7nqScszZm13UppdC2Pra/MfoQnPdS6a2UynllrLVOG1tN4PoDfrJRQOHWVHcAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 28 10 06 31" title="" data-src="/static/2021-12-28-10-06-31-89f4b2f7bbc7174ab8795928eb026f3a-fee1c.png" data-srcset="/static/2021-12-28-10-06-31-89f4b2f7bbc7174ab8795928eb026f3a-a67b7.png 200w,\n/static/2021-12-28-10-06-31-89f4b2f7bbc7174ab8795928eb026f3a-0b187.png 400w,\n/static/2021-12-28-10-06-31-89f4b2f7bbc7174ab8795928eb026f3a-fee1c.png 800w,\n/static/2021-12-28-10-06-31-89f4b2f7bbc7174ab8795928eb026f3a-3c344.png 854w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/blm9tu?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>writing-mode、direction 和 text-orientation 属性都不是常用 CSS 属性，这就导致 CSS 逻辑属性的使用场景非常有限。有些人可能会说，平常使用 margin-inline-end 属性代替 margin-right 属性不就好了？对，但是这样做没有必要，因为 margin-right 属性兼容性更好，且更容易理解，再怎么考虑也不会想到使用 margin-inline-end 属性代替。</p>\n<p>当然，也存在非常适合使用 CSS 逻辑属性的场景，那就是对称布局，例如，图 3-16 所示的模拟微信对话的效果就是典型的对称布局。</p>\n<p>这种布局效果使用 CSS 逻辑属性实现会有较好的体验，因为我们只需要使用 CSS 逻辑属性实现一侧的布局效果，然后另外一侧的布局效果我们只需要使用一句 direction: rtl 就完成了，代码超级简洁：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="36358840986659490000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<section>\n   <!-- 其他 HTML -->\n</section>\n<section data-self>\n   <!-- 自己对话内容，和上面 HTML 一样 -->\n</section>\n<style>\n   [data-self] {\n      direction: rtl;\n   }\n</style>`, `36358840986659490000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span><span class="token punctuation">></span></span>\n   <span class="token comment">&lt;!-- 其他 HTML --></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">data-self</span><span class="token punctuation">></span></span>\n   <span class="token comment">&lt;!-- 自己对话内容，和上面 HTML 一样 --></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n   <span class="token selector">[data-self]</span> <span class="token punctuation">{</span>\n      <span class="token property">direction</span><span class="token punctuation">:</span> rtl<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-28-10-11-37-e6490df2756fce2f79490366412753ae-954b4.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 348px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 93.67816091954022%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAIAAAAf7rriAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACWklEQVQ4y5WTy27TQBSG8xywROIRWCMkJF4F2i0rdmyo2sCKHfQihEAsWqmqACmhTWmahJTmQlBTl9yaXnwZe2Y8viVOxhNO4iaiIZHSY+vo2NY/35nxfyK9QYiArx/hdFVHiqxqiA6CEGIYBh4G1L7v9/6JiAjFgt9dUp5uKD5DGjJkWW42m5qmMcZAg1B/OXhst9vXxCPySU1WNEwJLhaKqVQ6Ho9nMhlJkgqFQqPR8DxPUZTJ4m6XY+pj6pqmCQR9GGFtWdY0cr/xLu9Z1Wek+fFCAbEKAmMYUEPb4UKTxZz37Px9p75wqbnYQKFmLKbumfOg1eVu28eGDp3fTByI4P3rtcSXbRmhs/OLCdKJYiH6bYueeHjvUfT5S6hVVdVnFF+Rg8BhxLZM13UJxuEJzSoWnH9IFr+XTpCqKeASY9a2Q5MED5Y+LWylHGKUJYkxC//Hn2oSIDcvFSCCn8GYzGIG1pGujW5qklbLG/f20GFdCtYfEExi2dh3qG8TyB3T8IjWksrV5ZVVsPpgEMTYf+bQI1xYp6fo6HM9unm8uFWNbkqL679ffD1/tbwRvX3rTqVWC0/32lQBGXaogjE1UlFz747n3+SerJbmV4pzb3Nza+XHJXn7j1T3Wm5IDuHDPQvR6XRgCci8w0UwcG2YB0XQDcBII+YVud32Pa8FUwUnaTLLth3Lsh3XtR3Htm14hpEyWf8DpSa8JIS6nkcoBUzktHlWqdYQMqq1eiyeyGR/JnaTqXQ2X/gVi+9kD3I/Dg6T+xnIO4m9VCYb+5Y4zBd29/YpY38BG+EWWEmYTp4AAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 28 10 11 37" title="" data-src="/static/2021-12-28-10-11-37-e6490df2756fce2f79490366412753ae-954b4.png" data-srcset="/static/2021-12-28-10-11-37-e6490df2756fce2f79490366412753ae-99c83.png 200w,\n/static/2021-12-28-10-11-37-e6490df2756fce2f79490366412753ae-954b4.png 348w" data-sizes="(max-width: 348px) 100vw, 348px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/ilehdw?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>那么问题来了，既然 CSS 逻辑属性使用场景比较有限，那我们还要不要学呢？当然要学，因为学习它的成本实在是太低了，所以投入产出比其实还不错。</p>\n<h2 id="inline--block-与-start--end-元素"><a href="#inline--block-%E4%B8%8E-start--end-%E5%85%83%E7%B4%A0" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>inline / block 与 start / end 元素</h2>\n<p>只要理解了本节的 inline / block 与 start / end，CSS 逻辑属性就算学完了，因为所有 CSS 逻辑属性都是围绕 inline / block 与 start / end 展开的。</p>\n<p>以 margin 属性为例，在中文或英文网页环境中，默认情况下，margin 方位属性和 margin 逻辑属性相互的映射关系如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="61414555734817554000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`margin-left   == margin-inline-start\nmargin-top    == margin-block-start\nmargin-right  == margin-inline-end\nmargin-bottom == margin-block-end`, `61414555734817554000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title=""\n              >\n                \n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">margin-left   == margin-inline-start\nmargin-top    == margin-block-start\nmargin-right  == margin-inline-end\nmargin-bottom == margin-block-end</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>其中，inline / block 表示方向，start / end 表示起止方位。</p>\n<p>在中文和英文网页环境中，inline 元素（文字、图片、按钮等）默认是从左往右水平排列的；block 元素（如 <code class="language-text">&lt;div&gt;</code>、<code class="language-text">&lt;p&gt;</code> 元素等）默认是从上往下垂直排列的。因此，margin-inline-start 就表示内联元素排列方向的起始位置，即“左侧”；margin-inline-end 就表示内联元素排列方向的终止位置，即“右侧”。</p>\n<p>如果设置 direction: rtl，则水平文档流方向就是从右往左，此时 start 对应的就是“右侧”，end 对应的就是“左侧”。如果设置 writing-mode: vertical-rl 属性，把文档流改为垂直且从右往左排列，则此时内联元素是从上往下排列的。inline 指的是垂直方向，block 指的是水平方向，margin 方位属性和 margin 逻辑属性相互映射关系就变成了下面这样：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="60840765785925120000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* writing-mode: vertical-rl 环境下 */\nmargin-left   == margin-block-end\nmargin-top    == margin-inline-start\nmargin-right  == margin-block-start\nmargin-bottom == margin-inline-end`, `60840765785925120000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title=""\n              >\n                \n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">/* writing-mode: vertical-rl 环境下 */\nmargin-left   == margin-block-end\nmargin-top    == margin-inline-start\nmargin-right  == margin-block-start\nmargin-bottom == margin-inline-end</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>如果对上面的映射关系存疑，可以查看以下 demo</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/1ds17s?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>下面快速介绍一下可能会用到的 CSS 逻辑属性和 CSS 逻辑属性值。</p>\n<h2 id="width--height-属性与-inline-size--block-size-逻辑属性"><a href="#width--height-%E5%B1%9E%E6%80%A7%E4%B8%8E-inline-size--block-size-%E9%80%BB%E8%BE%91%E5%B1%9E%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>width / height 属性与 inline-size / block-size 逻辑属性</h2>\n<p>在中文或英文网页环境中，默认情况下，width 属性对应的 CSS 逻辑属性是 inline-size，height 属性对应的 CSS 逻辑属性是 block-size。</p>\n<p>width 属性新支持的几个关键字属性值也可以作为 inline-size 的属性值，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="16260469429847757000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 浏览器支持 */\ninline-size: fit-content;\ninline-size: min-content;\ninline-size: max-content;`, `16260469429847757000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 浏览器支持 */</span>\n<span class="token property">inline-size</span><span class="token punctuation">:</span> fit-content<span class="token punctuation">;</span>\n<span class="token property">inline-size</span><span class="token punctuation">:</span> min-content<span class="token punctuation">;</span>\n<span class="token property">inline-size</span><span class="token punctuation">:</span> max-content<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>除了 width 属性和 height 属性，min-width、min-height、max-width 和 max-height 也都有对应的 CSS 逻辑属性，示例如下：</p>\n<ul>\n<li>min-inline-size</li>\n<li>min-block-size</li>\n<li>max-inline-size</li>\n<li>max-block-size</li>\n</ul>\n<h3 id="兼容性"><a href="#%E5%85%BC%E5%AE%B9%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>兼容性</h3>\n<p>inline-size 和 block-size 属性的兼容性如表 3-1 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-28-10-47-04-5a654aa718da264cf4d82c46910faf9a-3f6d7.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 29.181494661921707%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABRklEQVQY0w3KyU7CQAAA0H65P2BiiPHgyaMe1JgYuSiRBKNRBAShFLpRpoXZOm2ZLrNUqFze6RmeF8RJxnkerENEYtfzLWsZRpsNJPOFMxz/jifm4GeKCR2Np9/Dycy0FrY3M48Ehpa80bmodrUutOBSl3/NXsjioEotK63zpim1LmrFm32hBFcy39fqcCyCGysCWg4hWdTuW08jR24m9PUq5263fRt+3KwTfPKypXHYsVHrbSs40FWygPd29FXL1DBxdOkgKcjz97Q3d8XKtM7O5S647j8u5w8kjU97UZKhnh1evANVQlnGg8Vd57MrCmpQ6NY7kNCAQpthl9AVYoCSgEEbQp8RbwdnaRxgMEuhSYmPtg4MvQ2YU+wZGPlaMYr9qsCixBg6okCMrtIEVAXE2Ms5yhKAoKskYzRIGagV0zKWFfkH6es/sz3nxSQAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 28 10 47 04" title="" data-src="/static/2021-12-28-10-47-04-5a654aa718da264cf4d82c46910faf9a-fee1c.png" data-srcset="/static/2021-12-28-10-47-04-5a654aa718da264cf4d82c46910faf9a-a67b7.png 200w,\n/static/2021-12-28-10-47-04-5a654aa718da264cf4d82c46910faf9a-0b187.png 400w,\n/static/2021-12-28-10-47-04-5a654aa718da264cf4d82c46910faf9a-fee1c.png 800w,\n/static/2021-12-28-10-47-04-5a654aa718da264cf4d82c46910faf9a-3f6d7.png 843w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>IE 浏览器和 Edge 浏览器并不支持这两个属性，而移动端目前全部支持这两个属性，很快就可以放心使用。接下来要介绍的几个 CSS 逻辑属性的兼容性也是类似的。</p>\n<h2 id="由-margin--padding--border-演变而来的逻辑属性"><a href="#%E7%94%B1-margin--padding--border-%E6%BC%94%E5%8F%98%E8%80%8C%E6%9D%A5%E7%9A%84%E9%80%BB%E8%BE%91%E5%B1%9E%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>由 margin / padding / border 演变而来的逻辑属性</h2>\n<p>margin 和 padding 属性对应的 CSS 逻辑属性很早就被支持了，最早可以追溯到 2008 年，然而当时使用的不是现在的语法，且只支持水平方向上的逻辑控制，同时需要添加私有前缀，如下所示：</p>\n<ul>\n<li>-webkit-margin-start、-webkit-margin-end；</li>\n<li>-webkit-padding-start、-webkit-padding-end。</li>\n</ul>\n<p>在规范稳定之后，margin、padding 和 border 属性一起，演变成了按照 inline / block 与 start / end 这几个关键字组合的新的 CSS 逻辑属性，无须私有前缀。新的 CSS 逻辑属性如下：</p>\n<ul>\n<li>margin-inline-start、margin-inline-end、margin-block-start、margin-block-end；</li>\n<li>padding-inline-start、padding-inline-end、padding-block-start、padding-block-end；</li>\n<li>border-inline-start、border-inline-end、border-block-start、border-block-end；</li>\n<li>border-inline-start-color、border-inline-end-color、border-block-start-color、border-block-end-color；</li>\n<li>border-inline-start-style、border-inline-end-style、border-block-start-style、border-block-end-style；</li>\n<li>border-inline-start-width、border-inline-end-width、border-block-start-width、border-block-end-width。</li>\n</ul>\n<p>现在还支持 CSS 逻辑属性的缩写语法，例如 margin-inline 属性是 margin-inline-start 属性和 margin-inline-end 属性的缩写，margin-block 属性是 margin-block-start 属性和 margin-block-end 属性的缩写。完整的 CSS 缩写逻辑属性如下：</p>\n<ul>\n<li>margin-inline、margin-block；</li>\n<li>padding-inline、padding-block；</li>\n<li>border-inline、border-block；</li>\n<li>border-inline-color、border-block-color；</li>\n<li>border-inline-style、border-block-style；</li>\n<li>border-inline-width、border-block-width。</li>\n</ul>\n<p>可以看到 CSS 缩写逻辑属性的数量是非常多的，但是，它们都是由传统的带有方位性质的 CSS 属性按照特定规则演变而来的，即把原来的 left、top、right、bottom 换成对应的 inline / block 与 start / end 并组合。</p>\n<h3 id="兼容性-1"><a href="#%E5%85%BC%E5%AE%B9%E6%80%A7-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>兼容性</h3>\n<p>margin/padding/border 相关的 CSS 逻辑属性的兼容性如表 3-2 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-28-10-57-33-0510472a0ec2c848718cff16f1b4f2f2-3f6d7.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 41.16251482799525%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAABjElEQVQY02VPy27TQBT1b/MPbAEJCXXBBjYIhERLJRALKgQNidOkdWyPxzOeh+fhcRLHHr+SmkERK87iPs655+peL4zifVUVpoxBkhGawBRClKQIZwQkcLlaB2EcgeT292Lu3y1X97P5EiQpIXQ2973pHx7P8fFvLo3ZxICy3PkRpmfyf3jD0I5DN/R2Gu3Y29OxPY5tdxwOde3IurG93U8n23fNNFnH9J09jadxaLuu8RiNBAtFQd4glQr84ccmhPHB/1yKX/7Xq93i0zco395mXNPnN5yLrLP8gbw3Ja621Ivju/Xie6T501Dzgl1c+xGG+MVLPfvy+udHtnl3GchnN8RJT64yIunYsuvZq2Vw39W5R0koBTAKHgzeFihDay1TRtw5CaMB50CxjWaB4BFHvspjTiOUPOB0JfPYi0Jf5omWsDnkIgdNxQsFC420gjIH1Y66v0qTMRLutlQJaDRqG9E20o15CVi5vixwZ5XRqVthCnxmlIR1xZUAthaCg3rPnbQ1mXO2jXLFH3KIrgTTIfUzAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 28 10 57 33" title="" data-src="/static/2021-12-28-10-57-33-0510472a0ec2c848718cff16f1b4f2f2-fee1c.png" data-srcset="/static/2021-12-28-10-57-33-0510472a0ec2c848718cff16f1b4f2f2-a67b7.png 200w,\n/static/2021-12-28-10-57-33-0510472a0ec2c848718cff16f1b4f2f2-0b187.png 400w,\n/static/2021-12-28-10-57-33-0510472a0ec2c848718cff16f1b4f2f2-fee1c.png 800w,\n/static/2021-12-28-10-57-33-0510472a0ec2c848718cff16f1b4f2f2-3f6d7.png 843w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>由于目前 Safari 浏览器并不支持 CSS 缩写逻辑属性，因此要慎用 CSS 缩写逻辑属性，最好使用包含 start 和 end 的基本 CSS 逻辑属性。</p>\n<h2 id="text-align-属性支持的逻辑属性值"><a href="#text-align-%E5%B1%9E%E6%80%A7%E6%94%AF%E6%8C%81%E7%9A%84%E9%80%BB%E8%BE%91%E5%B1%9E%E6%80%A7%E5%80%BC" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>text-align 属性支持的逻辑属性值</h2>\n<p>对 text-align 属性而言，演变的不是属性而是属性值。</p>\n<ul>\n<li>text-align: start</li>\n<li>text-align: end</li>\n</ul>\n<h3 id="兼容性-2"><a href="#%E5%85%BC%E5%AE%B9%E6%80%A7-2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>兼容性</h3>\n<p>text-align 支持 start 和 end 属性值的兼容性如表 3-3 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2021-12-28-10-59-58-062853e1f91a0bc5b50191b700d0f696-68451.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 35.857988165680474%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABV0lEQVQY0z1MT0+DMBTne3vQL7CLxi/gWS/GGF3mwcRkt8kGjAkrFAqjhQJjGzAobS1m8eXl5ff3aT4MMpoXZYmiGEC4BZ7jAiW6wINBuFwZy9X6W18aa3uH8cowF/pq8+OqzMbZalJKIccRQg78H44AY9y05z9FcnGJja64QI1zJiXjA5OCCzFwzscvikrZnFvGVJmPrmSCjzFFVH0EA9OSFL2hJKXh3HR04B93ZoHmNAfu7KUOFnpEphaqq/DNTqwANVW8rwAkn6cDOZRIM3B8bWenJn2Y6e8WrOcf8H6Sn7zJ012/mz3b+c00EB25mkavZiT7nO71x69bFEesyzRCfLVVEULfJBjgyAmdZU6Drb/AeEsSF4VWSSEAehSu90UYQMteL6BnVAXSdrHL+zwjXrWPujZT/WEoaeq3p7SpCc181lF1z03atSlOXNblYiiHvqiPyS+y4XxxEwdwAwAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2021 12 28 10 59 58" title="" data-src="/static/2021-12-28-10-59-58-062853e1f91a0bc5b50191b700d0f696-fee1c.png" data-srcset="/static/2021-12-28-10-59-58-062853e1f91a0bc5b50191b700d0f696-a67b7.png 200w,\n/static/2021-12-28-10-59-58-062853e1f91a0bc5b50191b700d0f696-0b187.png 400w,\n/static/2021-12-28-10-59-58-062853e1f91a0bc5b50191b700d0f696-fee1c.png 800w,\n/static/2021-12-28-10-59-58-062853e1f91a0bc5b50191b700d0f696-68451.png 845w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h2 id="最有用的-css-逻辑属性-inset"><a href="#%E6%9C%80%E6%9C%89%E7%94%A8%E7%9A%84-css-%E9%80%BB%E8%BE%91%E5%B1%9E%E6%80%A7-inset" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>最有用的 CSS 逻辑属性 inset</h2>\n<p>使用绝对定位的时候经常会用到 left、top、right、bottom 等属性。同样，在 CSS 新世界中也有与之相对应的 CSS 逻辑属性，全部都是以 inset 开头，这其中包括：</p>\n<ul>\n<li>inset-inline-start</li>\n<li>inset-inline-end</li>\n<li>inset-block-start</li>\n<li>inset-block-end</li>\n</ul>\n<p>也包括水平方位或者垂直方位的缩写：</p>\n<ul>\n<li>inset-inline</li>\n<li>inset-block</li>\n</ul>\n<p>还包括完整的缩写：</p>\n<ul>\n<li>inset</li>\n</ul>\n<p>以上属性中最有用的当属 inset 属性，在使用绝对定位或固定定位的时候，我们经常会使用下面的 CSS 代码：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="73099388896709150000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.overlay {\n   position: absolute;\n   left: 0;\n   top: 0;\n   right: 0;\n   bottom: 0;\n}`, `73099388896709150000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.overlay</span> <span class="token punctuation">{</span>\n   <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n   <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n   <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n   <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n   <span class="token property">bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>有了 inset 属性，事情就简单多了：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="93300981523862490000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.overlay {\n   position: absolute;\n   inset: 0;\n}`, `93300981523862490000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.overlay</span> <span class="token punctuation">{</span>\n   <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n   <span class="token property">inset</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>这就很有意思了，CSS 大多数的逻辑属性在平时开发过程中都用不到，只有一个例外，那就是 inset 属性。inset 属性有两大特点，一个是逻辑，另一个是缩写。当然，逻辑就是摆设，平常根本用不到。但是缩写实在是太诱人了，因为绝对定位元素在 4 个方向上同时定位是很常见的，每次都要写 4 个属性真的很麻烦。inset 属性谁用了都说好，以后一定会成为热门的 CSS 属性。</p>\n<p>目前阻碍 inset 属性普及的唯一因素就是兼容性，主要问题出在 Safari 浏览器。在我写本书的时候，Safari 浏览器不支持所有缩写逻辑属性，希望本书出版后能看到 Safari 浏览器支持这些缩写逻辑属性的好消息。最后提一句，inset 属性支持的值的数量范围是 1 ～ 4，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="32643555124623913000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.overlay {\n   inset: 100px;\n   inset: 100px 200px;\n   inset: 100px 200px 300px;\n   inset: 100px 200px 300px 400px;\n}`, `32643555124623913000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.overlay</span> <span class="token punctuation">{</span>\n   <span class="token property">inset</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>\n   <span class="token property">inset</span><span class="token punctuation">:</span> 100px 200px<span class="token punctuation">;</span>\n   <span class="token property">inset</span><span class="token punctuation">:</span> 100px 200px 300px<span class="token punctuation">;</span>\n   <span class="token property">inset</span><span class="token punctuation">:</span> 100px 200px 300px 400px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>不同数量的值所表示的方位和 margin、padding 等属性一样，这里不再赘述。</p>\n<p>虽然前面几节列举了很多 CSS 逻辑属性，但是这不是全部，还有很多其他 CSS 逻辑属性或者 CSS 逻辑属性值，如 scroll-margin、scroll-padding，以及它们衍生出的十几个 CSS 逻辑属性，以及 float 属性和 clear 属性支持的 inline-start 和 inline-end 逻辑属性值等。CSS 逻辑属性大同小异，这里就不一一展开说明了。</p>\n<h1 id="在-css-边框上做文章"><a href="#%E5%9C%A8-css-%E8%BE%B9%E6%A1%86%E4%B8%8A%E5%81%9A%E6%96%87%E7%AB%A0" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>在 CSS 边框上做文章</h1>\n<p>一个图形元素的装饰部件主要是边框和背景。在 CSS2.1 时代，边框只能是纯色的，效果太单调了。于是 CSS 规范制定者就开始琢磨，是不是可以在 CSS 边框上做文章，通过支持图片显示来增强边框的表现力呢？</p>\n<h2 id="昙花一现的-css-多边框"><a href="#%E6%98%99%E8%8A%B1%E4%B8%80%E7%8E%B0%E7%9A%84-css-%E5%A4%9A%E8%BE%B9%E6%A1%86" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>昙花一现的 CSS 多边框</h2>\n<p>浏览器对多边框曾经支持过一段时间，语法示意如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="82331508028266560000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.example {\n   border-right: 8px solid;\n   border-right-colors: #555 #666 #777 #888 #999 #aaa #bbb #ccc;\n}`, `82331508028266560000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.example</span> <span class="token punctuation">{</span>\n   <span class="token property">border-right</span><span class="token punctuation">:</span> 8px solid<span class="token punctuation">;</span>\n   <span class="token property">border-right-colors</span><span class="token punctuation">:</span> #555 #666 #777 #888 #999 #aaa #bbb #ccc<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>这样一条渐变边框效果就出来了。可能是因为这一功能不实用，它已经从规范中被剔除了，现在没有任何浏览器支持这种语法。想要实现类似的效果，可以使用 box-shadow 或者 border-image 属性。</p>\n<h2 id="独一无二的-border-image-属性"><a href="#%E7%8B%AC%E4%B8%80%E6%97%A0%E4%BA%8C%E7%9A%84-border-image-%E5%B1%9E%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>独一无二的 border-image 属性</h2>\n<p>所有与装饰有关的 CSS 属性都能从其他设计软件中找到对应的功能，如背景、描边、阴影，甚至滤镜和混合模式，但是唯独 border-image 属性是 CSS 这门语言独有的，就算其他软件有边框装饰，也不是 border-image 这种表现机制。</p>\n<p>这看起来是件好事情，你瞧，border-image 多么与众不同！但实际上，border-image 属性很少出现在项目代码中，其中重要的原因之一就是 border-image 属性过于特殊。</p>\n<ol>\n<li>对开发者而言，border-image 属性怪异的渲染机制，导致学习成本较高，掌握 border-image 属性的人并不多。而且很多时候该属性对源图像的规格和比例也有要求，这导致使用成本也比较高。</li>\n<li>对设计师而言，border-image 属性的视觉表现和现实认知是不一致的，而设计师的视觉设计多基于现实认知，因此，设计师无法为 border-image 属性量身定制图形表现。另外，当下的设计趋势是扁平化而非拟物化，边框装饰通常在项目中不会出现。</li>\n<li>border-image 属性怪异的渲染机制导致元素的 4 个边角成了 4 个尴尬的地方，实现的边框效果往往不符合预期，最终导致开发者放弃使用 border-image 属性。</li>\n</ol>\n<p>至于 border-image 属性这么渲染的原因和 border-image 属性很少使用的另外一个重要原因将在之后介绍。</p>\n<p>总而言之，border-image 属性是一个颇有故事的 CSS 属性，我对 border-image 属性的感情也颇为复杂，恨铁不成钢，内心十分矛盾，既希望人人都熟练掌握这个很酷的 CSS 属性，又担心带大家入坑后发现它无用武之地。</p>\n<p>因此，大家接下来学习 border-image 属性的时候，就保持一个从容的心态，看懂了自然最好，看不懂也没关系。大家只需要知道 border-image 属性大致是怎么回事，可以用在什么场景，等哪天遇到了类似的场景，能够条件反射般想到使用 border-image 属性来实现就可以了。当然，我也会尽量以最简单的语言把 border-image 属性讲清楚，方便大家一遍就看懂。</p>\n<p>为了方便接下来的学习，我们约定后续所有 .example 元素都包含下面的公共 CSS 代码：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="61096676054965070000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.example {\n   width: 80px;\n   height: 80px;\n   border: 40px solid deepskyblue;\n}`, `61096676054965070000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.example</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 80px<span class="token punctuation">;</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 80px<span class="token punctuation">;</span>\n   <span class="token property">border</span><span class="token punctuation">:</span> 40px solid deepskyblue<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="九宫格"><a href="#%E4%B9%9D%E5%AE%AB%E6%A0%BC" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>九宫格</h3>\n<p>border-image 属性的基本表现并不难理解，大家记住一个关键数字“9”即可。</p>\n<p>假设一个 <code class="language-text">&lt;div&gt;</code> 元素就是 .example 元素，我们沿着这个 <code class="language-text">&lt;div&gt;</code> 元素的 content-box 的边缘画 4 条线，则这个 <code class="language-text">&lt;div&gt;</code> 元素就被划分成了 9 份，形成了 1 个九宫格，如图 3-17 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-03-14-25-45-4ffbd121551821f0355cefdedbb37f16-69166.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 702px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 45.72649572649573%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABR0lEQVQoz42PwU7CQBCG9wWMMXpVDnhXL958FDGRsw/jyUQ9eNFEw4EIKMZSSkupFFBEVMQDUShqEaElgl26U3chEqKGMPmzye7838y/yBkqG9gZqjvuQHmWby/xdVes7eJaC/5H1WQtAsN2B/2F/S9dtF9aOdM3lNfVRH05VJ3cu1E+yMAwCj7WAYXtYMl0vjoOsbYKJuIc1YCx4LBuzR3kgpVOU3uCVmO3aM4f3aVa48UO6IRu9hUbXdsmGG/eGuicpJv/xQaAX7Cviie20zP+2uKJ5j6tTR8+T+1k4gbtwKjY/VT0e1713XNtrectTx6vXX561Vqh3YeZY7APYYzh54kA2IROoNe+2MCeWAGzAKGGno3BgigXHorlitY0jDddj0RFWUlyUYkT4nIyHYnJvCjHL1K5/D0vSLwgKskUVeYqG5MS3+Lp4eOESrJiAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 03 14 25 45" title="" data-src="/static/2022-01-03-14-25-45-4ffbd121551821f0355cefdedbb37f16-69166.png" data-srcset="/static/2022-01-03-14-25-45-4ffbd121551821f0355cefdedbb37f16-c9f7c.png 200w,\n/static/2022-01-03-14-25-45-4ffbd121551821f0355cefdedbb37f16-bfd8b.png 400w,\n/static/2022-01-03-14-25-45-4ffbd121551821f0355cefdedbb37f16-69166.png 702w" data-sizes="(max-width: 702px) 100vw, 702px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>border-image 属性的作用过程就是把图片划分为图 3-17 所示的 9 个区域的过程。所以，学习 border-image 属性其实很简单，记住两个点：一是源图像的划分，二是九宫格尺寸的控制。“九宫格尺寸的控制”放在后面讲，我们暂时把边框的尺寸当作九宫格的尺寸，先将注意力全部放在学习源图像的划分上。</p>\n<p>假设我们有一个尺寸是 162px×162px 的源图像，如图 3-18 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-03-14-31-07-3e029dbb44b78e48b9e9ec818d975b36-f8ebe.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 259px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 126.25482625482627%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAZCAIAAAC+dZmEAAAACXBIWXMAAAsSAAALEgHS3X78AAAD/0lEQVQ4y5VUbUxbVRg+OmCbc2Sbm9mMiTFmidE4s3/+8OdM0GhmXLIsJsN/amKGMyTux0QyzAxsgKxjJFPkwzHRjTHoYNDSUmCsQPkGYQWkjE3A0fJl1hboPe/je85tK/rPk/be97z3ec573uc+5woABvEFA4/hXlFBhKeGVJFnDgOPdEpGNMa1BG8QcYqQ+jYewgtuPN0Kz188I0UdnMfzRXi5GL8v6ZXIvoiEZrzWhdk1PWcy3357jP0dEE6IZuxpo1Zeu3tO7v8B2wuw7Tt5oBT3ArXLSHYRA4QDBz3whXVl/p8Yg2hEYisSWzig97xAah2JHHquiPZdgsimk843R9UjBmgMMn0xclji/WEIGwk7vdGDed7l0iqlXJdJuTLxPB21YjUyvYZXOsEAYcfxUZjNCn3FmoEULw6OwL+q2uEkLYVxqJo+qKPwuu4Z90P00hCOTeh24z1L/XTZ9dBfO2lO12WEg5qFAfvKKAc8NTF/Vo6tdM7FKcLcgex7ZLx4We60GLb7Ki3RaEwkycxk+Y1bPuApJ41rY3JrfuTVEjm+qEpLUpXRMQutLe28oBSyTlVjfDtlCcoQdPoZ+taJaVR45a4LtPsi64/XSzHkjwqGr+5A5GDfJWayyPjI9iFuCEpPpKxEOiOQnoZ6vGuVm84xBnsLFTjXEyPz+Nwpt+TJzXl0zIpQZBXGYfpZyFP8S6UbqrHFML193WDA1nx83W4qJuLS4VMbjtykkHYeYZUih3D1CKrUM9L6L4Tx1q845dIikSar96SmN2cjJT4l8rpBct3gIPjLcNDq1doaEY0pHF+z+03MBm/bA7TNJZ9wUPksmd6WVV5jR0Fkb6FsmjI3VzBNoon2tEr3crS2qlw1j6dalLGfdIH5lnngp2G5w4LdF2mXhZ4tRO1E1hyYucmljkByG+yLMXue9rE3kRD1LR1np6Q1KW+z+Ka2me3vTEA0KG8nMN+O8w822PPLSXVcRBNSR00FQWkOJOViSz5lKG1DBg4PKQBXzp6O2ZNiJ/vEOI6ORKUlc4GPbUh3qfY0IiSRMogM34aPgbkGd79O6htC5msjHbGBWVadMvPM4Z+p8T8mMfkyemDMlEbp92kOFWpyHCMotsv/BLGta5oe9O8howfjf474uqK6pq7sSmW7u9Pd6Zn3B4LBYG//4Mg97113l4lYXl6pu22vsdY7nC2MvFXf2NXdW1J+1dPdKy4Xl53Nznc0t9Y3NHl6+mZm5rp7++sb7Ywzyf5A4MeyijNnc0rKK87lWYpLr1RUXvvksy8sRd8Lp6ut9tbtO3c7+geGuAhvyR9YmPRNDQ2PmOSHf8w02By8ektbOxdotDl7+gaqqq0dXd1/A3lS2nhSyI/0AAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 03 14 31 07" title="" data-src="/static/2022-01-03-14-31-07-3e029dbb44b78e48b9e9ec818d975b36-f8ebe.png" data-srcset="/static/2022-01-03-14-31-07-3e029dbb44b78e48b9e9ec818d975b36-17e32.png 200w,\n/static/2022-01-03-14-31-07-3e029dbb44b78e48b9e9ec818d975b36-f8ebe.png 259w" data-sizes="(max-width: 259px) 100vw, 259px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>这个源图像一共由 9 个格子构成，每个格子占据的尺寸是 54px×54px，则下面的代码可以让这 9 个格子依次填充到九宫格的 9 个区域中：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="15720944295442485000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.example {\n   border-image: url(./grid-nine.svg) 54;\n}`, `15720944295442485000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.example</span> <span class="token punctuation">{</span>\n   <span class="token property">border-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./grid-nine.svg<span class="token punctuation">)</span></span> 54<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>此时渲染出来的效果如图 3-19 所示。</p>\n<p>渲染的原理如图 3-20 所示，该图展示了源图像的 9 个格子是如何分配到九宫格的各个区域中的。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-03-14-33-33-89edcfdf3eda2a9507c33bc4aa78343b-b9e7f.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 73.09027777777779%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACaElEQVQoz41SS2sTURgdEPGHCC5dCW5cuHMjLhQqLt24cCduLBQXgtCFiAulINJUbaGtFNtqSwlTtE1aK23znnTSJPNqZjKdZDJ5zPvOnc87GVBKsXq4fPfj3HO45z4oOIUwjErCBW6Jg0f0BzVg/SF/SknBX9zqQt3OaaBZ6qeaxfV+8/8y46HoWRpKWtSM/4Bd5Q9/tjmOPWMA/0WAsc1Z3j/0zowdhqHn+wgFBJ7nIc/j7KAjGTgrCybS7YghAgIyEc0JM0LosM5rbd3o9cWjRrVabwhCvlwqcTVJ4IuFYpmtNBryAVthyuyxpsX7URiH2HHB9bDthJ4HpPd9IGxIClkLg6gnI0odECIiMUQrIUU2BVmCQQcEDjQVBAFUFXAA/wFqSrSWRAdm8tkd4WVFH74ofGv7d9KtWxnv9p55Y6v7hjVidbLtfq0a/uvtcGJ/sd6mxlhzoujA6Cq9WHyQNezhnb4V/fNzylih/4rpXlpWbqb12FyQrEyhjZNVoPn9TJPynn/vTG1dh/cb9HrwmB50BnKdfVcfXF1r9kwTbH0037uXsXj2oNZqoMSe/yKFhs/mjm9QzGqtkhITPJ3L13KzBwhhsHqTknt5TVMGLjjWw73uSMbWFVnt615KtFcqeGi2PjPU/VJn9GcXRpYXVvhr+60BjuIleOvCZPki3b+S1M5N83dTx3HsxaY5n1WCJ8nw6eZ0TqQUB+suhqOuaSHRxrFIcPG84n9swVw7nGr46Q6K+aYTSCaCwjEwLc5CJ76nxBEIeseQRdFoiKYqq7VDoZgnB84Vits7u2WGMXvd+IeQ+gvd6y5kN5uJmQAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 03 14 33 33" title="" data-src="/static/2022-01-03-14-33-33-89edcfdf3eda2a9507c33bc4aa78343b-fee1c.png" data-srcset="/static/2022-01-03-14-33-33-89edcfdf3eda2a9507c33bc4aa78343b-a67b7.png 200w,\n/static/2022-01-03-14-33-33-89edcfdf3eda2a9507c33bc4aa78343b-0b187.png 400w,\n/static/2022-01-03-14-33-33-89edcfdf3eda2a9507c33bc4aa78343b-fee1c.png 800w,\n/static/2022-01-03-14-33-33-89edcfdf3eda2a9507c33bc4aa78343b-b9e7f.png 1152w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>有趣的是，源图像的 9 个格子居然正好和边框划分的 9 个区域一一对应，是巧合，还是本就如此？这不是巧合，这是因为 CSS 属性在其中起了作用。</p>\n<p>border-image 属性其实是多个 CSS 的缩写，其中 <code class="language-text">url(...) 54</code> 是 border-image-source 属性和 border-image-slice 属性的缩写，因此下面两段 CSS 代码的效果是一样的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="95255630135452100000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.example {\n   border-image: url(./grid-nine.svg) 54;\n}\n\n.example {\n   border-image-source: url(./grid-nine.svg);\n   border-image-slice: 54;\n}`, `95255630135452100000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.example</span> <span class="token punctuation">{</span>\n   <span class="token property">border-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./grid-nine.svg<span class="token punctuation">)</span></span> 54<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.example</span> <span class="token punctuation">{</span>\n   <span class="token property">border-image-source</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./grid-nine.svg<span class="token punctuation">)</span></span><span class="token punctuation">;</span>\n   <span class="token property">border-image-slice</span><span class="token punctuation">:</span> 54<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>border-image-source 属性的值是一个 <code class="language-text">&lt;image&gt;</code> 数据类型，所以 CSS 中所有图像类型都可以作为边框图片，例如常见的渐变图像，因此 border-image 属性可以实现渐变边框或者条纹边框效果。border-image-source 属性的语法和 background-image 属性类似，不再赘述，接下来我们重点关注一下 border-image-slice 属性，也就是源图像的划分。</p>\n<h3 id="理解-border-image-slice-属性"><a href="#%E7%90%86%E8%A7%A3-border-image-slice-%E5%B1%9E%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>理解 border-image-slice 属性</h3>\n<p>border-image-slice 属性的正式语法如下，表示支持 1 ～ 4 个数值或 1 ～ 4 个百分比值，后面可以带一个关键字 fill：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="79842341085017390000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`border-image-slice: <number-percentage>{1, 4} && fill?`, `79842341085017390000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">border-image-slice: &lt;number-percentage></span><span class="token punctuation">{</span>1<span class="token punctuation">,</span> 4<span class="token punctuation">}</span> &amp;&amp; fill?</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>border-image-slice 属性的作用是对原始的图像进行划分，划分的方位和顺序同 margin 属性、padding 属性一样，遵循上、右、下、左的顺序。例如 border-image-slice: 20 表示在距离源图像上方 20px、距离源图像右侧 20px、距离源图像下方 20px、距离源图像左侧 20px 的地方进行划分，划分线的位置如图 3-21 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-03-14-45-55-49f997b010a38cff803fd374f97061d4-e39cf.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 50.9009009009009%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABZUlEQVQoz4VQPU/CUBR9q//AH+Gkiz/ARCc3Pwbjb3A1DsREjcYdo4sGF5TIwoJGdLFiUKTSL6CtxUKAlIbS8mW1fdeWBtRY9Qzv3Zzzzj3vXgQD2Ng9r8t6UDIBW+b+I5AV7g22Wb2nG8AXsCDAdyDv6hvhHWAiVkLxViLCWSjQmwktPHbQUem40ARDsxqav3mYHJWNdf7VKdpbSSCqaYCVVEPH9jDA3wzYVTtr5zAVfqnXxuAgAAQccu3xPZtRPtv7mAe8MR+G0WCKoxBszkEUVonuyIadkP40u5KrkYV6PKk6BXOZblXrWg/C8aLfl38szJls8kpFBL6JSYB2YDaylLdRtHFSMh3Vwr/PjPvJu+nyYkpTZLW5fGaGHk5r3ekLWWy0vZ1gL2XQBQ2Zf/H1lZeEMmRWFCXDaCmKyjAcLzxXqjWKZnlRKhZllsvd3t1nsjRNswyby5DUU5bi8rwgiA7/AZUdHqi/TQ/kAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 03 14 45 55" title="" data-src="/static/2022-01-03-14-45-55-49f997b010a38cff803fd374f97061d4-fee1c.png" data-srcset="/static/2022-01-03-14-45-55-49f997b010a38cff803fd374f97061d4-a67b7.png 200w,\n/static/2022-01-03-14-45-55-49f997b010a38cff803fd374f97061d4-0b187.png 400w,\n/static/2022-01-03-14-45-55-49f997b010a38cff803fd374f97061d4-fee1c.png 800w,\n/static/2022-01-03-14-45-55-49f997b010a38cff803fd374f97061d4-e39cf.png 888w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>此时 4 个边角区域只有很小的一部分被划分，而剩余的上、下、左、右区域会被拉伸，因此，作用在 .example 元素上的效果就会如图 3-22 所示，其中增加的几根辅助线可以方便大家理解。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-03-14-47-52-bd3dfcc7023b410c3ac8714b8ff7ca2b-0c2fe.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 34.696016771488466%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsSAAALEgHS3X78AAAAyUlEQVQY06WPzQqCQBRG51Gj1wla9wLRI7hPnGYqQw0lGzNN0BLTEsx+nJlSIihn11l8i+/ew+UC3oKxOrULC5ZJZGWLvKpLLgD8mk0WD9pd34js7cd+xyriq9gHXGTT7MZGBi/LuhhqNCq4yBZfzstqgJKTf7yG54FyiPP7550vmTU0szeUMs5oP6a65BLJ64V3XlWsxWsN8D8AeKo6m22aZjs/MAzTdb2VTWziEMe1bTKWFYjn6kI3TQui2QTPEZ4pECGswgl+AtSFjkOyuBgTAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 03 14 47 52" title="" data-src="/static/2022-01-03-14-47-52-bd3dfcc7023b410c3ac8714b8ff7ca2b-fee1c.png" data-srcset="/static/2022-01-03-14-47-52-bd3dfcc7023b410c3ac8714b8ff7ca2b-a67b7.png 200w,\n/static/2022-01-03-14-47-52-bd3dfcc7023b410c3ac8714b8ff7ca2b-0b187.png 400w,\n/static/2022-01-03-14-47-52-bd3dfcc7023b410c3ac8714b8ff7ca2b-fee1c.png 800w,\n/static/2022-01-03-14-47-52-bd3dfcc7023b410c3ac8714b8ff7ca2b-0c2fe.png 954w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>默认情况下，源图像划分的中心位置是不参与填充的。如果想要有填充效果，可以额外使用 fill 关键字，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="77895700440749740000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.example {\n   border-image-source: url(./grid-nine.svg);\n   border-image-slice: 33.33% fill;\n}`, `77895700440749740000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.example</span> <span class="token punctuation">{</span>\n   <span class="token property">border-image-source</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./grid-nine.svg<span class="token punctuation">)</span></span><span class="token punctuation">;</span>\n   <span class="token property">border-image-slice</span><span class="token punctuation">:</span> 33.33% fill<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>结果如图 3-23 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-03-14-50-59-d5b9eda518380eb5934a7efa4b3acd7e-ad522.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 44.421052631578945%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsSAAALEgHS3X78AAABPUlEQVQoz4WQsUrDUBSGgy/gK/gIPoCTg6OCg04uorvo5OAigqM6WJwEZxWVQikiBU3T9NLelFJtEpo0LVioIS2pNK1t7z1HE6W2SOo/nOH89/sP9xdwRBDM9wFsm2jVP3A/yTfiTGvsVpG2fJPjmIS/sDOARQMLZhvX79n8ZV+qr1Yw4f4H/4gDPyLY5IdIVtgV+9qcUrDcIB7CYe57THdw6uQuGhNwT4CtnbdrnD4bRKj/gE2Ag2Bo93At6pWdJbydgYiGTdyMc/I6TA//M6CHeGx0bRe8c6V28IC1XqTS1zq/pYzB8H0QgPvBYHf5XAGp2sLlG5i96CQqCxrGbN9iHIYKKWy0AgYTfEFOZwyz7DgNy6pmlbxRMouq/vyi6npJLWpPkkwIVXL5DM2JovSYlNMkK6WImJIpVT4Bei3tbOwgBOwAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 03 14 50 59" title="" data-src="/static/2022-01-03-14-50-59-d5b9eda518380eb5934a7efa4b3acd7e-fee1c.png" data-srcset="/static/2022-01-03-14-50-59-d5b9eda518380eb5934a7efa4b3acd7e-a67b7.png 200w,\n/static/2022-01-03-14-50-59-d5b9eda518380eb5934a7efa4b3acd7e-0b187.png 400w,\n/static/2022-01-03-14-50-59-d5b9eda518380eb5934a7efa4b3acd7e-fee1c.png 800w,\n/static/2022-01-03-14-50-59-d5b9eda518380eb5934a7efa4b3acd7e-ad522.png 950w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>为了方便大家理解，我做了一个简单的原理示意图，如图 3-24 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-03-14-51-40-e8d170c4abe816b36d1bebce6d0d7420-082c3.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 36.38743455497382%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABk0lEQVQY002QO0/bUBzF/Q069SMAU8XWhQmpS6suTKx8hI4MSEhUFSoCsVQ8JjoggXiqqjoEUiAo0IDCIyFVggjYcRyu7fj6+tq5tu/1408IHXrGo99POjoSACQpnLXwfbHmq3bNT3icdsuqF6+3+Loer6IkgxhLuh3IfiSTEHIqk0nZDaQ48B9o+O420ObOGzN/3l+1ZRZ1uYmK92pTGz21B7POwNZdM3yWfz+6RyVKpvfVX/XVqinZlGAZWZOHs7Wfs9UfzlSu0yLCw+N/2VjBBuEVTfb22CsqSDUasF2rbOb6YWleycDnvIQJNlS9/O38++X+ykWmvFC0dSewjYmKO3ZiggjziA0dWCXNMgniWUXJlkdgbaNViJdLEkSi6fGPt1SbPlO/Fj7cWI3e7C8V8npDGc7Tvgx5s1PXerP3DLp3bcOnrLZbX3ywJOiFipR3QktFquUkz39Bk6fHTnrkwiGFSy/hL1iUuEEETcpp2ObxP/klXAjTMHzf7zAf6zrDZkgwaxsYPepIN9uWENH//BMWa2kdBKyfcgAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 03 14 51 40" title="" data-src="/static/2022-01-03-14-51-40-e8d170c4abe816b36d1bebce6d0d7420-fee1c.png" data-srcset="/static/2022-01-03-14-51-40-e8d170c4abe816b36d1bebce6d0d7420-a67b7.png 200w,\n/static/2022-01-03-14-51-40-e8d170c4abe816b36d1bebce6d0d7420-0b187.png 400w,\n/static/2022-01-03-14-51-40-e8d170c4abe816b36d1bebce6d0d7420-fee1c.png 800w,\n/static/2022-01-03-14-51-40-e8d170c4abe816b36d1bebce6d0d7420-082c3.png 1146w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>border-image-slice 属性的默认值是 100%，相当于把图 3-24 中左侧 33.33% 的线移动到右边缘，把右侧 33.33% 的线移动到左边缘，把上方 33.33% 的线移动到下边缘，把下方 33.33% 的线移动到上边缘。于是除了 4 个边角区域，其他区域都因为剪裁线发生反向交叉而不可见，这才有图 3-25 所示的效果。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-03-14-54-03-07584a422268ae6f4647c9b6546dee4e-2f0e6.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 61.29385964912281%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABQElEQVQoz52ScU+CQBjG+f6fpf5Il9PUthybWpBIIOiBoWGBGDoRJfDei7uYCaPVesaO7bn73fu8d8cRJmBDSEj70RerSPCpgYF+qYQNkaqoJbxv4bSYiiNnNAmhX3m6vLnz7lfUwwCM9h/8i2aneyVDgM9p7psFWrk73Ru8I0WZ+bV2GBOTf+uZYUBKK/9LRRiApsUFk7WA4TcYl8H4jzBlWaWCjdnUzzCQ9JjQJvZQYJ3Sst+MkKURGuvkUA6zTY8fhG+g2nVvpm5Z/9lVzbVdvdbv1CfxPnfRHGSiXhRD+9ZqVMUR2tFWMRwxbV+fHpoVsdV+DiPINmXKxU7SeAcceMk6Hzt9MdtV4kYQF2IrimbN5r6/dpceGiPHtp2Va03Qy+LVtheKqg1k1dR0UZYs0xipmqLqA0nWxxNpKH8Cv7aylPlOi4QAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 03 14 54 03" title="" data-src="/static/2022-01-03-14-54-03-07584a422268ae6f4647c9b6546dee4e-fee1c.png" data-srcset="/static/2022-01-03-14-54-03-07584a422268ae6f4647c9b6546dee4e-a67b7.png 200w,\n/static/2022-01-03-14-54-03-07584a422268ae6f4647c9b6546dee4e-0b187.png 400w,\n/static/2022-01-03-14-54-03-07584a422268ae6f4647c9b6546dee4e-fee1c.png 800w,\n/static/2022-01-03-14-54-03-07584a422268ae6f4647c9b6546dee4e-2f0e6.png 912w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/elobn8?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>如果 border-image-source 是渐变图像，则渐变图像的尺寸是按元素的 border-box 尺寸来计算的。</p>\n<p>理解了 border-image-slice 属性，border-image 属性的学习就算完成了一半，剩下的就是学会控制九宫格的尺寸了，而控制九宫格尺寸的 CSS 属性就是 border-image-width 和 border-image-outset。</p>\n<h3 id="了解-border-image-width-属性"><a href="#%E4%BA%86%E8%A7%A3-border-image-width-%E5%B1%9E%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>了解 border-image-width 属性</h3>\n<p>border-image-width 属性和 border-width 属性支持的参数个数是一样的，都是 1 ～ 4 个，不同数量的值所对应的方位规则也是一样的。但是，这两个属性支持的属性值类型却有较大区别，为了方便大家对比，如下表所示。</p>\n<table>\n<thead>\n<tr>\n<th align="left">值类型</th>\n<th align="left">border-width</th>\n<th align="left">border-image-width</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align="left">初始值</td>\n<td align="left">medium</td>\n<td align="left">1</td>\n</tr>\n<tr>\n<td align="left">长度值</td>\n<td align="left">√</td>\n<td align="left">√</td>\n</tr>\n<tr>\n<td align="left">数值</td>\n<td align="left">×</td>\n<td align="left">√</td>\n</tr>\n<tr>\n<td align="left">百分比值</td>\n<td align="left">×（暂时）</td>\n<td align="left">√</td>\n</tr>\n<tr>\n<td align="left">关键字属性值</td>\n<td align="left"><code class="language-text">thin | medium | thick</code></td>\n<td align="left">auto</td>\n</tr>\n</tbody>\n</table>\n<p>针对 border-image-width 和 border-width 属性值类型的对比，有以下几点说明。</p>\n<ol>\n<li>\n<p>border-image-width 属性支持使用数值作为属性值，这个数值会作为系数和 border-width 的宽度值相乘，最终的计算值作为边框图片宽度，也就是九宫格的宽度。因此，我们可以设置不同的数值来得到不同宽度的九宫格。图 3-26 所示的是设置 border-image-width 属性值分别为 0.75、1 和 1.5 的九宫格示意图和实际的渲染效果。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-03-15-05-10-32802a075247cc1c6551a7e5f9d2f5c2-ad2c1.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 64.22167889160554%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAC0UlEQVQoz1VSS2gTARBdUOi5WLyIoFA8ChXPBT149CQ9WSoVlXoTFCp4sFpsKRUURIv90NYqmFRjWpqkSfqnaZttmmQ/3WSTNE02m938Nr9udjfZ3XFbWsE5DMwMM7x57yFwFvpJYqLJOTxtx5lfGOfBDkJx3rWfXqR4O8l5qBR+kFnY5537vGPf6HOIfrZcj0Qhzw3Q4k1Xvp8odfulO/bDR4GjFgvfvl665q60/Y48DGvn54vN9lKTNX/JkUdA045Xw1TjzWsI4X3R+heqCA1RlOQXgfI9v9zpyYMkEjmxfaXwhKw3W7jeHf7uMn9lUUDIqsoWZPCEgmxWBRgkKyN0CRpHkqy82st3BORuTw5kkRbEWyu5HlK5OJvs83IdS6lWWwa5T1XH5qLw3NW1ylhztY9U5YaNG4wpT4O1dluyEy21mBK3UeX6arXVHOsiGudMbJNTQv4IF+YySGF4fd3ifinaIkMO3RVLKvWplDy6SX6Ki06mHBRkE9+Y3KEnaMHF19CyZi2AyRubpbK2IiD+6cDKvGeSdm6Mb3FbjAxQM9B/WwQiUQaQNK1mMLKwAeFE1RBD04whELjOpg2mkQfh4oQ1Bj2Ozk32R1YJ1wALVaDfq5rp9UzDUoKvCRUeu0ufsYEC2ATtagrKb9HvZqYtDUi1ocuyClW5Iqt146olDGvJU/UmMN0c0mfIYwNUFRjaKVKCfZzWiWxqlV2ejiD/TALqieSTGCxET00z7IURP3xAj8uyDM+WVF+Ge+cFQZK20pn3PkTTjEc0XdcbqiG4RuWUw8MqjPq11SSeklx59eeBAr0rlSlijNNtefUyA+XetZmZ2HUD9v/2hLgG6ZwClihs83Qd4nWgFQB3QiUFvwqiqlMGpTmpXKqHFUAi0YMwHRGEIkFSQZxMRmMsy1BZ5jDHUUEM3doOYTjOxlESw1DU59sL7u6iwSC656MJ/C8cioZ0WCQu6QAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 03 15 05 10" title="" data-src="/static/2022-01-03-15-05-10-32802a075247cc1c6551a7e5f9d2f5c2-fee1c.png" data-srcset="/static/2022-01-03-15-05-10-32802a075247cc1c6551a7e5f9d2f5c2-a67b7.png 200w,\n/static/2022-01-03-15-05-10-32802a075247cc1c6551a7e5f9d2f5c2-0b187.png 400w,\n/static/2022-01-03-15-05-10-32802a075247cc1c6551a7e5f9d2f5c2-fee1c.png 800w,\n/static/2022-01-03-15-05-10-32802a075247cc1c6551a7e5f9d2f5c2-b1a91.png 1200w,\n/static/2022-01-03-15-05-10-32802a075247cc1c6551a7e5f9d2f5c2-ad2c1.png 1227w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n<li>\n<p>如果 border-image-width 属性设置的是具体的长度值，如 60px、5em 等，则九宫格的宽度就和 border-width 属性没有关系了。但是，有一个特殊的情况，那就是在 border-width 的长度为 0 的时候。理论上来说，如果 border-image-width 的属性值是具体的长度值，此时就算将 border-width 属性设置为 0，也应该可以渲染边框图片，但是在 Chrome 浏览器中，边框图片却消失了，而 Firefox 浏览器则没有这个问题。因此，如果我们希望边框宽度为 0，且 border-image 属性能生效，可以试试将 border-width 属性的值设置为 0.02px（不小于 1/64 像素）。</p>\n</li>\n<li>\n<p>border-image-width 属性的百分比值是相对于元素自身的尺寸计算的，水平方位相对于宽度计算，垂直方位相对于高度计算。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="71900507717993260000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.example {\n  border-image: url(./grid-nine.svg) 54;\n  border-image-width: 50% 25%;\n}`, `71900507717993260000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.example</span> <span class="token punctuation">{</span>\n  <span class="token property">border-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./grid-nine.svg<span class="token punctuation">)</span></span> 54<span class="token punctuation">;</span>\n  <span class="token property">border-image-width</span><span class="token punctuation">:</span> 50% 25%<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>这段代码表示九宫格上下区域高度是 50%，左右区域高度是 25%，此时的九宫格和最终的效果如图 3-27 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-03-15-09-39-3178ea5520fd674dbf93e8bdae6b3250-66f68.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 33.652173913043484%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsSAAALEgHS3X78AAABpklEQVQY0yWOTWjTYBzGX3ZX2UWGsIF48ORtMOttBw8yryJ49CgIMvC+w4SBFy+CG3jxg3noSoYs3daq6L5KG9sY19Ymmn4kXbvWt4lN1nw0eR8T/V8e/j8eeH7kXc3EmnCU15dlYxwCCJsu5nNO4si7IYRzh+6C4J36EWcDj+2cAeIpXpSizp4JsvJZZ4tciivfPdCtIC79cHAupU9su1cylGyNLiflhhfzDEWiBPdWEuTJs7faggyirWbvgfuyncVD3h86TVUptHrX0nQq1Z3hBxc3OomsUfilKccSddlmtFzsYiVXD5CljAi8+ErO7O8JhZdCMA6YOyqb3tWtzoUde+aDdT5tzWZ6Ra3fU5XvFnukgT3N4+Z6Whwu6SCPP7VxZ+PNevl6vjscx3rVESaTzQnemdw9I+/tS6lG85/2Pg1uV+E/2MX089cf+/frICe2j7phjQLVwf+zQ3AmuN9IGtik4C04LOYBgxGFG0K3ohXTZyR6ewYtVyrWgLbbJ9+k41aj1fkpD1r1vqqoklgrCZVKtVZTcvmvkigViuIfx45NGPsLnqJU4Qz9p9AAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 03 15 09 39" title="" data-src="/static/2022-01-03-15-09-39-3178ea5520fd674dbf93e8bdae6b3250-fee1c.png" data-srcset="/static/2022-01-03-15-09-39-3178ea5520fd674dbf93e8bdae6b3250-a67b7.png 200w,\n/static/2022-01-03-15-09-39-3178ea5520fd674dbf93e8bdae6b3250-0b187.png 400w,\n/static/2022-01-03-15-09-39-3178ea5520fd674dbf93e8bdae6b3250-fee1c.png 800w,\n/static/2022-01-03-15-09-39-3178ea5520fd674dbf93e8bdae6b3250-66f68.png 1150w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n<li>\n<p>auto 关键字很有意思，会使用 border-image-slice 属性划分的尺寸作为九宫格宽度值。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="9827174568790299000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.example {\n  border-image: url(./grid-nine.svg) 54;\n  border-image-width: auto;\n}`, `9827174568790299000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.example</span> <span class="token punctuation">{</span>\n  <span class="token property">border-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./grid-nine.svg<span class="token punctuation">)</span></span> 54<span class="token punctuation">;</span>\n  <span class="token property">border-image-width</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>此时，border-image-width 属性值等同于 border-image-slice 属性设置的 54px。如果 border-image-slice 属性值是百分比值，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="7013898630816317000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.example {\n  border-image: url(./grid-nine.svg) 33.33%;\n  border-image-width: auto;\n}`, `7013898630816317000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.example</span> <span class="token punctuation">{</span>\n  <span class="token property">border-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./grid-nine.svg<span class="token punctuation">)</span></span> 33.33%<span class="token punctuation">;</span>\n  <span class="token property">border-image-width</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>则此时 border-image-width 的宽度值等于 grid-nine.svg 的对应方位的尺寸和 33.33%的计算值。</p>\n</li>\n<li>\n<p>border-image-width 属性和 border-width 属性都不支持负值。</p>\n</li>\n<li>\n<p>border-image-width 的宽度值很可能会超过元素自身的尺寸，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="78025189811973640000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.example {\n  border-image: url(./grid-nine.svg) 54;\n  border-image-width: 100% 50%;\n}\n\n.example {\n  border-image: url(./grid-nine.svg) 54;\n  border-image-width: 4 3 2 1;\n}`, `78025189811973640000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.example</span> <span class="token punctuation">{</span>\n  <span class="token property">border-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./grid-nine.svg<span class="token punctuation">)</span></span> 54<span class="token punctuation">;</span>\n  <span class="token property">border-image-width</span><span class="token punctuation">:</span> 100% 50%<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.example</span> <span class="token punctuation">{</span>\n  <span class="token property">border-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./grid-nine.svg<span class="token punctuation">)</span></span> 54<span class="token punctuation">;</span>\n  <span class="token property">border-image-width</span><span class="token punctuation">:</span> 4 3 2 1<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>这时候，border-image-width 属性的宽度表现遵循“等比例原则”和“百分百原则”，也就是九宫格宽度不超过元素对应方向的宽度，同时保持设置的数值比例。例如 border-image-width: 100% 50% 等同于 border-image-width: 50% 25%。那么，border-image-width: 4 3 2 1 等同于什么呢？这个需要计算一下，.example 元素宽高都是 160px，边框宽度是 40px，则一个方位上的最大比例系数应该是 4，此时垂直方向的总系数是 6（4+2），则所有数值都应该乘以 2/3（4/6），所以，border-image-width: 4 3 2 1 应该等同于 border-image-width: 2.6667 2 1.3333 0.6667。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/h85ql7?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n</li>\n</ol>\n<p>除了 border-image-width 属性，border-image-outset 属性也能控制九宫格的尺寸，只不过 border-image-width 属性控制的是九宫格的边框宽度，而 border-image-outset 属性控制的是九宫格中间区域的尺寸。</p>\n<h3 id="了解-border-image-outset-属性"><a href="#%E4%BA%86%E8%A7%A3-border-image-outset-%E5%B1%9E%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>了解 border-image-outset 属性</h3>\n<p>首先，大家千万不要弄错 border-image-outset 属性的拼写，该属性最后的单词是 outset，不是 offset。outset 是往外扩张的意思，它和 offset 的区别在于，offset 扩展的方向既能向外也能向内，反映在属性值上就是 offset 既支持正值也支持负值，例如 outline-offset、text-underline-offset 等 CSS 属性；但是 outset 只能是正值，只能向外扩张，使用负值会被认为是语法错误。</p>\n<p>下面来看一下 border-image-outset 属性的正式语法：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="12526752139635012000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`border-image-outset: [<length> | <number>]{1,4}`, `12526752139635012000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">border-image-outset: [&lt;length> | &lt;number>]</span><span class="token punctuation">{</span>1<span class="token punctuation">,</span>4<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>该属性支持 1 ～ 4 个数值，或者支持 1 ～ 4 个长度值，并且支持数值和长度值混合使用。因此，下面这些 CSS 声明都是合法的。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="22677062218873446000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`border-image-outset: 1rem; /* 长度值 */\nborder-image-outset: 1.5; /* 数值 */\nborder-image-outset: 1 0.5; /* 垂直 水平 */\nborder-image-outset: 30px 2 40px;\nborder-image-outset: 10px 15px 20px 25px;`, `22677062218873446000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">border-image-outset</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span> <span class="token comment">/* 长度值 */</span>\n<span class="token property">border-image-outset</span><span class="token punctuation">:</span> 1.5<span class="token punctuation">;</span> <span class="token comment">/* 数值 */</span>\n<span class="token property">border-image-outset</span><span class="token punctuation">:</span> 1 0.5<span class="token punctuation">;</span> <span class="token comment">/* 垂直 水平 */</span>\n<span class="token property">border-image-outset</span><span class="token punctuation">:</span> 30px 2 40px<span class="token punctuation">;</span>\n<span class="token property">border-image-outset</span><span class="token punctuation">:</span> 10px 15px 20px 25px<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>其中，数值是相对于 border-width 计算的，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="54908027435858540000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.example {\n   border-image: url(./grid-nine.svg) 54;\n   border-image-outset: 0.5;\n}`, `54908027435858540000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.example</span> <span class="token punctuation">{</span>\n   <span class="token property">border-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./grid-nine.svg<span class="token punctuation">)</span></span> 54<span class="token punctuation">;</span>\n   <span class="token property">border-image-outset</span><span class="token punctuation">:</span> 0.5<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>由于 .example 元素的边框宽度是 40px，因此上面的代码的运行效果和下面的代码的运行效果一样：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="45967196078470595000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.example {\n   border-image: url(./grid-nine.svg) 54;\n   border-image-outset: 20px;\n}`, `45967196078470595000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.example</span> <span class="token punctuation">{</span>\n   <span class="token property">border-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./grid-nine.svg<span class="token punctuation">)</span></span> 54<span class="token punctuation">;</span>\n   <span class="token property">border-image-outset</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>提醒一下，这里有一个细节，那就是元素扩展了 20px 指的是九宫格中间区域的上、右、下、左这 4 个方位的尺寸都扩大了 20px，所以九宫格中间序号为 9 的区域的高和宽最终增加了 40px，九宫格尺寸变化的过程和最终效果如图 3-28 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-03-15-25-55-652d78a33c30159b9199a422af46d100-4c90f.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 40.19014693171996%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAABvUlEQVQY01VRz0/TYBjuP6BHTh4ICSHGP8AD/4XxLAkH4g+MJp408YAhIYQbEIwnoxcVgyxEdKzAzBYIDMYCWztZN9du9Adtabeu7cfX9vteWtxB38NzePI87/u878vAP0UpjbEh6du8wlY1tmZuVbX9ioQ9P+bVALp+BHULOAO7QfMSmFUDF3+bsCGsSN2KE8aiyWp0Y925ncfDW+7gRmcw66s46fzegLzow1MW7qeU44tXCjAvStbHb5z35sezTGP9zI1VDyrkUbEHEQbTPJDsoVygoiQR2RRpzeqHtBB85hky/Sv3k30MaTSVxqxgGeK9Q+9JyQOapDhSnKE92D8VOZGHhyxZPOqbOYPcest82GyspoqlT+nFlXJBsAGisXL4vOQA8SFCJ7ozksNtBxMgdLkKh2rfrHswt8dMSe7adgtmdl4e65mLIObHy+HN793RXXR3B93JugMZX75M9F90WmgjeJ2DifQ5b8/GO/937Wss9ODdGVlQYF6FJZl8NahPEp7HoPQIZFuQElwT5R1gyPV7wiBsii1Z1Sy7Y6kK0jVsaN65HNpGR2lzHC/8aZ6WK3WhVtdlQsnfYVda8Jwts9wBowAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 03 15 25 55" title="" data-src="/static/2022-01-03-15-25-55-652d78a33c30159b9199a422af46d100-fee1c.png" data-srcset="/static/2022-01-03-15-25-55-652d78a33c30159b9199a422af46d100-a67b7.png 200w,\n/static/2022-01-03-15-25-55-652d78a33c30159b9199a422af46d100-0b187.png 400w,\n/static/2022-01-03-15-25-55-652d78a33c30159b9199a422af46d100-fee1c.png 800w,\n/static/2022-01-03-15-25-55-652d78a33c30159b9199a422af46d100-4c90f.png 1157w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/u22ym2?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>最后再告诉大家一个小知识，border-image-outset 属性扩展出去的和 outline 属性扩展出去的九宫格区域的轮廓一样，不会影响布局，也不会响应鼠标经过行为或者点击行为。</p>\n<p>我们现在回顾一下，border-image-slice 属性用于划分源图像，border-image-width 用于控制九宫格第一区到第八区的尺寸，border-image-outset 属性用于控制九宫格最中间第九区的尺寸。掌握这 3 个属性，就算完全理解 border-image 属性了。</p>\n<p>总而言之，border-image 属性的作用就是划分源图像，然后将其依次填充到九宫格区域中。等等，好像缺了什么？好像九宫格第五区到第八区的图形永远是被拉伸的状态，如果我希望这几块区域的图形是平铺的，有什么解决办法吗？这就是最后一个子属性 border-image-repeat 做的事情了。</p>\n<h3 id="了解-border-image-repeat-属性"><a href="#%E4%BA%86%E8%A7%A3-border-image-repeat-%E5%B1%9E%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>了解 border-image-repeat 属性</h3>\n<p>border-image-repeat 属性可以控制九宫格上、右、下、左 4 个区域（对应的区域序号是 5 ～ 8，我称这几个区域为平铺区）图形的平铺规则，如图 3-29 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-03-15-30-33-f2d09405f96f503db90b432ac5f37b9d-932f0.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 49.23798358733881%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAABfUlEQVQoz2P4DwN//4HIpts/tLc+8dxyO3nTmcwNJ/w2XbHd+sBp/8uPINl///6jAAY46w9YJvPiF4YFN7QXXfBesC907jbDhadk5pyRW3Ht/X+8mv+CpdqO3ZObdmTryesf3n96+e7zo4fPPOYdNl9y5tvP3yDd+DX3nrjt2L/y+N0Xv799efDg/u9//+PmbgtaeuDjr7+ENfedvOM0YfXx28/+//316uULoJb4edsCluz/+OsfYc2tJx7IzDy5/sT1F6/fP3r14da9J54Lj5svv/DtFwFng8jsi194Z51RX3DWbs5ev9nbdOefFJt5Sm71nff/CAQYiOy//8tj9+O4vfeyd14q3Xk+cdfNwF0PQk68/Yw1tP+Cwb9/UJOB6DdYAsj/A2YAuT///v3zGwT+AAGQDUQg+i/Dnbv3Hjx89PrNmxs3bl65cu3B/Ud379w5d+7i61evgSJXr904c+bc3n0Hzl+8cvzEqf37Dx4/eeb0mXMnT5+9cesOAPXgDKoBWF7hAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 03 15 30 33" title="" data-src="/static/2022-01-03-15-30-33-f2d09405f96f503db90b432ac5f37b9d-fee1c.png" data-srcset="/static/2022-01-03-15-30-33-f2d09405f96f503db90b432ac5f37b9d-a67b7.png 200w,\n/static/2022-01-03-15-30-33-f2d09405f96f503db90b432ac5f37b9d-0b187.png 400w,\n/static/2022-01-03-15-30-33-f2d09405f96f503db90b432ac5f37b9d-fee1c.png 800w,\n/static/2022-01-03-15-30-33-f2d09405f96f503db90b432ac5f37b9d-932f0.png 853w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>border-image-repeat 属性的正式语法如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="76932022419769050000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`border-image-repeat: [stretch | repeat | round | space]{1,2}`, `76932022419769050000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">border-image-repeat: [stretch | repeat | round | space]</span><span class="token punctuation">{</span>1<span class="token punctuation">,</span>2<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>从语法中我们可以看出该属性和 border-image 其他相关属性有一个明显的不同，即无论是 border-image-slice 属性还是 border-image-width 属性，其属性值数量都是 1 ～ 4 个，但是 border-image-repeat 属性最多只支持两个属性值同时使用。该属性强制规定水平方向的两条边的平铺规则必须是一样的，垂直方向的两条边的平铺规则也必须是一样的。</p>\n<p>接下来我们快速了解一下 border-image-repeat 属性支持的几个关键字属性值的含义，这几个关键字属性值的含义在整个 CSS 世界中都是通用的。</p>\n<ul>\n<li>stretch：默认值，让源图像拉伸以充满显示区域。</li>\n<li>repeat：让源图像紧密相连平铺，保持原始比例，平铺单元在边界位置处可能会被截断。</li>\n<li>round：让源图像紧密相连平铺，适当伸缩，以确保平铺单元在边界位置处不会被截断。</li>\n<li>space：让源图像保持原始尺寸，平铺时彼此保持适当的等宽间隙，以确保平铺单元在边界位置处不会被截断；如果区域的尺寸不足以呈现至少一个源图像单元，则会以空白呈现。目前在移动端有部分浏览器并不支持该关键字，IE 浏览器中的渲染和其他现代浏览器也不一样，因此这个关键字要谨慎使用。</li>\n</ul>\n<p>假设有如下 CSS 代码：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="16484041961429187000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.example {\n   border-image: url(./grid-nine.svg) 54;\n}`, `16484041961429187000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.example</span> <span class="token punctuation">{</span>\n   <span class="token property">border-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./grid-nine.svg<span class="token punctuation">)</span></span> 54<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>则不同 border-image-repeat 属性值的渲染过程和效果如图 3-30 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-03-15-34-28-334896895339200634c96955c3764a52-381aa.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 44.693701466781704%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsSAAALEgHS3X78AAABi0lEQVQoz2VRS9OUMBDkF/svtLx7sbx51bulllV+3rcU5YNdYB+wvGF5BbKEkKRN9uLBVCZJ90xPTXUs/L+kwCFAUZq3ejCXGGn2D/ohuk7fFtSDOIXY7eA845eNg0NePrHPoSkWUp/k1Y/lywNKA4fXT/zryYilgmFsT/aDmqmY560j6nsknXoDBLBxqb6dpV1qyIVadYuPnnKbuxYnEvn+trz4FDeskUpTzWHE2z/yQ1AV9wG4+QPe2PL9vprFIGDGffcsf9aFFrN+maqxOqVzRdZ5BZNIbnBsRBEaCsKRtvAcuC4KgmnDtYazg39AMVmiobQnGaalHuW4GLGpdhHHuC0gK/LBOBIedTXohrJH4COKdWsrYaIcVly6mKwNl3eump6jZaJj9biNXLVkQ7OIltVUdkK12qCaSSpSCWtV0I7o4EoJZRxaNdTBlU5tBkKPo1bJHv4Zu7k2WRP6qwBK6TmO27br+yFLs6qsoiTJyzLP8mt8PV+i367nh2EQmO3tD/7xOJJJC/8Czvf6IftaakgAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 03 15 34 28" title="" data-src="/static/2022-01-03-15-34-28-334896895339200634c96955c3764a52-fee1c.png" data-srcset="/static/2022-01-03-15-34-28-334896895339200634c96955c3764a52-a67b7.png 200w,\n/static/2022-01-03-15-34-28-334896895339200634c96955c3764a52-0b187.png 400w,\n/static/2022-01-03-15-34-28-334896895339200634c96955c3764a52-fee1c.png 800w,\n/static/2022-01-03-15-34-28-334896895339200634c96955c3764a52-381aa.png 1159w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/w8uspe?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>可以发现，无论是哪种平铺类型，最终 4 个对角处的图形和 4 个平铺区的图形是无法做到尺寸永远一致的，除非元素尺寸固定，同时元素的尺寸和源图像尺寸匹配，显然这样的场景有限。这就导致规律的边框装饰效果实际上是不适合使用 border-image 属性来实现的，这就是一开始提到的 border-image 属性自身的缺点——4 个尴尬的边角。</p>\n<p>当然，理论和现实有时候就是会有差异，如果边框图案比较小，同时元素尺寸比较大，则我们是可以使用 round 关键字实现近似规律的边框装饰效果的。因为此时，边角图案和平铺图案的尺寸差异会很小，乍一看是一样的尺寸，给用户的感觉是天衣无缝的平铺，如图 3-31 所示。图中使用的是 round 类型的平铺，乍一看各个菱形图案尺寸都是一样的，但实际上是有差异的，4 个边角的菱形尺寸比水平方向的菱形图案尺寸大，比垂直方向的菱形图案尺寸小，并不是严格意义上的平铺效果。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-03-15-37-18-e99d78a7f9bf25f38b1be467ae659012-fd0be.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 59.855769230769226%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB/ElEQVQoz2VRz2sTQRQe8Sr+HXrWQ0+iZxVvit6lnktPXgQR1N6KoNiLtWLbQ1uoFbGgNcR029AkTXdbNjEpEmpCbform9nNZnb3fb7ZTaLg4zHz3vB9870fgqDNDfHApuUT4KkRfajiZQEzNt5Y2mdtTqOPVTwxGDBsE4PZmCiimFzz6HwOj6ohht6FIyu4tYD7n3FvCXeXdHBzPhz9hqGpx9XwXI7BmsJEof+I1evvS/6eA6cLN8CpD6nQ8nXKwYkPP+DUqzmN6fKAIhDpm0pHODNGI1/1WxDpmpJ+GJV4EJfI+uK5BmtpEr3y+RjPo3ycvPaZ/3isgdIRvcijLy16FTS94NpsxONJlEPS6HDgUaLMAIYxOOH3yfsSlyfxqtBT/t+Sx9ebuDSJ326PHHcMxTuyOhsSmLLIqGPhB1Zq+LSrnYP5crTewFtrw6NnVkfFlL+rqsrobAqjlsKFiZB3c3UGdxZxYw7X53B7EVemw+FlXJx4aCmRQkVSUorozwt2Gw5fP0+p1UVD6vVwbwcujn1OiXdWc9o8MkkDinCcdpdNKVAonbanFBEpiqTfYfeCrvQ9Pjuq63LcalHHk67blmyuWDWye7/qzebh/sFhOmOYxe1KZdfeKX/PrBlr2UJ+K5vNpdPGlrljmdu5QvFLKrNqrBdNa7No/gFiiIQwNq2BkAAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 03 15 37 18" title="" data-src="/static/2022-01-03-15-37-18-e99d78a7f9bf25f38b1be467ae659012-fee1c.png" data-srcset="/static/2022-01-03-15-37-18-e99d78a7f9bf25f38b1be467ae659012-a67b7.png 200w,\n/static/2022-01-03-15-37-18-e99d78a7f9bf25f38b1be467ae659012-0b187.png 400w,\n/static/2022-01-03-15-37-18-e99d78a7f9bf25f38b1be467ae659012-fee1c.png 800w,\n/static/2022-01-03-15-37-18-e99d78a7f9bf25f38b1be467ae659012-fd0be.png 832w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>最后提示一下，关于 round 关键字和 space 关键字的更深入的细节参见之后与 background-repeat 属性相关部分的介绍。</p>\n<h3 id="精通-border-image-缩写语法"><a href="#%E7%B2%BE%E9%80%9A-border-image-%E7%BC%A9%E5%86%99%E8%AF%AD%E6%B3%95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>精通 border-image 缩写语法</h3>\n<p>border-image 属性缩写还是不缩写没什么本质区别，但是如果你想看懂别人写的代码，或者真正学会 border-image 属性，那么 border-image 属性的缩写语法是必学的。</p>\n<p>border-image 属性的正式语法如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="52256991088610435000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`border-image: <border-image-source> || <border-image-slice>[/ <border-image-width> | / <border-image-width>? /\n   <border-image-outset>]? || <border-image-repeat>;`, `52256991088610435000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">border-image</span><span class="token punctuation">:</span> &lt;border-image-source> || &lt;border-image-slice>[/ &lt;border-image-width> | / &lt;border-image-width>? /\n   &lt;border-image-outset>]? || &lt;border-image-repeat><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>语法被 || 符号分成了 3 部分，分别是资源引入、尺寸控制和平铺规则。这 3 个部分可以任意组合显示，这一点很容易理解，不展开讲解。</p>\n<p>语法关键的难点在于“尺寸控制”，不过如果你认真阅读过上面的内容，你就会发现，本书关于“尺寸控制”的剖析和缩写语法是完全一致的，即源图像的划分、九宫格边框宽度的控制、九宫格中间区域的尺寸控制。如果能够想到这一点，“尺寸控制”的语法顺序就变得很好记忆了。</p>\n<p>“尺寸控制”相关的 3 个 CSS 属性全部使用斜杠进行分隔，结合 2.2 节介绍的 CSS 属性值定义语法，我们就可以得到下面这些合法的 CSS 声明：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="20105900835059143000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* slice: 54 */\nborder-image: 54;\n/* slice: 54, width: 20px */\nborder-image: 54 / 20px;\n/* slice: 54, outset: 20px */\nborder-image: 54 / /20px;\n/* slice: 54, width: 20px, outset: 20px */\nborder-image: 54 / 20px / 20px;`, `20105900835059143000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* slice: 54 */</span>\n<span class="token property">border-image</span><span class="token punctuation">:</span> 54<span class="token punctuation">;</span>\n<span class="token comment">/* slice: 54, width: 20px */</span>\n<span class="token property">border-image</span><span class="token punctuation">:</span> 54 / 20px<span class="token punctuation">;</span>\n<span class="token comment">/* slice: 54, outset: 20px */</span>\n<span class="token property">border-image</span><span class="token punctuation">:</span> 54 / /20px<span class="token punctuation">;</span>\n<span class="token comment">/* slice: 54, width: 20px, outset: 20px */</span>\n<span class="token property">border-image</span><span class="token punctuation">:</span> 54 / 20px / 20px<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>其中，需要重点关注 <code class="language-text">54 / / 20px</code> 这个属性值，该属性值中出现了连续的斜杠。首先，这个写法是合法的；其次，为了便于大家理解，我在两个斜杠之间加了空格，实际上没有空格也是合法的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="2668098763180282400"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 合法的 */\nborder-image: 54 // 20px;`, `2668098763180282400`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title=""\n              >\n                \n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">/* 合法的 */\nborder-image: 54 // 20px;</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>所以如果大家在 border-image 的属性值中看到了双斜杠，千万不要误认为是多写了一个斜杠，这是遵循 border-image 属性的语法，把 <code class="language-text">&lt;border-image-width&gt;</code> 数据类型给省略了。因为在正式语法中，<code class="language-text">&lt;border-image-width&gt;</code> 数据类型的后面有一个问号，这就表明这个数据类型可以省略，但是斜杠后面并无问号，因此斜杠不能省略，于是就出现了双斜杠的场景。</p>\n<p>由于“尺寸控制”相关的 3 个 CSS 属性都支持 4 个方位的分别设置，因此 border-image 属性最复杂的缩写可能会有下面这么长。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="96223412886827960000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.example {\n   border-image: url(./grid-nine.svg) 54 33.33% 33.33% 54 / 10px 20px 30px 1 / 1 30px 20px 10px round space;\n}`, `96223412886827960000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.example</span> <span class="token punctuation">{</span>\n   <span class="token property">border-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./grid-nine.svg<span class="token punctuation">)</span></span> 54 33.33% 33.33% 54 / 10px 20px 30px 1 / 1 30px 20px 10px round space<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>显示的效果如图 3-32 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-03-15-52-15-25cd3b11b7d347d775fd1b32d327cb94-f2bb5.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 45.60496380558428%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABAElEQVQoz42Rz06DQBDGeVTP+iI+ghcbj148erGJ1qTRhpSF7WIN0pRdPIBhobYS+mfLjLCaVNSmzGF2Z7/vyy+TNfBPLT/U6D4Cf4ZeCl6KL1liy3yhag0aTqMxgRb5Ox5doyrre6lfuhzHcmfYE9Z9toIrr47Bdxj8DGTRjhwu8KSL6+2O3BPVCu3I2RI6DLd60B2eJMR5O7KY4/FNY+e7Q2QAKGsNIoWnIWwun/GclhcMz+zhbSS+HIA/zl9kXdWfxJWYrjFZwVuBcZHP1Qb/KYPYdBqIJJGCh4yN/cmUB9xz3UdCTDaKMxlEr6ZlEcuxCKXMdajbfxjYDh2Yw085lgMWuibJeAAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 03 15 52 15" title="" data-src="/static/2022-01-03-15-52-15-25cd3b11b7d347d775fd1b32d327cb94-fee1c.png" data-srcset="/static/2022-01-03-15-52-15-25cd3b11b7d347d775fd1b32d327cb94-a67b7.png 200w,\n/static/2022-01-03-15-52-15-25cd3b11b7d347d775fd1b32d327cb94-0b187.png 400w,\n/static/2022-01-03-15-52-15-25cd3b11b7d347d775fd1b32d327cb94-fee1c.png 800w,\n/static/2022-01-03-15-52-15-25cd3b11b7d347d775fd1b32d327cb94-f2bb5.png 967w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/b0pd9z?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<h2 id="border-image-属性与渐变边框"><a href="#border-image-%E5%B1%9E%E6%80%A7%E4%B8%8E%E6%B8%90%E5%8F%98%E8%BE%B9%E6%A1%86" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>border-image 属性与渐变边框</h2>\n<p>为什么 border-image 属性的渲染机制那么怪异？</p>\n<p>border-image 属性的规范出现得很早，浏览器也支持得很早。2008 年，Chrome 浏览器的第一个版本就已经支持 border-image 属性了（老语法）。在那个年代，所有图形效果全部都是使用图片实现的，例如圆角边框、圆角渐变选项卡等。</p>\n<p>开发者为了让选项卡背景或者按钮的边框高宽自适应，会把源图像尺寸做得很大，然后将边缘位置专门裁好放在图像的边缘，方便使用 background-position 属性进行控制。例如，图 3-33 展示的就是十几年前 CSS 开发所使用的选项卡背景图，可以看到右侧的边框部分被裁开了。</p>\n<p>实现的效果图。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-03-15-53-45-0948c7cf3c6f7ceffdf69b2b5096778a-11cd2.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 25.021720243266728%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsSAAALEgHS3X78AAAAoElEQVQY03VOaw+CMAzc//9vCozHBx/hmwlu7FE2BmObFolGYrxcL21z15R0TPRC8f9kvdRgHj+QeiB3Lt04Wev+0Rjn3PwdSy/tJZBbxwGsVINQgMdWbv1b0QSDTTusYSYUGd00zX72S4jRL4vHCjHEFHBGjSl+7Htgimx7raGqG8a4VOratjktT+cLrRpa1oesOGYFbrY+y6kxdn0+pScArhyKzH0qZAAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 03 15 53 45" title="" data-src="/static/2022-01-03-15-53-45-0948c7cf3c6f7ceffdf69b2b5096778a-fee1c.png" data-srcset="/static/2022-01-03-15-53-45-0948c7cf3c6f7ceffdf69b2b5096778a-a67b7.png 200w,\n/static/2022-01-03-15-53-45-0948c7cf3c6f7ceffdf69b2b5096778a-0b187.png 400w,\n/static/2022-01-03-15-53-45-0948c7cf3c6f7ceffdf69b2b5096778a-fee1c.png 800w,\n/static/2022-01-03-15-53-45-0948c7cf3c6f7ceffdf69b2b5096778a-11cd2.png 1151w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>通过内外两层便签分别定位左侧背景和右侧背景，就可以实现一个 1 ～ 7 个字的宽度自适应选项卡效果了，图 3-34 所示就是</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-03-15-54-28-46fa900608edeaaa14321133eb3273e2-99ffa.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 793px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 41.992433795712486%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAABVElEQVQY04WR207CQBCG+/4P4PEKb1VAo5F4JYYoBEEoPdGWnum29LxtFzQ9OIAYL0z8M5nMznz/ziZLFWWJVkGWr3OygcgygpyVKMlhmFiWPRyOfD/0vMBGDll/7Jk0I7br13VNFUXpeiGccZrD2FqiZrN9dHzSHwzv7h9Oz855QWy1by+vrv0ggh17EvZ9m51f5qXtdDqPjcbFa3/Q6720WjeaZnS7vafuc5Kkf5ihStJ8H2GMVd2c0oxpIdcLDMt2Vz7sjJMUH5gYZz/PLhwviBIc4xScEUAZIZtPyABBTnAGBfS30y2AgUYrMFdUvVNVVWVV1QdVO9X/iRqNJ8hxTXNJSE4z7Pt0NqGZhaKoqs5xwlyUGZanGaik6YxRVE0Q5bfxRJIXHC9QLMdHcRxFMZgZlpNkBQbwSZ7vy7JimBZ0wAkXQUbI0QyLn891w1Q1/QswxrLZNIr21QAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 03 15 54 28" title="" data-src="/static/2022-01-03-15-54-28-46fa900608edeaaa14321133eb3273e2-99ffa.png" data-srcset="/static/2022-01-03-15-54-28-46fa900608edeaaa14321133eb3273e2-e6b42.png 200w,\n/static/2022-01-03-15-54-28-46fa900608edeaaa14321133eb3273e2-2a82f.png 400w,\n/static/2022-01-03-15-54-28-46fa900608edeaaa14321133eb3273e2-99ffa.png 793w" data-sizes="(max-width: 793px) 100vw, 793px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>有没有觉得这种边缘划分再重新分配定位的套路有些熟悉？对，border-image 属性的作用机制就是源自这里，先划分再分配。或者我们可以这么认为，border-image 属性的设计初衷就是用来简化自适应边框或者自适应选项卡的开发的，因为这可以让源图像的体积大大减小，灵活性大大提升。例如，图 3-35 所示的 3 个 border-image 应用案例，源图像都是很小的图形。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-03-15-55-37-5ff620363aec11569336da79205d6bca-e07da.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 611px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 80.6873977086743%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAAsSAAALEgHS3X78AAADC0lEQVQoz01SCVPTUBDuX9bxQFFQUO6zY6UCgozI4CgMo8NVepe0lB6WHpQetE2TctiLJk2Tl/de4qbF0Z3Ny759u9+eJnp7ozhsiseFmGOdEl3XaVvEuSwpFXE+S2tVXCrgMkvYkppKoEhIjYRQMKCe/QJLE63ewgX/CuNouOesyR2cSVO2SHMZgCYci1NJHI+RzAU5T5JMmiTjavbCcAZj+KmUKpqmIVkTBUxwS5JqzWb97q4lCG2EWm2x1mg0BKEpinDWhRYoKSUmXaPgL4kCWMpOmzA+3KnX2cucY/dn0Otm8/lGrZ5PJeAa9h9HT/whxnfK+Ko3t4Tg+8hwApKGFIChBGKrPQZZRQg+YEPzV0CQo0bBmTabd7VqTVVVvQej0VaXBEGEJ0mSEELtdlv8SyBTSo2aCcYflz4PvZq0Hbr06m/9Mldhua1vP+w258+d3cMD++G+Y3Nj2/Lu46eVDbBcWVqfn7XGY8lutylZsKw8ejCwuLQuexzIMpuNJ/cPHOdnse2vm5HTUwAdHzOPjcyvrXxZtK4tf1jre/zafuTudVvPZHI/dvaCJ5Fe2pCVz3cSDEaB/UwoHD6LRGIA4XEH3G6/x+N3Oo95/urfqO5Jo5rRfP2u2eDZ4hVfrnCl60oZKlTkToVjb674HnNsUe5IRmSP48g8MXqeiPcQymxx4MlD8+TY/MTowtzMmxfPvm+sL8xNTwwNdpUj76bH3758/mlxwQSQw/19q9b3lrlp4rKr5in/4d762qpGMAeLqSj5bOblowdW86yqKhCzkE2XS4UKzwOQEXnn2+b464GAz6tjpN9eQ7bD/U8tM5PAVvMMBNnd2Vq2mCeGX72fmzb0s1Mjgy++rC6buoPVYOr3VXdb0KjXS4VLji2xxQJfZqFmudPh2RLIFa5snGUWY9XUNBZYhDWQpA4Y4e6qEEL1/4gQIohiR1YUBbUlSZYRUlVYIdORwx0MRTmOS6Uz8JZIpCLRWOAkFIsl0umLcCTm9R77mCDDBBwur+3ItW+zO91eHxNw+5g/HHoskGK7qqsAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 03 15 55 37" title="" data-src="/static/2022-01-03-15-55-37-5ff620363aec11569336da79205d6bca-e07da.png" data-srcset="/static/2022-01-03-15-55-37-5ff620363aec11569336da79205d6bca-20936.png 200w,\n/static/2022-01-03-15-55-37-5ff620363aec11569336da79205d6bca-da2be.png 400w,\n/static/2022-01-03-15-55-37-5ff620363aec11569336da79205d6bca-e07da.png 611w" data-sizes="(max-width: 611px) 100vw, 611px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/syreq9?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>但是，其他 CSS 新属性的崛起把 border-image 属性想要实现的效果用一种更好的方式实现了。图 3-35 所示的 3 个案例，使用 CSS 就完全可以实现，圆角可以使用 border-radius 属性模拟，多边框可以使用 box-shadow 模拟，并且这样做兼容性更好，IE9+ 版本均支持，而 border-image 属性在 IE11+ 版本才被支持。border-image 属性的竞争对手 background-image 属性更是 bug 一样的存在，使用它配合 CSS 渐变和多背景，任何规律的图形都可以模拟出来。</p>\n<p>以上这些原因导致 border-image 属性在众多 CSS 属性的竞争中逐渐没落，只在边框造型浮夸且不得不使用图片的场景中偶尔出现。然而，在 2012 年之后，随着各大浏览器对 border-image 属性开始了新的语法支持，border-image 属性又逐渐在实际项目开发中找到了属于自己的一片小天地，那就是和 CSS 渐变配合实现渐变边框、条纹边框。如果想要让某一个模块格外醒目，就可以使用渐变边框，代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="68824931771158670000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<p class=&quot;border-linear-gradient&quot;>上下渐变边框</p>\n<p class=&quot;border-radial-gradient&quot;>径向渐变边框</p>\n<style>\n   .border-linear-gradient {\n      border-style: solid;\n      border-image: linear-gradient(deepskyblue, deeppink) 20 / 10px;\n   }\n\n   .border-radial-gradient {\n      border-style: solid;\n      border-image: radial-gradient(deepskyblue, deeppink) 20 / 10px;\n   }\n</style>`, `68824931771158670000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>border-linear-gradient<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>上下渐变边框<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>border-radial-gradient<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>径向渐变边框<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n   <span class="token selector">.border-linear-gradient</span> <span class="token punctuation">{</span>\n      <span class="token property">border-style</span><span class="token punctuation">:</span> solid<span class="token punctuation">;</span>\n      <span class="token property">border-image</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>deepskyblue<span class="token punctuation">,</span> deeppink<span class="token punctuation">)</span> 20 / 10px<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">.border-radial-gradient</span> <span class="token punctuation">{</span>\n      <span class="token property">border-style</span><span class="token punctuation">:</span> solid<span class="token punctuation">;</span>\n      <span class="token property">border-image</span><span class="token punctuation">:</span> <span class="token function">radial-gradient</span><span class="token punctuation">(</span>deepskyblue<span class="token punctuation">,</span> deeppink<span class="token punctuation">)</span> 20 / 10px<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>最终效果如图 3-36 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-03-16-01-09-960099eb91d0796e84e0451ecfaa5df3-9c796.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 694px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 71.75792507204612%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsSAAALEgHS3X78AAACI0lEQVQoz6WR3W/SUBjGz79qvJLeOPXCmBjjLpaowc2BGVkIES+82IVXJrrFEoiEAS3rKl9tWbZRKKwflFH6CeecesoY4nbpm19Onr7Pe5LzPgUvqu6jsvuU9TaYNare4wh3QSTW3SesR1W8Z2UXvP+mmTaECPtzHNwyRyHCIQ6XEB2suTOI3QAlvmvgy4HsejD8txzb1jS115d7crcnX8iyfGcAIXzwtQcO06LvzKMG/utZ0+l4cq0M+t3uZb8n9wfK/ct0tgOYd5xn+ghiSI4A3oDnOITh6t0Y4ZUFAwRnaO7C2g4P9Oe/tAc/dIrWYrQao6+o3JDKDSh6QOUUilZidKRjNGkSiwyQMZ3KaQ+P9I08UDbL56/KYpz7vc2zyUZpr1XYb9Np4SgjHUaIRJDPwr5QSrWYZIPf4YU4d75Z6b0sgZO3nG9HO+NFvGgBDu/Wqn9jkb9zus2D6od6YM+W/mI9IoeDviCIUuesI0qSGKllore3EUTsXhMwiXpwL+2pNTYMVSdow5Ghjkzjftq1VAucvmYmF5Zr+lPdswx/YgZjM7AsZNuh7YRTB5PTttG1GRDLGpEx3zE8e+jwWzWg73LdLeYswTeS9ZNUs5JuFzNiISvRWekn4XOHiPwnsZgRiFVLNRsf651d/vINq8ZrIPyPAiHECJGsQlXVj8uMoly1xY7r+TzfqFZrzZbEshzDcvlCsdEUjstVwzAXOyMS7R+JhuRUV8nYnQAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 03 16 01 09" title="" data-src="/static/2022-01-03-16-01-09-960099eb91d0796e84e0451ecfaa5df3-9c796.png" data-srcset="/static/2022-01-03-16-01-09-960099eb91d0796e84e0451ecfaa5df3-fec2b.png 200w,\n/static/2022-01-03-16-01-09-960099eb91d0796e84e0451ecfaa5df3-1f263.png 400w,\n/static/2022-01-03-16-01-09-960099eb91d0796e84e0451ecfaa5df3-9c796.png 694w" data-sizes="(max-width: 694px) 100vw, 694px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>要想警示某一段内容存在风险，可以使用红色的条纹边框，代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="42640908726140530000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<div class=&quot;border-stripe&quot;>\n   我们可以使用红色条纹边框表示警示\n</div>\n<style>\n   .border-stripe {\n      border: 12px solid;\n      border-image: repeating-linear-gradient(-45deg, red, red 5px, transparent 5px transparent 10px) 12px;\n   }\n</style>`, `42640908726140530000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>border-stripe<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n   我们可以使用红色条纹边框表示警示\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n   <span class="token selector">.border-stripe</span> <span class="token punctuation">{</span>\n      <span class="token property">border</span><span class="token punctuation">:</span> 12px solid<span class="token punctuation">;</span>\n      <span class="token property">border-image</span><span class="token punctuation">:</span> <span class="token function">repeating-linear-gradient</span><span class="token punctuation">(</span>-45deg<span class="token punctuation">,</span> red<span class="token punctuation">,</span> red 5px<span class="token punctuation">,</span> transparent 5px transparent 10px<span class="token punctuation">)</span> 12px<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>最终效果如图 3-37 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-03-16-04-14-7d5b3b5b3b7030d8c1af90d9e31d3803-381aa.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 29.594477998274378%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsSAAALEgHS3X78AAABCUlEQVQY0z2MS2+CQBRG+f87Y9z41qUr1y54uKqCI6mxSlUKIwwwMIJFbYkJtzNonZxMzvfl3itBpwPNJgwGQtptIf0+DIdCOK2WiJxH5PR6Yr7bhXpdEjtZVuR5GoacLIq+4zh0nTSMzhE9kSCjNE+S+Ihjz2M+oS6+Mgb3O4xGUsmvFsW5+N14BLMUp6fPMDBt2yLB9uitXLz1yRrj5WH34fmWT9DuwC43ACjHYwlqNZhMYDoFTXsiyyAroKmlooioVsJLVRVjnIc0GhKYJsznT2Yz0HUBF8MAhASLBSyRKI2qf4GQBP+vrH6WX95dj91+XBqbtoP29urLfVtvdGvv0ESMleVr5Q+a/TUaXhGglQAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 03 16 04 14" title="" data-src="/static/2022-01-03-16-04-14-7d5b3b5b3b7030d8c1af90d9e31d3803-fee1c.png" data-srcset="/static/2022-01-03-16-04-14-7d5b3b5b3b7030d8c1af90d9e31d3803-a67b7.png 200w,\n/static/2022-01-03-16-04-14-7d5b3b5b3b7030d8c1af90d9e31d3803-0b187.png 400w,\n/static/2022-01-03-16-04-14-7d5b3b5b3b7030d8c1af90d9e31d3803-fee1c.png 800w,\n/static/2022-01-03-16-04-14-7d5b3b5b3b7030d8c1af90d9e31d3803-381aa.png 1159w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>我们甚至可以用 border-image 属性重新定义元素的虚线边框，虚线的尺寸和虚实比例都可以随意控制，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="44571742113938550000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<div class=&quot;border-dashed&quot;>\n   1: 1 的虚线\n</div>\n<style>\n   .border-dashed {\n      border: 1px dashed deepskyblue;\n      border-image: repeating-linear-gradient(135deg, deepskyblue, deepskyblue 5px, transparent 5px, transparent 10px) 1;\n   }\n</style>`, `44571742113938550000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>border-dashed<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n   1: 1 的虚线\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n   <span class="token selector">.border-dashed</span> <span class="token punctuation">{</span>\n      <span class="token property">border</span><span class="token punctuation">:</span> 1px dashed deepskyblue<span class="token punctuation">;</span>\n      <span class="token property">border-image</span><span class="token punctuation">:</span> <span class="token function">repeating-linear-gradient</span><span class="token punctuation">(</span>135deg<span class="token punctuation">,</span> deepskyblue<span class="token punctuation">,</span> deepskyblue 5px<span class="token punctuation">,</span> transparent 5px<span class="token punctuation">,</span> transparent 10px<span class="token punctuation">)</span> 1<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>图 3-38 展示的就是 Edge 浏览器、Chrome 浏览器和 Firefox 浏览器中的自定义虚线边框效果，可以看到，虽然各个浏览器默认的虚线边框不一样，但是自定义的虚线边框完成了统一。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-03-16-08-00-abb675b6bbd0c4ce2e832e0a97e11979-04367.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 28.57142857142857%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsSAAALEgHS3X78AAABKElEQVQY01VQ2W7CMBDM/39XKyjhEAj6QgvkhhyEFmI7JPZ0NmkfGmlje47d0Xo9+NU3YL8HnEPvwHKwciflegsEIXA8oW/UgAlnxdfxFUVAHMNSJ5j37Hsk5zNONMXZZTA82FVbNzTOywpBnCBKz4PBENfkORd5UQxcEMWQPhLGa/ivlUF5b1A3ho2A786NTVlfukV1V7g+NBQ5RUw8RnTaoBbfQ42DiHlZniNMM+TVFYcgQJaXNAAtp41civJ2Y8IUYZKhpUn4gvpjGOFSVENCKU3ca7kHKYkrJ8ON+5H9AeNOeT6t/Yf/caI3XQfz7KhhQxForbFcrZEwQcq088US2+07JpMZNpsdfL4/Pw7w5yu8vE7h+wtM33xMpjOsN1sopX4nOfwA3HPKuUHWUtcAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 03 16 08 00" title="" data-src="/static/2022-01-03-16-08-00-abb675b6bbd0c4ce2e832e0a97e11979-fee1c.png" data-srcset="/static/2022-01-03-16-08-00-abb675b6bbd0c4ce2e832e0a97e11979-a67b7.png 200w,\n/static/2022-01-03-16-08-00-abb675b6bbd0c4ce2e832e0a97e11979-0b187.png 400w,\n/static/2022-01-03-16-08-00-abb675b6bbd0c4ce2e832e0a97e11979-fee1c.png 800w,\n/static/2022-01-03-16-08-00-abb675b6bbd0c4ce2e832e0a97e11979-04367.png 1155w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/g9m1fc?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>border-image 属性最适合模拟宽度为 1px 的虚线边框。如果边框宽度比较大，实线的端点就会有明显的斜边，此时建议使用 background-image 属性和线性渐变语法进行模拟，或者干脆使用 SVG 元素配合 stroke-dasharray 实现更灵活的边框效果。</p>\n<h3 id="圆角渐变边框"><a href="#%E5%9C%86%E8%A7%92%E6%B8%90%E5%8F%98%E8%BE%B9%E6%A1%86" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>圆角渐变边框</h3>\n<p>有时候为了让渐变边框有圆角效果，我们的第一反应是使用 border-radius 属性，但事实是 border-radius 属性无法改变 border-image 属性生成的图形效果，我们需要使用其他的方法。</p>\n<ol>\n<li>\n<p>外层嵌套一层 <code class="language-text">&lt;div&gt;</code> 元素，然后设置圆角和溢出隐藏，代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="77780970837261750000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.father {\n  border-radius: 10px;\n  overflow: hidden;\n}`, `77780970837261750000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.father</span> <span class="token punctuation">{</span>\n  <span class="token property">border-radius</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>\n  <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>效果如图 3-39 所示。</p>\n</li>\n<li>\n<p>使用 clip-path 剪裁，该方法无须嵌套额外的元素，代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="15295454007291242000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.clip-path {\n  clip-path: inset(0 round 10px);\n}`, `15295454007291242000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.clip-path</span> <span class="token punctuation">{</span>\n  <span class="token property">clip-path</span><span class="token punctuation">:</span> <span class="token function">inset</span><span class="token punctuation">(</span>0 round 10px<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>实现的效果和图 3-39 所示的效果是一模一样的。</p>\n</li>\n</ol>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-03-16-12-17-193d2824663505735867b2bbac662dea-9afbc.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 37.30569948186529%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsSAAALEgHS3X78AAABEElEQVQY012Ou0/DMBCH/cfCgHhtHVBCWRELCyxsSDAxsDKhiKZNMrBQBh55SFhKSmLHLU7dOLGNk1IIPX3D3f0+6Q4YTrE5ZPse23X/2HHmDe4KZ95N91y27bCN+y9wchtXXCgpleigx7VaRbJFKdm7hOD6Kqp4qzYb1QYqfPOfx+MgDEJf44dR9Cv8oNT52Su4u3ipq/U7cRK/RwGcQBjDjwQm6PNf3Oo3x0/AO/IWGeOzkk8bSrLQiEIoJlUhpW4KIWhd5s1+6XBSVpRbWxZITx9Rz8KmjY0BNgfT/ogcDnPTXjYto6mmr3Eap9XwwUNi2KD7Tl3XhBBKaUFpkkywLoQRwmmaZQjlOBdCdP1vW/ByvT+S/Y8AAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 03 16 12 17" title="" data-src="/static/2022-01-03-16-12-17-193d2824663505735867b2bbac662dea-fee1c.png" data-srcset="/static/2022-01-03-16-12-17-193d2824663505735867b2bbac662dea-a67b7.png 200w,\n/static/2022-01-03-16-12-17-193d2824663505735867b2bbac662dea-0b187.png 400w,\n/static/2022-01-03-16-12-17-193d2824663505735867b2bbac662dea-fee1c.png 800w,\n/static/2022-01-03-16-12-17-193d2824663505735867b2bbac662dea-9afbc.png 1158w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/xxoz8k?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<h1 id="position-属性的增强"><a href="#position-%E5%B1%9E%E6%80%A7%E7%9A%84%E5%A2%9E%E5%BC%BA" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>position 属性的增强</h1>\n<p>本节主要介绍一个全新的 position 属性值——sticky，单词“sticky”的中文意思是“黏性的”，position: sticky 就是黏性定位。为了让接下来的描述更精准，我们不妨在这里先约定：黏性定位就是指元素应用了 position: sticky 声明；相对定位就是指元素应用了 position: relative 声明；绝对定位就是指元素应用了 position: absolute 声明；固定定位就是指元素应用了 position: fixed 声明。</p>\n<p>sticky 属性值刚出来的时候，在圈子里是引发过一阵小热度的。但是，在 2014 年至 2016 年这长达 3 年的时间里，Chrome 浏览器放弃了对它的支持，后来这个新特性就淡出了大众的视野。不知道出于什么原因，2017 年之后，Chrome 浏览器又重新开始支持黏性定位了。目前所有主流浏览器都已经支持黏性定位。</p>\n<p>黏性定位的兼容性如表 3-6 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-06-10-06-07-d8a641b45d6206daf5fdc2909274f573-244cb.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 30.116279069767444%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsSAAALEgHS3X78AAABQUlEQVQY0yXOSU+DQACGYX6+R+OtiUvUq4fGmzExTbWNdknswlIo+wAzAwVKGYYZYLCm3+m9PMknCSH6vs+yo2V7aZbL6k6WtY2szpe/urH3QDj9Way3iu0CEEJF1Q3TvpDzpIaRviGsJqKr26ZiLeeiY3Ul+pZx1vFSdITSUgjSckLrkrO6b1rO/onkYv/JRnHmvy21b90m5uK4fYUHczZ8ps5kZMWP86AlYDCDSwvwEuYnbeMNSXkocl9aw/BaR5Til/FqajjF7NO7H6CTd/t+V6PJh4FvJqCvo6uRP955PU/j9Hf49RCEASWRhCOzSp0scQJXTpAZRvswNBNkA19ByIkDNYcagib2VzjUktgGrubZauAraeJKCFoNTzE0jxmoShgFBqMxjIxTEZVFcGa0wijaVwRfglHM2aFh59vgDxQUQjqipHrqAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 06 10 06 07" title="" data-src="/static/2022-01-06-10-06-07-d8a641b45d6206daf5fdc2909274f573-fee1c.png" data-srcset="/static/2022-01-06-10-06-07-d8a641b45d6206daf5fdc2909274f573-a67b7.png 200w,\n/static/2022-01-06-10-06-07-d8a641b45d6206daf5fdc2909274f573-0b187.png 400w,\n/static/2022-01-06-10-06-07-d8a641b45d6206daf5fdc2909274f573-fee1c.png 800w,\n/static/2022-01-06-10-06-07-d8a641b45d6206daf5fdc2909274f573-244cb.png 860w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>可以说，黏性定位一定是日后高频使用的一个 CSS 新特性，所以大家务必要精通。</p>\n<h2 id="深入了解-sticky-属性值与黏性定位"><a href="#%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3-sticky-%E5%B1%9E%E6%80%A7%E5%80%BC%E4%B8%8E%E9%BB%8F%E6%80%A7%E5%AE%9A%E4%BD%8D" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>深入了解 sticky 属性值与黏性定位</h2>\n<p>过去，黏性定位效果一定是通过 JavaScript 代码实现的。这个效果常用在导航元素上，具体表现为：当导航元素在屏幕内的时候，导航元素滚动跟随；当导航元素就要滚出屏幕的时候，导航元素固定定位。</p>\n<p>sticky 属性值的设计初衷就是把原来 JavaScript 才能实现的黏性效果改由 CSS 实现。下面来看一个例子。</p>\n<p>滚动页面，大家就会发现，当导航元素距离上边缘距离为 0 的时候，就粘在了上边缘，效果如同固定定位的效果。这个效果的实现只需要几行 CSS 代码：</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/yxt3m2?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="21252009085532620000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`nav {\n   position: -webkit-sticky;\n   position: sticky;\n   top: 0;\n}`, `21252009085532620000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">nav</span> <span class="token punctuation">{</span>\n   <span class="token property">position</span><span class="token punctuation">:</span> -webkit-sticky<span class="token punctuation">;</span>\n   <span class="token property">position</span><span class="token punctuation">:</span> sticky<span class="token punctuation">;</span>\n   <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>该效果使用非常方便，且交互流畅，体验非常棒，谁用谁喜欢。</p>\n<p>人总是容易被视觉表象误导，黏性定位元素在“粘住”的时候，看起来效果跟固定定位一样。再加上传统的黏性定位效果是通过 JavaScript 计算滚动的位置，让 position 属性的值在 relative 和 fixed 之间切换来实现的，因此，很多 CSS 开发者误认为黏性定位就是相对定位和绝对定位的结合体。</p>\n<p>请注意，黏性定位效果底层的渲染规则和固定定位没有任何关系，而是相对定位的延伸。先说说黏性定位和相对定位相似的地方。</p>\n<ol>\n<li>元素发生偏移的时候，元素的原始位置是保留的。</li>\n<li>创建了新的绝对定位包含块，也就是黏性定位元素里面如果有绝对定位的子元素，那这个子元素设置 left 属性、top 属性、right 属性和 bottom 属性时的偏移计算是相对于当前黏性定位元素的。</li>\n<li>支持设置 z-index 属性值来改变元素的层叠顺序。</li>\n</ol>\n<p>再说说黏性定位和相对定位不一样的地方。</p>\n<ol>\n<li>偏移计算元素不一样。相对定位偏移计算的容器是父元素，而黏性定位偏移计算的元素是层级最近的可滚动元素（overflow 属性值不是 visible 的元素）。如果一个可滚动元素都没有，则相对浏览器视窗进行位置偏移。</li>\n<li>偏移定位计算规则不一样。黏性定位的计算规则比较复杂，涉及多个黏性定位专有的概念。</li>\n<li>重叠表现不一样。相对定位元素彼此独立，重叠的时候表现为堆叠；但是黏性定位元素在特定布局结构下，元素重叠的时候并不是表现为堆叠，而是会有 A 黏性定位元素推开 B 黏性定位元素的视觉表现。</li>\n</ol>\n<p>接下来深入讲解上面提到的 3 点不同之处，请大家务必重点阅读这些内容，否则使用黏性定位的时候很可能会感到困惑：明明设置了黏性定位样式，浏览器也支持，但是最终却没有黏性定位效果。</p>\n<h3 id="可滚动元素对黏性定位的影响"><a href="#%E5%8F%AF%E6%BB%9A%E5%8A%A8%E5%85%83%E7%B4%A0%E5%AF%B9%E9%BB%8F%E6%80%A7%E5%AE%9A%E4%BD%8D%E7%9A%84%E5%BD%B1%E5%93%8D" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>可滚动元素对黏性定位的影响</h3>\n<p>通常的 Web 页面都是窗体滚动的，而黏性定位偏移计算的元素是层级最近的那个滚动元素。因此，如果黏性定位元素的某个祖先元素的 overflow 属性值不是 visible，那么窗体滚动的时候就不会有黏性定位效果，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="90749083063860670000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<div>\n   <nav></nav>\n</div>\n<style>\n   div {\n      overflow: hidden;\n   }\n\n   nav {\n      position: sticky;\n      top: 0;\n   }\n</style>`, `90749083063860670000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>nav</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>nav</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n   <span class="token selector">div</span> <span class="token punctuation">{</span>\n      <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">nav</span> <span class="token punctuation">{</span>\n      <span class="token property">position</span><span class="token punctuation">:</span> sticky<span class="token punctuation">;</span>\n      <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>此时滚动页面，<code class="language-text">&lt;nav&gt;</code> 元素是没有黏性效果的。注意，这不是 bug，也不是 sticky 属性值没有渲染，而是因为此时 <code class="language-text">&lt;nav&gt;</code> 元素黏性定位的偏移计算是相对于父级 <code class="language-text">&lt;div&gt;</code> 元素计算的，黏性效果也只有在 <code class="language-text">&lt;div&gt;</code> 元素滚动的时候才能够体现。</p>\n<p>我们将 <code class="language-text">&lt;div&gt;</code> 元素样式微调一下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="78676092134831360000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`div {\n   height: 400px;\n   overflow: auto;\n}\n\ndiv::after {\n   content: \'\';\n   display: block;\n   height: 800px;\n}`, `78676092134831360000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">div</span> <span class="token punctuation">{</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 400px<span class="token punctuation">;</span>\n   <span class="token property">overflow</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">div::after</span> <span class="token punctuation">{</span>\n   <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">\'\'</span><span class="token punctuation">;</span>\n   <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 800px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>此时滚动 <code class="language-text">&lt;div&gt;</code> 元素，大家就会发现 <code class="language-text">&lt;nav&gt;</code> 元素没有跟着滚动，黏性定位效果表现得很好。因此，如果你的网页使用的是窗体滚动，又希望有黏性效果，那务必保证黏性定位元素的祖先元素中没有可滚动元素。</p>\n<h3 id="深入理解黏性定位的计算规则"><a href="#%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E9%BB%8F%E6%80%A7%E5%AE%9A%E4%BD%8D%E7%9A%84%E8%AE%A1%E7%AE%97%E8%A7%84%E5%88%99" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>深入理解黏性定位的计算规则</h3>\n<p>如果黏性定位元素的父元素的高度和黏性定位元素的高度相同，则垂直滚动的时候，黏性定位效果是不会出现的。要讲清楚这个问题，就必须深入理解黏性定位的计算规则。</p>\n<p>黏性定位中有一个“流盒”（flow box）的概念，指的是黏性定位元素最近的可滚动元素的尺寸盒子，如果没有可滚动元素，则表示浏览器视窗盒子。黏性定位中还有一个名为“黏性约束矩形”的概念，指的是黏性定位元素的包含块（通常是父元素）在文档流中呈现的矩形区域和流盒的 4 个边缘在应用黏性定位元素的 left、top、right 和 bottom 属性的偏移计算值后的新矩形的交集。由于滚动的时候流盒不变，而黏性定位元素的包含块跟着滚动，因此黏性约束矩形随着滚动的进行是实时变化的。假设我们的黏性定位元素只设置了 top 属性值，则黏性定位元素碰到黏性约束矩形的顶部时就开始向下移动，直到它完全被包含在黏性约束矩形中。</p>\n<p>上面就是黏性定位计算和渲染的规则，第一遍读下来肯定不知所云，不要急，对照下面这个例子，多看几次就知道什么意思了。</p>\n<p>有一个页面是窗体滚动，包含 <code class="language-text">&lt;div&gt;</code> 元素和 <code class="language-text">&lt;nav&gt;</code> 元素，这两个元素是父子关系，HTML 代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="36261326211836908000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<div>\n   <nav>\n      导航\n   </nav>\n</div>`, `36261326211836908000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>nav</span><span class="token punctuation">></span></span>\n      导航\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>nav</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>其中：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="81865206871363030000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`div {\n   height: 100px;\n   margin-top: 50px;\n   border: solid deepskyblue;\n}\n\nnav {\n   position: sticky;\n   top: 20px;\n   background: lightskyblue;\n}`, `81865206871363030000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">div</span> <span class="token punctuation">{</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>\n   <span class="token property">margin-top</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>\n   <span class="token property">border</span><span class="token punctuation">:</span> solid deepskyblue<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">nav</span> <span class="token punctuation">{</span>\n   <span class="token property">position</span><span class="token punctuation">:</span> sticky<span class="token punctuation">;</span>\n   <span class="token property">top</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>\n   <span class="token property">background</span><span class="token punctuation">:</span> lightskyblue<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>随着滚动的进行，<code class="language-text">&lt;nav&gt;</code> 元素的黏性约束矩形范围和实际的渲染表现如图 3-41 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-06-11-12-38-951a06cf41e0fb9d821641d457e967ee-40f0e.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 47.00352526439483%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsSAAALEgHS3X78AAACHElEQVQoz2P4//z536tX/588/u/Uqf8nT3y8cuXAoZM79hzbs//kvkOnH1y7eeLo6Ssnz106dub6pRuXjp5ZMGfjhk0nl60+fO/6XYb///+faWqdY2y1wtVnqZXj/qqabcFh2+yd9zh7bPUJPN7QON/OZbGj50Jzh62ZeU9qa+66ud8NDLrj5Pxq4UKQ5uMt7Sst7HZ5BWyyd9tWXX8tOvqJm9sTT48rQYHn6upfBAc/DQ157utzNyf7dnX16+ysF4UFL+LiHs6dC9J8p7PrgZPjS3+/h25ux6trr6elX46OvRwZdTE+4VpDw9PU1GcFBa/y8++Wld2urHwRH/80K+tpXNyd6dPBmts7Tzg4XQgNO+3idrKy6klhwbOUlOcZGY/T0q7V1z9KTHySm/skOvpWfv7N6mog4yEQ+fndnjIFpPl7V9c7V9cPCQkf3N2fNDa+Ky7+kp3zKSPjPVBPS8v7kJD3YWHvnZxe5OU9q6z84Ob21t//vbPzy5kzQZqXVFWVGRg0OTg0WFuXBQQ0enhWW1jUWFvXOjqWBwTU29rWWFk12NhUeXpW+fk1WFo2ODoW6+u3JCeDNC9aubK8ubl1woTm/v661tb2CROqWlvru7qaenpqW1pa+vvqurpaJ05s6Oiob2tr6utr7uvLq6pq7ugAaYaDH9++ffv67c+v30D2ty9fP77/AASfQOjj21dvPn349OvXL2T1AA+3StNCJ4N2AAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 06 11 12 38" title="" data-src="/static/2022-01-06-11-12-38-951a06cf41e0fb9d821641d457e967ee-fee1c.png" data-srcset="/static/2022-01-06-11-12-38-951a06cf41e0fb9d821641d457e967ee-a67b7.png 200w,\n/static/2022-01-06-11-12-38-951a06cf41e0fb9d821641d457e967ee-0b187.png 400w,\n/static/2022-01-06-11-12-38-951a06cf41e0fb9d821641d457e967ee-fee1c.png 800w,\n/static/2022-01-06-11-12-38-951a06cf41e0fb9d821641d457e967ee-40f0e.png 851w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>下面介绍一下详细的计算规则。</p>\n<p>由于 <code class="language-text">&lt;nav&gt;</code> 这个黏性定位元素的 top 偏移是 20px，因此，流盒矩形就是滚动窗口矩形再往下偏移 20px，也就是图 3-41 所示的红色区域。而 <code class="language-text">&lt;nav&gt;</code> 这个黏性定位元素的包含块就是其父元素 <code class="language-text">&lt;div&gt;</code>（设置了边框）。黏性约束矩形指的是流盒矩形和包含块的重叠区域，因此，图 3-41 所示的黏性约束矩形就是红色区域和方框区域重叠的矩形区域。</p>\n<p>在默认状态下（图 3-41 左一），由于 <code class="language-text">&lt;div&gt;</code> 元素设置了 <code class="language-text">margin-top: 50px</code>，因此，<code class="language-text">&lt;nav&gt;</code> 这个黏性定位元素的顶部距离黏性约束矩形的顶部还有 33px（即 30px 的距离加上 3px 的边框高度），此时不会有黏性效果。随着浏览器页面滚动，<code class="language-text">&lt;nav&gt;</code> 元素的顶部和黏性约束矩形的顶部距离越来越小，直到距离为 0。此时 <code class="language-text">&lt;nav&gt;</code> 元素开始下移，将自己约束在黏性约束矩形范围内，如图 3-41 左二所示。浏览器页面继续滚动，<code class="language-text">&lt;nav&gt;</code> 元素的底部也快要超出黏性约束矩形范围的限制了，如图 3-41 右二所示。最终，<code class="language-text">&lt;nav&gt;</code> 元素的底部和黏性约束矩形范围的底部重合。由于黏性定位元素不能超出黏性约束矩形范围的限制，因此此时黏性效果失效，<code class="language-text">&lt;nav&gt;</code> 元素跟着一起滚走了，如图 3-41 所示右一。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/2qcc91?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>明白了黏性定位的计算规则，也就明白了为什么黏性定位元素的父元素和自身高度计算值一样的时候没有黏性效果。因为此时包含块高度和黏性定位元素的高度相同，这导致黏性约束矩形的最大高度和黏性定位元素的高度相同，黏性定位元素已经完全没有了实现黏性效果的空间。</p>\n<h3 id="理解黏性定位的堆叠规则"><a href="#%E7%90%86%E8%A7%A3%E9%BB%8F%E6%80%A7%E5%AE%9A%E4%BD%8D%E7%9A%84%E5%A0%86%E5%8F%A0%E8%A7%84%E5%88%99" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>理解黏性定位的堆叠规则</h3>\n<p>黏性定位元素的偏移由容器决定，如果多个黏性定位元素在同一容器中，则这几个黏性定位元素会产生元素重叠的情况；如果黏性定位元素分布在不同的容器中，同时这些容器在布局上是上下紧密相连的，则视觉上会表现为新的黏性定位元素挤开原来的黏性定位元素，形成依次占位的效果。</p>\n<p>例如，有一个按字母排序的通讯录页面，希望在页面滚动的时候将 26 个字母依次定位在页面的顶部。下面两种 HTML 代码结构会有不同的黏性定位效果：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="28994676961887224000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<h6>A</h6>\n<ul>\n   <li>Alice</li>\n</ul>\n<h6>B</h6>\n<ul>\n   <li>贝贝王爷有点萌</li>\n</ul>\n---\n<dl>\n   <dt>A</dt>\n   <dd>Alice</dd>\n</dl>\n<dl>\n   <dt>B</dt>\n   <dd>贝贝王爷有点萌</dd>\n</dl>`, `28994676961887224000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h6</span><span class="token punctuation">></span></span>A<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h6</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>Alice<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h6</span><span class="token punctuation">></span></span>B<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h6</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>贝贝王爷有点萌<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span>\n---\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dl</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dt</span><span class="token punctuation">></span></span>A<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dt</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dd</span><span class="token punctuation">></span></span>Alice<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dd</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dl</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dl</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dt</span><span class="token punctuation">></span></span>B<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dt</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dd</span><span class="token punctuation">></span></span>贝贝王爷有点萌<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dd</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dl</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>其中，字母所在的元素设置了黏性定位的 CSS 声明：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="50427614694034190000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`h6,\ndt {\n   position: sticky;\n   top: 0;\n}`, `50427614694034190000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">h6,\ndt</span> <span class="token punctuation">{</span>\n   <span class="token property">position</span><span class="token punctuation">:</span> sticky<span class="token punctuation">;</span>\n   <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>在第一种 HTML 代码结构中，随着页面的滚动，A ～ Z 所在的字母元素是一个一个重叠上去的；在第二种 HTML 代码结构中，随着页面的滚动，A ～ Z 所在的字母元素是依次推上去的，如图 3-42 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-06-11-32-38-40388b571743c56899b7fc9fa95b1300-59b40.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 66.50306748466258%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAABiUlEQVQoz21SXZOCMAzk//89fHB8UVSapny1tAUKKLfQG+U8M4XppNlks0lS15UgoY1pdlbXdQhhHEdB1FR1s/6rpigapeKZjFlCSIZhaBrdbxaGIZ6h7x+PxzSOOYmG2ZxOmsgc0jZNbZq2x+N8OCyXSzLPM0oRCVBY/pnRmgslmM/ns2QFz3OzZbslwCil2s2cc8YgXiMdyq9go/EqiVADXH5TRvCyJH3fEVFRFkKILMuc92gVSERHMF6ZeflmoD2pQkkplSrKqpymef8MEkCyehN+0wZ4HENZFgB738WIPdhak99zlmxtCwq++xOzCgYvOFvn9ulxB3/FCv1DBWud3iyKMk3TCn4+HwohzHBjQnh7lYVC1toIuN6uUBTpMFEoEsVLur4nSSBWlhWWA/0NISAiCoY4qI2dybJL29qPvhKzDkZ3XYf0CHLocjcqZpmmaS4kpiU3zVHz3TM+1PHeYymB+RjGXtsvo3oNHaxoVRV70mbX2y3HXql7LtYDPQXBhbtz/gX+AeC96KDaoBi6AAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 06 11 32 38" title="" data-src="/static/2022-01-06-11-32-38-40388b571743c56899b7fc9fa95b1300-fee1c.png" data-srcset="/static/2022-01-06-11-32-38-40388b571743c56899b7fc9fa95b1300-a67b7.png 200w,\n/static/2022-01-06-11-32-38-40388b571743c56899b7fc9fa95b1300-0b187.png 400w,\n/static/2022-01-06-11-32-38-40388b571743c56899b7fc9fa95b1300-fee1c.png 800w,\n/static/2022-01-06-11-32-38-40388b571743c56899b7fc9fa95b1300-59b40.png 815w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/bj3orb?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>至于为什么黏性定位元素在同一个容器下会重叠，而在不同容器下则会依次推开，这和上面等高父元素没有黏性效果的原因一样，都是黏性定位计算规则下的样式表现。</p>\n<p>当我们的黏性定位元素分布在不同容器的时候，就会有多个不同的黏性约束矩形。这些黏性约束矩形正好一个一个排列得很整齐，于是在视觉上就表现为上一个黏性定位元素被滚走，下一个黏性定位元素正好开始有黏性效果。当我们的黏性定位元素都在一个容器里的时候，大家都共用一个巨大的黏性约束矩形，因此，滚动的时候元素会一个一个不断往上重叠。</p>\n<p>很显然，依次推送的黏性定位效果体验要更好。因此，在实际开发的时候，如果我们有多个并列的黏性定位元素，建议使用不同的容器元素分别将它们包起来。</p>\n<h3 id="其他细节"><a href="#%E5%85%B6%E4%BB%96%E7%BB%86%E8%8A%82" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>其他细节</h3>\n<p>Safari 浏览器中使用黏性定位需要添加 -webkit- 私有前缀。</p>\n<p>IE 浏览器可以使用 Polyfill 进行支持，可以兼容到 IE9+ 版本。</p>\n<p>同时设置 top 属性、bottom 属性的时候，上下两个方位的黏性效果会同时生效。水平方向的 left 属性、right 属性也是类似的，不过由于水平滚动场景不常见，因此，left 属性、right 属性并不常用。</p>\n<h2 id="position-sticky-声明的精彩应用层次滚动"><a href="#position-sticky-%E5%A3%B0%E6%98%8E%E7%9A%84%E7%B2%BE%E5%BD%A9%E5%BA%94%E7%94%A8%E5%B1%82%E6%AC%A1%E6%BB%9A%E5%8A%A8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>position: sticky 声明的精彩应用——层次滚动</h2>\n<p>黏性定位可以实现很多很棒的效果，例如巧妙配合 top 黏性定位和 bottom 黏性定位可以实现带有视差效果的层次滚动。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/v4l4oj?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>可以看到，随着页面的滚动，标题依次置顶，同时网友评论在恰当的时候从新闻内容的后面出现，如图 3-43 所示。</p>\n<p>图 3-43 所示的富有层次感的滚动效果就是借助黏性定位效果实现的，下面介绍一下具体的原理。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-06-11-40-59-2ae195dc56f5d0951600c4f61d38054b-1ccec.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 374px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 111.22994652406418%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAIAAABPIytRAAAACXBIWXMAAA7DAAAOwwHHb6hkAAADqUlEQVQ4y6XSX0hbVxwH8AN93p4G3daNDcvWhxCiYWCjibRIoVBfRk3FvsgGW2v+mpayJztYYQxbOx+6ybaWNtHqHNZq4qRqMtdkSXA2GmOaa3LzP9Yk3qvmj/feGL33t3tj3R829GGHD+f3vefcw3k4P3T9+ufqS2qDzqBVay62Xjx/vlmpVH544YKSJ0SlsrlSmveDUtnS0tLU1NTZ2YnUKq36I80V1VV9u1ahUIhEIolY3Pj+CYlIJJZKK2rENTXi6uqXs1gskUiqqqra2tqQ3W7p7f3SaOy5e697YOCOxXLf5R5btA/PTZicQ72uwW8Ej753jfzgGrzjGr3rco26XWMOx/DSkgOVyy/W1jy5nJ8kF/N5P8PgAOsCjoCMB17MQsoNxDxs+GBtAXJ+ALKCAMihXC6EYbZYzBkKPQ2H7dmsh+NiLBsVwIqAS7GQYrlERfLlFhtm2VVULODB4Ewi4Y5GHfGYkyQWAOLAxQRs9D/sbXER4FZRoYAvB2ficReOP43FncTfDx+kcpjawJKYLR2xp2POdMSxsTLLMUGWXj4EFWBLCRRtVeKyD3DFyaBUjMtrg/W1vuPvLL337kFOHF9887VIqxLhJ2WBo29gx972v/Lq86OvB4695UXoEEeOzCOEKxQoYrPO95m8gwPeoR+xR8PLIyNBi+UQ4+PY48dJpxMZrn12+ZJep7/WrtKeOXeu7tQp+enTB2tobJTW1qp0OnTVcEX18WWDWq9Xqc+ePSOXy+Tyun+ol8nr6ypke7mhQS6VVqtU7Wh9PRDApvHwrwHMmkq5CcLLMCGaDlYs0+WwYDdC70ZpLkbvxuidCM2EKAorlZJoKx/CMVsy6kyEHStx53rWwz8jt8s3QwIgKTQm36Hx3yA4A5gNMKvwyYSEd+Y7rFDOYJm5+KY/THijmz6CiQAUOSgAmwJIABUBOgSbPkg/g9VZyCzAJgYc39tFAAptmI3pB11Z0+2s8VbW1E30f03e+4q830XeMJDffkGabgn6uvfdJk3d5IObxHc3cj8/RJmumymNNtVhSOn1KX3HSochqdUJDIakTp/UaPdp/go6ffyTT7M9PQj+x0DAssBxQuTDXhbmSvg3fvwZWFa4OZfL88o7O9vb2zTD8CslpkTRdLFYFOYtitqiCnzZovK5AkVTeb4UipWbAcxjZvP4VCgc+33ume85xq9MT1nNE1NznoVp6y+j5onJJ7YnkzaLZfJh35Bp4Cdjf//UjJ3/7Q++A6rHi29QPwAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 06 11 40 59" title="" data-src="/static/2022-01-06-11-40-59-2ae195dc56f5d0951600c4f61d38054b-1ccec.png" data-srcset="/static/2022-01-06-11-40-59-2ae195dc56f5d0951600c4f61d38054b-66c87.png 200w,\n/static/2022-01-06-11-40-59-2ae195dc56f5d0951600c4f61d38054b-1ccec.png 374w" data-sizes="(max-width: 374px) 100vw, 374px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<ol>\n<li>\n<p>为标题和网友评论元素都设置黏性定位，网友评论元素同时设置 z-index: -1，将其藏在新闻内容元素的后面，CSS 代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="19163127192193130000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`h4 {\n  position: sticky;\n  top: 0;\n}\n\nfooter {\n  position: sticky;\n  bottom: 50vh;\n  /* 为了默认隐藏在其他元素后面 */\n  z-index: -1;\n}`, `19163127192193130000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">h4</span> <span class="token punctuation">{</span>\n  <span class="token property">position</span><span class="token punctuation">:</span> sticky<span class="token punctuation">;</span>\n  <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">footer</span> <span class="token punctuation">{</span>\n  <span class="token property">position</span><span class="token punctuation">:</span> sticky<span class="token punctuation">;</span>\n  <span class="token property">bottom</span><span class="token punctuation">:</span> 50vh<span class="token punctuation">;</span>\n  <span class="token comment">/* 为了默认隐藏在其他元素后面 */</span>\n  <span class="token property">z-index</span><span class="token punctuation">:</span> -1<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>每一段的标题和网友评论都使用一个 <code class="language-text">&lt;section&gt;</code> 元素包起来，让黏性定位元素隶属于不同的容器元素，这样就实现了依次置顶占位的效果。</p>\n</li>\n</ol>\n<p>上面的例子只是抛砖引玉，只要是符合标题、内容和辅助信息结构的内容布局，都非常适合使用这种层次滚动交互效果，通过几行简单 CSS 代码就可以实现，性价比极高，非常推荐使用。</p>\n<h1 id="font-family-属性和-font-face-规则新特性"><a href="#font-family-%E5%B1%9E%E6%80%A7%E5%92%8C-font-face-%E8%A7%84%E5%88%99%E6%96%B0%E7%89%B9%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>font-family 属性和 @font-face 规则新特性</h1>\n<p>本节主要介绍与字体相关的一些新特性，包括 font-family 属性的功能加强，以及 @font-face 自定义字体。</p>\n<h2 id="system-ui-等全新的通用字体族字体族"><a href="#system-ui-%E7%AD%89%E5%85%A8%E6%96%B0%E7%9A%84%E9%80%9A%E7%94%A8%E5%AD%97%E4%BD%93%E6%97%8F%E5%AD%97%E4%BD%93%E6%97%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>system-ui 等全新的通用字体族字体族</h2>\n<p>表示一个系列字体，而非单指具体某一个字体。字体族又分为普通字体族和通用字体族，例如 Arial 就是普通字体族。通用字体族数量有限，传统的通用字体族包括下面这些（对应的示意图均来自 CSS FontsModule Level 4 规范文档）。</p>\n<ul>\n<li>\n<p>serif：衬线字体，指笔画有粗有细，开始和结束带有装饰的字体。图 3-44 所示的就是衬线字体。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-08-16-00-24-5ba8a974cc3af18bf71d99f14b7aa6eb-dd64c.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 37.98449612403101%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAABCklEQVQY06VQy2qEQBCcf/cHBI+CCF68CHrQi+Ahht3FxSizvjUYdTDLxptBQXyk2SESwuaUOswU3V01NY22bSOE6Lre973v+1mWpWm6PcKyLHBGUeQ4DpBhGBBcmqYxDAMy0zQFQVBVFYrruj60MAyDZVmMsSiKCPwsy5IkyXVdcOF5nuM4KqagGkq6roNctm3LsqwoCqJ5pmmC9jzP4zgC3/7Acsduh16/ked5EARN0yRJEoYhBPM8D8gvPVTiOIZu27YIRsuyLIoC1gbLqKqqrmtwIaQBDo70wT3/+/UKA/hyaQhB2z+A9sXQz/T95/F0xji43T5efPz0fDg558PReauan1ukWb4AkE+2FyGzN9oAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 08 16 00 24" title="" data-src="/static/2022-01-08-16-00-24-5ba8a974cc3af18bf71d99f14b7aa6eb-fee1c.png" data-srcset="/static/2022-01-08-16-00-24-5ba8a974cc3af18bf71d99f14b7aa6eb-a67b7.png 200w,\n/static/2022-01-08-16-00-24-5ba8a974cc3af18bf71d99f14b7aa6eb-0b187.png 400w,\n/static/2022-01-08-16-00-24-5ba8a974cc3af18bf71d99f14b7aa6eb-fee1c.png 800w,\n/static/2022-01-08-16-00-24-5ba8a974cc3af18bf71d99f14b7aa6eb-dd64c.png 1032w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n<li>\n<p>sans-serif：无衬线字体，指笔画粗细均匀，没有额外装饰的字体。图 3-45 所示的就是无衬线字体。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-08-16-01-18-e577fd71846b96ddba94304341d75e9c-785eb.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 40.56147144240077%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAABGklEQVQY06VRsY6CQBTcP+RvLGnoLKwpLAjRhs6KwlhihYeJQgBZQEACCeES40UXcLlREuMlV1xyU0x2dmfevrdL+r7nnK9Wq6qqiqIwDGO9Xve/ATbwfD7f7/dZlp1OJwJt27YgCJqmmaYpiqIsy23bvtzvybIsR6PRdDpVFGU8Hj/ClmVJkqTr+mKxmEwmqqrWdY39+xNDbGBKwzCM0N1sNlsul2QofL1eu67j/H67sfP53P8NxHVdDJCmaZ7nlNI0y7DwfR8cRZHjOE3TvG5GR3Ecw58kCQzE8zzk4YYOggASL7Hb7ZCECcwYG0YAf9Y1jrbb7cdmg2FJ/w8Q/gZoxppDQPERl8vXMUkd1/MDeqBhFB+fvf/AN2sYs0hO+GBcAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 08 16 01 18" title="" data-src="/static/2022-01-08-16-01-18-e577fd71846b96ddba94304341d75e9c-fee1c.png" data-srcset="/static/2022-01-08-16-01-18-e577fd71846b96ddba94304341d75e9c-a67b7.png 200w,\n/static/2022-01-08-16-01-18-e577fd71846b96ddba94304341d75e9c-0b187.png 400w,\n/static/2022-01-08-16-01-18-e577fd71846b96ddba94304341d75e9c-fee1c.png 800w,\n/static/2022-01-08-16-01-18-e577fd71846b96ddba94304341d75e9c-785eb.png 1033w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n<li>\n<p>monospace：等宽字体，指所有字形具有相同的固定宽度的字体。图 3-46 所示的就是等宽字体。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-08-16-02-26-600d0a0bf97927eb83a98b0178166eb4-673a2.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 47.39696312364425%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsSAAALEgHS3X78AAABPklEQVQoz6VRy46CQBCcn+UH/ACuJnj2xF6NMYR4UVniI/EgB5eDiUJCDCxBnoosAQRBge04WeI+blunrpnqqeoeVH+Boihd14uikGW5LMv6L/T7fUVRoDgej6BBVVUBsW2bIIjxeBxFUbvdliQJDpsnsOZ2u5Ek2ev1wKPVagmCgLBiPp8Dmc1mLMuCYrPZPDfjYr1+63a7Lw90Op3BYIDw9eVyAUWWZWEYuq4LJr8zX6/X+/2e53mSJEEQAEWgq56AfZr6R3OapniK8gHEMAyk5ThuNBoNh0NRFGmankwmy+VytVqBVRN7t9ty3Ot0Ol0sFiDmeR45jmOaJuxgv9+rqno6nYBqmmZZlmEYOAVuhtE8z4PVgga27fs+qv8BVH1HXdWmZfv+OY7jc/ChvesH03JczziYeV4034bxCced6cND6f1tAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 08 16 02 26" title="" data-src="/static/2022-01-08-16-02-26-600d0a0bf97927eb83a98b0178166eb4-fee1c.png" data-srcset="/static/2022-01-08-16-02-26-600d0a0bf97927eb83a98b0178166eb4-a67b7.png 200w,\n/static/2022-01-08-16-02-26-600d0a0bf97927eb83a98b0178166eb4-0b187.png 400w,\n/static/2022-01-08-16-02-26-600d0a0bf97927eb83a98b0178166eb4-fee1c.png 800w,\n/static/2022-01-08-16-02-26-600d0a0bf97927eb83a98b0178166eb4-673a2.png 922w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n<li>\n<p>cursive：手写字体，中文中的楷体（font-family: Kaiti）就属于手写字体。图 3-47 所示的就是手写字体。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-08-16-03-19-6fcb554c4bd5be89f58b78c73b129535-0204f.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 52.613240418118465%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABYklEQVQoz51RwWrCQBDdf/Qn7BekORsqeshJ8OzZnlQ8iIIhIE12k5amBhuqaKwgOSRqihGjSZ+mhGDTS4dlGfbNm3lvloRhaFlWvV7v9/txHJ9Opzgvjsfjfr+/eSSe50mSVKlUhsNhFEWNRsM0TQDn8zmpSJJutzsajZD4vk8pbTYfL2QQWq1WqVQyDEPTNEgYj8cpByhu13U57r5arSKXZblQKPA8fyErijKdTmu1WqfTEUURr/P5PKUlLXRdLxbvBEEYDAaUsYdymeM4jTGiqirgxWJh2/ZkMoH/IAiyxpIuqkpXqxVsb7fb2WyGSTBLEux/QTabDXSu1+vlNXa7XTotOxzWsAtUOo4DCaiEBOK5LvYEJzCGZUB/LhlMFDDG8KPtdrvX66EFydWTkqNrlu2FFR4Ohx/Z0a/4yyGg9P+Q4CY3MNOe360Pe/np+1/6y6tKNRzjzXxSaHAdmB3wDcifVVeuTBpvAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 08 16 03 19" title="" data-src="/static/2022-01-08-16-03-19-6fcb554c4bd5be89f58b78c73b129535-fee1c.png" data-srcset="/static/2022-01-08-16-03-19-6fcb554c4bd5be89f58b78c73b129535-a67b7.png 200w,\n/static/2022-01-08-16-03-19-6fcb554c4bd5be89f58b78c73b129535-0b187.png 400w,\n/static/2022-01-08-16-03-19-6fcb554c4bd5be89f58b78c73b129535-fee1c.png 800w,\n/static/2022-01-08-16-03-19-6fcb554c4bd5be89f58b78c73b129535-0204f.png 861w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n<li>\n<p>fantasy：奇幻字体，主要用来装饰和表现效果，字形和原本字符可以没有关系。从这一点看，自定义的小图标字体就属于奇幻字体。图 3-48 所示的就是奇幻字体。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-08-16-04-18-903ddd96b2d06b0e3eb846de85a62225-38753.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 665px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 58.64661654135338%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAABXElEQVQoz41SwW6CQBTkj7x786P4ARMuHrzwCV4QQ5NGAhpqLYo0JsUVY5taJYQDQUJCwkEQFeyTtUqwNp3Dwg4z++a9hQijiCRJx3GiKErT9PgbML9arXieB9mFJ1zXLZfLkiRRFGXb9kVawHq9bjQanU7HNM12u401xGw2q1QqtVqtVCqpqgpUkiS3ZoSmijJSlKGqvnIcd65sGEa9Xq9WqzRN36sMzHw+h8Ce500mE1gxSeAHrpZmON4BlmHBOfbxH8g38mPOYn9lWCwW0PxyuUQIHQ6HvC4IAk3TYGC6roMMBtbLYFkWAR8YhoExCoLAsiysl+T4xff98Xgsy7IoiuCBC2s2m3AQ8ES+h5wnzaPQ6vWeC/s/BnaruQ5sE4bh6SdL9vs9lIJdHMebExcBs93Gu92ucMrVLPVepKc+murycAQepvXwpqFef8AL3a703OIe3z8+C9G+AY//lNoddWtSAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 08 16 04 18" title="" data-src="/static/2022-01-08-16-04-18-903ddd96b2d06b0e3eb846de85a62225-38753.png" data-srcset="/static/2022-01-08-16-04-18-903ddd96b2d06b0e3eb846de85a62225-a480d.png 200w,\n/static/2022-01-08-16-04-18-903ddd96b2d06b0e3eb846de85a62225-4026e.png 400w,\n/static/2022-01-08-16-04-18-903ddd96b2d06b0e3eb846de85a62225-38753.png 665w" data-sizes="(max-width: 665px) 100vw, 665px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n</ul>\n<p>传统的通用字体族在 CSS 世界一书已经详细介绍过了，这里不再赘述，我们把目光投向全新的通用字体族。全新的通用字体族包括以下几种。</p>\n<ul>\n<li>system-ui：系统 UI 字体。</li>\n<li>emoji：适用于 emoji 字符的字体家族。</li>\n<li>math：适用于数学表达式的字体家族。</li>\n<li>fangsong：中文字体中的仿宋字体家族。</li>\n</ul>\n<p>system-ui 和 emoji 这两种通用字体族尤其实用。下面我就对每一种通用字体族做一下详细的介绍。</p>\n<h3 id="system-ui-通用字体族"><a href="#system-ui-%E9%80%9A%E7%94%A8%E5%AD%97%E4%BD%93%E6%97%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>system-ui 通用字体族</h3>\n<p>在过去，如果想要使用系统字体，只能使用 font: menu、font: status-bar 等 CSS 声明。但是 menu、status-bar、small-caption 等 font 关键字属性值是包含字号的，不同操作系统中的字号会不一样，因此我们还需要通过设置 font-size 属性值重置字号大小，比较麻烦。</p>\n<p>system-ui 字体族的出现很好地解决了使用系统字体的需求。有人会有疑问：为什么要使用系统字体？这是因为所有网站都会设置通用字体，过去流行在网站中指定具体的字体，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="50304281538497400000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`body {\n   font-family: Helvetica, Segoe UI, Arial, \'PingFang SC\', \'Microsoft YaHei\', sans-serif;\n}`, `50304281538497400000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">body</span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> Helvetica<span class="token punctuation">,</span> Segoe UI<span class="token punctuation">,</span> Arial<span class="token punctuation">,</span> <span class="token string">\'PingFang SC\'</span><span class="token punctuation">,</span> <span class="token string">\'Microsoft YaHei\'</span><span class="token punctuation">,</span> sans-serif<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>指定具体的字体存在以下不足。</p>\n<ol>\n<li>\n<p>字体可能会相互冲突。例如，有些用户给自己的 Windows 操作系统安装了苹方字体，但显示器密度并没有跟上，导致网页里显示的字体效果很奇怪，文字瘦瘦的，边缘糊糊的，不利于阅读，如图 3-49 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-08-16-12-56-049d616770f4494e99b2f396070d7397-82c98.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 781px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 38.92445582586427%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAABNElEQVQY04VQa0/CMBTd//8zxsQPRkGCmr2gewArG0EQ4xfHSvfq1nbdxp1+Qkk8OWlvbs/NuT1a33V93xdZ5iInCDDGwSpY2rbr+/5mEzmuj5DjOw5N8/4PtJ9LSkkIOZETK1mWZydKv+KY0hSalNJjHBdF2bZt9+30e1gI/r7fhVGI0Hw+m5mWfUxiVrEIB3PHMw3TMKBpJSQBcdd3F8NKNXmeMcZIQo4DkrIspRRgm8ImKSDL86Ku6yvOFWPbaIPx+rDfh2HoIvfw8TmYXO55/c8g6tpONlI1TSMl51wp1f8HDcScCwhDCAF1oxTUkB9sKODkvK6BFbxy4AAxUAjGKm37tlssV6yqPH+1WAaut8Dr6P5h/Kpb0xd99DRFjmdYM4gNOrphP44m48mzbto3t3dnKw29UBhrKJMAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 08 16 12 56" title="" data-src="/static/2022-01-08-16-12-56-049d616770f4494e99b2f396070d7397-82c98.png" data-srcset="/static/2022-01-08-16-12-56-049d616770f4494e99b2f396070d7397-ee9e5.png 200w,\n/static/2022-01-08-16-12-56-049d616770f4494e99b2f396070d7397-b8c14.png 400w,\n/static/2022-01-08-16-12-56-049d616770f4494e99b2f396070d7397-82c98.png 781w" data-sizes="(max-width: 781px) 100vw, 781px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n<li>\n<p>系统升级后可能有了更适合网页的字体，但是由于网页指定了字体，因此并不能使用更适合网页的字体。例如 OS X 10.9 Mavericks 版本、OS X 10.10 Yosemite 版本和 OS X 10.11 El Capitan 版本分别使用了不同的默认字体，如下表所示</p>\n</li>\n</ol>\n<table>\n<thead>\n<tr>\n<th align="left">OS X 版本</th>\n<th align="left">系统字体</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align="left">10.11 Mavericks</td>\n<td align="left">San Francisco</td>\n</tr>\n<tr>\n<td align="left">10.10 Yosemite</td>\n<td align="left">Helvetica Neue</td>\n</tr>\n<tr>\n<td align="left">10.9 EI Capitan</td>\n<td align="left">Lucida Grande</td>\n</tr>\n</tbody>\n</table>\n<p>San Francisco 字体具有动态特性，更适合小屏幕，可以提升阅读体验。如果我们代码中指定了 Helvetica Neue 字体，则我们的页面就没办法跟着系统一起提升体验。</p>\n<p>综上所述，全局的字体设置应该随着系统字体变动，理论上只需要下面的 CSS 代码就可以实现：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="92354135579737740000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`body {\n   font-family: system-ui;\n}`, `92354135579737740000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">body</span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> system-ui<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>但是，由于兼容性问题的存在，实际开发过程中是不能直接使用上面的 CSS 代码的，还需要使用其他字体族兜底。</p>\n<h4 id="兼容性-3"><a href="#%E5%85%BC%E5%AE%B9%E6%80%A7-3" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>兼容性</h4>\n<p>system-ui 字体族的兼容性如表 3-8 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-08-16-21-43-046d6f76535efe35b9cb070409e45f62-66f68.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 28.8695652173913%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsSAAALEgHS3X78AAABRElEQVQY0x2K307CMBxG9+Q+gokvgCZ6oegNCSZGiUqCgoohhC4MBhuUld/aja3r/rRjbHPx5EvOd3G0KBJL04pETPaw3ToA1DDM38lsMkXf44lDAOnG8Gs80w2MyW63R2hu2bj+R6uUyFWspGgmZXysTqeyyFVSHtNGuRJ1lTRBVSanIs5kVBxlWcgs402snZseZvj6FX0gs1Ts0L/j85djGT532/jtCrne2ZPD+e5i4D4ip8o8CIc/q4dcRnEE2uWacgGdwVS37LrmduuGDnp1nd6Oujq63zLvvI/jiLRGuKdva+VvyGfnvU0pkQnTTgIHzPZhefBsRteEWX7g8GDnkQWFje+aCTM8aoUEcbp0wQRn7YNFYclD0JT0mGtlCRXc2TuGSxbN4QF23VUqCIV1klCf2TwgWUqBmDKlKmN5xgSHPwFHQKWQdLy5AAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 08 16 21 43" title="" data-src="/static/2022-01-08-16-21-43-046d6f76535efe35b9cb070409e45f62-fee1c.png" data-srcset="/static/2022-01-08-16-21-43-046d6f76535efe35b9cb070409e45f62-a67b7.png 200w,\n/static/2022-01-08-16-21-43-046d6f76535efe35b9cb070409e45f62-0b187.png 400w,\n/static/2022-01-08-16-21-43-046d6f76535efe35b9cb070409e45f62-fee1c.png 800w,\n/static/2022-01-08-16-21-43-046d6f76535efe35b9cb070409e45f62-66f68.png 1150w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>关于其他兜底字体的设置可以参考一些大型网站，例如 GitHub 站点的字体设置：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="28645651213938580000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`body {\n   font-family: -apple-system, BlinkMacSystemFont, Segoe UI, Helvetica, Arial, sans-serif, Apple Color Emoji,\n      Segoe UI Emoji;\n}`, `28645651213938580000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">body</span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> -apple-system<span class="token punctuation">,</span> BlinkMacSystemFont<span class="token punctuation">,</span> Segoe UI<span class="token punctuation">,</span> Helvetica<span class="token punctuation">,</span> Arial<span class="token punctuation">,</span> sans-serif<span class="token punctuation">,</span> Apple Color Emoji<span class="token punctuation">,</span>\n      Segoe UI Emoji<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>先具体分析一下这个字体设置的组成。</p>\n<ul>\n<li>\n<p>-apple-system 只在 macOS 中有效，是 system-ui 字体族还没出现之前的一种私有语法，可以让 Firefox 浏览器和 Safari 9.1 ～ Safari 10.1 浏览器使用系统字体。</p>\n</li>\n<li>\n<p>BlinkMacSystemFont 也只在 macOS 中有效，是 Chrome 53 ～ Chrome 55 浏览器使用系统字体的一种非标准语法。考虑到目前 system-ui 字体族的兼容性，并从适应未来的角度来看，BlinkMacSystemFont 可以删掉了。</p>\n</li>\n<li>\n<p>Segoe UI、Helvetica、Arial 是给不支持系统字体的浏览器兜底用的，如 IE 浏览器、Edge 浏览器等。其中需要注意以下 3 点。</p>\n<ul>\n<li>Segoe UI 是 Windows 操作系统从 Vista 版本开始默认的西文字体族，可以在 Windows 操作系统上以最佳的西文字体显示。</li>\n<li>Helvetica 是 macOS 和 iOS 中很常用的一款无衬线字体。</li>\n<li>Arial 是全平台都支持的一款无衬线字体，可以作为最后的兜底，例如较老版本的 Windows 操作系统。</li>\n</ul>\n<p>可能是 GitHub 的开发者不喜欢 Android 操作系统，这里的字体设置遗漏了 Roboto 字体。Roboto 字体是为 Android 操作系统设计的一款无衬线字体，可以在 Android 操作系统上以最佳的西文字体显示。</p>\n</li>\n<li>\n<p>Apple Color Emoji 和 Segoe UI Emoji 是 emoji 字体，此处同样遗漏了 Android 操作系统的 emoji 字体。关于 emoji 字体的更多内容后面会讲解，这里先不做介绍。</p>\n</li>\n</ul>\n<p>通过上面的分析讲解，我们可以去粗取精，得到一段最佳的系统字体设置代码（暂时不考虑 emoji 字体）：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="79063458152745290000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`body {\n   font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;\n}`, `79063458152745290000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">body</span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> system-ui<span class="token punctuation">,</span> -apple-system<span class="token punctuation">,</span> Segoe UI<span class="token punctuation">,</span> Roboto<span class="token punctuation">,</span> Helvetica<span class="token punctuation">,</span> Arial<span class="token punctuation">,</span> sans-serif<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>字体设置还没结束，上面的 CSS 代码还差对 emoji 字体的设置。</p>\n<h3 id="emoji-通用字体族"><a href="#emoji-%E9%80%9A%E7%94%A8%E5%AD%97%E4%BD%93%E6%97%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>emoji 通用字体族</h3>\n<p>目前主流的操作系统都已经内置 emoji 字体，如 macOS、iOS、Android 操作系统和 Windows 10 操作系统等。然而，虽然主流的操作系统内置了 emoji 字体，但是有些 emoji 字符并不会显示为彩色的图形，需要专门指定 emoji 字体，代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="79440202855650640000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.emoji {\n   font-family: Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol, Noto Color Emoji;\n}`, `79440202855650640000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.emoji</span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> Apple Color Emoji<span class="token punctuation">,</span> Segoe UI Emoji<span class="token punctuation">,</span> Segoe UI Symbol<span class="token punctuation">,</span> Noto Color Emoji<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>我先具体分析一下这个字体设置的组成。</p>\n<ul>\n<li>Apple Color Emoji 用在 Apple 的产品中的，如 iPhone（iOS）或者 Mac Pro（macOS）等。</li>\n<li>Segoe UI Emoji 是用在 Windows 操作系统中的 emoji 字体。</li>\n<li>Segoe UI Symbol 是在 Windows 7 操作系统中添加的一种新字体，是一种 Unicode 编码字体，显示的是单色图案，非彩色图形。</li>\n<li>Noto Color Emoji 是谷歌的 emoji 字体，用在 Android 和 Linux 操作系统中。</li>\n</ul>\n<p>以上 4 种字体涵盖了所有主流的操作系统。不过每次使用 emoji 字体都要指定 4 个元素有些麻烦，加上 Noto Color Emoji 直接作为 font-family 属性值没有效果，因此我们可以专门定义一个新的 emoji 字体来优化代码，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="65748146998145260000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`@font-face {\n   font-family: Emoji;\n   src: local(\'Apple Color Emoji\'), local(\'Segoe UI Emoji\'), local(\'Segoe UI Symbol\'), local(\'Noto Color Emoji\');\n}\n\n.emoji {\n   font-family: Emoji;\n}`, `65748146998145260000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token atrule"><span class="token rule">@font-face</span></span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> Emoji<span class="token punctuation">;</span>\n   <span class="token property">src</span><span class="token punctuation">:</span> <span class="token function">local</span><span class="token punctuation">(</span><span class="token string">\'Apple Color Emoji\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">local</span><span class="token punctuation">(</span><span class="token string">\'Segoe UI Emoji\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">local</span><span class="token punctuation">(</span><span class="token string">\'Segoe UI Symbol\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">local</span><span class="token punctuation">(</span><span class="token string">\'Noto Color Emoji\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.emoji</span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> Emoji<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>我们来看一下上面 emoji 字体设置的效果。下面是两段不同的 HTML 代码：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="89855061898716840000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<p>笑脸☺：\\263a、铅笔✏：\\270f、警示⚠：\\26a0</p>\n<p class=&quot;emoji&quot;>笑脸☺：\\263a、铅笔✏：\\270f、警示⚠：\\26a0</p>`, `89855061898716840000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>笑脸☺：\\263a、铅笔✏：\\270f、警示⚠：\\26a0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>emoji<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>笑脸☺：\\263a、铅笔✏：\\270f、警示⚠：\\26a0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>在 Windows 10 操作系统下的 Chrome 浏览器中为图 3-50 所示的效果。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-08-16-46-25-09459a146de70695cf7a684ff25620c3-e132d.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 24.651924651924652%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA+klEQVQY0yWOwW6DMBBE+f9bf6hKm0o9RK3SKgECZjF2TEgE2LFDsEPW1KjvsNKMdnY2olC8rd4prayznFVxnCglq4quP9YQTLuY6SHrpfz+2sRJ0ratNibe7wghkfd+CqCf5xkRn/8gWjtaN+ETPeLsF6bHgvdB4ZJAjLI8P6Rxtn65m3BdCVHfhgEACgBBNkZ16noVtdBXvd1uGat4+ersIGXPjzwKiUtzOsPnw92dc8aYMJVSl3MjWx5aghzHe+jsum646ea4mqbw1qi1jupTU3FhbiNjnFLW9TJNs0NGSFFCyQFoWMgJ/PzuSspE3ZS02cdpkmZ5AX+9lBIIHEs3bwAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 08 16 46 25" title="" data-src="/static/2022-01-08-16-46-25-09459a146de70695cf7a684ff25620c3-fee1c.png" data-srcset="/static/2022-01-08-16-46-25-09459a146de70695cf7a684ff25620c3-a67b7.png 200w,\n/static/2022-01-08-16-46-25-09459a146de70695cf7a684ff25620c3-0b187.png 400w,\n/static/2022-01-08-16-46-25-09459a146de70695cf7a684ff25620c3-fee1c.png 800w,\n/static/2022-01-08-16-46-25-09459a146de70695cf7a684ff25620c3-b1a91.png 1200w,\n/static/2022-01-08-16-46-25-09459a146de70695cf7a684ff25620c3-e132d.png 1221w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>在 Android 操作系统下的 Chrome 浏览器中为图 3-51 所示的效果。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-08-16-46-53-1a07cd5b7086cbfd77bcf3e2e435cbe8-98981.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 20.915032679738562%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAx0lEQVQI1x2Ny3KDMBRD+f/vaTdddttV00yhhDiEwcRPjG3utZ1xoS5nJWmkUbVt277vHRk/P14dfeHCNE1tjDl9nfu+B4C2bYUQdV133WWxnpAbIWQ/qBhXbu6eUQOGiCsAlgHnwqrHMwJiSCnCQQkRRPx3WAghVN/NlV3fkruYBbyz5dN7198HPf3kZMpV6S3L4r2/9YMV7ynIdUWttZSyyjlzPgNGDDjPRkg10kkqxYRmTFrnih5G+mDcWqeUpnQ6Cjrn3z8omN2fkpOFqgAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 08 16 46 53" title="" data-src="/static/2022-01-08-16-46-53-1a07cd5b7086cbfd77bcf3e2e435cbe8-fee1c.png" data-srcset="/static/2022-01-08-16-46-53-1a07cd5b7086cbfd77bcf3e2e435cbe8-a67b7.png 200w,\n/static/2022-01-08-16-46-53-1a07cd5b7086cbfd77bcf3e2e435cbe8-0b187.png 400w,\n/static/2022-01-08-16-46-53-1a07cd5b7086cbfd77bcf3e2e435cbe8-fee1c.png 800w,\n/static/2022-01-08-16-46-53-1a07cd5b7086cbfd77bcf3e2e435cbe8-b1a91.png 1200w,\n/static/2022-01-08-16-46-53-1a07cd5b7086cbfd77bcf3e2e435cbe8-98981.png 1224w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>可以看到，应用了 emoji 字体的那段文字的字符图案都变成了彩色的 emoji 图形。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/g76fln?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>如果我们仔细观察，就会发现 emoji 字体对普通文本的渲染也产生了影响。例如在 Windows 10 操作系统下的 Chrome 浏览器中，文字在应用 emoji 字体后显示的字体不再是微软雅黑；在 Android 操作系统下的 Chrome 浏览器中，在应用 emoji 字体后，数字和字母的字形变粗了，字宽加大了。这种效果肯定不是我们需要的，因此，在实际开发的时候，emoji 字体设置应该放在系统字体设置后面。结合前面的最佳系统字体设置代码</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="35171593443698490000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`@font-face {\n   font-family: Emoji;\n   src: local(\'Apple Color Emoji\'), local(\'Segoe UI Emoji\'), local(\'Segoe UI Symbol\'), local(\'Noto Color Emoji\');\n}\n\nbody {\n   font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Emoji;\n}`, `35171593443698490000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token atrule"><span class="token rule">@font-face</span></span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> Emoji<span class="token punctuation">;</span>\n   <span class="token property">src</span><span class="token punctuation">:</span> <span class="token function">local</span><span class="token punctuation">(</span><span class="token string">\'Apple Color Emoji\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">local</span><span class="token punctuation">(</span><span class="token string">\'Segoe UI Emoji\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">local</span><span class="token punctuation">(</span><span class="token string">\'Segoe UI Symbol\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">local</span><span class="token punctuation">(</span><span class="token string">\'Noto Color Emoji\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">body</span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> system-ui<span class="token punctuation">,</span> -apple-system<span class="token punctuation">,</span> Segoe UI<span class="token punctuation">,</span> Roboto<span class="token punctuation">,</span> Helvetica<span class="token punctuation">,</span> Arial<span class="token punctuation">,</span> sans-serif<span class="token punctuation">,</span> Emoji<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>实际效果如何？我们可以做一个测试：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="84037963868933280000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`p {\n   font: menu;\n}\n\n.emoji {\n   font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Emoji;\n}`, `84037963868933280000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">p</span> <span class="token punctuation">{</span>\n   <span class="token property">font</span><span class="token punctuation">:</span> menu<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.emoji</span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> system-ui<span class="token punctuation">,</span> -apple-system<span class="token punctuation">,</span> Segoe UI<span class="token punctuation">,</span> Roboto<span class="token punctuation">,</span> Helvetica<span class="token punctuation">,</span> Arial<span class="token punctuation">,</span> sans-serif<span class="token punctuation">,</span> Emoji<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>为了方便演示，我们在 HTML 代码中增加一个 Unicode 值为 1f600 的笑脸，代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="67569483136587770000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<p>笑脸：☺\\263a😀\\1f600、铅笔：✏\\270f、警示：⚠\\26a0</p>\n<p class=&quot;emoji&quot;>笑脸：☺\\263a😀\\1f600、铅笔：✏\\270f、警示：⚠\\26a0</p>`, `67569483136587770000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>笑脸：☺\\263a😀\\1f600、铅笔：✏\\270f、警示：⚠\\26a0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>emoji<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>笑脸：☺\\263a😀\\1f600、铅笔：✏\\270f、警示：⚠\\26a0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>在 Windows 10 操作系统和 macOS 下的 Chrome 浏览器中分别有图 3-52 和图 3-53 所示的效果。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-08-16-54-59-cd9d2782a07bab5a119d3d9babd4cdd1-7790f.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 52.40032546786006%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAAB3UlEQVQoz41S246bMBDl/7+l6lOfV2r3rVVVpQlJdsMdYsBgMDb3jXo64/zAIlkMw/HMmXPGK/IM/vmCaZpQFBkK0eL66wvy20/ESQ7ZNCiyHJfLlTAzhBDI8wKqbXH2zzDGolUKURRBygZe13WY5xmPx8MVnUaLTsaYpxHGWuz7TpcM5mXBNlvYQROe4nWF1hrbtmFdrbs7jiO82/sb6lo6QF3XEMQy/PMVvZKOyUKFwiBATd1NG6OtBRpip3WPgPLLMqHKX1BXAndRwmsa+jkMjo2LtUGvRxr/CUhp3L7XjmUhKmT53eVb1UF1PcWEu98pX6BtFTxFP1gHZtIRgI8xAxVvHCtuUlU1yrICYyuahrViHBfgnFK9y3NjD594WKd9//gMFN7p+BdJVuGhfkNG3xEkEmX4Chn/wPU9ImbCsfV934lelqVzlA05HA7ETmEgo8IwRJqmT5eNnfBvVVhMRfEM2xWYhxp2JNfJbXaQ12RdVieNJb1XMrGlHH+v60ZFB5f3jscjsiwlgTXebhGS4IQh/oYkzZ2LXOxIU7BmH0NIOxlAkJ5NI3GiPdy3CYt8QRKHxDKCx514FHaRz0hdbP8UXetnV14TdpVH031PbwOe7Imho3KH4539DwPB8V001RATAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 08 16 54 59" title="" data-src="/static/2022-01-08-16-54-59-cd9d2782a07bab5a119d3d9babd4cdd1-fee1c.png" data-srcset="/static/2022-01-08-16-54-59-cd9d2782a07bab5a119d3d9babd4cdd1-a67b7.png 200w,\n/static/2022-01-08-16-54-59-cd9d2782a07bab5a119d3d9babd4cdd1-0b187.png 400w,\n/static/2022-01-08-16-54-59-cd9d2782a07bab5a119d3d9babd4cdd1-fee1c.png 800w,\n/static/2022-01-08-16-54-59-cd9d2782a07bab5a119d3d9babd4cdd1-b1a91.png 1200w,\n/static/2022-01-08-16-54-59-cd9d2782a07bab5a119d3d9babd4cdd1-7790f.png 1229w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>在 Android 操作系统下的 Chrome 浏览器和 iOS 下的 Safari 浏览器中有图 3-54 和图 3-55 所示的效果。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-08-16-56-04-14768e35defef020357ac1954be1d829-0af45.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 44.841592201462234%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABnklEQVQozx1RyYrbUBDU/39KboEcAyGHHDIQSDweR7LkkbW8fd9ly5LTk0fTNPWq6K7uqmnq+jzcxTfUfKk7Np8+kf7Hqb5QSoZhOB6PMWWMSde2SqnD4QCZUt51Xd/3lZQy5+Wexuh4iDmoLkfjnF/KYo31PmzZlewBKaWAEvK2uhAcINX53DCuC/tKh18T4qT5rFj33g9AH8cBE/ZcmJPDNGPvHXQLIazuO55b4FScC2NMiDcpDdTTzMaJEsoIodY6QC79dB0QIFIqhAhYGKe5vw5cyMoYC1Fycs4qZZREYEoqwKzRRmvDKYZplYYvJYSwHzQphLTWVtu2wTDWh3VdtY0ev2T1V5lQSprnyVj3iJOzIqXMGBHK77ku9lWq8HisFcbI+bTH1spB6RDlm9eIcdhi5pyD+J5UcBw6p5goZcuS1tAY/WG2wghp45/utxcXaWIkP5OdhdS322KMjqnsN5k8CVCVAqd5PB5beJECwTqq5/83IompTDFMWLUdHHiEeH2rD8dT9z4izOvmfG4v1+v453DsRwqSfd//AQq+7rzG3njoAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 08 16 56 04" title="" data-src="/static/2022-01-08-16-56-04-14768e35defef020357ac1954be1d829-fee1c.png" data-srcset="/static/2022-01-08-16-56-04-14768e35defef020357ac1954be1d829-a67b7.png 200w,\n/static/2022-01-08-16-56-04-14768e35defef020357ac1954be1d829-0b187.png 400w,\n/static/2022-01-08-16-56-04-14768e35defef020357ac1954be1d829-fee1c.png 800w,\n/static/2022-01-08-16-56-04-14768e35defef020357ac1954be1d829-b1a91.png 1200w,\n/static/2022-01-08-16-56-04-14768e35defef020357ac1954be1d829-0af45.png 1231w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>很有意思，图 3-52 ～图 3-55 所示的 emoji 字体效果居然没有一个是一样的。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/s27bg3?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>很多开发者懵了，emoji 效果的出现难道没有规律的吗？emoji 字体放在后面居然让 emoji 图形还原成字符了？实际上，上面所有问题出现的原因都是 emoji 前面的那些字体的 Unicode 范围涵盖了 emoji 字符的 Unicode 范围。例如，😀 这个字符的 Unicode 值是 1f600，是非常靠后的字符，这种以 1f 开头的 5 位数的 Unicode 值都是非常安全的字符，常规字体的 Unicode 范围并未覆盖这么广。因此，大家可以看到，无论在哪个操作系统下或哪个浏览器中，😀 都能以 emoji 图形显示。</p>\n<p>但是，那些靠前的传统的 Unicode 字符就不是这样的。例如 ☺ 这个字符，其 Unicode 值是 263a，比较小，位置非常靠前，很多常见字体中就有这个字符的字体信息。例如，Helvetica 和 Arial 字体可以让 \\263a 笑脸以字符图案呈现而不是 emoji 图形，因此，无论是在 Windows 操作系统还是在 macOS 中，\\263a 笑脸都是字符效果。但是 \\263a 笑脸在 iOS 下 Safari 浏览器中显示的是 emoji 图形，这是因为 iOS 中的 system-ui 字体族包含了 emoji 字体，如果我们删掉 system-ui，类似下面的 CSS 代码：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="5048378893291838000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.emoji {\n   font-family: Helvetica, Arial, sans-serif, Emoji;\n}`, `5048378893291838000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.emoji</span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> Helvetica<span class="token punctuation">,</span> Arial<span class="token punctuation">,</span> sans-serif<span class="token punctuation">,</span> Emoji<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>大家可以发现，emoji 笑脸又变成单调的字符图案了。</p>\n<p>最后再说一下为何 \\263a 笑脸在 Android 操作系统下的 Chrome 浏览器中没有变成字符，这是因为 Android 浏览器并没有 Helvetica 和 Arial 这两个字体。所以，将 emoji 字体设置放在最后，出现部分字符没有变成 emoji 图形的情况，并不是 emoji 字体的问题，而是被为了兼容而设置的其他字体干扰的结果。</p>\n<p>于是，我想到了一种优化方法，那就是把 emoji 字体放在 Helvetica 和 Arial 这两个字体的前面，同时通过 unicode-range 属性调整 emoji 字体生效的 Unicode 范围：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="50890420226145780000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`@font-face {\n   font-family: Emoji;\n   src: local(\'Apple Color Emoji\'), local(\'Segoe UI Emoji\'), local(\'Segoe UI Symbol\'), local(\'Noto Color Emoji\');\n   unicode-range: U+1F000-1F644, U+203C-3299;\n}\n\n.emoji {\n   font-family: system-ui, -apple-system, Segoe UI, Roboto, Emoji, Helvetica, Arial, sans-serif;\n}`, `50890420226145780000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token atrule"><span class="token rule">@font-face</span></span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> Emoji<span class="token punctuation">;</span>\n   <span class="token property">src</span><span class="token punctuation">:</span> <span class="token function">local</span><span class="token punctuation">(</span><span class="token string">\'Apple Color Emoji\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">local</span><span class="token punctuation">(</span><span class="token string">\'Segoe UI Emoji\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">local</span><span class="token punctuation">(</span><span class="token string">\'Segoe UI Symbol\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">local</span><span class="token punctuation">(</span><span class="token string">\'Noto Color Emoji\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token property">unicode-range</span><span class="token punctuation">:</span> U+1F000-1F644<span class="token punctuation">,</span> U+203C-3299<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.emoji</span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> system-ui<span class="token punctuation">,</span> -apple-system<span class="token punctuation">,</span> Segoe UI<span class="token punctuation">,</span> Roboto<span class="token punctuation">,</span> Emoji<span class="token punctuation">,</span> Helvetica<span class="token punctuation">,</span> Arial<span class="token punctuation">,</span> sans-serif<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>此时，系统字体、emoji 字体和向下兼容字体达到了完美的平衡。</p>\n<p>假设有如下 HTML 代码：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="74425419828248850000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<p>&#x263a;\\263a&#x270f;\\270f&#x26a0;\\26a0&#x1f600;\\1f600&#x1f638;\\1f638&#x1f921;\\1f921</p>\n<p class=&quot;emoji&quot;>&#x263a;\\263a&#x270f;\\270f&#x26a0;\\26a0&#x1f600;\\1f600&#x1f638;\\1f638&#x1f921;\\1f921</p>`, `74425419828248850000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token entity" title="&#x263a;">&amp;#x263a;</span>\\263a<span class="token entity" title="&#x270f;">&amp;#x270f;</span>\\270f<span class="token entity" title="&#x26a0;">&amp;#x26a0;</span>\\26a0<span class="token entity" title="&#x1f600;">&amp;#x1f600;</span>\\1f600<span class="token entity" title="&#x1f638;">&amp;#x1f638;</span>\\1f638<span class="token entity" title="&#x1f921;">&amp;#x1f921;</span>\\1f921<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>emoji<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token entity" title="&#x263a;">&amp;#x263a;</span>\\263a<span class="token entity" title="&#x270f;">&amp;#x270f;</span>\\270f<span class="token entity" title="&#x26a0;">&amp;#x26a0;</span>\\26a0<span class="token entity" title="&#x1f600;">&amp;#x1f600;</span>\\1f600<span class="token entity" title="&#x1f638;">&amp;#x1f638;</span>\\1f638<span class="token entity" title="&#x1f921;">&amp;#x1f921;</span>\\1f921<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>这段代码在 Windows 10 操作系统下的 Chrome 浏览器中的效果会如图 3-56 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-08-17-11-24-e014f6168b9dcb5a0255b6a8a078b9f2-d086f.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 29.159935379644587%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsSAAALEgHS3X78AAABI0lEQVQY002PW07DMBBFs/9vFsAHYg1sIIgWAaJN2zwdvzJO3Lza2HHiVAUXhMSVRjp3dDTSeKPWjFKEEOdcAGCMmSNOEsSC5wca+5iWcRhs/UcBLEF5+PpONgEHhnHuXS6XeZ6tm3kxxtgbLdYubjf0YHTn6mTMqSnneZqt1Urp89kuN89L/DtgKWGCow9BIsYlzVdVsaZMptEmWd1DKTCF/dsTiXwQVZah5GUtCyAEe50kWg3GTKe+MaMyk21qWstcKdN3bV9zM01K67Y99l0zjqMex75t3bNKKa8QEkQ5DIOUDcqpOxwlaB9mmBAhKhDHum45L1KEwzhNM1RVEsoqitM4ybyv6/XrJ9e/OIYCEKaHQxzsws/t7hBGg1K/zn/5G3h1R9meZlWrAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 08 17 11 24" title="" data-src="/static/2022-01-08-17-11-24-e014f6168b9dcb5a0255b6a8a078b9f2-fee1c.png" data-srcset="/static/2022-01-08-17-11-24-e014f6168b9dcb5a0255b6a8a078b9f2-a67b7.png 200w,\n/static/2022-01-08-17-11-24-e014f6168b9dcb5a0255b6a8a078b9f2-0b187.png 400w,\n/static/2022-01-08-17-11-24-e014f6168b9dcb5a0255b6a8a078b9f2-fee1c.png 800w,\n/static/2022-01-08-17-11-24-e014f6168b9dcb5a0255b6a8a078b9f2-b1a91.png 1200w,\n/static/2022-01-08-17-11-24-e014f6168b9dcb5a0255b6a8a078b9f2-d086f.png 1238w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>其他操作系统下第二行内容中的 emoji 图形也都全部正常显示了。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/0xgyql?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>于是，我们就可以得到无衬线字体 CSS 最佳实践代码，这套 CSS 代码适合用于设置页面主体文字内容。大家可以看看自己的代码，如果还是传统的字体设置，就可以换成下面这段 CSS 代码：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="2883753017708201500"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`@font-face {\n   font-family: Emoji;\n   src: local(\'Apple Color Emoji\'), local(\'Segoe UI Emoji\'), local(\'Segoe UI Symbol\'), local(\'Noto Color Emoji\');\n   unicode-range: U+1F000-1F644, U+203C-3299;\n}\n\nbody {\n   font-family: system-ui, -apple-system, Segoe UI, Roboto, Emoji, Helvetica, Arial, sans-serif;\n}`, `2883753017708201500`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token atrule"><span class="token rule">@font-face</span></span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> Emoji<span class="token punctuation">;</span>\n   <span class="token property">src</span><span class="token punctuation">:</span> <span class="token function">local</span><span class="token punctuation">(</span><span class="token string">\'Apple Color Emoji\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">local</span><span class="token punctuation">(</span><span class="token string">\'Segoe UI Emoji\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">local</span><span class="token punctuation">(</span><span class="token string">\'Segoe UI Symbol\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">local</span><span class="token punctuation">(</span><span class="token string">\'Noto Color Emoji\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token property">unicode-range</span><span class="token punctuation">:</span> U+1F000-1F644<span class="token punctuation">,</span> U+203C-3299<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">body</span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> system-ui<span class="token punctuation">,</span> -apple-system<span class="token punctuation">,</span> Segoe UI<span class="token punctuation">,</span> Roboto<span class="token punctuation">,</span> Emoji<span class="token punctuation">,</span> Helvetica<span class="token punctuation">,</span> Arial<span class="token punctuation">,</span> sans-serif<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>下面附上我觉得不错的衬线字体和等宽字体的字体族设置代码：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="6825295633310779000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.font-serif {\n   font-family: Georgia, Cambria, \'Times New Roman\', Times, serif;\n}\n\n.font-mono {\n   font-family: Menlo, Monaco, Consolas, \'Liberation Mono\', \'Courier New\', monospace;\n}`, `6825295633310779000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.font-serif</span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> Georgia<span class="token punctuation">,</span> Cambria<span class="token punctuation">,</span> <span class="token string">\'Times New Roman\'</span><span class="token punctuation">,</span> Times<span class="token punctuation">,</span> serif<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.font-mono</span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> Menlo<span class="token punctuation">,</span> Monaco<span class="token punctuation">,</span> Consolas<span class="token punctuation">,</span> <span class="token string">\'Liberation Mono\'</span><span class="token punctuation">,</span> <span class="token string">\'Courier New\'</span><span class="token punctuation">,</span> monospace<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="math-通用字体族"><a href="#math-%E9%80%9A%E7%94%A8%E5%AD%97%E4%BD%93%E6%97%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>math 通用字体族</h3>\n<p>math 通用字体族的作用是方便在 Web 中展现数学公式。数学公式包含非常多的层次关系，需要特殊的字体进行支持。图 3-57 所示的就是一个相对比较复杂的数学公式。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-08-17-21-10-f5ae338d79a107b78b6113a07ae9ed48-9ac90.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 25.719267654751526%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsSAAALEgHS3X78AAAAu0lEQVQY02WPzQ6DIBCEff/X8epVvRjPGpWWVhOw9GBAEBXpBNOfpN+BzE52dpdoD3jvh2FI03RZFmitNYS1FjrLMkLIPM/btqE0xqzr6pxDGXVdV1UV5xxh9Akh2rbt+x7OOI5ohUkpbZqmLMu6rqHxMsaKoohsACPhxnEMF4ccx+EDu3NJkuR5DgfLcQ6ECyAV+TdKqWmaztvAmUcppTyn//on3/AHfJhcqFSKMX650od40ttda/Pf+QLvXxpE+VEMWgAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 08 17 21 10" title="" data-src="/static/2022-01-08-17-21-10-f5ae338d79a107b78b6113a07ae9ed48-fee1c.png" data-srcset="/static/2022-01-08-17-21-10-f5ae338d79a107b78b6113a07ae9ed48-a67b7.png 200w,\n/static/2022-01-08-17-21-10-f5ae338d79a107b78b6113a07ae9ed48-0b187.png 400w,\n/static/2022-01-08-17-21-10-f5ae338d79a107b78b6113a07ae9ed48-fee1c.png 800w,\n/static/2022-01-08-17-21-10-f5ae338d79a107b78b6113a07ae9ed48-9ac90.png 1147w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>有一种名为 MathML 的 XML 语言专门用来呈现富有层级关系的数学公式（对 MathML 的 <a href="https://www.zhangxinxu.com/wordpress/?p=8108" target="_blank" rel="nofollow noreferrer noopener">详细介绍</a>）。数学标签（如<code class="language-text">&lt;math&gt;</code>）背后使用的 font-family 就是 math 通用字体族。例如，Windows 操作系统中使用的字体是 Cambria Math，这种字体包括额外的数据信息（如 OpenType 数学表），可以帮助数学公式实现层次化的布局，如可以对一些数字和符号进行拉伸等字体变形。</p>\n<p>理论上在开发的时候，我们只要使用 MathML 语言进行数学公式书写就好了，无须关心背后的字体。但是，在实际操作中，Chrome 浏览器并不支持 MathML。为了兼容 Chrome 浏览器，我们需要对数学标签进行 CSS 重定义，此时就需要用到 math 通用字体族：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="50367397257613810000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`math {\n   font-family: Cambria Math, Latin Modern Math;\n}`, `50367397257613810000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">math</span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> Cambria Math<span class="token punctuation">,</span> Latin Modern Math<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>其中，Cambria Math 是 Windows 操作系统中的数学字体，Latin Modern Math 是 macOS 中的数学字体。</p>\n<p>其他数学字体还有很多，如 STIX Two Math、XITS Math、STIXMath、Libertinus Math、TeX Gyre Termes Math、Asana Math、Lucida Bright Math、Minion Math 等。不过这些字体在实际情况中一般都用不到，因此不必深究。</p>\n<h3 id="fangsong-通用字体族"><a href="#fangsong-%E9%80%9A%E7%94%A8%E5%AD%97%E4%BD%93%E6%97%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>fangsong 通用字体族</h3>\n<p>这个字体族来自中文字体“仿宋”，仿宋是介于宋体（衬线字体）和楷体（手写字体）之间的一种字体。和宋体相比，仿宋笔画的水平线通常是倾斜的，端点修饰较少，笔画宽度变化较小。一般非常正式的公告才会用到这个字体，平常开发项目中很少用到：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="66921255225368310000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`article {\n   font-family: fangsong;\n}`, `66921255225368310000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">article</span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> fangsong<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<h3 id="其他系统关键字"><a href="#%E5%85%B6%E4%BB%96%E7%B3%BB%E7%BB%9F%E5%85%B3%E9%94%AE%E5%AD%97" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>其他系统关键字</h3>\n<p>在未来的某个网站中可能会使用下面的系统关键字：</p>\n<ul>\n<li>ui-serif；</li>\n<li>ui-sans-serif；</li>\n<li>ui-monospace；</li>\n<li>ui-rounded。</li>\n</ul>\n<p>其中：</p>\n<ul>\n<li>font-family: ui-serif 表示使用和系统一样的衬线字体；</li>\n<li>font-family: ui-sans-serif 表示使用和系统一样的无衬线字体；</li>\n<li>font-family: ui-monospace 表示使用和系统一样的等宽字体；</li>\n<li>font-family: ui-rounded 表示使用和系统一样的圆形字体（边和角都很圆润的字体），如果系统中没有这样的字体，则不指向任何系统字体。</li>\n</ul>\n<p>目前 ui- 开头的这些系统字体只有 Safari 浏览器支持，不过在实际项目中也是可以用的，可以添加在传统的字体族关键字 serif、sans-serif 或 monospace 之前，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="72804231143179780000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`body {\n   font-family: system-ui, -apple-system, Segoe UI, Roboto, Emoji, Helvetica, Arial, ui-sans-serif, sans-serif;\n}\n\n.font-serif {\n   font-family: Georgia, Cambria, \'Times New Roman\', Times, ui-serif, serif;\n}\n\n.font-mono {\n   font-family: Menlo, Monaco, Consolas, \'Liberation Mono\', \'Courier New\', ui-monospace, monospace;\n}`, `72804231143179780000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">body</span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> system-ui<span class="token punctuation">,</span> -apple-system<span class="token punctuation">,</span> Segoe UI<span class="token punctuation">,</span> Roboto<span class="token punctuation">,</span> Emoji<span class="token punctuation">,</span> Helvetica<span class="token punctuation">,</span> Arial<span class="token punctuation">,</span> ui-sans-serif<span class="token punctuation">,</span> sans-serif<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.font-serif</span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> Georgia<span class="token punctuation">,</span> Cambria<span class="token punctuation">,</span> <span class="token string">\'Times New Roman\'</span><span class="token punctuation">,</span> Times<span class="token punctuation">,</span> ui-serif<span class="token punctuation">,</span> serif<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.font-mono</span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> Menlo<span class="token punctuation">,</span> Monaco<span class="token punctuation">,</span> Consolas<span class="token punctuation">,</span> <span class="token string">\'Liberation Mono\'</span><span class="token punctuation">,</span> <span class="token string">\'Courier New\'</span><span class="token punctuation">,</span> ui-monospace<span class="token punctuation">,</span> monospace<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="local-函数与系统字体的调用"><a href="#local-%E5%87%BD%E6%95%B0%E4%B8%8E%E7%B3%BB%E7%BB%9F%E5%AD%97%E4%BD%93%E7%9A%84%E8%B0%83%E7%94%A8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>local() 函数与系统字体的调用</h2>\n<p>从 IE9 浏览器开始，@font-face 规则开始支持使用 local() 函数调用系统安装的字体。使用 local() 函数主要有两大好处。</p>\n<ol>\n<li>\n<p>简化字体调用。例如我们要使用等宽字体，但是不同操作系统中的等宽字体不一样。为了兼容，我们需要一长串不同的字体名称作为 font-family 属性值，但是根本就记不住这么多字体，没关系，有了 local() 函数，使用这些字体的方法就一下子变得简单了：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="97306883511387390000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`@font-face {\n  font-family: Mono;\n  /* 单个单词可以不用加引号 */\n  src: local(\'Menlo\'), local(\'Monaco\'), local(\'Consolas\'), local(\'Liberation Mono\'), local(\'Courier New\'), local(\'monospace\');\n}\n\n.code {\n  font-family: Mono;\n}`, `97306883511387390000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token atrule"><span class="token rule">@font-face</span></span> <span class="token punctuation">{</span>\n  <span class="token property">font-family</span><span class="token punctuation">:</span> Mono<span class="token punctuation">;</span>\n  <span class="token comment">/* 单个单词可以不用加引号 */</span>\n  <span class="token property">src</span><span class="token punctuation">:</span> <span class="token function">local</span><span class="token punctuation">(</span><span class="token string">\'Menlo\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">local</span><span class="token punctuation">(</span><span class="token string">\'Monaco\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">local</span><span class="token punctuation">(</span><span class="token string">\'Consolas\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">local</span><span class="token punctuation">(</span><span class="token string">\'Liberation Mono\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">local</span><span class="token punctuation">(</span><span class="token string">\'Courier New\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">local</span><span class="token punctuation">(</span><span class="token string">\'monospace\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.code</span> <span class="token punctuation">{</span>\n  <span class="token property">font-family</span><span class="token punctuation">:</span> Mono<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>在自定义字体场景下提高性能。例如我们希望在各个平台都能使用 Roboto 字体，则可以像下面这样重新定义下 Roboto 字体：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="94075910024335150000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`@font-face {\n  font-family: Roboto;\n  font-style: normal;\n  font-weight: 400;\n  src: local(\'Roboto\'), local(\'Roboto-Regular\'), url(./Roboto.woff2) format(\'woff2\');\n}`, `94075910024335150000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token atrule"><span class="token rule">@font-face</span></span> <span class="token punctuation">{</span>\n  <span class="token property">font-family</span><span class="token punctuation">:</span> Roboto<span class="token punctuation">;</span>\n  <span class="token property">font-style</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>\n  <span class="token property">font-weight</span><span class="token punctuation">:</span> 400<span class="token punctuation">;</span>\n  <span class="token property">src</span><span class="token punctuation">:</span> <span class="token function">local</span><span class="token punctuation">(</span><span class="token string">\'Roboto\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">local</span><span class="token punctuation">(</span><span class="token string">\'Roboto-Regular\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./Roboto.woff2<span class="token punctuation">)</span></span> <span class="token function">format</span><span class="token punctuation">(</span><span class="token string">\'woff2\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>此时 local() 函数可以让已经安装了 Roboto 字体的用户无须发起额外的 Roboto 字体请求，优化了这部分用户的使用体验。</p>\n</li>\n</ol>\n<h2 id="unicode-range-属性的详细介绍"><a href="#unicode-range-%E5%B1%9E%E6%80%A7%E7%9A%84%E8%AF%A6%E7%BB%86%E4%BB%8B%E7%BB%8D" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>unicode-range 属性的详细介绍</h2>\n<p>我们在使用 @font-face 规则自定义字体的时候，还可以通过使用 unicode-range 属性来决定自定义的字体作用在哪些字符上。例如设置 emoji 字体的作用范围：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="40329929702612820000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`@font-face {\n   font-family: Emoji;\n   src: local(\'Apple Color Emoji\'), local(\'Segoe UI Emoji\'), local(\'Segoe UI Symbol\'), local(\'Noto Color Emoji\');\n   unicode-range: U+1F000-1F644, U+203C-3299;\n}`, `40329929702612820000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css{4}"\n              >\n                <span class="gatsby-code-button-language">css{4}</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight has-highlighted-lines" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token atrule"><span class="token rule">@font-face</span></span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> Emoji<span class="token punctuation">;</span>\n   <span class="token property">src</span><span class="token punctuation">:</span> <span class="token function">local</span><span class="token punctuation">(</span><span class="token string">\'Apple Color Emoji\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">local</span><span class="token punctuation">(</span><span class="token string">\'Segoe UI Emoji\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">local</span><span class="token punctuation">(</span><span class="token string">\'Segoe UI Symbol\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">local</span><span class="token punctuation">(</span><span class="token string">\'Noto Color Emoji\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="gatsby-highlight-code-line">   <span class="token property">unicode-range</span><span class="token punctuation">:</span> U+1F000-1F644<span class="token punctuation">,</span> U+203C-3299<span class="token punctuation">;</span></span><span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>上面演示了 unicode-range 属性的基本用法，下面详细展开讲一下 unicode-range 属性的值和语法。</p>\n<p>unicode-range 属性值的写法是“U+”加上目标字符的 Unicode 编码或者 Unicode 范围。初始值为 U+0-10FFFF，也就是所有字符集。其语法如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="52716388649902020000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 支持的值 */\nunicode-range: U+26; /* 单个字符编码 */\nunicode-range: U+0025-00FF; /* 字符编码区间 */\nunicode-range: U+4??; /* 通配符 */\nunicode-range: U+0025-00FF, U+4??; /* 多个值 */`, `52716388649902020000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 支持的值 */</span>\n<span class="token property">unicode-range</span><span class="token punctuation">:</span> U+26<span class="token punctuation">;</span> <span class="token comment">/* 单个字符编码 */</span>\n<span class="token property">unicode-range</span><span class="token punctuation">:</span> U+0025-00FF<span class="token punctuation">;</span> <span class="token comment">/* 字符编码区间 */</span>\n<span class="token property">unicode-range</span><span class="token punctuation">:</span> U+4??<span class="token punctuation">;</span> <span class="token comment">/* 通配符 */</span>\n<span class="token property">unicode-range</span><span class="token punctuation">:</span> U+0025-00FF<span class="token punctuation">,</span> U+4??<span class="token punctuation">;</span> <span class="token comment">/* 多个值 */</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>有些读者可能不知道 U+4?? 是什么意思，? 可以理解为占位符，表示 0-F 的值，因此 U+4?? 表示从 U+400 到 U+4FF。</p>\n<p>在前端领域，使用 Unicode 编码显示字符在各种语言中都是可以的，不过前缀各有不同。</p>\n<ol>\n<li>在 HTML 中，字符输出可以使用 &#x26;#x 加上 Unicode 编码。</li>\n<li>在 JavaScript 文件中，为了避免中文乱码需要转义，应使用 \\u 加上 Unicode 编码。</li>\n<li>在 CSS 文件中，如 CSS 伪元素的 content 属性，就直接使用 \\ 加上对应字符的 Unicode 编码值。</li>\n<li>unicode-range 属性则是使用 U+ 加上 Unicode 编码。</li>\n</ol>\n<h3 id="unicode-range-属性常用的-unicode-编码值"><a href="#unicode-range-%E5%B1%9E%E6%80%A7%E5%B8%B8%E7%94%A8%E7%9A%84-unicode-%E7%BC%96%E7%A0%81%E5%80%BC" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>unicode-range 属性常用的 Unicode 编码值</h3>\n<p>对中文用户而言，最常用的 Unicode 编码值有下面这些。</p>\n<ul>\n<li>基本二次汉字：[0x4e00, 0x9fa5]（或十进制[19968, 40869]）。</li>\n<li>数字：[0x30, 0x39]（或十进制[48, 57]）。</li>\n<li>小写字母：[0x61, 0x7a]（或十进制[97, 122]）。</li>\n<li>大写字母：[0x41, 0x5a]（或十进制[65, 90]）。</li>\n</ul>\n<p>如果想获取某一个具体字符的 Unicode 编码值，例如 \\263a 编码对应的笑脸字符 ☺，可以使用下面的 JavaScript 代码：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="59971756732937110000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`U = \'☺\'.codePointAt().toString(16);\n// U 的值是 263a`, `59971756732937110000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token constant">U</span> <span class="token operator">=</span> <span class="token string">\'☺\'</span><span class="token punctuation">.</span><span class="token function">codePointAt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">// U 的值是 263a</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>需要注意的是，IE 浏览器并不支持 codePointAt() 方法，要想兼容 IE 浏览器，需要先引入一段 Polyfill 代码。</p>\n<h3 id="结语"><a href="#%E7%BB%93%E8%AF%AD" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>结语</h3>\n<p>unicode-range 属性还是很实用的，大家一定要重视。当你遇到中文排版问题，或者需要对某些字符进行精修，一定要想到 unicode-range 属性，说不定爱上 CSS 这门语言就是从 unicode-range 属性开始的。</p>\n<h2 id="woffwoff2-字体"><a href="#woffwoff2-%E5%AD%97%E4%BD%93" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>woff/woff2 字体</h2>\n<p>为了方便在网页中高效使用自定义字体，woff 和 woff2 应运而生，它们是两个专门用在 Web 中的字体。其中，woff 字体在 2012 年 12 月被 WorldWide Web Consortium（W3C）推荐使用，IE9+ 浏览器支持该字体。woff2 字体最早在 2013 年 7 月的 Chrome Canary 版本上就可以使用了，发展到现在，几乎已经成为自定义图标字体使用的标准配置，目前浏览器对它的兼容性已经相当不错了。</p>\n<h3 id="兼容性-4"><a href="#%E5%85%BC%E5%AE%B9%E6%80%A7-4" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>兼容性</h3>\n<p>woff2 字体的兼容性如表 3-9 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-08-17-55-19-96f8114450ac9a20941dd75e52f900c0-9ac90.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 29.032258064516125%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsSAAALEgHS3X78AAABQ0lEQVQY0x2KO2/CMACE89s7dELqwtC9Szt0okOhqkAIVUKlQIEEEgjk4TiO7TyIwY+QR6PecLr77rS6rpumiTB2XJDnDABoWfZ6s12u9OlsHoT4d21Mvxcbw2wPvg/byfNh8y9N8rxWeeuFvCjBhLiUTSUkrwpeKNnypmJSsEKypmTimos2C1Gqq+C5Bgh4tClMguFy35sdZGTQ4dP1vJ989MDkGWXo7hPBCMxc9DBGeebfeOKQd9Mf38RZMyPYtTDjeLTYDZZ7FVi7TreIDy8//a3+mp7x/RCENJw7oDPyLjlUPNZPb/2vwZURjSBbJk5KXegbUWBicgLIxpFDoAWhTcJDGqwTfAp9g3orEh0RtLyj6R31EFoaRqeqTBPqZomvBEFwLzlOYy+mXnVL2io4ZeeAEqcqs5a3t7pKyyK5qfgPAkFBi80RC3UAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 08 17 55 19" title="" data-src="/static/2022-01-08-17-55-19-96f8114450ac9a20941dd75e52f900c0-fee1c.png" data-srcset="/static/2022-01-08-17-55-19-96f8114450ac9a20941dd75e52f900c0-a67b7.png 200w,\n/static/2022-01-08-17-55-19-96f8114450ac9a20941dd75e52f900c0-0b187.png 400w,\n/static/2022-01-08-17-55-19-96f8114450ac9a20941dd75e52f900c0-fee1c.png 800w,\n/static/2022-01-08-17-55-19-96f8114450ac9a20941dd75e52f900c0-9ac90.png 1147w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>woff2 字体最大的优点在于传输的体积小，借用 Google Chrome 官方的话：新的 woff 2.0 Web 字体压缩格式平均要比 woff 1.0 小 30%以上（某些情况下可以达到 50%）。图 3-58 展示了 woff 和 woff2 字体大小对比情况。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-08-17-56-06-4b9b0b0af0c74fa5deb5ae1655198dcf-c4455.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 79.2824074074074%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsSAAALEgHS3X78AAADKklEQVQ4y62T2W/bRhCH+c/3eGgLtGmb1I4cX5J8SrQO6qIk6qYoURSpW7JkxbbsNrYbO0GQh8b4utwEBgr0pUAX+DA7s+Tsb2dnlffv3jMejfnw7gP39w/cv33g9uaW/zo+fvjIp78eUYpuFdVIsls8Yid/wGZ2j2hNQ3MLqHaGmJMj1slKG22liPwLajtN1NRIdQooulMmaiRItHMk27oMpp0i28VDXuX3eJndZSMXYi21zYEZ59jSOLKSkmPfNpMc1uPy/0zXQOnO+sQLKTKNPPFKGq0mFloiqfB1yyAlfD+mNw16l2Pc89E/8ATWxKHWb9I59VD8zAkzS7iuErVSYucE+40TufuhVJQUx9JQxVqgEOaX3CbP9a0nfhV+sBbhyExIlMnylKSexuy2KDTLVOw6jV6LcrtO1TbJ1HQRa2CYVc7vrrm6f8Pq7R9P+P7k/BRvNmB+tUTxs6pmivXiLsHqMZvlfV4Wg9JulMLsNVQ2jDAHzTjP0gG+Un/k29jPfBN7Ju3XJz/xQijdLO3zSqCMFlNULYbl2hSbFaGqgTWwqbQb2MMuesWgLFRXWnXyjZJUdH1/I62cP9wwWs5wJh7zlVAYa2fQbJ21vK8wwlb5gI1i+Mlulw7YLh+yJXb36+nX7bvkc37QfpN8n3xBwAjJ0/ko/fmIRE6TaqqOiem1aI8dmj2b1tCh1e8IhVWqrkm9a1HzLJZ3KxZvLljcXHB2c8no9RRXdMv0co7i916knCCgh9gRvbdV3Gc9t8taZod1QSAXFH0YJJANSn+/diJrtV4IilqHpN0RJ/Dj8pYHFxO8syGGV6PcrZOxCngXY8bXcwarKcOrGZPfF4yuT2WsJ9bMWYfGzP5Ch/bcpSr6sDntoLRmXemE88fs5SOoFY2MVyLe0Uk6eRIdH/0JP5Zyi6QFn62BJr5JWjnyXgWlPBK1GbfI9csURkLl2CQinleoHpUN7rfNZ06+oMpH4OPPQ7WovKxsr0ROoPA/D+XT46OcnC1f0/X6zBdn3N79yWq1omU72I7HdDajNxjSdXs4rui3xZLBULzj3gCn6zIYTWSOR5Hrb45pMmZ4nddJAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 08 17 56 06" title="" data-src="/static/2022-01-08-17-56-06-4b9b0b0af0c74fa5deb5ae1655198dcf-fee1c.png" data-srcset="/static/2022-01-08-17-56-06-4b9b0b0af0c74fa5deb5ae1655198dcf-a67b7.png 200w,\n/static/2022-01-08-17-56-06-4b9b0b0af0c74fa5deb5ae1655198dcf-0b187.png 400w,\n/static/2022-01-08-17-56-06-4b9b0b0af0c74fa5deb5ae1655198dcf-fee1c.png 800w,\n/static/2022-01-08-17-56-06-4b9b0b0af0c74fa5deb5ae1655198dcf-c4455.png 864w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>如果你的项目无须兼容 IE8 浏览器，直接使用 woff2 和 woff 字体就可以了：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="37762657354568670000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`@font-face {\n   font-family: MyFont;\n   src: url(myfont.woff2) format(\'woff2\'), url(myfont.woff) format(\'woff\');\n}`, `37762657354568670000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token atrule"><span class="token rule">@font-face</span></span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> MyFont<span class="token punctuation">;</span>\n   <span class="token property">src</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>myfont.woff2<span class="token punctuation">)</span></span> <span class="token function">format</span><span class="token punctuation">(</span><span class="token string">\'woff2\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>myfont.woff<span class="token punctuation">)</span></span> <span class="token function">format</span><span class="token punctuation">(</span><span class="token string">\'woff\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>如果你的字体文件不是很大，也可以直接以 Base64 的形式将 woff 或 woff2 字体内嵌在 CSS 中，加载体验比外链字体时的加载体验要好一些，语法是类似的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="67070959045721000000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`@font-face {\n   font-family: MyFont;\n   src: url(\'data:font/woff2;base64,...\') format(\'woff2\'), url(\'data:font/woff;base64,...\') format(\'woff\');\n}`, `67070959045721000000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token atrule"><span class="token rule">@font-face</span></span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> MyFont<span class="token punctuation">;</span>\n   <span class="token property">src</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>\'data:font/woff2;base64,...\'<span class="token punctuation">)</span></span> <span class="token function">format</span><span class="token punctuation">(</span><span class="token string">\'woff2\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>\'data:font/woff;base64,...\'<span class="token punctuation">)</span></span> <span class="token function">format</span><span class="token punctuation">(</span><span class="token string">\'woff\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>起初我以为 woff2 和 woff 字体无法像 OpenType 字体（扩展名 otf）那样可以包含其他字体信息，也就是 woff2 和 woff 字体无法配合 font-feature-settings 属性呈现出不同的字体特征效果，结果我发现并不是这样的。woff2 和 woff 字体也是可以包含其他字体特征信息的，不过具体的实现细节我还不清楚。</p>\n<p>另外，woff2 字体没有必要再开启 GZIP，因为这个字体文本本身就是压缩过的。</p>\n<p>最后说一下 woff 字体的 MIME type 值。关于这一点有点小争议，拿 woff2 字体举例，Google 使用的是 font/woff2，而 W3C 则推荐使用 application/font-woff2。我个人的建议是，在 Web 中使用的时候采用 font/woff2，在服务器端进行 MIME type 配置的时候采用 application/font-woff2。</p>\n<p>为了方便大家学习，专门整理了一个关于各种字体类型及其用法的表，如下表所示</p>\n<table>\n<thead>\n<tr>\n<th align="left">格式</th>\n<th align="left">文件拓展名</th>\n<th align="left">MIME Type</th>\n<th align="left">补充信息</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align="left">Web Open Font Format 2</td>\n<td align="left">.woff2</td>\n<td align="left">font/woff2</td>\n<td align="left">Web 字体加载首选</td>\n</tr>\n<tr>\n<td align="left">Web Open Format</td>\n<td align="left">.woff</td>\n<td align="left">font/woff</td>\n<td align="left">Web 字体加载备选</td>\n</tr>\n<tr>\n<td align="left">TrueType</td>\n<td align="left">.ttf</td>\n<td align="left">font/ttf</td>\n<td align="left">没有在 Web 中使用的理由，请转换成 woff2 字体</td>\n</tr>\n<tr>\n<td align="left">OpenType</td>\n<td align="left">.otf</td>\n<td align="left">font/otf</td>\n<td align="left">支持更高级的排版功能，如小型大写字母、上标下标、连字等。但是由于缺乏包含高级排版的中文字体，因此中文场景没有使用的理由</td>\n</tr>\n<tr>\n<td align="left">Embedded OpenType</td>\n<td align="left">.eot</td>\n<td align="left">application/vnd.ms-fontobject</td>\n<td align="left">只有需要兼容 IE6 ~ IE8 浏览器的时候才用到</td>\n</tr>\n</tbody>\n</table>\n<h2 id="font-display-属性与自定义字体的加载渲染"><a href="#font-display-%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%87%AA%E5%AE%9A%E4%B9%89%E5%AD%97%E4%BD%93%E7%9A%84%E5%8A%A0%E8%BD%BD%E6%B8%B2%E6%9F%93" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>font-display 属性与自定义字体的加载渲染</h2>\n<p>假设我们定义一个名为 MyFont 的自定义字体，并且采用 url() 函数外链的方式引入，代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="23324000120885535000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`@font-face {\n   font-family: MyFont;\n   src: url(myfont.woff2) format(\'woff2\');\n}\n\nbody {\n   font-family: MyFont;\n}`, `23324000120885535000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token atrule"><span class="token rule">@font-face</span></span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> MyFont<span class="token punctuation">;</span>\n   <span class="token property">src</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>myfont.woff2<span class="token punctuation">)</span></span> <span class="token function">format</span><span class="token punctuation">(</span><span class="token string">\'woff2\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">body</span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> MyFont<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>这时浏览器的字体加载行为表现为，应用 MyFont 字体的文本会先被隐藏，直到字体加载结束才会显示，但是这个隐藏最多持续 3s，3s 后字体仍未加载结束则会使用其他字体代替。这种加载体验利弊参半。</p>\n<p>如果我们使用自定义字体的目的是实现图标字体功能，则这种加载行为就比较合适。因为渲染出来的小图标和小图标使用的真正字符往往外形差异巨大，那些用户看不懂的字符需要被隐藏起来，以此提升视觉体验。但是，如果我们使用自定义字体来呈现普通文本内容，则这种加载行为就不太合适。因为文字内容应该第一时间呈现给用户，而不应该出现长时间的空白，内容绝对比样式更重要。</p>\n<p>由于英文字体体积小，最多几百 KB，因此自定义字体的使用非常普遍。自定义字体加载时候空白的问题是一个普遍的现象，在这种背景下，font-display 属性出现了，font-display 属性可以控制字体加载和文本渲染之间的时间线关系。</p>\n<p>在对 font-display 属性值展开介绍之前，我先来讲一下字体显示时间线。</p>\n<h3 id="字体显示时间线"><a href="#%E5%AD%97%E4%BD%93%E6%98%BE%E7%A4%BA%E6%97%B6%E9%97%B4%E7%BA%BF" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>字体显示时间线</h3>\n<p>字体显示时间线开始于浏览器尝试下载字体的那一刻，整个时间线分为 3 个时段，浏览器会在这 3 个时段让元素表现出不同的字体渲染行为。</p>\n<ul>\n<li>字体阻塞时段：如果未加载字体，任何试图使用它的元素都必须以不可见的方式渲染后备字体；如果在此期间字体成功加载，则正常使用它。</li>\n<li>字体交换时段：如果未加载字体，任何试图使用它的元素都必须以可见的方式渲染后备字体；如果在此期间字体成功加载，则正常使用它。</li>\n<li>字体失败时段：如果未加载字体，则浏览器将其视为加载失败，并使用正常字体进行回退渲染。</li>\n</ul>\n<p>font-display 的属性值就是围绕字体显示时间线展开的。</p>\n<h3 id="正式语法"><a href="#%E6%AD%A3%E5%BC%8F%E8%AF%AD%E6%B3%95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>正式语法</h3>\n<p>font-display 的语法如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="29541525413184780000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`font-display: [auto | block | swap | fallback | optional];`, `29541525413184780000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">font-display</span><span class="token punctuation">:</span> [auto | block | swap | fallback | optional]<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>属性值的含义如下所示。</p>\n<ul>\n<li>auto：字体显示策略由浏览器决定，大多数浏览器的字体显示策略类似 block。</li>\n<li>block：字体阻塞时段较短（推荐 3s），字体交换时段无限。此值适合图标字体场景。</li>\n<li>swap：字体阻塞时段极短（不超过 100ms），字体交换时段无限。此值适合用在小段文本，同时文本内容对页面非常重要的场景。</li>\n<li>fallback：字体阻塞时段极短（不超过 100ms），字体交换时段较短（推荐 3s）。此值适合用于大段文本，例如文章正文，同时对字体效果比较看重的场景，例如广告页面、个人网站等。</li>\n<li>optional：字体阻塞时段极短（不超过 100ms），没有字体交换时段。此值的作用可以描述为，如果字体可以瞬间被加载（例如已经被缓存了），则浏览器使用该字体，否则使用回退字体。optional 是日常 Web 产品开发更推荐的属性值，因为无论任何时候，网页内容在用户第一次访问时快速呈现是最重要的，不能让用户等待很长时间后再看到你认为的完美效果。</li>\n</ul>\n<p>总结一下，如果你的自定义字体是用于字体呈现，就使用 optional，否则使用默认值。至于 swap 和 fallback，如果对你而言自定义字体的效果很重要，同时你能忍受页面字体突然变化的问题，就可以使用下面的设置：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="84660550684316700000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`@font-face {\n   font-family: MyFont;\n   src: url(myfont.woff2) format(\'woff2\');\n   font-display: swap;\n}\n\nbody {\n   font-family: MyFont;\n}`, `84660550684316700000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token atrule"><span class="token rule">@font-face</span></span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> MyFont<span class="token punctuation">;</span>\n   <span class="token property">src</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>myfont.woff2<span class="token punctuation">)</span></span> <span class="token function">format</span><span class="token punctuation">(</span><span class="token string">\'woff2\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token property">font-display</span><span class="token punctuation">:</span> swap<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">body</span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> MyFont<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="其他小的知识点"><a href="#%E5%85%B6%E4%BB%96%E5%B0%8F%E7%9A%84%E7%9F%A5%E8%AF%86%E7%82%B9" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>其他小的知识点</h3>\n<p>网上有不少资料会提到 FOIT（Flash of Invisible Text）、FOUT（Flashof Unstyled Text）和 FOFT（Flash of Faux Text）等概念。需要注意的是，千万别拿这些概念去理解 font-display 属性，W3C 官方没有这样的概念。这些是十几年前的开发者基于 font-display 属性外在表现提出的概念，请使用官网提供的字体显示时间线来理解 font-display 属性。</p>\n<p>如果自定义字体的大小在 30 KB 以内，建议直接用 Base64 将其内联在页面中。不过只有 woff2 字体采取内联处理，woff 字体依旧采用 url() 函数外链体验最佳，因为此时现代浏览器中的字体都是瞬间渲染，根本无须使用 font-display 属性进行字体加载优化。示意如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="92155139156051790000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`@font-face {\n   font-family: MyFont;\n   src: url(\'data:font/woff2;base64,...\') format(\'woff2\'), url(myfont.woff) format(\'woff\');\n}`, `92155139156051790000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token atrule"><span class="token rule">@font-face</span></span> <span class="token punctuation">{</span>\n   <span class="token property">font-family</span><span class="token punctuation">:</span> MyFont<span class="token punctuation">;</span>\n   <span class="token property">src</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>\'data:font/woff2;base64,...\'<span class="token punctuation">)</span></span> <span class="token function">format</span><span class="token punctuation">(</span><span class="token string">\'woff2\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>myfont.woff<span class="token punctuation">)</span></span> <span class="token function">format</span><span class="token punctuation">(</span><span class="token string">\'woff\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>我们还可以使用 <code class="language-text">&lt;link rel=&quot;preload&quot;&gt;</code> 对字体进行预加载，从而提高字体的加载体验：</p>\n<h1 id="字符单元的中断与换行"><a href="#%E5%AD%97%E7%AC%A6%E5%8D%95%E5%85%83%E7%9A%84%E4%B8%AD%E6%96%AD%E4%B8%8E%E6%8D%A2%E8%A1%8C" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>字符单元的中断与换行</h1>\n<p>CSS 这门语言在文字排版这一块的功能是非常强大的，例如有大量的 CSS 特性可以对字符单元的中断与换行进行精确控制。如果你想要成为文字排版的高手，本节的内容不容错过。本节会大量出现“CJK 文本”这个词，其中 CJK 是 Chinese/Japanese/Korean 的缩写，因此 CJK 文本指的是中文/日文/韩文这几种文字。</p>\n<p>字符单元默认的中断与换行规则如下。</p>\n<ul>\n<li>Space 普通空格、Enter（回车）空格和 Tab（制表符）空格这 3 种空格无论怎样组合都会合并为单个普通空格。</li>\n<li>文字可以在 CJK 文本、普通空格和短横线连字符处换行，连续英文单词和数字不换行。</li>\n</ul>\n<p>上面的排版规则有时候并不能实现我们想要的排版效果，怎么办呢？此时可以使用专门的 CSS 属性对排版进行控制。</p>\n<p>例如，我们不希望 Enter（回车）空格合并为普通空格，想保留换行效果，就可以使用 white-space 属性进行设置。这个在 CSS 世界一书已经详细介绍过了，这里不再展开讲解。又如，我们希望 CJK 文本不换行，但是空格处正常换行，怎么办呢？这就是接下来要介绍的 CSS 新特性。</p>\n<h2 id="使用-keep-all-属性值优化中文排版"><a href="#%E4%BD%BF%E7%94%A8-keep-all-%E5%B1%9E%E6%80%A7%E5%80%BC%E4%BC%98%E5%8C%96%E4%B8%AD%E6%96%87%E6%8E%92%E7%89%88" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>使用 keep-all 属性值优化中文排版</h2>\n<p>word-break 属性语法如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="38465397876895646000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`word-break: normal | break-all | keep-all | break-word;`, `38465397876895646000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">word-break</span><span class="token punctuation">:</span> normal | break-all | keep-all | break-word<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>不同的属性值对应不同的换行规则。keep-all 这个属性值可以让 CJK 文本不换行排版，同时又不影响非 CJK 文本的排版行为。</p>\n<p>CSS 中有些属性见得少、用得少，并不是因为它们不实用，而是因为知道的人少。keep-all 就是一个典型代表，其看起来是一个鲜为人知的属性值，但是在中文排版领域非常强大，一旦遇到合适的使用场景，效果就非常理想。</p>\n<p>中文虽然是一个字一个字拼起来的，但是有些文字的组合是固定的，不建议断开，如人的姓名、一些固定的词组等。然而默认的排版规则会断开这些姓名和词组，keep-all 属性值可以用来优化这个排版细节。我们看一个例子：有一个表格需要在移动端显示，而移动端设备的宽度是有限的，因此，如果我们不做任何处理，排版效果就会是图 3-59 所示的这样。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-09-10-56-26-2a96b9a0fe4c5be40afc843ab59169af-c384c.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 469px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 87.42004264392324%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAIAAABSJhvpAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACqUlEQVQ4y6VTW3eaQBDm//+P9qE/oCenSduk0RijooIgChIQuQUjl0X2wu7SQduHPrQvnTNnmf2+mVlgvlXEP4xzUVVivRZJIjAWmiaiSFiWQEh0HfDKX8uAzjIxmQjbFo7Tl+m6OBwEpT17MUX2mf3mGoDJaySlrEqZJLKqZJrIohDHTKAKmgIPOeAKZZDWwcraPrjGHCgpmegIoTSMKGvbruPwLrJruSC0BQRc2YfZ3bfHIDrau+DL3Y/b74MwyZ9G0+HLInCDcqqd3lGOaJzm+0P66kVhmucVPZXkVGLFD+IPHz8ZG7dA5OFxNNfW6MzuH4Y3tw9BkJSIQiVq+POLent3//nmq7pcn0mXV6SoiQIt9ZV1iN8xk8nbMa8wpHr7aOeFx7wuEKubFmHeUIlZB95QAUiNeXmmyvup9H0/L6oKnYvLo6wbz/PzPG9bAWBVVXlRZMcjrMAWRQkOVp+xkqZHz3uF3xBFiTqbmua6bohpGJ7ndV0XhvF2YzmOo2m6sVotlwtd03V9tVgs8rxUkvQIOzghDKNVjy5RjV9dd+M470URx2mWvfmep+vayljN5wvH3himud3a/clJmu33PiYkSVLTNNaWBWgYRadDUBWFF4RLVTWM1fh5rM5mGJN+yqIXAYNRpdmpRIjB59VA0QbTCuETqnkYs+0OoaahLWYct6JpBeXgkoAoaNsQpoA2QBWXufc6uWzbtuWES2jD3jIWJ8xx2dZh5po6LrUdWpYUtETbX9ru5SZ+u7wggvchiDE/yc1GmqYcP0vHlnNV7nY92HV/XAx5rRN93VXn4qJUXtc8jrnniTjpb4jvi7cM1Kp0/2HK43C0trb7/cF2XELIZKq6rqcuNMCHT88vU3Uym8/U5WAwGo+nlmUPhqOZOoepz+bLnwKqs0GvgfpWAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 09 10 56 26" title="" data-src="/static/2022-01-09-10-56-26-2a96b9a0fe4c5be40afc843ab59169af-c384c.png" data-srcset="/static/2022-01-09-10-56-26-2a96b9a0fe4c5be40afc843ab59169af-9bab7.png 200w,\n/static/2022-01-09-10-56-26-2a96b9a0fe4c5be40afc843ab59169af-a5cf9.png 400w,\n/static/2022-01-09-10-56-26-2a96b9a0fe4c5be40afc843ab59169af-c384c.png 469w" data-sizes="(max-width: 469px) 100vw, 469px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>“会议人员”里的“会议”是一个词，“人员”也是一个词，但是标题那里“人”和“员”两个字断开了，这种中断就非常不利于阅读。“会议人员”标题下方的列表项中的“王二麻子”是一个人名，结果也断开了，这种中断也是可以优化的排版细节。</p>\n<p>这种情况下，使用 keep-all 属性值就可以保护我们的中文词组不被断开。完整的代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="37627695137362840000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<table>\n   <thead>\n      <tr>\n         <th>会议时间</th>\n         <th>会议地点</th>\n         <th>会议人员(3)</th>\n         <th>会议内容</th>\n      </tr>\n   </thead>\n   <tbody>\n      <tr>\n         <td>2021 年 2 月 28 日</td>\n         <td>6 号楼 3 楼伏羲会议室</td>\n         <td class=&quot;keep-all&quot;>张三 李四 王二麻子</td>\n         <td>讨论字符单元的中断与换行，以及如何组织内容让表达效果最好</td>\n      </tr>\n   </tbody>\n</table>\n\n<style>\n   th,\n   td.keep-all {\n      word-break: keep-all;\n   }\n</style>`, `37627695137362840000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>thead</span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span>\n         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">></span></span>会议时间<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">></span></span>\n         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">></span></span>会议地点<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">></span></span>\n         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">></span></span>会议人员(3)<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">></span></span>\n         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">></span></span>会议内容<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>thead</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tbody</span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span>\n         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>2021 年 2 月 28 日<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>\n         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>6 号楼 3 楼伏羲会议室<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>\n         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>keep-all<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>张三 李四 王二麻子<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>\n         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>讨论字符单元的中断与换行，以及如何组织内容让表达效果最好<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tbody</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">></span></span>\n\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n   <span class="token selector">th,\n   td.keep-all</span> <span class="token punctuation">{</span>\n      <span class="token property">word-break</span><span class="token punctuation">:</span> keep-all<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>给表头还有“会议人员”所在的这一列的单元格设置了 word-break: keep-all 声明，此时的排版效果和阅读体验就得到了提升，如图 3-60 所示的箭头所指位置的效果。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-09-11-03-57-ed76ac2722507be4927b359a913d7a8e-f4ef4.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 705px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 58.29787234042553%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACH0lEQVQoz3VS6XKjMAzm/d9nj2bapFdCQqFcgYWEpCStyxVCuIxtbFilszO7f1ajkT9Zn0a2JKnnAxegIwDGhy93ZL0QYhjHUYgRTtZg9oFYlPTDlXZl9gJUyvI6PZXJ6XIq6hRwXibZ5VwRzw8U1djuj5a3a5ZaHaJzy5IrswR+2dCyYZLj+D8n0283E+XV1HT75u7++4+J6e7itJAVVdXXR5RdKlJ1Yh+iyd3D7H5xc/uYl11ZU+lckktNAYEtKlp3vGrYqcAdG6MkfzvGNRZFReqWN5g3nagxr9oe7DW5bjuMcV03HaFxktm2eXj/6CiHG4w7zjmh9FxUCKHNduu6v1zP2+32YRg2TSslSbZer33fi9PsnBeKstRNmzERbDemZXUd5Iv3D2QYhm7opmkZurZSXmx73TSNlKYnB/7t+ZT1h+O7LMuu7xPGg42vqVqLMaXQ5lTVXlTt1TRNx7HnC3k6nZ2LQvr8TKIoopRABd/fqJqKPlFHGLxzFwSGZaIsP+WF6zphePB8LwDZBZZlXS6ldKnatsWEEJjbZrtHUQzjhQ5ArGja0nHxq46SDMWJ4AIKsB76IIZhhF5IlHFIAwtKKIeahPYAei562Bzaw3rQtwMj7IsAoZ7SKwBXGv8jwzD8xYyNnP/j/4HXZHmp2I77djjESbJ60Tbb4OFxPrmdTe+fnp5liM6XCoxgpahwczd7fF6sHp4WUZz8BhfEj2SraT8nAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 09 11 03 57" title="" data-src="/static/2022-01-09-11-03-57-ed76ac2722507be4927b359a913d7a8e-f4ef4.png" data-srcset="/static/2022-01-09-11-03-57-ed76ac2722507be4927b359a913d7a8e-3d360.png 200w,\n/static/2022-01-09-11-03-57-ed76ac2722507be4927b359a913d7a8e-f7ff6.png 400w,\n/static/2022-01-09-11-03-57-ed76ac2722507be4927b359a913d7a8e-f4ef4.png 705w" data-sizes="(max-width: 705px) 100vw, 705px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/x5s6y2?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>keep-all 属性值的兼容性非常好，IE 浏览器也完全支持，之所以这个属性值不常用，完全是因为现代浏览器对其支持得较晚，普遍在 2015 年之后才开始支持。当然，现在大家可以放心使用这一属性值，因为就算浏览器不支持，也会采用默认的中文排版效果。</p>\n<h2 id="break-all-属性值的问题和-line-break-属性"><a href="#break-all-%E5%B1%9E%E6%80%A7%E5%80%BC%E7%9A%84%E9%97%AE%E9%A2%98%E5%92%8C-line-break-%E5%B1%9E%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>break-all 属性值的问题和 line-break 属性</h2>\n<p>与鲜为人知的 keep-all 属性值相比，word-break 属性的另外一个属性值 break-all 可就广为人知了，其经常会被用到。</p>\n<p>测试工程师喜欢输入一些连续的英文和数字进行内容测试，就会出现连续英文字符溢出容器的情况。这个时候设置 word-break: break-all 声明不仅解决了字符溢出问题，同时排版看起来也更整齐了，因此 break-all 属性值深受广大开发者喜爱，甚至有开发者会这样夸张地设置：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="2329802006217485300"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`* {\n   word-break: break-all;\n}`, `2329802006217485300`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">*</span> <span class="token punctuation">{</span>\n   <span class="token property">word-break</span><span class="token punctuation">:</span> break-all<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>这种通配符设置的做法确实有点过了，要知道应用 word-break: break-all 声明其实是为了少数场景下可能出现的排版问题，使用这种做法牺牲了大多数场景的阅读体验，并不是上佳之选。我们来看一个例子，有两段文字，第二段文字应用了 word-break: break-all 声明：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="33548489691033702000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<style>\n   p {\n      width: 150px;\n      padding: 10px;\n      border: solid deepskyblue;\n   }\n\n   .break-all {\n      word-break: break-all;\n   }\n</style>\n<p>本节会大量出现“CJK文本”这个词。</p>\n<p class=&quot;break-all&quot;>本节会大量出现“CJK文本”这个词。</p>`, `33548489691033702000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n   <span class="token selector">p</span> <span class="token punctuation">{</span>\n      <span class="token property">width</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>\n      <span class="token property">padding</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>\n      <span class="token property">border</span><span class="token punctuation">:</span> solid deepskyblue<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">.break-all</span> <span class="token punctuation">{</span>\n      <span class="token property">word-break</span><span class="token punctuation">:</span> break-all<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>本节会大量出现“CJK文本”这个词。<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>break-all<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>本节会大量出现“CJK文本”这个词。<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>最终的排版效果如图 3-61 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-09-11-18-18-fdca86fe80b92c86927797a33e92ed28-f4a80.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 631px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 59.11251980982567%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAABn0lEQVQoz31SDW+iQBDl//+qtrmmNeaoIggCy5eAimgEYVkWmOmsnknvrunkZTKzOzPv7YfmcUyagVUiukpCSKj7qBl2Pfoc2xHJAL83bddDGvie6zDXCX1Xn8+sxSKJE9ore6h/bs4lStFFcewz5rre4VCkaeqxAKaxHLAeHs0A/0PLBBz3u/PpXF0up7KUUlZVVde1YpZ4Yway75m33RQHjAtxz+FLrWq+M9NC3yPVNA1er9h12LbIuea0uBnQ7nB9gyOUt7jCqkVBY4QAEmKa6Dg4mymfJLhcomVpcYf5sQzy/fZQboujn2Zhtt8WpzMXWVa2po2XC5QlGgbqOn58KNAgQhBoucAkYBt3Y6/XzPd0/ffKMOIo6Xlb1Lzh/R/ZUiq1pJxA8TiSpzNDFkeMMbpkzvk9CKKIegqJ1c8XRrIPEncC9hJzASkf6Xtk3UQrUYd8hC/vDP88ukbxhDgCjJOaf0/x5qdHEcCD/G8J2vOv1zhO0jQXnLue77MgDENrbXvqz/i241JuGObb++zp5ZXSxdI0VubKtOZz/RNNV6dO44vyIQAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 09 11 18 18" title="" data-src="/static/2022-01-09-11-18-18-fdca86fe80b92c86927797a33e92ed28-f4a80.png" data-srcset="/static/2022-01-09-11-18-18-fdca86fe80b92c86927797a33e92ed28-0de09.png 200w,\n/static/2022-01-09-11-18-18-fdca86fe80b92c86927797a33e92ed28-e7891.png 400w,\n/static/2022-01-09-11-18-18-fdca86fe80b92c86927797a33e92ed28-f4a80.png 631w" data-sizes="(max-width: 631px) 100vw, 631px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>可以看到，第二段文字中 CJK 这个固定词组被分开了，这大大降低了阅读体验。因此，站在用户阅读体验的角度来看，使用 word-break: break-word（表现为尽量不断开单词）所带来的收益要大于 word-break: break-all。</p>\n<p>但是在大多数产品经理和设计师眼中，视觉上的愉悦要比阅读时的舒适更重要，因为 word-break: break-word 声明在有大段连续英文字符的情况下会留下较大的空白，例如，图 3-61 所示上面那个框内的右侧就有明显的空白。虽然上面一段文字阅读速度更快，但是空白的存在导致看上去文字内容没有左右居中，这种不和谐的视觉感受没有哪个设计师可以容忍。因此在现实世界中，只要文本内容是用户动态产生的，都是使用 word-break: break-all 声明。</p>\n<p>稍等，事情还没结束。照理说，按照字面意思，元素应用 word-break: break-all 声明后，任何文本内容都不会溢出元素，但是有几个意外情况，那就是连续的破折号、连续的点字符，以及避首标点在设置 word-break: break-all 声明后无法换行。还是根据图 3-61 所示的案例，我们修改一下 HTML 内容，在最后插入一段连续的破折号，代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="49169649680104645000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<p>本节会大量出现“CJK文本”这个词。——————————————————</p>\n<p class=&quot;break-all&quot;>本节会大量出现“CJK文本”这个词。——————————————————</p>`, `49169649680104645000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>本节会大量出现“CJK文本”这个词。——————————————————<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>break-all<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>本节会大量出现“CJK文本”这个词。——————————————————<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>在 Edge 浏览器中的效果如图 3-62 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-09-11-18-59-8851f8e13a0311222eeef3b9ea5a91fe-4be4c.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 684px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 48.68421052631579%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAABKUlEQVQoz41Qa2+DMAzs//9h06RJ7cqgXQcJj7XQQkuBBEicxB7tHl+mdrMty5J9ujvPiAjpEiNSVMv3uo2rJtofywEqQ/C5uxGzn0khFXUTh28sijbrVX2sJJJy+F/wtqoHIUBPCQ5AONLuL+Yv2Y7ybpCjltoIBb2CQqhOgbZ2NMZYew88OIp6l0rgnY4FJNJMZdKMwhA5R9+nsrzcIf6WjZqI74qEM86Y/+Kdqqo1TucFMUZFQXFMfX/P8+5Ynw775nza57kUXStHuc2ttYDoEP/wXGkU4FptO3CdtocBRmOdtWb6303PV/TUlLvw66sKRWRuPBm/VcwYTw5leT43nMdZmk2GGeNpkoRhlKZZEKwXi+VUwep1vvQeHp/mi2fPDzzP34TsAz7rQDzW76+tAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 09 11 18 59" title="" data-src="/static/2022-01-09-11-18-59-8851f8e13a0311222eeef3b9ea5a91fe-4be4c.png" data-srcset="/static/2022-01-09-11-18-59-8851f8e13a0311222eeef3b9ea5a91fe-b0b14.png 200w,\n/static/2022-01-09-11-18-59-8851f8e13a0311222eeef3b9ea5a91fe-4a75c.png 400w,\n/static/2022-01-09-11-18-59-8851f8e13a0311222eeef3b9ea5a91fe-4be4c.png 684w" data-sizes="(max-width: 684px) 100vw, 684px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>破折号不换行的问题在 Chrome 浏览器和 Firefox 浏览器中同样存在，想要让连续的破折号换行，可以使用 break-word 这个 CSS 属性值。</p>\n<p>CSS 中有 3 个属性都有 break-word 属性值，且它们的作用都是一样的，分别是：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="7876492237501731000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`word-break: break-word;\nword-wrap: break-word;\noverflow-wrap: break-word;`, `7876492237501731000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">word-break</span><span class="token punctuation">:</span> break-word<span class="token punctuation">;</span>\n<span class="token property">word-wrap</span><span class="token punctuation">:</span> break-word<span class="token punctuation">;</span>\n<span class="token property">overflow-wrap</span><span class="token punctuation">:</span> break-word<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>不过考虑到 IE 浏览器和 Edge 浏览器不支持 overflow-wrap 属性，以及 IE 浏览器和 Edge 浏览器虽然支持 word-break 属性，却不支持 word-break: break-word 声明，最终动态内容的换行控制可以写成下面这样的组合：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="29946223964533125000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`p {\n   /* 字符换行主力 */\n   word-break: break-all;\n   /* 兼容 IE 浏览器和 Edge 浏览器的破折号换行 */\n   word-wrap: break-word;\n}`, `29946223964533125000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">p</span> <span class="token punctuation">{</span>\n   <span class="token comment">/* 字符换行主力 */</span>\n   <span class="token property">word-break</span><span class="token punctuation">:</span> break-all<span class="token punctuation">;</span>\n   <span class="token comment">/* 兼容 IE 浏览器和 Edge 浏览器的破折号换行 */</span>\n   <span class="token property">word-wrap</span><span class="token punctuation">:</span> break-word<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>虽然上面的代码可以让连续英文和连续破折号换行，但是依然会在中文标点的前后留下空白，如图 3-63 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-09-11-28-55-516c525f435ce66dd4692d31a8992fc6-24f57.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 471px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 69.63906581740976%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsSAAALEgHS3X78AAAB8klEQVQoz4VSa3PaMBD0//857adMS4N5FDIDJJAQ1zYxGDB5YVuWJVt+aSsBhXaaaXduTqub2zudJOO1wJzDFXBy2BnsXBNHbTM8FHhrACmlEJjPsVzC9wEdwQHGJMWCFjuSbgl/TvMg4YqsI/qeV4H/8mBvsFrKOMZ6jd0OQfCH+DGHu9p4ru0tnI3vz+8mw++D6WgcBEF5N3N++JfcX6smB27cM8SiptH+aeG5rms7dkyS1dJbectIVJY4Jp+yL/pj5weObZSQKKSUJhqkrpsoDBmlaV5aaaMlokBRgFIwpi1JtBfCeBSwVpvXl+dTh3P58ZhPpq69RhTK7Raeh9lMBTGZYDqFbcOyjBkDEVWRZWnKGEvZaWF5FCbq2PmhWtPoznUNRVTpstS8qvTMey5yzrLfwLOsKERSSYsfxPgYWvzOi4zx9NDwaJSxjDFSNhfxeaLz5SnxjCPiOary78Ksxn86j6kck3rBG4dLl0vlHab9UyZvqZxSqUeWH8NQD7lvsK+xr/BWImwQSe3VVsVL/AtGQgintC4Lkekj8pSSMEwJKYVghIT7MCZEWRTHSUKJ+gbqK9BUWRzHhtnt9Icje+Hdz61ayqsvrU+fr75em8ObUbc/bJn9Vtts9wbf2p2b0W2nM2iZXdPs9XrDa7P/E3fwF0/t1208AAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 09 11 28 55" title="" data-src="/static/2022-01-09-11-28-55-516c525f435ce66dd4692d31a8992fc6-24f57.png" data-srcset="/static/2022-01-09-11-28-55-516c525f435ce66dd4692d31a8992fc6-ea629.png 200w,\n/static/2022-01-09-11-28-55-516c525f435ce66dd4692d31a8992fc6-c47ea.png 400w,\n/static/2022-01-09-11-28-55-516c525f435ce66dd4692d31a8992fc6-24f57.png 471w" data-sizes="(max-width: 471px) 100vw, 471px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>如果希望中文标点也能成为换行点，彻底告别空白，则可以使用 line-break 属性：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="74134118464171820000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`p {\n   /* 中文标点也能换行 */\n   line-break: anywhere;\n}`, `74134118464171820000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">p</span> <span class="token punctuation">{</span>\n   <span class="token comment">/* 中文标点也能换行 */</span>\n   <span class="token property">line-break</span><span class="token punctuation">:</span> anywhere<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-09-14-57-18-2ca8ba8cc2374fd6795252841eac7f25-7a334.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 673px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 38.484398216939084%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA+klEQVQY041Na0/CQBDs//9JhoQ20QZjaosK9IGFltNI+hBtr3uPvTuvoF+IUSaTye5MJuOYH+ijUmWCAz7uD08NDUgdvraLhkbdd3oG5+zvldl+DGSdbtbZdp2uHqI3QgpuUP9ZPqUdmoLi53u7r6qu76u6bto2B31ReVymUgB0lNqyJedsAxcv7wY0jCqF1tNaWc2H/8onMGUSakrQBTPlkfZIwfwKR0qp7AoiAAgp7ZhAxVAzNRKkArQOCiE4F6MKDsAY41acZZyW5GVHyNXEDcLoOc+zNI3CKE6yJE6Wi1UcJ7PbO9e7mbrXvj8Lwrnn+cH9fDL1vgCnBsmdtpYL0AAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 09 14 57 18" title="" data-src="/static/2022-01-09-14-57-18-2ca8ba8cc2374fd6795252841eac7f25-7a334.png" data-srcset="/static/2022-01-09-14-57-18-2ca8ba8cc2374fd6795252841eac7f25-6eafe.png 200w,\n/static/2022-01-09-14-57-18-2ca8ba8cc2374fd6795252841eac7f25-632fc.png 400w,\n/static/2022-01-09-14-57-18-2ca8ba8cc2374fd6795252841eac7f25-7a334.png 673w" data-sizes="(max-width: 673px) 100vw, 673px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/6motxw?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>从图 3-64 可以看出，布局空间被字符充分利用了。不过，虽然布局规整了，阅读体验却不一定好，例如避尾标点前引号出现在了一行的末尾，而避首标点句号出现了在一行的开头。因此，究竟要换行到何种程度，请大家根据实际项目场景自行判断。</p>\n<p>以上提到的换行处理技术非常适合动态内容。如果呈现的文本内容是静态的，我们有能力对其中每个字符进行精确调整，这时候可以试试更高级的排版技术。</p>\n<h2 id="hyphens-属性与连字符"><a href="#hyphens-%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%BF%9E%E5%AD%97%E7%AC%A6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>hyphens 属性与连字符</h2>\n<p>hyphens 是专为英文场景设计的一个属性，这个属性可以让英文单词断开换行的时候带上连字符（也就是短横线），这样可以让读者知道上一行的尾部和下一行的头部连起来是一个完整的单词。其语法如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="49047564903988380000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`hyphens: none | manual | auto;`, `49047564903988380000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">hyphens</span><span class="token punctuation">:</span> none | manual | auto<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>其中，属性值 auto 可以让英文单词在行尾自动换行，同时带上短横线。需要注意的是，英文单词换行不需要设置 word-break 或者 word-wrap 属性，hyphens 属性自带换行能力。如果你设置了 word-break: break-all 声明，反而不会有短横线效果。</p>\n<p>举个例子，假设页面的 <code class="language-text">&lt;html&gt;</code> 元素的 lang 属性值是 en，则下面的代码就会有图 3-65 所示的样式效果：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="33173744751201116000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<p class=&quot;hyphens&quot;>\n   hi, my name is zhangxinxu, how are you?\n</p>\n\n<style>\n   p {\n      width: 150px;\n      padding: 10px;\n      border: solid deepskyblue;\n   }\n\n   .hyphens {\n      hyphens: auto;\n   }\n</style>`, `33173744751201116000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>hyphens<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n   hi, my name is zhangxinxu, how are you?\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n   <span class="token selector">p</span> <span class="token punctuation">{</span>\n      <span class="token property">width</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>\n      <span class="token property">padding</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>\n      <span class="token property">border</span><span class="token punctuation">:</span> solid deepskyblue<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">.hyphens</span> <span class="token punctuation">{</span>\n      <span class="token property">hyphens</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-09-11-40-53-987120dfe72d8dd42db4cb034b4b3bc8-2936c.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 38.35294117647059%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABfUlEQVQY002Q626bQBCFef836AP0R5wqiU1dR01F7EDruLnUN2LHgBccX0TCzQZjFrN7upBWinRm9J3Rzu7sSFcRLjzUPTT8MpdQcaNi2S/VqIoCTl3+ackBlAFI2Ac5zcGOOGbgBViOIkNBeU6FzdOYJlvwY3WAMqC1Q1F2cyHp8Ua57ev68M+53LQXC7nZOruoy81vz6bZu3voqFrtpHZeb3w5rV22tdR56Z20ijAsm8XLPA6d5WobRa+u69i267pBEPq+HwSBKIq8Wa8sQrw375DnLE466qgwTEyn2GykxaDXlL9qypUzn3evv6vKD2IYPbWjtZUVsX6r7e6N4vth9Ucw/n9sSpGmkleAUJCUW/vCoXjJYWfcPnAng7Vn5CAsyIGbSTHfs+eEfV4fGWPvd0laxH9ueTeGkIBfO3R3eLf/VNnbSlqMcYoP2wayOJrro9flMgn8tTkj04kxHOoP9+ZEN/TxbDSwnsbWZDwb9qf9x6f+4M0Lqn3zv0JTrnihEGu6AAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 09 11 40 53" title="" data-src="/static/2022-01-09-11-40-53-987120dfe72d8dd42db4cb034b4b3bc8-fee1c.png" data-srcset="/static/2022-01-09-11-40-53-987120dfe72d8dd42db4cb034b4b3bc8-a67b7.png 200w,\n/static/2022-01-09-11-40-53-987120dfe72d8dd42db4cb034b4b3bc8-0b187.png 400w,\n/static/2022-01-09-11-40-53-987120dfe72d8dd42db4cb034b4b3bc8-fee1c.png 800w,\n/static/2022-01-09-11-40-53-987120dfe72d8dd42db4cb034b4b3bc8-2936c.png 850w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>乍一看，hyphens: auto 还是有点儿用的，但可惜的是，在中文场景中，hyphens: auto 一点儿用处都没有，具体原因有以下几条。</p>\n<ol>\n<li>需要在英语环境中，也就是需要祖先元素设置 lang=“en” 属性。</li>\n<li>由于中文语句中随时可以换行，因此在中文场景下，轮不到 hyphens 属性起作用。就算真的遇到长串的连续字母和数字，也不一定是英文单词，多半是 URL 网址或者特殊字符串，而在网址换行位置添加短横线是不可以的，因为增加一个短横线会导致原本正确的网址变成错误的网址。</li>\n<li>只有在 Android 操作系统下和 macOS 下的 Chrome 浏览器中才有效果，在用户量较大的 Windows 操作系统中无效。</li>\n</ol>\n<p>综上所述，在中文场景下，使用 hyphens 属性自动添加短横线是行不通的。这是不是就说明 hyphens 属性彻底无用呢？是的，彻底无用！我们没有在中文项目中使用 hyphens 属性的理由。但是，请注意，我们可以使用 hyphens 属性的默认特性来设置类似 auto 属性值的排版体验。hyphens 属性的默认值是 manual，表示单词在有换行机会的时候才换行，其中一个常见的换行机会就是连字符。</p>\n<p>很多人并不清楚，连字符总共分两种。一种是“硬连字符”（U+2010），称为可见的换行机会。这个字符就是我们键盘上的短横线“-”，是可见的。另一种是“软连字符”（U+00AD），称为不可见的换行机会。这个字符很有意思，通常情况是隐藏的，但是，如果浏览器觉得有必要在软连字符所在位置打断单词，则连字符又会变为可见。</p>\n<p>在这里，我们需要用到的就是软连字符。在 HTML 中，可以使用 <code class="language-text">&amp;shy;</code> 表示软连字符，单词 shy 的意思是害羞的，因此很好记忆，“害羞”的符号就是软连字符。当然，也可以使用 Unicode 编码表示，即 <code class="language-text">&amp;#x00AD;</code>。例如，下面这段 HTML 代码，在 zhangxinxu 每个汉字的拼音连接处插入了“害羞”的软连字符：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="41955645076571100000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<p>大家好，我叫zhang&shy;xin&shy;xu，感谢大家购买我的书。</p>`, `41955645076571100000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>大家好，我叫zhang<span class="token entity" title="&shy;">&amp;shy;</span>xin<span class="token entity" title="&shy;">&amp;shy;</span>xu，感谢大家购买我的书。<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>同时设置为两端对齐：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="48448498499075620000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`p {\n   padding: 10px;\n   border: solid deepskyblue;\n   text-align: justify;\n   text-justify: inter-ideograph;\n}`, `48448498499075620000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">p</span> <span class="token punctuation">{</span>\n   <span class="token property">padding</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>\n   <span class="token property">border</span><span class="token punctuation">:</span> solid deepskyblue<span class="token punctuation">;</span>\n   <span class="token property">text-align</span><span class="token punctuation">:</span> justify<span class="token punctuation">;</span>\n   <span class="token property">text-justify</span><span class="token punctuation">:</span> inter-ideograph<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>效果如图 3-66 所示，换行符在换行位置显示了，在非换行位置则不可见。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-09-13-44-52-e54c974e98a60820675717071f215ae0-4a060.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 354px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 93.22033898305084%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAIAAAAf7rriAAAACXBIWXMAAAsSAAALEgHS3X78AAAC4ElEQVQ4y6VTWW/bRhDm/89bHwrkJUCfghSOWztq4aSqIBmNHDWOREu8xEs8TYnkivct7WRoCTECtH3p4CMwO9wPM/PNDjMI4VMGH1O4y+HuybmNz/40hWl2Bt75jYBaUACK38mYYQRQZXEcbz2PBH6SpBj1XCcI/CgiURQlSZxlGa1Lszo+1D3nmTyJIQu2pmWuOE4S+JAQjCqSKMtryzYUVV2LIrdcbTZakJT2ix/ggX0mj2MoQl/Tdcx8oDQi4Wz2afGwNC1HVeXPXxY8zwsiP/97JpBirXmw0el6Da57Jqc7F8mbzSbPizSORElYCcJ251umqaiaqiiGaTiWIZFC/FZ2WWLvzHh/dGVJkgRdU+Ff7FSn2wCfUeQ8l41qR2nuJLkTpfv6kHQQtzRqafyMIx7LA+VzWOXfC3YV9DMYPOFdSN+F0COg109A/9rvnUFI3+zoLIGwocfjmc78EoBZg1yCVoNagVKBXIBSUvRP0BuqNYDQa9BKuE4hPPTpsXpmnEAVuJaucYu5zHNZkuAPgZ3LouCgTroqCytbVzbyWuKWtK11QSeCcmIzowgOZeaTvR8S07Icb5sXBUrtodqu67iPhmVZtiWI0sYwk7KQp2z06iewLUoIM47o3nNMu5+bJPHTj9PbyV/uo6up6mKxmH/+slzxmqauVsv7OWsoyn0NOyw7z6hpMpMEiGfvyB5FaLuubbuyrtvu0HRd0/ZWVGh113VV0wI9LlLqN/Sked9zvrXxMX83hH+yk8ZsBrsGzj3/GoBa4wDp8mmM/wG8IBQw3EPcnRMx+5ba5fGxpt/gNeDW9IRTxK3OjlNR0vaP7IizxszwP4zBBWaXnPO4JVFsO24YxRjVDFO3HNOyMaJqBouC43KY1pKTVM3c+T4umuNuGVydH1++mtze8bx4dT24Zzkkv/8wHNwMLy4uh3+O3g/Ho9Ht7zc3by+vXr++vHg7+GM0efPzxeye/QoNExUF7JBv6AAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 09 13 44 52" title="" data-src="/static/2022-01-09-13-44-52-e54c974e98a60820675717071f215ae0-4a060.png" data-srcset="/static/2022-01-09-13-44-52-e54c974e98a60820675717071f215ae0-ca453.png 200w,\n/static/2022-01-09-13-44-52-e54c974e98a60820675717071f215ae0-4a060.png 354w" data-sizes="(max-width: 354px) 100vw, 354px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>如果我们没有在文字中插入连字符，则效果如图 3-67 所示，第一行中文文字之间会有很大的间隙，排版效果看起来非常不自然。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-09-13-48-03-9420ed6c54175673590f4bbd2b55ed3b-65498.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 409px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 70.4156479217604%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB9klEQVQoz4VSC2/aMBDO//8v6zRNa1cxWjqeY20FIRQaYHkQ8rDzsJ0Xgdg3R5Uok4r2yTqfT/f5zp9PAQABDdIa+kTMU67SekZrldVayl9ykI5cMj4igtZwypdQTgdSw5LsjymNUECiMEb+vixlnOIgRDjD7ooUYUMWH5CTGvTs4LvOH9O2LMu0LEJThNDvx8eNYW301wXZRxfIgnKYx7k+m87U6fPT00pfMkr4UbZC8iwTZW4WAh0utM1q0OjRcLy1hzYedmKK830moBCQctgDvOYiukQuavgeQ5vBD9bYFoUWgZtQXGN+m8BNJNqJmGZN2onyr2C0qrI0z3OMcJllcRy/VcCBn+V5QSONVPh4gfzKqtD3AoQcZ+d5uyQhWcoM0zBN07a3q5fZIiriM83eBZNknR2szXoyVTVNs7e2rMYYXa9XnoTve7YpE6KPKgv5VQtaucZG13VnazOWnn/L226UcC64wjkXTYooa6GmYlnAogBp5xmXEzZPhbTNYtLnEybyWsgrJUfyFDhDc8f7CPwfim3bYRiXZZkQUh0OciQ9P5DTGYZR81CEoyj2g8DZuZ7rIRy6MoYwDiOpqfLp81V/OF4s9eeJWnMeBEFvMByOxp1O7+7+od3p3rbvB6Px3UO31f7Z7Q2uvnyT8V7/19fr1l97BBL/DnftSwAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 09 13 48 03" title="" data-src="/static/2022-01-09-13-48-03-9420ed6c54175673590f4bbd2b55ed3b-65498.png" data-srcset="/static/2022-01-09-13-48-03-9420ed6c54175673590f4bbd2b55ed3b-67408.png 200w,\n/static/2022-01-09-13-48-03-9420ed6c54175673590f4bbd2b55ed3b-5cbc3.png 400w,\n/static/2022-01-09-13-48-03-9420ed6c54175673590f4bbd2b55ed3b-65498.png 409w" data-sizes="(max-width: 409px) 100vw, 409px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/goztzc?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>由于软连字符需要提前手动插入，因此，这种排版优化只适合文本内容固定的静态场景。如果想要取消软连字符的换行特性，可以使用 hyphens: none，不过由于在 Chrome 浏览器中不支持 hyphens: none 这个声明，因此其没有实用价值。</p>\n<p>软连字符的兼容性是极好的，IE 浏览器已经完全支持，大家可以放心大胆使用。但是，软连字符实现换行只适合英文单词，类似 <a href="https://www.cssworld.cn" target="_blank" rel="nofollow noreferrer noopener">https://www.cssworld.cn</a> 这样的 URL 地址会因为连字符的出现而产生语义上的干扰，那有没有其他什么符号可以让连续的英文和数字出现换行机会，同时不会影响语义呢？还真有！</p>\n<h2 id="wbr-与精确换行的控制"><a href="#wbr-%E4%B8%8E%E7%B2%BE%E7%A1%AE%E6%8D%A2%E8%A1%8C%E7%9A%84%E6%8E%A7%E5%88%B6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code class="language-text">&lt;wbr&gt;</code> 与精确换行的控制</h2>\n<p>HTML 中有一个 <code class="language-text">&lt;wbr&gt;</code> 元素标签，可以实现连续英文和数字的精准换行，具体效果如下：如果宽度足够，不换行；如果宽度不足，则在 <code class="language-text">&lt;wbr&gt;</code> 元素所在的位置进行换行。也就是说，<code class="language-text">&lt;wbr&gt;</code> 元素提供了一个换行机会。</p>\n<p>借用图 3-66 所示对应的例子，如果我们把 <code class="language-text">&amp;shy;</code> 换成 <code class="language-text">&lt;wbr&gt;</code> 标签，代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="21807919119581286000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<p>大家好，我叫zhang<wbr />xin<wbr />xu，感谢大家购买我的书。</p>`, `21807919119581286000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>大家好，我叫zhang<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>wbr</span> <span class="token punctuation">/></span></span>xin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>wbr</span> <span class="token punctuation">/></span></span>xu，感谢大家购买我的书。<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>则会有图 3-68 所示的效果。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-09-13-54-56-e21247b6308c374e436e5d49737da3a3-571e1.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 584px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 57.02054794520548%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABmUlEQVQoz31SiW7aQBT0/38PbZooFQQkRCgiFpDG1/q+jY1tbMP62OlCm7RR2o5GT2+1b97OSCsAYLjg0IOkpavJceiXWUpkyTV0S5U92/G/bRCFLM/xHsKrmOUDRG9vqEp+LFVNU4huWNbLbqeHidVdBhjwT3HBsHUiR5WTOLxO/mLdM73hzcA+yN/ESFuMUiwqzAqMMzYtwMn7SYFNjf2A/7yMrMNTdlIcXwmS9NxJbkCivR5nJEzdQ6mIUqsRRBEoxWuI3+K8hxznTZ6ZRDN1w7FN+flZlaStKPLGCHNKW7zP/kfmATs3bOvjuakOSUzrqinypihOVdlVR+3Mzh98C+wKLua250ljFie/Q9DBbxG08Ck8irDFthxoz3NfMAzDzyq8remBhpNd/JcM3EgJVFfyI8VfIHx/kaM4cT2PUkpUntasyzIOAl59zyMa0RTVtW3DMPmkZbucsqRalkN0U7j5cs9/A784VvVsvpg8zA3bedpsLdu5H0/vxg+jm9vp/PHrZDb6fLtei4/L1ejT3XK1XixXPwAH72h/cwIN3AAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 09 13 54 56" title="" data-src="/static/2022-01-09-13-54-56-e21247b6308c374e436e5d49737da3a3-571e1.png" data-srcset="/static/2022-01-09-13-54-56-e21247b6308c374e436e5d49737da3a3-2fa92.png 200w,\n/static/2022-01-09-13-54-56-e21247b6308c374e436e5d49737da3a3-52932.png 400w,\n/static/2022-01-09-13-54-56-e21247b6308c374e436e5d49737da3a3-571e1.png 584w" data-sizes="(max-width: 584px) 100vw, 584px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/ol5675?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<h3 id="wbr-实现换行原理"><a href="#wbr-%E5%AE%9E%E7%8E%B0%E6%8D%A2%E8%A1%8C%E5%8E%9F%E7%90%86" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code class="language-text">&lt;wbr&gt;</code> 实现换行原理</h3>\n<p><code class="language-text">&lt;wbr&gt;</code> 之所以能够创造新的换行机会，是因为其创建了一个带有换行特性的宽度为 0px 的空格。该空格的 Unicode 编码是 U+200B，因此 <code class="language-text">&lt;wbr&gt;</code> 标签也可以替换为 <code class="language-text">&amp;#x200b;</code>，例如下面 HTML 代码实现的效果和图 3-68 所示的效果是一样的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="77514344734058070000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<p>大家好，我叫zhang&#x200B;xin&#x200B;xu，感谢大家购买我的书。</p>`, `77514344734058070000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>大家好，我叫zhang<span class="token entity" title="&#x200B;">&amp;#x200B;</span>xin<span class="token entity" title="&#x200B;">&amp;#x200B;</span>xu，感谢大家购买我的书。<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>不过 <code class="language-text">&amp;#x200b;</code> 的语义不太好，建议大家还是使用 <code class="language-text">&lt;wbr&gt;</code>。</p>\n<h3 id="ie-浏览器的兼容处理"><a href="#ie-%E6%B5%8F%E8%A7%88%E5%99%A8%E7%9A%84%E5%85%BC%E5%AE%B9%E5%A4%84%E7%90%86" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>IE 浏览器的兼容处理</h3>\n<p>IE 浏览器并不支持 <code class="language-text">&lt;wbr&gt;</code> 标签，不过好在有简单的方法使 IE 浏览器也兼容 <code class="language-text">&lt;wbr&gt;</code> 的换行特性，那就是加上以下 CSS 代码：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="15637032650308825000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`wbr:after {\n   content: \'\\00200B\';\n}`, `15637032650308825000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">wbr:after</span> <span class="token punctuation">{</span>\n   <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">\'\\00200B\'</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<h3 id="wbr-与-br-换行的区别"><a href="#wbr-%E4%B8%8E-br-%E6%8D%A2%E8%A1%8C%E7%9A%84%E5%8C%BA%E5%88%AB" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code class="language-text">&lt;wbr&gt;</code> 与 <code class="language-text">&lt;br&gt;</code> 换行的区别</h3>\n<p><code class="language-text">&lt;wbr&gt;</code> 是 “Word Break Opportunity” 的缩写，表示有机会就断开换行；而 <code class="language-text">&lt;br&gt;</code> 则是直接换行显示，无论宽度是否足够。</p>\n<h3 id="其他"><a href="#%E5%85%B6%E4%BB%96" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>其他</h3>\n<p><code class="language-text">&lt;wbr&gt;</code> 换行和 <code class="language-text">&amp;shy;</code> 换行的区别在于 <code class="language-text">&lt;wbr&gt;</code> 在换行的时候不会有额外的字符显现，因此，其非常适合用于非英文单词的内容换行，例如 URL 网址，或者长长的 API 名称等。例如，CanvasRenderingContext2D.globalCompositeOperation 就可以使用 <code class="language-text">&lt;wbr&gt;</code> 进行排版优化，保证换行在完整单词末尾处，提高阅读体验：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="91688281774906230000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`Canvas<wbr />Rendering<wbr />Context2D<wbr />.global<wbr />Composite<wbr />Operation`, `91688281774906230000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html">Canvas<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>wbr</span> <span class="token punctuation">/></span></span>Rendering<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>wbr</span> <span class="token punctuation">/></span></span>Context2D<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>wbr</span> <span class="token punctuation">/></span></span>.global<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>wbr</span> <span class="token punctuation">/></span></span>Composite<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>wbr</span> <span class="token punctuation">/></span></span>Operation</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>同样，由于 <code class="language-text">&lt;wbr&gt;</code> 需要提前插入，因此其更适合文本内容固定的静态场景。</p>\n<p>word-break: keep-all 声明可以让 CJK 文本不换行，我们可以在 CJK 文本中的恰当位置插入 <code class="language-text">&lt;wbr&gt;</code> 标签，实现在宽度不足的时候一行变两行的排版优化效果。在应用了 white-space: nowrap 声明的场景下也是类似的。和 <code class="language-text">&amp;shy;</code> 字符一样，<code class="language-text">&lt;wbr&gt;</code> 不能与 word-break: break-all 同时使用，因为这会使 <code class="language-text">&lt;wbr&gt;</code> 变得没有意义。</p>\n<p>最后，总结一下本节的内容。</p>\n<ul>\n<li>动态文本内容换行使用 word-break: break-all 和 word-wrap: break-word 组合代码，如果要彻底换行，还可以使用 line-break: anywhere。</li>\n<li>静态内容排版不建议使用 word-break 属性、word-wrap 属性或者 line-break 属性，如果是英文单词，则使用 <code class="language-text">&amp;shy;</code> 软连字符优化排版；如果是非英文单词，则使用 <code class="language-text">&lt;wbr&gt;</code> 标签优化排版。</li>\n</ul>\n<h2 id="overflow-wrap-anywhere-声明有什么用"><a href="#overflow-wrap-anywhere-%E5%A3%B0%E6%98%8E%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>overflow-wrap: anywhere 声明有什么用</h2>\n<p>overflow-wrap 属性就是以前的 word-wrap 属性，由于 overflow-wrap 属性在 IE 浏览器中不被支持，而其他现代浏览器依然支持 word-wrap 属性语法，因此，没有任何理由使用 overflow-wrap 属性。如果某一天 overflow-wrap 属性突然支持了一个新的属性值 anywhere，那时就有了使用 overflow-wrap 属性的理由。</p>\n<p>overflow-wrap 属性的正式语法如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="10390538956527618000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`overflow-wrap: normal | break-word | anywhere;`, `10390538956527618000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">overflow-wrap</span><span class="token punctuation">:</span> normal | break-word | anywhere<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>这里主要讲一下属性值 anywhere 的作用。在展开讲解之前，先给大家讲解一个概念，关于“硬换行”和“软换行”。硬换行会在文本的换行点处插入实际换行符；而软换行的文本实际上仍在同一行，但看起来它被分成了多行，例如通过 word-break: break-all 让长英文单词换行就属于软换行。</p>\n<p>属性值 anywhere 正常状态下的效果和属性值 break-word 类似，具体描述为：如果行中没有其他可接受的断点，则可以在任何点断开原本不可断开的字符串（如长单词或 URL），并且在断点处不插入连字符。</p>\n<p>属性值 anywhere 和属性值 break-word 的不同之处在于，overflow-wrap: anywhere 在计算最小内容尺寸的时候会考虑软换行，而 overflow-wrap: break-word 则不会考虑软换行。看下面这个例子：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="7390533930749488000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<p class=&quot;anywhere&quot;>I\'m zhangxinxu.</p>\n<p class=&quot;break-word&quot;>I\'m zhangxinxu.</p>\n<style>\n   p {\n      display: inline-block;\n      width: min-content;\n      padding: 10px;\n      border: solid deepskyblue;\n      vertical-align: top;\n   }\n\n   .anywhere {\n      overflow-wrap: anywhere;\n   }\n\n   .break-word {\n      overflow-wrap: break-word;\n   }\n</style>`, `7390533930749488000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>anywhere<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>I\'m zhangxinxu.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>break-word<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>I\'m zhangxinxu.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n   <span class="token selector">p</span> <span class="token punctuation">{</span>\n      <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>\n      <span class="token property">width</span><span class="token punctuation">:</span> min-content<span class="token punctuation">;</span>\n      <span class="token property">padding</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>\n      <span class="token property">border</span><span class="token punctuation">:</span> solid deepskyblue<span class="token punctuation">;</span>\n      <span class="token property">vertical-align</span><span class="token punctuation">:</span> top<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">.anywhere</span> <span class="token punctuation">{</span>\n      <span class="token property">overflow-wrap</span><span class="token punctuation">:</span> anywhere<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">.break-word</span> <span class="token punctuation">{</span>\n      <span class="token property">overflow-wrap</span><span class="token punctuation">:</span> break-word<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>在 Chrome 浏览器中的效果如图 3-69 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-09-14-14-05-829563723cf898f6118803290c412bf1-72b93.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 659px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 43.85432473444613%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsSAAALEgHS3X78AAAA2UlEQVQoz5WOWQuCUBCF/f//KIKIFtpsoU3N4rY85FJapt7yzp1JpeihjDowcBjOxzkKfRIQ6aFUvWR/iXcxOEn2xLeYUgSz4Do+3Xaux06R+xcskLZhcuCARz+JuMSPqWJ4EwnfO5NtoeOQEP/AROvg6l/idGxB6/fmWPiWS4xhEPwEpy2YN0miVQhHLohzLNicwQAScz35HJYS8DU4tQCQp6TM7oEo9UZTM0y23tqOq+mLuW7ohtlV+8PRaKaldmmaq8l0XipXWu1urdGqVOsddTCeznq94R22aQpHmgMitAAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 09 14 14 05" title="" data-src="/static/2022-01-09-14-14-05-829563723cf898f6118803290c412bf1-72b93.png" data-srcset="/static/2022-01-09-14-14-05-829563723cf898f6118803290c412bf1-6e9e4.png 200w,\n/static/2022-01-09-14-14-05-829563723cf898f6118803290c412bf1-8b598.png 400w,\n/static/2022-01-09-14-14-05-829563723cf898f6118803290c412bf1-72b93.png 659w" data-sizes="(max-width: 659px) 100vw, 659px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>大家可以看到，应用了 overflow-wrap: anywhere 声明的元素的最小宽度是把每一个英文单词都断开后的宽度，而应用了 overflow-wrap: break-word 声明的元素还是按照默认的最小宽度规则进行计算。也就是说，属性值 anywhere 和 break-word 均按照最小宽度渲染，都保留标点符号的避首规则和避尾规则，但是 anywhere 的换行点是单词的任意位置，而 break-word 的换行点是单词之间的空格。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/r45g7z?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>由此可见，overflow-wrap: anywhere 就像 overflow-wrap: break-word 和 word-break: break-all 声明的混合体，适合用在弹性布局中，即元素尺寸足够的时候尽量让长串的数字和英文完整显示，不随便中断；如果尺寸不够，那就能断则断。overflow-wrap: anywhere 的行为表现和 line-break: anywhere 是有明显区别的，line-break: anywhere 不管元素尺寸是否足够，都是能断则断。</p>\n<h3 id="兼容性-5"><a href="#%E5%85%BC%E5%AE%B9%E6%80%A7-5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>兼容性</h3>\n<p>overflow-wrap: anywhere 声明目前的兼容性还不算乐观，在 2021 年 2 月 Safari 浏览器还不支持，具体信息如表 3-11 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-09-14-20-10-aee82df06372fd200352ca4cdf7e2001-69fa0.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 29.42453854505972%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsSAAALEgHS3X78AAABRklEQVQY0x2OQU/CMBiG99P9A8aDB0/GRMLFmGiMJpqYiAcNmiAIjsHGxujovrZr2djWrh0DRC9P8uZ5D48FlOGY1HVNgKIIM8ZjDEsM0T8nU39oO8ORs4yp5wWD0dhxZ/NwYU9cLlaWkdne5JXMKrXWKqtMaXa1lNnOlFpJo/P99s9uTdZs1lKmusqbWjd1oWRmBRSdTBnPljdv44eeqxdfq9fLNPc7t23ev/sh7OgJlRm6+iYX3agpI1Mlg7CF2XSjuWUDPp9Rrejz57jrosLpu6dnRY5a79fYf5wn/LgTViXcj1D7Y75ToEp46bW6g15jhJWA16yRYAEgJwGfUJ+IiJGAg0dJyMEt2UQkAcd2Cg4lPmCXRH4cOSIJLQqB0eLwrhSTBRycKggjs5VYHCYBX0rKk1AkCyUpib11uqw1P8RXkv4CHP9AadwciOAAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 09 14 20 10" title="" data-src="/static/2022-01-09-14-20-10-aee82df06372fd200352ca4cdf7e2001-fee1c.png" data-srcset="/static/2022-01-09-14-20-10-aee82df06372fd200352ca4cdf7e2001-a67b7.png 200w,\n/static/2022-01-09-14-20-10-aee82df06372fd200352ca4cdf7e2001-0b187.png 400w,\n/static/2022-01-09-14-20-10-aee82df06372fd200352ca4cdf7e2001-fee1c.png 800w,\n/static/2022-01-09-14-20-10-aee82df06372fd200352ca4cdf7e2001-69fa0.png 921w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>由于 overflow-wrap: anywhere 的兼容性不佳，因此它目前的实用性远不及 line-break: anywhere，大家了解即可。</p>\n<h1 id="text-align-属性相关的新特性"><a href="#text-align-%E5%B1%9E%E6%80%A7%E7%9B%B8%E5%85%B3%E7%9A%84%E6%96%B0%E7%89%B9%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>text-align 属性相关的新特性</h1>\n<p>text-align 属性支持常用的属性值 left、right、center、justify，也支持逻辑属性值 start、end，除此之外，还新增了多个其他属性值。包括：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="20216742336000524000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`text-align: match-parent;\ntext-align: justify-all;\ntext-align: <string>;`, `20216742336000524000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">text-align</span><span class="token punctuation">:</span> match-parent<span class="token punctuation">;</span>\n<span class="token property">text-align</span><span class="token punctuation">:</span> justify-all<span class="token punctuation">;</span>\n<span class="token property">text-align</span><span class="token punctuation">:</span> &lt;string><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>不过这几个新增的属性值的兼容性都不太好，因此不适合在生产环境中使用，大家先简单了解一下即可。</p>\n<h2 id="match-parent-等新属性值"><a href="#match-parent-%E7%AD%89%E6%96%B0%E5%B1%9E%E6%80%A7%E5%80%BC" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>match-parent 等新属性值</h2>\n<p>先了解一下 match-parent 属性值。match-parent 视觉表现类似 inherit，由于 text-align 属性本身就具有继承性，因此，match-parent 不是用来改变视觉上的对齐效果的，而是用来改变“看不见”的对齐计算值。</p>\n<p>没错，match-parent 属性值的作用是有些奇怪，我们看一个例子来帮助我们理解这个属性值，HTML 代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="64432185884528394000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<section>\n   <p id=&quot;p1&quot;></p>\n</section>\n<section>\n   <p id=&quot;p2&quot;></p>\n</section>`, `64432185884528394000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>p1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>p2<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>有 p1 和 p2 两个元素，此时，我们给 p2 设置 text-align: match-parent，代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="63201149574982840000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`section {\n   direction: rtl;\n   text-align: start;\n}\n\n#p2 {\n   text-align: -webkit-match-parent;\n   text-align: match-parent;\n}`, `63201149574982840000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">section</span> <span class="token punctuation">{</span>\n   <span class="token property">direction</span><span class="token punctuation">:</span> rtl<span class="token punctuation">;</span>\n   <span class="token property">text-align</span><span class="token punctuation">:</span> start<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">#p2</span> <span class="token punctuation">{</span>\n   <span class="token property">text-align</span><span class="token punctuation">:</span> -webkit-match-parent<span class="token punctuation">;</span>\n   <span class="token property">text-align</span><span class="token punctuation">:</span> match-parent<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>此时，p1 和 p2 两个元素的对齐表现是一样的，但是如果我们使用 JavaScript 代码去获取 p1 和 p2 两个元素的 text-align 计算值，就会有不同的表现：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="21545943547572376000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 显示的是 start\nconsole.log(getComputedStyle(p1).textAlign);\n// 显示的是 right\nconsole.log(getComputedStyle(p2).textAlign);`, `21545943547572376000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// 显示的是 start</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">getComputedStyle</span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span><span class="token punctuation">.</span>textAlign<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">// 显示的是 right</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">getComputedStyle</span><span class="token punctuation">(</span>p2<span class="token punctuation">)</span><span class="token punctuation">.</span>textAlign<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>match-parent 的计算值是视觉上的 left 或者 right，哪怕继承自 start 或者 end 这类逻辑属性值。这样有助于我们在 JavaScript 应用中知道元素对齐的视觉方位。</p>\n<p>接下来了解一下 justify-all 属性值。justify-all 属性值的作用是实现两端对齐，它和 justify 属性值的区别在于 justify-all 属性值可以让最后一行也表现为两端对齐。可惜目前还没有浏览器支持 justify-all 属性值，因此要实现最后一行两端对齐，可以使用目前兼容性最好的 CSS 属性 text-align-last 属性，示意如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="31340821857343947000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`text-align-last: justify;`, `31340821857343947000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">text-align-last</span><span class="token punctuation">:</span> justify<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>可惜 Safari 浏览器一直到 Safari 14 版本都没有支持 text-align-last 属性。</p>\n<p>说到两端对齐，顺便提一下 text-justify 属性。在现代浏览器中，两端对齐的算法是：CJK 文本使用 letter-spacing 间隔算法，非 CJK 文本使用 word-spacing 间隔算法。如果我们希望非 CJK 文本也使用 letter-spacing 间隔算法，也就是每个字母彼此都可以拉开间隙，则可以使用：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="72913034231806575000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`text-justify: inter-character;`, `72913034231806575000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">text-justify</span><span class="token punctuation">:</span> inter-character<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>可惜 Safari 浏览器一直到 Safari 14 版本都没有支持 text-justify 属性。</p>\n<h2 id="text-align-属性的字符对齐特性"><a href="#text-align-%E5%B1%9E%E6%80%A7%E7%9A%84%E5%AD%97%E7%AC%A6%E5%AF%B9%E9%BD%90%E7%89%B9%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>text-align 属性的字符对齐特性</h2>\n<p>在 CSS Text Module Level 4 规范中，text-align 属性还新增了对字符属性值的支持。</p>\n<p>这个字符属性值必须是单个字符，否则会被忽略，同时只能作用在单元格中，让单元格基于这个指定的字符对齐。字符可以和关键字属性值一起使用，如果没有关键字属性值，字符会显示在右侧。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="85427565401246430000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`td {\n   text-align: \'.\' center;\n}`, `85427565401246430000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">td</span> <span class="token punctuation">{</span>\n   <span class="token property">text-align</span><span class="token punctuation">:</span> <span class="token string">\'.\'</span> center<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>HTML 如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="68853279173497770000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<table>\n<col width=&quot;40&quot;>\n<tr><th>长途电话费用\n<tr><td>¥1.30\n<tr><td>¥2.50\n<tr><td>¥10.80\n<tr><td>¥111.01\n<tr><td>¥85.\n<tr><td>N/A\n<tr><td>¥.05\n<tr><td>¥.06\n</table>`, `68853279173497770000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>col</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>40<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">></span></span>长途电话费用\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>¥1.30\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>¥2.50\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>¥10.80\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>¥111.01\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>¥85.\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>N/A\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>¥.05\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>¥.06\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>此时，单元格的数值会按照字符“.”进行对齐：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="46493284328212470000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`+---------------------+\n|     长途电话费用     |\n+---------------------+\n|         ¥1.30       |\n|         ¥2.50       |\n|        ¥10.80       |\n|       ¥111.01       |\n|        ¥85.         |\n|        N/A          |\n|          ¥.05       |\n|          ¥.06       |\n+---------------------+`, `46493284328212470000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title=""\n              >\n                \n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">+---------------------+\n|     长途电话费用     |\n+---------------------+\n|         ¥1.30       |\n|         ¥2.50       |\n|        ¥10.80       |\n|       ¥111.01       |\n|        ¥85.         |\n|        N/A          |\n|          ¥.05       |\n|          ¥.06       |\n+---------------------+</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>更细节的对齐规则（如边界和换行）这里做了省略</p>\n<h1 id="text-decoration-属性全新升级"><a href="#text-decoration-%E5%B1%9E%E6%80%A7%E5%85%A8%E6%96%B0%E5%8D%87%E7%BA%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>text-decoration 属性全新升级</h1>\n<p>顾名思义，text-decoration 就是“文字装饰”的意思，常见应用之一就是控制链接元素的下划线样式，代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="95296534008188010000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`a {\n   text-decoration: none;\n}\n\na:hover {\n   text-decoration: underline;\n}`, `95296534008188010000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">a</span> <span class="token punctuation">{</span>\n   <span class="token property">text-decoration</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">a:hover</span> <span class="token punctuation">{</span>\n   <span class="token property">text-decoration</span><span class="token punctuation">:</span> underline<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>还可以和 <code class="language-text">&lt;del&gt;</code> 元素一起使用以实现贯穿线删除效果：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="34297765884155916000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`del {\n   text-decoration: line-through;\n}`, `34297765884155916000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">del</span> <span class="token punctuation">{</span>\n   <span class="token property">text-decoration</span><span class="token punctuation">:</span> line-through<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>不少前端开发者对 text-decoration 属性的认识就只有上面这点信息，实际上 text-decoration 属性包含的细节知识还是比较多的。</p>\n<h2 id="text-decoration-属性现在是一种缩写"><a href="#text-decoration-%E5%B1%9E%E6%80%A7%E7%8E%B0%E5%9C%A8%E6%98%AF%E4%B8%80%E7%A7%8D%E7%BC%A9%E5%86%99" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>text-decoration 属性现在是一种缩写</h2>\n<p>在过去，text-decoration 属性就是一个单一的 CSS 属性。但是现在，text-decoration 属性则是一个 CSS 缩写属性，完整的 CSS 属性包括 text-decoration-line、text-decoration-style、text-decoration-color 和 text-decoration-thickness。</p>\n<ul>\n<li>\n<p>text-decoration-line：表示装饰线的类型。语法如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="56608464009498575000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 没有装饰线 */\ntext-decoration-line: none;\n/* 下装饰线 */\ntext-decoration-line: underline;\n/* 上装饰线 */\ntext-decoration-line: overline;\n/* 贯穿装饰线 */\ntext-decoration-line: line-through;`, `56608464009498575000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 没有装饰线 */</span>\n<span class="token property">text-decoration-line</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>\n<span class="token comment">/* 下装饰线 */</span>\n<span class="token property">text-decoration-line</span><span class="token punctuation">:</span> underline<span class="token punctuation">;</span>\n<span class="token comment">/* 上装饰线 */</span>\n<span class="token property">text-decoration-line</span><span class="token punctuation">:</span> overline<span class="token punctuation">;</span>\n<span class="token comment">/* 贯穿装饰线 */</span>\n<span class="token property">text-decoration-line</span><span class="token punctuation">:</span> line-through<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>text-decoration-line 属性支持多个值同时使用，例如</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="71587783394747250000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 上、下装饰线同时出现 */\ntext-decoration-line: underline overline;`, `71587783394747250000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 上、下装饰线同时出现 */</span>\n<span class="token property">text-decoration-line</span><span class="token punctuation">:</span> underline overline<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>text-decoration-style：表示装饰线的样式风格。语法如下</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="50786320884452070000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 实线 */\ntext-decoration-style: solid;\n/* 双实线 */\ntext-decoration-style: double;\n/* 点线 */\ntext-decoration-style: dotted;\n/* 虚线 */\ntext-decoration-style: dashed;\n/* 波浪线 */\ntext-decoration-style: wavy;`, `50786320884452070000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 实线 */</span>\n<span class="token property">text-decoration-style</span><span class="token punctuation">:</span> solid<span class="token punctuation">;</span>\n<span class="token comment">/* 双实线 */</span>\n<span class="token property">text-decoration-style</span><span class="token punctuation">:</span> double<span class="token punctuation">;</span>\n<span class="token comment">/* 点线 */</span>\n<span class="token property">text-decoration-style</span><span class="token punctuation">:</span> dotted<span class="token punctuation">;</span>\n<span class="token comment">/* 虚线 */</span>\n<span class="token property">text-decoration-style</span><span class="token punctuation">:</span> dashed<span class="token punctuation">;</span>\n<span class="token comment">/* 波浪线 */</span>\n<span class="token property">text-decoration-style</span><span class="token punctuation">:</span> wavy<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>不同的 text-decoration-style 属性值效果如图 3-71 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-11-12-08-01-7451f4e1967ba6d518bca8b442964b0e-284ba.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 653px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 56.04900459418071%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABnklEQVQoz1WSa4+aYBCF/f8/R0O/KF5wFdayXFTEQiWSKIrIVeo2xkufBdvGE/N6ZjIzZy407vf74/HwPE8URdu2e72eqn4H3W53PB67rvuuKNJQ8lbecDgUO50sy4ivsxr1X1EU2+02iqIgCPb7fRiGuwp44HgOhwMm/HK5PP6i8U+53W5bloX+ewXI2+iNXuBozufzwWAgK0qz2aRiLf5MpqqmaYvFwjTNWQXDMKbTKR4656Wurus4TcMs8vwlebPZyLK8Xq/RsSpACMXPq6qq768nkwm7UD9UZnxJxmbQJEmY7VghhEWHNE1pEhonMU74MT5+/v58mdn3/X6/T4eSJOkVIOisViuWryiy4zjMDBmNRizoRbksS8oXRU7tNEmzLMWkETqKK+R5zpFoBH69Xp/KNUOz1Wpp2ocgCGgOJEn4JnTEDgNjcgiWx8vaySf+drv9Vz6dTvVVqwEP3BPCD4Igal8r+GqtqOOfyro53Qa7svx1Pp9d11v++ImZZTlfShwnQbCL4oQ5dvtwsXQsezmzbN2YzS3bXjp/AMXQR5o0/XXFAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 11 12 08 01" title="" data-src="/static/2022-01-11-12-08-01-7451f4e1967ba6d518bca8b442964b0e-284ba.png" data-srcset="/static/2022-01-11-12-08-01-7451f4e1967ba6d518bca8b442964b0e-b5223.png 200w,\n/static/2022-01-11-12-08-01-7451f4e1967ba6d518bca8b442964b0e-dce0f.png 400w,\n/static/2022-01-11-12-08-01-7451f4e1967ba6d518bca8b442964b0e-284ba.png 653w" data-sizes="(max-width: 653px) 100vw, 653px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n<li>\n<p>text-decoration-color：表示装饰线的颜色。</p>\n</li>\n<li>\n<p>text-decoration-thickness：表示装饰线的粗细。</p>\n<p>缩写的正式语法如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="12525219032829549000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`text-decoration: <text-decoration-line> || <text-decoration-style> || <text-decoration-color> ||\n  <text-decoration-thickness>;`, `12525219032829549000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">text-decoration</span><span class="token punctuation">:</span> &lt;text-decoration-line> || &lt;text-decoration-style> || &lt;text-decoration-color> ||\n  &lt;text-decoration-thickness><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>意思就是，4 个子属性值位置随机、组合随机，因此下面这些语法都是合法的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="58009622969279365000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`text-decoration: underline;\ntext-decoration: dotted underline;\ntext-decoration: red underline dashed;\ntext-decoration: wavy underline 3px red;`, `58009622969279365000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">text-decoration</span><span class="token punctuation">:</span> underline<span class="token punctuation">;</span>\n<span class="token property">text-decoration</span><span class="token punctuation">:</span> dotted underline<span class="token punctuation">;</span>\n<span class="token property">text-decoration</span><span class="token punctuation">:</span> red underline dashed<span class="token punctuation">;</span>\n<span class="token property">text-decoration</span><span class="token punctuation">:</span> wavy underline 3px red<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>不过由于 text-decoration-thickness 属性是在 CSS Text DecorationModule Level 4 规范中加入的，因此兼容性要差一些，因此属性值 wavy underline 3px red 建议分开设置：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="67279341393881940000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`text-decoration: wavy underline red;\ntext-decoration-thickness: 3px;`, `67279341393881940000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">text-decoration</span><span class="token punctuation">:</span> wavy underline red<span class="token punctuation">;</span>\n<span class="token property">text-decoration-thickness</span><span class="token punctuation">:</span> 3px<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n</li>\n</ul>\n<h2 id="text-decoration-属性的累加特性"><a href="#text-decoration-%E5%B1%9E%E6%80%A7%E7%9A%84%E7%B4%AF%E5%8A%A0%E7%89%B9%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>text-decoration 属性的累加特性</h2>\n<p>text-decoration 最有意思的特性要数装饰线的累加特性了。</p>\n<p>过去我一直坚信，如果父元素和子元素使用相同的 CSS 属性，那么子元素的属性值一定会覆盖父元素的属性值。CSS 属性那么多，几乎都遵循了这个规律，然而，在这么多 CSS 属性中出现了一个异类，那就是 text-decoration 属性。当父元素和子元素同时设置 text-decoration 效果的时候，文字的装饰线效果是累加的，而不是覆盖的。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="55672233137029490000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<section>\n   <p>父元素设置了 text-decoration: dashed underline</p>\n   <p>子元素设置了 text-decoration: wavy overline</p>\n</section>\n<style>\n   section {\n      text-decoration: dashed underline;\n   }\n\n   p {\n      text-decoration: wavy overline;\n   }\n</style>`, `55672233137029490000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>父元素设置了 text-decoration: dashed underline<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>子元素设置了 text-decoration: wavy overline<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n   <span class="token selector">section</span> <span class="token punctuation">{</span>\n      <span class="token property">text-decoration</span><span class="token punctuation">:</span> dashed underline<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">p</span> <span class="token punctuation">{</span>\n      <span class="token property">text-decoration</span><span class="token punctuation">:</span> wavy overline<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>按照我们的日常开发经验，<code class="language-text">&lt;p&gt;</code> 元素是子元素，其设置的 text-decoration 属性值 wavy overline 应该覆盖 <code class="language-text">&lt;section&gt;</code> 父元素设置的 text-decoration 属性值 dashed underline，但是实际上，最终呈现的是两个属性值合并的效果，如图 3-72 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-11-19-53-44-4e0f95ced5ec994882c9b4eaea220cf1-e0314.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 27.102803738317753%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsSAAALEgHS3X78AAAA80lEQVQY0yWP3W6DMAyFef9n6sRFp04q0whNQn4hLAmJtKoEpNEiFdp5my8+HcU+znHWtBohVByP70VxOLxhjIUQUgrGmZSSUMK5EFxQShljIJWSNaUYE2tdFkLQWuNTRQmGZgzBGOO9h6VApbW11nRdo3WjlHXO2s6YVummNSYbUwJzB31j4M+mbb13fd+DExj6HgzAXx1CjME5/2ltjHHdtux8/iKEvOx2r/t9nucQrEJlzXiFEKWE4BMqK8FriAbHQGYYRuUHcL5es+dfres6pHS7Lff7fVkWEP/8nmd4H4YhjeM4TZdLSuMEw4/nY9u2H4o6BzUO0DgdAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 11 19 53 44" title="" data-src="/static/2022-01-11-19-53-44-4e0f95ced5ec994882c9b4eaea220cf1-fee1c.png" data-srcset="/static/2022-01-11-19-53-44-4e0f95ced5ec994882c9b4eaea220cf1-a67b7.png 200w,\n/static/2022-01-11-19-53-44-4e0f95ced5ec994882c9b4eaea220cf1-0b187.png 400w,\n/static/2022-01-11-19-53-44-4e0f95ced5ec994882c9b4eaea220cf1-fee1c.png 800w,\n/static/2022-01-11-19-53-44-4e0f95ced5ec994882c9b4eaea220cf1-e0314.png 856w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/dpo65u?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<h2 id="唯一实用的-wavy-波浪线"><a href="#%E5%94%AF%E4%B8%80%E5%AE%9E%E7%94%A8%E7%9A%84-wavy-%E6%B3%A2%E6%B5%AA%E7%BA%BF" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>唯一实用的 wavy 波浪线</h2>\n<p>text-decoration 属性虽然新增了多个装饰线样式，同时可以控制线条颜色和粗细，乍一看使人感觉这个属性非常强大，实际上 text-decoration 属性还没有 10 年前“混得好”，至少 10 年前还流行给链接加个下划线（现在链接都是通过颜色区分）。</p>\n<p>text-decoration 属性境遇尴尬的另外一个原因就是它竞争不过 border 属性：用 border 属性实现实线、双实线、点线或虚线效果很轻松，它对颜色和粗细的控制能力也很强，而且 border 属性配合 padding 属性还能灵活控制装饰线和文字之间的距离，也支持多行下划线（元素需要保持 inline 水平）；虽然新出现的 text-underline-offset 属性可以控制文字和下划线的距离，但是其兼容性比 border 属性差得多。所以无论怎么看都是 border 属性更有优势。</p>\n<p>好在 text-decoration 属性并非一无是处，它有一个特性要比 border 属性强，那就是可以实现波浪线装饰线效果，这个是 border 属性实现不了的。</p>\n<p>例如，想要绘制一个宽度 100% 的波浪线效果，可以自定义 wavy 标签，然后应用如下 CSS 代码：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="6293209716242499000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`wavy {\n   display: block;\n   height: 0.5em;\n   white-space: nowrap;\n   letter-spacing: 100vw;\n   padding-top: 0.5em;\n   overflow: hidden;\n}\n\nwavy::before {\n   content: \'\\2000\\2000\';\n   /* IE 浏览器用实线代替 */\n   text-decoration: overline;\n   /* 现代浏览器，Safari 浏览器不支持 text-decoration: overline wavy 缩写 */\n   text-decoration: overline wavy;\n}`, `6293209716242499000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">wavy</span> <span class="token punctuation">{</span>\n   <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 0.5em<span class="token punctuation">;</span>\n   <span class="token property">white-space</span><span class="token punctuation">:</span> nowrap<span class="token punctuation">;</span>\n   <span class="token property">letter-spacing</span><span class="token punctuation">:</span> 100vw<span class="token punctuation">;</span>\n   <span class="token property">padding-top</span><span class="token punctuation">:</span> 0.5em<span class="token punctuation">;</span>\n   <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">wavy::before</span> <span class="token punctuation">{</span>\n   <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">\'\\2000\\2000\'</span><span class="token punctuation">;</span>\n   <span class="token comment">/* IE 浏览器用实线代替 */</span>\n   <span class="token property">text-decoration</span><span class="token punctuation">:</span> overline<span class="token punctuation">;</span>\n   <span class="token comment">/* 现代浏览器，Safari 浏览器不支持 text-decoration: overline wavy 缩写 */</span>\n   <span class="token property">text-decoration</span><span class="token punctuation">:</span> overline wavy<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>此时，只要插入下面这段 HTML 代码，就会有波浪线效果了：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="32014743060097260000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<wavy></wavy>`, `32014743060097260000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>wavy</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>wavy</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>实现的原理很简单，伪元素生成两个空格，使用 letter-spacing 属性控制两个空格占据足够的宽度，这样空格字符的装饰线的尺寸一定可以充满整个容器，此时只要设置装饰线的类型是波浪线，宽度 100% 自适应的波浪线效果就实现了。最终效果如图 3-73 所示（截自 Chrome 浏览器）。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/1nezsp?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>与用图片实现的波浪线相比，这里借助 text-decoration 属性实现的波浪线更加灵活，颜色可以通过 color 属性控制，大小可以通过 font-size 控制。虽然使用 CSS 渐变也能生成波浪线效果，但是那个要难理解多了。总而言之，波浪线效果的最佳实现方法就是使用 text-decoration 属性，这也是 text-decoration 属性唯一无可替代的新特性。</p>\n<h2 id="可能需要-text-underline-position-under-声明"><a href="#%E5%8F%AF%E8%83%BD%E9%9C%80%E8%A6%81-text-underline-position-under-%E5%A3%B0%E6%98%8E" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>可能需要 text-underline-position: under 声明</h2>\n<p>text-underline-position 属性可以用来设置下划线的位置。text-underline-position 这个属性很有意思，虽然是最近几年现代浏览器才开始支持的 CSS 新属性，但是 IE 浏览器很早就支持这个 CSS 属性了，而且从 IE6 浏览器就开始支持了。</p>\n<p>但是，别高兴得太早，不要以为 IE 浏览器这次挣回了点面子，其实 IE 浏览器支持的那些属性值在 CSS 规范中压根就没被承认，而且一点也不实用。为了对比方便，我专门整理了一个表，把各个浏览器目前支持的 text-underline-position 属性值罗列到了一起，个中关系一目了然，如表所示。</p>\n<table>\n<thead>\n<tr>\n<th align="left">属性值/浏览器</th>\n<th align="left">IE/Edge</th>\n<th align="left">Chrome</th>\n<th align="left">Firefox</th>\n<th align="left">Safari(PC)</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align="left">auto（初始值）</td>\n<td align="left">√</td>\n<td align="left">√</td>\n<td align="left">√</td>\n<td align="left">√</td>\n</tr>\n<tr>\n<td align="left">above（非标准）</td>\n<td align="left">√</td>\n<td align="left">×</td>\n<td align="left">√</td>\n<td align="left">×</td>\n</tr>\n<tr>\n<td align="left">below（非标准）</td>\n<td align="left">√</td>\n<td align="left">×</td>\n<td align="left">√</td>\n<td align="left">×</td>\n</tr>\n<tr>\n<td align="left">under</td>\n<td align="left">×</td>\n<td align="left">√</td>\n<td align="left">√</td>\n<td align="left">√</td>\n</tr>\n<tr>\n<td align="left">left</td>\n<td align="left">×</td>\n<td align="left">√</td>\n<td align="left">√</td>\n<td align="left">×</td>\n</tr>\n<tr>\n<td align="left">right</td>\n<td align="left">×</td>\n<td align="left">√</td>\n<td align="left">√</td>\n<td align="left">×</td>\n</tr>\n<tr>\n<td align="left">from-font（Level 4 新增）</td>\n<td align="left">×</td>\n<td align="left">×</td>\n<td align="left">√</td>\n<td align="left">×</td>\n</tr>\n</tbody>\n</table>\n<p>虽然上表所示的 text-underline-position 支持的属性值很多，但是实用的属性值其实就只有一个，那就是 under。</p>\n<p>在默认状态下，下划线在基线位置附近显示，于是就会和“g”“q”这些下方有“小尾巴”的字符发生重叠，以及会和中文字体，尤其是那些字重偏下的中文字体（如微软雅黑）的下边缘重叠，这样的视觉体验很不好，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="48534955447350090000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<p>看看下划线的位置在哪里？</p>\n<style>\n   p {\n      text-decoration: underline;\n   }\n</style>`, `48534955447350090000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>看看下划线的位置在哪里？<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n   <span class="token selector">p</span> <span class="token punctuation">{</span>\n      <span class="token property">text-decoration</span><span class="token punctuation">:</span> underline<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>上面代码的效果如图 3-74 所示，可以看到很多汉字最下面的“横”笔画和下划线重叠在一起了，看起来很不舒服。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-12-10-44-41-c2c5843428ef8015b12fdb41ca4256be-6604a.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 17.924528301886795%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsSAAALEgHS3X78AAAA2klEQVQI1y2P3RKBUBSFe/83EDMy3TDTz5lB4YJBOupUUhpKiLyApr85LrIH+2LPt9Ze62IzijI2Cdnt3CAINB07jo2xvta0Lcau657CaDwazhcLi5C970sSWi2Xs9kU/CzLmU6blWTkef5GW/cHA4TkHsfxPC+K4kRVR4oKUoQSkhV10mLbgiBwXc4wyD25M3VdF0VRVVVZlrCAAfI8B1X8ofw5cKGUQhIq33DFNE0TxfEtebyy7HpLiOUYxDmG5zCKo/himPbeD9L06XmHrWlZNjxypvTdfOcD1aPGuG2w3RQAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 12 10 44 41" title="" data-src="/static/2022-01-12-10-44-41-c2c5843428ef8015b12fdb41ca4256be-fee1c.png" data-srcset="/static/2022-01-12-10-44-41-c2c5843428ef8015b12fdb41ca4256be-a67b7.png 200w,\n/static/2022-01-12-10-44-41-c2c5843428ef8015b12fdb41ca4256be-0b187.png 400w,\n/static/2022-01-12-10-44-41-c2c5843428ef8015b12fdb41ca4256be-fee1c.png 800w,\n/static/2022-01-12-10-44-41-c2c5843428ef8015b12fdb41ca4256be-6604a.png 848w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>text-underline-position: under 声明就是专门用来解决这个糟糕的视觉体验问题的，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="39839741657804930000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<p class=&quot;under&quot;>看看下划线的位置在哪里？</p>\n<style>\n   p {\n      text-decoration: underline;\n   }\n\n   .under {\n      text-underline-position: under;\n   }\n</style>`, `39839741657804930000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html{8}"\n              >\n                <span class="gatsby-code-button-language">html{8}</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight has-highlighted-lines" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>under<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>看看下划线的位置在哪里？<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n   <span class="token selector">p</span> <span class="token punctuation">{</span>\n      <span class="token property">text-decoration</span><span class="token punctuation">:</span> underline<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">.under</span> <span class="token punctuation">{</span>\n<span class="gatsby-highlight-code-line">      <span class="token property">text-underline-position</span><span class="token punctuation">:</span> under<span class="token punctuation">;</span></span>   <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>上面代码的效果如图 3-75 所示，可以看到汉字最下面的“横”笔画和下划线明显分开了，这个下划线效果看起来就舒服多了。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-12-10-46-23-30ce3a858d98b53808ad4df624d4f793-05a55.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 19.019138755980862%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA30lEQVQI1yWM0U6DMABF+f+/4IVkRhFTF5yUblGRUtvpgE7mZA/OadpCYxPcywzY6Xm4ubnJuc5kcu26LmMsIyTLMkrpVRhGEMZomtzdLpd8itBodJKmGOM0CIIwDD3PK0vedZ0TRdD3/aIotu87Rqn9gjE8PTufzW7ukwSnKYTwAgCrUvpwOR7HCAEA6npjjHGEEPIPpZSQommatm1tKiVtSimU/C9HtG611lb5+DziDMPwczhUq5e37e7LmMenHBNK6DwvuR3ZfIEJe603JX9ereuqWi9y/r3fW6vv+1/9ncbGfAe7eAAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 12 10 46 23" title="" data-src="/static/2022-01-12-10-46-23-30ce3a858d98b53808ad4df624d4f793-fee1c.png" data-srcset="/static/2022-01-12-10-46-23-30ce3a858d98b53808ad4df624d4f793-a67b7.png 200w,\n/static/2022-01-12-10-46-23-30ce3a858d98b53808ad4df624d4f793-0b187.png 400w,\n/static/2022-01-12-10-46-23-30ce3a858d98b53808ad4df624d4f793-fee1c.png 800w,\n/static/2022-01-12-10-46-23-30ce3a858d98b53808ad4df624d4f793-05a55.png 836w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/i5yo4t?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>如果是桌面端的网页项目，下面这段 CSS 语句务必引入：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="99218382534599870000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`a {\n   text-underline-position: under;\n}`, `99218382534599870000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">a</span> <span class="token punctuation">{</span>\n   <span class="token property">text-underline-position</span><span class="token punctuation">:</span> under<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>text-underline-position 属性除了支持 under，还支持 left、right 和 from-font 这几个 CSS 规范定义的属性值。</p>\n<ul>\n<li>left 和 right 这两个属性值平常根本用不到，只有在使用 writing-mode 属性让文字垂直排版，并且需要控制下划线左右位置的时候才会用到。</li>\n<li>from-font 是 CSS 文本装饰规范 Level 4 新增的属性值，表示优先使用字体文件中设置的下划线位置，如果字体没有设置下划线对齐信息，就使用 auto 效果。大家目前可以无视 from-font 这个属性值，因为就算不考虑其目前糟糕的兼容性，这个属性值也是非常不实用的，限制太多了。</li>\n</ul>\n<p>总而言之，如果使用了文字的下划线效果，你可能需要 text-underline-position: under 来优化下划线的显示位置。</p>\n<h2 id="更需要-text-underline-offset-属性"><a href="#%E6%9B%B4%E9%9C%80%E8%A6%81-text-underline-offset-%E5%B1%9E%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>更需要 text-underline-offset 属性</h2>\n<p>text-underline-position 属性虽然可以调整下划线的位置，但是调整的位置都是固定的，不能满足多变的开发需求。此时，你更需要 text-underline-offset 属性。</p>\n<p>text-underline-offset 属性可以用来设置下划线的位置，其偏移量支持数值和百分比值。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="46646488922897375000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<p class=&quot;under&quot;>看看下划线的位置在哪里？</p>\n<style>\n   p {\n      text-decoration: underline;\n   }\n\n   .under {\n      text-underline-offset: 1em;\n   }\n</style>`, `46646488922897375000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">&lt;p class="under">看看下划线的位置在哪里？&lt;/p>\n&lt;style>\n   p</span> <span class="token punctuation">{</span>\n      <span class="token property">text-decoration</span><span class="token punctuation">:</span> underline<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token selector">.under</span> <span class="token punctuation">{</span>\n      <span class="token property">text-underline-offset</span><span class="token punctuation">:</span> 1em<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n&lt;/style></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>表示下划线从原来的位置继续向下偏移 1em，对应的效果如图 3-76 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-12-10-55-10-89b430ba21c315134fe9de14361c7386-877f4.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 26.190476190476193%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsSAAALEgHS3X78AAABEElEQVQY012QW0/CQBCF+///DIkGY8GEtEK59ApVfFJU7GXbYgKkLaUPn1MMifEkJzNz5szO7mp3/Vv0wYBer0ewCplOLILAw3VsRiODR2OEIZrnOawCH13XGY8nuK7Hff+G4cNQtAF+sKSsarSZNcGazTFMgyhWfBc71s8hjuNi2zaLuYUvi1bhkpf1E6ZpEixDNm8b7MUMz/ewrClxquigtW3L+Xymi3VdU59Ov1HYNA1VVV3ysiw5HI+cur5oXd3I3F9P19OSJCGKogvjOCZTijRN6fQsy8iFSrSiKC51l+e56HmOEt917ho1/iFJFPv9QW7diiHhK5IlctirPDHLd6gs53Mb8f6xJZfv+Y8fEo5smuIO8j4AAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 12 10 55 10" title="" data-src="/static/2022-01-12-10-55-10-89b430ba21c315134fe9de14361c7386-fee1c.png" data-srcset="/static/2022-01-12-10-55-10-89b430ba21c315134fe9de14361c7386-a67b7.png 200w,\n/static/2022-01-12-10-55-10-89b430ba21c315134fe9de14361c7386-0b187.png 400w,\n/static/2022-01-12-10-55-10-89b430ba21c315134fe9de14361c7386-fee1c.png 800w,\n/static/2022-01-12-10-55-10-89b430ba21c315134fe9de14361c7386-877f4.png 840w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/p28di0?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>百分比值表示偏移量相对于 1em 的大小。因此，text-underline-offset: 100% 等同于 text-underline-offset: 1em。</p>\n<p>text-underline-offset 支持负值，此时下划线就会向上偏移。</p>\n<p>text-underline-offset 属性只对下划线类型的装饰线有效，对删除线和上划线都无效。例如，对下面两种装饰线设置 text-underline-offset 属性是无效的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="46294450614116300000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 设置 text-underline-offset 属性无效 */\ntext-decoration: through;\ntext-decoration: overline;`, `46294450614116300000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 设置 text-underline-offset 属性无效 */</span>\n<span class="token property">text-decoration</span><span class="token punctuation">:</span> through<span class="token punctuation">;</span>\n<span class="token property">text-decoration</span><span class="token punctuation">:</span> overline<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>如果父元素设置了下划线，然后希望子元素的下划线位置偏移，下面的 CSS 语句是无效的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="62138752598600400000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`p {\n   text-decoration: underline;\n   text-underline-offset: 0.5em;\n}\n\np span {\n   text-underline-offset: 1.5em; /* 无效 */\n}`, `62138752598600400000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">p</span> <span class="token punctuation">{</span>\n   <span class="token property">text-decoration</span><span class="token punctuation">:</span> underline<span class="token punctuation">;</span>\n   <span class="token property">text-underline-offset</span><span class="token punctuation">:</span> 0.5em<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">p span</span> <span class="token punctuation">{</span>\n   <span class="token property">text-underline-offset</span><span class="token punctuation">:</span> 1.5em<span class="token punctuation">;</span> <span class="token comment">/* 无效 */</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>此时子元素明确声明具有下划线才有效，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="96048381223370560000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`p {\n   text-decoration: underline;\n   text-underline-offset: 0.5em;\n}\n\np span {\n   text-decoration: underline;\n   text-underline-offset: 1.5em; /* 有效 */\n}`, `96048381223370560000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css{7}"\n              >\n                <span class="gatsby-code-button-language">css{7}</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight has-highlighted-lines" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">p</span> <span class="token punctuation">{</span>\n   <span class="token property">text-decoration</span><span class="token punctuation">:</span> underline<span class="token punctuation">;</span>\n   <span class="token property">text-underline-offset</span><span class="token punctuation">:</span> 0.5em<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">p span</span> <span class="token punctuation">{</span>\n<span class="gatsby-highlight-code-line">   <span class="token property">text-decoration</span><span class="token punctuation">:</span> underline<span class="token punctuation">;</span></span>   <span class="token property">text-underline-offset</span><span class="token punctuation">:</span> 1.5em<span class="token punctuation">;</span> <span class="token comment">/* 有效 */</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>目前所有现代浏览器均已支持 text-underline-offset 属性，读者可以尝试使用。</p>\n<h2 id="讲一讲-text-decoration-skip-属性的故事"><a href="#%E8%AE%B2%E4%B8%80%E8%AE%B2-text-decoration-skip-%E5%B1%9E%E6%80%A7%E7%9A%84%E6%95%85%E4%BA%8B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>讲一讲 text-decoration-skip 属性的故事</h2>\n<p>text-decoration-skip 属性可以用来控制装饰线和文字之间的重叠关系，这里的装饰线专指下划线。因为一些英文字符（如“g”“q”）的“小尾巴”会和下划线重叠，所以需要使用 text-decoration-skip 属性设置装饰线是跳过文字，还是和文字连在一起。虽然删除线（text-decoration: line-through）也会和文字重叠，但是它并不是 text-decoration-skip 属性的目标装饰线，因为删除线必须贯穿文字。</p>\n<p>如果了解 text-decoration-skip 属性的历史，你会发现 text-decoration-skip 属性也是一个颇有故事的 CSS 属性。text-decoration-skip 属性最初是 Safari 浏览器的私有特性，从 Safari 8 开始被支持，语法如下所示：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="99854215137013840000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`-webkit-text-decoration-skip: none;\n-webkit-text-decoration-skip: auto;\n-webkit-text-decoration-skip: skip;\n-webkit-text-decoration-skip: ink;`, `99854215137013840000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">-webkit-text-decoration-skip</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>\n<span class="token property">-webkit-text-decoration-skip</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>\n<span class="token property">-webkit-text-decoration-skip</span><span class="token punctuation">:</span> skip<span class="token punctuation">;</span>\n<span class="token property">-webkit-text-decoration-skip</span><span class="token punctuation">:</span> ink<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>其中，auto、skip、ink 等值的表现都是一样的，就是下划线会跳过和字符重叠的部分，如图 3-77 所示的字母“g”和下划线的重叠效果（截自 Safari 浏览器）。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-12-11-18-23-8c5dd11913d520a341fd80af34b7b839-31afd.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 29.72651605231867%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABHUlEQVQY03VQTW+CUBDkR3vGk3gBwwUFI1XDlyaaGIwxXrwQ49k0BW1oizwa0XIhKQootGN7drLZzO6bmWwelWVZFEW6rl8ul9vtlud5mqbgRVGcz+ckSbBxXdf3fRDs/wXX6xViyrIsWZZbrZaiKMvl0jAMSZKQNZ/PO53ObDbr9Xq2bU8mE47jIG42m6vVajqdjsdjShCEbrcLBcuytVqtUqkwDNNut3meR8R6vaZp2jRNjPV6fTgcNhqNfr+PXq1Wqac/wK9pGjo4ggaDAZ5FUVwsFjBgibtUVYVgNBrhOvgxUj8PgI+I4xikLMtHmruZkMAnwXeSHA7h+4e33b5uNs8eCY6nr4B8kuBeYXj09gR4cXaOs3vz9jD+AsdZGu3Vj+P1AAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 12 11 18 23" title="" data-src="/static/2022-01-12-11-18-23-8c5dd11913d520a341fd80af34b7b839-fee1c.png" data-srcset="/static/2022-01-12-11-18-23-8c5dd11913d520a341fd80af34b7b839-a67b7.png 200w,\n/static/2022-01-12-11-18-23-8c5dd11913d520a341fd80af34b7b839-0b187.png 400w,\n/static/2022-01-12-11-18-23-8c5dd11913d520a341fd80af34b7b839-fee1c.png 800w,\n/static/2022-01-12-11-18-23-8c5dd11913d520a341fd80af34b7b839-31afd.png 841w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>因此，一些文档直接就认为 Safari 的 text-decoration-skip 属性仅仅支持 none 和 skip 这两个属性值，我觉得可以认为 Safari 的 text-decoration-skip 属性仅仅支持 none 和 ink 这两个属性值，因为属性值 ink 和 CSS 规范“走得更近”。</p>\n<p>随着时间的推移，Safari 浏览器从 12.1 版本开始取消了 -webkit- 私有前缀（iOS 的 Safari 是从 12.2 版本开始取消私有前缀的），因此现在 Safari 浏览器其实可以直接这么设置：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="97714663476442460000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`text-decoration-skip: none;\ntext-decoration-skip: ink;`, `97714663476442460000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">text-decoration-skip</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>\n<span class="token property">text-decoration-skip</span><span class="token punctuation">:</span> ink<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>在 Safari 浏览器取消私有前缀之前的一段时期，text-decoration-skip 属性成了 CSS Text Decoration 模块规范中的一员，正式成为 CSS 标准属性，并且一开始是在 Level 3 规范中的。那时候 text-decoration-skip 属性的语法是下面这样的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="72348264002428084000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`text-decoration-skip: objects;\ntext-decoration-skip: none;\ntext-decoration-skip: spaces;\ntext-decoration-skip: ink;\ntext-decoration-skip: edges;\ntext-decoration-skip: box-decoration;\ntext-decoration-skip: trailing-spaces;`, `72348264002428084000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">text-decoration-skip</span><span class="token punctuation">:</span> objects<span class="token punctuation">;</span>\n<span class="token property">text-decoration-skip</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>\n<span class="token property">text-decoration-skip</span><span class="token punctuation">:</span> spaces<span class="token punctuation">;</span>\n<span class="token property">text-decoration-skip</span><span class="token punctuation">:</span> ink<span class="token punctuation">;</span>\n<span class="token property">text-decoration-skip</span><span class="token punctuation">:</span> edges<span class="token punctuation">;</span>\n<span class="token property">text-decoration-skip</span><span class="token punctuation">:</span> box-decoration<span class="token punctuation">;</span>\n<span class="token property">text-decoration-skip</span><span class="token punctuation">:</span> trailing-spaces<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>先来看一下各个属性值的含义。</p>\n<ul>\n<li>objects 是默认值，表示装饰线跳过内联对象，如图片或者 inline-block 元素。</li>\n<li>none 表示装饰线穿过一切，包括本应跳过的内联对象。</li>\n<li>spaces 表示装饰线跳过空格或字符间分隔，以及 letter-spacing 或 word-spacing 形成的间距。</li>\n<li>ink 表示装饰线跳过符号或下沉字母。</li>\n<li>edges 表示装饰线起始于内容起始边缘的后面，结束于内容结束边缘的前面。这个属性值的目的是让两个靠在一起的下划线元素看上去是分离的。这对中文字体很有用，因为中文语境中会使用下划线作为一种标点符号（如使用下划线表示专有名词）。</li>\n<li>box-decoration 表示装饰线跳过继承的 margin、border 和 padding。</li>\n<li>trailing-spaces 表示装饰线跳过 pre 或 white-space: pre-wrap 里面前后的空格。</li>\n</ul>\n<p>理想的效果如图 3-78 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-12-11-23-41-83d9419ff148254ecf7faed9d46fbf41-447cf.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 680px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 71.32352941176471%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsSAAALEgHS3X78AAABdklEQVQoz6WSa2+CQBBF+f//y/jJWIu8RGR3eUh5Vm3iC6FHtjGakvRDb8iwLHPuzCwY/aCu6+I4VkoFQeC6rud5vu+vVivHcYqi0An9Lxn6drvd1uu1EIIIDEnEyLIsInySJJvNJs/zcTgMQ2BqrgexoDIuwLoF3h4Oh3GYnmEoRbRtGxgAEv59UFVVbduOw/QZRZEeGExKScSFsnoQ1iQ8z/8DY0kqeTRPC2ma6j7B2PEHYYcvjyPwfD5fLBZZlvF4vV4vl0s76DLofD4T2X/u3Hh8Kox1HX28lGJ+IkfAUP2YjMcK4+PxeDqdWJBd1/VkMmEQNv+GHyK1aZrZbDadTommae52u3G4e8WI+/2egsEgprDt+wdj1O5F90mN/h8yXM9Pt1lZ1VVdR3HCFceJkJGK4jwvNqEgIRRyaTn8AW+LpWlaluPc//0gNIRUzeeOk6LbvCiLovrIOeyyKKv94UsIKZRiXwjFuXt+gF0o1Xab4f4NS7MNCYHi+IwAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 12 11 23 41" title="" data-src="/static/2022-01-12-11-23-41-83d9419ff148254ecf7faed9d46fbf41-447cf.png" data-srcset="/static/2022-01-12-11-23-41-83d9419ff148254ecf7faed9d46fbf41-b658a.png 200w,\n/static/2022-01-12-11-23-41-83d9419ff148254ecf7faed9d46fbf41-8c3e5.png 400w,\n/static/2022-01-12-11-23-41-83d9419ff148254ecf7faed9d46fbf41-447cf.png 680w" data-sizes="(max-width: 680px) 100vw, 680px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>或许是因为存在诸多争议，所以图 3-78 中出现的属性值没有任何浏览器进行跟进支持，然后由于 text-decoration-skip 属性的规范文档需要大改，同时又不想影响 CSS Text Decoration Module Level 3 的发布，因此 text-decoration-skip 属性的规范文档就被移到了 CSS TextDecoration Module Level 4 中，规范内容也发生了巨大的变化。</p>\n<p>发生了什么变化呢？那就是 text-decoration-skip 从一个单一的 CSS 属性变成了 5 个 CSS 属性的缩写集合，这 5 个 CSS 属性分别如下：</p>\n<ul>\n<li>text-decoration-skip-self；</li>\n<li>text-decoration-skip-box；</li>\n<li>text-decoration-skip-inset；</li>\n<li>text-decoration-skip-spaces；</li>\n<li>text-decoration-skip-ink。</li>\n</ul>\n<p>其实这 5 个 CSS 属性分别对应一个 text-decoration-skip 之前的规范中的属性值：</p>\n<ul>\n<li>text-decoration-skip-self: objects 对应之前的 text-decoration-skip: objects</li>\n<li>text-decoration-skip-box: all 对应之前的 text-decoration-skip: box-decoration；</li>\n<li>text-decoration-skip-inset: auto 对应之前的 text-decoration-skip: edges；</li>\n<li>text-decoration-skip-spaces: all 对应之前的 text-decoration-skip: spaces；</li>\n<li>text-decoration-skip-ink: all 对应之前的 text-decoration-skip: ink。</li>\n</ul>\n<p>由于上面的很多 CSS 属性和属性值还在审查阶段，之后变动的可能性还很大，因此暂不展开介绍。不过，text-decoration-skip-ink 这个 CSS 属性除外，因为 Chrome 浏览器在 2018 年 1 月、Firefox 浏览器在 2019 年 10 月均对 text-decoration-skip-ink 属性进行了支持，它可以用来设置下划线是贯穿还是避让，语法如下所示：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="91927234010890670000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`text-decoration-skip-ink: auto; /* 初始值 */\ntext-decoration-skip-ink: none;`, `91927234010890670000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">text-decoration-skip-ink</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span> <span class="token comment">/* 初始值 */</span>\n<span class="token property">text-decoration-skip-ink</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>其中，text-decoration-skip-ink: auto 等同于 Safari 浏览器支持的 text-decoration-skip: ink，text-decoration-skip-ink: none 等同于 Safari 浏览器支持的 text-decoration-skip: none。</p>\n<p>于是，理论上所有现代浏览器都有控制下划线是否贯穿所有字母的能力。在默认状态下，现代浏览器的下划线都会避让“g”“q”等字母多出来的“小尾巴”，如果希望下划线直接贯穿这些字母，则可以这么设置：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="51374016271394180000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`p {\n   -webkit-text-decoration-skip: none;\n   text-decoration-skip: ink;\n}`, `51374016271394180000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">p</span> <span class="token punctuation">{</span>\n   <span class="token property">-webkit-text-decoration-skip</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>\n   <span class="token property">text-decoration-skip</span><span class="token punctuation">:</span> ink<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>在所有现代浏览器中均支持以上写法，不过问题在于，存在需要下划线贯穿字母的场景吗？考虑到目前下划线效果并不多见，因此我觉得 text-decoration-skip 属性使用的概率并不大，大家了解一下就可以了。</p>\n<h1 id="color-属性与颜色设置"><a href="#color-%E5%B1%9E%E6%80%A7%E4%B8%8E%E9%A2%9C%E8%89%B2%E8%AE%BE%E7%BD%AE" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>color 属性与颜色设置</h1>\n<p>color 属性支持的颜色关键字到现在已经发展了 4 个阶段。</p>\n<ul>\n<li>第一阶段只包含 16 种基本颜色，称为 VGA 颜色，因为它们提取自 VGA 图形卡上的一组可显示的颜色。</li>\n<li>第二阶段的 color 属性支持了 orange 颜色关键字和 RGB 颜色值，兼容性很好，且所有浏览器都支持，大家可以放心使用。</li>\n<li>第三阶段的 color 属性新增了 130 个源自“X11 颜色列表”的颜色关键字，同时支持 HSL 颜色、Alpha 透明通道，以及 transparent 和 currentColor 这两个关键字。其功能显著增强，且有 IE9+ 浏览器支持。</li>\n<li>第四阶段的 color 属性增加了对名为 rebeccapurple 的颜色关键字的支持，同时扩展了 RGB 颜色和 HSL 颜色的语法，这部分内容现代浏览器都支持了，本书会重点介绍。</li>\n</ul>\n<p>HWB 颜色、gray() 函数、color() 函数、device-cmyk() 函数目前还没有被浏览器支持，本书不予介绍。</p>\n<h2 id="148-个颜色关键字"><a href="#148-%E4%B8%AA%E9%A2%9C%E8%89%B2%E5%85%B3%E9%94%AE%E5%AD%97" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>148 个颜色关键字</h2>\n<p>目前 color 属性已经累计支持 148 个颜色关键字，我将它们按照字母顺序整理成了一个表格</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/vxemxq?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>这其中有一些知识并不是所有人都知道的。</p>\n<ol>\n<li>\n<p>HTML 中 color 属性算法和 CSS 中的 color 属性算法是不一样的。同样是一个无法识别的颜色关键字，在 HTML 中这个无法识别的颜色关键字会渲染成另外一个颜色，而在 CSS 中会直接忽略这个颜色关键字，具体案例参见 CSS 世界。</p>\n</li>\n<li>\n<p>颜色关键字设置的颜色都是实色，不带透明度。目前没有 CSS 语法可以直接让颜色关键字带有透明度，唯一可行的方式是借助 animation-delay 负值实现。</p>\n</li>\n<li>\n<p>颜色关键字不区分大小写。例如下面语法也是可以正常解析的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="14299982115273503000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.error {\n  color: RED;\n}`, `14299982115273503000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.error</span> <span class="token punctuation">{</span>\n  <span class="token property">color</span><span class="token punctuation">:</span> RED<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>有一些颜色关键字是互相等同的：</p>\n<ul>\n<li>aqua/cyan；</li>\n<li>fuchsia/magenta；</li>\n<li>darkgray/darkgrey；</li>\n<li>darkslategray/darkslategrey；</li>\n<li>dimgray/dimgrey；</li>\n<li>lightgray/lightgrey；</li>\n<li>lightslategray/lightslategrey；</li>\n<li>gray/grey；</li>\n<li>slategray/slategrey。</li>\n</ul>\n</li>\n<li>\n<p>所有颜色关键字中，只有两个颜色关键字是以 <code class="language-text">deep</code> 开头的，分别是深天蓝色 deepskyblue 和深粉色 deeppink，这是我最喜爱的两个颜色关键字。</p>\n</li>\n<li>\n<p>暗灰色 darkgray 的颜色要比灰色 gray 更浅，因此，并不是有 <code class="language-text">dark</code> 前缀的颜色关键字控制的颜色就更深。</p>\n</li>\n<li>\n<p>在 148 个颜色关键字中，只有 CSS Color Level 4 新增的颜色关键字 rebeccapurple 不是规范的颜色名词，有人或许会奇怪为什么会有这样“不规范”的命名，实际上，这个命名的背后有一段你不知道的温情故事。</p>\n</li>\n</ol>\n<h2 id="transparent-关键字"><a href="#transparent-%E5%85%B3%E9%94%AE%E5%AD%97" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>transparent 关键字</h2>\n<p>在 CSS3 之前，虽然 border-color 属性和 background-color 属性也支持 transparent 关键字，但是此时的 transparent 关键字还并不是一个真正的颜色，只是一个特殊的关键字，目的是方便重置 border-color 属性和 background-color 属性设置的纯色。一直到 IE9 浏览器，也就是 CSS3 时代，<code class="language-text">&lt;color&gt;</code> 数据类型开始支持 Alpha 通道，transparent 关键字才被重新定义为真正的颜色。因此 color: transparent 声明是从 IE9 浏览器才开始支持的，比很多开发者认为的要晚。</p>\n<p>在 CSS 的颜色渐变或者颜色过渡动画效果中，transparent 关键字可以和其他任意色值表现出良好的过渡效果。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="10315101970410523000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.gradient {\n   width: 300px;\n   height: 150px;\n   background: linear-gradient(transparent, red);\n}`, `10315101970410523000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.gradient</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>\n   <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>transparent<span class="token punctuation">,</span> red<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>此时的渐变效果如图 3-79 所示，很多人会认为出现图 3-79 所示的效果不是理所当然的。实际上，Web 视觉表现领域的三大语言 CSS、SVG 和 Canvas，也就只有 CSS 表现出图 3-79 所示的渐变渲染效果。说来话长，transparent 关键字其实是 rgba(0, 0, 0, 0) 的另外一种快捷书写方式，这是 CSS 规范文档中明确定义的，并且所有浏览器也遵循这个规范。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-15-15-53-41-f65c9708d6e301bbc22a54c49bf90f50-dd64c.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 63.275193798449614%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAABHUlEQVQoz6XSPWvCQBwG8P8Yq5/DTdFP4KToZ9DBlw/g5ODL6O5gwM+gmMHE2E0Q0UKhLVJaqUiCVkKi7dIpyZCndyJ2Pnv8+PMcPMcNd4R/LILnwXVvQ7AsGAZM8waE1QrzORYLYcslYTpFvw9FwXAoRlEIgwE6Hcgyul0xskzo9VCrodlEoyGgXkerRWi3kc+jXEapJKBYRKVCqFaRSiGbRSYjIJ1GLkcoFBCNIpFAPC4gFkMySfxaIoTDuAshdBFI0h+2PcM1sKYkIRIhzGb8nTQNqorRiNNUTCbcPZs6xmM+dZ0XWGZY+dykIAjYL13bzodzcnzfdr1Xy363j2vn9GYfN1/fz7vPl/3hcWs8mbuHzZaH/eHH89mpX5N1OuwGW9LsAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 15 15 53 41" title="" data-src="/static/2022-01-15-15-53-41-f65c9708d6e301bbc22a54c49bf90f50-fee1c.png" data-srcset="/static/2022-01-15-15-53-41-f65c9708d6e301bbc22a54c49bf90f50-a67b7.png 200w,\n/static/2022-01-15-15-53-41-f65c9708d6e301bbc22a54c49bf90f50-0b187.png 400w,\n/static/2022-01-15-15-53-41-f65c9708d6e301bbc22a54c49bf90f50-fee1c.png 800w,\n/static/2022-01-15-15-53-41-f65c9708d6e301bbc22a54c49bf90f50-dd64c.png 1032w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>下面以 background-color 属性为例，background-color 属性的初始值是 transparent，然后我们使用 JavaScript 代码获取对应的计算值，示意如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="25270011727594553000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`console.log(window.getComputedStyle(document.body).backgroundColor);\n// 输出是：rgba(0, 0, 0, 0)`, `25270011727594553000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span><span class="token function">getComputedStyle</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">.</span>backgroundColor<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">// 输出是：rgba(0, 0, 0, 0)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>transparent 到 red 的渐变效果本质上就是色值 rgba(0, 0, 0, 0)到 rgba(255, 0, 0, 1)的渐变效果。接下来我抛出一个问题，请问渐变 50% 位置的色值是什么？我敢肯定很多人的答案是 rgba(128, 0, 0, 0.5)。但是仔细一想就会发现这个答案肯定有问题，因为这个答案中的颜色已经与红色无关了。所以，transparent 关键字实现符合认知的渐变效果是需要特别的算法的，否则，如果只是按照字面上的色值进行纯数学的计算，最终的渐变效果就会变得“不干净”，例如透明到红色的渐变效果会渲染成透明 → 灰红色 → 红色的渐变效果，渐变中间会出现让人感觉很“脏”的红色。</p>\n<p>举个例子，使用如下 SVG 渐变代码：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="8924914326120081000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<svg style=&quot;border: 1px dotted;&quot;>\n   <defs>\n      <linearGradient id=&quot;myGradient&quot;>\n         <stop offset=&quot;0%&quot; stop-color=&quot;transparent&quot; />\n         <stop offset=&quot;100%&quot; stop-color=&quot;red&quot; />\n      </linearGradient>\n   </defs>\n   <circle cx=&quot;150&quot; cy=&quot;75&quot; r=&quot;70&quot; fill=&quot;url(#myGradient)&quot;></circle>\n</svg>`, `8924914326120081000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="svg"\n              >\n                <span class="gatsby-code-button-language">svg</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="svg"><pre style="counter-reset: linenumber NaN" class="language-svg line-numbers"><code class="language-svg"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">border</span><span class="token punctuation">:</span> 1px dotted<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>defs</span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>linearGradient</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>myGradient<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>stop</span> <span class="token attr-name">offset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0%<span class="token punctuation">"</span></span> <span class="token attr-name">stop-color</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>transparent<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>\n         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>stop</span> <span class="token attr-name">offset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>100%<span class="token punctuation">"</span></span> <span class="token attr-name">stop-color</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>red<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>linearGradient</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>defs</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>circle</span> <span class="token attr-name">cx</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>150<span class="token punctuation">"</span></span> <span class="token attr-name">cy</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>75<span class="token punctuation">"</span></span> <span class="token attr-name">r</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>70<span class="token punctuation">"</span></span> <span class="token attr-name">fill</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>url(#myGradient)<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>circle</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>得到的渐变效果如图 3-80 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-15-16-06-49-61fbe97259683500a9f5ff5d36bbb3e6-e973b.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 59.63391136801541%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAABi0lEQVQoz52SS4/BUBTHfQN8DisLe7GytMIkNpY2LLDwGUj0A1iLeHwCiUcnilk0KCZGW6Xj1cxoZFTb25a5NN6ZSOafk9x77jm/e859GHielyRpeyVRFCVZ/prNyGZzWCxynY4IALStIBxiJwmCYIDD/kFTimoUCqV4vBQMYm43E4tpHHcI7HbnHE3TbuFj7JvjWiiKZbMVBKlEItjLC26xLDyePQDX/AN8XJqxLFGv13O5SjJZCYcxr7dtt0/MZiWTOWSo6p+woigHGMPuYNZolAOB/8Imk+z3P4FVVb1v2+NpOxwTCMfj+vYXGL7N3VUvptN2rdbI56sIUo1G6z5fy2b7tFp38/mTC4MCsjzA8VomU04kyqHQq8vVczpFFNWJm6dar9cAwPyL4LGFzYbC8bd0uokgg1Tqh6Zhr7IE/44MjoITWNVw9oGigJMUVYXNQdMLqZoGJEm5kp5m0HugRgxJ0asVv1xyQ5JmxuxkwjKjMcOM+70++UESRL/beye6fQK6FL07nvwXk/5x0clfrnMAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 15 16 06 49" title="" data-src="/static/2022-01-15-16-06-49-61fbe97259683500a9f5ff5d36bbb3e6-fee1c.png" data-srcset="/static/2022-01-15-16-06-49-61fbe97259683500a9f5ff5d36bbb3e6-a67b7.png 200w,\n/static/2022-01-15-16-06-49-61fbe97259683500a9f5ff5d36bbb3e6-0b187.png 400w,\n/static/2022-01-15-16-06-49-61fbe97259683500a9f5ff5d36bbb3e6-fee1c.png 800w,\n/static/2022-01-15-16-06-49-61fbe97259683500a9f5ff5d36bbb3e6-e973b.png 1038w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>可以看到渐变图像中出现了大量的夹杂着灰红色，这种渐变效果绝不是开发者想要的。在 Canvas 中的透明渐变也有类似的渲染表现。</p>\n<p>CSS 和 SVG、Canvas 渐变渲染的不一致性有时候会影响实际的开发。例如 Web 中的截图功能都是通过将 Web 内容转换成 SVG 图像或 Canvas 图像实现的，如果截图内容正好包括一个透明渐变，你就会发现最终生成的截图会有一团莫名其妙的灰黑色，其原因就是 SVG 和 Canvas 中的透明渐变算法与 CSS 的渐变算法不一致。</p>\n<p>其实早期的 Safari 浏览器也有类似的渲染问题，使用 transparent 实现渐变或者颜色过渡动画效果的时候，图像都会先变黑，就是因为使用了和 SVG、Canvas 一样的算法。</p>\n<p>因此，为了安全，有些老一辈的前端开发者在实现透明到红色的渐变时还是习惯写成 <code class="language-text">linear-gradient(rgba(255, 0, 0, 0), red)</code>。其实大可不必，Safari 浏览器已经修复了这个问题，现在已经可以放心使用 transparent 关键字了。</p>\n<h2 id="currentcolor-关键字"><a href="#currentcolor-%E5%85%B3%E9%94%AE%E5%AD%97" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>currentColor 关键字</h2>\n<p>currentColor 关键字非常实用，且无可替代，它表示当前元素（或伪元素）所使用的 color 属性的计算值，currentColor 关键字从 IE9 浏览器开始被支持。比较常用的全局设置是：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="26698988088834396000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`body {\n   fill: currentColor;\n}`, `26698988088834396000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">body</span> <span class="token punctuation">{</span>\n   <span class="token property">fill</span><span class="token punctuation">:</span> currentColor<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>用在 SVG Sprites 图标使用场景中，表示图标的填充颜色使用的是当前的 color 属性的计算值，也就是说我们可以使用 color 属性直接设置图标的颜色，详见 14.2.1 节。</p>\n<p>需要注意的是，CSS 中很多属性的默认颜色就是 color 属性值，没有必要专门指定 currentColor 关键字，包括 border-color、outline-color、caret-color、text-shadow、box-shadow 等 CSS 属性。例如我们使用 box-shadow 模拟图形效果的时候，为了控制方便，会让盒阴影颜色跟着 color 属性变化，于是有些前端开发者会指定当前盒阴影颜色为 currentColor，如下所示：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="42364409728804640000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.example {\n   box-shadow: currentColor 0 2px;\n}`, `42364409728804640000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.example</span> <span class="token punctuation">{</span>\n   <span class="token property">box-shadow</span><span class="token punctuation">:</span> currentColor 0 2px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>实际上，上面 CSS 代码中的 currentColor 关键字是多余的，直接写成 <code class="language-text">box-shadow: 0 2px</code> 就可以了。</p>\n<p>currentColor 关键字主要还是用在背景颜色和背景渐变颜色中，例如实现一个背景颜色由 color 属性控制的按钮效果，我们就可以设置 background-color 属性值为 currentColor，CSS 代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="68716877965911370000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* IE9+ 浏览器均支持 */\n.button {\n   background-color: currentColor;\n}\n\n.button::first-line {\n   color: white;\n}`, `68716877965911370000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* IE9+ 浏览器均支持 */</span>\n<span class="token selector">.button</span> <span class="token punctuation">{</span>\n   <span class="token property">background-color</span><span class="token punctuation">:</span> currentColor<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.button::first-line</span> <span class="token punctuation">{</span>\n   <span class="token property">color</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>或者</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="73565642844463120000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 现代浏览器均支持 */\n.button {\n   -webkit-text-fill-color: white;\n   background-color: currentColor;\n}`, `73565642844463120000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 现代浏览器均支持 */</span>\n<span class="token selector">.button</span> <span class="token punctuation">{</span>\n   <span class="token property">-webkit-text-fill-color</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span>\n   <span class="token property">background-color</span><span class="token punctuation">:</span> currentColor<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="rgb-颜色和-hsl-颜色的新语法"><a href="#rgb-%E9%A2%9C%E8%89%B2%E5%92%8C-hsl-%E9%A2%9C%E8%89%B2%E7%9A%84%E6%96%B0%E8%AF%AD%E6%B3%95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>RGB 颜色和 HSL 颜色的新语法</h2>\n<p>从 IE9 浏览器开始，颜色新增了 3 种表示方法，分别是 HSL 颜色、RGBA 颜色和 HSLA 颜色。从 2016 年开始，现代浏览器开始陆续支持 #RRGGBBAA 颜色和其他新语法。</p>\n<h3 id="hsl-颜色"><a href="#hsl-%E9%A2%9C%E8%89%B2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>HSL 颜色</h3>\n<p>HSL 颜色是由色调（Hue）、饱和度（Saturation）和亮度（Lightness）这 3 个元素组成的。HSL 就是由这 3 个元素对应的英文单词的首字母组成的。</p>\n<p>色调值的大小是任意的，因为 CSS 世界中与色调相关的数值都是角度值，其单位是 deg，所以无论设置什么值，最终都会在 0 ～ 360deg 这个范围中解析，例如 −120deg=240deg、480deg=120deg。</p>\n<p>图 3-81 所示的是色值 hsl(0, 100%, 50%) 到 hsl(360, 100%, 50%) 的色值带，可以看出来 HSL 颜色色调从 0 ～ 360deg 大致按照红、橙、黄、绿、青、蓝、紫、红的颜色顺序分布。其中，红色、绿色和蓝色这 3 个颜色的色调值有时候会用到，大家可以专门记一下，分别是 red=0deg、green=120deg、blue=240deg。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-15-16-20-53-217df13bdc06342768af9f32b4c78fe0-4c90f.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 24.11408815903198%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsSAAALEgHS3X78AAABMElEQVQY01XLvUsCcRwH4O81RC9TSy/iuYVESzSEQ0QREbQlQUUUQTgWQmtQS3+BxZnVYF0UElIhFCkcDTWYgyFJVqKHZ2ip3El4Zt7vU0tDz/4QVk24tuRkPlDgN77Ms+gbYTNWrJs1kY/f86Fytwv9CxjuhdOMCx4qb8ByxzqWMeUgtkg447JJ8uXJWaUxtPew0VasUGmHorcUUJs30TUBaxvmiZ1wKFEdDRKjOQxNEpsmnHLKCx3lyKGTjbWY2ABnLFHBRRGJ/EVaY02D9c5Gw06GSCj+Zi7IyA7bOEHaRkr41ISk7g5j9xKHPgQOEPbUEnvqx/5b3RvDcRB+ETcevAqoCgzuLLZCOL8i/PmuGcqzqmX0SqmSiiT0vFZMZzLxWPrpQZEfk3L0vSzjvx8gVcY2om9emgAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 15 16 20 53" title="" data-src="/static/2022-01-15-16-20-53-217df13bdc06342768af9f32b4c78fe0-fee1c.png" data-srcset="/static/2022-01-15-16-20-53-217df13bdc06342768af9f32b4c78fe0-a67b7.png 200w,\n/static/2022-01-15-16-20-53-217df13bdc06342768af9f32b4c78fe0-0b187.png 400w,\n/static/2022-01-15-16-20-53-217df13bdc06342768af9f32b4c78fe0-fee1c.png 800w,\n/static/2022-01-15-16-20-53-217df13bdc06342768af9f32b4c78fe0-4c90f.png 1157w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>饱和度和亮度的值是任意的，最终解析的数值范围均在 0% ～ 100%，数值后面的百分号一定不能少，否则整个语句无效，所有浏览器中均是如此。</p>\n<p>日常开发的时候，前端开发者习惯使用 RGB 颜色，尤其喜欢使用 RGB 颜色中的十六进制格式，例如 #f0f0f0，毕竟其兼容性足够好。但是，如果你的项目不需要兼容 IE8 浏览器，则可以试试使用 HSL 颜色，它很适合用在颜色变化的场合。</p>\n<p>举个例子，对于一个临时项目，设计师在百忙之中出了一个视觉稿，结果视觉稿中的按钮只设计了默认状态，并没有设计按钮按下时候的颜色。此时，如果使用 HSL 颜色，那么在实现按钮按下的效果时直接把亮度值变小就可以了。假设按钮色值是 #2a80eb，则：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="97364519973942590000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.button {\n   background-color: hsl(213.3, 82.8%, 54.3%);\n}\n\n.button:active {\n   background-color: hsl(213.3, 82.8%, 50%);\n}`, `97364519973942590000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.button</span> <span class="token punctuation">{</span>\n   <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">hsl</span><span class="token punctuation">(</span>213.3<span class="token punctuation">,</span> 82.8%<span class="token punctuation">,</span> 54.3%<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.button:active</span> <span class="token punctuation">{</span>\n   <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">hsl</span><span class="token punctuation">(</span>213.3<span class="token punctuation">,</span> 82.8%<span class="token punctuation">,</span> 50%<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>亮度直接从 54.3% 降低到 50%。无须计算，无须取色，就能实现按钮按下时的颜色变化效果。</p>\n<p>试想下，如果按钮背景颜色使用传统的 #2a80eb 格式，想要获得更深一点色值是不是就很麻烦了？要么求助设计师，要么自己重新取色，这比使用 HSL 色值麻烦很多。</p>\n<p>和 RGB 颜色不同，控制 HSL 颜色的值可以是小数，但是包含小数的 RGB 颜色在 IE 浏览器中是无法识别的。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="53313073625848870000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`rgb(213.3, 82.8, 54.3) /* 在 IE 浏览器中无效 */\nhsl(213.3, 82.8%, 54.3%) /* 有效 */`, `53313073625848870000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token function">rgb</span><span class="token punctuation">(</span>213.3<span class="token punctuation">,</span> 82.8<span class="token punctuation">,</span> 54.3<span class="token punctuation">)</span> <span class="token comment">/* 在 IE 浏览器中无效 */</span>\n<span class="token function">hsl</span><span class="token punctuation">(</span>213.3<span class="token punctuation">,</span> 82.8%<span class="token punctuation">,</span> 54.3%<span class="token punctuation">)</span> <span class="token comment">/* 有效 */</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<h3 id="rgba-颜色和-hsla-颜色"><a href="#rgba-%E9%A2%9C%E8%89%B2%E5%92%8C-hsla-%E9%A2%9C%E8%89%B2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>RGBA 颜色和 HSLA 颜色</h3>\n<p>从 IE9 浏览器开始，支持设置颜色的透明度了，RGBA 和 HSLA 中的字母 A 指的就是 Alpha 透明通道，透明度取值范围任意，但是渲染范围是 0 ～ 1，也就是小于 0 的透明度会当作 0 渲染，大于 1 的透明度会当作 1 渲染。因此，下面的语法均是合法的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="22367112562796708000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 全部有效 */\nrgba(255, 0, 0, .9)\nrgba(255, 0, 0, 999999)\nrgba(100%, 0%, 0%, -999999)\nhsla(240, 100%, 50%, 0.5)`, `22367112562796708000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 全部有效 */</span>\n<span class="token function">rgba</span><span class="token punctuation">(</span>255<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> .9<span class="token punctuation">)</span>\n<span class="token function">rgba</span><span class="token punctuation">(</span>255<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 999999<span class="token punctuation">)</span>\n<span class="token function">rgba</span><span class="token punctuation">(</span>100%<span class="token punctuation">,</span> 0%<span class="token punctuation">,</span> 0%<span class="token punctuation">,</span> -999999<span class="token punctuation">)</span>\n<span class="token function">hsla</span><span class="token punctuation">(</span>240<span class="token punctuation">,</span> 100%<span class="token punctuation">,</span> 50%<span class="token punctuation">,</span> 0.5<span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>在开发中经常会设置白色半透明，此时，我就会使用 HSLA 颜色实现，而不是 RGBA 颜色，因为可以少写一些字符，如下所示：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="51440391732116275000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`hsla(0, 0%, 100%, .5);`, `51440391732116275000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token function">hsla</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0%<span class="token punctuation">,</span> 100%<span class="token punctuation">,</span> .5<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<h3 id="rrggbbaa-颜色"><a href="#rrggbbaa-%E9%A2%9C%E8%89%B2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>#RRGGBBAA 颜色</h3>\n<p>目前现代浏览器已经全面支持 #RRGGBBAA 颜色。其中 R、G、B 还是原来的十六进制表示的 RGB 色值，范围从 00 ～ FF，至于这里新出现的 AA，则表示透明度，范围也是 00 ～ FF。</p>\n<p><code class="language-text">#RRGGBBAA</code> 颜色虽然很实用，但是透明度的转换却没有 RGB 色值那么方便，因为透明度范围是 0%～ 100%，而 00 ～ FF 的十进制范围是 0 ～ 255，所以需要转换，如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="51672515655516120000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// Alpha 范围 0 ~ 1\nAA = (Alpha * 255).toString(16);`, `51672515655516120000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// Alpha 范围 0 ~ 1</span>\n<span class="token constant">AA</span> <span class="token operator">=</span> <span class="token punctuation">(</span>Alpha <span class="token operator">*</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>透明度 50% 就等于 <code class="language-text">(0.5 * 255).toString(16)</code>，结果是 <code class="language-text">7f.8</code>，约等于 80。因此 #FF000080 就表示透明度约为 50% 的红色。我专门整理了一个透明度百分比和十六进制值之间对应关系的数据表，如下表所示。</p>\n<table>\n<thead>\n<tr>\n<th align="left">透明度</th>\n<th align="left">十六进制值</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align="left">0%</td>\n<td align="left">00</td>\n</tr>\n<tr>\n<td align="left">5%</td>\n<td align="left">0D</td>\n</tr>\n<tr>\n<td align="left">10%</td>\n<td align="left">1A</td>\n</tr>\n<tr>\n<td align="left">15%</td>\n<td align="left">26</td>\n</tr>\n<tr>\n<td align="left">20%</td>\n<td align="left">33</td>\n</tr>\n<tr>\n<td align="left">25%</td>\n<td align="left">40</td>\n</tr>\n<tr>\n<td align="left">30%</td>\n<td align="left">4D</td>\n</tr>\n<tr>\n<td align="left">35%</td>\n<td align="left">59</td>\n</tr>\n<tr>\n<td align="left">40%</td>\n<td align="left">66</td>\n</tr>\n<tr>\n<td align="left">45%</td>\n<td align="left">73</td>\n</tr>\n<tr>\n<td align="left">50%</td>\n<td align="left">80</td>\n</tr>\n<tr>\n<td align="left">55%</td>\n<td align="left">8C</td>\n</tr>\n<tr>\n<td align="left">60%</td>\n<td align="left">99</td>\n</tr>\n<tr>\n<td align="left">65%</td>\n<td align="left">A6</td>\n</tr>\n<tr>\n<td align="left">70%</td>\n<td align="left">B3</td>\n</tr>\n<tr>\n<td align="left">75%</td>\n<td align="left">BF</td>\n</tr>\n<tr>\n<td align="left">80%</td>\n<td align="left">CC</td>\n</tr>\n<tr>\n<td align="left">85%</td>\n<td align="left">D9</td>\n</tr>\n<tr>\n<td align="left">90%</td>\n<td align="left">E6</td>\n</tr>\n<tr>\n<td align="left">95%</td>\n<td align="left">F2</td>\n</tr>\n<tr>\n<td align="left">100%</td>\n<td align="left">FF</td>\n</tr>\n</tbody>\n</table>\n<p>同样 #RRGGBBAA 颜色也支持缩写，例如 #308 等同于 #330088</p>\n<h3 id="极致自由的新语法"><a href="#%E6%9E%81%E8%87%B4%E8%87%AA%E7%94%B1%E7%9A%84%E6%96%B0%E8%AF%AD%E6%B3%95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>极致自由的新语法</h3>\n<p>在现代浏览器中，对 RGB 颜色和 HSL 颜色的语法的使用已经变得无比自由。</p>\n<ol>\n<li>\n<p>rgb() 和 rgba() 函数语法互通，即下面的语法也是可以解析的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="32680042868563920000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 有效 */\nrgb(0, 0, 0, 1)\nrgba(0, 0, 0)`, `32680042868563920000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 有效 */</span>\n<span class="token function">rgb</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 1<span class="token punctuation">)</span>\n<span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>hsl() 和 hsla() 函数语法互通，即下面的语法也是可以解析的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="9098063247204702000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 有效 */\nhsl(0, 0%, 0%, 1)\nhsla(0, 0%, 0%)`, `9098063247204702000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 有效 */</span>\n<span class="token function">hsl</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0%<span class="token punctuation">,</span> 0%<span class="token punctuation">,</span> 1<span class="token punctuation">)</span>\n<span class="token function">hsla</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0%<span class="token punctuation">,</span> 0%<span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>rgb() 函数中的数值可以是小数，即下面语法也是可以解析的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="55831501495001930000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 有效 */\nrgb(99.999, 102.5, 0)\nrgb(1e2, .5e1, .5e0, +.25e2%)`, `55831501495001930000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 有效 */</span>\n<span class="token function">rgb</span><span class="token punctuation">(</span>99.999<span class="token punctuation">,</span> 102.5<span class="token punctuation">,</span> 0<span class="token punctuation">)</span>\n<span class="token function">rgb</span><span class="token punctuation">(</span>1e2<span class="token punctuation">,</span> .5e1<span class="token punctuation">,</span> .5e0<span class="token punctuation">,</span> +.25e2%<span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>透明度可以使用百分比表示，即下面的语法也是可以解析的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="81056793640650390000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 有效 */\nrgb(0, 0, 0, 100%)\nhsla(0, 100%, 50%, 80%)`, `81056793640650390000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 有效 */</span>\n<span class="token function">rgb</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 100%<span class="token punctuation">)</span>\n<span class="token function">hsla</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 100%<span class="token punctuation">,</span> 50%<span class="token punctuation">,</span> 80%<span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>hsl() 函数中的色调可以使用任意角度单位，即下面的语法也是可以解析的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="12362839255242775000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 有效 */\nhsl(270deg, 60%, 70%)\nhsl(4.71239rad, 60%, 70%)\nhsl(.75turn, 60%, 70%)`, `12362839255242775000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 有效 */</span>\n<span class="token function">hsl</span><span class="token punctuation">(</span>270deg<span class="token punctuation">,</span> 60%<span class="token punctuation">,</span> 70%<span class="token punctuation">)</span>\n<span class="token function">hsl</span><span class="token punctuation">(</span>4.71239rad<span class="token punctuation">,</span> 60%<span class="token punctuation">,</span> 70%<span class="token punctuation">)</span>\n<span class="token function">hsl</span><span class="token punctuation">(</span>.75turn<span class="token punctuation">,</span> 60%<span class="token punctuation">,</span> 70%<span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>rgb() 和 hsl() 函数语法中的逗号可以忽略，即下面的语法也是可以解析的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="52993881949198360000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 有效 */\nrgb(255 0 0)\nhsl(270 60% 70%)`, `52993881949198360000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 有效 */</span>\n<span class="token function">rgb</span><span class="token punctuation">(</span>255 0 0<span class="token punctuation">)</span>\n<span class="token function">hsl</span><span class="token punctuation">(</span>270 60% 70%<span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n</li>\n</ol>\n<p>但以上所有语法在 IE 浏览器中均不被支持。</p>\n<h3 id="rgb-颜色和-hsl-颜色新语法"><a href="#rgb-%E9%A2%9C%E8%89%B2%E5%92%8C-hsl-%E9%A2%9C%E8%89%B2%E6%96%B0%E8%AF%AD%E6%B3%95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>RGB 颜色和 HSL 颜色新语法</h3>\n<p>现代浏览器还支持全新的空格加斜杠语法。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="54873654648541635000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`rgb(255 0 153 / 1)\nrgb(255 0 153 / 100%)\nrgba(51 170 51 / 0.4)\nrgba(51 170 51 / 40%)\nhsl(270 60% 50% / .15)\nhsl(270 60% 50% / 15%)`, `54873654648541635000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token function">rgb</span><span class="token punctuation">(</span>255 0 153 / 1<span class="token punctuation">)</span>\n<span class="token function">rgb</span><span class="token punctuation">(</span>255 0 153 / 100%<span class="token punctuation">)</span>\n<span class="token function">rgba</span><span class="token punctuation">(</span>51 170 51 / 0.4<span class="token punctuation">)</span>\n<span class="token function">rgba</span><span class="token punctuation">(</span>51 170 51 / 40%<span class="token punctuation">)</span>\n<span class="token function">hsl</span><span class="token punctuation">(</span>270 60% 50% / .15<span class="token punctuation">)</span>\n<span class="token function">hsl</span><span class="token punctuation">(</span>270 60% 50% / 15%<span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>也就是说，RGB 色值或者 HSL 色值之间使用空格分隔，透明度使用斜杠分隔。</p>\n<p>空格语法和传统的逗号语法相比，只是书写形式不同，唯一的优点是书写速度更快了，原因很简单，键盘上的 Space 键要大得多。</p>\n<h1 id="必学必会的-background-属性新特性"><a href="#%E5%BF%85%E5%AD%A6%E5%BF%85%E4%BC%9A%E7%9A%84-background-%E5%B1%9E%E6%80%A7%E6%96%B0%E7%89%B9%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>必学必会的 background 属性新特性</h1>\n<p>本节要介绍的 background 新特性都非常实用，兼容性强，IE9+ 浏览器均支持，是务必要牢牢掌握的。</p>\n<h2 id="最实用的当属-background-size-属性"><a href="#%E6%9C%80%E5%AE%9E%E7%94%A8%E7%9A%84%E5%BD%93%E5%B1%9E-background-size-%E5%B1%9E%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>最实用的当属 background-size 属性</h2>\n<p>所有 background 新特性相关的属性中，background-size 属性的使用率是最高的。因为现在的电子设备的屏幕密度普遍都很高，所以为了避免因为图像的像素点不够而造成渲染模糊，开发者会使用 2 倍图甚至 3 倍图作为背景图。</p>\n<p>把一张大图限制在一个小的区域里面就需要用到 background-size 属性。例如一个删除按钮，按钮元素的尺寸是 20px×20px，按钮元素使用 SVG 图标作为背景，这个 SVG 图标的原始尺寸是 2000px×2000px，此时，我们可以用多种语法将这个尺寸巨大的 SVG 图标限制在按钮元素范围内。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="75865677178935200000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`background-size: cover;\nbackground-size: contain;\nbackground-size: 100%;\nbackground-size: 20px;\nbackground-size: auto 100%;\nbackground-size: auto 20px;\nbackground-size: 100% 100%;\nbackground-size: 20px 20px;`, `75865677178935200000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">background-size</span><span class="token punctuation">:</span> cover<span class="token punctuation">;</span>\n<span class="token property">background-size</span><span class="token punctuation">:</span> contain<span class="token punctuation">;</span>\n<span class="token property">background-size</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>\n<span class="token property">background-size</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>\n<span class="token property">background-size</span><span class="token punctuation">:</span> auto 100%<span class="token punctuation">;</span>\n<span class="token property">background-size</span><span class="token punctuation">:</span> auto 20px<span class="token punctuation">;</span>\n<span class="token property">background-size</span><span class="token punctuation">:</span> 100% 100%<span class="token punctuation">;</span>\n<span class="token property">background-size</span><span class="token punctuation">:</span> 20px 20px<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>以上语法包含了 background-size 属性的常用用法。</p>\n<h3 id="cover-和-contain"><a href="#cover-%E5%92%8C-contain" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>cover 和 contain</h3>\n<p>cover 和 contain 是两个关键字属性值，两者都不会改变背景图的原始比例，非常适合背景图像高宽不确定的场景。</p>\n<p>cover 是覆盖的意思，表示背景图尽可能把当前元素完全覆盖，不留任何空白。contain 是包含的意思，表示背景图尽可能包含在当前元素区域内，同时没有任何剪裁。</p>\n<p>我们来看一个例子，一张 256px×192px 的图像需要在 128px×128px 的区域内显示，background-size 属性值分别是 cover 和 contain：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="25959826558236810000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.bg-cover,\n.bg-contain {\n   width: 128px;\n   height: 128px;\n   border: solid deepskyblue;\n   background: url(./1.jpg) no-repeat center;\n}\n\n.bg-cover {\n   background-size: cover;\n}\n\n.bg-contain {\n   background-size: contain;\n}`, `25959826558236810000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.bg-cover,\n.bg-contain</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 128px<span class="token punctuation">;</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 128px<span class="token punctuation">;</span>\n   <span class="token property">border</span><span class="token punctuation">:</span> solid deepskyblue<span class="token punctuation">;</span>\n   <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./1.jpg<span class="token punctuation">)</span></span> no-repeat center<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.bg-cover</span> <span class="token punctuation">{</span>\n   <span class="token property">background-size</span><span class="token punctuation">:</span> cover<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.bg-contain</span> <span class="token punctuation">{</span>\n   <span class="token property">background-size</span><span class="token punctuation">:</span> contain<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>结果如图 3-82 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-17-13-54-47-3823fd282814c9aae96f0bd8b6561cb5-1f825.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 552px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 66.48550724637681%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAADcElEQVQ4y32Tf0zUdRjHb25pIwgCIhU47g7dCMpVVjJam//oKv+wkkSFpB9nhEnHQTg512pJFBooQZl/cIsERH5Hsc6Qg+PQFhynHPeDHwrHKXp34GJyHiBwr74gbf3RerbXnr0/z7P359k+z0fkcjpJTUkm/QM5qcl7yPv8U5ZjYQ588/juzy1LjUbDvqQkFBmHyMpUsD95H7p27YPexQX+CdH4+DhvvC1H/sln7D6g4JAqj0WhMC1wV8Cz0lhbX8/213dxQKEkTZnNjsREzjU1My/UJr2zTM3Ns+DzIZq45+VYfjrVJbu4ULGX9qr36ahQoK3K4EqzklO579LWpcch3HLVPUO/24vxlpc+9yw3hcGcguEdgTEBt+Auck57KMuNw1YYyC31WkaLQ+nKCaRWHsDhHQE85y/ibOVP2KcnuVSuwNyYi7fnKH91qBhtyuFGSw7aokwqTx7BetuNyOXxcL4gHsOJCGwl0ZgLZBi+kHFqt5ikTZH4rX6IPHUdY7eNVBxcxa+5gQwUP0bfsSAa0h4lJd6P2OBVPL8xhC7rMCL3PQ+/ndyCIX89Az9IcVRJGCyMoiklkq4kKRkxD3NcXcONyX46vwzjUr4My3cyRtXRtColnN4m5tXox3kkTCIYXn9gqDsTz3B5OJbvpYx8I+FmkYS2vWJaEiVUb/WnobaeIaeJP74KxayWYi2R4DghwXQ4Cv1bYmpfWUesLIp2i2Douuvh9x+3MFgaTndcFOdjIihLiqBkazgtOyUcf8mPqqY6bA4TmoIwzEUbuPyklIIYMR9vDufoC5FkJKxF+pQM3bLhnIe2bxOwiiP4OVKK8mUx8vXhPB3yBNs2RBITtIbSc0sTGmlTrebquhAaXwyken8Qqlh/3tkcQOoza9j+bBjd1muCodfD5bhN9IQEUPdeMANfh6LdGczp14IofTMUVYKIxoZKrs+4uFZ+EGdhNr01mUx1ZDHRnMWdX7Jx12fSe/YIIy7hlSemvLTm5XLxjJyy4jR6NeloKz6kpzqdKzUf0VmWisnUyaiwc8PCntmXdk7II/cFVvKSNs/CuICI/4nFFf6tff9x7lth+etdaNXisDuwWW3MeL0Yeo3oOvXo9V0MDQ1jt9sxW6z0mcyMjTkYHBxiZGSUfrOFHoORP7sNdOj09PdbuKjV8Tc6rfIZxfE7cQAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 17 13 54 47" title="" data-src="/static/2022-01-17-13-54-47-3823fd282814c9aae96f0bd8b6561cb5-1f825.png" data-srcset="/static/2022-01-17-13-54-47-3823fd282814c9aae96f0bd8b6561cb5-632a9.png 200w,\n/static/2022-01-17-13-54-47-3823fd282814c9aae96f0bd8b6561cb5-cac39.png 400w,\n/static/2022-01-17-13-54-47-3823fd282814c9aae96f0bd8b6561cb5-1f825.png 552w" data-sizes="(max-width: 552px) 100vw, 552px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>大家可以看到，如果显示区域的比例和原始图像的比例不一致，那么 cover 属性值最终的表现效果就是有一部分图像被剪裁掉，而 contain 属性值的表现效果是图片有一部分的区域会留白。但是无论是 cover 属性值还是 contain 属性值，都至少有一个方向的元素边界和图像边界是重合的。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/e0u55c?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<h3 id="理解-auto-关键字下的尺寸渲染规则"><a href="#%E7%90%86%E8%A7%A3-auto-%E5%85%B3%E9%94%AE%E5%AD%97%E4%B8%8B%E7%9A%84%E5%B0%BA%E5%AF%B8%E6%B8%B2%E6%9F%93%E8%A7%84%E5%88%99" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>理解 auto 关键字下的尺寸渲染规则</h3>\n<p>在深入理解 auto 关键字的尺寸渲染规则之前，我们需要先了解一下常见图像的内在尺寸和内在比例。在 CSS 世界中，常见的图像有以下几种。</p>\n<ul>\n<li>位图。例如 JPG 或者 PNG 图片都属于位图，这些图像总是有自己的内在尺寸（原始图像大小）和内在比例（原始图像比例）。</li>\n<li>矢量图。例如 SVG 图像就属于矢量图，这些图像不一定具有内在尺寸。如果水平尺寸和垂直尺寸都设置了，那么它就具有内在的比例；如果没有设置尺寸，或者只设置了一个方向的尺寸，它可能有比例，也可能没有比例，要视 SVG 内部代码而定，如有些 SVG 元素内部只有 <code class="language-text">&lt;defs&gt;</code> 元素，此时矢量图就没有比例。</li>\n<li>渐变图像。就是使用 CSS 渐变语法绘制的图像，这些图像是没有内在尺寸和内在比例的。</li>\n<li>元素图像。例如使用 element() 函数把 DOM 元素作为背景图，此时的内在尺寸就是这个 DOM 元素的尺寸。</li>\n</ul>\n<p>下面讲一下 auto 关键字的尺寸渲染规则。</p>\n<p>如果 background-size 的属性值是 auto，或者 background-size 的属性值是 auto auto，又或者没有设置 background-size 属性（此时会使用初始值 auto auto），那么：</p>\n<ol>\n<li>\n<p>如果图像水平和垂直方向同时具有内在尺寸，则按照图像原始大小进行渲染。例如一个 PNG 图片尺寸是 800px×600px，那么背景图的尺寸就是 800px×600px，这就是多倍图一定要设置 background-size 属性的原因，否则只能显示部分图像内容。</p>\n</li>\n<li>\n<p>如果图像没有内在尺寸，也没有内在比例，则按照背景定位区域的大小进行渲染，等同于设置属性值为 100%。所以，CSS 渐变图像默认都是覆盖整个背景定位区域的，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="27070698501788050000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.bg-gradient {\n  width: 300px;\n  height: 100px;\n  background: linear-gradient(deepskyblue, deeppink);\n}`, `27070698501788050000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.bg-gradient</span> <span class="token punctuation">{</span>\n  <span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>\n  <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>\n  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>deepskyblue<span class="token punctuation">,</span> deeppink<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>此时的渐变背景的大小就是 300px×100px。</p>\n</li>\n<li>\n<p>如果图像没有内在尺寸，但具有内在比例，则渲染效果等同于设置属性值为 contain。例如，有一个名为 triangle.svg 的 SVG 文件，XML 源码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="48774248208524180000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<!-- triangle.svg -->\n<svg viewBox=&quot;0 0 1024 1024&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;>\n  <path d=&quot;M512 0L1024 1024L0 1024Z&quot;/>\n</svg>`, `48774248208524180000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="svg"\n              >\n                <span class="gatsby-code-button-language">svg</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="svg"><pre style="counter-reset: linenumber NaN" class="language-svg line-numbers"><code class="language-svg"><span class="token comment">&lt;!-- triangle.svg --></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">viewBox</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0 0 1024 1024<span class="token punctuation">"</span></span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.w3.org/2000/svg<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>path</span> <span class="token attr-name">d</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>M512 0L1024 1024L0 1024Z<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>其中，<code class="language-text">&lt;svg&gt;</code> 元素没有设置 width 属性和 height 属性，也就是没有设置内在尺寸。此时这个 SVG 文件作为背景图，我们无须指定 background-size 属性值，SVG 图像就能自动被包含在背景定位区域内。CSS 示意代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="4811896681872985000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.svg-nosize {\n  width: 40px;\n  height: 40px;\n  border: solid deepskyblue;\n  background: url(./triangle.svg);\n}`, `4811896681872985000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.svg-nosize</span> <span class="token punctuation">{</span>\n  <span class="token property">width</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>\n  <span class="token property">height</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>\n  <span class="token property">border</span><span class="token punctuation">:</span> solid deepskyblue<span class="token punctuation">;</span>\n  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./triangle.svg<span class="token punctuation">)</span></span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>结果如图 3-83 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-17-14-11-02-ec66c2e3be2ee84d90d05b3dfecea66c-08a78.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 574px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 24.21602787456446%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsSAAALEgHS3X78AAAAyklEQVQY021Nyw7BQBTtXmLrx/yKva9g6QdYsWgar1Y9qg8iVIvyB6avmRo6M65GIsJZnHtzzj3nSuIbvGDMxAzRlmqY+CP+QuL8bXP+WhkQy6kQzXavUi51NwG4eZ7zb4jiXvpTyBhQQ9artXrH8QuB/f+cZTdCMuimlKYvYIwJjPv9ATbBGKEQhWGSpkkCHomjOIpiiFyvSPK8w871IXMKLoZpW/Z663rH4OzuPdteDUaa0h/JymCxtMaaPjdMVZtO9LnlrGVl+ASXyhOSrxJz+QAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 17 14 11 02" title="" data-src="/static/2022-01-17-14-11-02-ec66c2e3be2ee84d90d05b3dfecea66c-08a78.png" data-srcset="/static/2022-01-17-14-11-02-ec66c2e3be2ee84d90d05b3dfecea66c-683d3.png 200w,\n/static/2022-01-17-14-11-02-ec66c2e3be2ee84d90d05b3dfecea66c-6bdc6.png 400w,\n/static/2022-01-17-14-11-02-ec66c2e3be2ee84d90d05b3dfecea66c-08a78.png 574w" data-sizes="(max-width: 574px) 100vw, 574px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/80gqpd?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n</li>\n<li>\n<p>如果图像只有一个方向有内在尺寸，但又具有内在比例，则图像会拉伸到该内在尺寸的大小，同时宽高比符合内在比例。例如，某个 SVG 图像的内在比例是 1:1，但是 SVG 图像源码中的 <code class="language-text">&lt;svg&gt;</code> 元素只设置了 width 属性，没有设置 height 属性，则最终的 SVG 图像会按照 width 属性设置的宽度渲染，高度和宽度保持 1:1 的比例进行渲染。</p>\n<p>例如上面的 triangle.svg 文件，我们对其设置 width 属性，而不设置 height 属性，如下所示：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="78623810521130450000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<svg width=&quot;30&quot; viewBox=&quot;0 0 1024 1024&quot;>\n  <path d=&quot;M512 0L1024 1024L0 1024Z&quot; />\n</svg>`, `78623810521130450000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="svg"\n              >\n                <span class="gatsby-code-button-language">svg</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="svg"><pre style="counter-reset: linenumber NaN" class="language-svg line-numbers"><code class="language-svg"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>30<span class="token punctuation">"</span></span> <span class="token attr-name">viewBox</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0 0 1024 1024<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>path</span> <span class="token attr-name">d</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>M512 0L1024 1024L0 1024Z<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>同样的 CSS 代码：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="10997788334771763000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.svg-one-size {\n  width: 40px;\n  height: 40px;\n  border: solid deepskyblue;\n  background: url(./triangle.svg);\n}`, `10997788334771763000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.svg-one-size</span> <span class="token punctuation">{</span>\n  <span class="token property">width</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>\n  <span class="token property">height</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>\n  <span class="token property">border</span><span class="token punctuation">:</span> solid deepskyblue<span class="token punctuation">;</span>\n  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./triangle.svg<span class="token punctuation">)</span></span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>结果如图 3-84 所示，图像展示的尺寸是 30px×30px。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-17-14-48-37-1593d5c1edc000dbd259c0899702a01e-37d31.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 624px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 23.557692307692307%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAvElEQVQY03WNyw6CMBBF+2d8pSt/wbVuJEYlFnkpIhpjNApx48ZI36UtVuIOOZmcTHIzc0HTwZivgycZTBbwVQtlmh6AaWlvfotSynrkp47jDMczLLUNtenSgD/NrS9IuOdHjpRuegFSSi6E/YMJoZTZWkII55xRqrRWtcQYvytUIWRzO4wzhDDjnDIGrtdbfjwJLqC/TrO8KEq4Du9FGcbbNNtn+cGDgbeCU3ceJ7sgjONku/RgGG2iZPMBgC4XtR3nhncAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 17 14 48 37" title="" data-src="/static/2022-01-17-14-48-37-1593d5c1edc000dbd259c0899702a01e-37d31.png" data-srcset="/static/2022-01-17-14-48-37-1593d5c1edc000dbd259c0899702a01e-89539.png 200w,\n/static/2022-01-17-14-48-37-1593d5c1edc000dbd259c0899702a01e-cb00c.png 400w,\n/static/2022-01-17-14-48-37-1593d5c1edc000dbd259c0899702a01e-37d31.png 624w" data-sizes="(max-width: 624px) 100vw, 624px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>然而，在 Edge 浏览器中，只有一个方向设置了尺寸的 SVG 图像还是按照 contain 属性值进行渲染的。因此在实际开发中，不建议 SVG 图像只设置一侧尺寸。</p>\n</li>\n<li>\n<p>如果图像只有一个方向有内在尺寸而没有内在比例，则图像有内在尺寸的一侧会拉伸到该内在尺寸大小，没有设置内在尺寸的一侧会拉伸到背景定位区域大小。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="51330725141783360000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<svg viewBox=&quot;0 0 200 50&quot; height=&quot;50&quot; preserveAspectRatio=&quot;none&quot;>\n  <text x=&quot;0&quot; y=&quot;30&quot;>只有一侧有内在尺寸，没有内在比例</text>\n</svg>`, `51330725141783360000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="svg"\n              >\n                <span class="gatsby-code-button-language">svg</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="svg"><pre style="counter-reset: linenumber NaN" class="language-svg line-numbers"><code class="language-svg"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">viewBox</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0 0 200 50<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>50<span class="token punctuation">"</span></span> <span class="token attr-name">preserveAspectRatio</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>none<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">x</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">y</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>30<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>只有一侧有内在尺寸，没有内在比例<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>preserveAspectRatio=“none” 可以去除 SVG 图像的内在比例，根据我的测试，除 Firefox 浏览器的渲染有问题外，IE、Edge 和 Chrome 浏览器都可以达到预期效果。</p>\n<p>如果 background-size 的属性值一个是 auto，另外一个值不是 auto，有如下两种情况。</p>\n<ul>\n<li>\n<p>如果图像有内在比例，则图像会拉伸到指定的尺寸，高宽依然保持原始的比例。</p>\n<p>假设 PNG 背景图片的尺寸是 800px×600px，则 background-size: 40px 的效果是将图片宽度拉伸到 40px，高度和宽度的比例保持原始的 4:3，所以高度值是 30px。类似的，background-size: auto 30px 表示宽度 auto，高度拉伸到 30px，由于图片内在比例是 4:3，因此最终的背景尺寸是 40px×30px。</p>\n</li>\n<li>\n<p>如果图像没有内在比例，则图像会拉伸到指定的尺寸。同时，如果图像有内在尺寸，则 auto 的计算尺寸就是图像的尺寸；如果图像没有内在尺寸，则 auto 的计算尺寸就是背景定位区域的尺寸。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="24768366272719323000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.bg-gradient {\n width: 300px;\n height: 100px;\n border: solid deepskyblue;\n background: linear-gradient(deepskyblue, nosize) no-repeat center;\n background-size: 150px;\n}`, `24768366272719323000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.bg-gradient</span> <span class="token punctuation">{</span>\n <span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>\n <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>\n <span class="token property">border</span><span class="token punctuation">:</span> solid deepskyblue<span class="token punctuation">;</span>\n <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>deepskyblue<span class="token punctuation">,</span> nosize<span class="token punctuation">)</span> no-repeat center<span class="token punctuation">;</span>\n <span class="token property">background-size</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>background-size: 150px 等同于 background-size: 150px auto。因此，背景图像的宽度会拉伸到 150px。渐变是没有内在尺寸的，因此 auto 的计算值是背景定位区域的高度，也就是 100px。于是，最终的渐变背景呈现的尺寸大小是 150px×100px，如图 3-85 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-17-15-10-48-eac178487de5f1fd59e7aa8df189c213-0204f.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 43.321718931475026%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsSAAALEgHS3X78AAABkklEQVQoz1WOSUvDQBSA+yMEQVC8CFqsd8GziFdxOYsHL9WjKOhBcLmLiNalWhdQL1q3g/tWNSoIpk26OKnVJm0KTTdjTSfP1+DSwgfDPL5v3pgeU3CbBFcC2Ax0s7TyVKu91MwXRVgutYqTr+EAdWfyJvpY2UUwAQDVIUfxhIGrVOmMXL0Yq7IXUbMUK5mOzj+r6GgUDBd2Ykas6fCFDwBM7kpNQ3zrmK9ltIi2cX/jILd1G0cHTc2InbHfzdSIN1dJT9dNf+99n5UpBCfWTtf5sZSXczotjHGzlsvHZ1PsZPPBbPuRrfWwkLmOo4mm/SdnMC/nfjZv/23WjZiMMC7LCtOwcVe/XghOrs0OaY1HR9eMTwLsYSxldfIBwTR9BXjuv2bKZx8sjgfzUhF1y0yZjbOx6AgpSlQIf8JCGEyCCnjBXsiC8PZB3IrAJf7xKAThFMLGSSRLsoasAlZ8BkwRUXwTBDWVlEIhzsO6eY8ovkdlUZYlWY6k00pElnx+3uf3BoWX15dAgOeJ16vEFfz5NzsZrPrPeiPEAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 17 15 10 48" title="" data-src="/static/2022-01-17-15-10-48-eac178487de5f1fd59e7aa8df189c213-fee1c.png" data-srcset="/static/2022-01-17-15-10-48-eac178487de5f1fd59e7aa8df189c213-a67b7.png 200w,\n/static/2022-01-17-15-10-48-eac178487de5f1fd59e7aa8df189c213-0b187.png 400w,\n/static/2022-01-17-15-10-48-eac178487de5f1fd59e7aa8df189c213-fee1c.png 800w,\n/static/2022-01-17-15-10-48-eac178487de5f1fd59e7aa8df189c213-0204f.png 861w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n</ul>\n</li>\n</ol>\n<h3 id="数值或百分比值"><a href="#%E6%95%B0%E5%80%BC%E6%88%96%E7%99%BE%E5%88%86%E6%AF%94%E5%80%BC" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>数值或百分比值</h3>\n<p>background-size 属性值无论是数值还是百分比值，都不能是负值，其中百分比值是相对于元素的背景定位区域计算的。背景定位区域是由 background-origin 属性决定的，默认值是 padding-box。例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="88946906746426600000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.bg-percent {\n   width: 100px;\n   height: 75px;\n   border: 20px solid rgba(0, 192, 255, 0.5);\n   padding: 20px;\n   background: url(./1.jpg) no-repeat;\n   background-size: 100% 100%;\n}`, `88946906746426600000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.bg-percent</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 75px<span class="token punctuation">;</span>\n   <span class="token property">border</span><span class="token punctuation">:</span> 20px solid <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 192<span class="token punctuation">,</span> 255<span class="token punctuation">,</span> 0.5<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token property">padding</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>\n   <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./1.jpg<span class="token punctuation">)</span></span> no-repeat<span class="token punctuation">;</span>\n   <span class="token property">background-size</span><span class="token punctuation">:</span> 100% 100%<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>100% 是相对于 padding box 计算的，需要把设置的 padding: 20px 的大小计算在内，因此，此时背景图的尺寸是 140px×115px，效果如图 3-86 左图所示。如果我们设置 background-origin: content-box，则 100% 是相对于 content-box 计算的，在本例中，content-box 的尺寸是 100px×75px，因此，此时背景图的尺寸是 100px×75px，效果如图 3-86 右图所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-17-15-15-24-5deb39a9797993701c1dd7084903704d-1a5ee.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 799px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 47.559449311639554%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAACQklEQVQozz2QXUhTcRiHdxVEIVQSc9kcuwqDwjKyRlZIRUUXRYyMKV6EV11EddGVHyMlGs5Mm/sIdNTmhEIq6ANqXRiGzjxb2999uK+2s+3s7Jy5zbOzOed5O3PZy8PL7+bh9/IKvMGwzYHmMcyO3BjyrTLsBgBPgc0vOVw/bb/sCC05Xcjnn7NhTs+K3eVaxOxej9vt9giGA+xouDAeLY6FWT1e1ITz6kDeEOeIDTCQoCXgZaoCn3XJyh4j4F0GqiMwqG+alccx85nvwzJT36kH8mPd8nMDntyfEoxGuEShHM8yBMOQeSbNMlmWXchyhhgHXGUEX0ZaZnv2+sfqfz+uG7q2/4Rwl+SgaABleNlAAEP5rU9PByZbHCOyRzcaVfe6/AWYJLabZw2tmFrkm5RGtJIfXQ26s8JDYkk/ykRLoCdgjXQvDDcsaw44e8X9TbsVVy+681WZq8iftK1IWz93WTpxRTx+Say5IGo+Ku1zZSJbzTSJFpVCa9s+laz2/uEdd+VtaA2M/+VvumbPyZqPTbUq2R6FtOZW487zR+oGeZl/WAIKhQiu7lhWttteKD70Xp+f6PHnq/LW2dOmh++7219rOr4aO2eed759dlv/5M6gjwmtw1Bk05HjEAtoHbxFWFmHUBE+05w+xv2TjSRYGDBRYKZhOg0WuhJm0rC6CW/4TMFUCswkTFEVLBS8SoE1t91cLpfxaCyTySaTJEEkaZpOJAgcj1WJxxOpFEVRdAyPBYKhYDgcieI8pVKJl/8C0kO9d0Hf5zsAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 17 15 15 24" title="" data-src="/static/2022-01-17-15-15-24-5deb39a9797993701c1dd7084903704d-1a5ee.png" data-srcset="/static/2022-01-17-15-15-24-5deb39a9797993701c1dd7084903704d-2efd6.png 200w,\n/static/2022-01-17-15-15-24-5deb39a9797993701c1dd7084903704d-04e0a.png 400w,\n/static/2022-01-17-15-15-24-5deb39a9797993701c1dd7084903704d-1a5ee.png 799w" data-sizes="(max-width: 799px) 100vw, 799px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/77oou5?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>以上就是对 background-size 属性的不同类型属性值的介绍，下面介绍 background-size 其他的一些细节知识。</p>\n<p>background-size 属性值是可以作为缩写直接在 background 属性中设置的，但是需要注意的是，background-size 属性值只能写在 background-position 属性值的后面，并且使用斜杠分隔，其他写法都是无效的。例如下面的写法都是无效的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="23929293015908737000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 无效 */\nbackground: url(./1.jpg) no-repeat / 100%;\nbackground: url(./1.jpg) / 100%;\nbackground: url(./1.jpg) fixed / 100%;`, `23929293015908737000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 无效 */</span>\n<span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./1.jpg<span class="token punctuation">)</span></span> no-repeat / 100%<span class="token punctuation">;</span>\n<span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./1.jpg<span class="token punctuation">)</span></span> / 100%<span class="token punctuation">;</span>\n<span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./1.jpg<span class="token punctuation">)</span></span> fixed / 100%<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>下面这些写法都是有效的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="29644203600689955000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 有效 */\nbackground: url(./1.jpg) no-repeat center / 100%;\nbackground: 0 / 100% url(./1.jpg);\nbackground: linear-gradient(red, blue) round 100% / 100% scroll;`, `29644203600689955000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 有效 */</span>\n<span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./1.jpg<span class="token punctuation">)</span></span> no-repeat center / 100%<span class="token punctuation">;</span>\n<span class="token property">background</span><span class="token punctuation">:</span> 0 / 100% <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./1.jpg<span class="token punctuation">)</span></span><span class="token punctuation">;</span>\n<span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>red<span class="token punctuation">,</span> blue<span class="token punctuation">)</span> round 100% / 100% scroll<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>background-size 属性值作为缩写的语法是较近版本的浏览器才支持的，一些过时的浏览器是不支持的，主要体现在 2014 年之前的 iOS 和 Android 设备上。如果你的项目还需要兼容这些陈旧的浏览器，那么就需要将 background-size 属性分开写。</p>\n<h2 id="background-属性最成功的设计多背景"><a href="#background-%E5%B1%9E%E6%80%A7%E6%9C%80%E6%88%90%E5%8A%9F%E7%9A%84%E8%AE%BE%E8%AE%A1%E5%A4%9A%E8%83%8C%E6%99%AF" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>background 属性最成功的设计——多背景</h2>\n<p>background 多背景指的是一个 background 属性可以同时定位多个独立的背景图像，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="26437464747751480000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.multiple-backgrounds {\n   background: url(./1.jpg) no-repeat top, url(./2.jpg) no-repeat bottom;\n}`, `26437464747751480000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.multiple-backgrounds</span> <span class="token punctuation">{</span>\n   <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./1.jpg<span class="token punctuation">)</span></span> no-repeat top<span class="token punctuation">,</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./2.jpg<span class="token punctuation">)</span></span> no-repeat bottom<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>语法很简单，就是使用逗号分隔多个独立的背景定位语法。</p>\n<p>多背景原本的设计初衷是方便 PNG 背景图的定位，因为在那个年代，凡是装饰性的效果无一例外都是 PNG 小图片，想要实现尺寸自适应的背景图效果，需要嵌套多层 HTML 标签元素并将其一层一层定位，这种实现方法显然很麻烦。而多背景的出现很好地解决了这个问题，只需要一个 HTML 标签就可以实现任意个数的背景图的定位。</p>\n<p>然而人算不如天算，很快 Web 产品的设计趋势从拟物化设计转变成了扁平化设计，那种花哨的装饰背景变得越来越少，于是多背景一时间显得有些不实用了。</p>\n<p>好在这个时候有一个 CSS 新特性“横空出世”了，它改变了多背景的命运，这个 CSS 新特性就是 CSS 渐变。</p>\n<p>CSS 渐变本质上也是一种图像，它也可以作为 background-image 的属性值。为什么 CSS 渐变的出现让多背景重获新生了呢？有两个原因。</p>\n<ol>\n<li>CSS 渐变可以实现纯色效果，只要渐变起止颜色一样即可。</li>\n<li>background-size 属性也支持多背景，且可以任意控制尺寸。</li>\n</ol>\n<p>借助上面这两个特性，我们可以在元素的中心轻轻松松绘制一个深天蓝色的像素点，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="59217078787785660000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.pixel {\n   background: linear-gradient(deepskyblue, deepskyblue) no-repeat center / 1px 1px;\n}`, `59217078787785660000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.pixel</span> <span class="token punctuation">{</span>\n   <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>deepskyblue<span class="token punctuation">,</span> deepskyblue<span class="token punctuation">)</span> no-repeat center / 1px 1px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>既然任意像素点都可以实现，那么再配合 CSS 多背景，岂不是可以实现任意图形效果？毕竟所有图形都是由一个的像素点组成的。不过，我们在日常开发中不会使用拼接像素点的方法绘制图形，一是性能跟不上，二是实现的效果本质上还是位图，并不是矢量图，无法缩放自如。不过这个使用多背景拼接图形的原理在日常开发实践中是极其有用的。</p>\n<p>例如，要实现一个数值加减的图标按钮，使用 background 属性就可以轻松实现，这比使用 ::before 或 ::after 伪元素绘制简单多了，关键 CSS 代码示意如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="12532227555779652000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.btn-add,\n.btn-sub {\n   width: 1.5rem;\n   height: 1.5rem;\n   border: 1px solid gray;\n   background: linear-gradient(currentColor, currentColor) no-repeat center / 0.875em 2px, linear-gradient(\n            currentColor,\n            currentColor\n         ) no-repeat center / 2px 0.875em, ghostwhite;\n   color: dimgray;\n}\n\n.btn-sub {\n   background-size: 0.875em 2px, 0;\n}`, `12532227555779652000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.btn-add,\n.btn-sub</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 1.5rem<span class="token punctuation">;</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 1.5rem<span class="token punctuation">;</span>\n   <span class="token property">border</span><span class="token punctuation">:</span> 1px solid gray<span class="token punctuation">;</span>\n   <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>currentColor<span class="token punctuation">,</span> currentColor<span class="token punctuation">)</span> no-repeat center / 0.875em 2px<span class="token punctuation">,</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>\n            currentColor<span class="token punctuation">,</span>\n            currentColor\n         <span class="token punctuation">)</span> no-repeat center / 2px 0.875em<span class="token punctuation">,</span> ghostwhite<span class="token punctuation">;</span>\n   <span class="token property">color</span><span class="token punctuation">:</span> dimgray<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.btn-sub</span> <span class="token punctuation">{</span>\n   <span class="token property">background-size</span><span class="token punctuation">:</span> 0.875em 2px<span class="token punctuation">,</span> 0<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>实现的效果如图 3-87 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-18-10-21-04-6ffab863eb6f26d9728c0bc450f55867-ab313.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 677px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 35.89364844903989%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsSAAALEgHS3X78AAABBklEQVQY031QUW6DMAzl/qeo9lVpV0CadoCp0EBJQiEJCgGWsUFQOwIDZpVpYh/dk2O9PNuxHWe5YZ5n8EJklLI0lYxJQlLORZIwjNMkycAgBMpvMsBZNpBSTdNS1x9VVUOCUiUow/C1RoFImd8tVqrQut3vH3e7ByGKoqikLBhTrvvkus95rvO8+K/zOC6UcoTIMPx0vlxGY2zX2et1hOuf4pWtHlaC58vyHQwI57Aqk1K/6hYmAsIYh7RpmuYbnO2HWdu3bWtMZ4xpmqa3ff/ZAwEFAKK1djup43mIiwxKtH4j8RkTigk5pwwFpyCMThFGcOL45eCHYRRh6h8Dz0eExAfv+A0Ul4VFT5NCqQAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 18 10 21 04" title="" data-src="/static/2022-01-18-10-21-04-6ffab863eb6f26d9728c0bc450f55867-ab313.png" data-srcset="/static/2022-01-18-10-21-04-6ffab863eb6f26d9728c0bc450f55867-94813.png 200w,\n/static/2022-01-18-10-21-04-6ffab863eb6f26d9728c0bc450f55867-beb37.png 400w,\n/static/2022-01-18-10-21-04-6ffab863eb6f26d9728c0bc450f55867-ab313.png 677w" data-sizes="(max-width: 677px) 100vw, 677px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/mmvqpx?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>除了常规的图形效果，我们还可以借助多背景实现更复杂的背景纹理效果。例如，实现用来表示 PNG 透明背景的灰白网格效果，如图 3-88 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-18-10-24-04-3afc74bd954154a5282685a65ee8473f-54053.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 746px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.46648793565684%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAAA50lEQVQoz5VQWw6CMBDs/W9lVFQeiko0xhD4o60PLEShhBYXMFUBFSdtM5nMbmcXcc5v/yNJEngRFNdMSck72ooCStNUlSlfu1enB9Wx277Xgk8RHj83hnn1teP8Lu6zM6S23Tl2o12DP2fuzPldL2NfK4AE99ob5baFEFLKPM8FnCdkURSyQmUQNX+I1ZNlWRmb0mMUxZDlHIZA4igGQg/H0+lMCCWUBpgEAcaYYELhEAzigfMMMcYMy3Zd78KY5/srZ7Pb7ae6sVxvHGdrL9eGNZ/o1mA4Hmszw1yMtKlp2bo5Dy/sDs9HrNFFUNm8AAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 18 10 24 04" title="" data-src="/static/2022-01-18-10-24-04-3afc74bd954154a5282685a65ee8473f-54053.png" data-srcset="/static/2022-01-18-10-24-04-3afc74bd954154a5282685a65ee8473f-007e8.png 200w,\n/static/2022-01-18-10-24-04-3afc74bd954154a5282685a65ee8473f-4b2ab.png 400w,\n/static/2022-01-18-10-24-04-3afc74bd954154a5282685a65ee8473f-54053.png 746w" data-sizes="(max-width: 746px) 100vw, 746px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>实现的 CSS 代码如下，为了方便大家理解，CSS 背景相关属性都分开书写了：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="69708357675628370000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.square {\n   display: inline-block;\n   width: 304px;\n   height: 160px;\n   background-color: #fff;\n   background-image: linear-gradient(45deg, #eee 25%, transparent 25%, transparent 75%, #eee 75%), linear-gradient(45deg, #eee\n            25%, transparent 25%, transparent 75%, #eee 75%);\n   background-size: 16px 16px;\n   background-position: 0 0, 8px 8px;\n}`, `69708357675628370000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.square</span> <span class="token punctuation">{</span>\n   <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 304px<span class="token punctuation">;</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 160px<span class="token punctuation">;</span>\n   <span class="token property">background-color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>\n   <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>45deg<span class="token punctuation">,</span> #eee 25%<span class="token punctuation">,</span> transparent 25%<span class="token punctuation">,</span> transparent 75%<span class="token punctuation">,</span> #eee 75%<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>45deg<span class="token punctuation">,</span> #eee\n            25%<span class="token punctuation">,</span> transparent 25%<span class="token punctuation">,</span> transparent 75%<span class="token punctuation">,</span> #eee 75%<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token property">background-size</span><span class="token punctuation">:</span> 16px 16px<span class="token punctuation">;</span>\n   <span class="token property">background-position</span><span class="token punctuation">:</span> 0 0<span class="token punctuation">,</span> 8px 8px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>这里的方格效果的实现方法非常巧妙，利用线性渐变和元素的边角绘制两个等腰直角三角形，再利用 background-position 属性让两个三角单元视觉错位重合，以此实现方格效果，原理示意如图 3-89 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-18-10-30-57-e346bce07c23bf6a5310b025311c946e-3c344.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 36.18266978922717%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsSAAALEgHS3X78AAAA5ElEQVQY012QjZLCIAyE+/6vqOO12B+LFhFqgaZN3BbvzpFhmJDk2ywU8zyv6+q9t9YiwNUYE2OU30VEyIcQkF+WRT5Wke8oT9PEzIhBppRyMsuhByXw3zBmvpkQsBHwziDIrc45rTUkhDnn/2G4ncATBaLHOBIYNO1yGYYjc78n59YvFHAeJZeLKMXHI1cV1zVbK1o/tR7hBVoQul7ZGL7dZBgEVZzGFG8RDEEfvM1J9geDWWAnxvwo2f9gY/p+O7sO6sXnr56bdrD24f1PqdS5qZuubbuyUmW57cPpVPc6Ef0hL/9nlvtIuuGgAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 18 10 30 57" title="" data-src="/static/2022-01-18-10-30-57-e346bce07c23bf6a5310b025311c946e-fee1c.png" data-srcset="/static/2022-01-18-10-30-57-e346bce07c23bf6a5310b025311c946e-a67b7.png 200w,\n/static/2022-01-18-10-30-57-e346bce07c23bf6a5310b025311c946e-0b187.png 400w,\n/static/2022-01-18-10-30-57-e346bce07c23bf6a5310b025311c946e-fee1c.png 800w,\n/static/2022-01-18-10-30-57-e346bce07c23bf6a5310b025311c946e-3c344.png 854w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/wkiwtp?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/0psl82?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>正方形网格可以说是 CSS 渐变加多背景实现的比较基本的图案效果了，想看到更复杂、更“炫酷”的背景图案和纹理效果可以访问 Css3 Patterns Gallery 网站，部分效果如图 3-90 所示，有兴趣的读者可以研究一下相关的图案和纹理实现方法。另外，图案和纹理效果配合背景混合模式属性 background-blend-mode 还可以把视觉效果进一步升级。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-18-10-44-39-585d0113869c04170496abb334c3eabc-244cb.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 53.48837209302325%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACnklEQVQozyXPy0/TAAAG8HqUv8CESIj/gjEmHjxi4k09EYkSjEdwotEYQgyI46GRCZLgkAECGYNtBAaDuUehsK0Utj7Wbm3pY+1WNgYskcG6B9tsYvLlO/xO3wd44IkoKy7Z7IyobCIZ7DDLJBhS4dIYfWp18mJyaWOb4mRfnx6zWOesyx97ennpZAuKyUdngMHy8A8IvX/3Fgxiw7b0mj8F8xAowql173nPFwRGdYPjGyD84+bN1WetzW0v6+tv7ATpn+PbKCECB84dVlIW7SuCkll1QSgb54IY60c1hHd2paNT3OaR4+nA7n6EZEMU59oKxlMZXwBSMlng9YNx45jxel2daWb+VmND12c9fq8VudMyZ55tefEEXViLXrtNjZh7ZmzTSxtTi85ew5zDa299c9frdwLmLYSMScapae3YrHkxgFP8CsQugwQvOl2bknhET9gVNuFDiDDFoTHBF8BYOeHw2KXUMdD8tFlIcfETUFBkJJqklLNIRwfW3i6mTqVEEkGjug/9ri24qemRrrN7ZW192PAdCuwP9A8doATQ1fMpcZISTkLicRqm5KiSJfWDRN9AIpNVEnKEFoe+TQYOqFed3YYx044ftpgXUZL+pS1leMCx6d6DgvrnbVSY2POskFjob7Wm1qrLQVo36eM5OetwKAwfCGM0zS7sE1/dEC3Ibi8oyEfA8Miow2x53NiwveFyz48GfJu5fOlKzY+tIve7zPg+kRwa5P17c1Yr6PH1rbmbjb/hMGEymXAyBpznLstXlcvcRblSVdVCvlhWi6VCqawlly+UrioaFq8q+ULxv18UiqVy5eJS1RBQ82o0xqbSaVVVBUHEcUoU4jTDRqgYc8hhOEHTDBEhQ2Fc65jmZFSSk7VarVqt/gNrxPDMgaJefQAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 18 10 44 39" title="" data-src="/static/2022-01-18-10-44-39-585d0113869c04170496abb334c3eabc-fee1c.png" data-srcset="/static/2022-01-18-10-44-39-585d0113869c04170496abb334c3eabc-a67b7.png 200w,\n/static/2022-01-18-10-44-39-585d0113869c04170496abb334c3eabc-0b187.png 400w,\n/static/2022-01-18-10-44-39-585d0113869c04170496abb334c3eabc-fee1c.png 800w,\n/static/2022-01-18-10-44-39-585d0113869c04170496abb334c3eabc-244cb.png 860w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>最后讲一个关于多背景的小知识，那就是如果想要同时使用 CSS 渐变和 CSS 背景色，下面的语句是非法的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="1723208587927893500"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 不合法 */\nbackground: deepskyblue linear-gradient(deepskyblue, deeppink);`, `1723208587927893500`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 不合法 */</span>\n<span class="token property">background</span><span class="token punctuation">:</span> deepskyblue <span class="token function">linear-gradient</span><span class="token punctuation">(</span>deepskyblue<span class="token punctuation">,</span> deeppink<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>如果想让语句合法，则需要使用 CSS 多背景语法，并且颜色值必须放在最后，代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="5803492799783117000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 合法 */\nbackground: linear-gradient(deepskyblue, deeppink), deepskyblue;`, `5803492799783117000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* 合法 */</span>\n<span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>deepskyblue<span class="token punctuation">,</span> deeppink<span class="token punctuation">)</span><span class="token punctuation">,</span> deepskyblue<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<h2 id="background-clip-属性与背景显示区域限制"><a href="#background-clip-%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%83%8C%E6%99%AF%E6%98%BE%E7%A4%BA%E5%8C%BA%E5%9F%9F%E9%99%90%E5%88%B6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>background-clip 属性与背景显示区域限制</h2>\n<p>先看一段 CSS 代码：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="83522523374748010000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.example {\n   width: 180px;\n   height: 80px;\n   border: 10px dashed deeppink;\n   background-color: deepskyblue;\n}`, `83522523374748010000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.example</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 180px<span class="token punctuation">;</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 80px<span class="token punctuation">;</span>\n   <span class="token property">border</span><span class="token punctuation">:</span> 10px dashed deeppink<span class="token punctuation">;</span>\n   <span class="token property">background-color</span><span class="token punctuation">:</span> deepskyblue<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>此时背景色会一直填充到虚线框的下方，如图 3-91 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-18-10-55-51-98efdf839b24baa55dbbe1aa9519f8d7-8b21d.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 518px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 63.51351351351351%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAACNElEQVQoz5WRTUwTQRiGZ4sn9YAnY+KFmIqCUjXeFCXRxCMHEw41nkSjYlDhwMEDxpMciMoFxEKJdKkSkPQ3srXbn7TU1v5R9ABtKBQo/YEWQkp3t7vzOXvgojGpyRyeed9vvnfmGwR3THBB2/Y5N/vACWfet05vy3BOo6azhsceaBhWT2Snns6BclBNZyaf+eDscPvohq7bD6oRxLV8ut8ZVtik+rGt5repwxbh9Mftq+9SR83cqfFCswx8na54/c3qERNfRxdJTa2hfHxyz3LDgF4MJWuNJeQFyoPRd6BcgDxAAP0bFATm4Iomg+DaREv/CpEO2SUFi5EDKBYToA4A/QF2XGPHJIy+zaDYXaZpKEM6EZXY1Sy5kQdedvjRQN+vE/pdsqHYag9TLCA3tPYnEag0N/uWkR9qqk8mlT7Q3zKhD6/mT9I7/5mMSXLb6wRydLjrtXn5zU5Zkm2XfCvk/AsOLIVDHtjznnkEl7Rh5ZhSV+i95wufp8mX9rb7/Bf1jSP5noeBkIpuHM13PQkuNIwTpaszFGqiLw9uPuqOlo4NIBzcBFsykirnfmTAtBRY5wrBLFgT0TUuF8qDJR5b49KRPJjjEaJEZOXnyn46ugXfyMAASiBiLPKABbIRK2VJKAGWKhwnCjyAJOxzWNwDLAplHovEAqnC4wqpR1iSbAzrC4Q9bu9OcXd9Iz1jtH6ZNprMszabIxSILcbjZstXg9HKMC6GYWemDKzTa7YyS4uJ3/VH+5yPH52JAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 18 10 55 51" title="" data-src="/static/2022-01-18-10-55-51-98efdf839b24baa55dbbe1aa9519f8d7-8b21d.png" data-srcset="/static/2022-01-18-10-55-51-98efdf839b24baa55dbbe1aa9519f8d7-ded9a.png 200w,\n/static/2022-01-18-10-55-51-98efdf839b24baa55dbbe1aa9519f8d7-33b16.png 400w,\n/static/2022-01-18-10-55-51-98efdf839b24baa55dbbe1aa9519f8d7-8b21d.png 518w" data-sizes="(max-width: 518px) 100vw, 518px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>出现此现象的原因是 background-clip 属性在起作用。background-clip 属性支持下面几个属性值：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="81160629106824740000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`background-clip: border-box;\nbackground-clip: padding-box;\nbackground-clip: content-box;\nbackground-clip: text;`, `81160629106824740000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">background-clip</span><span class="token punctuation">:</span> border-box<span class="token punctuation">;</span>\n<span class="token property">background-clip</span><span class="token punctuation">:</span> padding-box<span class="token punctuation">;</span>\n<span class="token property">background-clip</span><span class="token punctuation">:</span> content-box<span class="token punctuation">;</span>\n<span class="token property">background-clip</span><span class="token punctuation">:</span> text<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>其中 border-box 是默认值，表示背景图像或者背景颜色的显示区域是整个 border-box，也就是边框的下方也会显示背景内容。</p>\n<p>background-clip 属性最实用的应用场景之一就是控制背景颜色的显示范围。举个例子，我们想要模拟一个复选框效果，设计师设计的复选框尺寸只有 18px×18px，区域太小了，不容易点中，尤其是在移动端，此时我们就可以借助透明边框增大点击区域的范围，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="56057347722944530000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.checkbox {\n   width: 18px;\n   height: 18px;\n   border: 3px solid transparent;\n}`, `56057347722944530000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.checkbox</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 18px<span class="token punctuation">;</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 18px<span class="token punctuation">;</span>\n   <span class="token property">border</span><span class="token punctuation">:</span> 3px solid transparent<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>下面问题来了，复选框选中状态是有一个深色背景的，如何让透明边框区域不显示这个背景色呢？可以使用 background-clip 属性，我们设置 background-clip 属性的值为 content-box 或者 padding-box。完整代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="76450872309915090000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.checkbox {\n   display: inline-block;\n   width: 18px;\n   height: 18px;\n   border: 3px solid transparent;\n   box-shadow: inset 0 1px, inset -1px 0, inset 0 -1px, inset 1px 0;\n   color: gray;\n}\n\n.checkbox.checked {\n   color: deepskyblue;\n   background: currentColor;\n   background-clip: padding-box;\n}\n\n.checkbox.checked::before {\n   /* 选中效果略 */\n}`, `76450872309915090000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css{13}"\n              >\n                <span class="gatsby-code-button-language">css{13}</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight has-highlighted-lines" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.checkbox</span> <span class="token punctuation">{</span>\n   <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 18px<span class="token punctuation">;</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 18px<span class="token punctuation">;</span>\n   <span class="token property">border</span><span class="token punctuation">:</span> 3px solid transparent<span class="token punctuation">;</span>\n   <span class="token property">box-shadow</span><span class="token punctuation">:</span> inset 0 1px<span class="token punctuation">,</span> inset -1px 0<span class="token punctuation">,</span> inset 0 -1px<span class="token punctuation">,</span> inset 1px 0<span class="token punctuation">;</span>\n   <span class="token property">color</span><span class="token punctuation">:</span> gray<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.checkbox.checked</span> <span class="token punctuation">{</span>\n   <span class="token property">color</span><span class="token punctuation">:</span> deepskyblue<span class="token punctuation">;</span>\n   <span class="token property">background</span><span class="token punctuation">:</span> currentColor<span class="token punctuation">;</span>\n<span class="gatsby-highlight-code-line">   <span class="token property">background-clip</span><span class="token punctuation">:</span> padding-box<span class="token punctuation">;</span></span><span class="token punctuation">}</span>\n\n<span class="token selector">.checkbox.checked::before</span> <span class="token punctuation">{</span>\n   <span class="token comment">/* 选中效果略 */</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>此时，就可以得到一个视觉上是 18px×18px 大小，实际点击区域是 24px×24px 大小的复选框了，如图 3-92 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-18-11-14-36-1f07df6ba3b1b84385f122574cfa0c27-20538.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 33.941605839416056%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsSAAALEgHS3X78AAABHklEQVQoz5WR207CQBRF+5t+iv/kiyQ+GBQT4psPmIKU+0UCbaflIrTTmWq7nFLB8shJVvbZZyb7TDJWnucUpVONjCXyIEkiSRwnRFHJfm9miUJKdZ4VxLFCKWXOkrNaWZZRhCYqYbfa0bnrMnroYb8Jnl88nuor6obXV59Wa0Oz6dFouNRqnzjO3gTvEUKYpaVa/FWafrMNA4hC1p6L7wdHPK9U1xUXs8ILERIEwQXWbDLC6feRUcQidLl9/MBZLiBLUVqZRRqt9VlPfdVXsbptG2cwRMUR87Xg5n6K7brHV2dcX1bV5Jkm/zmYRl8VUvzBCevflO/ZbL4YDCdGt7iex7vdptN1GIzGLJcrev0h4/EEXwRMZ3PW5l419BcoUxUYmmVyHQAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 18 11 14 36" title="" data-src="/static/2022-01-18-11-14-36-1f07df6ba3b1b84385f122574cfa0c27-fee1c.png" data-srcset="/static/2022-01-18-11-14-36-1f07df6ba3b1b84385f122574cfa0c27-a67b7.png 200w,\n/static/2022-01-18-11-14-36-1f07df6ba3b1b84385f122574cfa0c27-0b187.png 400w,\n/static/2022-01-18-11-14-36-1f07df6ba3b1b84385f122574cfa0c27-fee1c.png 800w,\n/static/2022-01-18-11-14-36-1f07df6ba3b1b84385f122574cfa0c27-20538.png 822w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/uzwtw2?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>background-clip 属性的特点是剪裁。在 background-clip 属性值发生变化的时候，背景图像显示的尺寸是不会变的，变的是图像显示的范围。因此，background-clip 属性在一定程度上可以实现类似 clip-path 的效果，缺点是只能针对背景元素，优点是兼容性足够好，IE9+ 浏览器均支持。</p>\n<p>如果我们想要改变背景图像定位的范围，也就是定位的原点，可以使用 background-origin 属性。</p>\n<h2 id="background-clip-text-声明与渐变文字效果"><a href="#background-clip-text-%E5%A3%B0%E6%98%8E%E4%B8%8E%E6%B8%90%E5%8F%98%E6%96%87%E5%AD%97%E6%95%88%E6%9E%9C" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>background-clip: text 声明与渐变文字效果</h2>\n<p>background-clip: text 原本是 webkit 内核浏览器的私有声明，只在 Safari 浏览器和 Chrome 浏览器中有效。后来，因为这个特性还挺实用，所以其被加入了最新的 CSS 边框和背景模块规范，目前 Firefox 浏览器和 Edge15+ 浏览器也提供了支持。</p>\n<p>background-clip: text 可以让背景图像按照字符形状进行剪裁，此时我们只要隐藏文字，就可以看到字符形状的背景效果了。这个特性可以用来实现文字纹理效果和更常见的文字渐变效果，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="37690333468104950000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<p class=&quot;text-gradient&quot;>我是渐变文字</p>\n<style>\n   .text-gradient {\n      background: linear-gradient(deepskyblue, deeppink);\n      -webkit-background-clip: text;\n      background-clip: text;\n      color: transparent;\n   }\n</style>`, `37690333468104950000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text-gradient<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>我是渐变文字<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">\n   <span class="token selector">.text-gradient</span> <span class="token punctuation">{</span>\n      <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>deepskyblue<span class="token punctuation">,</span> deeppink<span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token property">-webkit-background-clip</span><span class="token punctuation">:</span> text<span class="token punctuation">;</span>\n      <span class="token property">background-clip</span><span class="token punctuation">:</span> text<span class="token punctuation">;</span>\n      <span class="token property">color</span><span class="token punctuation">:</span> transparent<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>效果如图 3-93 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-18-11-23-42-594536b34b8088f0598c2903462e20b0-932f0.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 24.970691676436108%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsSAAALEgHS3X78AAABB0lEQVQY013KyVLCMACA4b7/ezgePKgjbkU7FgF1HFw6FZLuG5RWSpM06ZaG6FX/4ze/MrXY3ZK+enWO+uOn8vSdOHk3sZgO6WfcONt2ZJCFx6KsnVt0Cqmfth8+U80KrhvleZrr41RTU9etHm432ih2IZ7r2/Fl4i7RYlE83qez2XdBBwjw0kRFxQEg6lUCVlhZTzZrLQku/N1LFt+E/pmHQBmqkX3iFF97FhL7CObzVFZdrEbhddhnbG8h59wnG6b0cTUw/ktNgPtd3bpI5I2gfNg1Anc8oZKKYdv0ERU156TjZTvglmdMSqnIvwkhLN8N4gRhAm3HtOCbYZhgtXLsf+fhIH8AB6QMei2fAVoAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 18 11 23 42" title="" data-src="/static/2022-01-18-11-23-42-594536b34b8088f0598c2903462e20b0-fee1c.png" data-srcset="/static/2022-01-18-11-23-42-594536b34b8088f0598c2903462e20b0-a67b7.png 200w,\n/static/2022-01-18-11-23-42-594536b34b8088f0598c2903462e20b0-0b187.png 400w,\n/static/2022-01-18-11-23-42-594536b34b8088f0598c2903462e20b0-fee1c.png 800w,\n/static/2022-01-18-11-23-42-594536b34b8088f0598c2903462e20b0-932f0.png 853w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>background-clip: text 声明实现渐变文字效果是一种侵入式的实现方式。如果你的项目还需要兼容 IE 浏览器，则建议使用 @supports 规则进行设置，这样可以保证在 IE 浏览器中文字依然可见，具体代码可参考对应的演示页面。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/wbdzbn?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>另外，如果使用 background-clip: text 声明实现渐变文字效果，那么原本彩色的 emoji 字符的颜色会丢失。</p>\n<h2 id="background-origin-属性与背景定位原点控制"><a href="#background-origin-%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%83%8C%E6%99%AF%E5%AE%9A%E4%BD%8D%E5%8E%9F%E7%82%B9%E6%8E%A7%E5%88%B6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>background-origin 属性与背景定位原点控制</h2>\n<p>先看一段代码，之前至少有两位同行请教过我类似的问题：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="67908372939597910000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.example {\n   width: 180px;\n   height: 70px;\n   border: 20px dashed;\n   background: linear-gradient(deepskyblue, deeppink);\n}`, `67908372939597910000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.example</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 180px<span class="token punctuation">;</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 70px<span class="token punctuation">;</span>\n   <span class="token property">border</span><span class="token punctuation">:</span> 20px dashed<span class="token punctuation">;</span>\n   <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>deepskyblue<span class="token punctuation">,</span> deeppink<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>此时，虚线框上边间隙的背景颜色为深粉色，虚线框下边间隙的背景颜色为深天蓝色，渐变图像并没有在整个元素区域完整显示，像被断开了，如图 3-94 所示，这显然不是我们想要的效果。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-18-22-43-06-8ff71f05f57db2c119533a0cf3ad55be-5e116.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 591px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 74.61928934010153%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsSAAALEgHS3X78AAACcklEQVQ4y62TW0gUYRTH5zF67amHItFcKixUNKnwrXvq5gWCiqDXMBJyFROiB6OLgxg+GIGbElKIty1dW9d0V1crwlBBDUV0wcvuqquQorgzv+ayTupqTx3mcM53zvf/z/fN+Y9A2GRZNuI2lyTUjjw8jNzfjzwwgLy8rNeU3lasasKuhFqiLf5uXlxEHhtDXliAtbVwW96bcGdDzaQtdck7FVHfidlGGAqFtFjztpqYk7G8Sn9ErfkFhxKjKL2ST71ZJDoplieXcvmYU4EpzkShpdDAbhIbhBsbG1q05N1DOJxAfMkASUW9CA/fcbzIRUrxd4T8Wo4WOkl9Oopw5ibnUhIMbARhKKRfpK5pEPP9bnLKZ7guTnJbnCVL9GIWp7glzpCt5Jnl05gLfvKszKVj1cHtJJTChI7aH5Sef489w4ntqp3mbDe2tM96nuWiOd2BPc1B5YVGrI/tBnbPKz8oyCNROEBD/Busia+p2neH6hNl1CRXYd1/F6vpOQ1nP3BDOEVK6ul/XVkfSpUylLjYKK4VV5L+spGk6INctpSTIX4i+dgRLuaWkFnhJM4UQ76lYO+h6JKQCT+aBpHCmlRfNjERISsDs5tsdtOUYevrEAyCKurfK7C6ugmI1GHEr6aKWJma5srJ1FFJ4+NIIyN6dLsVkXv1engYW13gP5swPTOLz+dXbrJCcGlJO1kwuMTcnA+/P0BgfoHJKS/+wDwB1ZW1Wlf7cwrOF94zr/isUhO+dLrp8fQx+mscT+835fOsMjg4hL2tHWdHF11uD3X1Tbi6e2nv6KTL1YNbyW0tbdgdHbS0tis9D319X2mytfIHynkdWHb8DK0AAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 18 22 43 06" title="" data-src="/static/2022-01-18-22-43-06-8ff71f05f57db2c119533a0cf3ad55be-5e116.png" data-srcset="/static/2022-01-18-22-43-06-8ff71f05f57db2c119533a0cf3ad55be-dd2a5.png 200w,\n/static/2022-01-18-22-43-06-8ff71f05f57db2c119533a0cf3ad55be-20405.png 400w,\n/static/2022-01-18-22-43-06-8ff71f05f57db2c119533a0cf3ad55be-5e116.png 591w" data-sizes="(max-width: 591px) 100vw, 591px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>之所以渐变图像会断开，是因为 background-origin 属性在起作用。background-origin 属性支持下面几个属性值：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="17263308885263573000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`background-origin: border-box;\nbackground-origin: padding-box;\nbackground-origin: content-box;`, `17263308885263573000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">background-origin</span><span class="token punctuation">:</span> border-box<span class="token punctuation">;</span>\n<span class="token property">background-origin</span><span class="token punctuation">:</span> padding-box<span class="token punctuation">;</span>\n<span class="token property">background-origin</span><span class="token punctuation">:</span> content-box<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>其中 padding-box 是默认值，表示背景图像定位的左上角位置是从 padding-box 开始的，默认的背景定位区域大小也是 padding-box 大小。因此，若希望渐变背景从边框位置开始就是一个完整的自上而下的渐变效果，只要设置 background-origin 属性值为 border-box 即可，代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="29044652763562627000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.example {\n   width: 180px;\n   height: 70px;\n   border: 20px dashed;\n   background: linear-gradient(deepskyblue, deeppink);\n   background-origin: border-box;\n}`, `29044652763562627000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.example</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 180px<span class="token punctuation">;</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 70px<span class="token punctuation">;</span>\n   <span class="token property">border</span><span class="token punctuation">:</span> 20px dashed<span class="token punctuation">;</span>\n   <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>deepskyblue<span class="token punctuation">,</span> deeppink<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token property">background-origin</span><span class="token punctuation">:</span> border-box<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>效果如图 3-95 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-18-22-54-03-4f6de61fdecf29f471632a86c64b8f58-f2909.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 768px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 58.072916666666664%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAACYElEQVQoz2OIiIjQ0tYxVJI2rZ5qde6/kWeQgZqigYqcSXGX1ZX/hp6BBurK+gqSJoXtVpf/GwVEGWsoq6qrd3d3////n0FPV5cBCLgE+OI6Zdb+YtV3Y+AVY+AW5g2rl930n1XPjYFPgoGDnyekRnbjfzazACYeYaDy3Lw8kGYdTVVmYSWnaU8dpzwGIofJjyDIccojZC5IZPJDpxkvrJuPAzXn5eaANAdEluvYF8a23o1uuhXddCO6+VZ0820wQuUCZRuvx7Tei6g5K6sd2t67GKR52qTHFYU3KgrOlOcTg05XFp0rK7i1bfNrkOb5pQfaAjZNiNk3MWbf5JgDE6L39UfvBSJ0bjSYG7NvQuzeJu+1e+ZfBmm2NrXV4zPc439gs/eOtZ6bt3nv2uGzB4igXB8Qd6fPni3eO9Z4bNrlu3+Z+ypOBu7qkmqQZk19LVFGwakGTRtNpp+xXrvAoGuKXuNk3Yb1JlPP26wHcqfqNU7SrV9rPOWszdplRv0t2kWg0M4Hh7YuJKoYGEp4/T7ILNRhkYVw0zidf8otV2MRh3BTeVy+yy41ZlFkYAZxc3NzQZqXLFnc293T2ddzYvLG/zOvLJ80r6+/v3dC/9GpG/7Pur5s4rz+CRO6J/QdmrLu/+zrayYt7JvY39XReeDAAZDmf//+/QeD3////f6PAD/+/fnxHyQFkf/z/9/nf7/+wBX//v3t+3eGazdvX7p87cOHD7du3jl94uyePfuPnzy9c/feY8dPHTxw9NDhY0eOHt+4ZduhQ8eOHjx27NjJPfsOHDh05OSp0+cvXgEAqPODtdT8As4AAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 18 22 54 03" title="" data-src="/static/2022-01-18-22-54-03-4f6de61fdecf29f471632a86c64b8f58-f2909.png" data-srcset="/static/2022-01-18-22-54-03-4f6de61fdecf29f471632a86c64b8f58-60902.png 200w,\n/static/2022-01-18-22-54-03-4f6de61fdecf29f471632a86c64b8f58-48de7.png 400w,\n/static/2022-01-18-22-54-03-4f6de61fdecf29f471632a86c64b8f58-f2909.png 768w" data-sizes="(max-width: 768px) 100vw, 768px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h2 id="space-和-round-平铺模式"><a href="#space-%E5%92%8C-round-%E5%B9%B3%E9%93%BA%E6%A8%A1%E5%BC%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>space 和 round 平铺模式</h2>\n<p>background-repeat 属性新增了 space 和 round 这两个关键字属性值，下面就具体介绍其作用。</p>\n<h3 id="space"><a href="#space" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>space</h3>\n<p>让背景图像尽可能地重复，而不进行剪裁，每个重复单元的尺寸不会变化。其中第一张和最后一张图像固定在元素的两边，然后通过拉伸空白区域让剩余的图像均匀分布，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="57128124508539480000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.space {\n   background: url(./1.jpg) center / auto 100%;\n   background-repeat: space;\n   outline: 1px dotted;\n}`, `57128124508539480000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.space</span> <span class="token punctuation">{</span>\n   <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./1.jpg<span class="token punctuation">)</span></span> center / auto 100%<span class="token punctuation">;</span>\n   <span class="token property">background-repeat</span><span class="token punctuation">:</span> space<span class="token punctuation">;</span>\n   <span class="token property">outline</span><span class="token punctuation">:</span> 1px dotted<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>效果如图 3-96 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-18-22-57-05-d4c2f5a9ad94496b077520c26693f28d-381aa.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 32.26919758412424%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsSAAALEgHS3X78AAABuUlEQVQY03WN3UtTAQBH71uf21goyjR1y0V+FbFeerpU5nIZRB+QMHfBmKJYWA8RC0dBVAtkOCWEpWtRDPYiBdKUVd4tc8qWOjZjbKMCI3oYMxUtI077B/w9HTgcfoLsvcZEv0jWZ2LWZcR9qxHbFZHUvEzI04E8KJJ5YSLsNOLsFrnfcZ7v6Qjj/eeIjpwm9ayZycdNPLKepM/SiBAbNTFlV5F1lxG5U0qPQc1+xS6mp97w2XsK+a6Sr0/LmOgp4XL1Hmoqq1hOhZhxaJlzFPNlWIPPXMyZKiUatQph8eUFFobLSdr1fOjVEbyo5VJtCZPBAN/GWph3aUjY9MjdOl6Zyjl7rJ50IkzS00DcqWXx9gHeXdXia64snGkQZrxNxFr24q8tordOhbVOyQn9TkJvx1l6LhI5vpuR+n10HVIi1ezAaKggk3xP9EEFH4+qGTisxnpQgXREgUGnQEgH7hG/0UrUI7E0KhF2WQg6zPzIRll+befTzVYS/nYS7namhwp+8Dq5n3EyTzqZs5lJ+iViQxbkgTYCDyUEtlk+/4u1jS3+FHh98y+rG7/Jr6yxsrpOLpfn3zbdf7CUQAGBA/rRAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 18 22 57 05" title="" data-src="/static/2022-01-18-22-57-05-d4c2f5a9ad94496b077520c26693f28d-fee1c.png" data-srcset="/static/2022-01-18-22-57-05-d4c2f5a9ad94496b077520c26693f28d-a67b7.png 200w,\n/static/2022-01-18-22-57-05-d4c2f5a9ad94496b077520c26693f28d-0b187.png 400w,\n/static/2022-01-18-22-57-05-d4c2f5a9ad94496b077520c26693f28d-fee1c.png 800w,\n/static/2022-01-18-22-57-05-d4c2f5a9ad94496b077520c26693f28d-381aa.png 1159w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>space 主要用来平铺小尺寸图像，但是凡事都有例外，万一背景图像的尺寸比背景定位区域的尺寸还要大，那么会有怎么样的效果呢？</p>\n<p>首先，原本无效的 background-position 属性此时就生效了，也就是背景显示区域只能显示一张图像的情况下，我们是使用 background-position 属性来控制这张图像的定位的。</p>\n<p>其次，如果背景显示区域尺寸比平铺图像尺寸小，则在不同浏览器中的渲染效果是不一样的，在 Chrome 浏览器和 Firefox 浏览器中，图像可以显示；但是在 IE 和 Edge 浏览器中，图像无法显示，一片空白。这个兼容性差异最终导致如果要使用 space 平铺，要么不在 IE 浏览器中渲染，要么保证元素尺寸比平铺图像的尺寸大，这在一定程度上限制了 space 平铺模式的普及。</p>\n<h3 id="round"><a href="#round" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>round</h3>\n<p>背景图像会被拉伸，并保证不留间隙。随着定位区域空间的增加，如果（假设图像都是原始尺寸下的）剩余空间大于图像宽度的一半，则添加另外一张图像。在添加下一张图像时，当前的所有图像都会压缩以留出空间放下这个新添加的图像，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="52326443779887150000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.round {\n   background: url(./1.jpg) left / auto 100%;\n   background-repeat: round;\n   outline: 1px dotted;\n}`, `52326443779887150000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.round</span> <span class="token punctuation">{</span>\n   <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./1.jpg<span class="token punctuation">)</span></span> left / auto 100%<span class="token punctuation">;</span>\n   <span class="token property">background-repeat</span><span class="token punctuation">:</span> round<span class="token punctuation">;</span>\n   <span class="token property">outline</span><span class="token punctuation">:</span> 1px dotted<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>效果如图 3-97 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-18-23-02-50-8b171e57f9857d5e8f28ec3132856294-8b318.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 668px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 92.51497005988024%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsSAAALEgHS3X78AAAD1klEQVQ4y42Te1CUVRiHtz+0GEKDFWQDZWl3xktmMKEgE2KTpTXjpOU/1VSM3GyKBBkVjCCiwQHUZgAlsLGBMJTCygJFiMtSq1wFlosrYJNYwrorsCwILLtP37K7CSbVd+Y35/vOvL/nvOe87yeqyHmL3y+8i7o4kvr8CApTQslPDuVibjiNRRH0l+1GVRhBpfCdF7+LkiNhVOaFoz4XSd93kTQVRHD2cBg5+9/m+rUORGWxC+nKWkpXxhI+f/Ux1i11wGeZA6XxLtQli+k97ooyXkzMBieWOT5MxPNO1CSJaU5fQk+mK2dCnNkmfxT3Rx6irqYaUcsxd7qzV9CTJkcZLuOrLVKCV0tQZMjoPCmn57Cc1kQZytdlRPt5ErrVk6vCuuqYnN4MOZejZJTvkBEsFVNZo0DUHLsIha8HqT5uvL9GTKSvmGdXL6LsUzc633DnzEo39q11YY+gV1Yt5p0tzrSlSagPlJC11uqJ9nNlvbcD1TU1iNp3Pk11VCDKtABKovwpEJQfG0T7kedo3r6JuvRgfvl4E6f3buTL94L4/lAw6uiN1L7pj/JoAD/u8edUjD+5u3zoa2tAZDRNYRlmYQYjmO6i6+/gZk87dzQqhgcE/aHCqO1g6lYHgz2t6Ab7mbaMaYvH5rPMZhMi7I/ZOk2O6ShLWUPRXgmd2VKuZUmpPbicL8I8eG29hM1POJCbkTgTazKZZmzme3ZEZrMZq0w24G1ajj2FMvVx2nKk9BdIUWd48fUOD5ICPVjusID4uA9nYqeNRu75rfo7QztwYlSLMtOXKyeldB+QU/6yN9+EeHPiBS9Ktst4Ue5EXII1w+npae5//gEc12uo/syL1pecqPR0onCbI4eecSD0yYXs9nNkq1xEdvL+/wO03oLROM6NhnwGi07QqziNpruYkdZiDO3fMtR8ihsXs4W1S3OSeCDQDrVxLXXn8g+pXK9IQn3+E85m7uNSVTn3J/CfGdp3vTt0k/MfedCW7khFjDPrFos4GPuBrRhT80LnBU7oB2nO8+XqcW/UiSs5GuBCcoK1uibh7uxV/dcjzwYa9APUp62gKsiNBB8JO70XkJJ0YA5w3iPP6SWTrdqTGlrjNqMI86MsYQO5IauoKsiwAef23+wTiubbyQKeHB9iYkInlH7YKtPkg2NnMUR288CghpERvaARDGNjwm9lZnLKKLSRmWH9GBrtEIO3tWi1Ov68NYBeP4pOd4dRg2FuhvYGrapWoOrook3ViVYINIyOzry3XmmnobGF+sYmfiotp7buV86VXqChqYWfq6rp6fvNeg024F92/MF5rJFFqAAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 18 23 02 50" title="" data-src="/static/2022-01-18-23-02-50-8b171e57f9857d5e8f28ec3132856294-8b318.png" data-srcset="/static/2022-01-18-23-02-50-8b171e57f9857d5e8f28ec3132856294-d09a1.png 200w,\n/static/2022-01-18-23-02-50-8b171e57f9857d5e8f28ec3132856294-9165c.png 400w,\n/static/2022-01-18-23-02-50-8b171e57f9857d5e8f28ec3132856294-8b318.png 668w" data-sizes="(max-width: 668px) 100vw, 668px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>在 Firefox 浏览器中，设置了 round 平铺后 background-position 属性是会被忽略的，这个其实是有问题的（以后的版本可能会修复此问题），而在 IE 浏览器、Edge 浏览器和 Chrome 浏览器中都没有这个问题。因此，为了保证兼容，我们在使用 round 平铺的时候，一定要设置 background-position 边缘定位，而不能设置居中定位。</p>\n<p>查看图 3-96 和图 3-97 所示的效果</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/zj6758?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>space 和 round 这两个关键字属性值除了可以设置背景图像的平铺方式，还改变了 background-repeat 属性的语法，那就是可以分别指定水平和垂直方向上的图像平铺方式。例如我们可以指定水平方向是 round 平铺，垂直方向是 space 平铺，语法如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="15007911020524345000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`background-repeat: round space;`, `15007911020524345000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">background-repeat</span><span class="token punctuation">:</span> round space<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>在 IE9 浏览器之前，background-repeat 只能使用一个关键字属性值。下表所示的是单个 background-repeat 属性值对应的双值语法。</p>\n<table>\n<thead>\n<tr>\n<th align="left">单值</th>\n<th align="left">等同的双值</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align="left">repeat-x</td>\n<td align="left">repeat no-repeat</td>\n</tr>\n<tr>\n<td align="left">repeat-y</td>\n<td align="left">no-repeat repeat</td>\n</tr>\n<tr>\n<td align="left">repeat</td>\n<td align="left">repeat repeat</td>\n</tr>\n<tr>\n<td align="left">space</td>\n<td align="left">space space</td>\n</tr>\n<tr>\n<td align="left">round</td>\n<td align="left">round round</td>\n</tr>\n<tr>\n<td align="left">no-repeat</td>\n<td align="left">no-repeat</td>\n</tr>\n</tbody>\n</table>\n<p>space 和 round 适合用在装饰性的背景图中，不过当下推崇扁平化设计，追求纯粹的色彩，并不推崇华丽的背景图案效果，因此 space 和 round 值在实际项目开发中用得并不多，这是 10 年前的我没有想到的。</p>\n<h2 id="可以指定-background-position-的起始方位了"><a href="#%E5%8F%AF%E4%BB%A5%E6%8C%87%E5%AE%9A-background-position-%E7%9A%84%E8%B5%B7%E5%A7%8B%E6%96%B9%E4%BD%8D%E4%BA%86" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>可以指定 background-position 的起始方位了</h2>\n<p>由于 background-position 的百分比定位的计算比较特殊，因此在过去，我们想要实现一个距离元素右下方特定距离的定位就不太容易，唯一的方法就是借助透明边框帮助定位。好在 IE9 浏览器已经开始支持指定 background-position 的起始位置了，于是我们想要让背景图像在距离右下方 20px 的位置就非常简单了：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="49218462379131230000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.example {\n   width: 300px;\n   height: 200px;\n   border: solid deepskyblue;\n   background: url(./1.jpg) no-repeat right 20px bottom 20px;\n}`, `49218462379131230000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.example</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>\n   <span class="token property">border</span><span class="token punctuation">:</span> solid deepskyblue<span class="token punctuation">;</span>\n   <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./1.jpg<span class="token punctuation">)</span></span> no-repeat right 20px bottom 20px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>效果如图 3-98 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-18-23-19-32-1fa58a8a65b566f49752369b5f528dda-51e2b.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 77.9582366589327%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAAsSAAALEgHS3X78AAACDElEQVQoz5WTTWgTURDHc/RSbcUSsJhN0wSl4sGLUDyIth5KpWrrQUF6UCjoxZvQSD3WKj2UelXc5CTqvSWQhpCapIltsuluNmysbQLGbr7I136+3TduUi2CpGmH/xuGgd/MPOY9E9WAb3XYOI426xCpwbtfYAIAHY5tKoYP+zBq8UeXYfIBfFhnjI3zr3Arox4J7jh2O1iq8vksWy9waiUtFdNKiUOldH4nVeUzCgayHYz1Zo5beUk+7Q0vDmbdF2Jvznuc9vkp+/QV8+snY4KqufbawVgzfNbrXJ7piiz0c28Jep5wTfVNDJrPdJ0YG7kuIb0DnPO/iM71xJbs3922PdLmmyZW7lofDJy6ee1GE+YPhX94nMGFbs7l2Lhj9T4mPk9avPess1dPj48Oi2onOOWZWXvVzQwNfHSce365b9xivn/x7JDj5O1bI6LyF/7/kWgteHvdGZ/oCV6yLc8SMWf/p4cW8pF1abLX/WzU6EzybVeFm0Wr2woXkDKh2m4Q8yH8MwS5MGS/Qo5SdPzeWFVSgEQDaOGPtloxIzZ9UoakBiyCFAJGaYpWYcvwMhjf6UseTBUENQQlWSsrWlnWKiouSqggKEZcEJWSpBZFZT8oy6goqhVVryBsIAi3xjYsQSVYhmWTKUkQAoG11VW/z+ePb1J0gs7s7MbjVDQSZWhmPRSu1xsHd/sNdo4/BNIIZLgAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 18 23 19 32" title="" data-src="/static/2022-01-18-23-19-32-1fa58a8a65b566f49752369b5f528dda-fee1c.png" data-srcset="/static/2022-01-18-23-19-32-1fa58a8a65b566f49752369b5f528dda-a67b7.png 200w,\n/static/2022-01-18-23-19-32-1fa58a8a65b566f49752369b5f528dda-0b187.png 400w,\n/static/2022-01-18-23-19-32-1fa58a8a65b566f49752369b5f528dda-fee1c.png 800w,\n/static/2022-01-18-23-19-32-1fa58a8a65b566f49752369b5f528dda-51e2b.png 862w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/2ev558?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>我多次看到有人是这样实现图 3-98 所示的效果的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="72971292061313900000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.example {\n   background: url(./1.jpg) no-repeat calc(100% - 20px) calc(100% - 20px);\n}`, `72971292061313900000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.example</span> <span class="token punctuation">{</span>\n   <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./1.jpg<span class="token punctuation">)</span></span> no-repeat <span class="token function">calc</span><span class="token punctuation">(</span>100% - 20px<span class="token punctuation">)</span> <span class="token function">calc</span><span class="token punctuation">(</span>100% - 20px<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>虽然这种写法也有效果，但是性能不够好，而且这种写法可能会让 IE9 浏览器崩溃。因此，请使用 background-position 属性的原生语法实现。</p>\n<p>下面逐个介绍 background-position 属性的具体语法。</p>\n<h3 id="1-个值语法"><a href="#1-%E4%B8%AA%E5%80%BC%E8%AF%AD%E6%B3%95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1 个值语法</h3>\n<p>如果只有 1 个值，无论是具体的数值、百分比值，还是关键字属性值，则另外一个值一定是 center，如下表所示</p>\n<table>\n<thead>\n<tr>\n<th align="left">单值</th>\n<th align="left">等同的双值</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align="left">20px</td>\n<td align="left">20px center</td>\n</tr>\n<tr>\n<td align="left">20%</td>\n<td align="left">20% center</td>\n</tr>\n<tr>\n<td align="left">top</td>\n<td align="left">top center</td>\n</tr>\n<tr>\n<td align="left">right</td>\n<td align="left">right center</td>\n</tr>\n<tr>\n<td align="left">bottom</td>\n<td align="left">bottom center</td>\n</tr>\n<tr>\n<td align="left">left</td>\n<td align="left">left center</td>\n</tr>\n<tr>\n<td align="left">center</td>\n<td align="left">center center</td>\n</tr>\n</tbody>\n</table>\n<h3 id="2-个值语法"><a href="#2-%E4%B8%AA%E5%80%BC%E8%AF%AD%E6%B3%95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2 个值语法</h3>\n<p>如果有 2 个值，则分 3 种情况</p>\n<ol>\n<li>2 个值都是关键字属性值。left 关键字和 right 关键字表示水平方向，top 关键字和 bottom 关键字表示垂直方向，因此 top right 和 right top 的效果是一样的。需要注意的是，不能包含对立的方位，也就是说 left right 和 top bottom 这样的语法是无效的。</li>\n<li>1 个值是关键字属性值，另外一个值是数值或百分比值。如果数值或百分比值是第一个值，则表示水平方向，另外一个关键字属性值就表示垂直方向。如果数值或百分比值是第二个值，则表示垂直方向，另外一个关键字属性值就表示水平方向。因此属性值 20px left 是非法的，因为 20px 是数值且是第一个值，此时第二个值应该表示垂直方向，但是 left 显然是水平方向关键字属性值，出现了对立方位，所以为无效语法。</li>\n<li>2 个值都是数值或百分比值。第一个值表示水平方向，第二个值表示垂直方向。因此 20px 20% 表示在距离默认定位原点（左上角）水平方向 20px、垂直方向 20% 的位置开始定位。</li>\n</ol>\n<p>background-position 属性的初始值是 2 个值，即 0% 0%，其等同于 left top。</p>\n<h3 id="3-个值和-4-个值语法"><a href="#3-%E4%B8%AA%E5%80%BC%E5%92%8C-4-%E4%B8%AA%E5%80%BC%E8%AF%AD%E6%B3%95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3 个值和 4 个值语法</h3>\n<p>数值和百分比值表示偏移量，第一个值一定要是关键字属性值，这个关键字属性值用来表示偏移是从哪个方向开始的。如果是 3 个值，则认为缺少的偏移量是 0。因此，20px left top 一定是不合法的，其第一个值不是关键字属性值。left 20px right 也是不合法的，因为 left 和 right 方位对立。left 20px top 就是合法的，其等同于 left 20px top 0px，表示距离左侧 20px，距离顶部 0。由于 background-position 默认的定位就是 left top，因此 left 20px top 0 也等同于 20px 0px。下面的 CSS 代码展示了相对于左上角偏移的各种语法和计算值：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="2742608827732451300"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`background-position: left 10px top 15px; /* 10px 15px */\nbackground-position: left top; /* 0px 0px */\nbackground-position: 10px 15px; /* 10px 15px */\nbackground-position: left 15px; /* 0px 15px */\nbackground-position: 10px top; /* 10px 0px */\nbackground-position: left top 15px; /* 0px 15px */\nbackground-position: left l0px top; /* 10px 0px */`, `2742608827732451300`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token property">background-position</span><span class="token punctuation">:</span> left 10px top 15px<span class="token punctuation">;</span> <span class="token comment">/* 10px 15px */</span>\n<span class="token property">background-position</span><span class="token punctuation">:</span> left top<span class="token punctuation">;</span> <span class="token comment">/* 0px 0px */</span>\n<span class="token property">background-position</span><span class="token punctuation">:</span> 10px 15px<span class="token punctuation">;</span> <span class="token comment">/* 10px 15px */</span>\n<span class="token property">background-position</span><span class="token punctuation">:</span> left 15px<span class="token punctuation">;</span> <span class="token comment">/* 0px 15px */</span>\n<span class="token property">background-position</span><span class="token punctuation">:</span> 10px top<span class="token punctuation">;</span> <span class="token comment">/* 10px 0px */</span>\n<span class="token property">background-position</span><span class="token punctuation">:</span> left top 15px<span class="token punctuation">;</span> <span class="token comment">/* 0px 15px */</span>\n<span class="token property">background-position</span><span class="token punctuation">:</span> left l0px top<span class="token punctuation">;</span> <span class="token comment">/* 10px 0px */</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>background-position 属性也可以用在多背景中，用于分别指定每一个背景图像的定位，如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="86397774063795540000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.example {\n   background-image: linear-gradient(deepskyblue, deeppink), url(./1.jpg);\n   background-position: 0 0, right 3em bottom 2em;\n}`, `86397774063795540000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.example</span> <span class="token punctuation">{</span>\n   <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>deepskyblue<span class="token punctuation">,</span> deeppink<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./1.jpg<span class="token punctuation">)</span></span><span class="token punctuation">;</span>\n   <span class="token property">background-position</span><span class="token punctuation">:</span> 0 0<span class="token punctuation">,</span> right 3em bottom 2em<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>总结一下，IE 浏览器从 IE9 版本开始就已经支持 background-position 属性的 3 值和 4 值语法，因此不要再使用 calc() 函数实现相对于右下方的定位了。</p>\n<h1 id="outline-相关新属性-outline-offset"><a href="#outline-%E7%9B%B8%E5%85%B3%E6%96%B0%E5%B1%9E%E6%80%A7-outline-offset" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>outline 相关新属性 outline-offset</h1>\n<p>outline-offset 属性用于改变 outline 属性设置的轮廓的偏移位置。</p>\n<p>以我的经验来看，outline-offset 属性使用负值来缩小轮廓的频率要比使用正值来扩大轮廓的频率高很多。</p>\n<p>默认情况下，我们给元素设置的 outline 轮廓都是紧贴元素外边缘的，但是，如果多个元素紧密相连，那么 outline 轮廓就会出现互相覆盖遮挡的情况，如图 3-99 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-18-23-42-17-e26dd31e261f311a6a0d05372cf1d9ba-01cf0.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 69.87399770904926%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsSAAALEgHS3X78AAADA0lEQVQoz23Sa0xScRQA8Lu2PrRVH1qtD61aba7Ht+xLa62tzd6tmq1WLVs+p9NhqyyLIjU1pFrOSKICwSds4YvEsASlTOR6IcW4PAIREUQegqEBF+6J68fs7Ozsf87Ob/8vB4GVQZJUHR0FsxksFlCrqcQwGB+nJigKCgUMDydbJE7ECYKIxZIl+YhHo0SCwiR4ZiE4D/MBcLvAPQN2K4zpwOUE1zSYcZi0gtOJrPw4RMBcDHwk+BLJJOcAwoEgTM9C4t9NRCzoqGMKKxlCcWOnmCe5fqdNpPeawzHUs6T1/tEHIroQOBzfSI8ovjhIBBWxkDIa6CUWzRQWvm5kFDHSj+SfOFxw7mjxxtSSLo0tshCyz3hds96g3x9ZiC7Nfvjjvh/z10XmXkW8nCVndTSgpDCqHOgWCFvY756WcfKya9Iy65qHzN9xuwqfxqwui8PtcC/4LYJFx61oqDY8Ux11s8O2yiWPnMJOg86okpswdHxML5cpH7I7yyTqt/LR9hFcjpkw3Ka3+RyjVV4s3W26G/xxKaC94VGfd5maKfzbaSBjCyEXbtAMqqQSToMgi9NzgyWu6xwUq7CBMVzzY6pPWtTbsr3p/d6J/tSvfft6JNsmxmspPKnumsJ1OpnoE5/Lr6ouvsmo6tZk1nZcqWgoedXK65Ibf829aykoZW54+GJnkyjlmSClon7TIMpaxuICGbOwraKc9+hxPZ1VRmeL1WaxxprTMJBG592sF/20+2qFxacL12QxttJqttCe77hcura9n0nhHtre1jNI84V1lYfWZ+/ZfHDXvgbZkEprvNeqOl/ReJbOLuFKL9CO7z6F7L+46lg+crJo9YEMhN/5gMJK7qOeJxnSyqyO8lwRPavmdmGLxthn83GGLS/7x241y3MEfSVcJuPltXJ2LouXy+Lnlb25qtK2U3jlhYUTECAgGIf5OBlKQBggCv8PhCSpqwsvhlVfh3CjacoxPe/zG/QTZqMJHUEVXxQa9YgW03Z9lH363K/WoBMGQ3I/saz+AjTvfaAfKRRSAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 18 23 42 17" title="" data-src="/static/2022-01-18-23-42-17-e26dd31e261f311a6a0d05372cf1d9ba-fee1c.png" data-srcset="/static/2022-01-18-23-42-17-e26dd31e261f311a6a0d05372cf1d9ba-a67b7.png 200w,\n/static/2022-01-18-23-42-17-e26dd31e261f311a6a0d05372cf1d9ba-0b187.png 400w,\n/static/2022-01-18-23-42-17-e26dd31e261f311a6a0d05372cf1d9ba-fee1c.png 800w,\n/static/2022-01-18-23-42-17-e26dd31e261f311a6a0d05372cf1d9ba-01cf0.png 873w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>此时就可以使用 outline-offset 属性优化这个小小的体验问题，CSS 代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="1588682746522485000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`img {\n   outline-offset: -3px;\n}`, `1588682746522485000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">img</span> <span class="token punctuation">{</span>\n   <span class="token property">outline-offset</span><span class="token punctuation">:</span> -3px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>借助 outline-offset 属性让轮廓范围收缩，这样轮廓就只会在图片所在区域显示，而不会有轮廓相互覆盖的问题了，如图 3-100 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-18-23-44-10-4f490b2ff9172f374d96550e591b2269-822e9.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 53.00261096605744%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAADEklEQVQoz22STUybBQBAPxOMS0w8acaBEDMTZ6JpPBidJi5xmYZMIZkxTNAtJCjrXLDOZkM3kBHRUgadA0ZL6voxko3KsKW0VTbkp4DFYhntCKzQFQr9oaP9oHVQwGU+eza+5F3f6QmnSqs5kl/JKXkdLapWPi6sIfdAI+LdJM74Nn3hNP3RNMOxNI74P/SGlkmEm3m0doW/pevsJDrZzpiOGdhaH0HQfHOB8o8qeOeNExQWnOHgW0pefK8Ox3yMB5JEMBInEl1Fiid4+NcWk6E5wgtVmaCGHUnL1qo2E/2RdKSBrbgVwSJ20HlZT5NKi7ysnuKj33PwUx03PCFGpgOM+sJMBqLcXYoSWUkx6vcSmlHwUKplM6FmM1LHzkoLGwu1bISNCJ4+M1ODN5me8jI05KStzURZrZHaXzwY+iexuee5dXueidkAc4tx7HfGWfr9EMlgDcl7J0l5Skh6ylj7s4jwdDPCo+0Um1KYoM+L2znGoK2Hi+1Gilv7ON1mzUQn6B7zMODx4Z0NIw7bGLXK6L0qw2F6mXvDrzE58Aoj1j14XF8jJFeDRLw3cVsM9OibaTr3FYqK85SKQ+RV6Ci/aKT+mh2DfRC/fwWNzYRa9xyV6lxa9Xuw9Oyl+drzNInZ9DkUCGPd7Vj1HXT9oMN4SY+2SkNNjZa28QAqywTvq4wcrtTxucbA7ZlF9GMDFJ7dTcnZbM405FDVksPpS88i/+4prtpOIvyqkNH9ZQFXjudTXVyE8oNPUH6h4rrLj/kPH+VGF6WNP3G0vgOL04fa3st++TO8K3+aDyuyKaneTem3uRQonqTF+BmCIU/AcOgxGvdnoZTtoijnCfbtfYnLQ3fodc2i7Byl6EInryoaOHBOz5vn1bxwOAtZvsC+I1nknXict4/v4vVjAnXiMQS3WY+7R8Rlymhux9klcsvUhSP6gPHM2IORDayLSX6eu0/XzAo3pucx9YuY+w1YfhOxO0RsGU0DOqZ8DgT+Q2RVQlpPkVpfI5VcJxaNElpaYsHvJ7K8TDCwwP3YGol4kv/jX+6ijOkfTCYPAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 18 23 44 10" title="" data-src="/static/2022-01-18-23-44-10-4f490b2ff9172f374d96550e591b2269-fee1c.png" data-srcset="/static/2022-01-18-23-44-10-4f490b2ff9172f374d96550e591b2269-a67b7.png 200w,\n/static/2022-01-18-23-44-10-4f490b2ff9172f374d96550e591b2269-0b187.png 400w,\n/static/2022-01-18-23-44-10-4f490b2ff9172f374d96550e591b2269-fee1c.png 800w,\n/static/2022-01-18-23-44-10-4f490b2ff9172f374d96550e591b2269-822e9.png 1149w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/uzx534?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>另外，让合适的 outline 尺寸配合合适的 outline-offset 负值，我们可以通过颜色覆盖的方式实现渐变边框效果，或者绘制一个加号图案，如下所示：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="15554463712033307000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.example {\n   width: 120px;\n   height: 120px;\n   background: linear-gradient(deepskyblue, deeppink);\n   outline: 40px solid #fff;\n   outline-offset: -92px;\n}`, `15554463712033307000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.example</span> <span class="token punctuation">{</span>\n   <span class="token property">width</span><span class="token punctuation">:</span> 120px<span class="token punctuation">;</span>\n   <span class="token property">height</span><span class="token punctuation">:</span> 120px<span class="token punctuation">;</span>\n   <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>deepskyblue<span class="token punctuation">,</span> deeppink<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token property">outline</span><span class="token punctuation">:</span> 40px solid #fff<span class="token punctuation">;</span>\n   <span class="token property">outline-offset</span><span class="token punctuation">:</span> -92px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>效果如图 3-101 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-18-23-48-47-8923c40c258b08e5a7705d98cc3ef14e-7e9bc.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 38.297872340425535%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAABLUlEQVQY02P4jwT+/AORW5//Md730/bgT6Nd3+0O/jTZ+/PE279wWWTAgKL5L0h+841v6n1PTCc8Ltz+TrfnkdaEp8ce/iCs+S9Y89HT79IqL6858Pr1+5/zt75IK7905eYnuCwBzdcOPJsWse/sktsfXn47MvXqlPB9Dy+8BYr/w6/5H9hlLzfd26+ycJ/+8mtZ+3erLzmovvj90WdwWZya/4PN/r3v0UfvtZ9CNn7wXvc5dNMnn/V/zr+Ey6Jo/vfv3+/fv/+Cwc+fP4Hcf/+hiv79/wsh//z5A1Tz69cvCOP3nz8QBsP9B48uXb766dPn8xcvb92+8/SZc2fPX7h09dqtu/eOnTx14szZfYePbN2+a+/+gxs2bd25a+/Bw0c3bt5+5NiJDZu3AQDEOKuBrAAWxQAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 18 23 48 47" title="" data-src="/static/2022-01-18-23-48-47-8923c40c258b08e5a7705d98cc3ef14e-fee1c.png" data-srcset="/static/2022-01-18-23-48-47-8923c40c258b08e5a7705d98cc3ef14e-a67b7.png 200w,\n/static/2022-01-18-23-48-47-8923c40c258b08e5a7705d98cc3ef14e-0b187.png 400w,\n/static/2022-01-18-23-48-47-8923c40c258b08e5a7705d98cc3ef14e-fee1c.png 800w,\n/static/2022-01-18-23-48-47-8923c40c258b08e5a7705d98cc3ef14e-7e9bc.png 846w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>虽然实现的方法很巧妙，但这并不是常用技巧，大家了解一下即可。</p>\n<p>Edge15+ 浏览器和现代浏览器均支持 outline-offset 属性，该属性的兼容性还算不错。</p>\n<h1 id="cursor-属性新增的手形效果"><a href="#cursor-%E5%B1%9E%E6%80%A7%E6%96%B0%E5%A2%9E%E7%9A%84%E6%89%8B%E5%BD%A2%E6%95%88%E6%9E%9C" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>cursor 属性新增的手形效果</h1>\n<p>本节介绍两组新增的手形效果，分别是缩放和抓取。</p>\n<h2 id="放大手形-zoom-in-和缩小手形-zoom-out-简介"><a href="#%E6%94%BE%E5%A4%A7%E6%89%8B%E5%BD%A2-zoom-in-%E5%92%8C%E7%BC%A9%E5%B0%8F%E6%89%8B%E5%BD%A2-zoom-out-%E7%AE%80%E4%BB%8B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>放大手形 zoom-in 和缩小手形 zoom-out 简介</h2>\n<p>cursor: zoom-in / cursor: zoom-out 的鼠标指针如图 3-102 所示，多用于在桌面端的网页中查看大图的交互场景中：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="56582572399276910000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.zoom-in {\n   /* 放大 */\n   cursor: zoom-in;\n}\n\n.zoom-out {\n   /* 缩小 */\n   cursor: zoom-out;\n}`, `56582572399276910000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.zoom-in</span> <span class="token punctuation">{</span>\n   <span class="token comment">/* 放大 */</span>\n   <span class="token property">cursor</span><span class="token punctuation">:</span> zoom-in<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.zoom-out</span> <span class="token punctuation">{</span>\n   <span class="token comment">/* 缩小 */</span>\n   <span class="token property">cursor</span><span class="token punctuation">:</span> zoom-out<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-18-23-56-02-5d6e0a5a5f5e06cdb5ad360a2279424f-166cd.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 54.98699045967042%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAACVklEQVQoz2PYM9H7QJ/54+W2Z/ut5hZbZzurXDp56MnxKcuKteaUWJ6eZvlktd2DZbbXptocabW+MdvmfL91f4TZxBiz9iQrhtNTDA43i9+ZLX+kWqHMSkKEiWHN+u3vTzavLeRYWSp/eoLy/bkyt6bJXu6S2ZAtuSBdItBC2F5JMNdaxElXnOHSXMsrcxSvNOluLjA/Hq0ao8a9fMPOz2fad1XxbmnW2tNjdnuawtUuxSvtijtL5PPspGwUxUSEhaVFheUlJBlOzDC4ECixUkeqQE80x0jSRo5hw6btXy+0nWgWONKmeKxN9mq/4sN5incmKh6vkF8XKHckVD5WR0JEUFBcWILhzuKoSzFup6Z6XOzz3NnstabQ/NGlU6+ON5/tErg8VeXGLKXrCxRvL1Z8tVzpUrXCKj/ZNQFyq73kIlXEpcQlGP6jgn9//wDJ+7vLjrQJnZuqfGOV4rVKxbMm8mfz5I8nym/3lTsTJb/GX9ZXV0xCShys+R+Y+AdCf/+ANF/fWrarXvD0POVr2QrHueTbxGRyLKSjtCSjNSVabKTjzSRdbcQ0laSw23xjR8WRaWJXstUvMSvvMFVckK00wVQhS0rGWFHKRVnGXEHKTEtSSUYOh7MPF5ysY7/GJ3HWRHROpOCdSaJXa8SOpYruyhTZmyO6NklkeYzwXD8MPwN1A4kPj3c83NnyZkXP26M9x1Z0vjvX/fJw1/N9Xe8PdL3d3/Vqd9fLnZ23N3ajaP73D+T7d+/ePX7y6sPXX2+/fLlx58mDx89v33/28fN3SLggAwBSvHtN6FmgTgAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 18 23 56 02" title="" data-src="/static/2022-01-18-23-56-02-5d6e0a5a5f5e06cdb5ad360a2279424f-fee1c.png" data-srcset="/static/2022-01-18-23-56-02-5d6e0a5a5f5e06cdb5ad360a2279424f-a67b7.png 200w,\n/static/2022-01-18-23-56-02-5d6e0a5a5f5e06cdb5ad360a2279424f-0b187.png 400w,\n/static/2022-01-18-23-56-02-5d6e0a5a5f5e06cdb5ad360a2279424f-fee1c.png 800w,\n/static/2022-01-18-23-56-02-5d6e0a5a5f5e06cdb5ad360a2279424f-166cd.png 1153w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/t27otd?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>Edge 浏览器从 Edge12 版本开始支持 zoom-in 和 zoom-out 效果，Chrome 和 Firefox 等浏览器也都支持。如果想要兼容 IE 浏览器，则需要制作两个放大和缩小的 cur 文件进行自定义，CSS 代码示意如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="89585524381885870000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.zoom-in {\n   cursor: url(zoom-in.cur);\n   cursor: zoom-in;\n}\n\n.zoom-out {\n   cursor: url(zoom-out.cur);\n   cursor: zoom-out;\n}`, `89585524381885870000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.zoom-in</span> <span class="token punctuation">{</span>\n   <span class="token property">cursor</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>zoom-in.cur<span class="token punctuation">)</span></span><span class="token punctuation">;</span>\n   <span class="token property">cursor</span><span class="token punctuation">:</span> zoom-in<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.zoom-out</span> <span class="token punctuation">{</span>\n   <span class="token property">cursor</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>zoom-out.cur<span class="token punctuation">)</span></span><span class="token punctuation">;</span>\n   <span class="token property">cursor</span><span class="token punctuation">:</span> zoom-out<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="抓取手形-grab-和放手手形-grabbing-简介"><a href="#%E6%8A%93%E5%8F%96%E6%89%8B%E5%BD%A2-grab-%E5%92%8C%E6%94%BE%E6%89%8B%E6%89%8B%E5%BD%A2-grabbing-%E7%AE%80%E4%BB%8B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>抓取手形 grab 和放手手形 grabbing 简介</h2>\n<p>cursor: grab 的鼠标指针是一个五指张开的手的形状，cursor: grabbing 的鼠标指针是一个五指收起的手的形状，它们多用在元素预览空间不足并需要拖动元素的交互场景中：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="18972359649198190000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.element {\n   /* 准备抓取 */\n   cursor: -webkit-grab;\n   cursor: -moz-grab;\n   cursor: grab;\n}\n\n.element:active {\n   /* 已经抓住 */\n   cursor: -webkit-grabbing;\n   cursor: -moz-grabbing;\n   cursor: grabbing;\n}`, `18972359649198190000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.element</span> <span class="token punctuation">{</span>\n   <span class="token comment">/* 准备抓取 */</span>\n   <span class="token property">cursor</span><span class="token punctuation">:</span> -webkit-grab<span class="token punctuation">;</span>\n   <span class="token property">cursor</span><span class="token punctuation">:</span> -moz-grab<span class="token punctuation">;</span>\n   <span class="token property">cursor</span><span class="token punctuation">:</span> grab<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.element:active</span> <span class="token punctuation">{</span>\n   <span class="token comment">/* 已经抓住 */</span>\n   <span class="token property">cursor</span><span class="token punctuation">:</span> -webkit-grabbing<span class="token punctuation">;</span>\n   <span class="token property">cursor</span><span class="token punctuation">:</span> -moz-grabbing<span class="token punctuation">;</span>\n   <span class="token property">cursor</span><span class="token punctuation">:</span> grabbing<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>两者的效果如图 3-103 所示。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-01-19-00-03-43-bd2b27d9558869f762bbeb377b1ccb0c-88b8f.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 44.45407279029463%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAACe0lEQVQoz22Q20vTcRjGf0QYykrNs+Jvm4dIMKGL6KaUJMtzQkQRXtlFCAlGQZGYJmmhaOIBdZpTMY/gzKnLTHHTaR5zTrc5dfOQZHXVTVfBp+8f4AsPvLyHh+d5pC5tHk0FCbx5mkR1QRLGthQWelIFUphpTWOs8irjurdML+j43Bgv5mmYxc20JgWTwGBlMoW517kcf4XoxFSkcc1N9I/PoM0NpDc/AFttCHvNobgaQtiuDsOc78lI3UNmjRqmCrywV4axUxmEozSI9cJgzE+CqE/3p/2aDy8T1UiT7ZlMFgejL1IxXqLE3qhmuyUCR70aR10UK6V+GNryWDJrMZf4Y6kSu7aL7PfH4KpTYS9T039fZjIrjP57sUhTHRmYioMYLlIyVhLOcpUgrVFhq5CxlqpYfO7LeMsjLEtarLV+OJojWHsfiasngsMPKjbLlGjTw9BlhlCVGYM025PBankwJvE8VSIzW6pk450sVJ5jsykWW6EP8x15WJZbsTb54+yLYjVbZuWujPOVivVcJSbRT2SFMvXggiDsvoVNZLVWEyUURGBriBQQVnrjOBi+xHeNH6t9+VgsQmFLIOtZUZhPKdGpZVruyFTfCKcqQaY9XqjMjkMyaBKZe+2FucKfZWHJqhE5NfjxNccby4uzWJ+dZLo6hwVjI3PRJ5iVfCk/rSDrvILbagVp3p4EKDzICPUgOTYEacNpwmYZxGbV47QPse3Us7tlYGtglC3jKO7FIQ7dVo5c+7g79WwOGDBOGNB/GuVL90cMXTra+gV6B+jUjSBxTDlcP9j59Zuff/7i2D1iZv4ba/ZNVtxuNvYPWFqz4dzZ498xv/8BM0fduP3qZ4IAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 01 19 00 03 43" title="" data-src="/static/2022-01-19-00-03-43-bd2b27d9558869f762bbeb377b1ccb0c-fee1c.png" data-srcset="/static/2022-01-19-00-03-43-bd2b27d9558869f762bbeb377b1ccb0c-a67b7.png 200w,\n/static/2022-01-19-00-03-43-bd2b27d9558869f762bbeb377b1ccb0c-0b187.png 400w,\n/static/2022-01-19-00-03-43-bd2b27d9558869f762bbeb377b1ccb0c-fee1c.png 800w,\n/static/2022-01-19-00-03-43-bd2b27d9558869f762bbeb377b1ccb0c-88b8f.png 1154w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/7sr1sy?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=split" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>Edge 浏览器从 Edge15 版本开始支持 grab 和 grabbing，Chrome 和 Firefox 等浏览器也都支持，且最新的版本中已经不需要加私有前缀。不过由于浏览器支持无私有前缀语法的时间比较晚，为了安全起见，目前最好加上私有前缀，等到 2022 年之后就可以放心去除了。如果想要兼容 IE 浏览器，可以使用 move 属性值代替 grab 和 grabbing，CSS 代码示意如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="19547396698343866000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`.element {\n   cursor: move;\n   cursor: grab;\n}\n\n.element:active {\n   cursor: grabbing;\n}`, `19547396698343866000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="css"\n              >\n                <span class="gatsby-code-button-language">css</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">.element</span> <span class="token punctuation">{</span>\n   <span class="token property">cursor</span><span class="token punctuation">:</span> move<span class="token punctuation">;</span>\n   <span class="token property">cursor</span><span class="token punctuation">:</span> grab<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.element:active</span> <span class="token punctuation">{</span>\n   <span class="token property">cursor</span><span class="token punctuation">:</span> grabbing<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>',
excerpt:"CSS 新世界中有大量的 CSS 新特性源自对 CSS2.1 中已有的 CSS 属性的增强，本章内容所讲述的就是在已有 CSS 属性上新增的那些 CSS 新特性 贯穿全书的尺寸体系 在 CSS2.1 中，CSS 中的尺寸概念都隐藏在具体的 CSS…",frontmatter:{date:"2021-12-22 23:14:14",path:"/css-new-world-enhance-existing-css/",tags:"前端, CSS, CSS新世界, 读书笔记",title:"CSS新世界从增强已有的CSS属性开始",draft:null}}},pathContext:{mainPostPath:"/css-new-world-overview-prepare/",nextPostPath:"/css-world-text-processing/",prePostPath:"/css-new-world-enhance-existing-css/"}}}});