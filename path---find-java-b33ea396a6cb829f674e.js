webpackJsonp([0xe940ebc9e16],{1258:function(a,n){a.exports={data:{file:{childImageSharp:{sizes:{base64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAeCAYAAAAsEj5rAAAACXBIWXMAAAsSAAALEgHS3X78AAAHlElEQVRIx12We2xT5xXAbcI2Vmn7o1I1uhVYRxL8tuPn9bXv0+/4/YgdOyYkkATCCEEYsqVNC2wCIYQWShmUBFh4hMAWECot0BUtlI4yAS1oKqJQXimsDBgTU8codnLO7r0uUPpJn87Rp+/8vvOdc75zr8xmZmTieI1NykU5yxOfxDncz3NUjAlyDXMjXGMhys+cG+FzGQ8VU4t7XuV8z8m+GUkrJclSqVReYJ0ZWQ8Tl2AdTPhnq9ns2QKd+crDZiHha8NsYCE21HZiXphpb3sxxTf99Tdsw51ldHqFaLOXXyzvYqOyZ0YPk5soylfouuUbvHOxh56JbiqJfi4/FnE1lxKetrGUZ954nbcdU/752ORpxWVsc6mZjPxctFtApeVtra1lmIPwTxClgeCqvGTsX/WWOEbtyTGWSoGbToOPzUHQ1QghVxOEhRniZ5U8XB4TzvTdgj1ZJdq2OOrkGhVRBnrYFum6TiK0l2fr0emMlVxcBhlnEniqDjlBuqg0CnD0MPWiDrwzhR4u+5B3x3WiLUNHJjxzZYvR8ZKTCP+Xo1JoM/nBYvSB1egHuyUIrCOBPj4LtD0KlD2K4h7SGip62aygxzaK9rHA3Aqt2vw0MRYjnyJtYaQdsXG9hgWFwgmVlXZUKUjUqmm0CgfwhA80Kgr1Wg40Sue4SuFEnZq+YjMbJ0kh0zmfemjQ0j2EJYh2a23RVOODIBvHmCsBUaoWLDoWKIsP50bTApxC5QwH1Ghp0Gk4MBk8aDLQEslooCc88VClsK+zGANI2mqLer0XFuea8PSuN+DM7o3QWyhAR7IBfj+vDbyOICS9aSjkZo8nvSlUKuxXLDUOKdN6LSl/AlRUE+vNAnD50l8XeTIEPiYEzXYG5mlNeGz7BvjPpY/g5snDcHxwE+zs7oCh1zvHCrNm48u/ML8j2muVQblBZ3t6ZY2KXKtQcDiwdk1xx9rV0BlqghEuD4fNUTy1Zwhw7Cbioxu461fdsOgFDa5pbh3zu6NifE9f+XCPlGHS5nuaFI3K8brJ4EUHES4WFiyEP2/dCPc2vYH/3NIHePcywP1LWLp3Ec4tWQa3FvbAu7294yqVA801rju5utYfiQyKDD4DnC8GWEhMafJPtBALxuHjo3+C8bufIn59DfHBFcDiDcQvzyF+/iEsbWuDadNMaDW5H7nY6Iyyh165zfLNtdUqIqLTsEJSQqBVUTD1JQPqdRT8sf9NuH7kMHy0fRg+O3EUzp96H/Zs2SBklxFKxwFmowtdTCIoPQx7oKLzl32PPTRPVSudDwQgCrUGL0+twdzsDjjSdwD2J1fh/q7N0N+1EtykB178qVY4lAahRktWkw95JrG4DAxPvHU3Wwb+rlcsHfK0WNxCoMdUCgdUaxnMBPKw7dVe2LyhDw4MboORA4NQOd2CaiUFaqWjZJGAyQGRUeubP8FqElqZspquEBeUM2zrnEQUa3R8USVcp2qGDZV6ErqXL4PfrlwFhSU9cPL4MejfshOsZq90sCg5KvHZ5MnPfa+cmFrxukRFuRZNcYqIoNngHheeFmiF11ClIDBdPwfqG9qhc1E3rF25GnrX90M204JqBfWItPrP8lTqa7vFpSw3GJ9cZjI4pW5TXaWezpKxh4Q5gEY9LwApVOtZMApxVWhd2DKvC7K5FjTUsFCj45Ah4yXaHuz1MBlgyHCb1HXISIXMTcekOJqN1h/72Mx92h5DwuwHjeChWseBQsNgJJ6H944eB5oNgaLajnaL/07E24wuKr7Cz+XuuenUsMioCxYmyHhnSPLQTYVVYVfjI46Mo80WBLMgLY4E1FhCOENBAsfHQG/0juuNPqGguU8ywXas5XNbg6783wJ8w781GtUPJc+irkap/Ufdje0JXytStnDJbA2D1Z4EKxEHsyUMRmsIdcZaNFpCYBYqwWQLPhD3Btn6t2Pe5uF0cD7Sdr/xmSab8racFaDooOvuk0wDEs40EFQGbVQGbEKXJoTPgZ3JoJGIgULvR6M1jE67rzvpae5ojC7GEJ9rfgILc7lC3NV0T6flTtjoPLK+VuD8rcD65gDtaQInPxOtzoxQRrXgD8/BdW/+YezYByfxvfdHvnxl+ZLKCDfzUMIze60Ey+brJukrqcjA1u3tBw8dfZiZuRQFaNFory/WEPUlE5kFK5WDQKRtbFPfUOnChUvFL27cwKuj/8CBHXv2iQw/k/KGuNwyCYiIkhw+sO/569eu7b1+ffR/H5z4BAcG38X1m/biyjX9ODR8GC9dHsXLV0fx5KlzePDIyFd7ht9ZJZhJrcvLhV/wMuUPljQWtC6Z+FjfuWPHlPMXLq64Onpz3d8/Pf9WX//OW2vWbITBof3n3tqya9fbh/7SvW1gZ9Xj/V1dr8kf614qIZONjBwrezi8Ty54K5d9ZzTmF+xe1LnioaD+4Nvrn4/ermif3yHp8UCDLMCky7Z+n192+/YdST9z5mPZ7t1D8ouXv6gQ4S9WTplks7mut8xZijxbKz2vvi2D39/cPyB/HC5xOm2czPvd35F8rkGCS0+I4WXV1QbJaMq06XqbNXCQJIILpH8hOic3GghZMpl62qG/Nf4PRzaQ862MzO4AAAAASUVORK5CYII=",aspectRatio:.6666666666666666,src:"/static/avatar-dc7bc85837bf005ae32d2a37dfdfa8a2-25c91.png",srcSet:"/static/avatar-dc7bc85837bf005ae32d2a37dfdfa8a2-8a97b.png 200w,\n/static/avatar-dc7bc85837bf005ae32d2a37dfdfa8a2-0fdf3.png 400w,\n/static/avatar-dc7bc85837bf005ae32d2a37dfdfa8a2-25c91.png 600w",srcWebp:"/static/avatar-dc7bc85837bf005ae32d2a37dfdfa8a2-216f6.webp",srcSetWebp:"/static/avatar-dc7bc85837bf005ae32d2a37dfdfa8a2-5d70e.webp 200w,\n/static/avatar-dc7bc85837bf005ae32d2a37dfdfa8a2-d1677.webp 400w,\n/static/avatar-dc7bc85837bf005ae32d2a37dfdfa8a2-216f6.webp 600w",sizes:"(max-width: 600px) 100vw, 600px"}}},site:{siteMetadata:{title:"女王控的博客",description:'前端工程师，黑猫女王控，欢迎勾搭，技术相关<a href="https://github.com/towavephone" target="_blank">@towavephone</a>，QQ闲聊<a href="tencent://AddContact/?fromId=45&fromSubId=1&subcmd=all&uin=634407147&website=www.oicqzone.com">@towave</a>，bili关注<a href="https://space.bilibili.com/11507708#/" target="_blank">@towave</a>',siteUrl:"https://blog.towavephone.com"}},mainPost:{html:'<h2 id="无序链表的顺序查找"><a href="#%E6%97%A0%E5%BA%8F%E9%93%BE%E8%A1%A8%E7%9A%84%E9%A1%BA%E5%BA%8F%E6%9F%A5%E6%89%BE" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>无序链表的顺序查找</h2>\n<h3 id="特点"><a href="#%E7%89%B9%E7%82%B9" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>特点</h3>\n<blockquote>\n<ul>\n<li>在含有 N 对键值的基于（无序）链表的符号表中，未命中的查找和插入操作都需要 N 次比较。命中的查找在最坏情况下需要 N 次比较。特别的，向一个空表中插入 N 个不同的键需要<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtext> </mtext><msup><mi>N</mi><mn>2</mn></msup><mi mathvariant="normal">/</mi><mn>2</mn></mrow><annotation encoding="application/x-tex">~N^2/2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8141079999999999em;"></span><span class="strut bottom" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="base"><span class="mspace"> </span><span class="mord"><span class="mord mathit" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mord">/</span><span class="mord">2</span></span></span></span>次比较</li>\n</ul>\n</blockquote>\n<h3 id="实现"><a href="#%E5%AE%9E%E7%8E%B0" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>实现</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="71447545449318015000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`public class SequentialSearchST<Key,Value>{\n    private Node first;\n    private class Node{\n        Key key;\n        Value val;\n        Node next;\n        public Node(Key key,Value val,Node next){\n            this.key=key;\n            this.val=val;\n            this.next=next;\n        }\n    }\n    public Value get(Key key){\n        for(Node x=first;x!=null;x=x.next){\n            if(key.equals(x.key)){\n                return x.val;\n            }\n        }\n        return null;\n    }\n    public void put(Key key,Value val){\n        for(Node x=first;x!=null;x=x.next){\n            if(key.equals(x.key)){\n                x.val=val;\n                return;\n            }\n        }\n        first=new Node(key,val,first);\n    }\n}`, `71447545449318015000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="java"\n              >\n                <span class="gatsby-code-button-language">java</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="java"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SequentialSearchST</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Key</span><span class="token punctuation">,</span><span class="token class-name">Value</span><span class="token punctuation">></span></span><span class="token punctuation">{</span>\n    <span class="token keyword">private</span> <span class="token class-name">Node</span> first<span class="token punctuation">;</span>\n    <span class="token keyword">private</span> <span class="token keyword">class</span> <span class="token class-name">Node</span><span class="token punctuation">{</span>\n        <span class="token class-name">Key</span> key<span class="token punctuation">;</span>\n        <span class="token class-name">Value</span> val<span class="token punctuation">;</span>\n        <span class="token class-name">Node</span> next<span class="token punctuation">;</span>\n        <span class="token keyword">public</span> <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token class-name">Key</span> key<span class="token punctuation">,</span><span class="token class-name">Value</span> val<span class="token punctuation">,</span><span class="token class-name">Node</span> next<span class="token punctuation">)</span><span class="token punctuation">{</span>\n            <span class="token keyword">this</span><span class="token punctuation">.</span>key<span class="token operator">=</span>key<span class="token punctuation">;</span>\n            <span class="token keyword">this</span><span class="token punctuation">.</span>val<span class="token operator">=</span>val<span class="token punctuation">;</span>\n            <span class="token keyword">this</span><span class="token punctuation">.</span>next<span class="token operator">=</span>next<span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token class-name">Value</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Key</span> key<span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Node</span> x<span class="token operator">=</span>first<span class="token punctuation">;</span>x<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">;</span>x<span class="token operator">=</span>x<span class="token punctuation">.</span>next<span class="token punctuation">)</span><span class="token punctuation">{</span>\n            <span class="token keyword">if</span><span class="token punctuation">(</span>key<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n                <span class="token keyword">return</span> x<span class="token punctuation">.</span>val<span class="token punctuation">;</span>\n            <span class="token punctuation">}</span>\n        <span class="token punctuation">}</span>\n        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token class-name">Key</span> key<span class="token punctuation">,</span><span class="token class-name">Value</span> val<span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Node</span> x<span class="token operator">=</span>first<span class="token punctuation">;</span>x<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">;</span>x<span class="token operator">=</span>x<span class="token punctuation">.</span>next<span class="token punctuation">)</span><span class="token punctuation">{</span>\n            <span class="token keyword">if</span><span class="token punctuation">(</span>key<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n                x<span class="token punctuation">.</span>val<span class="token operator">=</span>val<span class="token punctuation">;</span>\n                <span class="token keyword">return</span><span class="token punctuation">;</span>\n            <span class="token punctuation">}</span>\n        <span class="token punctuation">}</span>\n        first<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span>val<span class="token punctuation">,</span>first<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="有序数组的二分查找"><a href="#%E6%9C%89%E5%BA%8F%E6%95%B0%E7%BB%84%E7%9A%84%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>有序数组的二分查找</h2>\n<h3 id="特点-1"><a href="#%E7%89%B9%E7%82%B9-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>特点</h3>\n<blockquote>\n<ul>\n<li>在 N 个键的有序数组中进行二分查找最多需要(lgN+1)次比较（无论是否成功）。</li>\n</ul>\n</blockquote>\n<ul>\n<li>向大小为 N 的有序数组中插入一个新的元素在最坏情况下需要访问~2N 次数组，因此向一个空符号表中插入 N 个元素在最坏情况下需要访问<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtext> </mtext><msup><mi>N</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">~N^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8141079999999999em;"></span><span class="strut bottom" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="base"><span class="mspace"> </span><span class="mord"><span class="mord mathit" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span>次数组</li>\n</ul>\n<h3 id="实现-1"><a href="#%E5%AE%9E%E7%8E%B0-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>实现</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="75207013647002100000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`public class BinarySearchST<Key extends Comparable<Key>, Value>{\n    private Key[] keys;\n    private Value[] vals;\n    private int N;\n    public BinarySearchST(int capacity){\n        keys=(Key[])new Comparable[capacity];\n        vals=(Value[])new Object[capacity];\n    }\n    public int size(){\n        return N;\n    }\n    public Value get(Key key){\n        if(isEmpty()) return null;\n        int i=rank(key);\n        if(i<N&&keys[i].compareTo(key)==0) return vals[i];\n        else return null;\n    }\n    public int rank(Key key){\n        int lo=0,hi=N-1;\n        while(lo<=hi){\n            int mid=lo+(hi-lo)/2;\n            int cmp=key.compareTo(keys[mid]);\n            if(cmp<0) hi=mid-1;\n            else if(cmp>0) lo=mid+1;\n            else return mid;\n        }\n        return lo;\n    }\n    public void put(Key key,Value val){\n        int i=rank(key);\n        if(i<N&&keys[i].compareTo(key)==0){\n            vals[i]=val; return;\n        }\n        for(int j=N;j>i;j--){\n            keys[j]=keys[j-1];\n            vals[j]=vals[j-1];\n        }\n        keys[i]=key; vals[i]=val;\n        N++;\n    }\n    public Iterable<Key> keys(Key lo,Key hi){\n        Queue<Key> q=new Queue<Key>();\n        for(int i=rank(lo);i<rank(hi);i++){\n            q.enqueue(keys[i])\n        }\n        if(contains(hi)){\n            q.enqueue(keys[rank(hi)]);\n        }\n    }\n}`, `75207013647002100000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="java"\n              >\n                <span class="gatsby-code-button-language">java</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="java"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BinarySearchST</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Key</span> <span class="token keyword">extends</span> <span class="token class-name">Comparable</span><span class="token punctuation">&lt;</span><span class="token class-name">Key</span><span class="token punctuation">></span><span class="token punctuation">,</span> <span class="token class-name">Value</span><span class="token punctuation">></span></span><span class="token punctuation">{</span>\n    <span class="token keyword">private</span> <span class="token class-name">Key</span><span class="token punctuation">[</span><span class="token punctuation">]</span> keys<span class="token punctuation">;</span>\n    <span class="token keyword">private</span> <span class="token class-name">Value</span><span class="token punctuation">[</span><span class="token punctuation">]</span> vals<span class="token punctuation">;</span>\n    <span class="token keyword">private</span> <span class="token keyword">int</span> <span class="token class-name">N</span><span class="token punctuation">;</span>\n    <span class="token keyword">public</span> <span class="token class-name">BinarySearchST</span><span class="token punctuation">(</span><span class="token keyword">int</span> capacity<span class="token punctuation">)</span><span class="token punctuation">{</span>\n        keys<span class="token operator">=</span><span class="token punctuation">(</span><span class="token class-name">Key</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">new</span> <span class="token class-name">Comparable</span><span class="token punctuation">[</span>capacity<span class="token punctuation">]</span><span class="token punctuation">;</span>\n        vals<span class="token operator">=</span><span class="token punctuation">(</span><span class="token class-name">Value</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span>capacity<span class="token punctuation">]</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token keyword">return</span> <span class="token class-name">N</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token class-name">Value</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Key</span> key<span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n        <span class="token keyword">int</span> i<span class="token operator">=</span><span class="token function">rank</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">if</span><span class="token punctuation">(</span>i<span class="token operator">&lt;</span><span class="token class-name">N</span><span class="token operator">&amp;&amp;</span>keys<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> vals<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>\n        <span class="token keyword">else</span> <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">rank</span><span class="token punctuation">(</span><span class="token class-name">Key</span> key<span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token keyword">int</span> lo<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>hi<span class="token operator">=</span><span class="token class-name">N</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>\n        <span class="token keyword">while</span><span class="token punctuation">(</span>lo<span class="token operator">&lt;=</span>hi<span class="token punctuation">)</span><span class="token punctuation">{</span>\n            <span class="token keyword">int</span> mid<span class="token operator">=</span>lo<span class="token operator">+</span><span class="token punctuation">(</span>hi<span class="token operator">-</span>lo<span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>\n            <span class="token keyword">int</span> cmp<span class="token operator">=</span>key<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>keys<span class="token punctuation">[</span>mid<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n            <span class="token keyword">if</span><span class="token punctuation">(</span>cmp<span class="token operator">&lt;</span><span class="token number">0</span><span class="token punctuation">)</span> hi<span class="token operator">=</span>mid<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>\n            <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>cmp<span class="token operator">></span><span class="token number">0</span><span class="token punctuation">)</span> lo<span class="token operator">=</span>mid<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>\n            <span class="token keyword">else</span> <span class="token keyword">return</span> mid<span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n        <span class="token keyword">return</span> lo<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token class-name">Key</span> key<span class="token punctuation">,</span><span class="token class-name">Value</span> val<span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token keyword">int</span> i<span class="token operator">=</span><span class="token function">rank</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">if</span><span class="token punctuation">(</span>i<span class="token operator">&lt;</span><span class="token class-name">N</span><span class="token operator">&amp;&amp;</span>keys<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n            vals<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span>val<span class="token punctuation">;</span> <span class="token keyword">return</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span><span class="token class-name">N</span><span class="token punctuation">;</span>j<span class="token operator">></span>i<span class="token punctuation">;</span>j<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n            keys<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">=</span>keys<span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n            vals<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">=</span>vals<span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n        keys<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span>key<span class="token punctuation">;</span> vals<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span>val<span class="token punctuation">;</span>\n        <span class="token class-name">N</span><span class="token operator">++</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token class-name">Iterable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Key</span><span class="token punctuation">></span></span> <span class="token function">keys</span><span class="token punctuation">(</span><span class="token class-name">Key</span> lo<span class="token punctuation">,</span><span class="token class-name">Key</span> hi<span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token class-name">Queue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Key</span><span class="token punctuation">></span></span> q<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Queue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Key</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token function">rank</span><span class="token punctuation">(</span>lo<span class="token punctuation">)</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token function">rank</span><span class="token punctuation">(</span>hi<span class="token punctuation">)</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n            q<span class="token punctuation">.</span><span class="token function">enqueue</span><span class="token punctuation">(</span>keys<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>\n        <span class="token punctuation">}</span>\n        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">contains</span><span class="token punctuation">(</span>hi<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n            q<span class="token punctuation">.</span><span class="token function">enqueue</span><span class="token punctuation">(</span>keys<span class="token punctuation">[</span><span class="token function">rank</span><span class="token punctuation">(</span>hi<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="预览"><a href="#%E9%A2%84%E8%A7%88" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>预览</h2>\n<h3 id="比较"><a href="#%E6%AF%94%E8%BE%83" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>比较</h3>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180320172415-9ebdd0782560899ff37a446cbe177292-3c344.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 41.569086651053865%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAABI0lEQVQY00WR2Y6CQBBF+f9P4QXMhCUGZAsCIqtRwybLQPyNOdIzmXog1X3rLtVI27YNw/B6vZZl+d6rqqq6rsuyDMPQcRzXdU+n0/P5nOdZTIovR2maJsMwZFm2bRtaFEWMJkkC+Xq9ep7HTVEUWZZxtCyLG6Db7QZRwtD3fZjAl8sl3AuMiePxqKoq5kAcicAYun3fd133Ia/rihjTJHk8HgTGn/BMkwihIAjO5zMD0IDg/Md+v99cARABMloCy/PcNE10abinURTlcDjQYNu27a9zmqbI80WCDe/3O85s+LUX/nEcY07DzuwvXu5DZo5ITdOM44hJvJd4IZx1XWdzocvR+Cs8IErIgIk/gbx4PIKws7MX0qA08l6appGcXKz5A1IcgCt73Y97AAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180320172415" title="" data-src="/static/微信截图_20180320172415-9ebdd0782560899ff37a446cbe177292-fee1c.png" data-srcset="/static/微信截图_20180320172415-9ebdd0782560899ff37a446cbe177292-a67b7.png 200w,\n/static/微信截图_20180320172415-9ebdd0782560899ff37a446cbe177292-0b187.png 400w,\n/static/微信截图_20180320172415-9ebdd0782560899ff37a446cbe177292-fee1c.png 800w,\n/static/微信截图_20180320172415-9ebdd0782560899ff37a446cbe177292-3c344.png 854w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h2 id="二叉查找树"><a href="#%E4%BA%8C%E5%8F%89%E6%9F%A5%E6%89%BE%E6%A0%91" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>二叉查找树</h2>\n<h3 id="思路"><a href="#%E6%80%9D%E8%B7%AF" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>思路</h3>\n<blockquote>\n<p>使用每个结点含有两个链接的二叉查找树高效实现符号表。</p>\n</blockquote>\n<h3 id="特点-2"><a href="#%E7%89%B9%E7%82%B9-2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>特点</h3>\n<p>![](./微信截图_20180320182015.png %}{% qnimg 微信截图_20180321182858.png)</p>\n<blockquote>\n<ul>\n<li>在由 N 个随机键构造的二叉查找树中，查找命中平均所需的比较次数为~2lnN（约 1.39lgN）。</li>\n</ul>\n</blockquote>\n<ul>\n<li>在由 N 个随机键构造的二叉查找树中插入和查找未命中平均所需的比较次数为~2lnN（约 1.39lgN）。</li>\n<li>虽然查找命中比二分查找高约 39%，但是插入操作访问数组的次数是线性级别的。</li>\n<li>在一颗二叉查找树中，所有操作在最坏情况下所需的时间都和树的高度成正比。</li>\n</ul>\n<h3 id="实现-2"><a href="#%E5%AE%9E%E7%8E%B0-2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>实现</h3>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180321174624-c3264e5cdc92b7b49b24463192dfdad0-9e167.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 538px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 121.18959107806691%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAIAAAB1KUohAAAACXBIWXMAAAsSAAALEgHS3X78AAACK0lEQVQ4y22U2a6CQBBE5/+/TaMPGuO+IeKGCyouoPdA3bQTtB8IzHR3VfWCWy6XURQ9Ho8kSd6evV4vnsfjcbFY6IqTLMviOMZZPi5N0+v1er/fcXp/Gee32w3vy+Uym8222+1ms+H9P9iHElrFQHs+n+12+3Q6AUMicyuQSc9bGIb7/d4Im3W7XTB1nue5j+GM3mg0+maBt2WH7fl8PhwOCNStgxLEFAACCn9qxhA8Ho/xgTxRRTDXXIAAPa5V4WazicggCIwhbgQMBgNaY6mdVWW325GCTtCY9XpNpN88ZeEcN/t0cBBV9PR6Pe5WqxUv6sfP+hNCIYpgXfPEezgc0g/q0Wq1DCEvTbDz+TwqjVuuXFaaUigSCoaJTsinpXEbloYiZXSqJE60ajqd0gmyQsHXpixg9Pt9xvmj2ZSAqWrDql6vk/5bM2jEWzmcPzEQ5oLprXTbN2hCAQlwKcYTV745JYxOUhjD1CZpimDEhOADQd5B+vSZLMR3Oh064W+FqsUhpKg26vAhRYGsYtRqNUrFGOFEqdTGilrcGM9Go8EgxKU5BSSlaWPZLfE08ugSHZApGIJB4qTosxZNu4qfRsIPBpBRVxZ4aUN4Op+YEsFZS2NsVd7JZIJU2IEflFasJCYErRdjQM1tNvSTUs1Apmy0A9qFZo0XMZzqX4Ufd98/I0xZNIWfVglWmn9ukqUQ+H/BKrsGJfhoVJl2aotUdOpdPzkMfMD/AHqnZ6DXI38TAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180321174624" title="" data-src="/static/微信截图_20180321174624-c3264e5cdc92b7b49b24463192dfdad0-9e167.png" data-srcset="/static/微信截图_20180321174624-c3264e5cdc92b7b49b24463192dfdad0-bd273.png 200w,\n/static/微信截图_20180321174624-c3264e5cdc92b7b49b24463192dfdad0-7e34d.png 400w,\n/static/微信截图_20180321174624-c3264e5cdc92b7b49b24463192dfdad0-9e167.png 538w" data-sizes="(max-width: 538px) 100vw, 538px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180321174731-74faa5f59dc8ab19fb4224f8ccdfc075-4e69e.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 401px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 192.51870324189528%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAnCAIAAACABf9ZAAAACXBIWXMAAAsSAAALEgHS3X78AAAEIklEQVRIx23V104sSwwF0P7/P+AFhEQSUQiECBI5ipxzzuEcwiXHu7o9pxlG1ENNTXdte9vedievr6+fn59fX1/Pz8/39/f//Vt/f64/2Sp5mDw+Pl5dXa2trc3NzU1NTTksLCzMz88HwCv79fU1u/EkR3qYPD09HR4e9vf3j46O2nt6eux9fX2c397eunFzc3NwcNDV1QXpSTE+eXh4wBztl5cXLPx1OD4+Xl9f393dXVlZGR4enp6ebm5uxuv8/Jy5bzBj4cRC8uLiYmdnp729vbGxkf+lpSV/Nzc3WaypqRkZGcHftQL47e2N57u7Oz75qa2t3djYODs7iwwtLi6ywi0WTOzt7Ykid568v79/fHwwLHiwiYkJMQMfHR2JH1j+xsfHwba2tgBQOz09jchTcOCVCv/Ly8uWlpbwg8Xk5KSHwmYIZ0kdGhpqaGiQY2GmtCHtnCMPLCt2gdnLyso4Zwj5pqYmubAPDg5+xwzMuQPn19kKVqwo+8nJiVx0d3fzOTY2hldvb2/kLOEQ5jFbPEeebrLldVRB/JwHI+lwKHgOV/ltSzGUJxLL7f7+vrL7K08hrO9sx0+AQ4/utba21tfXy9b29rb0xgXOUYhrP8Aw6IlNSKurqxEtkRE8KwMDAyLColRhwYQ9r+mJqmSFN2JUG0WemZlR55ztD22HtuTMLlow9VCe2dnZuro6YHXO81/aklEqjaHuqGIO6UBqBFdZWbm8vBxV+AXMoWjVCaCjo0N4NADZ2dkJrLEj7X9/W0lkGDfSlRucwaRN/NjyGWqR5+JUfScMHlgldLzysMIESR1ni2cReSjbJeSTkBFiMbqiq+VcM8AAUFXUlnW2ipOXBDfLwVWqoCQko6Ud+GQl3v5S5xgmuRjtzvxDOhtgwCGH4mGagt0L9YcM2OYc0i5n/OeyLZnEha5Sai1pGCmYp0IwDIC5Va0SqsUiS0cvGLx80IMIpUqdHdgSfzRGDvgRc7AlTOWprq42McrLy9VZzWlGk4Bxjj9Ddrbkv7QludVDJKWZtIRZzT/+MfQd1EnmnCUyPiOFUrkRjWFFhVj0hCsAswEFnqUtWFiFbAs7/xRFPREWubJBuo0qt8TPaExIdxhKG+MpW/yHhmEoDG1If8mTn/gABcY1f71Ksx3VohPxSLLvQ1VVlWYmb3i5EDDnZ//WSba8Sr9VfIbC0PYO3lUAjR1DjyuHw2yF5vazVRhD+ddUSMENMToxG0LknkSp4MFw9jeRqlCY4GPihAxYAZYkfk6zFbKzIm0spp5jjLES7ZaLKVwFhgmM9rLFc2g2iWaOUodaIoQIJ7IghNBWBB+0/U0HoGUAkpfaCtIw0Q9U0dbW5rPkEyXtZpvnZFtRUeFt9GmiK5TKAA2eocGQEbaRHgNY29BZSDhS7eb/eyghxTnOyrUAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180321174731" title="" data-src="/static/微信截图_20180321174731-74faa5f59dc8ab19fb4224f8ccdfc075-4e69e.png" data-srcset="/static/微信截图_20180321174731-74faa5f59dc8ab19fb4224f8ccdfc075-c99eb.png 200w,\n/static/微信截图_20180321174731-74faa5f59dc8ab19fb4224f8ccdfc075-66047.png 400w,\n/static/微信截图_20180321174731-74faa5f59dc8ab19fb4224f8ccdfc075-4e69e.png 401w" data-sizes="(max-width: 401px) 100vw, 401px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180321174841-95ce8c73b705c82325afcf4dbd3a6df2-7320c.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 367px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 187.19346049046322%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAlCAIAAADNzV5SAAAACXBIWXMAAAsSAAALEgHS3X78AAADfElEQVRIx13V51LcQBAEYL3/I0FRBRQ552zSkeNhGzCpyp/UYk/2/NhbnbYndM+sqvf397e3N+ufxuw/Pj5sXl9fn5+ffzf2qzGbl5eXHPPWySo7Nj8/PzIysrCwsLi4aF1dXQ3mZ2MFz16/rUpYLyYmJqanp8fHx0dHR+GHh4dt/C/af8gSr478+fl5enq6tbXV6/UeHx9zTrR+vw95e3v79PTkqH2QAXusI399fUHKeXt7G5KLk5MT+Lu7u729vc3NzaurK6dLzf+kzWC4x5D90dERX8fHxzAy4uLm5ubh4SEUJn4LDrfKtrm/v+83xpE4Sri4uLi+vlZCMg/Jg7QjVVwIAp8M7YGtSuAij1w4EEeyqKItF3GWd85dXl5m3d3dpeLc3BwtZmdnV1ZWENGCg4yl/niRvIAqd3ptbQ2dQ0NDU1NTVFxfXyeBqHXNsYBTGPBzYwre2NgQCh7th4eHOzs78DY1ODGBU3n4CCXyF18hfBXv5XAbuXCWc+Q5ODggT//bxLeWDik2qNmDlIgsyfPz87Ozsx+NoY0ja6komwFYWBWK6RxVnJCzgKj2mIYt4IKvkvBXY7xEUkgbqWakMhK8J9vS5DXYv+FGbrIlg/i9xvwTF92uHEyVf/f394mpAcywSTYe1qWlJb2dgFmDL17qJvFAt7GxscnJyZmZme3GzLbBRp4gwgbZtba3/VBccD2MMNFQ7VE/ol3O/kFYTpeRyL5l230QwQRBmAHMJGVOo3mq/Yftcu95yKXhtG6hE8KloOBMaPfqa5ukTIUH7sX0Tv7Ly8vSVgvCIxgXuQ+TcztVxTLSgqjTPMlWk5AAeSaJIm4YXPAbF1WZxO5IMK9pnvvUMNrwYrasRFFUfW93wYXJzCM8tR01jMLS0sA4XzirujOcv9IVuRJR4DKxCc+5wAfgCJCcc43eNIZwyLQt2tHW7fBWqtKuXkTPCCPnq8a4I6H/y3ejtHdVes2L3J5eEEnbAXCX9ux2qH07VfkORPqIhEnXJZG4cy7RCr5sanD3OyqIOsVPk/JSwIkRcPnQVk7nclxuTEzCUFVkh/JxLZhoMUgbGcQEJmO+r8C0dZ8F3K05vA7AZCS9S4MLVzQv2C4NU3gqI1Ease4wrwUvd5VzCvFPmGP4Dx3Rj2vroGZNL375sqMgXyZr5kEJMsKCmzg3FLzIfwFL0whX5ZLghwAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180321174841" title="" data-src="/static/微信截图_20180321174841-95ce8c73b705c82325afcf4dbd3a6df2-7320c.png" data-srcset="/static/微信截图_20180321174841-95ce8c73b705c82325afcf4dbd3a6df2-3f7ac.png 200w,\n/static/微信截图_20180321174841-95ce8c73b705c82325afcf4dbd3a6df2-7320c.png 367w" data-sizes="(max-width: 367px) 100vw, 367px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180321174958-ae14f2dc3cfee5debfd91ba109d39e17-6f695.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 717px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 91.91073919107393%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAAAsSAAALEgHS3X78AAAB5UlEQVQ4y02U6ZLBUBCF7/u/kQeQX0qpoiiFCWJNgsgiY0aYT5/MLf0j7tLLOaf7cvf7/ffDfsy00PfL7PF4fJvdbreqqvjWde3Yy89Hkk4nBLAuimK/38/n8+VymSRJHMcKxhwJ5O2/WiieNQ74RVEUhuF2u93tdmVZ1mbvylRQWVzZKl6IhDPP8+v1mmXZ6XQiBfUF/h18uVw4ZdM0DQEsJIRPh1EH/MRvNhuQK6nDtd/vB0HAKSnICkPqeBUUT1hhxhWwRdsJAEwOh0NuhgeHXjBpw+16vSYvBYgXFsd1YyZ4XHjxCRZtsnO+Wq1ms9lwOJxMJhRrOfNDG2AiwmmaSsXn80kdmiSdkeZ8Pkdm+AP+DRuceIxGI/LhDT0uSPR6vYhBkW63S1kwiqp62fZZrSIGwoRRVlLBhROEFC4QwdyPCldOXUUM+JBMAyDC4gwuyoJ8sVgMBgO+wGELC6c6YO71ehzBSt3WeKmfapI4S2cp1U4YMEg/nU6J1/QKObfCQjA4Y7Py35zYIywb+ByPR67hz6FekkSCMCJrkMhVmbWvCiOxxghX/zD8bGdmZKcvCIRbG/z5njmlILQlmCZHTaIg49HpdMbjsaR1GrfUjNyJGcJwJ+X0nvDmUJX5b4ACZf4A1oz5WLrb1mgAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180321174958" title="" data-src="/static/微信截图_20180321174958-ae14f2dc3cfee5debfd91ba109d39e17-6f695.png" data-srcset="/static/微信截图_20180321174958-ae14f2dc3cfee5debfd91ba109d39e17-8f412.png 200w,\n/static/微信截图_20180321174958-ae14f2dc3cfee5debfd91ba109d39e17-576a5.png 400w,\n/static/微信截图_20180321174958-ae14f2dc3cfee5debfd91ba109d39e17-6f695.png 717w" data-sizes="(max-width: 717px) 100vw, 717px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="58278714799577400000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`public class BST<Key extends Compareable<Key>,Value>{\n    private Node root;\n    private class Node{\n        private Key key;\n        private Value val;\n        private Node left,right;\n        int N;\n        public Node(Key key,Value val,int N){\n            this.key=key;\n            this.val=val;\n            this.N=N;\n        }\n    }\n    public int size(){\n        return size(root);\n    }\n    private int size(Node x){\n        if(x==null) return 0;\n        else return x.N;\n    }\n    public Value get(Key key){\n        return get(root,key);\n    }\n    private Value get(Node x,Key key){\n        if(x==null) return null;\n        int cmp=key.compareTo(x.key);\n        if(cmp>0) return get(x.right,key);\n        else return get(x.left,key);\n        else return x.val;\n    }\n    public void put(Key key,Value val){\n        // 查找key，找到并更新它的值，否则创建一个新结点。\n        root=put(root,key,val);\n    }\n    private Node put(Node x,Key key,Value val){\n        //如果key存在以x为根结点的子树中则更新它的值；\n        //否则将以key和val为键值对的新结点插入到该子树中。\n        if(x==null) return new Node(key,val,1);\n        int cmp=key.compareTo(x.key);\n        if(cmp<0) x.left=put(x.left,key,val);\n        else if(cmp>0) x.right=put(x.right,key,val);\n        else x.val=val;\n        x.N=size(x.left)+size(x.right)+1;\n        return x;\n    }\n    public Key min(){\n        return min(root).key;\n    }\n    private Node min(Node x){\n        if(x.left==null) return x;\n        return min(x.left);\n    }\n    public Key floor(Key key){\n        Node x=floor(root,key);\n        if(x==null) return null;\n        return x.key;\n    }\n    private Node floor(Node x,Key key){\n        /**\n        如果 key 小于根节点的 key，那么小于等于 key 的最大键节点一定在左子树中；如果 key 大于根节点的 key，只有当根节点右子树中存在小于等于 key 的节点，小于等于 key 的最大键节点才在右子树中，否则根节点就是小于等于 key 的最大键节点。\n        **/\n        if(x==null) return null;\n        int cmp=key.compareTo(x.key);\n        if(cmp==0) return x;\n        if(cmp<0) return floor(x.left,key);\n        Node t=floor(x.right,key);\n        if(t!=null) return t;\n        else return x;\n    }\n    public Key select(int k){\n        return select(root,k).key;\n    }\n    private Node select(Node x,int k){\n        // 返回排名为k的结点\n        if(x==null) return null;\n        int t=size(x.left);\n        if(t>k) return select(x.left,k);\n        if(t==k) return x;\n        if(t<k) return select(x.right,k-t-1);\n    }\n    public int rank(Key key){\n        return rank(key,root);\n    }\n    private int rank(Key key,Node x){\n        // 返回以x为根结点的子树中小于x的key的数量\n        if(x==null) return 0;\n        int cmp=key.compareTo(x.key);\n        if(cmp==0) return size(x.left);\n        else if(cmp<0) return rank(key,x.left);\n        else return rank(key,x.right)+size(x.left)+1;\n    }\n    public void deleteMin(){\n        root=deleteMin(root);\n    }\n    private Node deleteMin(Node x){\n        // 令指向最小节点的链接指向最小节点的右子树。\n        if(x.left==null) return x.right;\n        x.left=deleteMin(x.left);\n        x.N=size(x.left)+size(x.right)+1;\n        return x;\n    }\n    public delete(Key key){\n        root=delete(root,key);\n    }\n    private Node delete(Node x,Key key){\n        // 如果待删除的节点只有一个子树，那么只需要让指向待// 删除节点的链接指向唯一的子树即可；否则，让右子树// 的最小节点替换该节点。\n        if(x==null) return null;\n        int cmp=key.compareTo(x.key);\n        if(cmp<0) x.left=delete(x.left,key);\n        else if(cmp>0) x.right=delete(x.right,key);\n        else {\n            if(x.right==null) return x.left;\n            if(x.left==null) return x.right;\n            Node t=x;\n            x=min(t.right);\n            x.right=deleteMin(t.right);\n            x.left=t.left;\n        }\n        x.N=size(x.left)+size(x.right)+1;\n        return x;\n    }\n    public Iterable<Key> keys(){\n        return keys(min(),max());\n    }\n    public Iterable<Key> keys(Key lo,Key hi){\n        Queue<Key> queue=new Queue<Key>();\n        keys(root,queue,lo,hi);\n        return queue;\n    }\n    private void keys(Node x,Queue<Key> queue,Key lo,Key hi){\n        // 利用二叉查找树中序遍历的结果为有序序列的特点。\n        if(x==null) return;\n        int cmplo=lo.compareTo(x.key);\n        int cmphi=hi.compareTo(x.key);\n        // 查找左子树\n        if(cmplo<0) keys(x.left,queue,lo,hi);\n        // 查找根结点\n        if(cmplo<=0&&cmphi>=0) queue.enqueue(x.key);\n        // 查找右子树\n        if(cmphi>0) keys(x.right,queue,lo,hi);\n    }\n}`, `58278714799577400000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="java"\n              >\n                <span class="gatsby-code-button-language">java</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="java"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> BST<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Key</span> <span class="token keyword">extends</span> <span class="token class-name">Compareable</span><span class="token punctuation">&lt;</span><span class="token class-name">Key</span><span class="token punctuation">></span><span class="token punctuation">,</span><span class="token class-name">Value</span><span class="token punctuation">></span></span><span class="token punctuation">{</span>\n    <span class="token keyword">private</span> <span class="token class-name">Node</span> root<span class="token punctuation">;</span>\n    <span class="token keyword">private</span> <span class="token keyword">class</span> <span class="token class-name">Node</span><span class="token punctuation">{</span>\n        <span class="token keyword">private</span> <span class="token class-name">Key</span> key<span class="token punctuation">;</span>\n        <span class="token keyword">private</span> <span class="token class-name">Value</span> val<span class="token punctuation">;</span>\n        <span class="token keyword">private</span> <span class="token class-name">Node</span> left<span class="token punctuation">,</span>right<span class="token punctuation">;</span>\n        <span class="token keyword">int</span> <span class="token class-name">N</span><span class="token punctuation">;</span>\n        <span class="token keyword">public</span> <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token class-name">Key</span> key<span class="token punctuation">,</span><span class="token class-name">Value</span> val<span class="token punctuation">,</span><span class="token keyword">int</span> <span class="token class-name">N</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n            <span class="token keyword">this</span><span class="token punctuation">.</span>key<span class="token operator">=</span>key<span class="token punctuation">;</span>\n            <span class="token keyword">this</span><span class="token punctuation">.</span>val<span class="token operator">=</span>val<span class="token punctuation">;</span>\n            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token class-name">N</span><span class="token operator">=</span><span class="token class-name">N</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token keyword">return</span> <span class="token function">size</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">private</span> <span class="token keyword">int</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token class-name">Node</span> x<span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token operator">==</span><span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>\n        <span class="token keyword">else</span> <span class="token keyword">return</span> x<span class="token punctuation">.</span><span class="token class-name">N</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token class-name">Value</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Key</span> key<span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token keyword">return</span> <span class="token function">get</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">private</span> <span class="token class-name">Value</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Node</span> x<span class="token punctuation">,</span><span class="token class-name">Key</span> key<span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token operator">==</span><span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n        <span class="token keyword">int</span> cmp<span class="token operator">=</span>key<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">if</span><span class="token punctuation">(</span>cmp<span class="token operator">></span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">get</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>right<span class="token punctuation">,</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">else</span> <span class="token keyword">return</span> <span class="token function">get</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left<span class="token punctuation">,</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">else</span> <span class="token keyword">return</span> x<span class="token punctuation">.</span>val<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token class-name">Key</span> key<span class="token punctuation">,</span><span class="token class-name">Value</span> val<span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token comment">// 查找key，找到并更新它的值，否则创建一个新结点。</span>\n        root<span class="token operator">=</span><span class="token function">put</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span>key<span class="token punctuation">,</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">private</span> <span class="token class-name">Node</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token class-name">Node</span> x<span class="token punctuation">,</span><span class="token class-name">Key</span> key<span class="token punctuation">,</span><span class="token class-name">Value</span> val<span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token comment">//如果key存在以x为根结点的子树中则更新它的值；</span>\n        <span class="token comment">//否则将以key和val为键值对的新结点插入到该子树中。</span>\n        <span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token operator">==</span><span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span>val<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">int</span> cmp<span class="token operator">=</span>key<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">if</span><span class="token punctuation">(</span>cmp<span class="token operator">&lt;</span><span class="token number">0</span><span class="token punctuation">)</span> x<span class="token punctuation">.</span>left<span class="token operator">=</span><span class="token function">put</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left<span class="token punctuation">,</span>key<span class="token punctuation">,</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>cmp<span class="token operator">></span><span class="token number">0</span><span class="token punctuation">)</span> x<span class="token punctuation">.</span>right<span class="token operator">=</span><span class="token function">put</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>right<span class="token punctuation">,</span>key<span class="token punctuation">,</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">else</span> x<span class="token punctuation">.</span>val<span class="token operator">=</span>val<span class="token punctuation">;</span>\n        x<span class="token punctuation">.</span><span class="token class-name">N</span><span class="token operator">=</span><span class="token function">size</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token operator">+</span><span class="token function">size</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>\n        <span class="token keyword">return</span> x<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token class-name">Key</span> <span class="token function">min</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token keyword">return</span> <span class="token function">min</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">.</span>key<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">private</span> <span class="token class-name">Node</span> <span class="token function">min</span><span class="token punctuation">(</span><span class="token class-name">Node</span> x<span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left<span class="token operator">==</span><span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> x<span class="token punctuation">;</span>\n        <span class="token keyword">return</span> <span class="token function">min</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token class-name">Key</span> <span class="token function">floor</span><span class="token punctuation">(</span><span class="token class-name">Key</span> key<span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token class-name">Node</span> x<span class="token operator">=</span><span class="token function">floor</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token operator">==</span><span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n        <span class="token keyword">return</span> x<span class="token punctuation">.</span>key<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">private</span> <span class="token class-name">Node</span> <span class="token function">floor</span><span class="token punctuation">(</span><span class="token class-name">Node</span> x<span class="token punctuation">,</span><span class="token class-name">Key</span> key<span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token comment">/**\n        如果 key 小于根节点的 key，那么小于等于 key 的最大键节点一定在左子树中；如果 key 大于根节点的 key，只有当根节点右子树中存在小于等于 key 的节点，小于等于 key 的最大键节点才在右子树中，否则根节点就是小于等于 key 的最大键节点。\n        **/</span>\n        <span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token operator">==</span><span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n        <span class="token keyword">int</span> cmp<span class="token operator">=</span>key<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">if</span><span class="token punctuation">(</span>cmp<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> x<span class="token punctuation">;</span>\n        <span class="token keyword">if</span><span class="token punctuation">(</span>cmp<span class="token operator">&lt;</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">floor</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left<span class="token punctuation">,</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token class-name">Node</span> t<span class="token operator">=</span><span class="token function">floor</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>right<span class="token punctuation">,</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">if</span><span class="token punctuation">(</span>t<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> t<span class="token punctuation">;</span>\n        <span class="token keyword">else</span> <span class="token keyword">return</span> x<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token class-name">Key</span> <span class="token function">select</span><span class="token punctuation">(</span><span class="token keyword">int</span> k<span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token keyword">return</span> <span class="token function">select</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span>k<span class="token punctuation">)</span><span class="token punctuation">.</span>key<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">private</span> <span class="token class-name">Node</span> <span class="token function">select</span><span class="token punctuation">(</span><span class="token class-name">Node</span> x<span class="token punctuation">,</span><span class="token keyword">int</span> k<span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token comment">// 返回排名为k的结点</span>\n        <span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token operator">==</span><span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n        <span class="token keyword">int</span> t<span class="token operator">=</span><span class="token function">size</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">if</span><span class="token punctuation">(</span>t<span class="token operator">></span>k<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">select</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left<span class="token punctuation">,</span>k<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">if</span><span class="token punctuation">(</span>t<span class="token operator">==</span>k<span class="token punctuation">)</span> <span class="token keyword">return</span> x<span class="token punctuation">;</span>\n        <span class="token keyword">if</span><span class="token punctuation">(</span>t<span class="token operator">&lt;</span>k<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">select</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>right<span class="token punctuation">,</span>k<span class="token operator">-</span>t<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">rank</span><span class="token punctuation">(</span><span class="token class-name">Key</span> key<span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token keyword">return</span> <span class="token function">rank</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">private</span> <span class="token keyword">int</span> <span class="token function">rank</span><span class="token punctuation">(</span><span class="token class-name">Key</span> key<span class="token punctuation">,</span><span class="token class-name">Node</span> x<span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token comment">// 返回以x为根结点的子树中小于x的key的数量</span>\n        <span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token operator">==</span><span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>\n        <span class="token keyword">int</span> cmp<span class="token operator">=</span>key<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">if</span><span class="token punctuation">(</span>cmp<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">size</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>cmp<span class="token operator">&lt;</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">rank</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span>x<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">else</span> <span class="token keyword">return</span> <span class="token function">rank</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span>x<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token operator">+</span><span class="token function">size</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">deleteMin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n        root<span class="token operator">=</span><span class="token function">deleteMin</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">private</span> <span class="token class-name">Node</span> <span class="token function">deleteMin</span><span class="token punctuation">(</span><span class="token class-name">Node</span> x<span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token comment">// 令指向最小节点的链接指向最小节点的右子树。</span>\n        <span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left<span class="token operator">==</span><span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> x<span class="token punctuation">.</span>right<span class="token punctuation">;</span>\n        x<span class="token punctuation">.</span>left<span class="token operator">=</span><span class="token function">deleteMin</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        x<span class="token punctuation">.</span><span class="token class-name">N</span><span class="token operator">=</span><span class="token function">size</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token operator">+</span><span class="token function">size</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>\n        <span class="token keyword">return</span> x<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">Key</span> key<span class="token punctuation">)</span><span class="token punctuation">{</span>\n        root<span class="token operator">=</span><span class="token function">delete</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">private</span> <span class="token class-name">Node</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">Node</span> x<span class="token punctuation">,</span><span class="token class-name">Key</span> key<span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token comment">// 如果待删除的节点只有一个子树，那么只需要让指向待// 删除节点的链接指向唯一的子树即可；否则，让右子树// 的最小节点替换该节点。</span>\n        <span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token operator">==</span><span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n        <span class="token keyword">int</span> cmp<span class="token operator">=</span>key<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">if</span><span class="token punctuation">(</span>cmp<span class="token operator">&lt;</span><span class="token number">0</span><span class="token punctuation">)</span> x<span class="token punctuation">.</span>left<span class="token operator">=</span><span class="token function">delete</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left<span class="token punctuation">,</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>cmp<span class="token operator">></span><span class="token number">0</span><span class="token punctuation">)</span> x<span class="token punctuation">.</span>right<span class="token operator">=</span><span class="token function">delete</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>right<span class="token punctuation">,</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">else</span> <span class="token punctuation">{</span>\n            <span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>right<span class="token operator">==</span><span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> x<span class="token punctuation">.</span>left<span class="token punctuation">;</span>\n            <span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left<span class="token operator">==</span><span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> x<span class="token punctuation">.</span>right<span class="token punctuation">;</span>\n            <span class="token class-name">Node</span> t<span class="token operator">=</span>x<span class="token punctuation">;</span>\n            x<span class="token operator">=</span><span class="token function">min</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span>\n            x<span class="token punctuation">.</span>right<span class="token operator">=</span><span class="token function">deleteMin</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span>\n            x<span class="token punctuation">.</span>left<span class="token operator">=</span>t<span class="token punctuation">.</span>left<span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n        x<span class="token punctuation">.</span><span class="token class-name">N</span><span class="token operator">=</span><span class="token function">size</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token operator">+</span><span class="token function">size</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>\n        <span class="token keyword">return</span> x<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token class-name">Iterable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Key</span><span class="token punctuation">></span></span> <span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token keyword">return</span> <span class="token function">keys</span><span class="token punctuation">(</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token class-name">Iterable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Key</span><span class="token punctuation">></span></span> <span class="token function">keys</span><span class="token punctuation">(</span><span class="token class-name">Key</span> lo<span class="token punctuation">,</span><span class="token class-name">Key</span> hi<span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token class-name">Queue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Key</span><span class="token punctuation">></span></span> queue<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Queue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Key</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token function">keys</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span>queue<span class="token punctuation">,</span>lo<span class="token punctuation">,</span>hi<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">return</span> queue<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">keys</span><span class="token punctuation">(</span><span class="token class-name">Node</span> x<span class="token punctuation">,</span><span class="token class-name">Queue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Key</span><span class="token punctuation">></span></span> queue<span class="token punctuation">,</span><span class="token class-name">Key</span> lo<span class="token punctuation">,</span><span class="token class-name">Key</span> hi<span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token comment">// 利用二叉查找树中序遍历的结果为有序序列的特点。</span>\n        <span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token operator">==</span><span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>\n        <span class="token keyword">int</span> cmplo<span class="token operator">=</span>lo<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">int</span> cmphi<span class="token operator">=</span>hi<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token comment">// 查找左子树</span>\n        <span class="token keyword">if</span><span class="token punctuation">(</span>cmplo<span class="token operator">&lt;</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token function">keys</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left<span class="token punctuation">,</span>queue<span class="token punctuation">,</span>lo<span class="token punctuation">,</span>hi<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token comment">// 查找根结点</span>\n        <span class="token keyword">if</span><span class="token punctuation">(</span>cmplo<span class="token operator">&lt;=</span><span class="token number">0</span><span class="token operator">&amp;&amp;</span>cmphi<span class="token operator">>=</span><span class="token number">0</span><span class="token punctuation">)</span> queue<span class="token punctuation">.</span><span class="token function">enqueue</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token comment">// 查找右子树</span>\n        <span class="token keyword">if</span><span class="token punctuation">(</span>cmphi<span class="token operator">></span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token function">keys</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>right<span class="token punctuation">,</span>queue<span class="token punctuation">,</span>lo<span class="token punctuation">,</span>hi<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="平衡查找树"><a href="#%E5%B9%B3%E8%A1%A1%E6%9F%A5%E6%89%BE%E6%A0%91" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>平衡查找树</h2>\n<h3 id="思路-1"><a href="#%E6%80%9D%E8%B7%AF-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>思路</h3>\n<blockquote>\n<p>保证所有查找都能在~lgN 次比较内结束，为了保证树的平衡性，我们允许树中的一个结点保存多个键。</p>\n</blockquote>\n<h3 id="特点-3"><a href="#%E7%89%B9%E7%82%B9-3" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>特点</h3>\n<blockquote>\n<ul>\n<li>一颗完美平衡的 2-3 查找树的所有空链接到根节点的距离应该是相同的。</li>\n</ul>\n</blockquote>\n<ul>\n<li>2-3 查找树插入操作的变换都是局部的，除了相关的节点和链接之外不必修改或者检查树的其它部分，而这些局部变换不会影响树的全局有序性和平衡性。</li>\n<li>2-3 查找树的查找和插入操作复杂度和插入顺序 无关 ，在最坏的情况下查找和插入操作访问的节点必然不超过 logN 个，含有 10 亿个节点的 2-3 查找树最多只需要访问 30 个节点就能进行任意的查找和插入操作。</li>\n<li>在一颗大小为 N 的 2-3 树中，查找和插入操作访问的结点必然不超过 lgN 个。</li>\n</ul>\n<h3 id="实现-3"><a href="#%E5%AE%9E%E7%8E%B0-3" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>实现</h3>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180322152831-3d2fdd5bd1c9a7270ed2c6ab6ff079a2-283a0.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 704px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 70.0284090909091%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsSAAALEgHS3X78AAABbElEQVQoz22Si46CUAxE+f+vI8GEl5GAPBQRRHmjsmcpe1XcJpLYzkyn7dWmaSqKIo7jJEnGcZy+guRhDjACeD6fUtL4nU6n/X4POU3T3W53PB7v97uUizlgep7nOA78rus+yI/Hg/+3242a67poKflxDgGUZRlFEW2yLHuRKZzP581mQw2EZVl0W5lHGt3tdgvANM0wDGH9kjEJDc/0TOcIgoCG5IdhAIBVGoIBwHRI86WkiTAyYo8vTWzb1nWdOdu2pQpTMpRkzJdtAjPUMNY0DX1Q7fte2kpcLhfDMACgjqKUFtv4ZAw6VFWFC7Vt5UtWBQbP/EV6mfk9oKlL/Bsy3ce24VyvVzxTeL+kulld1wxMQ5DYlteiqTLXk31Q/n5qGGYvsi0Ai21w7J19MBKXyPNcNiyK5KGRZFROCMb3fQXQUMItSmKMr+xZHPJ4eDPw/b/gqa5PpQ7G5PBBsF5OQIY+OGIo8qsr/AAbNSKu9Q2lDgAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180322152831" title="" data-src="/static/微信截图_20180322152831-3d2fdd5bd1c9a7270ed2c6ab6ff079a2-283a0.png" data-srcset="/static/微信截图_20180322152831-3d2fdd5bd1c9a7270ed2c6ab6ff079a2-491a1.png 200w,\n/static/微信截图_20180322152831-3d2fdd5bd1c9a7270ed2c6ab6ff079a2-19d07.png 400w,\n/static/微信截图_20180322152831-3d2fdd5bd1c9a7270ed2c6ab6ff079a2-283a0.png 704w" data-sizes="(max-width: 704px) 100vw, 704px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180322153304-9c74a605193a26dc750e1ceb4ea4a472-8d9bd.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 308px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 109.09090909090911%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAIAAABPIytRAAAACXBIWXMAAAsSAAALEgHS3X78AAAB6klEQVQ4y42U127CQBBF+f+/QeKNJoqE6U0U0QUGBAhTjHEwEHKyE4xJIHAfVuPdvTN3ytp3Pp8Nw9jv94fD4XK5fCpc3oPPsiy/318oFHRd95JzuVwwGHxBdi0kfCgsFotOp9NoNJrNJnLY/48soebzuaZp1Wq1XC6fTic5hrzZbI7H44vI2+1WVyCmaZriFBpabNt+WIhvsuM4HItCrlIFEu73+8QnLKulwNHnFTcyNFsBg5i4yGQyxBe/fDoKf8X73Aq7LllxNJ1OZ7OZobBcLpFAXqvVCoMdfN3l7EJc0Hntilgsxkou6XQ6m80mk0n8Pia7WqRzb/VZWg2okFSYEmAgQTL/ld0dWThUZbfbeRuDTRVleJ8OCccSYTgcUi18SVXEKbY7OXdkuSdMURsOhyuVSr1ex0aI+JUSeEX99Nn1LWSmOp/P12o1mTBWGSRs76j7vC9JVjmmmUy76JIqisEdMZ62ChA2FAq1Wi1U8FQSiUQgECgWiwzMZDKhBU8nDDAJkEulErPBYEBut9upVIpauJV/GpkI6/XaVCAONmqZUD7v+sy4jsdjdhldklkp8IzImcyxe70eBiPZ7XaxeXA3MjkgBj4/EAo7GAxQOBqNyJB9bkciEX4SPLVoNIr+eDz+QvY7+AKX/+x8ezovAwAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180322153304" title="" data-src="/static/微信截图_20180322153304-9c74a605193a26dc750e1ceb4ea4a472-8d9bd.png" data-srcset="/static/微信截图_20180322153304-9c74a605193a26dc750e1ceb4ea4a472-b87a4.png 200w,\n/static/微信截图_20180322153304-9c74a605193a26dc750e1ceb4ea4a472-8d9bd.png 308w" data-sizes="(max-width: 308px) 100vw, 308px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180322153609-813e9ec2993be72fab1b20c4b75d0930-212ec.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 731px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 61.96990424076607%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAABU0lEQVQoz02S6Y6DMAyEef/HQ4AKBXW5t4K23LCUYz/iNsI/LId4PDMOxjzPf9+QelYxTVNd1xT3+71t22VZns/nMAx933ddR6Y23u+3ICk0eBxHwGSO67pS0M2UMAzLsnRd1zTNKIo+YABnsCCZTU1GQlVVFICv1ysFbQezXNOt9Qu4V3G2g3gmJknyo4Jxxhmj60mFyMYtNT4Bv16vOI4hv91uB5hrVKGZJsnCzHeYRVfTNPRwxKfjOEzZ951Og76iKFgG1ywjyzJaxRJsWo6Qg/d937Is27bzPD8WxgUjH48HeISh5wwWLVjgO6+FZ9ZGpv/wLM/A4fcbQghAcqOCWdDiln5kw/pZGNtjqrwEU3hbwYsuGkDiDqkIpo1ZDD3AXPAVzdu2yWsLQN5TPxVSTRWXy0X4DQQzhgw5zqUm9A/DbjliGDtBEHieB3OaplD+A6pwp8mHhsmyAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180322153609" title="" data-src="/static/微信截图_20180322153609-813e9ec2993be72fab1b20c4b75d0930-212ec.png" data-srcset="/static/微信截图_20180322153609-813e9ec2993be72fab1b20c4b75d0930-8e534.png 200w,\n/static/微信截图_20180322153609-813e9ec2993be72fab1b20c4b75d0930-fd412.png 400w,\n/static/微信截图_20180322153609-813e9ec2993be72fab1b20c4b75d0930-212ec.png 731w" data-sizes="(max-width: 731px) 100vw, 731px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180322160823-cc7681258ebef4b78b86aa8622ea3147-a2e9a.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 687px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 95.0509461426492%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAIAAAAf7rriAAAACXBIWXMAAAsSAAALEgHS3X78AAACCklEQVQ4y1XT61JaQRAE4PP+j2b5B5QSJAoBuQmIEu6I5jvbJJVMFVt7dqZ7ei5Up9Pp7e1tuVx+fX19fn4eDofz+Xw8Hne7HZfTy/F/2+/3ea/8Pj4+fhQbjUZ8PieTyXw+B/4bdyq2L7bdbjebjfcazIRCDgaDn8V+FcMiLgERwty3xbDU4NBTu1gsUMS3KYYisvFKsCsWyBUs4vb2ttVqdbtdxWMJ8t/iFXJ/f99oNGazmftwOKzBqWRWTOdWq9X7+7uX4F3SJGFOmcDkIFBYDT4X4+v3+3wwUZ7KvV8uF9n0gvfx8VFYlFdh9d3pdJxPT0/ikiQnA9aO19fX5+dnMVjW6zVUFVWrYgqO2yXDCJguK/D9/S0bL82C4avTH0Ohn/FFOXe6DezEq9p2u91sNsfjcb0kcYhDxg0JoBleMiqkYtJw4rFbpys4aX2YxN3dncqVbT2ihc5k9ml/XagTo3Ok1ZmF6mGv1+sXi9SsQcoWk600S8rFkFCPKisxnU59vLy8kMCHKIuZOWeWlky1Nzc3NEp+nTPTTKpIQomIluw23sxML5RjCz0aFQnXf1Vqc2oScFqdNXbJLHEp7eHhgbRsy7VmO6DVHFThptmqZgoisoJR58WqIHKCVBmJIAB802JUkWdVCHHPPxFGmHclZIuqcGSN899I2dxOcUSm4SIhnfaEeLX8BpZuKjC+S+cAAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180322160823" title="" data-src="/static/微信截图_20180322160823-cc7681258ebef4b78b86aa8622ea3147-a2e9a.png" data-srcset="/static/微信截图_20180322160823-cc7681258ebef4b78b86aa8622ea3147-b5b37.png 200w,\n/static/微信截图_20180322160823-cc7681258ebef4b78b86aa8622ea3147-68786.png 400w,\n/static/微信截图_20180322160823-cc7681258ebef4b78b86aa8622ea3147-a2e9a.png 687w" data-sizes="(max-width: 687px) 100vw, 687px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180322161403-b49941336ce895e4904967ec8149d2fe-180cb.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 780px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 91.15384615384616%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAAAsSAAALEgHS3X78AAABsElEQVQ4y33U6Y4aQQwE4Hn/FwQJBIgr3PcNy+RLV4LYlYh/DD3driq72kM1m83m83ld18/n0/OrRP0v9vv9ZDKRY5GdpCWqx+Ox2Ww6nc56vd7tdvJ6vV7wnuPx2M7lchkMBsfj8Xa7AR8Oh+Vyeb1eq5BZ5WBT4n6/BwxAczgcjkYj1NvtFle32+33+44qNTcajRRGIZovEYDz+UwHLKV6tXk6nf6U7QeS2rCE4tG1Wi1P4H0JTTWbTYyr1Up+u92mh66iQHCxWKCPLOK0FMMkwEQZnZxlCYtK9zGcq/QpK4yUTV5m81cJLDGVo3r+a1gokaG4lyDlVXaOxLgEurid+6tyFgowGF2p1kIvMrySJTWdToHrt6heq3eWa4lcmwWMDt/HI8lV/T3o5HrAuMp2C4UwjNs/kr+B0dNRfOZhVWJbQv+PEh/BZOUxRpPTEgaLixq2Ezs+gtObDGW7FUgjjc6OWYjVH8EZTHn6NMCZHwtd2Mf4v55ln0usS+SroKxyLE7zwXzsGcAAaM8Nc0vlblvzcS5j8xOsVceZjXyAFnyiCWxaNc9Ig4n09ZfwGz0mCSQISytfAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180322161403" title="" data-src="/static/微信截图_20180322161403-b49941336ce895e4904967ec8149d2fe-180cb.png" data-srcset="/static/微信截图_20180322161403-b49941336ce895e4904967ec8149d2fe-b84dc.png 200w,\n/static/微信截图_20180322161403-b49941336ce895e4904967ec8149d2fe-8d9eb.png 400w,\n/static/微信截图_20180322161403-b49941336ce895e4904967ec8149d2fe-180cb.png 780w" data-sizes="(max-width: 780px) 100vw, 780px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180322162044-2e9f66e666391070a42acd8a788e5e23-73362.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 609px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 132.01970443349754%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAaCAIAAAA44esqAAAACXBIWXMAAAsSAAALEgHS3X78AAACJ0lEQVQ4y3WU17LCMAxE/f+fBzMw9BJ6DzWUhHviBREcrh4yjqWV1tLabjabxXH89LZcLg+Hw/PbYm9an8/n8XhsLne9XtM0ZZVlWRRFi8UiAD8ej9vtpvV6ve71eop/gXHrZ7vdkjsAgyRGa3h9VcanTHzr9TqJAzD7ln0ymRBzOp3E1OEQmMVqtdrv9+z+B97tdrD7VCaNHWk4HNI/C5XB+XK5qBTBrVZLzPPKFiRfu9220GfJcMHcijn+7/e76M3n83LD8Kphys5ERqPRC2xB/X4fR5IkljgwwFQiuxqWg+/eVGGz2Zjj56im02m322Xa6nE+Z9xkBdzpdKrV6vF4LJ6ZfXFhAYbs9FU7zmSEMQm6rWP/bBg6pdVfDRMrwHQCYiyKSLxKhwToCwVgp51PZf4hxt2o1Wq0rVyWLARwYKZF2EueRmPvjbImfTXMckGbc30uhoEpjnqazSa+Im27VaSgOBJuNBohbWmbK2lqD4Ys2lIxisjByieFLb0FSNM2Rmq0YLxc5o0VMyAl/eT7U2GJN/CVSkVvi7OuoI3IG+cpKxQ61OdE4Lk8HJsj5PK0O8hDUX6GrNuEwY519jaXesM3GAzwgadysdvp2xAmxYlhIpKws04yffDUgYvSy6WFrofGxmPCY4QinE2CPvOAoR57aIM3lOyU5YuKGerXfYYVuoUPbr4UZ4fngaQ0QleAQ7FgX9N1gRKkQeEhNvPG/Mr3HPsDt6HnYouKYlcAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180322162044" title="" data-src="/static/微信截图_20180322162044-2e9f66e666391070a42acd8a788e5e23-73362.png" data-srcset="/static/微信截图_20180322162044-2e9f66e666391070a42acd8a788e5e23-06e0b.png 200w,\n/static/微信截图_20180322162044-2e9f66e666391070a42acd8a788e5e23-70531.png 400w,\n/static/微信截图_20180322162044-2e9f66e666391070a42acd8a788e5e23-73362.png 609w" data-sizes="(max-width: 609px) 100vw, 609px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h2 id="红黑二叉查找树"><a href="#%E7%BA%A2%E9%BB%91%E4%BA%8C%E5%8F%89%E6%9F%A5%E6%89%BE%E6%A0%91" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>红黑二叉查找树</h2>\n<h3 id="思路-2"><a href="#%E6%80%9D%E8%B7%AF-2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>思路</h3>\n<blockquote>\n<p>2-3 查找树需要用到 2- 节点和 3- 节点，红黑树使用红链接来实现 3- 节点。指向一个节点的链接颜色如果为红色，那么这个节点和上层节点表示的是一个 3- 节点，而黑色则是普通链接。</p>\n</blockquote>\n<h3 id="特点-4"><a href="#%E7%89%B9%E7%82%B9-4" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>特点</h3>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180322181626-b53255fd2f68d5a7ac1ad921d1da5a36-c84fc.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 685px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 25.547445255474454%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsSAAALEgHS3X78AAAAyUlEQVQY0yWQ16qFMBRE/f//8skHxd7F7rUXBDtnXR1ImGynxAj7vh/HcZ7nfd/XdcG3bauqKsuyuq7btu267u8Fc8Tbi48ILAwokiRBHUVR0zTzPLP7vm+apud50zSt6+o4jqqqlmXleT6O47+573td19EhCoLAtm1Zlpdl4ei8YMjXoiggiqJIkkSBKIpMBNd1vzxAz9cGJwU/HL9hGN+EGk3Tvp0ggds/z9O8GIYhDEP8cRxz1bIsKSGdJ6CHY5qmZPEQ35//AL9DC6AaL3vIAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180322181626" title="" data-src="/static/微信截图_20180322181626-b53255fd2f68d5a7ac1ad921d1da5a36-c84fc.png" data-srcset="/static/微信截图_20180322181626-b53255fd2f68d5a7ac1ad921d1da5a36-18514.png 200w,\n/static/微信截图_20180322181626-b53255fd2f68d5a7ac1ad921d1da5a36-82fbc.png 400w,\n/static/微信截图_20180322181626-b53255fd2f68d5a7ac1ad921d1da5a36-c84fc.png 685w" data-sizes="(max-width: 685px) 100vw, 685px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180323173023-9187be04050ffe82438503b4aae96794-6ec11.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 42.43542435424354%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAAA/ElEQVQY0y2QxxKDMAxE/f8/xw0GhpKhBULvHfJiZQ8aWdJqV1bHcWRZVtd1GIZxHL81yrKkSJLnOXUpRlH00nBdl4HnedQ8z1VVQU7TVJKiKGzbJrZtyxAbpe44jmEYkMmpoKoejfu+2dL3/TAMcIg8kdq2jWQcx2ma4LBrWRb4xJ/yrbHvO5wkSXALx/d9dDzPC4Lgo4ERnGPYsizTNOmu66oQwTAZ5KZpmEOn6zqmiVRwKHWUJUGf4nmeijeC0sAbBBbhdte4rmvUkIs4gVMZIP5sy3qhyXnSFpDDETJggCLD/5uxwSV4xidt/DBNWyKQP5cPZ0BkiPzUF10Rv+t2H0McAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180323173023" title="" data-src="/static/微信截图_20180323173023-9187be04050ffe82438503b4aae96794-fee1c.png" data-srcset="/static/微信截图_20180323173023-9187be04050ffe82438503b4aae96794-a67b7.png 200w,\n/static/微信截图_20180323173023-9187be04050ffe82438503b4aae96794-0b187.png 400w,\n/static/微信截图_20180323173023-9187be04050ffe82438503b4aae96794-fee1c.png 800w,\n/static/微信截图_20180323173023-9187be04050ffe82438503b4aae96794-6ec11.png 813w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<blockquote>\n<ul>\n<li>红链接都为左链接；</li>\n</ul>\n</blockquote>\n<ul>\n<li>完美黑色平衡，即任意空链接到根节点的路径上的黑链接数量相同。</li>\n<li>没有任何一个结点同时和两条红链接相连。</li>\n<li>画红黑树时可以将红链接画平。</li>\n<li>所有基于红黑树的符号表的实现都能保证操作的运行时间为对数级别（范围查找除外，它所需的时间和返回的键的数量成正比）。</li>\n<li>一颗大小为 N 的红黑树的高度不会超过 2lgN；</li>\n<li>一颗大小为 N 的红黑树中，根结点到任意结点的平均路径长度为~1.00lgN。</li>\n</ul>\n<h3 id="红黑树的结点表示"><a href="#%E7%BA%A2%E9%BB%91%E6%A0%91%E7%9A%84%E7%BB%93%E7%82%B9%E8%A1%A8%E7%A4%BA" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>红黑树的结点表示</h3>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180323133312-df21032d8f69ea0cc55677c76b3c8a1e-230f0.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 408px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 26.96078431372549%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsSAAALEgHS3X78AAAA00lEQVQY0z2P5wqEQAyEff9XEgQbiIKi2LAgKliwYd31VLjRw5sfIRn2S2aZfd+naeq6ru/7cRzrup7n+TgO+DCLoljXFQ+WZSGEwET9vGK2bbMsSxRFlmUlSTJNE1vatjUMI4qipmkopQDSNPU8j+d5VVVt29Y0rSxLBkewPkkS3/fRDMMATFGUOI4xVlUVvpJlmeM4QRDQgMTVGz7PExmu60Jgx3GCIHBdF2nhZ1kGAM4/PBpg9NENg8SMmuc57sPVdR03ASMhIuCrYMgjvET9jV8PVw9RC2ddfwAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180323133312" title="" data-src="/static/微信截图_20180323133312-df21032d8f69ea0cc55677c76b3c8a1e-230f0.png" data-srcset="/static/微信截图_20180323133312-df21032d8f69ea0cc55677c76b3c8a1e-132f8.png 200w,\n/static/微信截图_20180323133312-df21032d8f69ea0cc55677c76b3c8a1e-274bb.png 400w,\n/static/微信截图_20180323133312-df21032d8f69ea0cc55677c76b3c8a1e-230f0.png 408w" data-sizes="(max-width: 408px) 100vw, 408px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="47591021837775190000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`public class RedBlackBST<Key extends Comparable<Key>,Value>{\n    private Node root;\n    private static final boolean RED = true;\n    private static final boolean BLACK = false;\n\n    private class Node{\n        Key key;\n        Value val;\n        int N;\n        boolean color;\n        Node left,right;\n    }\n\n    private boolean isRed(Node x){\n        if(x==null) return false;\n        return x.color == RED;\n    }\n}`, `47591021837775190000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="java"\n              >\n                <span class="gatsby-code-button-language">java</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="java"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RedBlackBST</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Key</span> <span class="token keyword">extends</span> <span class="token class-name">Comparable</span><span class="token punctuation">&lt;</span><span class="token class-name">Key</span><span class="token punctuation">></span><span class="token punctuation">,</span><span class="token class-name">Value</span><span class="token punctuation">></span></span><span class="token punctuation">{</span>\n    <span class="token keyword">private</span> <span class="token class-name">Node</span> root<span class="token punctuation">;</span>\n    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">boolean</span> RED <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>\n    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">boolean</span> BLACK <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">private</span> <span class="token keyword">class</span> <span class="token class-name">Node</span><span class="token punctuation">{</span>\n        <span class="token class-name">Key</span> key<span class="token punctuation">;</span>\n        <span class="token class-name">Value</span> val<span class="token punctuation">;</span>\n        <span class="token keyword">int</span> <span class="token class-name">N</span><span class="token punctuation">;</span>\n        <span class="token keyword">boolean</span> color<span class="token punctuation">;</span>\n        <span class="token class-name">Node</span> left<span class="token punctuation">,</span>right<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">private</span> <span class="token keyword">boolean</span> <span class="token function">isRed</span><span class="token punctuation">(</span><span class="token class-name">Node</span> x<span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token operator">==</span><span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>\n        <span class="token keyword">return</span> x<span class="token punctuation">.</span>color <span class="token operator">==</span> RED<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="左旋转"><a href="#%E5%B7%A6%E6%97%8B%E8%BD%AC" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>左旋转</h3>\n<blockquote>\n<p>因为合法的红链接都为左链接，如果出现右链接为红链接，那么就需要进行左旋转操作。</p>\n</blockquote>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180323151041-219a9a1c72065540d35554530cad5978-a3cb3.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 336px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 164.28571428571428%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAhCAIAAABWXBxEAAAACXBIWXMAAAsSAAALEgHS3X78AAADh0lEQVQ4y33V504jSxAFYL//SyAEkpEQIgqhBUywSCLnJUeTWcKSwWY/T3nHYa9u/7B6uiucc6q6nLm/v394ePj6+ioWi9/f335jXyqVfNp/fn5+fHzYOCkmy3ncZn4nKz7iNL0+Pz8fHh4eGRmZm5sbGhrq6+ubn5+fnp4eHBy8vLysOD89PYXz3d3d2dmZjburq6vt7e1sNtvU1LSystLc3NzR0dHf3z86Otra2rq+vl52fn19TZ0fHx85bGxs7O7uBubr6+v9/X2BDg8PRby4uLC/ubnhUnZ+SlYpWeEwPj4uSUtLy9TU1O3tLWjCcU6ppqvs7DoUos3Ozs7JyYkQR0dHvb29YKONPLNUxTRE5uXlhbPd29ubPfFpG3f2S0tLq6urGLoq/V3VzHwCNlP8fyXL5/Pzc6FQUEVGW1tbVCDn+/t7rX8ZNn+AYdvc3FxYWKAH5YDHE2cOZHOiEIGxmllCR0iGcvYQUhhV9VxcXOQjM/zLy8ti1TmDxzr9DkgiEmxvb09+aEEAW8TojWqHBWwhFIbUeGqJn8lSIWo5t1d/oJjVZZYWK5TYQSXW6empEPErG6nto34Npc4ESYL5WFtby+VyTMEDlefs7Ozk5CQJyV7Lrq7OEY8wFGpvb/eLMPz5fJ5ywjFT/8YOQyPtbcJyGBgYkFPZ8OSjmZUqnmSjc23mg4MDzpDzFGg8Wd7j8fHxV7L+LzNnJMmrpNJyEyVaqLZCdYIRI07VZmJiglQePdp6Tn4VVnNEFLxRsKheOIOgZoiwUyeYu7u7SQBOW1ubkaLt65xZc47Ro0KqDWohWXSis1+xsICoIXmZc9DWkrpFSbWKiKimJGGJ0fEfsMM0nnucUijcZKaitDrMbYjnKiZsJkavl6wH9LY2jqmmYYxLk0SfiO4E5uizmDn8K7DT+cJubGwsm6yZmRlXiuw9xjDzWdtnlSZJ5xMjPvpZlJQzzPrsX9qVARizHjDI4aEcnmGNRbxE4dLxVp0kFg4RghtrwpDdlA62HonxRIUgWIUdE48pbiqpzqrNLp8sUiMSz1OfsQRQ/iBfdoZWWndRFfQ8bLSR1zAx5OJfKR4mdKCVS8WTf9TNbzRMNHxUMZY9y2DhVoiyMz5dXV1mjcdALY/Bv5m/MjNA5h/J0tgmKVC5ZPX09HR2dqKTiQamjWa+TZZnFC0FfzrG5GCDV4xRBoD8AWU+G0XERQcGAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180323151041" title="" data-src="/static/微信截图_20180323151041-219a9a1c72065540d35554530cad5978-a3cb3.png" data-srcset="/static/微信截图_20180323151041-219a9a1c72065540d35554530cad5978-d9b8e.png 200w,\n/static/微信截图_20180323151041-219a9a1c72065540d35554530cad5978-a3cb3.png 336w" data-sizes="(max-width: 336px) 100vw, 336px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="27371411327941276000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`Node rotateLeft(Node h){\n    Node x=h.right;\n    h.right=x.left;\n    x.left=h;\n    x.color=h.color;\n    h.color=RED;\n    x.N=h.N;\n    h.N=1+size(h.left)+size(h.right);\n    return x;\n}`, `27371411327941276000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="java"\n              >\n                <span class="gatsby-code-button-language">java</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="java"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token class-name">Node</span> <span class="token function">rotateLeft</span><span class="token punctuation">(</span><span class="token class-name">Node</span> h<span class="token punctuation">)</span><span class="token punctuation">{</span>\n    <span class="token class-name">Node</span> x<span class="token operator">=</span>h<span class="token punctuation">.</span>right<span class="token punctuation">;</span>\n    h<span class="token punctuation">.</span>right<span class="token operator">=</span>x<span class="token punctuation">.</span>left<span class="token punctuation">;</span>\n    x<span class="token punctuation">.</span>left<span class="token operator">=</span>h<span class="token punctuation">;</span>\n    x<span class="token punctuation">.</span>color<span class="token operator">=</span>h<span class="token punctuation">.</span>color<span class="token punctuation">;</span>\n    h<span class="token punctuation">.</span>color<span class="token operator">=</span>RED<span class="token punctuation">;</span>\n    x<span class="token punctuation">.</span><span class="token class-name">N</span><span class="token operator">=</span>h<span class="token punctuation">.</span><span class="token class-name">N</span><span class="token punctuation">;</span>\n    h<span class="token punctuation">.</span><span class="token class-name">N</span><span class="token operator">=</span><span class="token number">1</span><span class="token operator">+</span><span class="token function">size</span><span class="token punctuation">(</span>h<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token operator">+</span><span class="token function">size</span><span class="token punctuation">(</span>h<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">return</span> x<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="右旋转"><a href="#%E5%8F%B3%E6%97%8B%E8%BD%AC" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>右旋转</h3>\n<blockquote>\n<p>进行右旋转是为了转换两个连续的左红链接，这会在之后的插入过程中探讨。</p>\n</blockquote>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180323151112-9ba349f6a88a0c4fb0f0fd2fa974fd4f-16a51.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 324px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 157.40740740740742%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAfCAIAAABoLHqZAAAACXBIWXMAAAsSAAALEgHS3X78AAADiUlEQVQ4y1XV104sSRAE0Pn/H4AXEAIBEggPQoDwcPHee+9hhsXby57p7G1m66FUU12RERmZVZP7+vr6/v7+m4yfn5/Pz8/X19e3t7dCofD8/Ozr6enp+Pj47u7u6urq3d1dPp/36f7+/vHxMfedDEgzsN3Z2dmrq6ubm5uVlZXGxsbKysrW1lbI9/f3fDKAY5H7+//x8fHh2+joaFVVVU1NjcXZ2ZlAU1NTm5ubGSxC/DIbND89PR0dHTk6PT29t7eH7Z9kXF5e7uzsnJ+fU05dIRkpODRL9eLigsLb29uXlxeyDw8P75JxcnKCzVf4yLkIZgnCcAsD2diur6/hnTs+PiaEbLS8mJmZ2d/f9yllhkQoBIzAvjnEYTAmDw4O+kmzn1Tgz5RjKjIbmM12Hdra2sKMkFt/kuHnw8MDqqxUkNwpMkfCfhwcHCDBr6rcMm9sbFjQbC2uEhb+GykzwcCkDg0N0SYEqycnJ8125ufnR5OxvLwsEMH4IYtNAswksmUuCrUhOwyTpPL6qdsAos5mWShHUXZ0KHK/h4eH29vbBwYGhFhaWuJWU1NTV1eXQGBhFSRaXZyWKvoEM7cXFhacVuTt7e25uTlZyJwRWWM9JKNoWMgOZsHW19cBOjs7gSMQpB1zaW+mFyNjDrD2Ut7+/n6nOdzS0tLT08NFdpaCU8PiPmXtKU8+M8msn2AIBuNf5JyBkedoDmZDzgjX1tZQRamFYCEhExMTvb29/MuXjF/Z4Zktd5C3Znil5vzIyAgL+vr6GKlhcKZgGPjQHMwA+kHyah4tEYK1V9yw3/scbgPbtXCCZpVwkyRmlq1PUaHSlyS9VVF3PWRtS2HHxsakyqrnZIhiTXCp4UXZ1Gqsj2TE9cIG2d3dXVZWVltbKwvhFhcXFSLL4tew7AE1+8wbJxBaw8A3NzeLaCe7kik4no7gJI8KfacBIk/XkIWY1Zz/WbZpzvEaES/teCgB9AawPJXaDRdLwjrXgdJWScEIwdyk6WTAw+gWADBXEowiC/u/sqPL467Cx+yQDu3o6NAYnBdLCIYRb51VPhdIzLSJbRE7ngFC3EqzhrOQvBCReZDnfKBEmGgGM+bYCRV2rpNxkww/48/ITs7jqqokubQkqVNdXV11dXXch4aGBi9JeXm52Zm2tjaXtL6+vqKiQv/mIkZEJdjManKExx8PtYYVl/nxnttUPPO/SSyEVf5ZkusAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180323151112" title="" data-src="/static/微信截图_20180323151112-9ba349f6a88a0c4fb0f0fd2fa974fd4f-16a51.png" data-srcset="/static/微信截图_20180323151112-9ba349f6a88a0c4fb0f0fd2fa974fd4f-6752f.png 200w,\n/static/微信截图_20180323151112-9ba349f6a88a0c4fb0f0fd2fa974fd4f-16a51.png 324w" data-sizes="(max-width: 324px) 100vw, 324px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="93558253442503100000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`Node rotateRight(Node h){\n    Node x=h.left;\n    h.left=x.right;\n    x.right=h;\n    x.color=h.color;\n    h.color=RED;\n    x.N=h.N;\n    h.N=size(h.left)+size(h.right)+1;\n    return x;\n}`, `93558253442503100000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="java"\n              >\n                <span class="gatsby-code-button-language">java</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="java"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token class-name">Node</span> <span class="token function">rotateRight</span><span class="token punctuation">(</span><span class="token class-name">Node</span> h<span class="token punctuation">)</span><span class="token punctuation">{</span>\n    <span class="token class-name">Node</span> x<span class="token operator">=</span>h<span class="token punctuation">.</span>left<span class="token punctuation">;</span>\n    h<span class="token punctuation">.</span>left<span class="token operator">=</span>x<span class="token punctuation">.</span>right<span class="token punctuation">;</span>\n    x<span class="token punctuation">.</span>right<span class="token operator">=</span>h<span class="token punctuation">;</span>\n    x<span class="token punctuation">.</span>color<span class="token operator">=</span>h<span class="token punctuation">.</span>color<span class="token punctuation">;</span>\n    h<span class="token punctuation">.</span>color<span class="token operator">=</span>RED<span class="token punctuation">;</span>\n    x<span class="token punctuation">.</span><span class="token class-name">N</span><span class="token operator">=</span>h<span class="token punctuation">.</span><span class="token class-name">N</span><span class="token punctuation">;</span>\n    h<span class="token punctuation">.</span><span class="token class-name">N</span><span class="token operator">=</span><span class="token function">size</span><span class="token punctuation">(</span>h<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token operator">+</span><span class="token function">size</span><span class="token punctuation">(</span>h<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>\n    <span class="token keyword">return</span> x<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="颜色转换"><a href="#%E9%A2%9C%E8%89%B2%E8%BD%AC%E6%8D%A2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>颜色转换</h3>\n<blockquote>\n<p>一个 4-节点在红黑树中表现为一个结点的左右子节点都是红色的。分裂 4-节点除了需要将子节点的颜色由红变黑之外，同时需要将父节点的颜色由黑变红，从 2-3 树的角度来看就是讲中间结点上移到上层结点。</p>\n</blockquote>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180323161940-d78ddd1a36428d80e6e3f5c5934608a7-d7cef.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 329px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 152.27963525835867%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAeCAIAAACjcKk8AAAACXBIWXMAAAsSAAALEgHS3X78AAADQElEQVQ4y13V504jQRAE4H3/Z0FC/EEiCYl05ByPnOHIPhN8ttF93lr2QkuMxjNd3dXVPUvRarV+lfZRms3z8/PR0dH7+/vFxcXj46N1bm5uYmJifX39W2kvLy9uORf+WqX5/fb25qfN5eXlycnJ5OTk2dkZ8Nra2tTU1PT09NLS0vj4uJUntwpsze9Go3FwcAA2PDw8Ozs7MjIyNja2s7Nzd3d3c3Nzf3//o7T/we12e29vb2hoSIbDw8OfpfGGdCLE8fHx5+cnTGhai3ZpnU5HPKWCqbnb7aYKZu/qe2lPT08wOe9lhpQWQJ0p/vT01M94qOLh4UHZQry+vpLAVbPZzG0hAPWiNld7eQS6urriZL2+vra6AuPs0D68CvEUJjbCkvBbWFjY3Nzc3t4Whc4bGxtW+7ip3AYSsCcYjPCyKYmq1OYhFnnVub+/T8iAz8/PufGv+qzmqMcEEzI6o2dtlGbjvPllkbqndt0nIbElCc1xttckmY0E5g4JyVmCpO1lTk6C3d7eIkYw5JE0mOGpECdhkfzvX1bUs23DScERScHKNmQYiajOjHQ9wr3MNVIngdHzAOCJND8/jzlGy8vLBhZ/+T/+sj8TFp0Q1g8Ymemc/jnEyFPBnGdk+gdsBqIcItZImn4KhBQKSrAK57ACI9wpLfzzwiQhNT+aqXxxcdFj9KqN0MrKCnbVw6iR9SfBT1L39/dbqa1tVNjd3dXCra0tooilHRXtsA2SqgaO4DyUCuwkjNKhelO0vgyYPJLgGbXhKXdemr2C8wSD79HOd0vZGEKiRDmvf2BgoK+vb3R01FQQLLTpFArVeGYHoBNC6pYxxNaHjkI0g9R8CRSJWt5j1SpIv1Nwnriu8KOziDpso2w5VZ4Hwz/5e7PN1TX1M9VbpSHCW+UUNi2JmO+ETVUzMGRU4eFjAJnZMg8kSIfsIfPObfKWqvccq5WsW4Jt/YZVVM9CUIVI+qGxeKZU8yQbIii40gJ9Wi/NeK2urlqJL2JBlTw3SOFJPTg4mJr9l/GwZmZmTCXBVeQwzO17Q4KGT7l5zJBpDKQ7bfdV0SptQ4TOfLqlfZZW1VyXnbfiOl+MSOo2H4BYZjG6/AY08W/o/lDXAAAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180323161940" title="" data-src="/static/微信截图_20180323161940-d78ddd1a36428d80e6e3f5c5934608a7-d7cef.png" data-srcset="/static/微信截图_20180323161940-d78ddd1a36428d80e6e3f5c5934608a7-00827.png 200w,\n/static/微信截图_20180323161940-d78ddd1a36428d80e6e3f5c5934608a7-d7cef.png 329w" data-sizes="(max-width: 329px) 100vw, 329px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="24310486646608843000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`void filpColors(Node h){\n    h.color=RED;\n    h.left.color=BLACK;\n    h.right.color=BlACK;\n}`, `24310486646608843000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="java"\n              >\n                <span class="gatsby-code-button-language">java</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="java"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token keyword">void</span> <span class="token function">filpColors</span><span class="token punctuation">(</span><span class="token class-name">Node</span> h<span class="token punctuation">)</span><span class="token punctuation">{</span>\n    h<span class="token punctuation">.</span>color<span class="token operator">=</span>RED<span class="token punctuation">;</span>\n    h<span class="token punctuation">.</span>left<span class="token punctuation">.</span>color<span class="token operator">=</span>BLACK<span class="token punctuation">;</span>\n    h<span class="token punctuation">.</span>right<span class="token punctuation">.</span>color<span class="token operator">=</span><span class="token class-name">BlACK</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="插入"><a href="#%E6%8F%92%E5%85%A5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>插入</h3>\n<blockquote>\n<p>先将一个节点按二叉查找树的方法插入到正确位置，然后再进行如下的颜色操作：</p>\n</blockquote>\n<ol>\n<li>如果右子节点是红色的而左子节点是黑色的，进行左旋转；</li>\n<li>如果左子节点是红色的且它的左子节点也是红色的，进行右旋转；</li>\n<li>如果左右子节点都是红色的，进行颜色转换。</li>\n</ol>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180323162936-1fdfdf499793346524a2649d6587d0c3-5c070.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 389px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 85.08997429305913%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAIAAABSJhvpAAAACXBIWXMAAAsSAAALEgHS3X78AAAB7ElEQVQ4y12T53LCQAyE/f4vBfyDoffeOwZssKlxTD7fkgsTzeC500naXUk4X8aez6c9PB6PKIoul8v5fOZ6u93w8IQzjuNvY5Exh5NN5q4HzqPRaL1ev14vW5en2Nj3rzmEUvizPIf5fN7pdPb7/f1+V/S/ZH0dEbter8SJcBiGYB6PR/xBEJxOJ/yCsplv2vyk06o6HA5WM5lcfd/njPNl7C9ZlGR4iQaNh8lk0u12S6USLLjiVAld38lgQli0QSNCsM1mM5VKEbparVqtVq1WC431ej0AwAfMgdV2u93tdsVicTwebzYbosHBWalUUE4QgJ7nUZ1aOMvlMkqh6RBHV6fTaTqdpsOqBQK18VOLsxWPEA4EL5dLApJuA5XJZHK5HDqhwJwWi4X/YagAX7LVYI0wQc7n80hyXRdWUGo0GuQDq9lqc2gKyDj5EklyMmcIkCmpeAFBHvh4OMO5Xq8DxRNjp3PtdrtarUIhoe0aUz1MmWoh+VBAJ20jX1ugUYuOIyaBMYLEDUDhYHSr3+/zatdehZI5A0WOZ4w0vtpHIsCnC9oNRAoN05IlyMwWDTQJesjmnM1mESZ/oVDATwnAeUUFE4EOApNug8Z4+QMyPZ6HwyEdYr3YJHaTzSF5MBhw1bbNZjPOJIP/A9iJt4hetL9OAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180323162936" title="" data-src="/static/微信截图_20180323162936-1fdfdf499793346524a2649d6587d0c3-5c070.png" data-srcset="/static/微信截图_20180323162936-1fdfdf499793346524a2649d6587d0c3-fd26e.png 200w,\n/static/微信截图_20180323162936-1fdfdf499793346524a2649d6587d0c3-5c070.png 389w" data-sizes="(max-width: 389px) 100vw, 389px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="80669516471300830000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`public class RedBlackBST<Key extends Comparable<Key>,Value>{\n    private Node root;\n    private class Node;\n    private boolean isRed(Node h);\n    private Node rotateLeft(Node h);\n    private Node rotateRight(Node h);\n    private Node filpColors(Node h);\n\n    // 见二叉查找树中的方法\n    private int size();\n    public void put(Key key,Value val){\n        root=put(root,key,val);\n        root.color=BLACK;\n    }\n    private Node put(Node h,Key key,Value val){\n        if(h==null) return new Node(key,val,1,RED);\n        int cmp=key.compareTo(h.key);\n        if(cmp<0) h.left=put(h.left,key,val);\n        else if(cmp>0) h.right=put(h.right,key,val);\n        else h.val=val;\n        if(isRed(h.right)&&!isRed(h.left)) h=rotateLeft(h);\n        if(isRed(h.left)&&isRed(h.left.left)) h=rotateRight(h);\n        if(isRed(h.right)&&isRed(h.left)) h=filpColors(h);\n        h.N=size(h.left)+size(h.right)+1;\n        return h;\n    }\n}`, `80669516471300830000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="java"\n              >\n                <span class="gatsby-code-button-language">java</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="java"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RedBlackBST</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Key</span> <span class="token keyword">extends</span> <span class="token class-name">Comparable</span><span class="token punctuation">&lt;</span><span class="token class-name">Key</span><span class="token punctuation">></span><span class="token punctuation">,</span><span class="token class-name">Value</span><span class="token punctuation">></span></span><span class="token punctuation">{</span>\n    <span class="token keyword">private</span> <span class="token class-name">Node</span> root<span class="token punctuation">;</span>\n    <span class="token keyword">private</span> <span class="token keyword">class</span> <span class="token class-name">Node</span><span class="token punctuation">;</span>\n    <span class="token keyword">private</span> <span class="token keyword">boolean</span> <span class="token function">isRed</span><span class="token punctuation">(</span><span class="token class-name">Node</span> h<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">private</span> <span class="token class-name">Node</span> <span class="token function">rotateLeft</span><span class="token punctuation">(</span><span class="token class-name">Node</span> h<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">private</span> <span class="token class-name">Node</span> <span class="token function">rotateRight</span><span class="token punctuation">(</span><span class="token class-name">Node</span> h<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">private</span> <span class="token class-name">Node</span> <span class="token function">filpColors</span><span class="token punctuation">(</span><span class="token class-name">Node</span> h<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// 见二叉查找树中的方法</span>\n    <span class="token keyword">private</span> <span class="token keyword">int</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token class-name">Key</span> key<span class="token punctuation">,</span><span class="token class-name">Value</span> val<span class="token punctuation">)</span><span class="token punctuation">{</span>\n        root<span class="token operator">=</span><span class="token function">put</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span>key<span class="token punctuation">,</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        root<span class="token punctuation">.</span>color<span class="token operator">=</span>BLACK<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">private</span> <span class="token class-name">Node</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token class-name">Node</span> h<span class="token punctuation">,</span><span class="token class-name">Key</span> key<span class="token punctuation">,</span><span class="token class-name">Value</span> val<span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token keyword">if</span><span class="token punctuation">(</span>h<span class="token operator">==</span><span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span>val<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>RED<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">int</span> cmp<span class="token operator">=</span>key<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>h<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">if</span><span class="token punctuation">(</span>cmp<span class="token operator">&lt;</span><span class="token number">0</span><span class="token punctuation">)</span> h<span class="token punctuation">.</span>left<span class="token operator">=</span><span class="token function">put</span><span class="token punctuation">(</span>h<span class="token punctuation">.</span>left<span class="token punctuation">,</span>key<span class="token punctuation">,</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>cmp<span class="token operator">></span><span class="token number">0</span><span class="token punctuation">)</span> h<span class="token punctuation">.</span>right<span class="token operator">=</span><span class="token function">put</span><span class="token punctuation">(</span>h<span class="token punctuation">.</span>right<span class="token punctuation">,</span>key<span class="token punctuation">,</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">else</span> h<span class="token punctuation">.</span>val<span class="token operator">=</span>val<span class="token punctuation">;</span>\n        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isRed</span><span class="token punctuation">(</span>h<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token operator">!</span><span class="token function">isRed</span><span class="token punctuation">(</span>h<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">)</span> h<span class="token operator">=</span><span class="token function">rotateLeft</span><span class="token punctuation">(</span>h<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isRed</span><span class="token punctuation">(</span>h<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token function">isRed</span><span class="token punctuation">(</span>h<span class="token punctuation">.</span>left<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">)</span> h<span class="token operator">=</span><span class="token function">rotateRight</span><span class="token punctuation">(</span>h<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isRed</span><span class="token punctuation">(</span>h<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token function">isRed</span><span class="token punctuation">(</span>h<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">)</span> h<span class="token operator">=</span><span class="token function">filpColors</span><span class="token punctuation">(</span>h<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        h<span class="token punctuation">.</span><span class="token class-name">N</span><span class="token operator">=</span><span class="token function">size</span><span class="token punctuation">(</span>h<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token operator">+</span><span class="token function">size</span><span class="token punctuation">(</span>h<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>\n        <span class="token keyword">return</span> h<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="删除最小键"><a href="#%E5%88%A0%E9%99%A4%E6%9C%80%E5%B0%8F%E9%94%AE" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>删除最小键</h3>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180323172334-9cbc5a78f26232cdc46942700af5e4ea-a3cb3.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 336px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 158.03571428571428%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAgCAIAAACdAM/hAAAACXBIWXMAAAsSAAALEgHS3X78AAADMklEQVQ4y13V51IjMRAE4H3/l6KAgiKaZILJGUzGNjjAwX27bdbczQ9ZK02PenpGcjEajYbDYb/fN358fAwrG1Vm8f39fTAY1CvDf624vr6enZ2dnp5eXFx8eHhIoLe3N7Ber9fpdIw+E4hlkrHw06uMn0NeX1+vrq7iV4PjzQaV9X+s+Pz8/FOZyff39+npKSLdbjexnZkQz8/PLy8v1gNO9KJOQErtdrvVal1eXhph1tbW5ubmwNbX1yVl3NjY8BkKZc5+wEhlXF5ebjabmM/MzNzc3DgnBx4eHop4cXGB1+PjYziPwTnWGG8kUYDBuVtZSMYzufxD++vrS+z9/X2Zh0stEv7B2727uws+u0UEhNnd3V1ZWXl6evKZ8GRHNeKhIyla9H/Z+GQw+Zyfn6+urvI4OzvDf3t7u9Fo4G8F8uTkZG9vj4PWiGwlGDFL9g4ODggGg8Xt7a0tLHCh89bWFtrABDchiq2i1j1tlPZKeWvBopCJQmQluwW2KKGnN6amphyyubkpC4sKhmHdrf/1ZklbsHZl5JEqtiQ1EVQiqhrxgjd2KpuUqr4xcpYtGDAPJQhbJO1iweH4+JiurlCZc0oFrKV2dnaAj46OyAPPW/GTPwo0JxXBiKrnypPTD4FxpacN5UW+WRm1nUYUo7ipi5NKwdKVqXNoM/j7+/s0fKJksVUZNxHHdXZyzo8Y6ccUxmfmJj6jWV2/MmcnACAcPciegtdOqapjENZC6bDyVjmTB0wyhLedq+cOkyencZUIB7TTgpgXCru0tBQ8MSPsa2XC87CVVCOyTyrY5VZQWFelyDzyymQMW3hSazun8QTLbklbwi5zrnH65vfTGavbK5pN3jCNmQKmjeq+TUv/fkaMuWdxKDuMgOoubVFzt+qnI+9+GjsrCToB80Db04u/xtKYaqZ7Cen1JERETs/VN2zykqS9TcAAaM6bkOoJYKJguTDcfl/P8evp8Pr1TrjM67+IPKajH4sK5T8GPV0MvS5/bHXY/Py88mgGXBYWFtAhqiLvVaaieXaK9CYY2aVqTLZMRK4CeVUCRr5R2TjnMIxgxtDOX1cIm+R6ZWRWMvkLg7bozwj7Fj4AAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180323172334" title="" data-src="/static/微信截图_20180323172334-9cbc5a78f26232cdc46942700af5e4ea-a3cb3.png" data-srcset="/static/微信截图_20180323172334-9cbc5a78f26232cdc46942700af5e4ea-d9b8e.png 200w,\n/static/微信截图_20180323172334-9cbc5a78f26232cdc46942700af5e4ea-a3cb3.png 336w" data-sizes="(max-width: 336px) 100vw, 336px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<blockquote>\n<p>如果最小键在一个 2- 节点中，那么删除该键会留下一个空链接，就破坏了平衡性，因此要确保最小键不在 2- 节点中。将 2- 节点转换成 3- 节点或者 4- 节点有两种方法，一种是向上层节点拿一个 key，一种是向兄弟节点拿一个 key。如果上层节点是 2- 节点，那么就没办法从上层节点拿 key 了，因此要保证删除路径上的所有节点都不是 2- 节点。在向下删除的过程中，保证以下情况之一成立：</p>\n</blockquote>\n<ol>\n<li>如果当前节点的左子节点不是 2- 节点，完成；</li>\n<li>如果当前节点的左子节点是 2- 节点而它的兄弟节点不是 2- 节点，向兄弟节点拿一个 key 过来；</li>\n<li>如果当前节点的左子节点和它的兄弟节点都是 2- 节点，将左子节点、父节点中的最小键和最近的兄弟节点合并为一个 4- 节点。</li>\n</ol>\n<h2 id="总结"><a href="#%E6%80%BB%E7%BB%93" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>总结</h2>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180323174959-56cb4c0a8bbab0efaac7f9c1d0fb6e5c-d55d3.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 40.322580645161295%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAABM0lEQVQY0yWQS4+CQBCE+f9/x6jsyQtGggnEFyAPWUEDuIIC8goc9nOow2R6qqqnuqW6rl+v1zAMTdO0bTuO4/1+v16v5/NZ07TNZsO5Xq9t2348HlBJkvwJUEp5nnueF4YhRBzHy+VyPp/LsrxYLHA6jjObzX4EoFRVtSxrv98bhhFFkdT3fRAEiHByPx6PcBC8pGnKD7quHw4HgmDwBFarlaIoz+dTyrKMkO/3Gx13wnD5fD65ACXsFOpXgL6JALJvbL5yXXe323FncpxlWXZdRxDaIaqqalKTJRagKZv6xibh5XIhPB78vOJneVBkwzYl4v/b7UY5jfM1I2KThIHmW5bfCeDkpKQdtqIo0DAw7VDSjheJNtvtln2wGDhLYNJNQ1Kapkmu0+nEgL7vI+YkxT8Lqaiu0WjJ3wAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180323174959" title="" data-src="/static/微信截图_20180323174959-56cb4c0a8bbab0efaac7f9c1d0fb6e5c-fee1c.png" data-srcset="/static/微信截图_20180323174959-56cb4c0a8bbab0efaac7f9c1d0fb6e5c-a67b7.png 200w,\n/static/微信截图_20180323174959-56cb4c0a8bbab0efaac7f9c1d0fb6e5c-0b187.png 400w,\n/static/微信截图_20180323174959-56cb4c0a8bbab0efaac7f9c1d0fb6e5c-fee1c.png 800w,\n/static/微信截图_20180323174959-56cb4c0a8bbab0efaac7f9c1d0fb6e5c-d55d3.png 806w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h2 id="散列表"><a href="#%E6%95%A3%E5%88%97%E8%A1%A8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>散列表</h2>\n<h3 id="特点-5"><a href="#%E7%89%B9%E7%82%B9-5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>特点</h3>\n<blockquote>\n<p>散列表类似于数组，可以把散列表的散列值看成数组的索引值。访问散列表和访问数组元素一样快速，它可以在常数时间内实现查找和插入的符号表。由于无法通过散列值知道键的大小关系，因此散列表无法实现有序性操作。</p>\n</blockquote>\n<h3 id="散列函数"><a href="#%E6%95%A3%E5%88%97%E5%87%BD%E6%95%B0" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>散列函数</h3>\n<blockquote>\n<ul>\n<li>对于一个大小为 M 的散列表，散列函数能够把任意键转换为 [0, M-1] 内的正整数，该正整数即为 hash 值。</li>\n</ul>\n</blockquote>\n<ul>\n<li>\n<p>散列表有冲突的存在，也就是两个不同的键可能有相同的 hash 值。</p>\n</li>\n<li>\n<p>散列函数应该满足以下三个条件：</p>\n</li>\n<li>\n<p>一致性：相等的键应当有相等的 hash 值，两个键相等表示调用 equals() 返回的值相等。</p>\n</li>\n<li>\n<p>高效性：计算应当简便，有必要的话可以把 hash 值缓存起来，在调用 hash 函数时直接返回。</p>\n</li>\n<li>\n<p>均匀性：所有键的 hash 值应当均匀地分布到 [0, M-1] 之间，这个条件至关重要，直接影响到散列表的性能。</p>\n</li>\n</ul>\n<blockquote>\n<ul>\n<li>可以将整数散列到 [0, M-1] 之间，例如一个正整数 k，计算 k%M 既可得到一个 [0, M-1] 之间的 hash 值。注意 M 必须是一个素数，否则无法利用键包含的所有信息。例如 M 为 10k，那么只能利用键的后 k 位。</li>\n</ul>\n</blockquote>\n<ul>\n<li>\n<p>对于其它数，可以将其转换成整数的形式，然后利用除留余数法。例如对于浮点数，可以将其表示成二进制形式，然后使用二进制形式的整数值进行除留余数法。</p>\n</li>\n<li>\n<p>对于有多部分组合的键，每部分都需要计算 hash 值，并且最后合并时需要让每部分 hash 值都具有同等重要的地位。可以将该键看成 R 进制的整数，键中每部分都具有不同的权值。</p>\n</li>\n<li>\n<p>例如，字符串的散列函数实现如下:</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="92445207974054600000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`int hash = 0;\nfor(int i = 0; i < s.length(); i++)\n  hash = (R * hash + s.charAt(i)) % M;`, `92445207974054600000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="java"\n              >\n                <span class="gatsby-code-button-language">java</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="java"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token keyword">int</span> hash <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>\n  hash <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">R</span> <span class="token operator">*</span> hash <span class="token operator">+</span> s<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token class-name">M</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>再比如，拥有多个成员的自定义类的哈希函数如下,R 的值不是很重要，通常取 31。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="24070109092173373000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`int hash = (((day * R + month) % M) * R + year) % M;`, `24070109092173373000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="java"\n              >\n                <span class="gatsby-code-button-language">java</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="java"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token keyword">int</span> hash <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>day <span class="token operator">*</span> <span class="token class-name">R</span> <span class="token operator">+</span> month<span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token class-name">M</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token class-name">R</span> <span class="token operator">+</span> year<span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token class-name">M</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n</li>\n<li>\n<p>Java 中的 hashCode() 实现了 hash 函数，但是默认使用对象的内存地址值。在使用 hashCode() 函数时，应当结合除留余数法来使用。因为内存地址是 32 位整数，我们只需要 31 位的非负整数，因此应当屏蔽符号位之后再使用除留余数法。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="97328428542441800000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`int hash = (x.hashCode() & 0x7fffffff) % M;`, `97328428542441800000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="java"\n              >\n                <span class="gatsby-code-button-language">java</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="java"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token keyword">int</span> hash <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token number">0x7fffffff</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token class-name">M</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n</li>\n<li>\n<p>使用 Java 自带的 HashMap 等自带的哈希表实现时，只需要去实现 Key 类型的 hashCode() 函数即可。Java 规定 hashCode() 能够将键均匀分布于所有的 32 位整数，Java 中的 String、Integer 等对象的 hashCode() 都能实现这一点。以下展示了自定义类型如何实现 hashCode()。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="84224604147875560000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`public class Transaction{\n  private final String who;\n  private final Date when;\n  private final double amount;\n\n  public int hashCode(){\n      int hash = 17;\n      hash = 31 * hash + who.hashCode();\n      hash = 31 * hash + when.hashCode();\n      hash = 31 * hash + ((Double) amount).hashCode();\n      return hash;\n  }\n}`, `84224604147875560000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="java"\n              >\n                <span class="gatsby-code-button-language">java</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="java"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Transaction</span><span class="token punctuation">{</span>\n  <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">String</span> who<span class="token punctuation">;</span>\n  <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Date</span> when<span class="token punctuation">;</span>\n  <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">double</span> amount<span class="token punctuation">;</span>\n\n  <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n      <span class="token keyword">int</span> hash <span class="token operator">=</span> <span class="token number">17</span><span class="token punctuation">;</span>\n      hash <span class="token operator">=</span> <span class="token number">31</span> <span class="token operator">*</span> hash <span class="token operator">+</span> who<span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n      hash <span class="token operator">=</span> <span class="token number">31</span> <span class="token operator">*</span> hash <span class="token operator">+</span> when<span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n      hash <span class="token operator">=</span> <span class="token number">31</span> <span class="token operator">*</span> hash <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Double</span><span class="token punctuation">)</span> amount<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token keyword">return</span> hash<span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n</ul>\n<h3 id="基于拉链法的散列表"><a href="#%E5%9F%BA%E4%BA%8E%E6%8B%89%E9%93%BE%E6%B3%95%E7%9A%84%E6%95%A3%E5%88%97%E8%A1%A8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>基于拉链法的散列表</h3>',
excerpt:"无序链表的顺序查找 特点 在含有 N 对键值的基于（无序）链表的符号表中，未命中的查找和插入操作都需要 N 次比较。命中的查找在最坏情况下需要 N 次比较。特别的，向一个空表中插入 N 个不同的键需要 次比较 实现 有序数组的二分查找 特点 在 N…",timeToRead:13,tableOfContents:'<ul>\n<li>\n<p><a href="/find-java/#%E6%97%A0%E5%BA%8F%E9%93%BE%E8%A1%A8%E7%9A%84%E9%A1%BA%E5%BA%8F%E6%9F%A5%E6%89%BE">无序链表的顺序查找</a></p>\n<ul>\n<li><a href="/find-java/#%E7%89%B9%E7%82%B9">特点</a></li>\n<li><a href="/find-java/#%E5%AE%9E%E7%8E%B0">实现</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/find-java/#%E6%9C%89%E5%BA%8F%E6%95%B0%E7%BB%84%E7%9A%84%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE">有序数组的二分查找</a></p>\n<ul>\n<li><a href="/find-java/#%E7%89%B9%E7%82%B9-1">特点</a></li>\n<li><a href="/find-java/#%E5%AE%9E%E7%8E%B0-1">实现</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/find-java/#%E9%A2%84%E8%A7%88">预览</a></p>\n<ul>\n<li><a href="/find-java/#%E6%AF%94%E8%BE%83">比较</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/find-java/#%E4%BA%8C%E5%8F%89%E6%9F%A5%E6%89%BE%E6%A0%91">二叉查找树</a></p>\n<ul>\n<li><a href="/find-java/#%E6%80%9D%E8%B7%AF">思路</a></li>\n<li><a href="/find-java/#%E7%89%B9%E7%82%B9-2">特点</a></li>\n<li><a href="/find-java/#%E5%AE%9E%E7%8E%B0-2">实现</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/find-java/#%E5%B9%B3%E8%A1%A1%E6%9F%A5%E6%89%BE%E6%A0%91">平衡查找树</a></p>\n<ul>\n<li><a href="/find-java/#%E6%80%9D%E8%B7%AF-1">思路</a></li>\n<li><a href="/find-java/#%E7%89%B9%E7%82%B9-3">特点</a></li>\n<li><a href="/find-java/#%E5%AE%9E%E7%8E%B0-3">实现</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/find-java/#%E7%BA%A2%E9%BB%91%E4%BA%8C%E5%8F%89%E6%9F%A5%E6%89%BE%E6%A0%91">红黑二叉查找树</a></p>\n<ul>\n<li><a href="/find-java/#%E6%80%9D%E8%B7%AF-2">思路</a></li>\n<li><a href="/find-java/#%E7%89%B9%E7%82%B9-4">特点</a></li>\n<li><a href="/find-java/#%E7%BA%A2%E9%BB%91%E6%A0%91%E7%9A%84%E7%BB%93%E7%82%B9%E8%A1%A8%E7%A4%BA">红黑树的结点表示</a></li>\n<li><a href="/find-java/#%E5%B7%A6%E6%97%8B%E8%BD%AC">左旋转</a></li>\n<li><a href="/find-java/#%E5%8F%B3%E6%97%8B%E8%BD%AC">右旋转</a></li>\n<li><a href="/find-java/#%E9%A2%9C%E8%89%B2%E8%BD%AC%E6%8D%A2">颜色转换</a></li>\n<li><a href="/find-java/#%E6%8F%92%E5%85%A5">插入</a></li>\n<li><a href="/find-java/#%E5%88%A0%E9%99%A4%E6%9C%80%E5%B0%8F%E9%94%AE">删除最小键</a></li>\n</ul>\n</li>\n<li><a href="/find-java/#%E6%80%BB%E7%BB%93">总结</a></li>\n<li>\n<p><a href="/find-java/#%E6%95%A3%E5%88%97%E8%A1%A8">散列表</a></p>\n<ul>\n<li><a href="/find-java/#%E7%89%B9%E7%82%B9-5">特点</a></li>\n<li><a href="/find-java/#%E6%95%A3%E5%88%97%E5%87%BD%E6%95%B0">散列函数</a></li>\n<li><a href="/find-java/#%E5%9F%BA%E4%BA%8E%E6%8B%89%E9%93%BE%E6%B3%95%E7%9A%84%E6%95%A3%E5%88%97%E8%A1%A8">基于拉链法的散列表</a></li>\n</ul>\n</li>\n</ul>',wordCount:{words:374},frontmatter:{date:"2018-03-20 13:58:04",path:"/find-java/",tags:"面试, 算法, 读书笔记",title:"查找算法java实现",draft:null,catalog_number:null}},nextPost:{html:'<h2 id="选择排序"><a href="#%E9%80%89%E6%8B%A9%E6%8E%92%E5%BA%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>选择排序</h2>\n<h3 id="思路"><a href="#%E6%80%9D%E8%B7%AF" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>思路</h3>\n<blockquote>\n<p>首先，找到数组中最小的那个元素，其次，将它和数组的第一个元素交换位置（如果第一个元素就是最小元素那么它就和自己交换）。再次，在剩下的元素中找到最小的元素，将它与数组的第二个元素交换位置。如此往复，直到将整个数组排序。</p>\n</blockquote>\n<h3 id="特点"><a href="#%E7%89%B9%E7%82%B9" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>特点</h3>\n<blockquote>\n<ul>\n<li>对于长度为 N 的数组，选择排序需要大约 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>N</mi><mn>2</mn></msup><mi mathvariant="normal">/</mi><mn>2</mn></mrow><annotation encoding="application/x-tex">N^2/2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8141079999999999em;"></span><span class="strut bottom" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mord">/</span><span class="mord">2</span></span></span></span> 次比较，N 次交换</li>\n</ul>\n</blockquote>\n<ul>\n<li>运行时间和输入无关，其他算法会更善于利用输入的初始状态</li>\n<li>数据移动是最少的，每次交换都会改变两个数组元素的值，因此选择排序用了 N 次交换，其他任何算法都不具备这个特征（大部分的增长数量级都是线性对数或是平方级别）</li>\n</ul>\n<h3 id="实现"><a href="#%E5%AE%9E%E7%8E%B0" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>实现</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="91038763906872510000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`public class Selection\n{\n    public static void sort(Comparable[] a)\n    { // 将a[]按升序排列\n        int N = a.length; // 数组长度\n        for (int i = 0; i < N; i++)\n        {   // 将a[i]和a[i+1..N]中最小的元素交换\n            int min = i; // 最小元素的索引\n            for (int j = i+1; j < N; j++)\n            if (less(a[j], a[min])) min = j;\n            exch(a, i, min);\n        }\n    }\n    // less()、exch()、isSorted()和main()方法见“排序算法类模板”\n}`, `91038763906872510000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="java"\n              >\n                <span class="gatsby-code-button-language">java</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="java"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Selection</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">sort</span><span class="token punctuation">(</span><span class="token class-name">Comparable</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span> <span class="token comment">// 将a[]按升序排列</span>\n        <span class="token keyword">int</span> <span class="token class-name">N</span> <span class="token operator">=</span> a<span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token comment">// 数组长度</span>\n        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token class-name">N</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>\n        <span class="token punctuation">{</span>   <span class="token comment">// 将a[i]和a[i+1..N]中最小的元素交换</span>\n            <span class="token keyword">int</span> min <span class="token operator">=</span> i<span class="token punctuation">;</span> <span class="token comment">// 最小元素的索引</span>\n            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> <span class="token class-name">N</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>\n            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">less</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> a<span class="token punctuation">[</span>min<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> min <span class="token operator">=</span> j<span class="token punctuation">;</span>\n            <span class="token function">exch</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> i<span class="token punctuation">,</span> min<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n    <span class="token comment">// less()、exch()、isSorted()和main()方法见“排序算法类模板”</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="插入排序"><a href="#%E6%8F%92%E5%85%A5%E6%8E%92%E5%BA%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>插入排序</h2>\n<h3 id="思路-1"><a href="#%E6%80%9D%E8%B7%AF-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>思路</h3>\n<blockquote>\n<p>在计算机的实现中，为了给要插入的元素腾出空间，我们需要将其余所有元素在插入之前都向右移动一位。这种算法叫做插入排序</p>\n</blockquote>\n<h3 id="特点-1"><a href="#%E7%89%B9%E7%82%B9-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>特点</h3>\n<blockquote>\n<ul>\n<li>和选择排序不同的是，插入排序所需的时间取决于输入中元素初始顺序</li>\n</ul>\n</blockquote>\n<ul>\n<li>对于随机排列的长度为 N 且主键不重复的数组，平均情况下插入排序需要～<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>N</mi><mn>2</mn></msup><mi mathvariant="normal">/</mi><mn>4</mn></mrow><annotation encoding="application/x-tex">N^2 /4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8141079999999999em;"></span><span class="strut bottom" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mord">/</span><span class="mord">4</span></span></span></span>次比较以及～ <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>N</mi><mn>2</mn></msup><mi mathvariant="normal">/</mi><mn>4</mn></mrow><annotation encoding="application/x-tex">N^2 /4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8141079999999999em;"></span><span class="strut bottom" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mord">/</span><span class="mord">4</span></span></span></span> 次交换，最坏情况下需要 ～<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>N</mi><mn>2</mn></msup><mi mathvariant="normal">/</mi><mn>2</mn></mrow><annotation encoding="application/x-tex">N^2 /2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8141079999999999em;"></span><span class="strut bottom" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mord">/</span><span class="mord">2</span></span></span></span> 次比较和 ～<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>N</mi><mn>2</mn></msup><mi mathvariant="normal">/</mi><mn>2</mn></mrow><annotation encoding="application/x-tex">N^2 /2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8141079999999999em;"></span><span class="strut bottom" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mord">/</span><span class="mord">2</span></span></span></span> 次交换，最好情况下需要 N-1 次比较和 0 次交换</li>\n<li>倒置指的是数组中的两个顺序颠倒的元素。比如 E X A M P L E 中有 11 对倒置：E-A、 X-A、 X-M、 X-P、 X-L、 X-E、 M-L、 M-E、 P-L、 P-E 以及 L-E，如果数组中倒置的数量小于数组大小的某个倍数，那么我们说这个数组是部分有序的。几种典型的部分有序的数组：</li>\n<li>数组中每个元素距离它的最终位置都不远；</li>\n<li>一个有序的大数组接一个小数组；</li>\n<li>数组中只有几个元素的位置不正确。</li>\n<li>插入排序对这样的数组很有效，而选择排序则不然。事实上，当倒置的数量很少时，插入排序很可能比本章中的其他任何算法都要快。</li>\n<li>插入排序需要的交换操作和数组中倒置的数量相同，需要的比较次数大于等于倒置的数量，小于等于倒置的数量加上数组的大小再减一</li>\n</ul>\n<h2 id="实现-1"><a href="#%E5%AE%9E%E7%8E%B0-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>实现</h2>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="2105368422204123600"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`public class Insertion\n{\n    public static void sort(Comparable[] a)\n    { // 将a[]按升序排列\n        int N = a.length;\n        for (int i = 1; i < N; i++)\n        {\n            // 将 a[i] 插入到 a[i-1]、a[i-2]、a[i-3]...之中\n            for (int j = i; j > 0 && less(a[j], a[j-1]); j--)\n            exch(a, j, j-1);\n        }\n    }\n    // less()、exch()、isSorted()和main()方法见“排序算法类模板”\n}`, `2105368422204123600`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="java"\n              >\n                <span class="gatsby-code-button-language">java</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="java"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Insertion</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">sort</span><span class="token punctuation">(</span><span class="token class-name">Comparable</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span> <span class="token comment">// 将a[]按升序排列</span>\n        <span class="token keyword">int</span> <span class="token class-name">N</span> <span class="token operator">=</span> a<span class="token punctuation">.</span>length<span class="token punctuation">;</span>\n        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token class-name">N</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>\n        <span class="token punctuation">{</span>\n            <span class="token comment">// 将 a[i] 插入到 a[i-1]、a[i-2]、a[i-3]...之中</span>\n            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> i<span class="token punctuation">;</span> j <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token function">less</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> a<span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> j<span class="token operator">--</span><span class="token punctuation">)</span>\n            <span class="token function">exch</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> j<span class="token punctuation">,</span> j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n    <span class="token comment">// less()、exch()、isSorted()和main()方法见“排序算法类模板”</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="选择排序与插入排序的比较"><a href="#%E9%80%89%E6%8B%A9%E6%8E%92%E5%BA%8F%E4%B8%8E%E6%8F%92%E5%85%A5%E6%8E%92%E5%BA%8F%E7%9A%84%E6%AF%94%E8%BE%83" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>选择排序与插入排序的比较</h2>\n<h3 id="特点-2"><a href="#%E7%89%B9%E7%82%B9-2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>特点</h3>\n<blockquote>\n<ul>\n<li>对于随机排序的无重复主键的数组，插入排序和选择排序的运行时间是平方级别的，两者之比应该是一个较小的常数</li>\n</ul>\n</blockquote>\n<h2 id="希尔排序"><a href="#%E5%B8%8C%E5%B0%94%E6%8E%92%E5%BA%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>希尔排序</h2>\n<h3 id="思路-2"><a href="#%E6%80%9D%E8%B7%AF-2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>思路</h3>\n<blockquote>\n<p>希尔排序为了加快速度简单地改进了插入排序，交换不相邻的元素以对数组的局部进行排序，并最终用插入排序将局部有序的数组排序算法 2.3 的实现使用了序列 1/2（3 k -1），从 N /3 开始递减至 1。我们把这个序列称为递增序列。</p>\n</blockquote>\n<h3 id="特点-3"><a href="#%E7%89%B9%E7%82%B9-3" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>特点</h3>\n<blockquote>\n<ul>\n<li>透彻理解希尔排序的性能至今仍然是一项挑战</li>\n</ul>\n</blockquote>\n<ul>\n<li>插入排序的增量改进版</li>\n<li>使用递增序列 1, 4, 13, 40, 121, 364…的希尔排序所需的比较次数不会超出 N 的若干倍乘以递增序列的长度。</li>\n<li>对于中等大小的数组它的运行时间是可以接受的。它的代码量很小，且不需要使用额外的内存空间</li>\n</ul>\n<h3 id="实现-2"><a href="#%E5%AE%9E%E7%8E%B0-2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>实现</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="78870836851048890000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`public class Shell\n{\n    public static void sort(Comparable[] a)\n    { // 将a[]按升序排列\n        int N = a.length;\n        int h = 1;\n        while (h < N/3) h = 3*h + 1; // 1, 4, 13, 40, 121, 364, 1093, ...\n        while (h >= 1)\n        {   // 将数组变为h有序\n            for (int i = h; i < N; i++)\n            {   // 将a[i]插入到a[i-h], a[i-2*h], a[i-3*h]... 之中\n                for (int j = i; j >= h && less(a[j], a[j-h]); j -= h)\n                exch(a, j, j-h);\n            }\n            h = h/3;\n        }\n    }\n    // less()、exch()、isSorted()和main()方法见“排序算法类模板”\n}`, `78870836851048890000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="java"\n              >\n                <span class="gatsby-code-button-language">java</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="java"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Shell</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">sort</span><span class="token punctuation">(</span><span class="token class-name">Comparable</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span> <span class="token comment">// 将a[]按升序排列</span>\n        <span class="token keyword">int</span> <span class="token class-name">N</span> <span class="token operator">=</span> a<span class="token punctuation">.</span>length<span class="token punctuation">;</span>\n        <span class="token keyword">int</span> h <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>\n        <span class="token keyword">while</span> <span class="token punctuation">(</span>h <span class="token operator">&lt;</span> <span class="token class-name">N</span><span class="token operator">/</span><span class="token number">3</span><span class="token punctuation">)</span> h <span class="token operator">=</span> <span class="token number">3</span><span class="token operator">*</span>h <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// 1, 4, 13, 40, 121, 364, 1093, ...</span>\n        <span class="token keyword">while</span> <span class="token punctuation">(</span>h <span class="token operator">>=</span> <span class="token number">1</span><span class="token punctuation">)</span>\n        <span class="token punctuation">{</span>   <span class="token comment">// 将数组变为h有序</span>\n            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> h<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token class-name">N</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>\n            <span class="token punctuation">{</span>   <span class="token comment">// 将a[i]插入到a[i-h], a[i-2*h], a[i-3*h]... 之中</span>\n                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> i<span class="token punctuation">;</span> j <span class="token operator">>=</span> h <span class="token operator">&amp;&amp;</span> <span class="token function">less</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> a<span class="token punctuation">[</span>j<span class="token operator">-</span>h<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> j <span class="token operator">-=</span> h<span class="token punctuation">)</span>\n                <span class="token function">exch</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> j<span class="token punctuation">,</span> j<span class="token operator">-</span>h<span class="token punctuation">)</span><span class="token punctuation">;</span>\n            <span class="token punctuation">}</span>\n            h <span class="token operator">=</span> h<span class="token operator">/</span><span class="token number">3</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n    <span class="token comment">// less()、exch()、isSorted()和main()方法见“排序算法类模板”</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="归并排序"><a href="#%E5%BD%92%E5%B9%B6%E6%8E%92%E5%BA%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>归并排序</h2>\n<h3 id="思路-3"><a href="#%E6%80%9D%E8%B7%AF-3" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>思路</h3>\n<blockquote>\n<p>将两个有序的数组合并成一个更大的有序数组，递归的将两半排序，然后将结果归并起来。</p>\n</blockquote>\n<h3 id="特点-4"><a href="#%E7%89%B9%E7%82%B9-4" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>特点</h3>\n<blockquote>\n<ul>\n<li>优点：保证将任意长度为 N 的数组排序所需时间和 NlogN 成正比</li>\n</ul>\n</blockquote>\n<ul>\n<li>缺点：所需的额外空间和 N 成正比。</li>\n<li>对于长度为 N 的任意数组，自顶向下的归并排序需要<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn><mi mathvariant="normal">/</mi><mn>2</mn><mi>N</mi><mi>l</mi><mi>g</mi><mi>N</mi></mrow><annotation encoding="application/x-tex">1/2NlgN</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord">1</span><span class="mord">/</span><span class="mord">2</span><span class="mord mathit" style="margin-right:0.10903em;">N</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit" style="margin-right:0.10903em;">N</span></span></span></span>至 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>N</mi><mi>l</mi><mi>g</mi><mi>N</mi></mrow><annotation encoding="application/x-tex">NlgN</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.10903em;">N</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit" style="margin-right:0.10903em;">N</span></span></span></span> 次比较</li>\n<li>对于长度为 N 的任意数组，自顶向下的归并排序最多需要访问数组<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>6</mn><mi>N</mi><mi>l</mi><mi>g</mi><mi>N</mi></mrow><annotation encoding="application/x-tex">6NlgN</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="base"><span class="mord">6</span><span class="mord mathit" style="margin-right:0.10903em;">N</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit" style="margin-right:0.10903em;">N</span></span></span></span>次</li>\n<li>对于长度为 N 的任意数组，自底向上的归并排序需要 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn><mi mathvariant="normal">/</mi><mn>2</mn><mi>N</mi><mi>l</mi><mi>g</mi><mi>N</mi></mrow><annotation encoding="application/x-tex">1/2NlgN</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord">1</span><span class="mord">/</span><span class="mord">2</span><span class="mord mathit" style="margin-right:0.10903em;">N</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit" style="margin-right:0.10903em;">N</span></span></span></span> 至 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>N</mi><mi>l</mi><mi>g</mi><mi>N</mi></mrow><annotation encoding="application/x-tex">NlgN</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.10903em;">N</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit" style="margin-right:0.10903em;">N</span></span></span></span> 次比较，最多访问数组 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>6</mn><mi>N</mi><mi>l</mi><mi>g</mi><mi>N</mi></mrow><annotation encoding="application/x-tex">6NlgN</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="base"><span class="mord">6</span><span class="mord mathit" style="margin-right:0.10903em;">N</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit" style="margin-right:0.10903em;">N</span></span></span></span> 次</li>\n</ul>\n<h3 id="原地归并抽象方法"><a href="#%E5%8E%9F%E5%9C%B0%E5%BD%92%E5%B9%B6%E6%8A%BD%E8%B1%A1%E6%96%B9%E6%B3%95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>原地归并抽象方法</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="28315836295033290000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`public static void merge(Comparable[] a,int lo,int mid,int hi){\n    //将a[lo...mid]和a[mid+1...hi]归并\n    int i=lo,j=mid+1;\n    for(int k=lo;k<=hi;k++){\n        aux[k]=a[k];\n    }\n    for(int k=lo;k<=hi;k++){\n        // 左半边用尽（取右半边元素）,右半边用尽（取左半边元素），左半边大于右半边（取右半边元素），右半边大于左半边（取左半边元素）\n        if(i>mid) a[k]=aux[j++];\n        else if(j>hi) a[k]=aux[i++];\n        else if(less(aux[j],aux[i])) a[k]=aux[j++];\n        else a[k]=aux[i++];\n    }\n}`, `28315836295033290000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="java"\n              >\n                <span class="gatsby-code-button-language">java</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="java"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">merge</span><span class="token punctuation">(</span><span class="token class-name">Comparable</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a<span class="token punctuation">,</span><span class="token keyword">int</span> lo<span class="token punctuation">,</span><span class="token keyword">int</span> mid<span class="token punctuation">,</span><span class="token keyword">int</span> hi<span class="token punctuation">)</span><span class="token punctuation">{</span>\n    <span class="token comment">//将a[lo...mid]和a[mid+1...hi]归并</span>\n    <span class="token keyword">int</span> i<span class="token operator">=</span>lo<span class="token punctuation">,</span>j<span class="token operator">=</span>mid<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>\n    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> k<span class="token operator">=</span>lo<span class="token punctuation">;</span>k<span class="token operator">&lt;=</span>hi<span class="token punctuation">;</span>k<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n        aux<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token operator">=</span>a<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> k<span class="token operator">=</span>lo<span class="token punctuation">;</span>k<span class="token operator">&lt;=</span>hi<span class="token punctuation">;</span>k<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token comment">// 左半边用尽（取右半边元素）,右半边用尽（取左半边元素），左半边大于右半边（取右半边元素），右半边大于左半边（取左半边元素）</span>\n        <span class="token keyword">if</span><span class="token punctuation">(</span>i<span class="token operator">></span>mid<span class="token punctuation">)</span> a<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token operator">=</span>aux<span class="token punctuation">[</span>j<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n        <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>j<span class="token operator">></span>hi<span class="token punctuation">)</span> a<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token operator">=</span>aux<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n        <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">less</span><span class="token punctuation">(</span>aux<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span>aux<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> a<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token operator">=</span>aux<span class="token punctuation">[</span>j<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n        <span class="token keyword">else</span> a<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token operator">=</span>aux<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="自顶向下实现"><a href="#%E8%87%AA%E9%A1%B6%E5%90%91%E4%B8%8B%E5%AE%9E%E7%8E%B0" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>自顶向下实现</h3>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/QQ截图20180317123059-f99a81c8c831c00c2ffb8c400c121d28-c61f7.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 735px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 53.197278911564624%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB26FUf//EABcQAAMBAAAAAAAAAAAAAAAAAAABECH/2gAIAQEAAQUCrwU//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFBABAAAAAAAAAAAAAAAAAAAAIP/aAAgBAQAGPwJf/8QAGRAAAwEBAQAAAAAAAAAAAAAAAAERIUFx/9oACAEBAAE/IU9fpBCcGm6Q/9oADAMBAAIAAwAAABDgD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABsQAQACAgMAAAAAAAAAAAAAAAEAESFBMYGx/9oACAEBAAE/EFSV0qI2L3AVj2BSoRIMqgDgn//Z\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="QQ  20180317123059" title="" data-src="/static/QQ截图20180317123059-f99a81c8c831c00c2ffb8c400c121d28-c61f7.jpg" data-srcset="/static/QQ截图20180317123059-f99a81c8c831c00c2ffb8c400c121d28-b069f.jpg 200w,\n/static/QQ截图20180317123059-f99a81c8c831c00c2ffb8c400c121d28-815ce.jpg 400w,\n/static/QQ截图20180317123059-f99a81c8c831c00c2ffb8c400c121d28-c61f7.jpg 735w" data-sizes="(max-width: 735px) 100vw, 735px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="14633788325187625000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`public class Merge\n{\n    private static Comparable[] aux;\n    public static void sort(Comparable[] a){\n        aux=new Comparable[a.length];//一次性分配空间\n        sort(a,0,a.length-1);\n    }\n    private static void sort(Comparable[] a,int lo,int hi){\n        //将数组a[lo...hi]排序\n        if(hi<=lo) return;\n        int mid=lo+(hi-lo)/2;\n        sort(a,lo,mid);\n        sort(a,mid+1,hi);\n        merge(a,lo,mid,hi);\n    }\n}`, `14633788325187625000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="java"\n              >\n                <span class="gatsby-code-button-language">java</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="java"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Merge</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Comparable</span><span class="token punctuation">[</span><span class="token punctuation">]</span> aux<span class="token punctuation">;</span>\n    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">sort</span><span class="token punctuation">(</span><span class="token class-name">Comparable</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a<span class="token punctuation">)</span><span class="token punctuation">{</span>\n        aux<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Comparable</span><span class="token punctuation">[</span>a<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//一次性分配空间</span>\n        <span class="token function">sort</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>a<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">sort</span><span class="token punctuation">(</span><span class="token class-name">Comparable</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a<span class="token punctuation">,</span><span class="token keyword">int</span> lo<span class="token punctuation">,</span><span class="token keyword">int</span> hi<span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token comment">//将数组a[lo...hi]排序</span>\n        <span class="token keyword">if</span><span class="token punctuation">(</span>hi<span class="token operator">&lt;=</span>lo<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>\n        <span class="token keyword">int</span> mid<span class="token operator">=</span>lo<span class="token operator">+</span><span class="token punctuation">(</span>hi<span class="token operator">-</span>lo<span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>\n        <span class="token function">sort</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>lo<span class="token punctuation">,</span>mid<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token function">sort</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>mid<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>hi<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token function">merge</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>lo<span class="token punctuation">,</span>mid<span class="token punctuation">,</span>hi<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="自底向上实现"><a href="#%E8%87%AA%E5%BA%95%E5%90%91%E4%B8%8A%E5%AE%9E%E7%8E%B0" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>自底向上实现</h3>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/QQ截图20180317123009-cc093f2baa3f3268910109c0db7b1927-1a3db.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 57.0362473347548%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAdlkFjD/xAAYEAACAwAAAAAAAAAAAAAAAAABQQAQEf/aAAgBAQABBQJ0gdM//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFBABAAAAAAAAAAAAAAAAAAAAIP/aAAgBAQAGPwJf/8QAGRABAAMBAQAAAAAAAAAAAAAAAQARMRAh/9oACAEBAAE/Ibbg+RCGRKSbGW+f/9oADAMBAAIAAwAAABAjD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABwQAQACAgMBAAAAAAAAAAAAAAEAESExQVFhsf/aAAgBAQABPxBTiAqXt/YQwhEq2v2EDsDqGNT/2Q==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="QQ  20180317123009" title="" data-src="/static/QQ截图20180317123009-cc093f2baa3f3268910109c0db7b1927-dfbfc.jpg" data-srcset="/static/QQ截图20180317123009-cc093f2baa3f3268910109c0db7b1927-75a98.jpg 200w,\n/static/QQ截图20180317123009-cc093f2baa3f3268910109c0db7b1927-1f451.jpg 400w,\n/static/QQ截图20180317123009-cc093f2baa3f3268910109c0db7b1927-dfbfc.jpg 800w,\n/static/QQ截图20180317123009-cc093f2baa3f3268910109c0db7b1927-1a3db.jpg 938w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="54352686439234880000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`public class MergeBU\n{\n    private static Comparable[] aux;\n    public static void sort(Comparable[] a){\n        int N=a.length;\n        aux=new Comparable[N];\n        //sz：子数组大小\n        for(int sz=1;sz<N;sz=sz+sz){\n            //lo：子数组索引\n            for(int lo=0;lo<N-sz;lo+=sz+sz){\n                merge(a,lo,lo+sz-1,Math.min(lo+sz+sz-1,N-1));\n            }\n        }\n    }\n}`, `54352686439234880000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="java"\n              >\n                <span class="gatsby-code-button-language">java</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="java"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MergeBU</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Comparable</span><span class="token punctuation">[</span><span class="token punctuation">]</span> aux<span class="token punctuation">;</span>\n    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">sort</span><span class="token punctuation">(</span><span class="token class-name">Comparable</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a<span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token keyword">int</span> <span class="token class-name">N</span><span class="token operator">=</span>a<span class="token punctuation">.</span>length<span class="token punctuation">;</span>\n        aux<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Comparable</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n        <span class="token comment">//sz：子数组大小</span>\n        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> sz<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>sz<span class="token operator">&lt;</span><span class="token class-name">N</span><span class="token punctuation">;</span>sz<span class="token operator">=</span>sz<span class="token operator">+</span>sz<span class="token punctuation">)</span><span class="token punctuation">{</span>\n            <span class="token comment">//lo：子数组索引</span>\n            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> lo<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>lo<span class="token operator">&lt;</span><span class="token class-name">N</span><span class="token operator">-</span>sz<span class="token punctuation">;</span>lo<span class="token operator">+=</span>sz<span class="token operator">+</span>sz<span class="token punctuation">)</span><span class="token punctuation">{</span>\n                <span class="token function">merge</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>lo<span class="token punctuation">,</span>lo<span class="token operator">+</span>sz<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>lo<span class="token operator">+</span>sz<span class="token operator">+</span>sz<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token class-name">N</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n            <span class="token punctuation">}</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="改进方法"><a href="#%E6%94%B9%E8%BF%9B%E6%96%B9%E6%B3%95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>改进方法</h3>\n<blockquote>\n<ul>\n<li>对小规模子数组使用插入排序。</li>\n</ul>\n</blockquote>\n<ul>\n<li>测试数组是否已经有序：如果 a[mid]小于等于 a[mid+1]，我们认为数组已经有序并跳过 merge 方法。</li>\n<li>不将元素复制到辅助数组。</li>\n</ul>\n<h2 id="快速排序"><a href="#%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>快速排序</h2>\n<h3 id="思路-4"><a href="#%E6%80%9D%E8%B7%AF-4" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>思路</h3>\n<blockquote>\n<p>是一种分治的排序算法，将一个数组分成两个子数组，将两部分独立的排序。</p>\n</blockquote>\n<h3 id="特点-5"><a href="#%E7%89%B9%E7%82%B9-5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>特点</h3>\n<blockquote>\n<ul>\n<li>原地排序，且与长度为 N 的数组排序所需的时间和 NlgN 成正比。</li>\n</ul>\n</blockquote>\n<ul>\n<li>缺点是非常脆弱，实现时要小心避免低劣的性能，可能会降级到平方级别</li>\n<li>快速排序和归并排序是互补的：归并排序将数组分成两个子数组分别排序，递归调用发生在处理整个数组之前；而快速排序是指当数组的两个子数组都有序时整个数组也就自然有序了，递归调用发生在处理整个数组之后。</li>\n<li>归并排序中，一个数组被切分成两半；而对于快速排序，切分的位置取决于数组的内容。</li>\n<li>将长度为 N 的无重复数组排序，快速排序平均需要~2NlgN 次比较（以及 1/6 次交换）。</li>\n<li>快速排序最多需要约<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>N</mi><mn>2</mn></msup><mi mathvariant="normal">/</mi><mn>2</mn></mrow><annotation encoding="application/x-tex">N^2/2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8141079999999999em;"></span><span class="strut bottom" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mord">/</span><span class="mord">2</span></span></span></span>次比较，但随机打乱数组能够预防这种情况。</li>\n<li>对于大小为 N 的数组，算法的运行时间在 1.39NlgN 的某个常数因子的范围之内。比归并排序更快，因为它移动数据的次数更少，虽然比较次数多了 39%。</li>\n</ul>\n<h3 id="实现-3"><a href="#%E5%AE%9E%E7%8E%B0-3" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>实现</h3>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/QQ截图20180317150548-3169203454087a31c75a75caf6dd41dc-d3be2.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 777px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 37.96653796653796%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAIABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAdyAsD//xAAUEAEAAAAAAAAAAAAAAAAAAAAQ/9oACAEBAAEFAn//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAQ/9oACAEBAAY/An//xAAaEAACAgMAAAAAAAAAAAAAAAAAAREhMVFx/9oACAEBAAE/Ib1Bxiwf/9oADAMBAAIAAwAAABBwD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABkQAQACAwAAAAAAAAAAAAAAAAEAESExcf/aAAgBAQABPxC0qrplquQmif/Z\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="QQ  20180317150548" title="" data-src="/static/QQ截图20180317150548-3169203454087a31c75a75caf6dd41dc-d3be2.jpg" data-srcset="/static/QQ截图20180317150548-3169203454087a31c75a75caf6dd41dc-97672.jpg 200w,\n/static/QQ截图20180317150548-3169203454087a31c75a75caf6dd41dc-6eace.jpg 400w,\n/static/QQ截图20180317150548-3169203454087a31c75a75caf6dd41dc-d3be2.jpg 777w" data-sizes="(max-width: 777px) 100vw, 777px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="8623818328239397000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`public class Quick\n{\n    public static void sort(Comparable[] a){\n        // 消除对输入的依赖，避免切分不平衡\n        StdRandom.shuffle(a);\n        sort(a,0,a.length-1);\n    }\n    private static void sort(Comparable[] a,int lo,int hi){\n        if(lo>=hi) return;\n        int j=partition(a,lo,hi);\n        sort(a,lo,j-1);\n        sort(a,j+1,hi);\n    }\n    private static int partition(Comparable[] a,int lo,int hi){\n        int i=lo,j=hi+1;\n        Comparable v=a[lo];\n        while(true){\n            while(less(a[++i],v)) if(i==hi) break;\n            while(less(v,a[--j])) if(j==lo) break;\n            // 避免指针错过\n            if(i>=j) break;\n            exch(a,i,j);\n        }\n        //将v=a[j]放入正确的位置\n        exch(a,lo,j);\n        return j;\n    }\n}`, `8623818328239397000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="java"\n              >\n                <span class="gatsby-code-button-language">java</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="java"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Quick</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">sort</span><span class="token punctuation">(</span><span class="token class-name">Comparable</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a<span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token comment">// 消除对输入的依赖，避免切分不平衡</span>\n        <span class="token class-name">StdRandom</span><span class="token punctuation">.</span><span class="token function">shuffle</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token function">sort</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>a<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">sort</span><span class="token punctuation">(</span><span class="token class-name">Comparable</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a<span class="token punctuation">,</span><span class="token keyword">int</span> lo<span class="token punctuation">,</span><span class="token keyword">int</span> hi<span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token keyword">if</span><span class="token punctuation">(</span>lo<span class="token operator">>=</span>hi<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>\n        <span class="token keyword">int</span> j<span class="token operator">=</span><span class="token function">partition</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>lo<span class="token punctuation">,</span>hi<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token function">sort</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>lo<span class="token punctuation">,</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token function">sort</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>hi<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">partition</span><span class="token punctuation">(</span><span class="token class-name">Comparable</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a<span class="token punctuation">,</span><span class="token keyword">int</span> lo<span class="token punctuation">,</span><span class="token keyword">int</span> hi<span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token keyword">int</span> i<span class="token operator">=</span>lo<span class="token punctuation">,</span>j<span class="token operator">=</span>hi<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>\n        <span class="token class-name">Comparable</span> v<span class="token operator">=</span>a<span class="token punctuation">[</span>lo<span class="token punctuation">]</span><span class="token punctuation">;</span>\n        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n            <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token function">less</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span><span class="token operator">++</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>v<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">if</span><span class="token punctuation">(</span>i<span class="token operator">==</span>hi<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span>\n            <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token function">less</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span>a<span class="token punctuation">[</span><span class="token operator">--</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">if</span><span class="token punctuation">(</span>j<span class="token operator">==</span>lo<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span>\n            <span class="token comment">// 避免指针错过</span>\n            <span class="token keyword">if</span><span class="token punctuation">(</span>i<span class="token operator">>=</span>j<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span>\n            <span class="token function">exch</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>i<span class="token punctuation">,</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n        <span class="token comment">//将v=a[j]放入正确的位置</span>\n        <span class="token function">exch</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>lo<span class="token punctuation">,</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">return</span> j<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="算法改进"><a href="#%E7%AE%97%E6%B3%95%E6%94%B9%E8%BF%9B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>算法改进</h3>\n<blockquote>\n<ul>\n<li>切换到插入排序：if(hi&#x3C;=lo) return;替换为 if(hi&#x3C;=lo+M) {Insertion.sort(a,lo,hi); return;}，转换参数 M 的最佳值和系统相关一般取 5~15 之间。</li>\n</ul>\n</blockquote>\n<ul>\n<li>三取样切分：使用子数组的一小部分元素的中位数来切分数组，当取样大小设为 3 并用大小居中的元素切分的效果最好。还可以将取样元素放在数组末尾作为“哨兵”来去掉 partition()中的数组边界测试。</li>\n<li>熵最优排序：将数组切分为 3 部分，分别对应小于，等于和大于切分元素的数组元素。</li>\n</ul>\n<h3 id="三向切分的快速排序"><a href="#%E4%B8%89%E5%90%91%E5%88%87%E5%88%86%E7%9A%84%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>三向切分的快速排序</h3>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180318111808-f4d74961fb1b3865f1c7ad343666e689-ad786.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 457px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 88.40262582056894%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAAAsSAAALEgHS3X78AAAB5ElEQVQ4y0XUx3IiUQwF0P7/b4NylafAmGgTbHI0eTOHd2ewFirlK6mfurpcLvf7Hf/+/t7v9+fzmYwfj8fT6URYLpdvb2+73e5Y6KdQXNVqtaLMZrNutzsYDDqdzsfHx+fnZ/c/tVqt19fXCHij0Xh5ecG322212Wzkz+fzr68v5ZM5Ho+HwyGZ0Ov1BoX6/T5ju91WApdVrddrOYvFQpxmtCBIVUVxLgHi8FjIjJAeyImDrKoxqJPJhGwFSVNuOp3OCy0KEUajkQVVyiRZt5Izvy7wAFoYL/5URRIsr0pj6imm7cPhoCUloAnSSJADmELs8MRU0DM2a76EUEHAgyAtlgiMaeE3GUKSD4WAZ1olsqRsSwkNbgr9azs+VbVNTXKi1bX858LYJWeRj+Rsm269kql6EZRvI8izofJqWJUEw3i8MDj5dKweJlVJQSyq4HLSP2TeGHHBlblNEhOdKlmcWuzrQp5aBuEVGYDb7fZAzpx82ubL08+Q6cgskG17X0iwgOv1+kjWVRYoOfNk+aKzG7KZPe9c3m/bGsgl5hh3hZ4PPm8jsMtCanm/lvLYNnQ+F+vi/hQy3vv7u6Mj12o1B9RsNp1hvV5P2PPsK3+CLPz5hviohHxVgjvRs9sksCQT6l9Q0eCb9Qa08wAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180318111808" title="" data-src="/static/微信截图_20180318111808-f4d74961fb1b3865f1c7ad343666e689-ad786.png" data-srcset="/static/微信截图_20180318111808-f4d74961fb1b3865f1c7ad343666e689-aaeb0.png 200w,\n/static/微信截图_20180318111808-f4d74961fb1b3865f1c7ad343666e689-4d187.png 400w,\n/static/微信截图_20180318111808-f4d74961fb1b3865f1c7ad343666e689-ad786.png 457w" data-sizes="(max-width: 457px) 100vw, 457px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="55152845312584065000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 适用于多个重复主键的元素，对于此情况，它将排序时间从线性对数降低到了线性级别。\npublic class Quick3way\n{\n    private static void sort(Comparable[] a,int lo,int hi)\n    {\n        if(hi<=lo) return;\n        int lt=lo,i=lo+1,gt=hi;\n        Comparable v=a[lo];\n        while(i<=gt){\n            int cmp=a[i].compareTo(v);\n            if(cmp<0) exch(a,lt++,i++);\n            else if(cmp>0) exch(a,gt--,i);\n            else i++;\n        }\n        sort(a,lo,lt-1);\n        sort(a,gt+1,hi);\n    }\n}`, `55152845312584065000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="java"\n              >\n                <span class="gatsby-code-button-language">java</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="java"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token comment">// 适用于多个重复主键的元素，对于此情况，它将排序时间从线性对数降低到了线性级别。</span>\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Quick3way</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">sort</span><span class="token punctuation">(</span><span class="token class-name">Comparable</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a<span class="token punctuation">,</span><span class="token keyword">int</span> lo<span class="token punctuation">,</span><span class="token keyword">int</span> hi<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">if</span><span class="token punctuation">(</span>hi<span class="token operator">&lt;=</span>lo<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>\n        <span class="token keyword">int</span> lt<span class="token operator">=</span>lo<span class="token punctuation">,</span>i<span class="token operator">=</span>lo<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>gt<span class="token operator">=</span>hi<span class="token punctuation">;</span>\n        <span class="token class-name">Comparable</span> v<span class="token operator">=</span>a<span class="token punctuation">[</span>lo<span class="token punctuation">]</span><span class="token punctuation">;</span>\n        <span class="token keyword">while</span><span class="token punctuation">(</span>i<span class="token operator">&lt;=</span>gt<span class="token punctuation">)</span><span class="token punctuation">{</span>\n            <span class="token keyword">int</span> cmp<span class="token operator">=</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>\n            <span class="token keyword">if</span><span class="token punctuation">(</span>cmp<span class="token operator">&lt;</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token function">exch</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>lt<span class="token operator">++</span><span class="token punctuation">,</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n            <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>cmp<span class="token operator">></span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token function">exch</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>gt<span class="token operator">--</span><span class="token punctuation">,</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>\n            <span class="token keyword">else</span> i<span class="token operator">++</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n        <span class="token function">sort</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>lo<span class="token punctuation">,</span>lt<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token function">sort</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>gt<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>hi<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="优先队列"><a href="#%E4%BC%98%E5%85%88%E9%98%9F%E5%88%97" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>优先队列</h2>\n<h3 id="思路-5"><a href="#%E6%80%9D%E8%B7%AF-5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>思路</h3>\n<blockquote>\n<p>利用二叉树的最大堆</p>\n</blockquote>\n<h3 id="特点-6"><a href="#%E7%89%B9%E7%82%B9-6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>特点</h3>\n<blockquote>\n<ul>\n<li>插入元素和删除最大元素的操作用时和队列大小成对数关系。</li>\n</ul>\n</blockquote>\n<ul>\n<li>对于一个含有 N 个元素的基于堆的优先队列，插入元素操作只需不超过(lgN+1)次比较，删除最大元素的操作需要不超过 2lgN 次比较。</li>\n<li>在一个大小为 N 的索引优先队列中，插入元素、改变优先级、删除和删除最小元素操作所需比较次数和 logN 成正比。</li>\n</ul>\n<h3 id="基于堆的优先队列"><a href="#%E5%9F%BA%E4%BA%8E%E5%A0%86%E7%9A%84%E4%BC%98%E5%85%88%E9%98%9F%E5%88%97" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>基于堆的优先队列</h3>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180318154628-598802449ac6c25c3af214f0dde988a0-092d7.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 626px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 70.12779552715655%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsSAAALEgHS3X78AAABoklEQVQoz2XS185aMRAE4PP+jwUXgASCC3rvvYbe8/E7OiKJLyzbO7s7M+tot9sNBgP7+/1+PB6Hw+H1er2/1vP5rNfrnU5HyHWz2dzv918/K7rdbtfrdb/fr9dr+3w+XywWwnGyWsfjUXQ2m0kYDoeaqTUejyPh0+kkZzKZiIHqs1qtQlrIv1wukgG2261ru90OgEgTaN0EhBVSWPlAMpSAnk6npJXLZTt8oVA4n8+Rqu4IQzsr4bpcLmkLyXR5QQoA81qt1mg0EolEs9mMYoQYhA6B/PvvxUutFC0Wi61WK5lMlkqlT7JXhPv9voO0arUatH1rZgoA5VhUKpVer/dxW0k0lJRAkid8HLgQt6U5WC3feyqVyufzdEW6sS5I4j4QFrlcTsVvq3c/y1ABMpmMzh/DhINaMXeamff+byGoJ7eQkg+M6R/N3W43m82Gf8aJMMbwvYCUo9N4lPbIFNPy+PlhRBKAczqdlo9kPKeQD2340JLhUSAN7KM5oMUCIvgM5P9gqzOr7eh4jIt+3P4eSXyWNhqNwp/DNhD5Z/jM+w0JLBP8LkcBkQAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180318154628" title="" data-src="/static/微信截图_20180318154628-598802449ac6c25c3af214f0dde988a0-092d7.png" data-srcset="/static/微信截图_20180318154628-598802449ac6c25c3af214f0dde988a0-52e9c.png 200w,\n/static/微信截图_20180318154628-598802449ac6c25c3af214f0dde988a0-39c77.png 400w,\n/static/微信截图_20180318154628-598802449ac6c25c3af214f0dde988a0-092d7.png 626w" data-sizes="(max-width: 626px) 100vw, 626px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="21246996343111467000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`public class MaxPQ<Key extends Comparable<Key>>\n{\n\n    private Key[] pq;\n    private int N=0;\n    public MaxPQ(int maxN){\n        pq=(Key[])new Comparable[maxN+1];\n    }\n    public boolean isEmpty(){\n        return N==0;\n    }\n    public int size(){\n        return N;\n    }\n    public void insert(Key v){\n        pq[++N]=v;\n        swim(N);\n    }\n    public Key delMax(){\n        //从根节点得到最大元素\n        Key max=pq[1];\n        //将其和最后一个节点交换\n        exch(1,N--);\n        //防止越界\n        pq[N+1]=null;\n        //恢复堆的有序性\n        sink(1);\n        return max;\n    }\n    private boolean less(int i,int j){\n        return pq[i].compareTo(pq[j])<0;\n    }\n    private void exch(int i,int j){\n        Key t=pq[i];pq[i]=pq[j];pq[j]=t;\n    }\n    private void swim(int k){\n        while(k>1&&less(k/2,k)){\n            exch(k,k/2);\n            k=k/2;\n        }\n    }\n    private void sink(int k){\n        while(2*k<=N){\n            int j=2*k;\n            // 放在右子树\n            if(j<N&&less(j,j+1)) j++;\n            if(!less(k,j)) break;\n            exch(j,k);\n            k=j;\n        }\n    }\n}`, `21246996343111467000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="java"\n              >\n                <span class="gatsby-code-button-language">java</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="java"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MaxPQ</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Key</span> <span class="token keyword">extends</span> <span class="token class-name">Comparable</span><span class="token punctuation">&lt;</span><span class="token class-name">Key</span><span class="token punctuation">></span><span class="token punctuation">></span></span>\n<span class="token punctuation">{</span>\n\n    <span class="token keyword">private</span> <span class="token class-name">Key</span><span class="token punctuation">[</span><span class="token punctuation">]</span> pq<span class="token punctuation">;</span>\n    <span class="token keyword">private</span> <span class="token keyword">int</span> <span class="token class-name">N</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>\n    <span class="token keyword">public</span> <span class="token class-name">MaxPQ</span><span class="token punctuation">(</span><span class="token keyword">int</span> maxN<span class="token punctuation">)</span><span class="token punctuation">{</span>\n        pq<span class="token operator">=</span><span class="token punctuation">(</span><span class="token class-name">Key</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">new</span> <span class="token class-name">Comparable</span><span class="token punctuation">[</span>maxN<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token keyword">return</span> <span class="token class-name">N</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token keyword">return</span> <span class="token class-name">N</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">insert</span><span class="token punctuation">(</span><span class="token class-name">Key</span> v<span class="token punctuation">)</span><span class="token punctuation">{</span>\n        pq<span class="token punctuation">[</span><span class="token operator">++</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token operator">=</span>v<span class="token punctuation">;</span>\n        <span class="token function">swim</span><span class="token punctuation">(</span><span class="token class-name">N</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token class-name">Key</span> <span class="token function">delMax</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token comment">//从根节点得到最大元素</span>\n        <span class="token class-name">Key</span> max<span class="token operator">=</span>pq<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n        <span class="token comment">//将其和最后一个节点交换</span>\n        <span class="token function">exch</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token class-name">N</span><span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token comment">//防止越界</span>\n        pq<span class="token punctuation">[</span><span class="token class-name">N</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span>\n        <span class="token comment">//恢复堆的有序性</span>\n        <span class="token function">sink</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">return</span> max<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">private</span> <span class="token keyword">boolean</span> <span class="token function">less</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">,</span><span class="token keyword">int</span> j<span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token keyword">return</span> pq<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>pq<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token number">0</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">exch</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">,</span><span class="token keyword">int</span> j<span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token class-name">Key</span> t<span class="token operator">=</span>pq<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>pq<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span>pq<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>pq<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">=</span>t<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">swim</span><span class="token punctuation">(</span><span class="token keyword">int</span> k<span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token keyword">while</span><span class="token punctuation">(</span>k<span class="token operator">></span><span class="token number">1</span><span class="token operator">&amp;&amp;</span><span class="token function">less</span><span class="token punctuation">(</span>k<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span>k<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n            <span class="token function">exch</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span>k<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n            k<span class="token operator">=</span>k<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">sink</span><span class="token punctuation">(</span><span class="token keyword">int</span> k<span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">*</span>k<span class="token operator">&lt;=</span><span class="token class-name">N</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n            <span class="token keyword">int</span> j<span class="token operator">=</span><span class="token number">2</span><span class="token operator">*</span>k<span class="token punctuation">;</span>\n            <span class="token comment">// 放在右子树</span>\n            <span class="token keyword">if</span><span class="token punctuation">(</span>j<span class="token operator">&lt;</span><span class="token class-name">N</span><span class="token operator">&amp;&amp;</span><span class="token function">less</span><span class="token punctuation">(</span>j<span class="token punctuation">,</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> j<span class="token operator">++</span><span class="token punctuation">;</span>\n            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">less</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span>j<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span>\n            <span class="token function">exch</span><span class="token punctuation">(</span>j<span class="token punctuation">,</span>k<span class="token punctuation">)</span><span class="token punctuation">;</span>\n            k<span class="token operator">=</span>j<span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="算法改进-1"><a href="#%E7%AE%97%E6%B3%95%E6%94%B9%E8%BF%9B-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>算法改进</h3>\n<blockquote>\n<ul>\n<li>多叉堆：三叉树或 N 叉树</li>\n</ul>\n</blockquote>\n<ul>\n<li>调整数组大小：添加一个无参数的构造函数，在 insert()添加将数组长度加倍的代码，在 delMax()中添加将数组长度减半的代码。</li>\n<li>元素的不可变性：假设用例代码不会改变优先队列转换为强制条件，一般不会这么做。</li>\n<li>索引优先队列：允许用例引用已经进入优先队列中的元素，给每个元素一个索引。</li>\n</ul>\n<h3 id="使用优先队列的多向归并"><a href="#%E4%BD%BF%E7%94%A8%E4%BC%98%E5%85%88%E9%98%9F%E5%88%97%E7%9A%84%E5%A4%9A%E5%90%91%E5%BD%92%E5%B9%B6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>使用优先队列的多向归并</h3>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180318172514-e30623bf4382591bdc105fb69cb4a9ce-01991.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 671px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 23.546944858420265%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsSAAALEgHS3X78AAAAx0lEQVQY0yWQS69EQBCF/f8/JbEiuIhYCNczxHtBBj2MzDfdZ1Fdr3OqqrW2bfu+H4ZhmqZ5ntd1fUtc13Xf90dCCEGGEHue53EcLwnNMAzLsv4k8jwfx/GSgPM8j7KKqYQoobXv+48M0/O8IAjiOK6qivmU0RYSagVaGYhPBoeQBbdt03RdN00TiSiKIHMC3Wma2rbNLui6rqsc3/exjuOEYZgkCZdqPGVZ1nXdNE3XdcuyMIGPyLIMLfJYzimKQjn/EoR0fgFXPhCVK7GKfAAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180318172514" title="" data-src="/static/微信截图_20180318172514-e30623bf4382591bdc105fb69cb4a9ce-01991.png" data-srcset="/static/微信截图_20180318172514-e30623bf4382591bdc105fb69cb4a9ce-0bc2c.png 200w,\n/static/微信截图_20180318172514-e30623bf4382591bdc105fb69cb4a9ce-6bec7.png 400w,\n/static/微信截图_20180318172514-e30623bf4382591bdc105fb69cb4a9ce-01991.png 671w" data-sizes="(max-width: 671px) 100vw, 671px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<ol>\n<li>streams 大小是 N，对应 N 行有序数据（每一行有多个字符串，而且是有序的）。</li>\n<li>merge 里面，第一个 for 循环，根据每行第一个字符串，建立小根堆（可以找出 N 个字符串中最小的一个。因为每一行也是有序的，所以也是 N 行所有字符串中最小的）。</li>\n<li>while 是每次输出 N 行中最小的字符串。输出后，删掉这个最小的字符串。但是该字符串所在的行可能后面还有其它的字符串（if），所以，把下一个字符串重新参与 N 行首字符串建立的小根堆。</li>\n<li>直观过程：N 行的 N 个首字符串--->划掉最小的，并输出之--->划掉的那一个所在行的下一个字符串加入进来，仍然是 N 个字符串。（当然，没有下一个字符串的行就不用管了）--->划掉最小的，并输出之--->（重复）--->一直到划掉所有的字符串。</li>\n<li>比如，有三个班级要进行体检，每次体检都从每个班来一个人进屋体检，每个班级都按生日排好序（比如从 1 月到 12 月往后排），但是医生只有一个，每个人体检结束之后，叫自己班的人进屋。每次体检需要按照屋里面人的生日顺序进行体检，直到所有人都体检结束</li>\n</ol>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="15775745796996432000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`public class Multiway\n{\n    public static void merge(In[] streams){\n        int N=streams.length;\n        IndexMinPQ<String> pq=new IndexMinPQ<String>(N);\n        for(int i=0;i<N;i++){\n            if(!streams[i].isEmpty()){\n                pq.insert(i,streams[i].readString());\n            }\n        }\n        while(!pq.isEmpty()){\n            StdOut.println(pq.min());\n            int i=pq.delMin();\n            // 将该输入的下一个字符串添加为一个元素\n            if(!streams[i].isEmpty()){\n                pq.insert(i,streams[i].readString());\n            }\n        }\n    }\n    public static void main(String[] args){\n        int N=args.length;\n        In[] streams=new In[N];\n        for(int i=0;i<N;i++){\n            streams[i]=new In(args[i]);\n        }\n        merge(streams);\n    }\n}`, `15775745796996432000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="java"\n              >\n                <span class="gatsby-code-button-language">java</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="java"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Multiway</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">merge</span><span class="token punctuation">(</span><span class="token class-name">In</span><span class="token punctuation">[</span><span class="token punctuation">]</span> streams<span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token keyword">int</span> <span class="token class-name">N</span><span class="token operator">=</span>streams<span class="token punctuation">.</span>length<span class="token punctuation">;</span>\n        <span class="token class-name">IndexMinPQ</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> pq<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">IndexMinPQ</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token class-name">N</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token class-name">N</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>streams<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n                pq<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span>streams<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">readString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n            <span class="token punctuation">}</span>\n        <span class="token punctuation">}</span>\n        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>pq<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n            <span class="token class-name">StdOut</span><span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>pq<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n            <span class="token keyword">int</span> i<span class="token operator">=</span>pq<span class="token punctuation">.</span><span class="token function">delMin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n            <span class="token comment">// 将该输入的下一个字符串添加为一个元素</span>\n            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>streams<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n                pq<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span>streams<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">readString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n            <span class="token punctuation">}</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token keyword">int</span> <span class="token class-name">N</span><span class="token operator">=</span>args<span class="token punctuation">.</span>length<span class="token punctuation">;</span>\n        <span class="token class-name">In</span><span class="token punctuation">[</span><span class="token punctuation">]</span> streams<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">In</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token class-name">N</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n            streams<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">In</span><span class="token punctuation">(</span>args<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n        <span class="token function">merge</span><span class="token punctuation">(</span>streams<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="堆排序"><a href="#%E5%A0%86%E6%8E%92%E5%BA%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>堆排序</h2>\n<h3 id="思路-6"><a href="#%E6%80%9D%E8%B7%AF-6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>思路</h3>\n<blockquote>\n<p>把任意优先队列变成一种排序方法，将所有元素插入一个查找最小元素的优先队列，然后重复调用删除最小元素的操作来将他们按顺序删去。</p>\n</blockquote>\n<h3 id="特点-7"><a href="#%E7%89%B9%E7%82%B9-7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>特点</h3>\n<blockquote>\n<ul>\n<li>用下沉操作由 N 个元素构造堆只需少于 2N 次比较以及少于 N 次交换。</li>\n</ul>\n</blockquote>\n<ul>\n<li>将 N 个元素排序，堆排序只需少于(2NlgN+2N)次比较(以及一半次数的交换)。</li>\n<li>同时最优的利用空间和时间的方法，在最坏情况下也能保证使用~2NlgN 次比较和恒定的额外空间。</li>\n<li>空间十分紧张时很适用，但现代系统很少使用，因为缓存未命中次数远远高于在相邻元素间比较的算法，如快速排序，归并排序，甚至是希尔排序。</li>\n</ul>\n<h3 id="实现-4"><a href="#%E5%AE%9E%E7%8E%B0-4" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>实现</h3>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180318184857-5ef6f5cf3a43f1b8fb9048c8e2a2b411-70aed.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 425px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 112.47058823529412%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAIAAABPIytRAAAACXBIWXMAAAsSAAALEgHS3X78AAACi0lEQVQ4y1XUzTNrQRAF8Pv/b+1sULY2ysJGlcKCQkXEtxAhEZH4LB9PYfF+d45S7/Viqmd6zjndPX1vdXd3NxqNut3uzc1Ns9nsdDrHx8dnZ2fW/f39VqvVaDR2d3dPTk52dnY4Kysrq6urm5ub9/f3FczCwsLy8jKWq6urw8PDVjFXj46O9vb2OI1i6+vrW1tbBBJ1v7q+vibbbrcxPT8/Pz4+csbj8e3t7cPDw+XlJWdUbDgcWgkcHBxcXFzUysAAvV4P059ir6+vTmyVIAowLnZ6ekoDeDAYyBd1nTYOCtaPj4/39/e3tzdIZVuxpAuk+v0+mERAZFGD7f8Ff35+wtBxA75frFdMz7QQF2QkK0zytIHhDIvZpv9yBkNta6WfQn6UnWr19vY2JntqTgBUmCTPz8+lTVbB3WLEVV4rO93Y2NBAysC4wXJJyJq0yXoh74SL70XrpxJTobBVe9wmniYBuxqkNZr/KT89PaUwTPzIui2XdEu2WAwMAMcJRhXVNb+8vMAErGECMgemb7xw8cGcmyrd1gV4UZlWb8WApcHRTAAxmGax1OVQzQ49gTvonFfUKdu4YTx1IiPBUGRLVvIpGxJFp1iVSXSaeXI1T2IVppZPShQYI5kUUisDeHEb4YxanjqNxeVER9O8tJ0DovgfcJSV0C6W13YPbFAsOdMIaRpR1wwf5YBVmNcOL3zq/E04jlD9VeUTlYa0gfl0fmGZMFyZrYy9LafymGZ7aWkp75wk0wXgfAxR03md4+QPVY/n19eXLzGNpWmSVIs1bXebk59R/mFpWDSq7+9v37B/2tTU1Pz8/Nzc3MzMDGLO2tra4uKi7eTk5MTExPT09OzsLK4komF/AZqeg0AUYc8pAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180318184857" title="" data-src="/static/微信截图_20180318184857-5ef6f5cf3a43f1b8fb9048c8e2a2b411-70aed.png" data-srcset="/static/微信截图_20180318184857-5ef6f5cf3a43f1b8fb9048c8e2a2b411-fdbe5.png 200w,\n/static/微信截图_20180318184857-5ef6f5cf3a43f1b8fb9048c8e2a2b411-58694.png 400w,\n/static/微信截图_20180318184857-5ef6f5cf3a43f1b8fb9048c8e2a2b411-70aed.png 425w" data-sizes="(max-width: 425px) 100vw, 425px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180318185323-0efdf2fc055a177eaed4a4b747463cee-aec66.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 700px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 123.28571428571429%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAZCAIAAAC+dZmEAAAACXBIWXMAAAsSAAALEgHS3X78AAACo0lEQVQ4y03U6U5iQRAF4Pv+74WJCWpE1OCG4ACyiKKAsmjm63scMvWj0326llNLd7XZbLbb7Vst39/f21p2u91+v//5+bGnAJ/P56+vr/D1eg1x+/X1VdmBFovF8/MzjU0tMWbz+fnJBs719fX1/f39cDgcj8c2TCq++ZhMJq6hT09P/4cdDAaugKPRyP7u7q7ZbB4fH3c6nX6/Xy2Xy/izCgJCjKXVnkG322X/+Pi4Wq2w+1MLzdlsVoFcOPMqcoggLL6AvV4PThVIU6SPj4/lPym0+ZtOpzScKUGEvbm5gTN+eHhAgS/UgL1abErOtN/f3+0YKxV7euwVifbR0dHt7W2/lpA/OTm5uLhIRpV6ikP1/Px8XQtEzhydnZ3RRkotFQz+8vIiVWGo4V9alSZD0/O0EZd5LXhRhbBhDMeOPrAYRwmayLHHFjHpiXx6esq1LK6urnDGsdVqqW4x1ieVDGEuDtV2jW3GI0m5lS0QnWKMA/cO7DNeMaZKaVVLMuSa8iEMKQXLYIqQqc54p7zJ3BTIWdvlEi4QXqq0h5IDbXMXY3vpmBA546zbzEwb+6TDaTFmloahoDeHVilSGqHOwoaqBJPCb6tSJC5wzqu0AunlDebKUav4YpbWlAlDQ82soZBWGUCtsmoPttSkkNliiWCJDNWJdrstybBKZKv04ONa0E51MjZ5IaVVNAa1OGfI8phD+5AqzSSch1WqnTeYNX9Iqq14eXfCqhz88CST82+rEFZ6jcFfSXAG5t01Go3Ly0t9gqfCNlyov8qVyM6ZE6vyhLapUCce82Z0m40wNrgErDhTxsyDlJKC4PnGrPkuCc3MllJjWlqVbNHgNf08vMr8r5nkJGzNZ5pvp+JMwLSXZYY89EgmGUMBwzYPgzD+CxnedfiZi2D5AAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180318185323" title="" data-src="/static/微信截图_20180318185323-0efdf2fc055a177eaed4a4b747463cee-aec66.png" data-srcset="/static/微信截图_20180318185323-0efdf2fc055a177eaed4a4b747463cee-61805.png 200w,\n/static/微信截图_20180318185323-0efdf2fc055a177eaed4a4b747463cee-6a738.png 400w,\n/static/微信截图_20180318185323-0efdf2fc055a177eaed4a4b747463cee-aec66.png 700w" data-sizes="(max-width: 700px) 100vw, 700px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="42670541397837234000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`public static void sort(Comparable[] a){\n    int N=a.length;\n    // 重建堆有序的二叉树，注意都是从非叶子结点处重建二叉树\n    for(int k=N/2;K>=1;k--){\n        sink(a,k,N);\n    }\n    // 最大元素a[1]与a[N]交换并修复堆\n    while(N>1){\n        exch(a,1,N--);\n        sink(a,1,N);\n    }\n}`, `42670541397837234000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="java"\n              >\n                <span class="gatsby-code-button-language">java</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="java"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">sort</span><span class="token punctuation">(</span><span class="token class-name">Comparable</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a<span class="token punctuation">)</span><span class="token punctuation">{</span>\n    <span class="token keyword">int</span> <span class="token class-name">N</span><span class="token operator">=</span>a<span class="token punctuation">.</span>length<span class="token punctuation">;</span>\n    <span class="token comment">// 重建堆有序的二叉树，注意都是从非叶子结点处重建二叉树</span>\n    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> k<span class="token operator">=</span><span class="token class-name">N</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span><span class="token class-name">K</span><span class="token operator">>=</span><span class="token number">1</span><span class="token punctuation">;</span>k<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token function">sink</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>k<span class="token punctuation">,</span><span class="token class-name">N</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token comment">// 最大元素a[1]与a[N]交换并修复堆</span>\n    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token class-name">N</span><span class="token operator">></span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token function">exch</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token class-name">N</span><span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token function">sink</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token class-name">N</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="算法改进-2"><a href="#%E7%AE%97%E6%B3%95%E6%94%B9%E8%BF%9B-2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>算法改进</h3>\n<blockquote>\n<ul>\n<li>先下沉后上浮：免去检查元素是否到达正确位置来节省时间，在下沉中总是直接提升较大的子节点直至堆底，然后再使元素上浮到正确的位置，可以使元素比较减少一半，但需要额外的空间，只有在比较操作代价较高时使用。</li>\n</ul>\n</blockquote>\n<h2 id="算法总结"><a href="#%E7%AE%97%E6%B3%95%E6%80%BB%E7%BB%93" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>算法总结</h2>\n<h3 id="稳定性"><a href="#%E7%A8%B3%E5%AE%9A%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>稳定性</h3>\n<blockquote>\n<ul>\n<li>如果一个排序算法能够保留数组中重复元素的相对位置则可以被称为是稳定的。</li>\n</ul>\n</blockquote>\n<ul>\n<li>冒泡、基数、插入、归并排序是稳定的，其他不是</li>\n<li>可以把任意的排序算法变成稳定的</li>\n</ul>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/微信截图_20180319143607-b0017ae9d98da65f1e318e0f23b8e2b4-b9a0b.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 42.733990147783246%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsSAAALEgHS3X78AAABH0lEQVQozy2RR26EUBBEuf+FWBIkhBCIIedoTDIDZ/Cb39MLVNTvqk7aMAw/Kn5VzPOcJEnTNL7vu65r27Zpmp7nTdM0jiPJAHL4kqy1bTupeL1eXdehBCAuy9KyLMMw0Ou6HsfxsizwdV33ff8Vh2GI5b7vuKzrCiaDPIqQB0lTeZ4LGFSQQ/Ft2z5i/s/zxOm6LgDsfd94S/ZxHMLjRTtFUaRpCobXmA0KMxFDUR/AMy6nCkj5wtCjgK+YGWQeEYsLduA/FXQhc2VZRmWKSTsa6wmCgPaqqsJCxAhwRA9JI0wIyYDs33Ec8lF9ZuYMZDCe7HxT8TwPS6IaLlSQJnnFkYvIwd7vt4aT7CCKIu4hR+aNDqU4ARABWGoA6OgfeenSzCfFGhoAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="     20180319143607" title="" data-src="/static/微信截图_20180319143607-b0017ae9d98da65f1e318e0f23b8e2b4-fee1c.png" data-srcset="/static/微信截图_20180319143607-b0017ae9d98da65f1e318e0f23b8e2b4-a67b7.png 200w,\n/static/微信截图_20180319143607-b0017ae9d98da65f1e318e0f23b8e2b4-0b187.png 400w,\n/static/微信截图_20180319143607-b0017ae9d98da65f1e318e0f23b8e2b4-fee1c.png 800w,\n/static/微信截图_20180319143607-b0017ae9d98da65f1e318e0f23b8e2b4-b9a0b.png 812w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<blockquote>\n<ul>\n<li>见上表，快速排序是最快的通用排序算法。</li>\n</ul>\n</blockquote>\n<ul>\n<li>java 系统库选择对原始数据使用三向切分的快速排序，对引用类型使用归并排序。</li>\n<li>应用例子：</li>\n<li>找出重复元素：排序后记录连续出现的重复元素。</li>\n<li>排名：计算 Kendall tau 距离。</li>\n<li>优先队列：TopM 和 Multiway 多路归并问题。</li>\n<li>中位数与顺序统计：直接排序或利用快速排序的切分方法,复杂度为线性。</li>\n<li>平均来说，基于切分的选择算法的运行时间是线性级别的。</li>\n<li>设计一个能够保证最坏情况下也只需要线性比较次数的算法是一个经典问题，现在暂未解决。</li>\n</ul>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="63084439982977040000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`//查找第k小的数\npublic static Comparable select(Comparable[] a,int k){\n    StdRandom.shuffle(a);\n    int lo=0,hi=a.length-1;\n    while(hi>lo){\n        int j=partition(a,lo,hi);\n        if(j==k) return a[k];\n        else if(j>k) hi=j-1;\n        else lo=j+1;\n    }\n    return a[k];\n}`, `63084439982977040000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="java"\n              >\n                <span class="gatsby-code-button-language">java</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="java"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token comment">//查找第k小的数</span>\n<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Comparable</span> <span class="token function">select</span><span class="token punctuation">(</span><span class="token class-name">Comparable</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a<span class="token punctuation">,</span><span class="token keyword">int</span> k<span class="token punctuation">)</span><span class="token punctuation">{</span>\n    <span class="token class-name">StdRandom</span><span class="token punctuation">.</span><span class="token function">shuffle</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">int</span> lo<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>hi<span class="token operator">=</span>a<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>\n    <span class="token keyword">while</span><span class="token punctuation">(</span>hi<span class="token operator">></span>lo<span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token keyword">int</span> j<span class="token operator">=</span><span class="token function">partition</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>lo<span class="token punctuation">,</span>hi<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">if</span><span class="token punctuation">(</span>j<span class="token operator">==</span>k<span class="token punctuation">)</span> <span class="token keyword">return</span> a<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">;</span>\n        <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>j<span class="token operator">></span>k<span class="token punctuation">)</span> hi<span class="token operator">=</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>\n        <span class="token keyword">else</span> lo<span class="token operator">=</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">return</span> a<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="排序应用"><a href="#%E6%8E%92%E5%BA%8F%E5%BA%94%E7%94%A8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>排序应用</h3>\n<blockquote>\n<ul>\n<li>商业计算：处理上百万大小的数组。</li>\n</ul>\n</blockquote>\n<ul>\n<li>信息搜索：排序后二分查找。</li>\n<li>运筹学：负载均衡问题。</li>\n<li>事件驱动模拟：</li>\n<li>数值计算</li>\n<li>组合搜索</li>\n</ul>',
excerpt:"选择排序 思路 首先，找到数组中最小的那个元素，其次，将它和数组的第一个元素交换位置（如果第一个元素就是最小元素那么它就和自己交换）。再次，在剩下的元素中找到最小的元素，将它与数组的第二个元素交换位置。如此往复，直到将整个数组排序。 特点 对于长度为 N…",frontmatter:{date:"2018-03-16 18:35:03",path:"/sort-java/",tags:"面试, 算法, 读书笔记",title:"排序算法java实现",draft:null}},prePost:{html:'<h2 id="概述"><a href="#%E6%A6%82%E8%BF%B0" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>概述</h2>\n<h3 id="网络的网络"><a href="#%E7%BD%91%E7%BB%9C%E7%9A%84%E7%BD%91%E7%BB%9C" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>网络的网络</h3>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/f1fb826b-ecf4-4ddb-91f0-2bafecf08869-a42e3551d268cc414cf72094337a2def-cea4c.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 626px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 39.45686900958466%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAIABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAMF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB2ZBYH//EABkQAAIDAQAAAAAAAAAAAAAAAAECAAMSIf/aAAgBAQABBQLsYWZr0F//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAYEAACAwAAAAAAAAAAAAAAAAAAASEiMf/aAAgBAQAGPwJkMvp//8QAGhABAQEAAwEAAAAAAAAAAAAAAREAITFBUf/aAAgBAQABPyFL8cveQA7fuMsOf//aAAwDAQACAAMAAAAQcA//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAaEAEAAgMBAAAAAAAAAAAAAAABESEAMWHw/9oACAEBAAE/EBoQqHSPTiHIS6LVXg1ALDMsd7n/2Q==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="f1fb826b ecf4 4ddb 91f0 2bafecf08869" title="" data-src="/static/f1fb826b-ecf4-4ddb-91f0-2bafecf08869-a42e3551d268cc414cf72094337a2def-cea4c.jpg" data-srcset="/static/f1fb826b-ecf4-4ddb-91f0-2bafecf08869-a42e3551d268cc414cf72094337a2def-2590f.jpg 200w,\n/static/f1fb826b-ecf4-4ddb-91f0-2bafecf08869-a42e3551d268cc414cf72094337a2def-6b161.jpg 400w,\n/static/f1fb826b-ecf4-4ddb-91f0-2bafecf08869-a42e3551d268cc414cf72094337a2def-cea4c.jpg 626w" data-sizes="(max-width: 626px) 100vw, 626px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<blockquote>\n<p>网络把主机连接起来，而互联网是把多种不同的网络连接起来，因此互联网是网络的网络。</p>\n</blockquote>\n<h3 id="isp"><a href="#isp" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ISP</h3>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/0f8c0a60-d4c6-47f4-978d-1a5c393fedac-8a56939b7f7aaa1eee674df8055e76f9-afa27.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 657px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 58.44748858447488%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAECAwX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHbTiWjD//EABcQAAMBAAAAAAAAAAAAAAAAAAABECH/2gAIAQEAAQUCi0Yp/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFxAAAwEAAAAAAAAAAAAAAAAAAAEgIf/aAAgBAQAGPwIxz//EABkQAQEBAQEBAAAAAAAAAAAAAAERAIEhUf/aAAgBAQABPyFX7zKnidyi4zVZXBN//9oADAMBAAIAAwAAABCjD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABwQAQACAwEBAQAAAAAAAAAAAAEAETFBUSFhgf/aAAgBAQABPxBVqwVKa/ZhQMqH3kpaV05DVinzkVIIXUDDfrP/2Q==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="0f8c0a60 d4c6 47f4 978d 1a5c393fedac" title="" data-src="/static/0f8c0a60-d4c6-47f4-978d-1a5c393fedac-8a56939b7f7aaa1eee674df8055e76f9-afa27.jpg" data-srcset="/static/0f8c0a60-d4c6-47f4-978d-1a5c393fedac-8a56939b7f7aaa1eee674df8055e76f9-33655.jpg 200w,\n/static/0f8c0a60-d4c6-47f4-978d-1a5c393fedac-8a56939b7f7aaa1eee674df8055e76f9-1cc07.jpg 400w,\n/static/0f8c0a60-d4c6-47f4-978d-1a5c393fedac-8a56939b7f7aaa1eee674df8055e76f9-afa27.jpg 657w" data-sizes="(max-width: 657px) 100vw, 657px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<ul>\n<li>互联网服务提供商 ISP 可以从互联网管理机构获得许多 IP 地址，同时拥有通信线路以及路由器等连网设备，个人或机构向 ISP 缴纳一定的费用就可以接入互联网。</li>\n<li>目前互联网是一种多层次结构，ISP 根据覆盖面的大小分为主干 ISP、地区 ISP、本地 ISP。</li>\n<li>互联网交换点 IXP 允许两个 ISP 直接相连而不用经过第三个 ISP。</li>\n</ul>\n<h3 id="互联网的组成"><a href="#%E4%BA%92%E8%81%94%E7%BD%91%E7%9A%84%E7%BB%84%E6%88%90" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>互联网的组成</h3>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/8ab40d6d-bd7c-47d3-afe8-6a8bc9f5d04c-36eeb499d07ae127bfbbf9f62398cd6c-75896.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 690px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 49.130434782608695%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAMBBAX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHYTcWMJD//xAAYEAADAQEAAAAAAAAAAAAAAAAAARExAv/aAAgBAQABBQLu2sWMWn//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAYEAACAwAAAAAAAAAAAAAAAAAAIREgYf/aAAgBAQAGPwLBSOn/xAAdEAABAgcAAAAAAAAAAAAAAAAAAREQITFBYZGx/9oACAEBAAE/IVpQ2hKvcH5CiJ//2gAMAwEAAgADAAAAEODP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAHhABAAICAQUAAAAAAAAAAAAAAQARITHwEEFRobH/2gAIAQEAAT8QvinDMyFXaw+G/fCJhAdwT6EbQt30/9k=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="8ab40d6d bd7c 47d3 afe8 6a8bc9f5d04c" title="" data-src="/static/8ab40d6d-bd7c-47d3-afe8-6a8bc9f5d04c-36eeb499d07ae127bfbbf9f62398cd6c-75896.jpg" data-srcset="/static/8ab40d6d-bd7c-47d3-afe8-6a8bc9f5d04c-36eeb499d07ae127bfbbf9f62398cd6c-f0091.jpg 200w,\n/static/8ab40d6d-bd7c-47d3-afe8-6a8bc9f5d04c-36eeb499d07ae127bfbbf9f62398cd6c-eb828.jpg 400w,\n/static/8ab40d6d-bd7c-47d3-afe8-6a8bc9f5d04c-36eeb499d07ae127bfbbf9f62398cd6c-75896.jpg 690w" data-sizes="(max-width: 690px) 100vw, 690px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<ul>\n<li>边缘部分：所有连接在互联网上的主机，用户可以直接使用。</li>\n<li>核心部分：由大量的网络和连接这些的路由器组成，为边缘部分的主机提供服务。</li>\n</ul>\n<h3 id="主机之间的通信方式"><a href="#%E4%B8%BB%E6%9C%BA%E4%B9%8B%E9%97%B4%E7%9A%84%E9%80%9A%E4%BF%A1%E6%96%B9%E5%BC%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>主机之间的通信方式</h3>\n<ul>\n<li>客户-服务器（C/S）：客户是服务的请求方，服务器是服务的提供方。</li>\n<li>对等（P2P）：不区分客户端和服务器。</li>\n</ul>\n<h3 id="电路交换与分组交换"><a href="#%E7%94%B5%E8%B7%AF%E4%BA%A4%E6%8D%A2%E4%B8%8E%E5%88%86%E7%BB%84%E4%BA%A4%E6%8D%A2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>电路交换与分组交换</h3>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/c50d230c-8b89-4644-8f62-8708d03aac5b-39c0cd7125f3167a7e3909299e0b31fa-7a227.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 652px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 68.71165644171779%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAEDBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAe3ENFH/xAAaEAACAgMAAAAAAAAAAAAAAAABEQAxAiFB/9oACAEBAAEFAnvmLRuCv//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABkQAAIDAQAAAAAAAAAAAAAAAAABEBEhMf/aAAgBAQAGPwIas07P/8QAGxAAAgIDAQAAAAAAAAAAAAAAAREAIRBBUWH/2gAIAQEAAT8hJaldiJAQ9lGj8jKXXFA7u9Yv/9oADAMBAAIAAwAAABBTD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EAB0QAQADAAEFAAAAAAAAAAAAAAEAETFRIUFxgcH/2gAIAQEAAT8QKQa3gRXzc07vycBd7IzQA9aG/cQLtWqJaltvM//Z\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="c50d230c 8b89 4644 8f62 8708d03aac5b" title="" data-src="/static/c50d230c-8b89-4644-8f62-8708d03aac5b-39c0cd7125f3167a7e3909299e0b31fa-7a227.jpg" data-srcset="/static/c50d230c-8b89-4644-8f62-8708d03aac5b-39c0cd7125f3167a7e3909299e0b31fa-224a2.jpg 200w,\n/static/c50d230c-8b89-4644-8f62-8708d03aac5b-39c0cd7125f3167a7e3909299e0b31fa-6e8e4.jpg 400w,\n/static/c50d230c-8b89-4644-8f62-8708d03aac5b-39c0cd7125f3167a7e3909299e0b31fa-7a227.jpg 652w" data-sizes="(max-width: 652px) 100vw, 652px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<ul>\n<li>电路交换电路交换用于电话通信系统，两个用户要通信之前需要建立一条专用的物理链路，并且在整个通信过程中始终占用该链路。由于通信的过程中不可能一直在使用传输线路，因此电路交换对线路的利用率很低，往往不到 10%。</li>\n<li>报文交换报文交换用于邮局通信系统，邮局接收到一份报文之后，先存储下来，然后把相同目的地的报文一起转发到下一个目的地，这个过程就是存储转发过程。</li>\n<li>分组交换分组交换也使用了存储转发，但是转发的是分组不是报文。把整块数据称为一个报文，由于一个报文可能很长，需要先进行切分，来满足分组能处理的大小。在每个切分的数据前面加上首部之后就成为了分组，首部包含目的地址和源地址等控制信息。 <html><head></head><body><a class="gatsby-resp-image-link" href="/static/2366c2ad-5859-4d4e-805f-7e2b88061cd8-b4c17c0f18bad634333f112d24266dce-e744a.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 559px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 35.77817531305904%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAHABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAMEBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAdmMLIP/xAAYEAADAQEAAAAAAAAAAAAAAAAAAQIRMf/aAAgBAQABBQK1TMoXP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABkQAAIDAQAAAAAAAAAAAAAAAAAhAQIRMv/aAAgBAQAGPwJWw7kZ/8QAGRAAAwADAAAAAAAAAAAAAAAAABFhAdHh/9oACAEBAAE/IUjMYO5aGof/2gAMAwEAAgADAAAAEPAP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGRABAAMBAQAAAAAAAAAAAAAAAQARITFR/9oACAEBAAE/EEaAegVzmkGIbuUQJArBr7P/2Q==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2366c2ad 5859 4d4e 805f 7e2b88061cd8" title="" data-src="/static/2366c2ad-5859-4d4e-805f-7e2b88061cd8-b4c17c0f18bad634333f112d24266dce-e744a.jpg" data-srcset="/static/2366c2ad-5859-4d4e-805f-7e2b88061cd8-b4c17c0f18bad634333f112d24266dce-38f9e.jpg 200w,\n/static/2366c2ad-5859-4d4e-805f-7e2b88061cd8-b4c17c0f18bad634333f112d24266dce-1a21b.jpg 400w,\n/static/2366c2ad-5859-4d4e-805f-7e2b88061cd8-b4c17c0f18bad634333f112d24266dce-e744a.jpg 559w" data-sizes="(max-width: 559px) 100vw, 559px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html> 存储转发允许在一条传输线路上传送多个主机的分组，因此两个用户之间的通信不需要占用端到端的线路资源。相比于报文交换，由于分组比报文更小，因此分组交换的存储转发速度更加快速。</li>\n</ul>\n<h3 id="时延"><a href="#%E6%97%B6%E5%BB%B6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>时延</h3>\n<blockquote>\n<p>总时延=发送时延+传播时延+处理时延+排队时延</p>\n</blockquote>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/ceee91c2-da26-4169-94c3-e4608b46b9ac-37f0ebac6a340c9614778d16279ffab3-160dc.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 737px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 31.478968792401623%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsSAAALEgHS3X78AAAA3klEQVQY03WQuQ6DMBiD8/7vAhuswMgAAyAEYgBEuW/EfYRatEVVpXqI/ij5bCfkOI593ymlGNZ1LYqiruskSdI0zfPcdd2mac6P6KV7JmCCINB13TCMKIqqqgJfliWMcNx1Xdu2uIMBGS9snudhGHCBYLNtG+wBIM1xHFVVRVGUZVmSJEEQOI5jWZZhGPESz/Oe54ECT76bICHLMk3TbNu2LOtxSVEU0zRRKgxDdPR9H0nIm6bpDd8Wfd/jqcuyoP/5R8Bg8a79I3wYXggXxMIojmPUgdc4jvefoSPWJ4bzT1xlIj3IAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="ceee91c2 da26 4169 94c3 e4608b46b9ac" title="" data-src="/static/ceee91c2-da26-4169-94c3-e4608b46b9ac-37f0ebac6a340c9614778d16279ffab3-160dc.png" data-srcset="/static/ceee91c2-da26-4169-94c3-e4608b46b9ac-37f0ebac6a340c9614778d16279ffab3-fc7b9.png 200w,\n/static/ceee91c2-da26-4169-94c3-e4608b46b9ac-37f0ebac6a340c9614778d16279ffab3-cea17.png 400w,\n/static/ceee91c2-da26-4169-94c3-e4608b46b9ac-37f0ebac6a340c9614778d16279ffab3-160dc.png 737w" data-sizes="(max-width: 737px) 100vw, 737px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<ul>\n<li>发送时延主机或路由器发送数据帧所需要的时间。 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><mi>e</mi><mi>l</mi><mi>a</mi><mi>y</mi><mo>=</mo><mi>l</mi><mo>(</mo><mi>b</mi><mi>i</mi><mi>t</mi><mo>)</mo><mi mathvariant="normal">/</mi><mi>v</mi><mo>(</mo><mi>b</mi><mi>i</mi><mi>t</mi><mi mathvariant="normal">/</mi><mi>s</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">delay=l(bit)/v(bit/s)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit">d</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mopen">(</span><span class="mord mathit">b</span><span class="mord mathit">i</span><span class="mord mathit">t</span><span class="mclose">)</span><span class="mord">/</span><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="mopen">(</span><span class="mord mathit">b</span><span class="mord mathit">i</span><span class="mord mathit">t</span><span class="mord">/</span><span class="mord mathit">s</span><span class="mclose">)</span></span></span></span> 其中 l 表示数据帧的长度，v 表示发送帧率。</li>\n<li>传播时延电磁波在信道中传播一定的距离需要花费的时间，电磁波传播速度接近光速。 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><mi>e</mi><mi>l</mi><mi>a</mi><mi>y</mi><mo>=</mo><mi>l</mi><mo>(</mo><mi>m</mi><mo>)</mo><mi mathvariant="normal">/</mi><mi>v</mi><mo>(</mo><mi>m</mi><mi mathvariant="normal">/</mi><mi>s</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">delay=l(m)/v(m/s)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit">d</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mopen">(</span><span class="mord mathit">m</span><span class="mclose">)</span><span class="mord">/</span><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="mopen">(</span><span class="mord mathit">m</span><span class="mord">/</span><span class="mord mathit">s</span><span class="mclose">)</span></span></span></span> 其中 l 表示信道长度，v 表示电磁波在信道上的传播速率。</li>\n<li>处理时延主机或路由器收到分组时进行处理所需要的时间。例如分析首部，从分组中提取数据部分等。</li>\n<li>排队时延分组在路由器的输入队列和输出队列中排队等待的时间，取决于网络当前的通信量。</li>\n</ul>\n<h3 id="计算机网络体系结构-"><a href="#%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84-" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>计算机网络体系结构 *</h3>\n<ol>\n<li>七层协议如图 a 所示，其中表示层和会话层用途如下：</li>\n<li>表示层：信息的语法、语义以及它们的关联，如加密解密、转换翻译、压缩解压缩。</li>\n<li>会话层：不同机器上的用户之间建立及管理会话。 <html><head></head><body><a class="gatsby-resp-image-link" href="/static/1005dc9d-9049-4b06-9524-6171e56ebd8c-d3d51cb03de5e1c86b5b65143fb09876-fb277.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 733px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 54.84311050477489%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABa0lEQVQoz1XS145iQQwEUP7/q0gPCCSiEDmDSEOOQ1j2zG1m0frBdPu6yuVqYn+iWC6X3W631+ttNpvX63U4HFqtVr1eL5fLDqfTSc9gMGi3266dTud+v6vEtEK6NxoN31Kp1G63WywW+/1+Mpk4z2azYrF4uVyA1bEXCoXpdAr4A16tVuv1Gl4pkUg4a8VYq9Xm87mD7tvtdj6fv6OgEe8b/BXFeDyW0+k0btOGw+FoNMLYbDaz2ez1eqWCfhRIqfhMBtNnTjKZlEmQSUCEJR6PH4/HUEFRKpX6/f4bTJhR7AmyZd/QVyqVdhSMYCGpvSjU5c9krIw1PIC32y0t1WoVL4xdAtgAxVwu9x/YZK54BrKBbaibC5akM5PJuKoHOfl8/iPbq5gT9kTPaqvChJ0VvRCTZTOmUbDgDUbPPR/wUaECgwWMW1ofj0eYoYdgulyfz2cs/Dx+I7wcFnO4WoyCHeT86/TfekXxF7PCV5UjhPOyAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="1005dc9d 9049 4b06 9524 6171e56ebd8c" title="" data-src="/static/1005dc9d-9049-4b06-9524-6171e56ebd8c-d3d51cb03de5e1c86b5b65143fb09876-fb277.png" data-srcset="/static/1005dc9d-9049-4b06-9524-6171e56ebd8c-d3d51cb03de5e1c86b5b65143fb09876-c9c1e.png 200w,\n/static/1005dc9d-9049-4b06-9524-6171e56ebd8c-d3d51cb03de5e1c86b5b65143fb09876-178e3.png 400w,\n/static/1005dc9d-9049-4b06-9524-6171e56ebd8c-d3d51cb03de5e1c86b5b65143fb09876-fb277.png 733w" data-sizes="(max-width: 733px) 100vw, 733px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></li>\n<li>五层协议</li>\n<li>应用层：为特定应用程序提供数据传输服务，例如 HTTP、DNS 等，数据单位为报文。</li>\n<li>运输层：提供的是进程间的通用数据传输服务。由于应用层协议很多，定义通用的运输层协议机就可以支持不断增多的应用层协议。运输层包括两种协议：传输控制协议 TCP，提供面向连接、可靠的数据传输服务，数据单位为报文段；用户数据包协议 UDP，提供无连接、尽最大努力的数据传输服务，数据单位为用户数据报。TCP 主要提供完整性服务，UDP 主要提供及时性服务。</li>\n<li>网络层：为主机之间提供数据传输服务，而像运输层协议那样是为主机中的进程提供服务。网络层把运输层传递下来的报文段或用户数据报封装成分组。</li>\n<li>数据链路层：网络层针对的还是主机之间的数据传输服务，而主机之间可以有很多链路，链路层协议就是为相邻结点间提供服务。数据链路层把网络层传来的分组封装成帧。</li>\n<li>物理层：考虑的是怎样在传输媒体上传输数据比特流，而不是指具体的传输媒体。物理层的作用是尽可能的屏蔽传输媒体和通信手段的差异，使数据链路层感觉不到这些差异。</li>\n<li>数据在各层之间的传递过程</li>\n<li>在向下的过程中，需要添加下层协议所需要的首部或者尾部，而在向上的过程中不断拆开首部和尾部。</li>\n<li>路由器只有下面三层协议，因为路由器位于网络核心中，不需要为进程或者应用程序提供服务，因此也就不需要运输层和应用层。 <html><head></head><body><a class="gatsby-resp-image-link" href="/static/ac106e7e-489a-4082-abd9-dabebe48394c-5e84057845ae46d92e6a013e7a96c48e-bf603.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 659px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 49.92412746585736%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAIBAwX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHXmxRxg//EABoQAAMAAwEAAAAAAAAAAAAAAAABAhAREjH/2gAIAQEAAQUCdaHZPnMilY//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAYEAACAwAAAAAAAAAAAAAAAAARMQABEP/aAAgBAQAGPwIGMYqirP/EABwQAQEBAAEFAAAAAAAAAAAAAAERACExUXGBkf/aAAgBAQABPyE0xG98c6PbO1bzluVnxkvPywAQJv/aAAwDAQACAAMAAAAQoA//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAaEAEAAwEBAQAAAAAAAAAAAAABABEhMUFR/9oACAEBAAE/EOwi6MJjWF6jkBhQqm4yrnVKwZaz0ylIfAqf/9k=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="ac106e7e 489a 4082 abd9 dabebe48394c" title="" data-src="/static/ac106e7e-489a-4082-abd9-dabebe48394c-5e84057845ae46d92e6a013e7a96c48e-bf603.jpg" data-srcset="/static/ac106e7e-489a-4082-abd9-dabebe48394c-5e84057845ae46d92e6a013e7a96c48e-9eb1c.jpg 200w,\n/static/ac106e7e-489a-4082-abd9-dabebe48394c-5e84057845ae46d92e6a013e7a96c48e-6b8c8.jpg 400w,\n/static/ac106e7e-489a-4082-abd9-dabebe48394c-5e84057845ae46d92e6a013e7a96c48e-bf603.jpg 659w" data-sizes="(max-width: 659px) 100vw, 659px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></li>\n<li>TCP/IP 体系结构</li>\n<li>它只有四层，相当于五层协议中数据链路层和物理层合并为网络接口层。</li>\n<li>现在的 TCP/IP 体系结构不严格遵循 OSI 分层概念，应用层可能会直接使用 IP 层或者网络接口层。 <html><head></head><body><a class="gatsby-resp-image-link" href="/static/37b74a34-251c-45f8-88a4-614ec953f7e9-effcdee30884dd5d93b4bcece90839fa-6db8f.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 383px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 49.347258485639685%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAABEklEQVQoz32R126DQBRE+f8vQ34ykgEh0wyI3hx6c3KUVQhCcfZhtWXOndm70udhDMNQlmXbth/fo6qqKIqyLHv+DE7yPN/10hEGg2exritzXdeKogRBsAter9fj8XgLx3GMVVEULJIk6fv+KAD2ff9vuOs6Ctu2TTbTNPHEfBxH4ogs/8FN08Avy4I6TVO2LIB5LaEQbNv2FkYBPE0TIszZYjjPs+A5F9HOMHmY6TDXzJfL5Xq9GobhOA5qWZbDMKQEtzxq10unrxJ9QnG/38EIyW9ZluV5HlnoJVXOMNm4E860GhEfzrMpJMpxziEtpBEo6csvjCdu+CBCqus6bpqm3W431qqqUtF1XbZEIJT4wi8F6zjSQXSESwAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="37b74a34 251c 45f8 88a4 614ec953f7e9" title="" data-src="/static/37b74a34-251c-45f8-88a4-614ec953f7e9-effcdee30884dd5d93b4bcece90839fa-6db8f.png" data-srcset="/static/37b74a34-251c-45f8-88a4-614ec953f7e9-effcdee30884dd5d93b4bcece90839fa-89fca.png 200w,\n/static/37b74a34-251c-45f8-88a4-614ec953f7e9-effcdee30884dd5d93b4bcece90839fa-6db8f.png 383w" data-sizes="(max-width: 383px) 100vw, 383px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></li>\n<li>TCP/IP 协议族是一种沙漏形状，中间小两边大，IP 协议在其中占用举足轻重的地位。 <html><head></head><body><a class="gatsby-resp-image-link" href="/static/93cbce0c-c37d-429c-815b-861976a46bd8-79996c3fcdb481e4a4fde70f6d24907d-e9bcc.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 466px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 51.716738197424895%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAABPUlEQVQoz1WSy66CYAyEff9X0oVIQmIChA0Lg5gIiCI3wQsgiOeDYsLphk7b6fQfXXzHuN1uaZp+fxHH8el0atuW5HK55HkeBAHwfr9Tfz6fzPR9v+BDlQmZfo9hWdZms6mqStM0wzD2+/16va7rerfbKYqCTD/GQKZ6Pp8p1WPA6bouyzLXdVnKLmBRFMAwDEWAMYgDGUAD5c/nI8pMvF4vNB3HERHEt9ttkiQskoGJjNT1ei3Lsmma+hfkog/B930GREZaxERG0PO8uWESiHMtLY6iiwYnzAcGMmuwEQ/ZSpv10Kg8Hg9aWM0JVIDkHPjvzWBsPB6PJFyhqupqtbJtG2ia5nK51HWd42lhPhAvcG4iz6P/BWoC4ZDLwZLLzzGRpRFFEW/j33I4HDAZ/zkHk3GLCi8HkoimUP4ABXczwu+DNGoAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="93cbce0c c37d 429c 815b 861976a46bd8" title="" data-src="/static/93cbce0c-c37d-429c-815b-861976a46bd8-79996c3fcdb481e4a4fde70f6d24907d-e9bcc.png" data-srcset="/static/93cbce0c-c37d-429c-815b-861976a46bd8-79996c3fcdb481e4a4fde70f6d24907d-6dacd.png 200w,\n/static/93cbce0c-c37d-429c-815b-861976a46bd8-79996c3fcdb481e4a4fde70f6d24907d-7f2bb.png 400w,\n/static/93cbce0c-c37d-429c-815b-861976a46bd8-79996c3fcdb481e4a4fde70f6d24907d-e9bcc.png 466w" data-sizes="(max-width: 466px) 100vw, 466px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></li>\n</ol>\n<h2 id="物理层"><a href="#%E7%89%A9%E7%90%86%E5%B1%82" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>物理层</h2>\n<h3 id="通信方式"><a href="#%E9%80%9A%E4%BF%A1%E6%96%B9%E5%BC%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>通信方式</h3>\n<ol>\n<li>单向通信，又称为单工通信。</li>\n<li>双向交替通信，又称为半双工通信。</li>\n<li>双向同时通信，又称为全双工通信。</li>\n</ol>\n<h3 id="带通调制"><a href="#%E5%B8%A6%E9%80%9A%E8%B0%83%E5%88%B6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>带通调制</h3>\n<blockquote>\n<p>模拟信号是连续的信号，数字信号是离散的信号。带通调制把数字信号转换为模拟信号。</p>\n</blockquote>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/d2c55c84-aa1f-43c1-bd97-457bcb7816b3-acc53a9dd78b46a505c9614b32865980-d86f6.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 573px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 45.37521815008726%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsSAAALEgHS3X78AAABNElEQVQoz1WRW2+CQBCF/f//SQkN8Q2I4aKA5SIKFKEVLxDUQj93mxDPw2b27JyZM7OzcRzP53OWZZfLhfh6vdZ1DfMr8C3wI0DQ973kR4GZFCNo25YgTdNhGMqy/BI4nU7P5/PxeEDyejgcjscjJCqYlxgZLMH9fqfKfD4vigLydruZpvkhoCiKYRhd1zVNw9PUGTNQUox5XdeZApLUOI7RrFYryPV6TTmUPA0CLzGU7IxPMhaLhWVZnwLL5VJVVdpiR9O0MAxJwNfUmYbMI4eniuu6SZKUAnR2HGez2di27XleIcBokxir+/2eAOV2u93tdmRHUURMFfSRQBAEvu/zxFDTwtin3AEWcM6XcKU8QZ7nVVURcJXbYtWcKP87S8g7P4FbslkSFohpSDfc8mHjO/4Ai8TyapnLEN8AAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="d2c55c84 aa1f 43c1 bd97 457bcb7816b3" title="" data-src="/static/d2c55c84-aa1f-43c1-bd97-457bcb7816b3-acc53a9dd78b46a505c9614b32865980-d86f6.png" data-srcset="/static/d2c55c84-aa1f-43c1-bd97-457bcb7816b3-acc53a9dd78b46a505c9614b32865980-4af32.png 200w,\n/static/d2c55c84-aa1f-43c1-bd97-457bcb7816b3-acc53a9dd78b46a505c9614b32865980-86238.png 400w,\n/static/d2c55c84-aa1f-43c1-bd97-457bcb7816b3-acc53a9dd78b46a505c9614b32865980-d86f6.png 573w" data-sizes="(max-width: 573px) 100vw, 573px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h3 id="信道复用技术"><a href="#%E4%BF%A1%E9%81%93%E5%A4%8D%E7%94%A8%E6%8A%80%E6%9C%AF" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>信道复用技术</h3>\n<ol>\n<li>\n<p>频分复用、时分复用</p>\n</li>\n<li>\n<p>频分复用的所有用户在相同的时间占用不同频率带宽资源；时分复用的所有用户在不同的时间占用相同的频率带宽资源。</p>\n</li>\n<li>\n<p>使用这两种方式进行通信，在通信的过程中用户会一直占用一部分信道资源。但是由于计算机数据的突发性质，没必要一直用信道资源而不让出给其他用户使用，因此这两种方式对信道的利用率都不高。 <html><head></head><body><a class="gatsby-resp-image-link" href="/static/543d47a1-f0dd-414f-b23c-0c142c814854-b1bc07320bc5b6224030cab069fd9532-b1c4a.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 562px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 78.64768683274022%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAAsSAAALEgHS3X78AAABiUlEQVQoz2WTCbKCMBBEuf9FPApXQEEscWH9IqIiqPCftIDRrjJOJrN0eoLVtm0cx1mWPR6PpmnuA263290EAa0Jq+u6oih2u93fgOPxmCSJbdubzSbPczysh8MBPwndByztFVH0OJ1OhJK83W6x5eQU+/l8Gp2VnKYp3bIeZEJkNpstFgtsPJQmgHwFK/PVWQQ4KMvyMoBWZLJyc3nO5/P1elWa+k/JnHElcQZsEY+e0MEuTUAEatOdP4Gqnuet1+sgCKqq6n5AZ8R/q00ZhBVbCjO51WpFeQQbudR1rVEZavOjDAz3+z1VwjAkGZ1Ii6Io7sERglGOSEMw/RFNc4LCAUSzxcm1yY966BbGI5HaCtK0NHbyxWJ8P6j4TVuPjKlwxs0ZCfSw0RknV8WjUSGVOuN8JWtPVbRFJ3hCz/d91MJgXS6X8Ecz6rKiKNRQZ6JNH+jBU0GwxSCZNOri+Z3oW7BRPc1wfIO6iJxNj++v6nNDNM8j7cHzdF2X7Xw+58E4joP99VX+Ax6xkX4rKIvGAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="543d47a1 f0dd 414f b23c 0c142c814854" title="" data-src="/static/543d47a1-f0dd-414f-b23c-0c142c814854-b1bc07320bc5b6224030cab069fd9532-b1c4a.png" data-srcset="/static/543d47a1-f0dd-414f-b23c-0c142c814854-b1bc07320bc5b6224030cab069fd9532-3ced9.png 200w,\n/static/543d47a1-f0dd-414f-b23c-0c142c814854-b1bc07320bc5b6224030cab069fd9532-4c4f5.png 400w,\n/static/543d47a1-f0dd-414f-b23c-0c142c814854-b1bc07320bc5b6224030cab069fd9532-b1c4a.png 562w" data-sizes="(max-width: 562px) 100vw, 562px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n<li>\n<p>统计时分复用是对时分复用的一种改进，不固定每个用户在时分复用帧中的位置，只要有数据就集中起来组成统计时分复用帧然后发送。 <html><head></head><body><a class="gatsby-resp-image-link" href="/static/29058e09-bb72-4040-a73d-4c497895e9ce-6a3ec855363ad7fb44c79a5688be179d-df6d7.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 736px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 32.33695652173913%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAGABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAd2AuD//xAAUEAEAAAAAAAAAAAAAAAAAAAAQ/9oACAEBAAEFAn//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAQ/9oACAEBAAY/An//xAAZEAEAAgMAAAAAAAAAAAAAAAABABEQITH/2gAIAQEAAT8hRu53Q1j/2gAMAwEAAgADAAAAEHPP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGhABAAMBAQEAAAAAAAAAAAAAAQARITFRYf/aAAgBAQABPxAW2eTi0u4ECgFv6z//2Q==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="29058e09 bb72 4040 a73d 4c497895e9ce" title="" data-src="/static/29058e09-bb72-4040-a73d-4c497895e9ce-6a3ec855363ad7fb44c79a5688be179d-df6d7.jpg" data-srcset="/static/29058e09-bb72-4040-a73d-4c497895e9ce-6a3ec855363ad7fb44c79a5688be179d-4e99b.jpg 200w,\n/static/29058e09-bb72-4040-a73d-4c497895e9ce-6a3ec855363ad7fb44c79a5688be179d-1dc89.jpg 400w,\n/static/29058e09-bb72-4040-a73d-4c497895e9ce-6a3ec855363ad7fb44c79a5688be179d-df6d7.jpg 736w" data-sizes="(max-width: 736px) 100vw, 736px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n<li>\n<p>波分复用光的频分复用。由于光的频率很高，因此习惯用波长而不是频率来表示所使用的光载波。 <html><head></head><body><a class="gatsby-resp-image-link" href="/static/78534153-88d1-4f83-a6e0-59064dbdc43a-ead4d9e7a0d8e3135030f0990c2786de-59b40.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 35.95092024539878%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsSAAALEgHS3X78AAAA6klEQVQY02WQyWqFQBRE/f+fcsIBRNyIuhHnCVEUNWrQmPOeYEhSiwavdW5Vt/D11nVd4ziGYThN077v128dx/Hxlu/72Jic58kpPI4sy2zbNk0zTdN1XQE+38IHZlmWYRiO47Rti/nOE+Z5LoqiaRq2SpKEyfM8PjHVdZ3nOWTf98x1XVcUhQyGdGT7C46iqCxLYFVVSSbfdV1MOPjLojiOZVnWNA1DkiSYOV/wUzsIAlEUgdnVdd0wDJS/Gy7LwkZqk1xV1U/tB+YlCIEB5qqPAwFT9W6xbduDCH8e9gbuZK7N41H+rvBf381jhB5jSTTeAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="78534153 88d1 4f83 a6e0 59064dbdc43a" title="" data-src="/static/78534153-88d1-4f83-a6e0-59064dbdc43a-ead4d9e7a0d8e3135030f0990c2786de-fee1c.png" data-srcset="/static/78534153-88d1-4f83-a6e0-59064dbdc43a-ead4d9e7a0d8e3135030f0990c2786de-a67b7.png 200w,\n/static/78534153-88d1-4f83-a6e0-59064dbdc43a-ead4d9e7a0d8e3135030f0990c2786de-0b187.png 400w,\n/static/78534153-88d1-4f83-a6e0-59064dbdc43a-ead4d9e7a0d8e3135030f0990c2786de-fee1c.png 800w,\n/static/78534153-88d1-4f83-a6e0-59064dbdc43a-ead4d9e7a0d8e3135030f0990c2786de-59b40.png 815w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n<li>\n<p>码分复用</p>\n</li>\n<li>\n<p>为每个用户分配 m bit 的码片，并且所有的码片正交，对于任意两个码片<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover accent="true"><mi>S</mi><mo>⃗</mo></mover></mrow><annotation encoding="application/x-tex">\\vec S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.9663299999999999em;"></span><span class="strut bottom" style="height:0.9663299999999999em;vertical-align:0em;"></span><span class="base"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9663299999999999em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathit" style="margin-right:0.05764em;">S</span></span><span style="top:-3.25233em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.15216em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg width=\'0.471em\' height=\'0.714em\' style=\'width:0.471em\' viewBox=\'0 0 471 714\' preserveAspectRatio=\'xMinYMin\'><path d=\'M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z\'/></svg></span></span></span></span></span></span></span></span></span></span>和<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover accent="true"><mi>T</mi><mo>⃗</mo></mover></mrow><annotation encoding="application/x-tex">\\vec T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.9663299999999999em;"></span><span class="strut bottom" style="height:0.9663299999999999em;vertical-align:0em;"></span><span class="base"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9663299999999999em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathit" style="margin-right:0.13889em;">T</span></span><span style="top:-3.25233em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.15216em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg width=\'0.471em\' height=\'0.714em\' style=\'width:0.471em\' viewBox=\'0 0 471 714\' preserveAspectRatio=\'xMinYMin\'><path d=\'M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z\'/></svg></span></span></span></span></span></span></span></span></span></span>有 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mfrac><mrow><mover accent="true"><mi>S</mi><mo>⃗</mo></mover><mo>∗</mo><mover accent="true"><mi>T</mi><mo>⃗</mo></mover></mrow><mrow><mi>m</mi></mrow></mfrac></mrow><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">{\\vec S\\ast \\vec T \\over m} = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.070431em;"></span><span class="strut bottom" style="height:1.4154309999999999em;vertical-align:-0.345em;"></span><span class="base"><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.070431em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">m</span></span></span></span><span style="top:-3.15em;"><span class="pstrut" style="height:3em;"></span><span class="stretchy" style="height:0.2em;"><svg width=\'400em\' height=\'0.2em\' viewBox=\'0 0 400000 200\' preserveAspectRatio=\'xMinYMin slice\'><path d=\'M0 80H400000 v40H0z M0 80H400000 v40H0z\'/></svg></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord accent mtight"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9663299999999999em;"><span style="top:-2.714em;"><span class="pstrut" style="height:2.714em;"></span><span class="mord mathit mtight" style="margin-right:0.05764em;">S</span></span><span style="top:-2.96633em;"><span class="pstrut" style="height:2.714em;"></span><span class="accent-body" style="left:-0.15216em;"><span class="overlay mtight" style="height:0.714em;width:0.471em;"><svg width=\'0.471em\' height=\'0.714em\' style=\'width:0.471em\' viewBox=\'0 0 471 714\' preserveAspectRatio=\'xMinYMin\'><path d=\'M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z\'/></svg></span></span></span></span></span></span></span><span class="mbin mtight">∗</span><span class="mord accent mtight"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9663299999999999em;"><span style="top:-2.714em;"><span class="pstrut" style="height:2.714em;"></span><span class="mord mathit mtight" style="margin-right:0.13889em;">T</span></span><span style="top:-2.96633em;"><span class="pstrut" style="height:2.714em;"></span><span class="accent-body" style="left:-0.15216em;"><span class="overlay mtight" style="height:0.714em;width:0.471em;"><svg width=\'0.471em\' height=\'0.714em\' style=\'width:0.471em\' viewBox=\'0 0 471 714\' preserveAspectRatio=\'xMinYMin\'><path d=\'M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z\'/></svg></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="mord">0</span></span></span></span></p>\n</li>\n<li>\n<p>为了方便，取 m=8，设码片 S 为 00011011。在拥有该码片的用户发送比特 1 时就发送该码片，发送比特 0 是就发送该码片的反码 11100100。</p>\n</li>\n<li>\n<p>在计算时将 00011011 记做(-1-1-1+1+1-1+1+1)，可以得到 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mfrac><mrow><mover accent="true"><mi>S</mi><mo>⃗</mo></mover><mo>∗</mo><mover accent="true"><mi>S</mi><mo>⃗</mo></mover></mrow><mrow><mi>m</mi></mrow></mfrac></mrow><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">{\\vec S\\ast \\vec S\\over m}=1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.070431em;"></span><span class="strut bottom" style="height:1.4154309999999999em;vertical-align:-0.345em;"></span><span class="base"><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.070431em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">m</span></span></span></span><span style="top:-3.15em;"><span class="pstrut" style="height:3em;"></span><span class="stretchy" style="height:0.2em;"><svg width=\'400em\' height=\'0.2em\' viewBox=\'0 0 400000 200\' preserveAspectRatio=\'xMinYMin slice\'><path d=\'M0 80H400000 v40H0z M0 80H400000 v40H0z\'/></svg></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord accent mtight"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9663299999999999em;"><span style="top:-2.714em;"><span class="pstrut" style="height:2.714em;"></span><span class="mord mathit mtight" style="margin-right:0.05764em;">S</span></span><span style="top:-2.96633em;"><span class="pstrut" style="height:2.714em;"></span><span class="accent-body" style="left:-0.15216em;"><span class="overlay mtight" style="height:0.714em;width:0.471em;"><svg width=\'0.471em\' height=\'0.714em\' style=\'width:0.471em\' viewBox=\'0 0 471 714\' preserveAspectRatio=\'xMinYMin\'><path d=\'M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z\'/></svg></span></span></span></span></span></span></span><span class="mbin mtight">∗</span><span class="mord accent mtight"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9663299999999999em;"><span style="top:-2.714em;"><span class="pstrut" style="height:2.714em;"></span><span class="mord mathit mtight" style="margin-right:0.05764em;">S</span></span><span style="top:-2.96633em;"><span class="pstrut" style="height:2.714em;"></span><span class="accent-body" style="left:-0.15216em;"><span class="overlay mtight" style="height:0.714em;width:0.471em;"><svg width=\'0.471em\' height=\'0.714em\' style=\'width:0.471em\' viewBox=\'0 0 471 714\' preserveAspectRatio=\'xMinYMin\'><path d=\'M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z\'/></svg></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="mord">1</span></span></span></span> <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mfrac><mrow><mover accent="true"><mi>S</mi><mo>⃗</mo></mover><mo>∗</mo><mover accent="true"><mrow><msup><mi>S</mi><mi>i</mi></msup></mrow><mo>⃗</mo></mover></mrow><mrow><mi>m</mi></mrow></mfrac></mrow><mo>=</mo><mo>−</mo><mn>1</mn><mo>∣</mo></mrow><annotation encoding="application/x-tex">{\\vec S\\ast \\vec {S^i}\\over m}=-1 \\mid</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.1220599999999998em;"></span><span class="strut bottom" style="height:1.4670599999999998em;vertical-align:-0.345em;"></span><span class="base"><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1220599999999998em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">m</span></span></span></span><span style="top:-3.15em;"><span class="pstrut" style="height:3em;"></span><span class="stretchy" style="height:0.2em;"><svg width=\'400em\' height=\'0.2em\' viewBox=\'0 0 400000 200\' preserveAspectRatio=\'xMinYMin slice\'><path d=\'M0 80H400000 v40H0z M0 80H400000 v40H0z\'/></svg></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord accent mtight"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9663299999999999em;"><span style="top:-2.714em;"><span class="pstrut" style="height:2.714em;"></span><span class="mord mathit mtight" style="margin-right:0.05764em;">S</span></span><span style="top:-2.96633em;"><span class="pstrut" style="height:2.714em;"></span><span class="accent-body" style="left:-0.15216em;"><span class="overlay mtight" style="height:0.714em;width:0.471em;"><svg width=\'0.471em\' height=\'0.714em\' style=\'width:0.471em\' viewBox=\'0 0 471 714\' preserveAspectRatio=\'xMinYMin\'><path d=\'M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z\'/></svg></span></span></span></span></span></span></span><span class="mbin mtight">∗</span><span class="mord accent mtight"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.0400857142857143em;"><span style="top:-2.757085714285714em;"><span class="pstrut" style="height:2.757085714285714em;"></span><span class="mord mtight"><span class="mord mtight"><span class="mord mathit mtight" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7570857142857143em;"><span style="top:-2.786em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathit mtight">i</span></span></span></span></span></span></span></span></span></span><span style="top:-3.0831714285714282em;"><span class="pstrut" style="height:2.757085714285714em;"></span><span class="accent-body" style="left:-0.2355em;"><span class="overlay mtight" style="height:0.714em;width:0.471em;"><svg width=\'0.471em\' height=\'0.714em\' style=\'width:0.471em\' viewBox=\'0 0 471 714\' preserveAspectRatio=\'xMinYMin\'><path d=\'M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z\'/></svg></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="mord">−</span><span class="mord">1</span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∣</span></span></span></span> { 其中<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover accent="true"><mrow><msup><mi>S</mi><mi>i</mi></msup></mrow><mo>⃗</mo></mover></mrow><annotation encoding="application/x-tex">\\vec {S^i}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.033664em;"></span><span class="strut bottom" style="height:1.033664em;vertical-align:0em;"></span><span class="base"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.033664em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.750664em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">i</span></span></span></span></span></span></span></span></span></span><span style="top:-3.319664em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2355em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg width=\'0.471em\' height=\'0.714em\' style=\'width:0.471em\' viewBox=\'0 0 471 714\' preserveAspectRatio=\'xMinYMin\'><path d=\'M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z\'/></svg></span></span></span></span></span></span></span></span></span></span> 为 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover accent="true"><mi>S</mi><mo>⃗</mo></mover></mrow><annotation encoding="application/x-tex">\\vec S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.9663299999999999em;"></span><span class="strut bottom" style="height:0.9663299999999999em;vertical-align:0em;"></span><span class="base"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9663299999999999em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathit" style="margin-right:0.05764em;">S</span></span><span style="top:-3.25233em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.15216em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg width=\'0.471em\' height=\'0.714em\' style=\'width:0.471em\' viewBox=\'0 0 471 714\' preserveAspectRatio=\'xMinYMin\'><path d=\'M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z\'/></svg></span></span></span></span></span></span></span></span></span></span> 的反码。}</p>\n</li>\n<li>\n<p>利用上面的式子我们知道，当接收端使用码片 S 对接收到的数据进行内积运算时，结果为 0 的是其他用户发送的数据，结果为 1 的是用户发送的比特 1，结果为-1 的是用户发送的比特 0。</p>\n</li>\n<li>\n<p>码分复用需要发送的数据量为原先的 m 倍。 <html><head></head><body><a class="gatsby-resp-image-link" href="/static/0042edad-8e3b-4279-bd93-6906fcd1b640-13ff91c7b0e8db821ee56571ca7216aa-a434a.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 671px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 36.95976154992549%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAHABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAIDBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAd2AWg//xAAXEAEAAwAAAAAAAAAAAAAAAAABABAR/9oACAEBAAEFAmY1/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFhAAAwAAAAAAAAAAAAAAAAAAABAx/9oACAEBAAY/Air/xAAXEAEBAQEAAAAAAAAAAAAAAAABADHw/9oACAEBAAE/IQ8xAy//2gAMAwEAAgADAAAAEHAP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGBABAQEBAQAAAAAAAAAAAAAAAREAceH/2gAIAQEAAT8QpthiGDXvmKAWu//Z\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="0042edad 8e3b 4279 bd93 6906fcd1b640" title="" data-src="/static/0042edad-8e3b-4279-bd93-6906fcd1b640-13ff91c7b0e8db821ee56571ca7216aa-a434a.jpg" data-srcset="/static/0042edad-8e3b-4279-bd93-6906fcd1b640-13ff91c7b0e8db821ee56571ca7216aa-0a465.jpg 200w,\n/static/0042edad-8e3b-4279-bd93-6906fcd1b640-13ff91c7b0e8db821ee56571ca7216aa-e7837.jpg 400w,\n/static/0042edad-8e3b-4279-bd93-6906fcd1b640-13ff91c7b0e8db821ee56571ca7216aa-a434a.jpg 671w" data-sizes="(max-width: 671px) 100vw, 671px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n</ol>\n<h2 id="数据链路层"><a href="#%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>数据链路层</h2>\n<h3 id="三个基本问题"><a href="#%E4%B8%89%E4%B8%AA%E5%9F%BA%E6%9C%AC%E9%97%AE%E9%A2%98" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>三个基本问题</h3>\n<ol>\n<li>封装成帧将网络层传下来的分组添加到首部和尾部，用于标记帧的开始和结束。 <html><head></head><body><a class="gatsby-resp-image-link" href="/static/3402d1c0-7020-4249-9a7f-12ea2ea6adf7-833c1539b4505b3132908b81e35ac2ea-e744a.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 559px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 42.39713774597496%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAIABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAMF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB3JBcH//EABcQAAMBAAAAAAAAAAAAAAAAAAABESH/2gAIAQEAAQUCZNR//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFxAAAwEAAAAAAAAAAAAAAAAAABAxMv/aAAgBAQAGPwKml//EABkQAAMAAwAAAAAAAAAAAAAAAAABEUFhwf/aAAgBAQABPyG7sJ66EeWf/9oADAMBAAIAAwAAABAAD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABkQAQADAQEAAAAAAAAAAAAAAAEAESFx8f/aAAgBAQABPxANAgxphLcikoPUENy3yf/Z\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="3402d1c0 7020 4249 9a7f 12ea2ea6adf7" title="" data-src="/static/3402d1c0-7020-4249-9a7f-12ea2ea6adf7-833c1539b4505b3132908b81e35ac2ea-e744a.jpg" data-srcset="/static/3402d1c0-7020-4249-9a7f-12ea2ea6adf7-833c1539b4505b3132908b81e35ac2ea-38f9e.jpg 200w,\n/static/3402d1c0-7020-4249-9a7f-12ea2ea6adf7-833c1539b4505b3132908b81e35ac2ea-1a21b.jpg 400w,\n/static/3402d1c0-7020-4249-9a7f-12ea2ea6adf7-833c1539b4505b3132908b81e35ac2ea-e744a.jpg 559w" data-sizes="(max-width: 559px) 100vw, 559px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></li>\n<li>透明传输透明表示实际存在的事物好像不存在一样。帧使用首部和尾部进行定界，如果帧的数据部分含有和首部尾部相同的内容，那么帧的开始和结束位置就会被错误的判定，需要在数据部分出现首部尾部相同的内容前面插入转义字符，如果出现转义字符，那么就在转义字符前面再加个转义字符，在接收端进行处理之后可以还原出原始数据。这个过程透明传输的内容是转义字符，用户察觉不到转义字符的存在。 <html><head></head><body><a class="gatsby-resp-image-link" href="/static/4146e14b-56b9-433c-8e3d-74b1b325399c-937ae2e8aa1cdec16d7f0a54aff8a966-cf44c.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 778px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 43.830334190231355%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAMBAgX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHbhihhcP/EABcQAQEBAQAAAAAAAAAAAAAAAAABITH/2gAIAQEAAQUC1qKnX//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABQQAQAAAAAAAAAAAAAAAAAAACD/2gAIAQEABj8CX//EABsQAAICAwEAAAAAAAAAAAAAAAARATEQIYGh/9oACAEBAAE/IZ2cM7r0ZVJQrx//2gAMAwEAAgADAAAAEBMP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAHRABAAICAgMAAAAAAAAAAAAAAQARITEQQXGRof/aAAgBAQABPxBNGBLprfUMaOhz7RAmoq1MzV5n0cf/2Q==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="4146e14b 56b9 433c 8e3d 74b1b325399c" title="" data-src="/static/4146e14b-56b9-433c-8e3d-74b1b325399c-937ae2e8aa1cdec16d7f0a54aff8a966-cf44c.jpg" data-srcset="/static/4146e14b-56b9-433c-8e3d-74b1b325399c-937ae2e8aa1cdec16d7f0a54aff8a966-db956.jpg 200w,\n/static/4146e14b-56b9-433c-8e3d-74b1b325399c-937ae2e8aa1cdec16d7f0a54aff8a966-0c2bd.jpg 400w,\n/static/4146e14b-56b9-433c-8e3d-74b1b325399c-937ae2e8aa1cdec16d7f0a54aff8a966-cf44c.jpg 778w" data-sizes="(max-width: 778px) 100vw, 778px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></li>\n<li>差错检测目前数据链路层广泛使用了循环冗余（CRC）来检查比特差错。</li>\n</ol>\n<h3 id="点对点信道-ppp-协议"><a href="#%E7%82%B9%E5%AF%B9%E7%82%B9%E4%BF%A1%E9%81%93-ppp-%E5%8D%8F%E8%AE%AE" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>点对点信道-PPP 协议</h3>\n<blockquote>\n<p>互联网用户通常需要连接到某个 ISP 之后才能接入到互联网，PPP 协议就是用户计算机和 ISP 进行通信时所使用的数据链路层协议。</p>\n</blockquote>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/8393f520-d824-44ea-a5f3-1c1a73d735fb-faea6fa52bc52ea88150903a4d6ed5a4-bae49.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 651px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 38.095238095238095%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAIABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAIDBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAdyIWg//xAAWEAEBAQAAAAAAAAAAAAAAAAAAASH/2gAIAQEAAQUCXa//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAQ/9oACAEBAAY/An//xAAbEAACAQUAAAAAAAAAAAAAAAAAASExQVFhkf/aAAgBAQABPyGb5EoN9Fs//9oADAMBAAIAAwAAABBwD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABsQAQADAAMBAAAAAAAAAAAAAAEAESExUXGR/9oACAEBAAE/EMjZN15EssHFZ+XAhoXsKn//2Q==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="8393f520 d824 44ea a5f3 1c1a73d735fb" title="" data-src="/static/8393f520-d824-44ea-a5f3-1c1a73d735fb-faea6fa52bc52ea88150903a4d6ed5a4-bae49.jpg" data-srcset="/static/8393f520-d824-44ea-a5f3-1c1a73d735fb-faea6fa52bc52ea88150903a4d6ed5a4-bb104.jpg 200w,\n/static/8393f520-d824-44ea-a5f3-1c1a73d735fb-faea6fa52bc52ea88150903a4d6ed5a4-110b2.jpg 400w,\n/static/8393f520-d824-44ea-a5f3-1c1a73d735fb-faea6fa52bc52ea88150903a4d6ed5a4-bae49.jpg 651w" data-sizes="(max-width: 651px) 100vw, 651px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>在 PPP 的帧中</p>\n<ul>\n<li>F 字段为帧的定界符</li>\n<li>A 和 C 的字段暂时没有意义</li>\n<li>FCS 字段是使用 CRC 的检验序列</li>\n<li>信息部分的长度不超过 1500 字节</li>\n</ul>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/0f39c274-b79c-4e83-8c7c-94fc2747832d-4370f325463fdff2ecc6f7168413396b-f887e.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 628px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 44.745222929936304%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAgADBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAe6NQKUf/8QAGRAAAgMBAAAAAAAAAAAAAAAAACEBEBEx/9oACAEBAAEFAmPajp//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAY/Al//xAAaEAEAAgMBAAAAAAAAAAAAAAABACEQETFh/9oACAEBAAE/IVDRUPWG9XHjO+P/2gAMAwEAAgADAAAAEMMP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGxABAAICAwAAAAAAAAAAAAAAAQAxEaEQIWH/2gAIAQEAAT8QuJ6aiaaBWTEa6MM1pqcf/9k=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="0f39c274 b79c 4e83 8c7c 94fc2747832d" title="" data-src="/static/0f39c274-b79c-4e83-8c7c-94fc2747832d-4370f325463fdff2ecc6f7168413396b-f887e.jpg" data-srcset="/static/0f39c274-b79c-4e83-8c7c-94fc2747832d-4370f325463fdff2ecc6f7168413396b-43f74.jpg 200w,\n/static/0f39c274-b79c-4e83-8c7c-94fc2747832d-4370f325463fdff2ecc6f7168413396b-fa8ff.jpg 400w,\n/static/0f39c274-b79c-4e83-8c7c-94fc2747832d-4370f325463fdff2ecc6f7168413396b-f887e.jpg 628w" data-sizes="(max-width: 628px) 100vw, 628px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h3 id="局域网的拓补"><a href="#%E5%B1%80%E5%9F%9F%E7%BD%91%E7%9A%84%E6%8B%93%E8%A1%A5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>局域网的拓补</h3>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/8b15e36f-69b4-46b6-a07c-7234ac7c7927-9c864198d4cc116bac18b3211d0523b1-9d075.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 34.78701825557809%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAHABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAIF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB2wWD/8QAFhABAQEAAAAAAAAAAAAAAAAAAAFB/9oACAEBAAEFAtR//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFRABAQAAAAAAAAAAAAAAAAAAARD/2gAIAQEABj8Cb//EABkQAAMAAwAAAAAAAAAAAAAAAAABETFBof/aAAgBAQABPyGPJ003YJEf/9oADAMBAAIAAwAAABADz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABoQAQEBAQADAAAAAAAAAAAAAAERIQAxQYH/2gAIAQEAAT8QuInHK+drbF8jfU5BsV1nf//Z\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="8b15e36f 69b4 46b6 a07c 7234ac7c7927" title="" data-src="/static/8b15e36f-69b4-46b6-a07c-7234ac7c7927-9c864198d4cc116bac18b3211d0523b1-dfbfc.jpg" data-srcset="/static/8b15e36f-69b4-46b6-a07c-7234ac7c7927-9c864198d4cc116bac18b3211d0523b1-75a98.jpg 200w,\n/static/8b15e36f-69b4-46b6-a07c-7234ac7c7927-9c864198d4cc116bac18b3211d0523b1-1f451.jpg 400w,\n/static/8b15e36f-69b4-46b6-a07c-7234ac7c7927-9c864198d4cc116bac18b3211d0523b1-dfbfc.jpg 800w,\n/static/8b15e36f-69b4-46b6-a07c-7234ac7c7927-9c864198d4cc116bac18b3211d0523b1-9d075.jpg 986w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h3 id="广播信道-csmacd-协议-"><a href="#%E5%B9%BF%E6%92%AD%E4%BF%A1%E9%81%93-csmacd-%E5%8D%8F%E8%AE%AE-" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>广播信道-CSMA/CD 协议 *</h3>\n<blockquote>\n<p>在广播信道上，同一时间只能允许一台计算机发送数据。 CSMA/CD 表示载波监听多点接入/碰撞检测。</p>\n</blockquote>\n<ul>\n<li>多点接入：说明这是总线型网络，许多计算机以多点的方式连接到总线上。</li>\n<li>载波监听：每个站都必须不停的监听信道。在发送前，如果监听信道正在使用，就必须等待。</li>\n<li>碰撞检测：在发送中，如果监听到信道已有其他站正在发送数据，就表示发生了碰撞。虽然每一个站在发送数据之前都已经监听到信道为空闲，但是由于电磁波的传播时延的存在，还是可能发送碰撞。</li>\n</ul>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/f9ed4da5-0032-41e6-991a-36d995ec28fd-409d707c39ad0bbf16ab2a717598a8a7-3be6a.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 726px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 23.96694214876033%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsSAAALEgHS3X78AAAA0UlEQVQY022QSYqEUBBEvf8xPICu3IuIOIAgiONKUSlFwREVh6rXJd2rjsUnp4iM/MJ5ntd1jeNYVVXbtn3fT9NU1zUxRdJ5nodhaJpm33cCuvd9v78Qtm1b17XrOt/34zgOgsD/Issy5KIoEkVRkiTIYRgahqFpGhSYSAiPzLIsZVl6nmdZlqqqaZo++4uikGUZvqIokLFD/f0L4TgO+MzZts1mJPI8533WJknyer0cx0GOaZz/ef4hcxW2cYVhTqLNLzBBjAvTNHVdd133/R8+ieUP3nQV5k4AAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="f9ed4da5 0032 41e6 991a 36d995ec28fd" title="" data-src="/static/f9ed4da5-0032-41e6-991a-36d995ec28fd-409d707c39ad0bbf16ab2a717598a8a7-3be6a.png" data-srcset="/static/f9ed4da5-0032-41e6-991a-36d995ec28fd-409d707c39ad0bbf16ab2a717598a8a7-0aa07.png 200w,\n/static/f9ed4da5-0032-41e6-991a-36d995ec28fd-409d707c39ad0bbf16ab2a717598a8a7-92365.png 400w,\n/static/f9ed4da5-0032-41e6-991a-36d995ec28fd-409d707c39ad0bbf16ab2a717598a8a7-3be6a.png 726w" data-sizes="(max-width: 726px) 100vw, 726px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html> 记端到端的传播时延为 τ，最先发送的站点最多经过 2τ 就可以知道是否发生了碰撞，称 2τ 为<code class="language-text">争用期</code>。只有经过争用期之后还没有检测到碰撞，才能肯定这次发送不会发送碰撞。当发生碰撞时，站点要停止发送，等待一段时间再发送。这个时间采用<code class="language-text">截断二进制指数退避算法</code>来确定，从离散的整数集合{0,1,…,(2^k-1)}中随机去除一个数，记做 r，然后取 r 倍的争用期作为重传等待时间。</p>\n<h3 id="扩展局域网-"><a href="#%E6%89%A9%E5%B1%95%E5%B1%80%E5%9F%9F%E7%BD%91-" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>扩展局域网 *</h3>\n<ol>\n<li>\n<p>在物理层进行扩展</p>\n</li>\n<li>\n<p>使用集线器进行扩展。</p>\n</li>\n<li>\n<p>集线器的主要功能是对接收到的信号进行放大，以扩大网络的传输距离。</p>\n</li>\n<li>\n<p>集线器不能根据 MAC 地址进行转发，而是以广播的方式发送数据帧。</p>\n</li>\n<li>\n<p>集线器是一种共享式的传输设备，意味着同一时刻只能传输一组数据帧。 <html><head></head><body><a class="gatsby-resp-image-link" href="/static/823cdab7-3779-4e3a-a951-dc2d154e0ee6-16b7ec2375227b72810ef958a3cfc8b6-0b193.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 765px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 35.29411764705882%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAHABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAIDBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAdmIXg//xAAXEAEBAQEAAAAAAAAAAAAAAAABABEC/9oACAEBAAEFAk6kWNz/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAWEAEBAQAAAAAAAAAAAAAAAAAAMSH/2gAIAQEABj8Cqtf/xAAZEAADAAMAAAAAAAAAAAAAAAAAAREhYXH/2gAIAQEAAT8hss6GK5FTJWf/2gAMAwEAAgADAAAAEHAP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGRABAAMBAQAAAAAAAAAAAAAAAQARMSGR/9oACAEBAAE/EFsAW4znPIEFwwWWm+ygFZoT/9k=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="823cdab7 3779 4e3a a951 dc2d154e0ee6" title="" data-src="/static/823cdab7-3779-4e3a-a951-dc2d154e0ee6-16b7ec2375227b72810ef958a3cfc8b6-0b193.jpg" data-srcset="/static/823cdab7-3779-4e3a-a951-dc2d154e0ee6-16b7ec2375227b72810ef958a3cfc8b6-04271.jpg 200w,\n/static/823cdab7-3779-4e3a-a951-dc2d154e0ee6-16b7ec2375227b72810ef958a3cfc8b6-e88ab.jpg 400w,\n/static/823cdab7-3779-4e3a-a951-dc2d154e0ee6-16b7ec2375227b72810ef958a3cfc8b6-0b193.jpg 765w" data-sizes="(max-width: 765px) 100vw, 765px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n<li>\n<p>在链路层进行扩展</p>\n</li>\n<li>\n<p>最开始使用的是网桥，它接收到一个帧时，根据帧的 MAC 地址，查找网桥中的地址表，确定将帧转发的接口。</p>\n</li>\n<li>\n<p>网桥不是共享式设备，因此性能比集线器这种共享设备更高。</p>\n</li>\n<li>\n<p>交换机的问世很快就淘汰了网桥，它实质上是一个多接口网桥，而网桥是两接口。交换机的每个接口都能直接与一个主机或者另一个交换机相连，并且一般都工作在全双工方式。</p>\n</li>\n<li>\n<p>交换机具有学习能力，学习的是交换表的内容，交换表中存储着 MAC 地址到接口的映射。下图中，交换机有 4 个接口，主机 A 向主机 B 发送数据帧时，交换机把主机 A 到接口 1 的映射写入交换表中。为了发送数据帧到 B，先查交换表，此时没有主机 B 的表项，那么主机 A 就发送广播帧，主机 C 和主机 D 会丢弃该项，主机 B 收下之后，查找交换表得到主机 A 映射的接口为 1，因此就把帧发送主机 A，同时交换机添加主机 B 到接口 3 的映射。 <html><head></head><body><a class="gatsby-resp-image-link" href="/static/c9cfcd20-c901-435f-9a07-3e46830c359f-a190f1412cca2f4cec6817f8deded0e6-6cd35.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 39.26829268292683%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAIABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAIF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB2wWD/8QAFhABAQEAAAAAAAAAAAAAAAAAAQAh/9oACAEBAAEFAk1i/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFBABAAAAAAAAAAAAAAAAAAAAEP/aAAgBAQAGPwJ//8QAGBAAAwEBAAAAAAAAAAAAAAAAAAEhEWH/2gAIAQEAAT8h6KW4JiP/2gAMAwEAAgADAAAAEPPP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAHBAAAgICAwAAAAAAAAAAAAAAAREAITFxQVGh/9oACAEBAAE/ECUaZHrR4jMIGkhfkQhk7n//2Q==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="c9cfcd20 c901 435f 9a07 3e46830c359f" title="" data-src="/static/c9cfcd20-c901-435f-9a07-3e46830c359f-a190f1412cca2f4cec6817f8deded0e6-dfbfc.jpg" data-srcset="/static/c9cfcd20-c901-435f-9a07-3e46830c359f-a190f1412cca2f4cec6817f8deded0e6-75a98.jpg 200w,\n/static/c9cfcd20-c901-435f-9a07-3e46830c359f-a190f1412cca2f4cec6817f8deded0e6-1f451.jpg 400w,\n/static/c9cfcd20-c901-435f-9a07-3e46830c359f-a190f1412cca2f4cec6817f8deded0e6-dfbfc.jpg 800w,\n/static/c9cfcd20-c901-435f-9a07-3e46830c359f-a190f1412cca2f4cec6817f8deded0e6-6cd35.jpg 820w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n<li>\n<p>虚拟局域网虚拟局域网可以建立与物理位置无关的逻辑组，只有在同一个虚拟局域网中的成员才会收到链路层广播信息，例如下图中（A1,A2,A3,A4）属于一个虚拟局域网，A1 发送的广播会被 A2,A3,A4 收到，而其他站点收不到。 <html><head></head><body><a class="gatsby-resp-image-link" href="/static/a74b70ac-323a-4b31-b4d5-90569b8a944b-32096129e323c811536384843ea2f66b-7bebf.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 695px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 59.71223021582735%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAABgklEQVQoz12RyY6CYBCEef8Tj+DdxIsxcjMuCSbuGnBDBXFfMgIu4Dpf+MkM0odOw1/dVV0tfWJxPp8Ph8NyuVwsFuv12nXd/X6/3W4dxzmdTmSeVqvV/X4XeOnzHTxnMplKpdJsNsvlMpn+Wq2mKApzq9XqcDi8Xq+v1+ur+f1+ky+XS6fTsSwLQkY0Gg2g/X5f0zQ4N5sNI4Qc8FK8E9k8TKdTFAJCqmmaDDLDmM1mk8lkMBgI5qhZVATLGIaRTqchbLVaSBiNRhCOx+NisajrOlpQ4fu+IJPoxJ7dbsfs+XzO4Gw2a4RBQ7vdRo5t291uF8DxePwJg+L5fEbMghxcr9eDlp9o4/PxeHiexy78gYDaDQNyWqSEW9ibSqXQRgEbssm4raoqzGSebrdb8lSin1PJslyv19kwn8/ncrlSqYRPhUKB0dwJw4MggPzf7fidQWM1CO4BMxm1sHECsQsFa0c7xwOF0LI2y+MWDEKU0CXyXySb0Ya3zAaHWwl0In4BQ1iUTE9sbU8AAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="a74b70ac 323a 4b31 b4d5 90569b8a944b" title="" data-src="/static/a74b70ac-323a-4b31-b4d5-90569b8a944b-32096129e323c811536384843ea2f66b-7bebf.png" data-srcset="/static/a74b70ac-323a-4b31-b4d5-90569b8a944b-32096129e323c811536384843ea2f66b-8e255.png 200w,\n/static/a74b70ac-323a-4b31-b4d5-90569b8a944b-32096129e323c811536384843ea2f66b-f1fd8.png 400w,\n/static/a74b70ac-323a-4b31-b4d5-90569b8a944b-32096129e323c811536384843ea2f66b-7bebf.png 695w" data-sizes="(max-width: 695px) 100vw, 695px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n</ol>\n<h3 id="mac-层-"><a href="#mac-%E5%B1%82-" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>MAC 层 *</h3>\n<blockquote>\n<p>MAC 地址是 6 字节（48 位）的地址，用于唯一标识网络适配器（网卡），一台主机拥有多少个适配器就有多少个 MAC 地址，例如笔记本电脑普遍存在无线网络适配器和有线网络适配器。</p>\n</blockquote>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/50d38e84-238f-4081-8876-14ef6d7938b5-669c2bb79937f7c0e230140738a8f8f8-c60ac.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 42.93103448275862%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAgAF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB2ZoM4//EABkQAAEFAAAAAAAAAAAAAAAAABAAAREhQf/aAAgBAQABBQKVbjB//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFhAAAwAAAAAAAAAAAAAAAAAAACAx/9oACAEBAAY/AiL/AP/EABwQAQABBAMAAAAAAAAAAAAAAAEAEBEhsTFBUf/aAAgBAQABPyFfpO7aA2zDSHBT/9oADAMBAAIAAwAAABCzz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABoQAAIDAQEAAAAAAAAAAAAAAAERABAhgaH/2gAIAQEAAT8QfYQtRgBByIHYiTeVfJX/2Q==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="50d38e84 238f 4081 8876 14ef6d7938b5" title="" data-src="/static/50d38e84-238f-4081-8876-14ef6d7938b5-669c2bb79937f7c0e230140738a8f8f8-dfbfc.jpg" data-srcset="/static/50d38e84-238f-4081-8876-14ef6d7938b5-669c2bb79937f7c0e230140738a8f8f8-75a98.jpg 200w,\n/static/50d38e84-238f-4081-8876-14ef6d7938b5-669c2bb79937f7c0e230140738a8f8f8-1f451.jpg 400w,\n/static/50d38e84-238f-4081-8876-14ef6d7938b5-669c2bb79937f7c0e230140738a8f8f8-dfbfc.jpg 800w,\n/static/50d38e84-238f-4081-8876-14ef6d7938b5-669c2bb79937f7c0e230140738a8f8f8-c60ac.jpg 1160w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<ul>\n<li>类型：标记上层使用的协议。</li>\n<li>数据：长度在 46~1500 之间，如果太小则需要填充。</li>\n<li>FCS：帧检验序列，使用的是 CRC 检验方法。</li>\n<li>前同步码：只是为了计算 FCS 临时加入的，计算之后会丢弃。</li>\n</ul>\n<h2 id="网络层-"><a href="#%E7%BD%91%E7%BB%9C%E5%B1%82-" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>网络层 *</h2>\n<h3 id="网际协议-ip-概述"><a href="#%E7%BD%91%E9%99%85%E5%8D%8F%E8%AE%AE-ip-%E6%A6%82%E8%BF%B0" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>网际协议 IP 概述</h3>\n<ul>\n<li>\n<p>因为网络层是整个互联网的核心，因此应当让网络层尽可能的简单。网络层向上只提供简单灵活、无连接、尽最大努力交互的数据报服务。</p>\n</li>\n<li>\n<p>使用 IP 协议，可以把异构的物理网络连接起来，使得网络层看起来好像是一个统一的网络。 <html><head></head><body><a class="gatsby-resp-image-link" href="/static/fe3d224c-8ffd-40f9-85b1-86ffe1393f6c-7d9afcee0d0974490e3b6ea7e1408cdd-6e6e8.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 704px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 42.47159090909091%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAIABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAIF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB2LCwf//EABgQAAIDAAAAAAAAAAAAAAAAAAERAAIx/9oACAEBAAEFArNnBP/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABQQAQAAAAAAAAAAAAAAAAAAABD/2gAIAQEABj8Cf//EABkQAAIDAQAAAAAAAAAAAAAAAAARATFBcf/aAAgBAQABPyHDI6cKn//aAAwDAQACAAMAAAAQgA//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAYEAEBAQEBAAAAAAAAAAAAAAABESEAQf/aAAgBAQABPxA3Z7lsuchC+FR5Lbdfe//Z\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="fe3d224c 8ffd 40f9 85b1 86ffe1393f6c" title="" data-src="/static/fe3d224c-8ffd-40f9-85b1-86ffe1393f6c-7d9afcee0d0974490e3b6ea7e1408cdd-6e6e8.jpg" data-srcset="/static/fe3d224c-8ffd-40f9-85b1-86ffe1393f6c-7d9afcee0d0974490e3b6ea7e1408cdd-6b746.jpg 200w,\n/static/fe3d224c-8ffd-40f9-85b1-86ffe1393f6c-7d9afcee0d0974490e3b6ea7e1408cdd-006bd.jpg 400w,\n/static/fe3d224c-8ffd-40f9-85b1-86ffe1393f6c-7d9afcee0d0974490e3b6ea7e1408cdd-6e6e8.jpg 704w" data-sizes="(max-width: 704px) 100vw, 704px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n<li>\n<p>与 IP 协议配套使用的还有三个协议：</p>\n<ol>\n<li>地址解析协议 ARP</li>\n<li>网际控制报文协议 ICMP</li>\n<li>网际组管理协议 IGMP <html><head></head><body><a class="gatsby-resp-image-link" href="/static/163cf8b4-5f30-46c9-af00-316a71b3c890-95a5672d3a192646bbfae01fb692a842-668bc.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 346px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 83.52601156069365%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAARABQDASIAAhEBAxEB/8QAGAABAQEBAQAAAAAAAAAAAAAAAAECAwX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAH2sdIaBuBQf//EABoQAAICAwAAAAAAAAAAAAAAAAARASAhMUH/2gAIAQEAAQUCZuRZ6qf/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAWEAADAAAAAAAAAAAAAAAAAAAAMDH/2gAIAQEABj8CKj//xAAcEAACAgIDAAAAAAAAAAAAAAABEQAhEEExUZH/2gAIAQEAAT8hKEviM0FhmKF9QuqECb9hmsf/2gAMAwEAAgADAAAAEMMHAP/EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8QH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8QH//EAB4QAQACAgIDAQAAAAAAAAAAAAEAESExYXFBgZGh/9oACAEBAAE/EGeGic/m4dhFpK9XL5+QNpKyrLFVYfCjdd6jBFOdxpCCf//Z\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="163cf8b4 5f30 46c9 af00 316a71b3c890" title="" data-src="/static/163cf8b4-5f30-46c9-af00-316a71b3c890-95a5672d3a192646bbfae01fb692a842-668bc.jpg" data-srcset="/static/163cf8b4-5f30-46c9-af00-316a71b3c890-95a5672d3a192646bbfae01fb692a842-8289d.jpg 200w,\n/static/163cf8b4-5f30-46c9-af00-316a71b3c890-95a5672d3a192646bbfae01fb692a842-668bc.jpg 346w" data-sizes="(max-width: 346px) 100vw, 346px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></li>\n</ol>\n</li>\n</ul>\n<h3 id="ip-数据报格式"><a href="#ip-%E6%95%B0%E6%8D%AE%E6%8A%A5%E6%A0%BC%E5%BC%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>IP 数据报格式</h3>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/8681db55-0873-434b-aa98-83d07e8392ae-a2f14d44c5750354cae8dc176174024f-0b193.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 765px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 51.37254901960784%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAEDBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAdydmIYf/8QAFxABAQEBAAAAAAAAAAAAAAAAAAEQEv/aAAgBAQABBQKukXf/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAY/Al//xAAcEAACAgIDAAAAAAAAAAAAAAABEQAxEFEhkcH/2gAIAQEAAT8hcbMRkc9ylKeohoY//9oADAMBAAIAAwAAABADz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EAB8QAQACAgAHAAAAAAAAAAAAAAEAESExEFFhcYGhsf/aAAgBAQABPxDYQOlYliAeF/Y1upcnczDsme/Rw//Z\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="8681db55 0873 434b aa98 83d07e8392ae" title="" data-src="/static/8681db55-0873-434b-aa98-83d07e8392ae-a2f14d44c5750354cae8dc176174024f-0b193.jpg" data-srcset="/static/8681db55-0873-434b-aa98-83d07e8392ae-a2f14d44c5750354cae8dc176174024f-04271.jpg 200w,\n/static/8681db55-0873-434b-aa98-83d07e8392ae-a2f14d44c5750354cae8dc176174024f-e88ab.jpg 400w,\n/static/8681db55-0873-434b-aa98-83d07e8392ae-a2f14d44c5750354cae8dc176174024f-0b193.jpg 765w" data-sizes="(max-width: 765px) 100vw, 765px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<ul>\n<li>版本：有 4（IPV4）和 6（IPV6）两个值。</li>\n<li>首部长度：占 4 位，因此最大值为 15，值为 1 表示的是 1 个 32 位字的长度，也就是 4 字节。因为首部固定长度为 20 字节，因此该值最小为 5，如果可选部分的长度不是 4 字节的整数倍，就用尾部的填充部分来填充。</li>\n<li>区分服务：用来获得更好的服务，一般情况下不使用。</li>\n<li>总长度：包括首部长度和数据部分长度。</li>\n<li>标识：在数据报长度过长从而发生分片的情况下，相同数据报的不同分片具有相同的标识符。</li>\n<li>片偏移：和标识符一起，用于发生分片的情况下。片偏移的单位为 8 字节。</li>\n<li>生存时间：TTL，它的存在是为了防止无法交付的数据报在互联网中不断的兜圈子。以路由器跳数为单位，当 TTL 为 0 时就丢弃数据报。</li>\n<li>协议：指出携带的数据应该上交给哪个协议进行处理，例如 ICMP、TCP、UDP 等。</li>\n<li>首部校验和：因为数据报每经过一个路由器，都要重新计算检验和，因此检验和不包含数据部分可以减少计算的工作量。</li>\n</ul>\n<h3 id="ip-地址编址"><a href="#ip-%E5%9C%B0%E5%9D%80%E7%BC%96%E5%9D%80" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>IP 地址编址</h3>\n<p>IP 地址编制方式经历了三个历史阶段：</p>\n<ul>\n<li>\n<p>分类；</p>\n</li>\n<li>\n<p>子网划分；</p>\n</li>\n<li>\n<p>无分类；</p>\n</li>\n<li>\n<p>分类</p>\n</li>\n<li>\n<p>由两部分组成，网络号和主机号，其中不同类别具有不同的网络号长度，并且是固定的。</p>\n</li>\n<li>\n<p>IP 地址::={&#x3C;网络号>,&#x3C;主机号>} <html><head></head><body><a class="gatsby-resp-image-link" href="/static/2ddd6132-60be-4a72-9daa-3d9756191f4a-6d61848df7259b8993c9809cfcac2b98-8157d.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 541px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 55.637707948244%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABnklEQVQozzWSyY6CQBRF+f+1CxP9Ad2YGBcujCMJtjFGjYgj4gji0CA4R+1Dlf0WlapH3eHdQvl8Pu/3m/V4PHqedz6ff//rdDqtVqv1en25XDxRss/GdV2aCsjhcDgajer1ejKZjMViqVSq3W5zab/fw7hYLBqNhmmavu8fDgc6fAJ8vV4VNB+Px+v1QgEW7qFmWVYYhtxm3e123W7XcRwEQUrGzWbzVeb2drudTCaVSqXT6eTz+Ww2q6qqpmnVahWi2+0WBAHiy+WSuYAx0f1+V9CEFfrBYFAsFhHJ5XLpdPpHVK1W6/V66CPb7/d1XZfOZRCRbTiezyd4bE+nU6RwoYsiC7ywgRoWPKI0n8+xzbCRbQ5gIM5kMqVSCcO4jcfjiUSCY7lcLhQKcgUDGC7EmeUbGBQESLDyM4UxjjI8RqXDHg3Smc1mXGN4BSTeDMPg9ng8psuE5ME3Nq1Wi9joy2Yoiml5iMg2yhzwQJcHpEuwMiGI5J/jigpESTxExBTNjBmUccVj4EribdtuNpsEgSxPwAVYfFEgISXmP1IwSueG4M1EAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2ddd6132 60be 4a72 9daa 3d9756191f4a" title="" data-src="/static/2ddd6132-60be-4a72-9daa-3d9756191f4a-6d61848df7259b8993c9809cfcac2b98-8157d.png" data-srcset="/static/2ddd6132-60be-4a72-9daa-3d9756191f4a-6d61848df7259b8993c9809cfcac2b98-696af.png 200w,\n/static/2ddd6132-60be-4a72-9daa-3d9756191f4a-6d61848df7259b8993c9809cfcac2b98-4fa96.png 400w,\n/static/2ddd6132-60be-4a72-9daa-3d9756191f4a-6d61848df7259b8993c9809cfcac2b98-8157d.png 541w" data-sizes="(max-width: 541px) 100vw, 541px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n<li>\n<p>子网划分</p>\n</li>\n<li>\n<p>通过在主机号字段中拿一部分作为子网号，把两级 IP 地址划分为三级 IP 地址。注意，外部网络看不到子网的存在。</p>\n</li>\n<li>\n<p>IP 地址::={&#x3C;网络号>,&#x3C;子网号>,&#x3C;主机号>}</p>\n</li>\n<li>\n<p>要使用子网，必须配置子网掩码。一个 B 类地址的默认子网掩码为 255.255.0.0，如果 B 类地址的子网占两个比特，那么子网掩码为 11111111 11111111 11000000 00000000，也就是 255.255.192.0。</p>\n</li>\n<li>\n<p>无分类</p>\n</li>\n<li>\n<p>无分类编址 CIDR 消除了传统 A 类、B 类和 C 类地址以及划分子网的概念，使用网络前缀和主机号来对 IP 地址进行编码，网络前缀的长度可以根据需要变化。</p>\n</li>\n<li>\n<p>IP 地址::={&#x3C;网络前缀号>,&#x3C;主机号>}</p>\n</li>\n<li>\n<p>CIDR 的记法上采用在 IP 地址后面加上网络前缀长度的方法。例如 128.14.35.7/20 表示前 20 位网络前缀。</p>\n</li>\n<li>\n<p>CIDR 的地址掩码可以继续称为子网掩码，子网掩码首 1 长度为前缀的长度。</p>\n</li>\n<li>\n<p>一个 CIDR 地址块中有很多地址，一个 CIDR 表示的网络就可以表示原来的很多个网络，并且在路由表中只需要一个路由就可以代替原来多个路由，减少了路由表项的数量。把这种通过使用网络前缀来减少路由表项的方式称为路由聚合，也成为构成超网。</p>\n</li>\n<li>\n<p>在路由表中的项目由“网络前缀”和“下一跳地址”组成，在查找时可能会得到不只一个匹配结果，应当采用最长前缀匹配来确定应该匹配哪一个。</p>\n</li>\n</ul>\n<h3 id="ip-地址和-mac-地址"><a href="#ip-%E5%9C%B0%E5%9D%80%E5%92%8C-mac-%E5%9C%B0%E5%9D%80" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>IP 地址和 MAC 地址</h3>\n<blockquote>\n<p>网络层实现主机之间的通信，而链路层实现具体每段链路之间的通信。因此在通信过程中，IP 数据报的源地址和目的地址始终不变，而 MAC 地址随链路的改变而改变。</p>\n</blockquote>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/86b71296-0d1e-4a63-bcd9-54955b6b781b-ae1c7f45e3b51c6e0a0a04895f150107-cf44c.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 778px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 46.27249357326478%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAMBAgQF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB6ytkFBof/8QAGxAAAgEFAAAAAAAAAAAAAAAAAhEAASIxQUL/2gAIAQEAAQUCJu6C11qmP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABgQAAIDAAAAAAAAAAAAAAAAABAxAAGh/9oACAEBAAY/AnHpsf/EAB0QAAICAQUAAAAAAAAAAAAAAAERACExEEFhgcH/2gAIAQEAAT8hN4HR3AXqu5wj8geXPGjgn//aAAwDAQACAAMAAAAQoM//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAbEAACAgMBAAAAAAAAAAAAAAABEQAhMUGhUf/aAAgBAQABPxAgfDNAhVCHYC0Vb8hs5ODOocIHQzmn/9k=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="86b71296 0d1e 4a63 bcd9 54955b6b781b" title="" data-src="/static/86b71296-0d1e-4a63-bcd9-54955b6b781b-ae1c7f45e3b51c6e0a0a04895f150107-cf44c.jpg" data-srcset="/static/86b71296-0d1e-4a63-bcd9-54955b6b781b-ae1c7f45e3b51c6e0a0a04895f150107-db956.jpg 200w,\n/static/86b71296-0d1e-4a63-bcd9-54955b6b781b-ae1c7f45e3b51c6e0a0a04895f150107-0c2bd.jpg 400w,\n/static/86b71296-0d1e-4a63-bcd9-54955b6b781b-ae1c7f45e3b51c6e0a0a04895f150107-cf44c.jpg 778w" data-sizes="(max-width: 778px) 100vw, 778px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h3 id="地址解析协议-arp"><a href="#%E5%9C%B0%E5%9D%80%E8%A7%A3%E6%9E%90%E5%8D%8F%E8%AE%AE-arp" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>地址解析协议 ARP</h3>\n<ul>\n<li>实现由 IP 地址得到的 MAC 地址。 <html><head></head><body><a class="gatsby-resp-image-link" href="/static/1b4d6737-d834-46ed-8f9d-6f123e29c8dd-2c901b953a2a4890c9acddcdc861bc04-3791f.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 579px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 37.30569948186529%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAHABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAIDBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAdmAXg//xAAYEAADAQEAAAAAAAAAAAAAAAABAhESMf/aAAgBAQABBQJg1bUHP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABYQAQEBAAAAAAAAAAAAAAAAAAAhsf/aAAgBAQAGPwKJqv/EABkQAQEBAAMAAAAAAAAAAAAAAAERAEFhcf/aAAgBAQABPyFotnTgbSe1rDy3/9oADAMBAAIAAwAAABCDz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABgQAQADAQAAAAAAAAAAAAAAAAEAESEx/9oACAEBAAE/EHYQ6UR4jNWAkqybtz//2Q==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="1b4d6737 d834 46ed 8f9d 6f123e29c8dd" title="" data-src="/static/1b4d6737-d834-46ed-8f9d-6f123e29c8dd-2c901b953a2a4890c9acddcdc861bc04-3791f.jpg" data-srcset="/static/1b4d6737-d834-46ed-8f9d-6f123e29c8dd-2c901b953a2a4890c9acddcdc861bc04-e5850.jpg 200w,\n/static/1b4d6737-d834-46ed-8f9d-6f123e29c8dd-2c901b953a2a4890c9acddcdc861bc04-97ecc.jpg 400w,\n/static/1b4d6737-d834-46ed-8f9d-6f123e29c8dd-2c901b953a2a4890c9acddcdc861bc04-3791f.jpg 579w" data-sizes="(max-width: 579px) 100vw, 579px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></li>\n<li>每个主机都有一个 ARP 高速缓存，里面有本局域网上各主机和路由器的 IP 地址到硬件地址的映射表。</li>\n<li>如果主机 A 知道主机 B 的 IP 地址，但是 ARP 的高速缓存中没有该 IP 地址到 MAC 地址的映射，此时主机 A 通过广播的方式发送 ARP 请求分组，主机 B 收到该请求后会发送 ARP 响应分组给主机 A 告知其 MAC 地址，随后主机 A 向其高速缓存中写入主机 B 的 IP 地址到硬件地址的映射。 <html><head></head><body><a class="gatsby-resp-image-link" href="/static/8bc6fc2c-d198-4759-b06c-18d94d851e97-4d183f98131bae7a7d54f03de63da4ac-07a9a.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 696px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 73.13218390804597%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsSAAALEgHS3X78AAAB5klEQVQoz12SV2/CQBCE/f9/CW8IROcBRC8CBMgU0avpnVDiOPl8i0ySlTgNvpvb2ZnTLMv6+lX3+3232y0Wi81mczweDcMAr9dr/m63W1lvt9vz+YSoWaq+VUFmo9PpxOPxQqFQrVZLpVIul4tGo3yZz+fcwl0fqjiv8btcLnxl73w+8xVys9lcLpd07na7w+FwtVohYTQaATj8qcomo1PXda/X6/P5KpUKp0OhEJjO9Xo9GAz6/f5UKoUKMMc4IAPasmnFf+RxZa1WC4fDjUaDPmiBQyvm5KJ8Pt9utzOZDLLpZ5qmTaZ7NptlMAB7kAHssbrd7larBQgEAsViEcDkqBN3XmTuXqhig+bT6fR0OrHHtGxxgGkFoAgtf8iO1WIenP1+z2qoGo/HxOMkQjnYjspUJQCH6cN4rEhgfl0VEfR6PVa+Hw6Hx+Pxiup3cQWBYWG/36c5+XGUZ4MW+gvgLYgpGgipEK7XqwROwjjn8XhcLheGsQWHYCE8VMnzsmcGIZX7mHk2m3GaK+iGZ5PJRBriYrlcRjYW8J1034Ylk0mJKp1Ox2IxxzyaMzyANwMZEIlEeBGS5YuMVAmAPBgSJnLQiTc0HwwGiUSCFMkSaZLZu7NYLyua4XAIGm4DcA4s9v6rH+rQNAa9vBDBAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="8bc6fc2c d198 4759 b06c 18d94d851e97" title="" data-src="/static/8bc6fc2c-d198-4759-b06c-18d94d851e97-4d183f98131bae7a7d54f03de63da4ac-07a9a.png" data-srcset="/static/8bc6fc2c-d198-4759-b06c-18d94d851e97-4d183f98131bae7a7d54f03de63da4ac-fe3b1.png 200w,\n/static/8bc6fc2c-d198-4759-b06c-18d94d851e97-4d183f98131bae7a7d54f03de63da4ac-abb86.png 400w,\n/static/8bc6fc2c-d198-4759-b06c-18d94d851e97-4d183f98131bae7a7d54f03de63da4ac-07a9a.png 696w" data-sizes="(max-width: 696px) 100vw, 696px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></li>\n</ul>\n<h3 id="路由器的结构"><a href="#%E8%B7%AF%E7%94%B1%E5%99%A8%E7%9A%84%E7%BB%93%E6%9E%84" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>路由器的结构</h3>\n<ul>\n<li>路由器从功能上可以划分为两大部分：路由选择和分组转发。</li>\n<li>分组转发由三部分组成：交换结构、一组输入端口和一组输出端口。 <html><head></head><body><a class="gatsby-resp-image-link" href="/static/3a676c54-b559-4466-9b21-eb10f1e25879-64dda807f55c2b78cff052e0b5a144e5-23558.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 556px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 52.33812949640287%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAMFAQL/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAG2rhBSND//xAAaEAACAgMAAAAAAAAAAAAAAAABAgAQAxEy/9oACAEBAAEFAmMQ6rJ0K//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABkQAAEFAAAAAAAAAAAAAAAAAAABESAhQf/aAAgBAQAGPwLS3WP/xAAaEAACAwEBAAAAAAAAAAAAAAAAEQExcRAh/9oACAEBAAE/IUuFpErtj6RXOhFH/9oADAMBAAIAAwAAABDjD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABsQAQACAgMAAAAAAAAAAAAAAAEAETFxgZHB/9oACAEBAAE/EK4gpgqIIE1KbU5jsq3MmiN7ezFqf//Z\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="3a676c54 b559 4466 9b21 eb10f1e25879" title="" data-src="/static/3a676c54-b559-4466-9b21-eb10f1e25879-64dda807f55c2b78cff052e0b5a144e5-23558.jpg" data-srcset="/static/3a676c54-b559-4466-9b21-eb10f1e25879-64dda807f55c2b78cff052e0b5a144e5-84453.jpg 200w,\n/static/3a676c54-b559-4466-9b21-eb10f1e25879-64dda807f55c2b78cff052e0b5a144e5-a559f.jpg 400w,\n/static/3a676c54-b559-4466-9b21-eb10f1e25879-64dda807f55c2b78cff052e0b5a144e5-23558.jpg 556w" data-sizes="(max-width: 556px) 100vw, 556px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></li>\n<li>交换结构的交换网络有以下三种实现方式： <html><head></head><body><a class="gatsby-resp-image-link" href="/static/7f82fd18-7f16-4125-ada6-bb6b795b4fda-fcb6de2360a74a59476854205275a163-d6910.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 568px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 74.64788732394366%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsSAAALEgHS3X78AAABs0lEQVQoz22TZ4vCYBCE/f//wy8Kgh8UwQoW7BFbsFxQI3bUWLDn7kn2LicxA8qbZGZ3djbxmab57QXzD66b9/v9+XzK2fd6vcbjcaVSyeVyxWJxMBjM5/Ptdrvb7Y7HI6Tb7TYajer1eqFQUFVV07TFYrHf7x+Ph49fq9Wq1WqJRIISgUDA7/eHQqFYLHY4HBDzz/1yuRyNRoPBYDKZ5EAVqzPiLxs8pmoqlUqn05ybzaZhGIhPpxOdYdNcURQI+XyeO5i3xN1ulweZTKbX6+Etm81ipNFoYB4xDhUbcOgBGafUssTMzFTX63W5XGIPV8yMRlIR0IAS/X4fMTS8wLdsO3mez2cY5KTrOp6r1ap0wMJ0OkW/Xq85bDYb+v2m/bkSOpRKpXg83ul02u0280ciEYZEQwrkQmdoXFq230EHyqNnct0GQRCHzCI9+Bfyf2cHrBqriDUbmMfFarWSINA4TA8x+V0uF8MG2TI/y6PiJ9NtWwrL8ETKelhBOBymxCfTQyyQDak2eHOxwKVbbHpB2vKSDIdDxmZ/7Ilx3j8Yb9vyevBKTyYTQp7NZs4n5WL+AFWgO4a0tc2XAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="7f82fd18 7f16 4125 ada6 bb6b795b4fda" title="" data-src="/static/7f82fd18-7f16-4125-ada6-bb6b795b4fda-fcb6de2360a74a59476854205275a163-d6910.png" data-srcset="/static/7f82fd18-7f16-4125-ada6-bb6b795b4fda-fcb6de2360a74a59476854205275a163-487ad.png 200w,\n/static/7f82fd18-7f16-4125-ada6-bb6b795b4fda-fcb6de2360a74a59476854205275a163-1cefb.png 400w,\n/static/7f82fd18-7f16-4125-ada6-bb6b795b4fda-fcb6de2360a74a59476854205275a163-d6910.png 568w" data-sizes="(max-width: 568px) 100vw, 568px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></li>\n</ul>\n<h3 id="路由器分组转发流程"><a href="#%E8%B7%AF%E7%94%B1%E5%99%A8%E5%88%86%E7%BB%84%E8%BD%AC%E5%8F%91%E6%B5%81%E7%A8%8B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>路由器分组转发流程</h3>\n<ol>\n<li>从数据报的首部提取目的主机的 IP 地址 D，得到目的网络地址 N。（路由表项是网络号而不是 IP 地址，这样做大大减少了路由表条目数量）；</li>\n<li>若 N 就是与此路由器直接相连的某个网络地址，则直接进行交付；</li>\n<li>若路由表中有目的地址为 D 的特定主机路由，则把数据报传送给表中所指明的下一跳路由器；</li>\n<li>若路由表中有到达网络 N 的路由，则把数据报传送给路由表中所指明的下一跳路由器；</li>\n<li>若路由表中有一个默认路由，则把数据报传送给路由表中所指明的默认路由器；</li>\n<li>报告分组转发出错。</li>\n</ol>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/8d211911-0e62-4190-ab00-d8610adec4a0-30c05361cc351047035ed980b8f7f5a2-9628a.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 725px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 27.86206896551724%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAGABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAduQsD//xAAYEAADAQEAAAAAAAAAAAAAAAAAAQIRIf/aAAgBAQABBQKlTO6f/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGRAAAQUAAAAAAAAAAAAAAAAAAAEQESEx/9oACAEBAAY/AqWDW//EABgQAAMBAQAAAAAAAAAAAAAAAAABITFB/9oACAEBAAE/IeghKjCyn//aAAwDAQACAAMAAAAQg8//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAaEAEAAgMBAAAAAAAAAAAAAAABABEhMUFh/9oACAEBAAE/EBMVGHZfp2WVgDVRrbqf/9k=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="8d211911 0e62 4190 ab00 d8610adec4a0" title="" data-src="/static/8d211911-0e62-4190-ab00-d8610adec4a0-30c05361cc351047035ed980b8f7f5a2-9628a.jpg" data-srcset="/static/8d211911-0e62-4190-ab00-d8610adec4a0-30c05361cc351047035ed980b8f7f5a2-3a09e.jpg 200w,\n/static/8d211911-0e62-4190-ab00-d8610adec4a0-30c05361cc351047035ed980b8f7f5a2-d5ce8.jpg 400w,\n/static/8d211911-0e62-4190-ab00-d8610adec4a0-30c05361cc351047035ed980b8f7f5a2-9628a.jpg 725w" data-sizes="(max-width: 725px) 100vw, 725px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h3 id="路由选择协议"><a href="#%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E5%8D%8F%E8%AE%AE" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>路由选择协议</h3>\n<ul>\n<li>\n<p>互联网使用的路由选择协议都是自适应的，能随着网络通信量和拓补结构的变化而自适应的进行调整。</p>\n</li>\n<li>\n<p>互联网可以划分为许多较小的自治系统 AS，一个 AS 可以使用一种和别的 AS 不同的路由选择协议。</p>\n</li>\n<li>\n<p>可以把路由选择协议划分为两大类：</p>\n</li>\n<li>\n<p>内部网关协议 IGP：在 AS 内部使用，如 RIP 和 OSPF；</p>\n</li>\n<li>\n<p>外部网关协议 EGP：在 AS 之间使用，如 BGP。 <html><head></head><body><a class="gatsby-resp-image-link" href="/static/e0be6970-5b0e-44a2-bc71-df4d61c42b8f-4d2af2dd21901e9cf7c1f51fcff09f43-fe401.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 540px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 20.555555555555554%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAEABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAEDBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAdqAtB//xAAYEAACAwAAAAAAAAAAAAAAAAABAiEiMf/aAAgBAQABBQIizLAz/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFxAAAwEAAAAAAAAAAAAAAAAAAAExEP/aAAgBAQAGPwKsrz//xAAbEAACAQUAAAAAAAAAAAAAAAABEQAhMUFhcf/aAAgBAQABPyFrq0DMQHDLdXP/2gAMAwEAAgADAAAAEPAP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGhABAAMAAwAAAAAAAAAAAAAAAQARMSGB0f/aAAgBAQABPxBypkrgEN6P6wIKlWus/9k=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="e0be6970 5b0e 44a2 bc71 df4d61c42b8f" title="" data-src="/static/e0be6970-5b0e-44a2-bc71-df4d61c42b8f-4d2af2dd21901e9cf7c1f51fcff09f43-fe401.jpg" data-srcset="/static/e0be6970-5b0e-44a2-bc71-df4d61c42b8f-4d2af2dd21901e9cf7c1f51fcff09f43-839e5.jpg 200w,\n/static/e0be6970-5b0e-44a2-bc71-df4d61c42b8f-4d2af2dd21901e9cf7c1f51fcff09f43-95e19.jpg 400w,\n/static/e0be6970-5b0e-44a2-bc71-df4d61c42b8f-4d2af2dd21901e9cf7c1f51fcff09f43-fe401.jpg 540w" data-sizes="(max-width: 540px) 100vw, 540px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n<li>\n<p>内部网关协议 RIP</p>\n<ul>\n<li>RIP 是一种分布式的基础距离向量的路由选择协议。距离是指跳数，直接相连的路由器的跳数为 1，跳数最多为 15，超过 15 表示不可达。</li>\n<li>RIP 按固定的时间间隔仅和相邻路由器交换自己的路由表，经过若干次交换之后，所有的路由器最终会知道到达本自治系统中任何一个网络的最短距离和下一跳的路由器地址。</li>\n<li>\n<p>距离向量算法：</p>\n<blockquote>\n<ol>\n<li>对地址为 X 的相邻路由器发来的 RIP 报文，先修改报文中的所有项目，把下一跳字段的地址改为 X，并把所有的距离字段加 1；</li>\n<li>对修改后的 RIP 报文中的每一个项目，进行一下步骤：</li>\n</ol>\n</blockquote>\n<ul>\n<li>若原来的路由表中没有目的网络N，则把该项目添加到路由表中；</li>\n<li>\n<p>否则，若下一跳路由器的地址是X，则把收到的项目替换原来路由表中的项目；否则，若收到的项目中的距离d小于路由表中的距离，则进行更新（例如原始路由表项为Net2,5,P,新表项为Net2,4,X,则更新）否则什么也不做。</p>\n<blockquote>\n<ol start="3">\n<li>若 3 份中还没有收到相邻路由器的更新路由表，则把该相邻路由器标记为不可达，即把距离置为 16。</li>\n</ol>\n</blockquote>\n</li>\n</ul>\n</li>\n<li>RIP 协议实现简单，开销小，但是 RIP 能使用的最大距离为 15，限制了网络的规模，并且当网络出现故障时，要经过比较长的时间才能将消息传送到所有路由器。</li>\n</ul>\n</li>\n<li>\n<p>内部网关协议 OSPF</p>\n<ul>\n<li>开放最短路径优先 OSPF，是为了克服 RIP 的缺点而开发出来的。</li>\n<li>开放表示 OSPF 不受某一家厂商控制，而是公开发表的；最短路径优先表示使用了 Dijkstra 提出的最短路径算法 SPF。</li>\n<li>\n<p>OSPF 具有以下特点：</p>\n<blockquote>\n<ul>\n<li>向本自治系统中的所有路由器发送信息，这种方法是洪泛法。</li>\n<li>发送的信息就是与相邻路由器的链路状态，链路状态包括与哪些路由器相连以及链路的度量，度量用费用、距离、时延、带宽等来表示。</li>\n<li>只有当链路状态发生变化时，路由器才会发送信息。</li>\n</ul>\n</blockquote>\n</li>\n<li>所有路由器都具有全网的拓补结构图，并且是一致的，相比于 RIP，OSPF 的更新过程收敛的很快。</li>\n</ul>\n</li>\n<li>\n<p>外部网关协议 BGP</p>\n<ul>\n<li>AS 之间的路由选择很困难，主要是互联网规模很大。并且各个 AS 内部使用不同的路由选择协议，就无法准确定义路径的度量。并且 AS 之间的路由选择必须考虑有关的策略，比如有些 AS 不愿意让其他 AS 经过。</li>\n<li>BGP 只能寻找一条比较好的路由，而不是最佳路由。它采用路径向量路由选择协议。</li>\n<li>每个 AS 都必须配置 BGP 发言人，通过在两个相邻 BGP 发言人之间建立 TCP 连接来交换路由信息。 <html><head></head><body><a class="gatsby-resp-image-link" href="/static/eb6271de-22c9-4f4b-8b31-eab1f560efac-d02ebc5a0958fdc17bdd666558dc86bc-8b318.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 668px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 41.01796407185629%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAABQElEQVQY0zWQy46CQBBF+f81v8APEFyxICFCogkoapSggIIKBgK+RUdgjoPTC+i6XfdRJTRN836/X6/XarVyXTfLsuPx2LZtXdc/f4fXJEmiKJrNZpvNZrFY3O93GiAK/IDiOF6v1/v9frvdhmFIGQQB5WQyQXEwGPB6Op12ux0qvPKEqIAAEHoUh8OBDl3XRVGEXJYld0mSsKKHRHmeP59P3/dHoxHRPs6Px4NiPB7LsowVzuQE0TTNsixK3Obzued5IIhS3m43iAIC3QDD4VBRFEY4n88g0+nUNE0IhKqqCkOc4bAFKPR/nYlnGAbTcmdzDIk2CeEXRUG3qqq9Xo85u102/0e4XC7QQFkDq0YvTVMu0HgCRKXf77MwZkF3uVyCf8lYdck5mADxhcCq6HYcx7ZtYhMYZxBEr9dr5/8LRAyxyeh+2c4AAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="eb6271de 22c9 4f4b 8b31 eab1f560efac" title="" data-src="/static/eb6271de-22c9-4f4b-8b31-eab1f560efac-d02ebc5a0958fdc17bdd666558dc86bc-8b318.png" data-srcset="/static/eb6271de-22c9-4f4b-8b31-eab1f560efac-d02ebc5a0958fdc17bdd666558dc86bc-d09a1.png 200w,\n/static/eb6271de-22c9-4f4b-8b31-eab1f560efac-d02ebc5a0958fdc17bdd666558dc86bc-9165c.png 400w,\n/static/eb6271de-22c9-4f4b-8b31-eab1f560efac-d02ebc5a0958fdc17bdd666558dc86bc-8b318.png 668w" data-sizes="(max-width: 668px) 100vw, 668px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></li>\n</ul>\n</li>\n</ul>\n<h3 id="网际控制报文协议-icmp"><a href="#%E7%BD%91%E9%99%85%E6%8E%A7%E5%88%B6%E6%8A%A5%E6%96%87%E5%8D%8F%E8%AE%AE-icmp" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>网际控制报文协议 ICMP</h3>\n<blockquote>\n<p>ICMP 是为了更有效地转发 IP 数据报和提高交付成功的机会。它封装在 IP 数据报中，但是不属于高层协议。</p>\n</blockquote>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/9b5e0fa0-9274-4219-a3a9-84fbb509c735-e528cc76279fcf1d48e87bd5724eb34e-00888.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 525px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 46.476190476190474%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMFAv/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAbU+mgeaD//EABkQAQEAAwEAAAAAAAAAAAAAAAIBABIxMv/aAAgBAQABBQJy6xu08XD6z//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABkQAAIDAQAAAAAAAAAAAAAAAAAhESAxkf/aAAgBAQAGPwJaQ+jp/8QAHBAAAgICAwAAAAAAAAAAAAAAAREAECExQXGR/9oACAEBAAE/IXD+lExnAEDyo3d1/9oADAMBAAIAAwAAABADz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABsQAQACAgMAAAAAAAAAAAAAAAEAESExELHB/9oACAEBAAE/ELCpsDIOdrWh5At3XObnZzP/2Q==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="9b5e0fa0 9274 4219 a3a9 84fbb509c735" title="" data-src="/static/9b5e0fa0-9274-4219-a3a9-84fbb509c735-e528cc76279fcf1d48e87bd5724eb34e-00888.jpg" data-srcset="/static/9b5e0fa0-9274-4219-a3a9-84fbb509c735-e528cc76279fcf1d48e87bd5724eb34e-e3762.jpg 200w,\n/static/9b5e0fa0-9274-4219-a3a9-84fbb509c735-e528cc76279fcf1d48e87bd5724eb34e-03b74.jpg 400w,\n/static/9b5e0fa0-9274-4219-a3a9-84fbb509c735-e528cc76279fcf1d48e87bd5724eb34e-00888.jpg 525w" data-sizes="(max-width: 525px) 100vw, 525px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<blockquote>\n<p>ICMP 报文分为差错报告报文和询文报文。</p>\n</blockquote>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/aa29cc88-7256-4399-8c7f-3cf4a6489559-538223049cfbbad1deb34a0b6513e235-05ed6.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 38.69499241274658%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAABOElEQVQY0y2RyY6CUBBF+f8PcsMCIg6BJqjRBEEB0YDGiRlCA02ffnYtKvdV3Zruk/q+/xE2jiPYcZz7/X4+n6fT6Wq12u12m81mu91altW2LbRvYV3XgSV4JJbLpaIox+PxcDhMJhNN0wBRFMVxDCAly7KqqvRK0/TxeNxut7IsJebUdZ3neZIkJPAUvF4vfBiGtM6yjPjz+SSCh9w0DYC4dL1eyYGGYWCf9/vNk66Xy8U0Tdd1wVVV1cIARVEQYTjzJEisRwtO4pLPViSYOZ/PbdumI2UUFMI+vf6LGYVUXI9aJFiYBKTT6WQYxnq9RjbwZ2wuDBrHwpF83w+CgLUpJo0SqMIuxGez2ZcwXdfhUIAiMKmH9le83+/Rk+V54z3PYxRB/gyRkX2xWPBtSM0ikTCUg8akX7C8rvx6iiRwAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="aa29cc88 7256 4399 8c7f 3cf4a6489559" title="" data-src="/static/aa29cc88-7256-4399-8c7f-3cf4a6489559-538223049cfbbad1deb34a0b6513e235-fee1c.png" data-srcset="/static/aa29cc88-7256-4399-8c7f-3cf4a6489559-538223049cfbbad1deb34a0b6513e235-a67b7.png 200w,\n/static/aa29cc88-7256-4399-8c7f-3cf4a6489559-538223049cfbbad1deb34a0b6513e235-0b187.png 400w,\n/static/aa29cc88-7256-4399-8c7f-3cf4a6489559-538223049cfbbad1deb34a0b6513e235-fee1c.png 800w,\n/static/aa29cc88-7256-4399-8c7f-3cf4a6489559-538223049cfbbad1deb34a0b6513e235-b1a91.png 1200w,\n/static/aa29cc88-7256-4399-8c7f-3cf4a6489559-538223049cfbbad1deb34a0b6513e235-05ed6.png 1318w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h3 id="分组网间探测-ping"><a href="#%E5%88%86%E7%BB%84%E7%BD%91%E9%97%B4%E6%8E%A2%E6%B5%8B-ping" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>分组网间探测 PING</h3>\n<ul>\n<li>\n<p>PING 是 ICMP 的一个重要应用，主要用来测试两台主机之间的连通性。</p>\n</li>\n<li>\n<p>PING 发送的 IP 数据报封装的是无法交付的 UDP 用户数据报。</p>\n</li>\n<li>\n<p>PING 的过程：</p>\n<ol>\n<li>源主机向目的主机发送一连串的 IP 数据报。第一个数据报 P1 的生存时间 TTL 设置为 1，但 P1 到达路径上的第一个路由器 R1 时，R1 收下它并把 TTL 减 1，此时 TTL 等于 0，R1 就把 P1 丢弃，并向源主机发送一个 ICMP 时间超过差错报告报文；</li>\n<li>源主机接着发送第二个数据报 P2，并把 TTL 设置为 2。P2 先到达 R1，R1 收下后把 TTL 减 1 再转发给 R2，R2 收下后也把 TTL 减 1，由于此时 TTL 为 0，R2 就丢弃 P2，并向源主机发送一个 ICMP 时间超过差错报告报文；</li>\n<li>不断执行这样的步骤，直到最后一个数据报刚刚到达目的主机，主机不转发数据报，也不把 TTL 减 1。但是因为数据报封装的是无法交付的 UDP，因此目的主机要向源主机发送 ICMP 终点不可达差错报告报文。</li>\n<li>之后源主机知道了到达目的主机所经过的路由器 IP 地址以及到达每个路由器的往返时间。</li>\n</ol>\n</li>\n</ul>\n<h3 id="ip-多播"><a href="#ip-%E5%A4%9A%E6%92%AD" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>IP 多播</h3>\n<blockquote>\n<p>在一对多的通信中，多播不需要将分组复制多份，从而大大节约网络资源。</p>\n</blockquote>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/f50a8e52-a683-444c-8e32-63c1890fe84a-d24dae6597fa07390aecbb89c033d103-5cce7.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 52.61904761904762%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAIBAwX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHXLlJHD//EABkQAAIDAQAAAAAAAAAAAAAAAAECABEhIv/aAAgBAQABBQK+nZbVgQYNM//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABgQAAIDAAAAAAAAAAAAAAAAAAAQESFB/9oACAEBAAY/ApMdr//EABoQAQACAwEAAAAAAAAAAAAAAAEAERAhMVH/2gAIAQEAAT8hRr8rsSBbCMsQwHa3Njqsf//aAAwDAQACAAMAAAAQI8//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAbEAEAAwEAAwAAAAAAAAAAAAABABExIUFx8P/aAAgBAQABPxAdQ4q6eiefcpMlq58MAiq6e3BDVTGpQwBjkzJ//9k=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="f50a8e52 a683 444c 8e32 63c1890fe84a" title="" data-src="/static/f50a8e52-a683-444c-8e32-63c1890fe84a-d24dae6597fa07390aecbb89c033d103-dfbfc.jpg" data-srcset="/static/f50a8e52-a683-444c-8e32-63c1890fe84a-d24dae6597fa07390aecbb89c033d103-75a98.jpg 200w,\n/static/f50a8e52-a683-444c-8e32-63c1890fe84a-d24dae6597fa07390aecbb89c033d103-1f451.jpg 400w,\n/static/f50a8e52-a683-444c-8e32-63c1890fe84a-d24dae6597fa07390aecbb89c033d103-dfbfc.jpg 800w,\n/static/f50a8e52-a683-444c-8e32-63c1890fe84a-d24dae6597fa07390aecbb89c033d103-5cce7.jpg 840w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h3 id="虚拟专用网-vpn"><a href="#%E8%99%9A%E6%8B%9F%E4%B8%93%E7%94%A8%E7%BD%91-vpn" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>虚拟专用网 VPN</h3>\n<ul>\n<li>\n<p>由于 IP 地址的短缺，一个机构能申请到的 IP 地址远远小于本机构所拥有的主机数。并且一个机构并不需要把所有主机接入到外部的互联网中，机构内的计算机可以使用仅在本机构有效的 IP 地址（专用地址）。</p>\n</li>\n<li>\n<p>有三个专用地址块：</p>\n</li>\n<li>\n<p>10.0.0.0~10.255.255.255</p>\n</li>\n<li>\n<p>172.16.0.0~172.31.255.255</p>\n</li>\n<li>\n<p>192.168.0.0~192.168.255.255</p>\n</li>\n<li>\n<p>VPN 使用的公用互联网作为本机构各专用网之间的通信媒体。专用指机构内的主机只与本机构的其他主机通信，虚拟指“好像是”，而实际上并不是，它有经过公用的互联网。</p>\n</li>\n<li>\n<p>下图中，场所 A 和 B 的通信部都经过互联网，如果场所 A 的主机要和另一个场所 B 的主机 Y 通信，IP 数据报的源地址是 10.1.0.1，目的地址是 10.2.0.3。数据报先发送到与互联网相连的路由器 R1，R1 对内部数据进行加密，然后重新加上数据报的首部，源地址是路由器 R1 的全球地址 125.1.2.3，目的地址是路由器 R2 的全球地址 194.4.5.6。路由器 R2 收到数据报后将数据部分进行解密，恢复原来的数据报，此时目的地址为 10.2.0.3，就交付给 Y。</p>\n</li>\n</ul>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/1556770b-8c01-4681-af10-46f1df69202c-a3b4e1a60750d855c21fe024897313e5-41ed6.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 77.79339423752636%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAQABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAECAwX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHsLQag/8QAGhAAAgIDAAAAAAAAAAAAAAAAAAECESEiMf/aAAgBAQABBQJ7PgipGRH/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAYEAADAQEAAAAAAAAAAAAAAAAAITECEP/aAAgBAQAGPwKE5RaGf//EABkQAAMBAQEAAAAAAAAAAAAAAAABEVExQf/aAAgBAQABPyFfSK8O4NUaShKIFTR//9oADAMBAAIAAwAAABAzD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABkQAQEBAQEBAAAAAAAAAAAAAAERAJFhwf/aAAgBAQABPxBklQlE+4kIQgUhzJZE8cgqEJJbnciYmUNb/9k=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="1556770b 8c01 4681 af10 46f1df69202c" title="" data-src="/static/1556770b-8c01-4681-af10-46f1df69202c-a3b4e1a60750d855c21fe024897313e5-dfbfc.jpg" data-srcset="/static/1556770b-8c01-4681-af10-46f1df69202c-a3b4e1a60750d855c21fe024897313e5-75a98.jpg 200w,\n/static/1556770b-8c01-4681-af10-46f1df69202c-a3b4e1a60750d855c21fe024897313e5-1f451.jpg 400w,\n/static/1556770b-8c01-4681-af10-46f1df69202c-a3b4e1a60750d855c21fe024897313e5-dfbfc.jpg 800w,\n/static/1556770b-8c01-4681-af10-46f1df69202c-a3b4e1a60750d855c21fe024897313e5-ca27a.jpg 1200w,\n/static/1556770b-8c01-4681-af10-46f1df69202c-a3b4e1a60750d855c21fe024897313e5-41ed6.jpg 1423w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h3 id="网络地址转换-nat"><a href="#%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2-nat" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>网络地址转换 NAT</h3>\n<ul>\n<li>专用网内部的主机使用本地 IP 地址又想和互联网上的主机通信时，可以使用 NAT 来将本地 IP 转换为全球 IP。</li>\n<li>在以前，NAT 将本地 IP 和全球 IP 一一对应，这种方式拥有 n 个全球 IP 地址的专用网内最多只可以同时拥有 n 台主机接入互联网。为了更有效利用全球 IP 地址，现在常用的 NAT 转换表把运输层的端口号也用上了，使得多个专用网内部的主机公用一个全球 IP 地址。使用端口号的 NAT 也叫作网络地址与端口转换 NAPT。</li>\n</ul>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2719067e-b299-4639-9065-bed6729dbf0b-04b8de33a1de8173b48df5c6f0e3236d-18059.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 22.193877551020407%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsSAAALEgHS3X78AAAArklEQVQI1yWOSQ6EMAwE8/9/cQAhsQRERNjmAGIJe0DiNjWMD47tVLstnudZluU4Dmvtfd/btlF83tBa+77vOI7rujDXdRlj5nkmgwELnqIouq6j6Ps+yzI067oCDcMQRRHKMAxpGeZ5HgQBE3hWCEZt28JN0wQkpfQ8r2kaaNaVZcmEDGbeUEqlacrvOI4/Z5RcRYNPHMecisP//rqu2VhV1Xme+75DJkmCOWIkXzLU1UbnFBWoAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2719067e b299 4639 9065 bed6729dbf0b" title="" data-src="/static/2719067e-b299-4639-9065-bed6729dbf0b-04b8de33a1de8173b48df5c6f0e3236d-fee1c.png" data-srcset="/static/2719067e-b299-4639-9065-bed6729dbf0b-04b8de33a1de8173b48df5c6f0e3236d-a67b7.png 200w,\n/static/2719067e-b299-4639-9065-bed6729dbf0b-04b8de33a1de8173b48df5c6f0e3236d-0b187.png 400w,\n/static/2719067e-b299-4639-9065-bed6729dbf0b-04b8de33a1de8173b48df5c6f0e3236d-fee1c.png 800w,\n/static/2719067e-b299-4639-9065-bed6729dbf0b-04b8de33a1de8173b48df5c6f0e3236d-18059.png 1176w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h2 id="运输层"><a href="#%E8%BF%90%E8%BE%93%E5%B1%82" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>运输层*</h2>\n<blockquote>\n<p>网络层只把分组发送到目的主机，但是真正通信的并不是主机而是主机中的进程。运输层提供了进程间的逻辑通信，运输层向高层用户屏蔽了下面网络层的核心细节，使应用程序看见的好像在两个运输层实体之间有一条端到端的逻辑通信信道。</p>\n</blockquote>\n<h3 id="udp-和-tcp-的特点"><a href="#udp-%E5%92%8C-tcp-%E7%9A%84%E7%89%B9%E7%82%B9" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>UDP 和 TCP 的特点</h3>\n<ul>\n<li>用户数据报协议 UDP 是无连接的，尽最大可能交付，没有拥塞控制，面向报文（对于应用程序传下来的报文不合并也不拆分，只是添加 UDP 首部）。</li>\n<li>传输控制协议 TCP 是面向连接的，提供可靠交付，有流量控制，拥塞控制，提供全双工通信，面向字节流（把应用层传下的报文看成字节流，把字节流组织成大小不等的数据块）。</li>\n</ul>\n<h3 id="udp-首部格式"><a href="#udp-%E9%A6%96%E9%83%A8%E6%A0%BC%E5%BC%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>UDP 首部格式</h3>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/d4c3a4a1-0846-46ec-9cc3-eaddfca71254-ee5de09d9faf1cb8c30ebb2b0b6cfb31-38bca.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 59.2788038698329%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAABAAF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB1zOOJqP/xAAZEAEBAAMBAAAAAAAAAAAAAAACAAEDERL/2gAIAQEAAQUC2FxSu4lcN5xf/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAHRAAAgEEAwAAAAAAAAAAAAAAAAECEBEhMTJxkf/aAAgBAQAGPwK8ZPoy5eo3TijR/8QAHRABAAEDBQAAAAAAAAAAAAAAAQARITFRYYGRwf/aAAgBAQABPyG4OoYBNGNxhQw7mEUfOAlgcT//2gAMAwEAAgADAAAAEOMP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAHBABAQACAgMAAAAAAAAAAAAAAREAIUFhMYGR/9oACAEBAAE/EFILSzX2Yx3VyT9N5MiQ7ZMCW3nrFN061OTx3mAM/9k=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="d4c3a4a1 0846 46ec 9cc3 eaddfca71254" title="" data-src="/static/d4c3a4a1-0846-46ec-9cc3-eaddfca71254-ee5de09d9faf1cb8c30ebb2b0b6cfb31-dfbfc.jpg" data-srcset="/static/d4c3a4a1-0846-46ec-9cc3-eaddfca71254-ee5de09d9faf1cb8c30ebb2b0b6cfb31-75a98.jpg 200w,\n/static/d4c3a4a1-0846-46ec-9cc3-eaddfca71254-ee5de09d9faf1cb8c30ebb2b0b6cfb31-1f451.jpg 400w,\n/static/d4c3a4a1-0846-46ec-9cc3-eaddfca71254-ee5de09d9faf1cb8c30ebb2b0b6cfb31-dfbfc.jpg 800w,\n/static/d4c3a4a1-0846-46ec-9cc3-eaddfca71254-ee5de09d9faf1cb8c30ebb2b0b6cfb31-38bca.jpg 1137w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<blockquote>\n<p>首部字段只有 8 个字节，包括源端口、目的端口、长度、检验和。12 字节的伪首部是为了计算校验和临时添加的。</p>\n</blockquote>\n<h3 id="tcp-首部格式"><a href="#tcp-%E9%A6%96%E9%83%A8%E6%A0%BC%E5%BC%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TCP 首部格式</h3>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/55dc4e84-573d-4c13-a765-52ed1dd251f9-3a123d50e9e5aa5cff7f1cd4acec9336-f5b3e.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 79.49502677888293%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAAsSAAALEgHS3X78AAACVUlEQVQoz02TN29iQRSF+VmE1paABiQbUdDQ8y9oEALJbqD2dhQIJJKEBJWRkMAyQQQHwpIzS1gw0d7vvdllfYvhvplz7z3nzKD4+vpaLBbD4fC3HNvtdjabrddr8s1m0+v1VquV2AcDkoR1Mpmcz2cFxSCq1Wqr1Wq328ViMZfL1Wq1n3JUKpVGo9FsNkmenp4KhQJ5vV4H0O/3pWJG0fV0Oh2Px9FoRC9GHQ6H3W7H0cfHB/skoDnd7/d8Mnw+n0vF/HQ6HUBsbeQQtOnIENblcinIs0/OKjgqoJ7NZgWNX3LQC0nUQBLml32Gs1JMF4qpkiZzXCqVQqEQk+FMZT6fDwaD0WgU/XSHJwXAcAvaKKILYKmYZtTAlm8ovL+/87mUYzAYQHI8HuPo6+vry8sLGAQiHmpSMRm7IEAjslwuw+rt7U2gYYvg6XSKL5xmMhn28Ry84vPzk5mot1qtKpVKrVYrlUqVHBqNRvUvrq+vjUajzWbzeDyPj4/0olCazI/w3O/3u93uu7u7+/t7EqfT6XK5vF6vz+dLJpPIEW4hm1tEuVQsHEIMXeAJLhaLYTUIcQpPvMjKgVXYhpC/j4TnIXbJ7XY7JK+urvR6vclkur29tVgsDofDYDBotVqdTndzc2M2m/l8fn5W0Kbb7YpniB9QQFIqlWJNJBI/5AgEAg8PD+FwOB6PRyIReHGvgBVQhwNXgiThLWyxkPtgH8JcEhLoDjWOtnIAACnRvngmJBAkvI3L5gVz+hb/3RZBgfifYAFvgGfHC0NCOp3GRTz7PobkD7lyKey9bWL2AAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="55dc4e84 573d 4c13 a765 52ed1dd251f9" title="" data-src="/static/55dc4e84-573d-4c13-a765-52ed1dd251f9-3a123d50e9e5aa5cff7f1cd4acec9336-fee1c.png" data-srcset="/static/55dc4e84-573d-4c13-a765-52ed1dd251f9-3a123d50e9e5aa5cff7f1cd4acec9336-a67b7.png 200w,\n/static/55dc4e84-573d-4c13-a765-52ed1dd251f9-3a123d50e9e5aa5cff7f1cd4acec9336-0b187.png 400w,\n/static/55dc4e84-573d-4c13-a765-52ed1dd251f9-3a123d50e9e5aa5cff7f1cd4acec9336-fee1c.png 800w,\n/static/55dc4e84-573d-4c13-a765-52ed1dd251f9-3a123d50e9e5aa5cff7f1cd4acec9336-b1a91.png 1200w,\n/static/55dc4e84-573d-4c13-a765-52ed1dd251f9-3a123d50e9e5aa5cff7f1cd4acec9336-f5b3e.png 1307w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<ul>\n<li>序号：用于对字节流进行编号，例如序号为 301，表示第一个字节的编号为 301，如果携带的数据长度为 100 个字节，那么下一个报文段的序号应为 401。</li>\n<li>确认号：期望收到的下一个报文段的序号。例如 B 正确收到 A 发送来的一个报文段，序号为 501，携带的数据长度为 200 字节，因此 B 期望下一个报文段的序号为 701，B 发送给 A 的确认报文段确认号就为 701。</li>\n<li>数据偏移：指的是数据部分距离报文段起始处的偏移量，实际上指的是首部长度。</li>\n<li>确认 ACK：当 ACK=1 时确认号字段有效，否则无效。TCP 规定，在连接建立后所有传送的报文段都必须把 ACK 置 1。</li>\n<li>同步 SYN：在连接建立时用来同步序号。当 SYN=1，ACK=0 时表示这是一个连接请求报文段。若对方同意建立连接，则响应报文中 SYN=1，ACK=1。</li>\n<li>终止 FIN：用来释放一个连接，当 FIN=1 时，表示此报文段的发送方的数据已发送完毕，并要求释放运输连接。</li>\n<li>窗口：窗口值作为接收方让发送方设置其发送窗口的依据。之所以有这个限制，是因为接收方的数据缓存空间是有限的。</li>\n</ul>\n<h3 id="tcp-的三次握手"><a href="#tcp-%E7%9A%84%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TCP 的三次握手</h3>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/e92d0ebc-7d46-413b-aec1-34a39602f787-7716ba6f8afe335ad565fca4c4b0b297-df5e4.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 64.21800947867298%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAABoElEQVQoz22SScrCQBCF+wSuvY438hau3bsXwa0LlyoEBUGcwTHGeYqaOGvM/5GCduCvRdNDvXqvXrXyff/5fHqed71ex+Px6/Xy/wu5H41G7Xab5MfjwarAnM9n8Ov1Op1O27ZNEg+fGL2pVCrZbPZyudzvd9d1leM42+32eDxGo9FQKBSLxUTLpwSpRd1IJBIOh1OpFPnIVNSYzWbT6TSTySQSCQofDofFYtFsNtHC/e12kxJoTCaT8Xg8l8utVitelZYEptPp7Pd7smGmK6ioSyHy2HDcbDbkIFZQSqviuVgsLpdLjjzYQcBMdq1WM03TsiwIwGtflG4MTt5QWy6XW61Wo9GAkFRUaHXgq9Xq6XR6M0uIc8PhEAwj6ff7rMjhEn4mIuqojltvsK5qGMZkMtGzofndboc39GIFIRNC4C8YHmwcDAbsmSQkHEulUr1epyMvCH5IoVD4AktAgmBIxGq6EJPQjE75hYDz+TxpX2B2yCNvPp+7QQCAH29YOTpB0D9IcZtQP78Xe3u9Hp3zgZgQnne7XSRwyebnw/8BkTnMsD/g5E0AAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="e92d0ebc 7d46 413b aec1 34a39602f787" title="" data-src="/static/e92d0ebc-7d46-413b-aec1-34a39602f787-7716ba6f8afe335ad565fca4c4b0b297-fee1c.png" data-srcset="/static/e92d0ebc-7d46-413b-aec1-34a39602f787-7716ba6f8afe335ad565fca4c4b0b297-a67b7.png 200w,\n/static/e92d0ebc-7d46-413b-aec1-34a39602f787-7716ba6f8afe335ad565fca4c4b0b297-0b187.png 400w,\n/static/e92d0ebc-7d46-413b-aec1-34a39602f787-7716ba6f8afe335ad565fca4c4b0b297-fee1c.png 800w,\n/static/e92d0ebc-7d46-413b-aec1-34a39602f787-7716ba6f8afe335ad565fca4c4b0b297-b1a91.png 1200w,\n/static/e92d0ebc-7d46-413b-aec1-34a39602f787-7716ba6f8afe335ad565fca4c4b0b297-df5e4.png 1266w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<blockquote>\n<p>假设 A 为客户端，B 为服务器端。</p>\n</blockquote>\n<ol>\n<li>首先 B 处于 LISTEN（监听）状态，等待客户的连接请求。</li>\n<li>A 向 B 发送连接请求报文段，SYN=1，ACK=0，选择一个初始的序号 x。</li>\n<li>B 收到连接请求报文段，如果同意建立连接，则向 A 发送连接确认报文段，SYN=1，ACK=1，确认号为 x+1，同时也选择一个初始的序号 y。</li>\n<li>A 收到 B 的连接确认报文段后，还要向 B 发出确认，确认号为 y+1，序号为 x+1，进入 TIME-WAIT 状态。</li>\n<li>B 收到 A 的确认后，连接建立。</li>\n</ol>\n<h3 id="tcp-的四次挥手"><a href="#tcp-%E7%9A%84%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TCP 的四次挥手</h3>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/f87afe72-c2df-4c12-ac03-9b8d581a8af8-845813c61190858b218abd19b9e15948-81230.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 69.16488222698072%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAIBBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAe5Gi1D/xAAZEAEAAgMAAAAAAAAAAAAAAAABABECITH/2gAIAQEAAQUCe3CZDbsn/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGRAAAgMBAAAAAAAAAAAAAAAAAREAEDFB/9oACAEBAAY/AhDQxdiBVf/EABoQAQADAAMAAAAAAAAAAAAAAAEAESExUXH/2gAIAQEAAT8hsbZNguKyWI9EFjn3zDCf/9oADAMBAAIAAwAAABBjD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABwQAQEAAgIDAAAAAAAAAAAAAAERACExUUGBwf/aAAgBAQABPxByoS671irdQ1CT7jVW4q8NRV41PGWqJCAHpwoi1CL3n//Z\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="f87afe72 c2df 4c12 ac03 9b8d581a8af8" title="" data-src="/static/f87afe72-c2df-4c12-ac03-9b8d581a8af8-845813c61190858b218abd19b9e15948-dfbfc.jpg" data-srcset="/static/f87afe72-c2df-4c12-ac03-9b8d581a8af8-845813c61190858b218abd19b9e15948-75a98.jpg 200w,\n/static/f87afe72-c2df-4c12-ac03-9b8d581a8af8-845813c61190858b218abd19b9e15948-1f451.jpg 400w,\n/static/f87afe72-c2df-4c12-ac03-9b8d581a8af8-845813c61190858b218abd19b9e15948-dfbfc.jpg 800w,\n/static/f87afe72-c2df-4c12-ac03-9b8d581a8af8-845813c61190858b218abd19b9e15948-81230.jpg 934w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<blockquote>\n<p>以下描述不讨论序号和确认号，因为序号和确认号的规则比较简单。并且不讨论 ACK，因为 ACK 在连接建立之后都为 1。</p>\n</blockquote>\n<ol>\n<li>A 发送连接释放报文段，FIN=1；</li>\n<li>B 收到之后发出确认，此时 TCP 属于半关闭状态，B 能向 A 发送数据但是 A 不能向 B 发送数据。</li>\n<li>当 B 要不再需要连接时，发送连接释放请求报文段，FIN=1；</li>\n<li>A 收到后发出确认，此时连接释放。</li>\n</ol>\n<p><strong>TIME_WAIT</strong> 客户端接收到服务器端的 FIN 报文后进入此状态，此时并不是直接进入 CLOSED 状态，还需要等待一个时间计时器设置的时间 2MSL。这么做有 2 个理由：</p>\n<ol>\n<li>确保最后一个确认报文能够到达。如果 B 没有收到 A 发送来的确认报文段，那么就会重新发送连接释放请求报文段，A 等待一段时间就是为了处理这种情况。</li>\n<li>等待一段时间是为了让本连接持续时间内所产生的所有报文段都从网络中消失，使得下一个新的连接不会出现旧的连接请求报文段。</li>\n</ol>\n<h3 id="tcp-滑动窗口"><a href="#tcp-%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TCP 滑动窗口</h3>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/a3253deb-8d21-40a1-aae4-7d178e4aa319-c244f5caab8bd0c5a0af6a622a4a830a-8d2dc.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 44.92890995260663%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAECBAX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHrLTBYw//EABgQAAMBAQAAAAAAAAAAAAAAAAABEQJB/9oACAEBAAEFAtWqiGdP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGRAAAQUAAAAAAAAAAAAAAAAAAAIgMUKB/9oACAEBAAY/ApXhdv8A/8QAHRAAAgIBBQAAAAAAAAAAAAAAAAERMRBBUXGBkf/aAAgBAQABPyGaKVwQm7wimvZQVcf/2gAMAwEAAgADAAAAEPDP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGxABAAIDAQEAAAAAAAAAAAAAAQAhETGhEEH/2gAIAQEAAT8QVgKhS6QuLkdsmtlX8YZtnK+f/9k=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="a3253deb 8d21 40a1 aae4 7d178e4aa319" title="" data-src="/static/a3253deb-8d21-40a1-aae4-7d178e4aa319-c244f5caab8bd0c5a0af6a622a4a830a-dfbfc.jpg" data-srcset="/static/a3253deb-8d21-40a1-aae4-7d178e4aa319-c244f5caab8bd0c5a0af6a622a4a830a-75a98.jpg 200w,\n/static/a3253deb-8d21-40a1-aae4-7d178e4aa319-c244f5caab8bd0c5a0af6a622a4a830a-1f451.jpg 400w,\n/static/a3253deb-8d21-40a1-aae4-7d178e4aa319-c244f5caab8bd0c5a0af6a622a4a830a-dfbfc.jpg 800w,\n/static/a3253deb-8d21-40a1-aae4-7d178e4aa319-c244f5caab8bd0c5a0af6a622a4a830a-8d2dc.jpg 1055w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<ul>\n<li>窗口是缓存一部分，用来暂时存放字节流。发送方和接收方各有一个窗口，接收方通过 TCP 报文段中的窗口字段告诉发送方自己的窗口大小，发送方根据这个值和其他信息设置自己窗口大小。</li>\n<li>发送窗口内的字节都允许被发送，接收窗口内的字节都允许接收。如果发送窗口左部的字节已经发送并且受到了确认，那么就将发送窗口向右滑动一定的距离，直到左部第一个字节不是已发送并且已经确认的状态；接收窗口类似，接收窗口左部字节已经发送确认并交付主机，就向右滑动接收窗口。</li>\n<li>接收窗口只会对窗口内最后一个按序到达的字节进行确认，例如接收窗口已经收到的字节为{31,32,34,35}，其中{31,32}按序到达，而{34,35}就不是，因此只对字节 32 进行确认。发送方得到一个字节的确认之后，就知道这个字节之前的所有字节都已经被接收。</li>\n</ul>\n<h3 id="tcp-可靠传输"><a href="#tcp-%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TCP 可靠传输</h3>\n<ul>\n<li>TCP 使用超时重传来实现可靠传输：如果一个已经发送的报文段在超时时间内没有收到确认，那么就重传这个报文段。</li>\n<li>一个报文段从发送到接收再到确认所经过的时间称为往返时间 RTT，加权平均往返时间 RTTs 计算如下： <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mi>T</mi><msub><mi>T</mi><mi>s</mi></msub><mo>=</mo><mo>(</mo><mn>1</mn><mo>−</mo><mi>a</mi><mo>)</mo><mo>∗</mo><mo>(</mo><mi>R</mi><mi>T</mi><msub><mi>T</mi><mi>s</mi></msub><mo>)</mo><mo>+</mo><mi>a</mi><mo>∗</mo><mi>R</mi><mi>T</mi><mi>T</mi></mrow><annotation encoding="application/x-tex">RTT_s=(1-a)\\ast(RTT_s)+a\\ast RTT</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="mord"><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">s</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mord rule" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mord rule" style="margin-right:0.2222222222222222em;"></span><span class="mord mathit">a</span><span class="mclose">)</span><span class="mord rule" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mord rule" style="margin-right:0.2222222222222222em;"></span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="mord"><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">s</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span><span class="mclose">)</span><span class="mord rule" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mord rule" style="margin-right:0.2222222222222222em;"></span><span class="mord mathit">a</span><span class="mord rule" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mord rule" style="margin-right:0.2222222222222222em;"></span><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span></span></li>\n<li>超过时间 RTO 应该略大于 RTTs，TCP 使用的超过时间计算如下： <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mi>T</mi><mi>O</mi><mo>=</mo><mi>R</mi><mi>T</mi><msub><mi>T</mi><mi>s</mi></msub><mo>+</mo><mn>4</mn><mo>∗</mo><mi>R</mi><mi>T</mi><msub><mi>T</mi><mi>d</mi></msub><mo>∣</mo></mrow><annotation encoding="application/x-tex">RTO=RTT_s+4\\ast RTT_d \\mid</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="mord"><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">s</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span><span class="mord rule" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mord rule" style="margin-right:0.2222222222222222em;"></span><span class="mord">4</span><span class="mord rule" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mord rule" style="margin-right:0.2222222222222222em;"></span><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="mord"><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∣</span></span></span></span> {其中 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mi>T</mi><msub><mi>T</mi><mi>d</mi></msub></mrow><annotation encoding="application/x-tex">RTT_d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="mord"><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span></span></span></span> 为偏差}</li>\n</ul>\n<h3 id="tcp-流量控制"><a href="#tcp-%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TCP 流量控制</h3>\n<ul>\n<li>流量控制是为了控制发送方发送速率，保证接收方来的及接收。</li>\n<li>接收方发送的确认报文中的窗口字段可以用来控制发送方窗口大小，从而影响发送方的发送速率。将窗口字段设置为 0，则发送方不能发送速率。</li>\n</ul>\n<h3 id="tcp-拥塞控制"><a href="#tcp-%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TCP 拥塞控制</h3>\n<blockquote>\n<p>如果网络出现拥塞，分组将会丢失，此时发送方会继续重传，从而导致网络拥塞程度更高。因此当出现拥塞时，应当控制发送方的速率。这一点和流量控制很像，但是出发点不同。流量控制是为了接收方来得及接收，而拥塞控制是为了降低整个网络的拥塞程度。</p>\n</blockquote>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/51e2ed95-65b8-4ae9-8af3-65602d452a25-27955e7ca6e3022cebad4c7f07e6fd4d-0c6d6.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 56.464646464646464%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAMBAgX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHbqxI8kP/EABkQAAIDAQAAAAAAAAAAAAAAAAARAQIxQf/aAAgBAQABBQJnWWysyz//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAXEAADAQAAAAAAAAAAAAAAAAAAICEx/9oACAEBAAY/Aoav/8QAHBAAAQUAAwAAAAAAAAAAAAAAAQAQESExQYGR/9oACAEBAAE/IdRrkqDa3aARrHqt/9oADAMBAAIAAwAAABDDz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EAB0QAQACAgIDAAAAAAAAAAAAAAEAESExEFFBYeH/2gAIAQEAAT8Q3BdsjQfYb4ur0HcTgH3CeA5NkQBSnKg4/9k=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="51e2ed95 65b8 4ae9 8af3 65602d452a25" title="" data-src="/static/51e2ed95-65b8-4ae9-8af3-65602d452a25-27955e7ca6e3022cebad4c7f07e6fd4d-dfbfc.jpg" data-srcset="/static/51e2ed95-65b8-4ae9-8af3-65602d452a25-27955e7ca6e3022cebad4c7f07e6fd4d-75a98.jpg 200w,\n/static/51e2ed95-65b8-4ae9-8af3-65602d452a25-27955e7ca6e3022cebad4c7f07e6fd4d-1f451.jpg 400w,\n/static/51e2ed95-65b8-4ae9-8af3-65602d452a25-27955e7ca6e3022cebad4c7f07e6fd4d-dfbfc.jpg 800w,\n/static/51e2ed95-65b8-4ae9-8af3-65602d452a25-27955e7ca6e3022cebad4c7f07e6fd4d-0c6d6.jpg 990w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<blockquote>\n<p>TCP 主要通过四种算法来进行拥塞控制：慢开始、拥塞避免、快重传、快恢复。发送方需要维护有一个叫做拥塞（cwnd）的状态变量。注意拥塞窗口与发送方窗口的区别，拥塞窗口只是一个状态变量，实际决定发送方能发送多少数据的是发送方窗口。为了便于讨论，做如下假设：</p>\n</blockquote>\n<ol>\n<li>接收方有足够大的接受缓存，因此不会发生流量控制；</li>\n<li>虽然 TCP 的窗口基于字节，但是这里设窗口的大小单位为报文段。</li>\n</ol>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/910f613f-514f-4534-87dd-9b4699d59d31-696df0d4d372515e36f963e1adc24552-587e4.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 39.3939393939394%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAABF0lEQVQY01WQyY6CYBCEef/n4QXAAyGGEwcRomxBdmQnbOLnMJKZPtXff1d1VQvbti3Lcr1eb7dbGIbg7VvP51NV1b7vweu6vl6v7X8JB3Jdt23baZqKooBzuVxs2348HtD2gXme+f2r/iE7jnO/333fB+u6rmma53nTt1hYlqVpmqfTKY7jpmno0EdLALEBMkvGcUzTtOu6XRjQ/pQoipBxRDSkmYmiKAiCz+Y9DAnZQGx8QsuyDAygCW03eD6f67o+wgvDMCiKQkhuZlkWf/hhWpZlSZJYmCQJEjQ5Cop7eMaw+bGd5znyDLEKwARknnijw5OB5FsYRIuYgN9r707Q42xVVZGfy7EKMhcBYwFgGAa3PK79BjJ/vfxcrNNBAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="910f613f 514f 4534 87dd 9b4699d59d31" title="" data-src="/static/910f613f-514f-4534-87dd-9b4699d59d31-696df0d4d372515e36f963e1adc24552-fee1c.png" data-srcset="/static/910f613f-514f-4534-87dd-9b4699d59d31-696df0d4d372515e36f963e1adc24552-a67b7.png 200w,\n/static/910f613f-514f-4534-87dd-9b4699d59d31-696df0d4d372515e36f963e1adc24552-0b187.png 400w,\n/static/910f613f-514f-4534-87dd-9b4699d59d31-696df0d4d372515e36f963e1adc24552-fee1c.png 800w,\n/static/910f613f-514f-4534-87dd-9b4699d59d31-696df0d4d372515e36f963e1adc24552-b1a91.png 1200w,\n/static/910f613f-514f-4534-87dd-9b4699d59d31-696df0d4d372515e36f963e1adc24552-95179.png 1600w,\n/static/910f613f-514f-4534-87dd-9b4699d59d31-696df0d4d372515e36f963e1adc24552-587e4.png 1914w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<ol>\n<li>\n<p>慢开始与拥塞避免</p>\n</li>\n<li>\n<p>发送的最初执行慢开始，令 cwnd=1，发送方只能发送 1 个报文段；当收到确认后，将 cwnd 加倍，因此发送方能够发送的报文段数量为：2、4、8…</p>\n</li>\n<li>\n<p>注意到慢开始每个轮次都会将 cwnd 加倍，这样会让 cwnd 增长速度非常快，从而使得发送方发送的增长速度过快，网络拥塞的可能也就更高。设置一个慢开始门限 ssthresh，当 cwnd>=ssthresh 时，进入拥塞避免，每个轮次只将 cwnd 加 1。</p>\n</li>\n<li>\n<p>如果出现了超时，则令 ssthresh=cwnd/2，然后重新执行慢开始。</p>\n</li>\n<li>\n<p>快重传与快恢复</p>\n</li>\n<li>\n<p>在接受方，要求每次接收到报文段都应该发送对已接收到有序报文段的确认，例如已经接收到<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>M</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">M_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span></span></span></span>和<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>M</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">M_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span></span></span></span>，此时收到<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>M</mi><mn>4</mn></msub></mrow><annotation encoding="application/x-tex">M_4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span></span></span></span>，应当发送对<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>M</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">M_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span></span></span></span>的确认。</p>\n</li>\n<li>\n<p>在发送方，如果收到三个重复确认，那么可以确认下一个报文段丢失，例如收到三个<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>M</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">M_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span></span></span></span>，则<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>M</mi><mn>3</mn></msub></mrow><annotation encoding="application/x-tex">M_3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span></span></span></span>丢失。此时执行快重传，立即重传下一个报文段。</p>\n</li>\n<li>\n<p>在这种情况下，只是丢失个别报文段，而不是网络堵塞，因此执行快恢复，令 ssthresh=cwnd/2，cwnd=ssthresh，注意到此时直接进入拥塞避免。</p>\n</li>\n</ol>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/f61b5419-c94a-4df1-8d4d-aed9ae8cc6d5-cc025ab4fcccf7be4c9d4d073b4aec8a-bcbcc.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 55.195911413969334%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABPklEQVQoz4WSW2+CQBCF+f8/yoRHEsNFJUTkKtdElFIIVUDbj93GtNik52GzO7tnzpmZVT5f8Hg8xnFMkiSKop9xgmEY1nX9jCiv5GEY9vt9HMdFUXRd9y5QC6Rperlcpmn6n+z7Pvw8z2OB4/FIRNf1IAgk/2+y67p43u12EFDj9Xa75ciecrBwv9+/yXJHqZJ8u908z0sFzgKn08m2bTQxwrFpmr7vEVfgUFhZlvIRWVkRgY9+LoBnBMlFcLPZWJbF/nq9zspcm6bpOI6qqjI9L2CiBoejdEEJh8PBEmA/k/GMGlHUYDKMLMtIRG9Y0Vyv16vVyjAMuiD1SQeFyc1kbDMA3FZV9SZAz7jGUdu25KL5NIy2ycivOT9bJUE6IvQDY4tBfAg8Kcrib7GijGGM0B48U5GmafK3LWS+ALhCZGdMh36wAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="f61b5419 c94a 4df1 8d4d aed9ae8cc6d5" title="" data-src="/static/f61b5419-c94a-4df1-8d4d-aed9ae8cc6d5-cc025ab4fcccf7be4c9d4d073b4aec8a-fee1c.png" data-srcset="/static/f61b5419-c94a-4df1-8d4d-aed9ae8cc6d5-cc025ab4fcccf7be4c9d4d073b4aec8a-a67b7.png 200w,\n/static/f61b5419-c94a-4df1-8d4d-aed9ae8cc6d5-cc025ab4fcccf7be4c9d4d073b4aec8a-0b187.png 400w,\n/static/f61b5419-c94a-4df1-8d4d-aed9ae8cc6d5-cc025ab4fcccf7be4c9d4d073b4aec8a-fee1c.png 800w,\n/static/f61b5419-c94a-4df1-8d4d-aed9ae8cc6d5-cc025ab4fcccf7be4c9d4d073b4aec8a-bcbcc.png 1174w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h2 id="应用层"><a href="#%E5%BA%94%E7%94%A8%E5%B1%82" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>应用层*</h2>\n<h3 id="域名系统-dns"><a href="#%E5%9F%9F%E5%90%8D%E7%B3%BB%E7%BB%9F-dns" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>域名系统 DNS</h3>\n<blockquote>\n<ul>\n<li>把主机名解析为 IP 地址。</li>\n</ul>\n</blockquote>\n<ul>\n<li>\n<p>被设计成分布式系统。</p>\n</li>\n<li>\n<p>层次结构</p>\n<blockquote>\n<p>一个域名有多个层次构成，从上层从下层分别为顶级域名、二级域名、三级域名以及四级域名。所有域名都可以画成域名树。</p>\n</blockquote>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/c2117f61-1177-4768-bf33-cf4f950d911c-3b4801307aca36ed0ab80b77c0683510-3a052.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 351px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 28.205128205128204%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsSAAALEgHS3X78AAAAzklEQVQY021PSQqEMBD0/88RL+JCvOhJEBE0irgdxA1cDoqaOIUOMjLWoalUuqurheMP+wnG2LZtqJxzPI83CDdDE+o8z6ZpSpLkeZ5lWa7r2ratado4jnfPYxgSNsAeZF3XOI6bpgHJsgxe0zQFQQCCTvaDx+ZrbV3Xy7LwE1VVXTryl2XZdd1L7GEYHMfRdV0URcMw+r6HcZIkiqLIskwISdMUbfi9FFVVcdR3GAvzPPd9PwxDSinOwwlt24JDQWbEgQI78CiKIBZFgcEPK2dOPxBUNiYAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="c2117f61 1177 4768 bf33 cf4f950d911c" title="" data-src="/static/c2117f61-1177-4768-bf33-cf4f950d911c-3b4801307aca36ed0ab80b77c0683510-3a052.png" data-srcset="/static/c2117f61-1177-4768-bf33-cf4f950d911c-3b4801307aca36ed0ab80b77c0683510-0559a.png 200w,\n/static/c2117f61-1177-4768-bf33-cf4f950d911c-3b4801307aca36ed0ab80b77c0683510-3a052.png 351w" data-sizes="(max-width: 351px) 100vw, 351px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/a4b162e5-db2a-4a27-b213-1fe481c5a06a-726951f28ed7d72d2dd5857fdcac591f-83c29.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 722px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 36.42659279778393%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsSAAALEgHS3X78AAAAyElEQVQY03WQiQqEMAxE/f9f8xvcKnhSW896W/exXbaCbEBJ0pnJJMH1J87z3LYtDMOiKKy1lE9MwKe1juMYxDiOUkqlVJZlaZomSfL6RBRFlKj0fd80zbqunjxNEwSSYRhIQOR5Drqua6CUqJNARhQAYzx5nmeg+76TV1Xl0EwTQjjcsiz0MUW/LMvjODzZGEMLctu2OGc+29pbuCcMotJ13W//72RU2QRvkPnTuR8GLYxgGD4qlJ4Mk6s428+AgC/koHGF+9Mb/0OR4DgmuuMAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="a4b162e5 db2a 4a27 b213 1fe481c5a06a" title="" data-src="/static/a4b162e5-db2a-4a27-b213-1fe481c5a06a-726951f28ed7d72d2dd5857fdcac591f-83c29.png" data-srcset="/static/a4b162e5-db2a-4a27-b213-1fe481c5a06a-726951f28ed7d72d2dd5857fdcac591f-5b578.png 200w,\n/static/a4b162e5-db2a-4a27-b213-1fe481c5a06a-726951f28ed7d72d2dd5857fdcac591f-4dff0.png 400w,\n/static/a4b162e5-db2a-4a27-b213-1fe481c5a06a-726951f28ed7d72d2dd5857fdcac591f-83c29.png 722w" data-sizes="(max-width: 722px) 100vw, 722px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n<li>\n<p>域名服务器可以分成以下四类：</p>\n<ol>\n<li>根域名服务器：解析顶级域名；</li>\n<li>顶级域名服务器：解析二级域名；</li>\n<li>权限域名服务器：解析区内域名；</li>\n<li>本地域名服务器：也称为默认域名服务器。可以在其中配置高速缓存。</li>\n</ol>\n</li>\n<li>\n<p>区和域的概念不同，可以在一个域中划分多个区。图 b 在域 abc.com 中划分了两个区：abc.com 和 y.abc.com <html><head></head><body><a class="gatsby-resp-image-link" href="/static/fc0c6b2d-68c7-4de8-aaaa-97355a4f0472-2923907ddde9dae34a6f20bd88b73a89-00f6d.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 714px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 46.07843137254902%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAEDBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAe01EUf/xAAZEAEAAgMAAAAAAAAAAAAAAAABAAIQETH/2gAIAQEAAQUCs6VhzP8A/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFBABAAAAAAAAAAAAAAAAAAAAIP/aAAgBAQAGPwJf/8QAGRAAAwADAAAAAAAAAAAAAAAAARARADFR/9oACAEBAAE/IerkpssK/9oADAMBAAIAAwAAABBTz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EAB0QAQACAgIDAAAAAAAAAAAAAAEAESExQYEQUXH/2gAIAQEAAT8QpBEDeOMS9WlBOO47Da373HZ9mnfj/9k=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="fc0c6b2d 68c7 4de8 aaaa 97355a4f0472" title="" data-src="/static/fc0c6b2d-68c7-4de8-aaaa-97355a4f0472-2923907ddde9dae34a6f20bd88b73a89-00f6d.jpg" data-srcset="/static/fc0c6b2d-68c7-4de8-aaaa-97355a4f0472-2923907ddde9dae34a6f20bd88b73a89-5b29b.jpg 200w,\n/static/fc0c6b2d-68c7-4de8-aaaa-97355a4f0472-2923907ddde9dae34a6f20bd88b73a89-61e89.jpg 400w,\n/static/fc0c6b2d-68c7-4de8-aaaa-97355a4f0472-2923907ddde9dae34a6f20bd88b73a89-00f6d.jpg 714w" data-sizes="(max-width: 714px) 100vw, 714px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n<li>\n<p>因此就需要两个权限域名服务器： <html><head></head><body><a class="gatsby-resp-image-link" href="/static/8b335d94-c1ca-42e1-ad48-bb179d28a4f1-f668e20574668a83ade66dfee1c1bc85-fb61b.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 618px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 39.482200647249186%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAIABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAIDBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAd2AWA//xAAVEAEBAAAAAAAAAAAAAAAAAAAAQf/aAAgBAQABBQJX/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFhAAAwAAAAAAAAAAAAAAAAAAAAEQ/9oACAEBAAY/Ahz/xAAYEAEBAQEBAAAAAAAAAAAAAAABEQAhMf/aAAgBAQABPyGNYpi8luPO7//aAAwDAQACAAMAAAAQA8//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAaEAADAQADAAAAAAAAAAAAAAABESEAQVFh/9oACAEBAAE/ECWgcoHCcUnedKfu/9k=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="8b335d94 c1ca 42e1 ad48 bb179d28a4f1" title="" data-src="/static/8b335d94-c1ca-42e1-ad48-bb179d28a4f1-f668e20574668a83ade66dfee1c1bc85-fb61b.jpg" data-srcset="/static/8b335d94-c1ca-42e1-ad48-bb179d28a4f1-f668e20574668a83ade66dfee1c1bc85-5e6b4.jpg 200w,\n/static/8b335d94-c1ca-42e1-ad48-bb179d28a4f1-f668e20574668a83ade66dfee1c1bc85-004ff.jpg 400w,\n/static/8b335d94-c1ca-42e1-ad48-bb179d28a4f1-f668e20574668a83ade66dfee1c1bc85-fb61b.jpg 618w" data-sizes="(max-width: 618px) 100vw, 618px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n<li>\n<p>解析过程</p>\n</li>\n<li>\n<p>主机向本地域名服务器解析的过程采用递归，而本地域名服务器向其他域名服务器解析可以使用递归和迭代两种方式。</p>\n</li>\n<li>\n<p>迭代的方式下，本地域名服务器向一个域名服务器解析请求解析之后，结果返回到本地域名服务器，然后本地域名服务器继续向其他域名服务器请求解析；而递归方式下，结果不是直接返回的，然后继续向前请求解析，最后的结果才会返回。 <html><head></head><body><a class="gatsby-resp-image-link" href="/static/e6723b94-1a33-4605-b775-f6813352d383-610f825f09f5be5d4bb6e31b688705f6-e2849.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 72.50936329588015%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsSAAALEgHS3X78AAACGUlEQVQoz2WSSWsqURCF+wf6D9xnIy4ENy4l4FZc6FIXQQJBCAQFRVTEOQ5xTnzqwilGXxzjGI15X/fNaxpSi6b63jr3nDpV0m6322w26/X6fD5/fn4ul8vVajWfz/n9VuJwOHx8fHDI7eVyWSwW/M5ms/1+L729vTWbzVarNRqNJpNJJpOJx+PdblcF81C9XhcF7+/vpVIpFos1Gg1YJa5tNpvf7x+Px2ACgYDZbD6dTpzD8/X1RXJ3d+d0Op+fn8vl8uPjo8lkgoZzGXx9fe12uwUP4KurKxRqwff390ajMZ/Pt9vtYDBIQafTkcFU1Gq1RCKBDCRls1kuVM0iBoNBKBTiRWp6vZ7P50OjDN5utzc3N7e3t4VCAbeoQN7xeBTMBAnVuVxOPDSdTr1eL6gf2cgwGAz0Q9vhcFin02GpVrbD4bBYLCR4gWd6vR6BP7LtdrvH4/mjBCowDGO1zA8PDy6Xa6EEBFarVQiRmEQymWQ8DINS+NH/9PQkwHzpkxPGUywWEYIjIPGc7ZBlD4fDaDTKGtAPM+A51SpBzgpFIhGxPH+VEI5K+JxOpxGMjUyChLe0VuMfSL6cQ9tSgvWSwShJpVLAVJ3aECfsU6VS+V0gYSDjpQecmP8PMQk1Xl5e8AVprDRuYxstyGC2nPXu9/s9JfCZnCKVh/ZeX1/ZE1GAeHKYuJW+fwX9QAV/tVolQZT2LW38Awb6GsKK9MfAAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="e6723b94 1a33 4605 b775 f6813352d383" title="" data-src="/static/e6723b94-1a33-4605-b775-f6813352d383-610f825f09f5be5d4bb6e31b688705f6-fee1c.png" data-srcset="/static/e6723b94-1a33-4605-b775-f6813352d383-610f825f09f5be5d4bb6e31b688705f6-a67b7.png 200w,\n/static/e6723b94-1a33-4605-b775-f6813352d383-610f825f09f5be5d4bb6e31b688705f6-0b187.png 400w,\n/static/e6723b94-1a33-4605-b775-f6813352d383-610f825f09f5be5d4bb6e31b688705f6-fee1c.png 800w,\n/static/e6723b94-1a33-4605-b775-f6813352d383-610f825f09f5be5d4bb6e31b688705f6-b1a91.png 1200w,\n/static/e6723b94-1a33-4605-b775-f6813352d383-610f825f09f5be5d4bb6e31b688705f6-e2849.png 1335w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n</ul>\n<h3 id="文件传输协议-ftp"><a href="#%E6%96%87%E4%BB%B6%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE-ftp" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>文件传输协议 FTP</h3>\n<blockquote>\n<p>FTP 在运输层使用 TCP，并且需要建立两个并行的 TCP 连接：控制连接和数据连接。控制连接在整个会话期间一直保持打开，而数据连接在数据传送完毕之后就关闭。控制连接使用端口号为 21，数据连接使用端口号为 20。</p>\n</blockquote>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/30210b86-472d-4574-abb6-b74898cc17a4-65919b858b538da09cc89dca5ec8fe70-1109e.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 39.9401645474944%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAIABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAdawSD//xAAXEAADAQAAAAAAAAAAAAAAAAACERIB/9oACAEBAAEFApKtaG1//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGRAAAgMBAAAAAAAAAAAAAAAAACERMVGB/9oACAEBAAY/Au6Kxwf/xAAZEAADAQEBAAAAAAAAAAAAAAAAAREhcZH/2gAIAQEAAT8hakdzXou1wRWGfT//2gAMAwEAAgADAAAAEHPP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGxABAAICAwAAAAAAAAAAAAAAAREhAEExcYH/2gAIAQEAAT8Qkni0qaZedYy7w3zdxiACBapa3Wf/2Q==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="30210b86 472d 4574 abb6 b74898cc17a4" title="" data-src="/static/30210b86-472d-4574-abb6-b74898cc17a4-65919b858b538da09cc89dca5ec8fe70-dfbfc.jpg" data-srcset="/static/30210b86-472d-4574-abb6-b74898cc17a4-65919b858b538da09cc89dca5ec8fe70-75a98.jpg 200w,\n/static/30210b86-472d-4574-abb6-b74898cc17a4-65919b858b538da09cc89dca5ec8fe70-1f451.jpg 400w,\n/static/30210b86-472d-4574-abb6-b74898cc17a4-65919b858b538da09cc89dca5ec8fe70-dfbfc.jpg 800w,\n/static/30210b86-472d-4574-abb6-b74898cc17a4-65919b858b538da09cc89dca5ec8fe70-ca27a.jpg 1200w,\n/static/30210b86-472d-4574-abb6-b74898cc17a4-65919b858b538da09cc89dca5ec8fe70-1109e.jpg 1337w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h3 id="远程终端协议-telnet"><a href="#%E8%BF%9C%E7%A8%8B%E7%BB%88%E7%AB%AF%E5%8D%8F%E8%AE%AE-telnet" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>远程终端协议 TELNET</h3>\n<ul>\n<li>TELNET 用于登录到远程主机上，并且远程主机上的输出也会返回。</li>\n<li>TELNET 可以适应许多计算机和操作系统的差异，例如不同操作系统的换行符的定义。</li>\n</ul>\n<h3 id="万维网"><a href="#%E4%B8%87%E7%BB%B4%E7%BD%91" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>万维网</h3>\n<p><a href="/HTTP/">HTTP</a></p>\n<h3 id="电子邮件协议"><a href="#%E7%94%B5%E5%AD%90%E9%82%AE%E4%BB%B6%E5%8D%8F%E8%AE%AE" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>电子邮件协议</h3>\n<blockquote>\n<p>一个电子邮件系统由 3 部分组成：用户代理、邮件服务器以及邮件发送协议和读取协议。其中发送协议常用 SMTP，读取常用 POP3 和 IMAP。</p>\n</blockquote>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/7b3efa99-d306-4982-8cfb-e7153c33aab4-13745a91067897beba9c4344272d08cd-7a146.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 63.526119402985074%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAABzUlEQVQoz12SR67CQBBE555cgjuw4QBISEgsYMOGPQuQQCAEMtkgosk55xz8nxk+spiF3dNTNV1d00LX9dPpNBqNHo/H8/ns9/vL5ZLk6/XS/5eMwQwGg+v1ej6fgcESZEGrqloqlUgVCoVMJvPlyEXMvWBSqVSxWOz1emCazaZBXq1W2Ww2HA6TgpxIJIDqpiX5jUZDUZRQKJRMJrmo1WoZ5MvlstvtNE0bj8ek8vk8ktDW7XbZUgcAW0pxdblcBna/36fT6Ye83W7n8zlxrVZLp9Mc0AtMipAhns1muVyO7WazoW0ok8nkQ+Zsv98TcwbU7JZct9uNgnhGmcPhQKfghTwADYeuvujj8djpdJBKfYRQgC/q/H4/BQjo1CDz8/l8TqczEAjQcCwWGw6HwWAwGo0q70Wr7Xbb6/W63e5IJGKz2TweDxmDXKlULBYLfDx0uVwOhwMEjVAKbYvFAud4YXwGgxY6t1qtXC1kn3a7HZHE8XgcPlqIYUr/4bPFdqRRCeeRxlAJ+Yzr9RoPqEA13gmHcUXOhpyTer3OCEkwHsEkFmZLeQPQ+FmtVpENAhwZLmL+uPpnbIV5EmUMmUbQjE7tvXgFxOP/D/kPg72+PXT3m5EAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="7b3efa99 d306 4982 8cfb e7153c33aab4" title="" data-src="/static/7b3efa99-d306-4982-8cfb-e7153c33aab4-13745a91067897beba9c4344272d08cd-fee1c.png" data-srcset="/static/7b3efa99-d306-4982-8cfb-e7153c33aab4-13745a91067897beba9c4344272d08cd-a67b7.png 200w,\n/static/7b3efa99-d306-4982-8cfb-e7153c33aab4-13745a91067897beba9c4344272d08cd-0b187.png 400w,\n/static/7b3efa99-d306-4982-8cfb-e7153c33aab4-13745a91067897beba9c4344272d08cd-fee1c.png 800w,\n/static/7b3efa99-d306-4982-8cfb-e7153c33aab4-13745a91067897beba9c4344272d08cd-7a146.png 1072w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<ol>\n<li>POP3 POP3 的特点是只要从服务器上读取了邮件，就把该邮件删除。</li>\n<li>IMAP IMAP 协议中客户端和服务器上的邮件保持同步，如果不去手动删除邮件，那么服务器上的邮件也不会被删除。IMAP 这种做法可以让用户随时随地去访问服务器上的邮件。IMAP 协议也支持创建自定义的文件夹。</li>\n<li>SMTP SMTP 只能发送 ASCII 码，而互联网邮件扩充 MIME 可以发送二进制文件。MIME 并没有改动或者取代 SMTP，而是增加邮件主题的结构，定义了非 ASCIII 码的编码规则。</li>\n</ol>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/ed5522bb-3a60-481c-8654-43e7195a48fe-21ecedde810022587ffe6ddd23a6d083-6566f.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 462px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 43.290043290043286%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsSAAALEgHS3X78AAABKklEQVQoz3WRy46CQBBF+f8vccMXuJAEAwsTlEeEgEJERQQJPoCgMM4cdEKMztSiky763nOrEBzHmUwmtm03TfP9f93vd871em0Yhu/7ZVlyFVzXHY/Hy+US8dej/lQ+xWEYSpK0WCyqqurEbdumaUoXOK5JkvScvi6Xi+d5PLAsC0z/QOAOeTqdHo9H4Hh9kolzu92KooCpqioup9OpEw+Hw8FgMBqN6rr+ZL4WvrPZTBRFJM+AwvV63W63u91us9kEQcD5pgcbxzF99gSZAfu9dGJsyMy53++f4dkH+zyfz8TDiyv99FFRFCH+nZlNaJrG5PBJzjtSmKZJk/HIiYxp6WdZtlqtdF2fz+d5nndifjILUxQFDn5g32K3j4KGnr3Ksozp4XDg0w+LNfU09LWPKgAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="ed5522bb 3a60 481c 8654 43e7195a48fe" title="" data-src="/static/ed5522bb-3a60-481c-8654-43e7195a48fe-21ecedde810022587ffe6ddd23a6d083-6566f.png" data-srcset="/static/ed5522bb-3a60-481c-8654-43e7195a48fe-21ecedde810022587ffe6ddd23a6d083-c4b43.png 200w,\n/static/ed5522bb-3a60-481c-8654-43e7195a48fe-21ecedde810022587ffe6ddd23a6d083-5dba5.png 400w,\n/static/ed5522bb-3a60-481c-8654-43e7195a48fe-21ecedde810022587ffe6ddd23a6d083-6566f.png 462w" data-sizes="(max-width: 462px) 100vw, 462px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h3 id="动态主机配置协议-dhcp"><a href="#%E5%8A%A8%E6%80%81%E4%B8%BB%E6%9C%BA%E9%85%8D%E7%BD%AE%E5%8D%8F%E8%AE%AE-dhcp" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>动态主机配置协议 DHCP</h3>\n<ul>\n<li>DHCP 提供了即插即用的联网方式，用户不再需要去手动配置 IP 地址等信息。</li>\n<li>DHCP 配置的内容不仅是 IP 地址，还包括子网掩码、默认路由器 IP 地址、域名服务器的 IP 地址。</li>\n<li>工作方式如下：需要 IP 地址的主机广播发送 DHCP 发现报文（将目的主机置为全 1，即 255.255.255.255:67，源地址设置为全 0，即 0.0.0.0:68，DHCP 服务器收到发现报文之后，则在 IP 地址池中取一个地址，发送 DHCP 提供报文给该主机。</li>\n</ul>\n<h3 id="点对点传输-p2p"><a href="#%E7%82%B9%E5%AF%B9%E7%82%B9%E4%BC%A0%E8%BE%93-p2p" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>点对点传输 P2P</h3>\n<ul>\n<li>把某个文件分发的所有对等集合称为一个洪流。文件的数据单元称为文件块，它的大小是固定的。一个新的对等方加入某个洪流，一开始并没有文件块，但是能够从其它对等方中逐渐地下载到一些文件块，与此同时，它也为别的对等方上传一些文件块。</li>\n<li>每个洪流都有一个基础设施，称为追踪器。当一个对等方加入洪流时，必须向追踪器登记，并周期性的通知追踪器它仍在洪流中。可以在任何时间加入和退出某个洪流。</li>\n<li>一个新的对等方加入洪流时，追踪器会随机从洪流中选择若干个对等方，并让新对等方与这些对等方建立连接，把这些对等方称为相邻对等方。接收和发送文件块都是在相邻对等方中进行的。</li>\n<li>当一个对等方需要很多文件块时，通常使用最稀有优先策略来取得文件块，也就是一个文件块在相邻对等方中副本最少，那么就优先请求这个文件块。</li>\n<li>当很多对等方向同一个对等方请求文件块时，该对等方优先选择最高速率向其发送文件块的对等方。</li>\n<li>P2P 是一个分布式系统，任何时候都有对等方加入或者退出。使用分布式散列表 DHT，可以查找洪流中的资源和 IP 地址映射。</li>\n</ul>\n<h3 id="web-页面请求过程"><a href="#web-%E9%A1%B5%E9%9D%A2%E8%AF%B7%E6%B1%82%E8%BF%87%E7%A8%8B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Web 页面请求过程</h3>\n<ol>\n<li>DHCP 配置主机信息</li>\n<li>假设主机最开始没有 IP 地址以及其他信息，那么就需要先使用 DHCP 来获取。</li>\n<li>主机生成一个 DHCP 请求报文，并将这个报文放入具有目的端口 67 和源端口 68 的 UDP 报文中。</li>\n<li>该报文段则被放入一个具有广播 IP 目的地址（255.255.255.255）和源 IP 地址（0.0.0.0）的 IP 数据报中。</li>\n<li>该数据报则被放置在 MAC 帧中，该帧具有目的地址 FF:FF:FF:FF:FF:FF，将广播到与交换机相连的所有设备。</li>\n<li>连接在交换机的 DHCP 服务器收到广播帧之后，不断向上分解得到 IP 数据报、UDP 报文段、DHCP 请求报文，之后生成 DHCP ACK 报文，该报文包含以下信息：IP 地址、DNS 服务器的地址、默认网关路由器的 IP 地址和子网掩码。该报文被放入 UDP 报文段中，UDP 报文段被放入 IP 数据报中，最后放入 MAC 帧中。</li>\n<li>该帧的目的地址是请求主机的 MAC 地址，因为交换机具有自学习能力，之前主机发送了广播帧之后就记录了 MAC 地址到其转发的交换表项，因此现在交换机就可以直接知道应该向哪个接口发送该帧。</li>\n<li>主机收到该帧后，不断分解得到 DHCP 报文。之后就配置它的 IP 地址、子网掩码和 DNS 服务器的 IP 地址，并在其 IP 转发表中安装默认网关。</li>\n<li>ARP 解析 MAC 地址</li>\n<li>主机通过浏览器生成一个 TCP 套接字，套接字向 HTTP 服务器发送 HTPP 请求。为了生成该套接字，主机需要知道网站的域名对应的 IP 地址。</li>\n<li>主机生成一个 DNS 查询报文，该报文具有 53 端口，因为 DNS 服务器的端口号为 53。</li>\n<li>该 DNS 查询报文被放入目的地址为 DNS 服务器 IP 地址的 IP 数据报中。</li>\n<li>该 IP 数据报被放入一个以太网帧中，该帧将发送到网关路由器。</li>\n<li>DHCP 过程只知道网关路由器的 IP 地址，为了获取网关路由器的 MAC 地址，需要使用 ARP 协议。</li>\n<li>主机生成一个包含目的地址为网关路由器 IP 地址的 ARP 查询报文，并将该 ARP 查询报文放入一个具有广播目的地址（FF:FF:FF:FF:FF:FF）的以太网帧中，并向交换机发送该以太网帧，交换机将该帧转发给所有的连接设备，包括网关路由器。</li>\n<li>网关路由器接收到该帧后，不断向上分解得到 ARP 报文，发现其中的 IP 地址与其接口的 IP 地址匹配，因此就发送一个 ARP 回答报文，包含了它的 MAC 地址，发回给主机。</li>\n<li>DNS 解析域名</li>\n<li>知道了网关路由器的 MAC 地址之后，就可以继续 DNS 解析过程了。</li>\n<li>网关路由器接收到包含 DNS 查询报文的以太网帧后，抽出 IP 数据报，并根据转发表决定 IP 数据报应该转发的路由器。</li>\n<li>因为路由器具有内部网关协议（RIP、OSPF）和外部网关协议（BGP）这两种路由选择协议，因此路由表中已经配置网关路由器到达 DNS 服务器的路由表项。</li>\n<li>到达 DNS 服务器之后，DNS 服务器抽取出 DNS 查询报文，并在 DNS 数据库中查找待解析的域名。</li>\n<li>找到 DNS 记录之后，发送 DNS 回答报文，将该回答报文放入 UDP 报文段中，然后放入 IP 数据报中，通过路由器反向转发回网关路由器，并经过以太网交换机到达主机。</li>\n<li>HTTP 请求页面</li>\n<li>有了 HTTP 服务器的 IP 地址之后，主机就能够生成 TCP 套接字，该套接字将用于向 Web 服务器发送 HTTP GET 报文。</li>\n<li>在生成 TCP 套接字之前，必须先与 HTTP 服务器进行三次握手来建立连接。生成一个具有目的端口 80 的 TCP SYN 报文段，并向 HTTP 服务器发送该报文段。</li>\n<li>HTTP 服务器收到该报文段之后，生成 TCP SYNACK 报文段，发回给主机。</li>\n<li>连接建立之后，浏览器生成 HTTP GET 报文，并交付给 HTPP 服务器。</li>\n<li>HTTP 服务器从 TCP 套接字读取 HTTP GET 报文，生成一个 HTTP 响应报文，将 Web 页面内容放入报文主体中，发回给主机。</li>\n<li>浏览器收到 HTTP 响应报文后，抽取出 Web 页面内容，之后会进行渲染，显示 Web 页面。</li>\n</ol>\n<h3 id="常用端口"><a href="#%E5%B8%B8%E7%94%A8%E7%AB%AF%E5%8F%A3" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>常用端口</h3>\n<table>\n<thead>\n<tr>\n<th>应用层协议</th>\n<th>端口号</th>\n<th>运输层协议</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>DNS</td>\n<td>53</td>\n<td>UDP</td>\n</tr>\n<tr>\n<td>FTP</td>\n<td>控制连接 21，数据连接 20</td>\n<td>TCP</td>\n</tr>\n<tr>\n<td>TELNET</td>\n<td>23</td>\n<td>TCP</td>\n</tr>\n<tr>\n<td>DHCP</td>\n<td>67 68</td>\n<td>UDP</td>\n</tr>\n<tr>\n<td>HTTP</td>\n<td>80</td>\n<td>TCP</td>\n</tr>\n<tr>\n<td>SMTP</td>\n<td>25</td>\n<td>TCP</td>\n</tr>\n<tr>\n<td>POP3</td>\n<td>110</td>\n<td>TCP</td>\n</tr>\n<tr>\n<td>IMAP</td>\n<td>143</td>\n<td>TCP</td>\n</tr>\n</tbody>\n</table>',
excerpt:"概述 网络的网络 网络把主机连接起来，而互联网是把多种不同的网络连接起来，因此互联网是网络的网络。 ISP 互联网服务提供商 ISP 可以从互联网管理机构获得许多 IP 地址，同时拥有通信线路以及路由器等连网设备，个人或机构向 ISP…",frontmatter:{date:"2018-03-23 21:43:25",path:"/computer-network-notes/",tags:"面试, 计算机网络, 读书笔记",title:"计算机网络读书笔记",draft:null}}},pathContext:{mainPostPath:"/find-java/",nextPostPath:"/sort-java/",prePostPath:"/computer-network-notes/"}}}});