webpackJsonp([0xdfa08b1f8fe3],{1665:function(a,n){a.exports={data:{site:{siteMetadata:{title:"女王控的博客",description:'前端工程师，黑猫女王控，欢迎勾搭，技术相关<a href="https://github.com/towavephone" target="_blank">@towavephone</a>，QQ闲聊<a href="tencent://AddContact/?fromId=45&fromSubId=1&subcmd=all&uin=634407147&website=www.oicqzone.com">@towave</a>，bili关注<a href="https://space.bilibili.com/11507708#/" target="_blank">@towave</a>',siteUrl:"https://blog.towavephone.com"}}},pathContext:{posts:[{excerpt:"一、设计原则 S.O.L.I.D 简写 全拼 中文翻译 SRP The Single Responsibility Principle 单一责任原则 OCP The Open Closed Principle 开放封闭原则 LSP The Liskov Substitution Principle 里氏替换原则 ISP The Interface Segregation Principle 接口分离原则 DIP The Dependency Inversion Principle…",html:'<h1 id="一、设计原则"><a href="#%E4%B8%80%E3%80%81%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>一、设计原则</h1>\n<h2 id="solid"><a href="#solid" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>S.O.L.I.D</h2>\n<table>\n<thead>\n<tr>\n<th align="center">简写</th>\n<th align="center">全拼</th>\n<th align="center">中文翻译</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align="center">SRP</td>\n<td align="center">The Single Responsibility Principle</td>\n<td align="center">单一责任原则</td>\n</tr>\n<tr>\n<td align="center">OCP</td>\n<td align="center">The Open Closed Principle</td>\n<td align="center">开放封闭原则</td>\n</tr>\n<tr>\n<td align="center">LSP</td>\n<td align="center">The Liskov Substitution Principle</td>\n<td align="center">里氏替换原则</td>\n</tr>\n<tr>\n<td align="center">ISP</td>\n<td align="center">The Interface Segregation Principle</td>\n<td align="center">接口分离原则</td>\n</tr>\n<tr>\n<td align="center">DIP</td>\n<td align="center">The Dependency Inversion Principle</td>\n<td align="center">依赖倒置原则</td>\n</tr>\n</tbody>\n</table>\n<h3 id="1-单一责任原则"><a href="#1-%E5%8D%95%E4%B8%80%E8%B4%A3%E4%BB%BB%E5%8E%9F%E5%88%99" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1. 单一责任原则</h3>\n<blockquote>\n<p>修改一个类的原因应该只有一个。</p>\n</blockquote>\n<p>换句话说就是让一个类只负责一件事，当这个类需要做过多事情的时候，就需要分解这个类。</p>\n<p>如果一个类承担的职责过多，就等于把这些职责耦合在了一起，一个职责的变化可能会削弱这个类完成其它职责的能力。</p>\n<h3 id="2-开放封闭原则"><a href="#2-%E5%BC%80%E6%94%BE%E5%B0%81%E9%97%AD%E5%8E%9F%E5%88%99" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2. 开放封闭原则</h3>\n<blockquote>\n<p>类应该对扩展开放，对修改关闭。</p>\n</blockquote>\n<p>扩展就是添加新功能的意思，因此该原则要求在添加新功能时不需要修改代码。</p>\n<p>符合开闭原则最典型的设计模式是装饰者模式，它可以动态地将责任附加到对象上，而不用去修改类的代码。</p>\n<h3 id="3-里氏替换原则"><a href="#3-%E9%87%8C%E6%B0%8F%E6%9B%BF%E6%8D%A2%E5%8E%9F%E5%88%99" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3. 里氏替换原则</h3>\n<blockquote>\n<p>子类对象必须能够替换掉所有父类对象。</p>\n</blockquote>\n<p>继承是一种 IS-A 关系，子类需要能够当成父类来使用，并且需要比父类更特殊。</p>\n<p>如果不满足这个原则，那么各个子类的行为上就会有很大差异，增加继承体系的复杂度。</p>\n<h3 id="4-接口分离原则"><a href="#4-%E6%8E%A5%E5%8F%A3%E5%88%86%E7%A6%BB%E5%8E%9F%E5%88%99" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>4. 接口分离原则</h3>\n<blockquote>\n<p>不应该强迫客户依赖于它们不用的方法。</p>\n</blockquote>\n<p>因此使用多个专门的接口比使用单一的总接口要好。</p>\n<h3 id="5-依赖倒置原则"><a href="#5-%E4%BE%9D%E8%B5%96%E5%80%92%E7%BD%AE%E5%8E%9F%E5%88%99" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5. 依赖倒置原则</h3>\n<blockquote>\n<p>高层模块不应该依赖于低层模块，二者都应该依赖于抽象；</br>抽象不应该依赖于细节，细节应该依赖于抽象。</p>\n</blockquote>\n<p>高层模块包含一个应用程序中重要的策略选择和业务模块，如果高层模块依赖于低层模块，那么低层模块的改动就会直接影响到高层模块，从而迫使高层模块也需要改动。</p>\n<p>依赖于抽象意味着：</p>\n<ul>\n<li>任何变量都不应该持有一个指向具体类的指针或者引用；</li>\n<li>任何类都不应该从具体类派生；</li>\n<li>任何方法都不应该覆写它的任何基类中的已经实现的方法。</li>\n</ul>\n<h2 id="其他常见原则"><a href="#%E5%85%B6%E4%BB%96%E5%B8%B8%E8%A7%81%E5%8E%9F%E5%88%99" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>其他常见原则</h2>\n<p>除了上述的经典原则，在实际开发中还有下面这些常见的设计原则。</p>\n<table>\n<thead>\n<tr>\n<th align="center">简写</th>\n<th align="center">全拼</th>\n<th align="center">中文翻译</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align="center">LOD</td>\n<td align="center">The Law of Demeter</td>\n<td align="center">迪米特法则</td>\n</tr>\n<tr>\n<td align="center">CRP</td>\n<td align="center">The Composite Reuse Principle</td>\n<td align="center">合成复用原则</td>\n</tr>\n<tr>\n<td align="center">CCP</td>\n<td align="center">The Common Closure Principle</td>\n<td align="center">共同封闭原则</td>\n</tr>\n<tr>\n<td align="center">SAP</td>\n<td align="center">The Stable Abstractions Principle</td>\n<td align="center">稳定抽象原则</td>\n</tr>\n<tr>\n<td align="center">SDP</td>\n<td align="center">The Stable Dependencies Principle</td>\n<td align="center">稳定依赖原则</td>\n</tr>\n</tbody>\n</table>\n<h3 id="1-迪米特法则"><a href="#1-%E8%BF%AA%E7%B1%B3%E7%89%B9%E6%B3%95%E5%88%99" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1. 迪米特法则</h3>\n<p>迪米特法则又叫作最少知识原则（Least Knowledge Principle，简写 LKP），就是说一个对象应当对其他对象有尽可能少的了解，不和陌生人说话。</p>\n<h3 id="2-合成复用原则"><a href="#2-%E5%90%88%E6%88%90%E5%A4%8D%E7%94%A8%E5%8E%9F%E5%88%99" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2. 合成复用原则</h3>\n<p>尽量使用对象组合，而不是继承来达到复用的目的。</p>\n<h3 id="3-共同封闭原则"><a href="#3-%E5%85%B1%E5%90%8C%E5%B0%81%E9%97%AD%E5%8E%9F%E5%88%99" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3. 共同封闭原则</h3>\n<p>一起修改的类，应该组合在一起（同一个包里）。如果必须修改应用程序里的代码，我们希望所有的修改都发生在一个包里（修改关闭），而不是遍布在很多包里。</p>\n<h3 id="4-稳定抽象原则"><a href="#4-%E7%A8%B3%E5%AE%9A%E6%8A%BD%E8%B1%A1%E5%8E%9F%E5%88%99" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>4. 稳定抽象原则</h3>\n<p>最稳定的包应该是最抽象的包，不稳定的包应该是具体的包，即包的抽象程度跟它的稳定性成正比。</p>\n<h3 id="5-稳定依赖原则"><a href="#5-%E7%A8%B3%E5%AE%9A%E4%BE%9D%E8%B5%96%E5%8E%9F%E5%88%99" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5. 稳定依赖原则</h3>\n<p>包之间的依赖关系都应该是稳定方向依赖的，包要依赖的包要比自己更具有稳定性。</p>\n<h1 id="二、三大特性"><a href="#%E4%BA%8C%E3%80%81%E4%B8%89%E5%A4%A7%E7%89%B9%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>二、三大特性</h1>\n<h2 id="封装"><a href="#%E5%B0%81%E8%A3%85" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>封装</h2>\n<p>利用抽象数据类型将数据和基于数据的操作封装在一起，使其构成一个不可分割的独立实体。数据被保护在抽象数据类型的内部，尽可能地隐藏内部的细节，只保留一些对外接口使之与外部发生联系。用户无需知道对象内部的细节，但可以通过对象对外提供的接口来访问该对象。</p>\n<p>封装有三大好处：</p>\n<ol>\n<li>减少耦合</li>\n<li>隐藏内部细节，因此内部结构可以自由修改</li>\n<li>可以对成员进行更精确的控制</li>\n</ol>\n<p>以下 Person 类封装 name、gender、age 等属性，外界只能通过 get() 方法获取一个 Person 对象的 name 属性和 gender 属性，而无法获取 age 属性，但是 age 属性可以供 work() 方法使用。</p>\n<p>注意到 gender 属性使用 int 数据类型进行存储，封装使得用户注意不到这种实现细节。并且在需要修改 gender 属性使用的数据类型时，也可以在不影响客户端代码的情况下进行。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="48398829241619915000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`public class Person {\n    private String name;\n    private int gender;\n    private int age;\n\n    public String getName() {\n        return name;\n    }\n\n    public String getGender() {\n        return gender == 0 ? &quot;man&quot; : &quot;woman&quot;;\n    }\n\n    public void work() {\n        if(18 <= age && age <= 50) {\n            System.out.println(name + &quot; is working very hard!&quot;);\n        } else {\n            System.out.println(name + &quot; can\'t work any more!&quot;);\n        }\n    }\n}`, `48398829241619915000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="java"\n              >\n                <span class="gatsby-code-button-language">java</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="java"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>\n    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>\n    <span class="token keyword">private</span> <span class="token keyword">int</span> gender<span class="token punctuation">;</span>\n    <span class="token keyword">private</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>\n\n    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">return</span> name<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getGender</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">return</span> gender <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token string">"man"</span> <span class="token operator">:</span> <span class="token string">"woman"</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">work</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token number">18</span> <span class="token operator">&lt;=</span> age <span class="token operator">&amp;&amp;</span> age <span class="token operator">&lt;=</span> <span class="token number">50</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name <span class="token operator">+</span> <span class="token string">" is working very hard!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>\n            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name <span class="token operator">+</span> <span class="token string">" can\'t work any more!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="继承"><a href="#%E7%BB%A7%E6%89%BF" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>继承</h2>\n<p>继承实现了 <strong>IS-A</strong> 关系，例如 Cat 和 Animal 就是一种 IS-A 关系，因此 Cat 可以继承自 Animal，从而获得 Animal 非 private 的属性和方法。</p>\n<p>Cat 可以当做 Animal 来使用，也就是说可以使用 Animal 引用 Cat 对象。父类引用指向子类对象称为 <strong>向上转型</strong> 。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="61255156907787160000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`Animal animal = new Cat();`, `61255156907787160000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="java"\n              >\n                <span class="gatsby-code-button-language">java</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="java"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token class-name">Animal</span> animal <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>继承应该遵循里氏替换原则，子类对象必须能够替换掉所有父类对象。</p>\n<h2 id="多态"><a href="#%E5%A4%9A%E6%80%81" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>多态</h2>\n<p>多态分为编译时多态和运行时多态。编译时多态主要指方法的重载，运行时多态指程序中定义的对象引用所指向的具体类型在运行期间才确定。</p>\n<p>运行时多态有三个条件：</p>\n<ol>\n<li>继承</li>\n<li>覆盖</li>\n<li>向上转型</li>\n</ol>\n<p>下面的代码中，乐器类（Instrument）有两个子类：Wind 和 Percussion，它们都覆盖了父类的 play() 方法，并且在 main() 方法中使用父类 Instrument 来引用 Wind 和 Percussion 对象。在 Instrument 引用调用 play() 方法时，会执行实际引用对象所在类的 play() 方法，而不是 Instrument 类的方法。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="2888260444728252400"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`public class Instrument {\n    public void play() {\n        System.out.println(&quot;Instument is playing...&quot;);\n    }\n}\n\npublic class Wind extends Instrument {\n    public void play() {\n        System.out.println(&quot;Wind is playing...&quot;);\n    }\n}\n\npublic class Percussion extends Instrument {\n    public void play() {\n        System.out.println(&quot;Percussion is playing...&quot;);\n    }\n}\n\npublic class Music {\n    public static void main(String[] args) {\n        List<Instrument> instruments = new ArrayList<>();\n        instruments.add(new Wind());\n        instruments.add(new Percussion());\n        for(Instrument instrument : instruments) {\n            instrument.play();\n        }\n    }\n}`, `2888260444728252400`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="java"\n              >\n                <span class="gatsby-code-button-language">java</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="java"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Instrument</span> <span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Instument is playing..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Wind</span> <span class="token keyword">extends</span> <span class="token class-name">Instrument</span> <span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Wind is playing..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Percussion</span> <span class="token keyword">extends</span> <span class="token class-name">Instrument</span> <span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Percussion is playing..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Music</span> <span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Instrument</span><span class="token punctuation">></span></span> instruments <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        instruments<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Wind</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        instruments<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Percussion</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Instrument</span> instrument <span class="token operator">:</span> instruments<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n            instrument<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h1 id="三、类图"><a href="#%E4%B8%89%E3%80%81%E7%B1%BB%E5%9B%BE" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>三、类图</h1>\n<h2 id="泛化关系-generalization"><a href="#%E6%B3%9B%E5%8C%96%E5%85%B3%E7%B3%BB-generalization" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>泛化关系 (Generalization)</h2>\n<p>用来描述继承关系，在 Java 中使用 extends 关键字。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/b418ca51-f005-4510-b7ad-f092eb6aeb24-3a0d067fd86b964e00dca50789c6de5d-49b3a.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 326px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 73.00613496932516%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsSAAALEgHS3X78AAABuklEQVQoz6WSDW+bMBCG8/9/y1Rpm6ZF25q2ozRZkyaEQDAfxmBswHwkWUggWQLMsKza0qqdNOssne+9Rye/dqf+j9V5Wkri0Cd2zLwkIqHvRiHmx0Uac6mqqpfgw7FKA22Xjo1pd9K/WNCBo10uiBj5oNVfhMuyJkgKkSAN3o5uLxxwBaQu1i8dS/oHuKoNtU/NHnPEAAnUuuaJo30CyuB1mF+KYmDNhdnDZ8cYQE1skz40Z6/DfOVFMZsp2CM8X2cbVZ1TGpRleeZWA7elU1RVyUur1UoHYLvdthaUGLsI2b/HPsazbh+OQcDOhkRRUhTFM++8XMSMgDgwGAVJaLqWRJDMr81ncvl4LJmPfFfhbieBGfJOXw8J5PUGph6sczVjD2PxjTJ8Z8of6x2g8C5vR+X5PqIybzDlrqf31NH7w1pmeLxebxqYeDDF/dS796EQIjGwxe/B0JCv8ryBi90PbI2W9BuFtyfVH0LtLts0jnRcW/f0L6H9lSGBR5vcTO8/PMKGIjD7upUaNUI380kvy1p4uUwca+pY8p9haJP9ft+6XfkE/t0wtU3ll9o5vUB1Hmc/54na7J+m7ElRemYDLgAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="b418ca51 f005 4510 b7ad f092eb6aeb24" title="" data-src="/static/b418ca51-f005-4510-b7ad-f092eb6aeb24-3a0d067fd86b964e00dca50789c6de5d-49b3a.png" data-srcset="/static/b418ca51-f005-4510-b7ad-f092eb6aeb24-3a0d067fd86b964e00dca50789c6de5d-6cc38.png 200w,\n/static/b418ca51-f005-4510-b7ad-f092eb6aeb24-3a0d067fd86b964e00dca50789c6de5d-49b3a.png 326w" data-sizes="(max-width: 326px) 100vw, 326px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h2 id="实现关系-realization"><a href="#%E5%AE%9E%E7%8E%B0%E5%85%B3%E7%B3%BB-realization" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>实现关系 (Realization)</h2>\n<p>用来实现一个接口，在 Java 中使用 implement 关键字。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/27cd6f0c-f581-45da-b8c9-fed026830560-b162c13e09eb94ad45c69282df5488e8-3091a.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 361px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 78.67036011080333%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAAsSAAALEgHS3X78AAABp0lEQVQoz6VTbWvbMBD2//8n24eNbAwKLVmyktfajZyqgdaO7cRvSezJlmRLdiJ7U6s2lG6QQMVxCN090nPPnbQ/H1jav0ficCgLXHHKOa15wUvCWXEa3Lat9AVF5vjrfPLNGH4B4w686TzAgQqfBlcMrx+65rgz6X+24eXC+O47RtOe9zIrMhSOdqtBYPXyaJqsrkPvtmnOpY1jz4g9HcV3W3/m26O1Mz/98hG/3SYQLoqC5TmZzQBC2VlqKzBCKI4juRdCxHFMKT23VRJTVfztCSvL5n9Fa28BjJX7fU0IzjIkN4qF9ISQNE2bRtR1pXKO4GeRCrpZ6WRnRs7YtwY0MWV7GK9kCGdp6IzwFpjTH+FylEX62jHVpZpqPaX4d6ALDHfe0H/stfTeX04JeRqsHCW71VAQOOl9Cu3rGgHPunnWvtUUN4JzG14FVjewfkoLre4CXFH6BE6TjZyT0O5tnF/Rsu8uLu5BX9X6UjPnLHDnoQsCdxY4IPKAawHGuSLlPeqRZ/rLW5ng24Zrw/dqC9Hu983RhGiUHHId3oVeJ0b7yJf8C36lklnp7JRfAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="27cd6f0c f581 45da b8c9 fed026830560" title="" data-src="/static/27cd6f0c-f581-45da-b8c9-fed026830560-b162c13e09eb94ad45c69282df5488e8-3091a.png" data-srcset="/static/27cd6f0c-f581-45da-b8c9-fed026830560-b162c13e09eb94ad45c69282df5488e8-07e05.png 200w,\n/static/27cd6f0c-f581-45da-b8c9-fed026830560-b162c13e09eb94ad45c69282df5488e8-3091a.png 361w" data-sizes="(max-width: 361px) 100vw, 361px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h2 id="聚合关系-aggregation"><a href="#%E8%81%9A%E5%90%88%E5%85%B3%E7%B3%BB-aggregation" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>聚合关系 (Aggregation)</h2>\n<p>表示整体由部分组成，但是整体和部分不是强依赖的，整体不存在了部分还是会存在。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/aa42f9c6-ad7a-48f4-8e8b-f3b6de3feaec-6d168bd76e799a4d94ec32d4b73a5053-a64ad.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 450px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 51.55555555555556%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAABZElEQVQoz41QaU+DQBTk//8Lf4PG1GCqtfayV6zQlnLIsVALy7WwXAvUhRrTmBp9HzY782Ze3hvmeKkSjFxbh7bmu1ZZlsdfivlJ1DV9Qs8Eu+5j58qUR3GMW7r+23wSAV2QuY7C321eWc/3/2U+KYIwlMStuJ6aGr9aDiVJzvP8op85sd+NKIogdCIUWdZHWVYGsIoihxDGcXTm/foxNI+SkLquiqII2qIsxnEQ+O0sFIZhs04QeJ6XZRmV1VVFCtKYMYIS31uMbk1lnqQZjqAmDFbTDrQ4qgzcvcg9yOuesp1gnNp71dZn/II9GG90ChO6pr5hheUNEPtlVQeuYezuheX1QR1HcerZmr5ltQ0rcd0kzZEHHPWJZmkq4zRNGegAIA1cMBf5PiEVtIGpDCGYqbsxTjLXAZYysvWpJr1Qs+sYQHqGxuxdmDRmQojf3OPTkGlsDfR9CttTzyE663oINfATKlQyd6eo0bsAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="aa42f9c6 ad7a 48f4 8e8b f3b6de3feaec" title="" data-src="/static/aa42f9c6-ad7a-48f4-8e8b-f3b6de3feaec-6d168bd76e799a4d94ec32d4b73a5053-a64ad.png" data-srcset="/static/aa42f9c6-ad7a-48f4-8e8b-f3b6de3feaec-6d168bd76e799a4d94ec32d4b73a5053-a484f.png 200w,\n/static/aa42f9c6-ad7a-48f4-8e8b-f3b6de3feaec-6d168bd76e799a4d94ec32d4b73a5053-d7c5d.png 400w,\n/static/aa42f9c6-ad7a-48f4-8e8b-f3b6de3feaec-6d168bd76e799a4d94ec32d4b73a5053-a64ad.png 450w" data-sizes="(max-width: 450px) 100vw, 450px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="34972631107255837000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`public class Computer\n    private KeyBoard keyboard;\n    private Mouse mouse;\n\n    public void Running()\n    {\n        keyboard.running();\n        mouse.running();\n    }\n}`, `34972631107255837000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="cpp"\n              >\n                <span class="gatsby-code-button-language">cpp</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="cpp"><pre style="counter-reset: linenumber NaN" class="language-cpp line-numbers"><code class="language-cpp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Computer</span>\n    <span class="token keyword">private</span> KeyBoard keyboard<span class="token punctuation">;</span>\n    <span class="token keyword">private</span> Mouse mouse<span class="token punctuation">;</span>\n\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Running</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        keyboard<span class="token punctuation">.</span><span class="token function">running</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        mouse<span class="token punctuation">.</span><span class="token function">running</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="组合关系-composition"><a href="#%E7%BB%84%E5%90%88%E5%85%B3%E7%B3%BB-composition" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>组合关系 (Composition)</h2>\n<p>和聚合不同，组合中整体和部分是强依赖的，整体不存在了部分也不存在了。比如公司和部门，公司没了部门就不存在了。但是公司和员工就属于聚合关系了，因为公司没了员工还在。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/0e34263d-7287-4ffe-a716-37c53d1a2526-5fa8144e842b175365fa63bac252162d-6db8f.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 383px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 63.44647519582245%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAABiElEQVQoz5WRa2+CMBSG/f8f92nLkmX/YMmi7oO3oVEznSIqDuWmgEihKlQuVRFXvC+biXtz0rR9+7TnnCa2PxWGIbTAFAJ7DkmYQPc8d+dE219KnGZRFNvuwkEm41q0yOZ0qbyct01d2Ns3wYZctZSKxGbVAQWVijrs3Qo79kxk89aoMuJyE6mk8QWhT5/cq/Dp9ka98vhwt8KoRGWen+5x4P1JHuDoKNItsvyM1YizcJxkKr1eh5dnrr4c1+wubNuOT282ZFytVhDC7RUldoC7QIvA9xFCsix73iHPfS6apgEAcIB933ccFO4SOcB4uYTjrqXUOSYnspSpfIBxj7B7fgYNx2D4TmFAop2fjWmyc+pfIgiwqTYnItWpvXKtNyAXVbERbg7dg0Cz9RpHp3uNZKv6ApWqoQ/PMMb4q5XV+QLhSahcpksXotiOa56M5UErZUhFXXy3RmWumdQU8QyTqtRRXxYYmWeGQlvi6aHERcd/Q2geW0KbjMQV+s0pNM/w9p+6/K1vfHvemPrMHBIAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="0e34263d 7287 4ffe a716 37c53d1a2526" title="" data-src="/static/0e34263d-7287-4ffe-a716-37c53d1a2526-5fa8144e842b175365fa63bac252162d-6db8f.png" data-srcset="/static/0e34263d-7287-4ffe-a716-37c53d1a2526-5fa8144e842b175365fa63bac252162d-89fca.png 200w,\n/static/0e34263d-7287-4ffe-a716-37c53d1a2526-5fa8144e842b175365fa63bac252162d-6db8f.png 383w" data-sizes="(max-width: 383px) 100vw, 383px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="99347133124708240000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`public class Company\n{\n    private DepartmentA departmentA;\n    private DepartmentB departmentB;\n    public Company()\n    {\n        departmentA = new DepartmentA();\n        departmentB = new DepartmentB();\n    }\n}  `, `99347133124708240000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="cpp"\n              >\n                <span class="gatsby-code-button-language">cpp</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="cpp"><pre style="counter-reset: linenumber NaN" class="language-cpp line-numbers"><code class="language-cpp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Company</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">private</span> DepartmentA departmentA<span class="token punctuation">;</span>\n    <span class="token keyword">private</span> DepartmentB departmentB<span class="token punctuation">;</span>\n    <span class="token keyword">public</span> <span class="token function">Company</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        departmentA <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">DepartmentA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        departmentB <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">DepartmentB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>  </code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="关联关系-association"><a href="#%E5%85%B3%E8%81%94%E5%85%B3%E7%B3%BB-association" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>关联关系 (Association)</h2>\n<p>表示不同类对象之间有关联，这是一种静态关系，与运行过程的状态无关，在最开始就可以确定。因此也可以用 1 对 1、多对 1、多对多这种关联关系来表示。比如学生和学校就是一种关联关系，一个学校可以有很多学生，但是一个学生只属于一个学校，因此这是一种多对一的关系，在运行开始之前就可以确定。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2017511e-22f0-4d74-873d-1261b71cf5a4-a24c985a40285b86b67f5ba681a08d0d-960c5.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 229px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 138.42794759825327%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAcCAIAAADuuAg3AAAACXBIWXMAAAsSAAALEgHS3X78AAACDUlEQVQ4y82U227aQBCGef+nqHoVqb2I0lZVq8YBbMAcY4MBY2zvrs9AnAC2OdSnLN6UKhRDkvaio5E1Gs2/4x3P50L6F1b4l+IoTsLol4fxzzAmMc6fEW+3WzDmTcAbgNdUzkK9idk3II8DUajO5/e4JkmSP8RZarn0HK2ZhlK6EiX+a4v5UPr2fuXeponqgLJpwBxxukt5vm/DVhoMo+XQARWh+eXH53dzu5VuZUsp65q6b/NMTM7z/UDkqSlkLIW2VWaKanc6a6v0TKt1G5cQyMc7k5TnB1Lv5t6oTVF1pu18AitTVHmwGoP2p1wxee0gWPW5GySV1GERiEVlQOljBkllbUy3q7izkid+ssViYVmWaZq2bbMsy/O8IPQcx8EZz/NetCTkeFUFWAbh4ZBzxUlmcRzjWJZlEpDkS9eTlCqKQsSv2+29OIqit4vf3hnfGSFkGMbRC5+dtuq6Lv5mef0PxXGcZFTuqiXpado4E59Fcr3eSIO6oTZ1pQlGtVGvBCVWkxsW7Aida/duehJJz3cQZkhK16N+66pbv6wXL5JgkIayA2hDByeRJOKVmPjiDLEYKVOmtw9Cuhljts4jOeSoCWDMDEmMNHZTLmM2+ToGY3wSSc8fdanfSGZPgmS/fZUr3g+Ma1FC53uv/cwH3DVDfYTwHJJhFPlB4B+zzWZzsC2F/+an/yp7BPokR4FFOnw4AAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2017511e 22f0 4d74 873d 1261b71cf5a4" title="" data-src="/static/2017511e-22f0-4d74-873d-1261b71cf5a4-a24c985a40285b86b67f5ba681a08d0d-960c5.png" data-srcset="/static/2017511e-22f0-4d74-873d-1261b71cf5a4-a24c985a40285b86b67f5ba681a08d0d-6f066.png 200w,\n/static/2017511e-22f0-4d74-873d-1261b71cf5a4-a24c985a40285b86b67f5ba681a08d0d-960c5.png 229w" data-sizes="(max-width: 229px) 100vw, 229px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="32275692272509903000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`public class School\n{\n    private Student[] students;\n\n    public void GoToSchool()\n    {\n        students.study();\n    }\n}`, `32275692272509903000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="cpp"\n              >\n                <span class="gatsby-code-button-language">cpp</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="cpp"><pre style="counter-reset: linenumber NaN" class="language-cpp line-numbers"><code class="language-cpp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">School</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">private</span> Student<span class="token punctuation">[</span><span class="token punctuation">]</span> students<span class="token punctuation">;</span>\n\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">GoToSchool</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        students<span class="token punctuation">.</span><span class="token function">study</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="依赖关系-dependency"><a href="#%E4%BE%9D%E8%B5%96%E5%85%B3%E7%B3%BB-dependency" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>依赖关系 (Dependency)</h2>\n<p>和关联关系不同的是，依赖关系是在运行过程中起作用的。A 类和 B 类是依赖关系主要有三种形式：</p>\n<ol>\n<li>A 类是 B 类中的（某中方法的）局部变量；</li>\n<li>A 类是 B 类方法当中的一个参数；</li>\n<li>A 类向 B 类发送消息，从而影响 B 类发生变化；</li>\n</ol>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/c7d4956c-9988-4a10-a704-28fdae7f3d28-1eecc91b83b4c8ce1090cd155d61ed31-95c58.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 477px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 49.05660377358491%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAABO0lEQVQoz4VRa2+CMBTl//+bZZn7hMuMYTA34xsHKAgVsSBCaeXRVlezBTFz20l7k97b09t7jnS6gWMjNrJn8MY6Sc1aUZZlVTHOKaVVRcVRJE+/Q6qb5DmJg2kIBrNB2zVV33nbB5MMxV/vipihPQycCHrhdhXvfMaYVNcIQZGnRa6i9x+A+RzY3Z2nbgOP8yNjNMuIqb9ao9ZQuzOGLWB1McYX8oEge9Z2P2RgPq3m8mbZMYaP240ryGKGvCh9b25N5Hfl3hjL9odCCLmQi6IAzsjSVcforawesPsL/SXd7+oLVVXhDB0OoiXCOOOcS2KH4RJCI45tGC7Wa933l+ys5VmJfwQTukahFkcdlKo405JEAUAW8/9063iNbzKEY4SmSTJJknGaTqNokOf4ptU3rKKU0Wv8/dsan6ZeOiAZvgj9AAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="c7d4956c 9988 4a10 a704 28fdae7f3d28" title="" data-src="/static/c7d4956c-9988-4a10-a704-28fdae7f3d28-1eecc91b83b4c8ce1090cd155d61ed31-95c58.png" data-srcset="/static/c7d4956c-9988-4a10-a704-28fdae7f3d28-1eecc91b83b4c8ce1090cd155d61ed31-9ffd2.png 200w,\n/static/c7d4956c-9988-4a10-a704-28fdae7f3d28-1eecc91b83b4c8ce1090cd155d61ed31-bef37.png 400w,\n/static/c7d4956c-9988-4a10-a704-28fdae7f3d28-1eecc91b83b4c8ce1090cd155d61ed31-95c58.png 477w" data-sizes="(max-width: 477px) 100vw, 477px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="43574998678771550000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`public class Transport\n{\n    public void Run\n    {\n    }\n    // way 代表行驶方式\n    public void Fly(Way way)\n    {\n        way.fly();\n    }\n}`, `43574998678771550000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="cpp"\n              >\n                <span class="gatsby-code-button-language">cpp</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="cpp"><pre style="counter-reset: linenumber NaN" class="language-cpp line-numbers"><code class="language-cpp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Transport</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> Run\n    <span class="token punctuation">{</span>\n    <span class="token punctuation">}</span>\n    <span class="token comment">// way 代表行驶方式</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Fly</span><span class="token punctuation">(</span>Way way<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        way<span class="token punctuation">.</span><span class="token function">fly</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h1 id="参考资料"><a href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>参考资料</h1>\n<ul>\n<li>Java 编程思想</li>\n<li>敏捷软件开发：原则、模式与实践</li>\n<li><a href="http://www.cnblogs.com/shanyou/archive/2009/09/21/1570716.html" target="_blank" rel="nofollow noreferrer noopener">面向对象设计的 SOLID 原则</a></li>\n<li><a href="http://design-patterns.readthedocs.io/zh_CN/latest/read_uml.html#generalization" target="_blank" rel="nofollow noreferrer noopener">看懂 UML 类图和时序图</a></li>\n<li><a href="http://www.cnblogs.com/wolf-sun/p/UML-Sequence-diagram.html" target="_blank" rel="nofollow noreferrer noopener">UML 系列——时序图（顺序图）sequence diagram</a></li>\n<li><a href="http://blog.csdn.net/jianyuerensheng/article/details/51602015" target="_blank" rel="nofollow noreferrer noopener">面向对象编程三大特性 ------ 封装、继承、多态</a></li>\n</ul>',
id:"/home/runner/work/GatsbyBlog/GatsbyBlog/blog/面向对象思想/index.md absPath of file >>> MarkdownRemark",timeToRead:7,frontmatter:{date:"2018-04-02 17:54:51",path:"/object-oriented-thinking/",tags:"面试, 面向对象, 读书笔记",title:"面向对象思想",draft:null}},{excerpt:"常用操作以及概念 求助 help 指令的基本用法与选项介绍。 man man 是 manual 的缩写，将指令的具体信息显示出来。 当执行 man date 时，有 DATE(1) 出现，其中的数字代表指令的类型，常用的数字及其类型如下： 代号 类型 1 用户在 shell 环境中可以操作的指令或者可执行文件 5 配置文件 8 系统管理员可以使用的管理指令 info info 与 man 类似，但是 info 将文档分成一个个页面，每个页面可以进行跳转。 关机 sync…",html:'<h1 id="常用操作以及概念"><a href="#%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C%E4%BB%A5%E5%8F%8A%E6%A6%82%E5%BF%B5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>常用操作以及概念</h1>\n<h2 id="求助"><a href="#%E6%B1%82%E5%8A%A9" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>求助</h2>\n<h3 id="help"><a href="#help" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>help</h3>\n<p>指令的基本用法与选项介绍。</p>\n<h3 id="man"><a href="#man" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>man</h3>\n<p>man 是 manual 的缩写，将指令的具体信息显示出来。</p>\n<p>当执行 man date 时，有 DATE(1) 出现，其中的数字代表指令的类型，常用的数字及其类型如下：</p>\n<table>\n<thead>\n<tr>\n<th align="center">代号</th>\n<th>类型</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align="center">1</td>\n<td>用户在 shell 环境中可以操作的指令或者可执行文件</td>\n</tr>\n<tr>\n<td align="center">5</td>\n<td>配置文件</td>\n</tr>\n<tr>\n<td align="center">8</td>\n<td>系统管理员可以使用的管理指令</td>\n</tr>\n</tbody>\n</table>\n<h3 id="info"><a href="#info" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>info</h3>\n<p>info 与 man 类似，但是 info 将文档分成一个个页面，每个页面可以进行跳转。</p>\n<h2 id="关机"><a href="#%E5%85%B3%E6%9C%BA" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>关机</h2>\n<h3 id="sync"><a href="#sync" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>sync</h3>\n<p>为了加快对磁盘文件的读写速度，位于内存中的文件数据不会立即同步到磁盘上，因此关机之前需要先进行 sync 同步操作。</p>\n<h3 id="shutdown"><a href="#shutdown" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>shutdown</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="4643713444362008000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`# /sbin/shutdown [-krhc] [时间] [警告讯息]\n-k：不会关机，只是发送警告讯息，通知所有在线的用户\n-r：将系统的服务停掉后就重新启动\n-h：将系统的服务停掉后就立即关机\n-c：取消已经在进行的 shutdown 指令内容`, `4643713444362008000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token comment"># /sbin/shutdown [-krhc] [时间] [警告讯息]</span>\n-k：不会关机，只是发送警告讯息，通知所有在线的用户\n-r：将系统的服务停掉后就重新启动\n-h：将系统的服务停掉后就立即关机\n-c：取消已经在进行的 <span class="token function">shutdown</span> 指令内容</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="其它关机指令"><a href="#%E5%85%B6%E5%AE%83%E5%85%B3%E6%9C%BA%E6%8C%87%E4%BB%A4" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>其它关机指令</h3>\n<p>reboot、halt、poweroff。</p>\n<h2 id="path"><a href="#path" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>PATH</h2>\n<p>可以在环境变量 PATH 中声明可执行文件的路径，路径之间用 : 分隔。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="25739352667445158000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/home/dmtsai/.local/bin:/home/dmtsai/bin`, `25739352667445158000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/home/dmtsai/.local/bin:/home/dmtsai/bin</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<h2 id="运行等级"><a href="#%E8%BF%90%E8%A1%8C%E7%AD%89%E7%BA%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>运行等级</h2>\n<ul>\n<li>0：关机模式</li>\n<li>1：单用户模式（可用于破解 root 密码）</li>\n<li>2：无网络支持的多用户模式</li>\n<li>3：有网络支持的多用户模式（文本模式，工作中最常用的模式）</li>\n<li>4：保留，未使用</li>\n<li>5：有网络支持的 X-windows 多用户模式（桌面）</li>\n<li>6：重新引导系统，即重启</li>\n</ul>\n<h2 id="sudo"><a href="#sudo" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>sudo</h2>\n<p>使用 sudo 允许一般用户使用 root 可执行的命令，只有在 /etc/sudoers 配置文件中添加的用户才能使用该指令。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="61869789470298130000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`# User privilege specification\nroot    ALL=(ALL:ALL) ALL\ntowavephone ALL=(ALL:ALL) ALL`, `61869789470298130000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token comment"># User privilege specification</span>\nroot    <span class="token assign-left variable">ALL</span><span class="token operator">=</span><span class="token punctuation">(</span>ALL:ALL<span class="token punctuation">)</span> ALL\ntowavephone <span class="token assign-left variable">ALL</span><span class="token operator">=</span><span class="token punctuation">(</span>ALL:ALL<span class="token punctuation">)</span> ALL</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<h2 id="gnu"><a href="#gnu" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>GNU</h2>\n<p>GNU 计划，译为革奴计划，它的目标是创建一套完全自由的操作系统，称为 GNU，其内容软件完全以 GPL 方式发布。其中 GPL 全称为 GNU 通用公共许可协议，包含了以下内容：</p>\n<ul>\n<li>以任何目的运行此程序的自由；</li>\n<li>再复制的自由；</li>\n<li>改进此程序，并公开发布改进的自由。</li>\n</ul>\n<h2 id="包管理工具"><a href="#%E5%8C%85%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>包管理工具</h2>\n<p>RPM 和 DPKG 为最常见的两类软件包管理工具。RPM 全称为 Redhat Package Manager，最早由 Red Hat 公司制定实施，随后被 GNU 开源操作系统接受并成为很多 Linux 系统 (RHEL) 的既定软件标准。与 RPM 进行竞争的是基于 Debian 操作系统 (UBUNTU) 的 DEB 软件包管理工具－ DPKG，全称为 Debian Package，功能方面与 RPM 相似。</p>\n<p>YUM 基于 RPM 包管理工具，具有依赖管理功能，并具有软件升级的功能。</p>\n<h2 id="发行版"><a href="#%E5%8F%91%E8%A1%8C%E7%89%88" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>发行版</h2>\n<p>Linux 发行版是 Linux 内核及各种应用软件的集成版本。</p>\n<table>\n<thead>\n<tr>\n<th>基于的包管理工具</th>\n<th>商业发行版</th>\n<th>社区发行版</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>DPKG</td>\n<td>Ubuntu</td>\n<td>Debian</td>\n</tr>\n<tr>\n<td>RPM</td>\n<td>Red Hat</td>\n<td>Fedora / CentOS</td>\n</tr>\n</tbody>\n</table>\n<h2 id="vim-三个模式"><a href="#vim-%E4%B8%89%E4%B8%AA%E6%A8%A1%E5%BC%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>VIM 三个模式</h2>\n<ul>\n<li>一般指令模式（Command mode）：进入 VIM 的默认模式，可以用于移动游标查看内容；</li>\n<li>编辑模式（Insert mode）：按下 “i” 等按键之后进入，可以对文本进行编辑；</li>\n<li>指令列模式（Bottom-line mode）：按下 ”:” 按键之后进入，用于保存退出等操作。</li>\n</ul>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/5942debd-fc00-477a-b390-7c5692cc8070-a769a78fca460ef2f1ce7e1973b7c8e8-3d6dd.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 591px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 84.26395939086294%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAARABQDASIAAhEBAxEB/8QAGAABAQEBAQAAAAAAAAAAAAAAAAQDAgX/xAAXAQADAQAAAAAAAAAAAAAAAAAAAQMC/9oADAMBAAIQAxAAAAH09pK5uduW86Ss+wH/xAAeEAACAgAHAAAAAAAAAAAAAAAAAgESAxETISIxMv/aAAgBAQABBQKcQvx1pL7pOaVQf0vR/8QAGREAAQUAAAAAAAAAAAAAAAAAEgABAhBR/9oACAEDAQE/ASZFHL//xAAaEQEAAQUAAAAAAAAAAAAAAAACAQAQEjFR/9oACAECAQE/ASHG5rF9v//EABsQAAEEAwAAAAAAAAAAAAAAAAABEBEhICIx/9oACAEBAAY/AiaZdSzmH//EABwQAAICAgMAAAAAAAAAAAAAAAABETEhURBx8P/aAAgBAQABPyF8tOSU7IoWlDZoS3sRhYo90y7op4//2gAMAwEAAgADAAAAEKffAP/EABYRAQEBAAAAAAAAAAAAAAAAAAERIP/aAAgBAwEBPxCqQwv/xAAWEQEBAQAAAAAAAAAAAAAAAAARASD/2gAIAQIBAT8QTrYH/8QAHRABAAICAgMAAAAAAAAAAAAAAQARITEQcUGh8P/aAAgBAQABPxAQyPIGI0JoSWzK+W7Em2AF2KlGOyoBbguoPk7nrHH/2Q==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="5942debd fc00 477a b390 7c5692cc8070" title="" data-src="/static/5942debd-fc00-477a-b390-7c5692cc8070-a769a78fca460ef2f1ce7e1973b7c8e8-3d6dd.jpg" data-srcset="/static/5942debd-fc00-477a-b390-7c5692cc8070-a769a78fca460ef2f1ce7e1973b7c8e8-57fa5.jpg 200w,\n/static/5942debd-fc00-477a-b390-7c5692cc8070-a769a78fca460ef2f1ce7e1973b7c8e8-8f26e.jpg 400w,\n/static/5942debd-fc00-477a-b390-7c5692cc8070-a769a78fca460ef2f1ce7e1973b7c8e8-3d6dd.jpg 591w" data-sizes="(max-width: 591px) 100vw, 591px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>在指令列模式下，有以下命令用于离开或者保存文件。</p>\n<table>\n<thead>\n<tr>\n<th align="center">命令</th>\n<th>作用</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align="center">:w</td>\n<td>写入磁盘</td>\n</tr>\n<tr>\n<td align="center">:w!</td>\n<td>当文件为只读时，强制写入磁盘。到底能不能写入，与用户对该文件的权限有关</td>\n</tr>\n<tr>\n<td align="center">:q</td>\n<td>离开</td>\n</tr>\n<tr>\n<td align="center">:q!</td>\n<td>强制离开不保存</td>\n</tr>\n<tr>\n<td align="center">:wq</td>\n<td>写入磁盘后离开</td>\n</tr>\n<tr>\n<td align="center">:wq!</td>\n<td>强制写入磁盘后离开</td>\n</tr>\n</tbody>\n</table>\n<h1 id="分区"><a href="#%E5%88%86%E5%8C%BA" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>分区</h1>\n<h2 id="磁盘的文件名"><a href="#%E7%A3%81%E7%9B%98%E7%9A%84%E6%96%87%E4%BB%B6%E5%90%8D" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>磁盘的文件名</h2>\n<p>Linux 中每个硬件都被当做一个文件，包括磁盘。常见磁盘的文件名如下：</p>\n<ul>\n<li>SCSI/SATA/USB 磁盘：/dev/sd[a-p]</li>\n<li>IDE 磁盘：/dev/hd[a-d]</li>\n</ul>\n<p>其中文件名后面的序号的确定与磁盘插入的顺序有关，而与磁盘所插入的插槽位置无关。</p>\n<h2 id="分区表"><a href="#%E5%88%86%E5%8C%BA%E8%A1%A8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>分区表</h2>\n<p>磁盘分区表主要有两种格式，一种是限制较多的 MBR 分区表，一种是较新且限制较少的 GPT 分区表。</p>\n<h3 id="mbr"><a href="#mbr" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>MBR</h3>\n<p>MBR 中，第一个扇区最重要，里面有主要开机记录（Master boot record, MBR）及分区表（partition table），其中 MBR 占 446 bytes，分区表占 64 bytes。</p>\n<p>分区表只有 64 bytes，最多只能存储 4 个分区，这 4 个分区为主分区（Primary）和扩展分区（Extended）。其中扩展分区只有一个，它将其它空间用来记录分区表，因此通过扩展分区可以分出更多分区，这些分区称为逻辑分区。</p>\n<p>Linux 也把分区当成文件，分区文件的命名方式为：磁盘文件名 + 编号，例如 /dev/sda1。注意，逻辑分区的编号从 5 开始。</p>\n<h3 id="gpt"><a href="#gpt" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>GPT</h3>\n<p>不同的磁盘有不同的扇区大小，例如 512 bytes 和最新磁盘的 4 k。GPT 为了兼容所有磁盘，在定义扇区上使用逻辑区块地址（Logical Block Address, LBA）。</p>\n<p>GPT 第 1 个区块记录了 MBR，紧接着是 33 个区块记录分区信息，并把最后的 33 个区块用于对分区信息进行备份。</p>\n<p>GPT 没有扩展分区概念，都是主分区，最多可以分 128 个分区。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/GUID_Partition_Table_Scheme.svg-9d3c047c7d7faeb80526a009c794de8a-59d2e.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 400px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 137.5%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAcCAYAAABh2p9gAAAACXBIWXMAAAsSAAALEgHS3X78AAAE5klEQVRIx7VVe0xTVxi/t+3tbXm/LfISh+FtS5FtgDrNzDCyZC6bi4xpFMfImDIQgbRQ20rpA6SlTygFSuUhMkBkwFTeVEGETYP+4RKmWRYH2x/GzfjHsoW7c8spXglmarIv+eU75+s5v3u+7/udUwT5nywCgAfwJkAkQCzARhqNxmWxWHHu7u5Brq6u4TiOk/MYFxeXzQDhYBxLxtlsdjhYHwbAdBLyAfZDJALsQlE0Hfg0gPcgfAF2AuwDSIUfJn/fDv3HAN5OQiaV3WmnxWJvs9mcWFdby5NKpEkatTpBq9UmqIEXi8XbyLnFYuHXaDRRa/eGApDHZpHEXC7XhQyWCkuzh4aGiIHBgWVTbS2hMxgI0pvr6wmFUkm0tLYuj42NEY2NjYtgOUolDIJwBWD7B3JIj2Z8lbPXZh+2SS2mzhK1qlegq+4S6NW9Qr26q1itunSqSt5rvtLXXNlmrUFaqvyR5XuYk3AjJMQBsOAtb5AnRTIK8/aY7FfVmqE+peS81aDq69RVdLfpFBfPq+U97dXitkZD3fSoWtlhK0MGzbG0n8cDqCmTXWKTKW8ICSY9cuB4zrv64X6jZWpEVTtxWdM8Z69qmB51wDo7qTCODqjN14b0snMWOdJfF4Q8GPVzEvpA0BkYhth+uO6ox/FK2dGhxw/l9r8elfb/uiBpuT2tbJ2/oej+6U552/xM5ciTJZH978dnJHX6HMQg3OK6NM1ZT5PoB9lH6OTgUHFB2rlbU6bRJ0vSroV5ZePMuMY6Z9e0352tAqfV9i8uVAz/uagwDPaIkPzDiRjxu4eTJAyK259MGQdKBZ4RyedxPysuSMosyucdEwu4p4zqGBJ51fJYcPo4EE/IOi3gbdu9czvCYdM/JYjVUzHIZqxtPbCANXM3AA9Yaxol7uuxsn99YzBXNE5n0ANB+o6N0Ul8DMOZkRiTGcNk4ZvdvDy9Vm8FjnMQBh17mTtOSskFyokJM0Dh6TB4ETCoEsarEpKgQzDgB16ZMJBSVzpFrxxYT6dteB1CGpwHQ0L31yEkU/aEp3GjpM6CpXCHftPLEobBVP/LNj1bh6IvWoSCFzsqPiGFycRZ0UAzPBx4MI7HcXY0CPIwJr7Vx4/jBcYRKIPtQd3MooibaiEUAa/1CKW+XvBFf+6BDYTPGNvD08ehuTje29wTJWd3l0jNybmFiuQisTE5X6hJLRDWpBZJTClfnpQng99S0vdn7o06OO29T0Vg1FqFwA56+PpxyAagHx7MSZecbe2oNPU2iZTNVoWuyyLTXGgmoTJetIFYs1zbZSuR6Kp4R+7G7yghAtarIarQdTuCGUdPvj8890c5QNng9d+k3cP3y3tG7p/5dvKhpGfkgeTqzCPR2K2nUqWuQxzx0UTwO0JiNW2nNByX+PAXAgfhVn4qv7VvXja7QAgvjf9S3tB5Q9XUdVPZeflHedM3NyvGbj8tm7pHlJlsVxTJn9SnvSV5RhgK60cWFw8OjXC82J+fkOwBhIba1gmtuf2arq7Nrm24MK03NI+A2KTeYBsxWru/1xut30niMmcjdhQvB1L/U5zqZ/r6c8iuowcO5SWqjL0loPii3EKlNDtPKv5aoCkvFOlFoFllWbkimaDcUiarth3jZ90JSyn857lO0yAcDwDoNJ0iJfoLQINr6IF5K4/rv9PWqMOOvMgRAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="GUID Partition Table Scheme svg" title="" data-src="/static/GUID_Partition_Table_Scheme.svg-9d3c047c7d7faeb80526a009c794de8a-59d2e.png" data-srcset="/static/GUID_Partition_Table_Scheme.svg-9d3c047c7d7faeb80526a009c794de8a-01f55.png 200w,\n/static/GUID_Partition_Table_Scheme.svg-9d3c047c7d7faeb80526a009c794de8a-59d2e.png 400w" data-sizes="(max-width: 400px) 100vw, 400px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h2 id="开机检测程序"><a href="#%E5%BC%80%E6%9C%BA%E6%A3%80%E6%B5%8B%E7%A8%8B%E5%BA%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>开机检测程序</h2>\n<h3 id="bios"><a href="#bios" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>BIOS</h3>\n<p>BIOS 是开机的时候计算机执行的第一个程序，这个程序知道可以开机的磁盘，并读取磁盘第一个扇区的 MBR，由 MBR 执行其中的开机管理程序，这个开机管理程序会加载操作系统的核心文件。</p>\n<p>MBR 中的开机管理程序提供以下功能：选单、载入核心文件以及转交其它开机管理程序。转交这个功能可以用来实现了多重引导，只需要将另一个操作系统的开机管理程序安装在其它分区的启动扇区上，在启动 MBR 中的开机管理程序时，就可以选择启动当前的操作系统或者转交给其它开机管理程序从而启动另一个操作系统。</p>\n<p>安装多重引导，最好先安装 Windows 再安装 Linux。因为安装 Windows 时会覆盖掉 MBR，而 Linux 可以选择将开机管理程序安装在 MBR 或者其它分区的启动扇区，并且可以设置开机管理程序的选单。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/f900f266-a323-42b2-bc43-218fdb8811a8-0812cc1a9b1537e5b086423318bee80f-6953a.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 642px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 60.74766355140188%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAe5ZTQP/xAAVEAEBAAAAAAAAAAAAAAAAAAAQAv/aAAgBAQABBQJp/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFBABAAAAAAAAAAAAAAAAAAAAIP/aAAgBAQAGPwJf/8QAHBAAAgEFAQAAAAAAAAAAAAAAAAEhEBExUWGR/9oACAEBAAE/IXDej0QnWWnLp//aAAwDAQACAAMAAAAQwM//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAdEAACAgIDAQAAAAAAAAAAAAABIQARQXEQMVGh/9oACAEBAAE/EGFlLPfyCmaAr2ZbhLBAMIxdDPH/2Q==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="f900f266 a323 42b2 bc43 218fdb8811a8" title="" data-src="/static/f900f266-a323-42b2-bc43-218fdb8811a8-0812cc1a9b1537e5b086423318bee80f-6953a.jpg" data-srcset="/static/f900f266-a323-42b2-bc43-218fdb8811a8-0812cc1a9b1537e5b086423318bee80f-e852a.jpg 200w,\n/static/f900f266-a323-42b2-bc43-218fdb8811a8-0812cc1a9b1537e5b086423318bee80f-f7f98.jpg 400w,\n/static/f900f266-a323-42b2-bc43-218fdb8811a8-0812cc1a9b1537e5b086423318bee80f-6953a.jpg 642w" data-sizes="(max-width: 642px) 100vw, 642px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h3 id="uefi"><a href="#uefi" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>UEFI</h3>\n<p>UEFI 相比于 BIOS 来说功能更为全面，也更为安全。</p>\n<h2 id="挂载"><a href="#%E6%8C%82%E8%BD%BD" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>挂载</h2>\n<p>挂载利用目录作为分区的进入点，也就是说，进入目录之后就可以读取分区的数据。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/249f3bb1-feee-4805-a259-a72699d638ca-4edd15f99ed86848980ad29c0582b8fd-32829.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 683px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 46.559297218155194%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIDBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHbWsksKL//xAAWEAEBAQAAAAAAAAAAAAAAAAAAASD/2gAIAQEAAQUCTEf/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAVEAEBAAAAAAAAAAAAAAAAAAABIP/aAAgBAQAGPwJr/8QAGRAAAwEBAQAAAAAAAAAAAAAAAAERITFR/9oACAEBAAE/IcqJu2sbROno+o4P/9oADAMBAAIAAwAAABC8z//EABURAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAEDAQE/EGf/xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAgEBPxAn/8QAHRAAAgIBBQAAAAAAAAAAAAAAAAERITFBUXGhsf/aAAgBAQABPxBQXiQHi9iGzabdUJSV4ajuGbk//9k=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="249f3bb1 feee 4805 a259 a72699d638ca" title="" data-src="/static/249f3bb1-feee-4805-a259-a72699d638ca-4edd15f99ed86848980ad29c0582b8fd-32829.jpg" data-srcset="/static/249f3bb1-feee-4805-a259-a72699d638ca-4edd15f99ed86848980ad29c0582b8fd-f352d.jpg 200w,\n/static/249f3bb1-feee-4805-a259-a72699d638ca-4edd15f99ed86848980ad29c0582b8fd-0ba2d.jpg 400w,\n/static/249f3bb1-feee-4805-a259-a72699d638ca-4edd15f99ed86848980ad29c0582b8fd-32829.jpg 683w" data-sizes="(max-width: 683px) 100vw, 683px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h1 id="文件"><a href="#%E6%96%87%E4%BB%B6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>文件</h1>\n<h2 id="文件权限概念"><a href="#%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90%E6%A6%82%E5%BF%B5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>文件权限概念</h2>\n<p>把用户分为三种：文件拥有者、群组以及其它人，对不同的用户有不同的文件权限。</p>\n<p>使用 ls 查看一个文件时，会显示一个文件的信息，例如 <code class="language-text">drwxr-xr-x. 3 root root 17 May 6 00:14 .config</code>，对这个信息的解释如下：</p>\n<ul>\n<li>drwxr-xr-x：文件类型以及权限，第 1 位为文件类型字段，后 9 位为文件权限字段。</li>\n<li>3：链接数；</li>\n<li>root：文件拥有者；</li>\n<li>root：所属群组；</li>\n<li>17：文件大小；</li>\n<li>May 6 00:14：文件最后被修改的时间；</li>\n<li>.config：文件名。</li>\n</ul>\n<p>常见的文件类型及其含义有：</p>\n<ul>\n<li>d：目录；</li>\n<li>-：文件；</li>\n<li>l：链接文件；</li>\n</ul>\n<p>9 位的文件权限字段中，每 3 个为一组，共 3 组，每一组分别代表对文件拥有者、所属群组以及其它人的文件权限。一组权限中的 3 位分别为 r、w、x 权限，表示可读、可写、可执行。</p>\n<h2 id="文件属性以及权限的修改"><a href="#%E6%96%87%E4%BB%B6%E5%B1%9E%E6%80%A7%E4%BB%A5%E5%8F%8A%E6%9D%83%E9%99%90%E7%9A%84%E4%BF%AE%E6%94%B9" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>文件属性以及权限的修改</h2>\n<h3 id="修改文件所属群组"><a href="#%E4%BF%AE%E6%94%B9%E6%96%87%E4%BB%B6%E6%89%80%E5%B1%9E%E7%BE%A4%E7%BB%84" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>修改文件所属群组</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="62454339865520490000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`# chgrp [-R] groupname dirname/filename\n-R：递归修改`, `62454339865520490000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token comment"># chgrp [-R] groupname dirname/filename</span>\n-R：递归修改</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<h3 id="修改文件拥有者"><a href="#%E4%BF%AE%E6%94%B9%E6%96%87%E4%BB%B6%E6%8B%A5%E6%9C%89%E8%80%85" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>修改文件拥有者</h3>\n<p>不仅可以修改文件拥有者，也可以修改文件所属群组。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="43926722503805960000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`# chown [-R] 用户名:群组名 dirname/filename`, `43926722503805960000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token comment"># chown [-R] 用户名:群组名 dirname/filename</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<h3 id="修改权限"><a href="#%E4%BF%AE%E6%94%B9%E6%9D%83%E9%99%90" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>修改权限</h3>\n<p>可以将一组权限用数字来表示，此时一组权限的 3 个位当做二进制数字的位，从左到右每个位的权值为 4、2、1，即每个权限对应的数字权值为 r : 4、w : 2、x : 1。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="67103947977596290000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`# chmod [-R] xyz dirname/filename`, `67103947977596290000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token comment"># chmod [-R] xyz dirname/filename</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>范例：将 .bashrc 文件的权限修改为 -rwxr-xr—。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="66615145974364460000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`# chmod 754 .bashrc`, `66615145974364460000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token comment"># chmod 754 .bashrc</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>也可以使用符号来设定权限。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="82239605933659730000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`# chmod [ugoa] [+-=] [rwx] dirname/filename\n- u：拥有者\n- g：所属群组\n- o：其他人\n- a：所有人\n- +：添加权限\n- -：移除权限\n- =：设定权限`, `82239605933659730000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token comment"># chmod [ugoa] [+-=] [rwx] dirname/filename</span>\n- u：拥有者\n- g：所属群组\n- o：其他人\n- a：所有人\n- +：添加权限\n- -：移除权限\n- <span class="token operator">=</span>：设定权限</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>范例：为 .bashrc 文件的所有用户添加写权限。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="49006771723943035000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`# chmod a+w .bashrc`, `49006771723943035000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token comment"># chmod a+w .bashrc</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<h2 id="目录的权限"><a href="#%E7%9B%AE%E5%BD%95%E7%9A%84%E6%9D%83%E9%99%90" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>目录的权限</h2>\n<p>文件名不是存储在一个文件的内容中，而是存储在一个文件所在的目录中。因此，拥有文件的 w 权限并不能对文件名进行修改。</p>\n<p>目录存储文件列表，一个目录的权限也就是对其文件列表的权限。因此，目录的 r 权限表示可以读取文件列表；w 权限表示可以修改文件列表，具体来说，就是添加删除文件，对文件名进行修改；x 权限可以让该目录成为工作目录，x 权限是 r 和 w 权限的基础，如果不能使一个目录成为工作目录，也就没办法读取文件列表以及对文件列表进行修改了。</p>\n<h2 id="文件默认权限"><a href="#%E6%96%87%E4%BB%B6%E9%BB%98%E8%AE%A4%E6%9D%83%E9%99%90" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>文件默认权限</h2>\n<ul>\n<li>文件默认权限：文件默认没有可执行权限，因此为 666，也就是 -rw-rw-rw- 。</li>\n<li>目录默认权限：目录必须要能够进入，也就是必须拥有可执行权限，因此为 777 ，也就是 drwxrwxrwx。</li>\n</ul>\n<p>可以通过 umask 设置或者查看文件的默认权限，通常以掩码的形式来表示，例如 002 表示其它用户的权限去除了一个 2 的权限，也就是写权限，因此建立新文件时默认的权限为 -rw-rw-r— 。</p>\n<h2 id="目录配置"><a href="#%E7%9B%AE%E5%BD%95%E9%85%8D%E7%BD%AE" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>目录配置</h2>\n<p>为了使不同 Linux 发行版本的目录结构保持一致性，Filesystem Hierarchy Standard (FHS) 规定了 Linux 的目录结构。最基础的三个目录如下：</p>\n<ul>\n<li>/ (root, 根目录)</li>\n<li>/usr (unix software resource)：所有系统默认软件都会安装到这个目录；</li>\n<li>/var (variable)：存放系统或程序运行过程中的数据文件。</li>\n</ul>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/linux-filesystem-29d0ce610917ca03787604ee51f0169e-c319d.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 660px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 47.42424242424243%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAACQElEQVQoz2PYcOAc4////xkZgABIM0FpRhj73L7Vlo/O7bh468SWfqgcA7J6EB8Ebr//zyQjp8CADLigNDuUBhnICsSM+SmR6kCaGyrGgqYeBDjgrIUb9npPX7qxwtnTT2LRxn3TMwqr9Oet2ZnSP2d5eGVrn9X8dbvzlPStxeav3zulffI8156ZSyxmLNtUbuPoKg5UP2Xq4vUhBVXNRkBz2hzcvFkYlmw+YDFn9fbohMxCuRXbj+ZmFddoL1i/x3vywrVuLRNnmyzdcjAoOCpefvGm/fntU+ZbT120zmjJloPh0SnZssu2HcqZvGCNU3Ftu/aybYeTbBzdIK6fvnSD/IL1u2eD2EADZgNtcwDyw4Hs7qrWfgGgYXNAcku2HEgBuqqysXeaxsL1exaAxTYfcAH6ogvu5Y0HL4EM5JqxbINU/5wVLEDNCmv3nhBauH6H0OrdRySmLV7N3T9nmapPcBh3ZlGFXFpBuVJ8Ro5o/5ylcqDIyS2vl+mdtUTp1b//TG//v2JkmLliE9zwqAR/BqQIYQZiNmiA8wGxIAMqYIJGIBuUzwKXaZs8h2HemhXgpLBqxwrelduWLF6xdUk/kN68dOOCng371vQv2bigbvWOZQ2FlXn8y7cs3jhv9azyZZsX9S7eMD9n6aaFSxatm1cF5E+AGwoUBNOT5/Uzbz28QX3trhXKO49v0V61fanStqMbldfsXC6//egm+aTMeNa1u1caLd+ySHHVjmUai9bPkwfSess2L1QG6tEAAMIsEdUYMclCAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="linux filesystem" title="" data-src="/static/linux-filesystem-29d0ce610917ca03787604ee51f0169e-c319d.png" data-srcset="/static/linux-filesystem-29d0ce610917ca03787604ee51f0169e-19de3.png 200w,\n/static/linux-filesystem-29d0ce610917ca03787604ee51f0169e-3e86e.png 400w,\n/static/linux-filesystem-29d0ce610917ca03787604ee51f0169e-c319d.png 660w" data-sizes="(max-width: 660px) 100vw, 660px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h2 id="文件时间"><a href="#%E6%96%87%E4%BB%B6%E6%97%B6%E9%97%B4" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>文件时间</h2>\n<ol>\n<li>modification time (mtime)：文件的内容更新就会更新；</li>\n<li>status time (ctime)：文件的状态（权限、属性）更新就会更新；</li>\n<li>access time (atime)：读取文件时就会更新。</li>\n</ol>\n<h2 id="文件与目录的基本操作"><a href="#%E6%96%87%E4%BB%B6%E4%B8%8E%E7%9B%AE%E5%BD%95%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>文件与目录的基本操作</h2>\n<h3 id="ls"><a href="#ls" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ls</h3>\n<p>列出文件或者目录的信息，目录的信息就是其中包含的文件。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="41686657099686490000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`# ls [-aAdfFhilnrRSt] file|dir\n-a：列出全部的文件\n-d：仅列出目录本身\n-l：以长数据串行列出，包含文件的属性与权限等等数据`, `41686657099686490000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token comment"># ls [-aAdfFhilnrRSt] file|dir</span>\n-a：列出全部的文件\n-d：仅列出目录本身\n-l：以长数据串行列出，包含文件的属性与权限等等数据</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="cp"><a href="#cp" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>cp</h3>\n<p>复制操作。</p>\n<p>如果源文件有两个以上，则目的文件一定要是目录才行。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="94700454432144720000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`# cp [-adfilprsu] source destination\n-a：相当于 -dr --preserve=all 的意思，至于 dr 请参考下列说明\n-d：若来源文件为链接文件，则复制链接文件属性而非文件本身\n-i：若目标文件已经存在时，在覆盖前会先询问\n-p：连同文件的属性一起复制过去\n-r：递归持续复制\n-u：destination 比 source 旧才更新 destination，或 destination 不存在的情况下才复制\n--preserve=all：除了 -p 的权限相关参数外，还加入 SELinux 的属性, links, xattr 等也复制了`, `94700454432144720000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token comment"># cp [-adfilprsu] source destination</span>\n-a：相当于 -dr --preserve<span class="token operator">=</span>all 的意思，至于 dr 请参考下列说明\n-d：若来源文件为链接文件，则复制链接文件属性而非文件本身\n-i：若目标文件已经存在时，在覆盖前会先询问\n-p：连同文件的属性一起复制过去\n-r：递归持续复制\n-u：destination 比 <span class="token builtin class-name">source</span> 旧才更新 destination，或 destination 不存在的情况下才复制\n--preserve<span class="token operator">=</span>all：除了 -p 的权限相关参数外，还加入 SELinux 的属性, links, xattr 等也复制了</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="rm"><a href="#rm" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>rm</h3>\n<p>移除操作。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="29097756684824840000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`# rm [-fir] 文件或目录\n-r ：递归删除`, `29097756684824840000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token comment"># rm [-fir] 文件或目录</span>\n-r ：递归删除</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<h3 id="mv"><a href="#mv" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>mv</h3>\n<p>移动操作。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="70100466508507780000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`# mv [-fiu] source destination\n# mv [options] source1 source2 source3 .... directory\n-f：force 强制的意思，如果目标文件已经存在，不会询问而直接覆盖`, `70100466508507780000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token comment"># mv [-fiu] source destination</span>\n<span class="token comment"># mv [options] source1 source2 source3 .... directory</span>\n-f：force 强制的意思，如果目标文件已经存在，不会询问而直接覆盖</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<h2 id="获取文件内容"><a href="#%E8%8E%B7%E5%8F%96%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>获取文件内容</h2>\n<h3 id="cat"><a href="#cat" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>cat</h3>\n<p>取得文件内容。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="45242715886530240000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`# cat [-AbEnTv] filename\n-n：打印出行号，连同空白行也会有行号，-b 不会`, `45242715886530240000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token comment"># cat [-AbEnTv] filename</span>\n-n：打印出行号，连同空白行也会有行号，-b 不会</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<h3 id="tac"><a href="#tac" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>tac</h3>\n<p>是 cat 的反向操作，从最后一行开始打印。</p>\n<h3 id="more"><a href="#more" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>more</h3>\n<p>可以一页一页查看文件内容，和文本编辑器类似。</p>\n<h3 id="less"><a href="#less" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>less</h3>\n<p>和 more 类似。</p>\n<h3 id="head"><a href="#head" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>head</h3>\n<p>可以取得文件前几行。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="990912071559990700"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`# head [-n number] filename\n-n：后面接数字，代表显示几行的意思`, `990912071559990700`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token comment"># head [-n number] filename</span>\n-n：后面接数字，代表显示几行的意思</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<h3 id="tail"><a href="#tail" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>tail</h3>\n<p>是 head 的反向操作，只是取得是后几行。</p>\n<h3 id="od"><a href="#od" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>od</h3>\n<p>可以以字符或者十六进制的形式显示二进制文件。</p>\n<h3 id="touch"><a href="#touch" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>touch</h3>\n<p>修改文件时间或者建立新文件。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="66730939064532754000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`# touch [-acdmt] filename\n-a：更新 atime\n-c：更新 ctime，若该文件不存在则不建立新文件\n-m：更新 mtime\n-d：后面可以接更新日期而不使用当前日期，也可以使用 --date=&quot;日期或时间&quot;\n-t：后面可以接更新时间而不使用当前时间，格式为[YYYYMMDDhhmm]`, `66730939064532754000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token comment"># touch [-acdmt] filename</span>\n-a：更新 atime\n-c：更新 ctime，若该文件不存在则不建立新文件\n-m：更新 mtime\n-d：后面可以接更新日期而不使用当前日期，也可以使用 --date<span class="token operator">=</span><span class="token string">"日期或时间"</span>\n-t：后面可以接更新时间而不使用当前时间，格式为<span class="token punctuation">[</span>YYYYMMDDhhmm<span class="token punctuation">]</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="指令与文件搜索"><a href="#%E6%8C%87%E4%BB%A4%E4%B8%8E%E6%96%87%E4%BB%B6%E6%90%9C%E7%B4%A2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>指令与文件搜索</h2>\n<h3 id="which"><a href="#which" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>which</h3>\n<p>指令搜索。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="87021369287009300000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`# which [-a] command\n-a：将所有指令列出，而不是只列第一个`, `87021369287009300000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token comment"># which [-a] command</span>\n-a：将所有指令列出，而不是只列第一个</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<h3 id="whereis"><a href="#whereis" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>whereis</h3>\n<p>whereis 搜索文件的速度比较快，因为它只搜索几个特定的目录。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="46160235870326050000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`# whereis [-bmsu] dirname/filename`, `46160235870326050000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token comment"># whereis [-bmsu] dirname/filename</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<h3 id="locate"><a href="#locate" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>locate</h3>\n<p>locate 可以用关键字或者正则表达式进行搜索。</p>\n<p>locate 使用 /var/lib/mlocate/ 这个数据库来进行搜索，它存储在内存中，并且每天更新一次，所以无法用 locate 搜索新建的文件。可以使用 updatedb 来立即更新数据库。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="84236022801685540000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`# locate [-ir] keyword\n-r：接正则表达式`, `84236022801685540000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token comment"># locate [-ir] keyword</span>\n-r：接正则表达式</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<h3 id="find"><a href="#find" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>find</h3>\n<p>find 可以使用文件的属性和权限进行搜索。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="81482093347388390000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`# find filename [option]`, `81482093347388390000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token comment"># find filename [option]</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<h4 id="与时间有关的选项"><a href="#%E4%B8%8E%E6%97%B6%E9%97%B4%E6%9C%89%E5%85%B3%E7%9A%84%E9%80%89%E9%A1%B9" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>与时间有关的选项</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="71858456579092685000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`-mtime n：列出在 n 天前的那一天修改过内容的文件\n-mtime +n：列出在 n 天之前 (不含 n 天本身) 修改过内容的文件\n-mtime -n：列出在 n 天之内 (含 n 天本身) 修改过内容的文件\n-newer file：列出比 file 更新的文件`, `71858456579092685000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">-mtime n：列出在 n 天前的那一天修改过内容的文件\n-mtime +n：列出在 n 天之前 <span class="token punctuation">(</span>不含 n 天本身<span class="token punctuation">)</span> 修改过内容的文件\n-mtime -n：列出在 n 天之内 <span class="token punctuation">(</span>含 n 天本身<span class="token punctuation">)</span> 修改过内容的文件\n-newer file：列出比 <span class="token function">file</span> 更新的文件</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>+4、4 和 -4 的指示的时间范围如下：</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/658fc5e7-79c0-4247-9445-d69bf194c539-066d24446e9c02dcb0c97e29633b0c09-6a7be.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 524px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 30.91603053435114%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsSAAALEgHS3X78AAAApElEQVQY032PyQqDMBRF/f9fc+9WFAMRY0sGTTUae4hDEdqeRciL7w5m2w+GYTDGbH/Jvr6GENq2LctyHEfu8wl3HJdlOcQxRufcNE3zHTastX3fPxOPhNa6KArv/SFGlue5lFIpVde1EKJpGsaqql4J+q/ryokjMsI/4r2hT3RdRwhpVyYvGFGVHZJVgnyUVL79Mwm0JYEPmDKGxDWygxF2+/4bRoxbFDB84cAAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="658fc5e7 79c0 4247 9445 d69bf194c539" title="" data-src="/static/658fc5e7-79c0-4247-9445-d69bf194c539-066d24446e9c02dcb0c97e29633b0c09-6a7be.png" data-srcset="/static/658fc5e7-79c0-4247-9445-d69bf194c539-066d24446e9c02dcb0c97e29633b0c09-88dc0.png 200w,\n/static/658fc5e7-79c0-4247-9445-d69bf194c539-066d24446e9c02dcb0c97e29633b0c09-98f22.png 400w,\n/static/658fc5e7-79c0-4247-9445-d69bf194c539-066d24446e9c02dcb0c97e29633b0c09-6a7be.png 524w" data-sizes="(max-width: 524px) 100vw, 524px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h4 id="与文件拥有者和所属群组有关的选项"><a href="#%E4%B8%8E%E6%96%87%E4%BB%B6%E6%8B%A5%E6%9C%89%E8%80%85%E5%92%8C%E6%89%80%E5%B1%9E%E7%BE%A4%E7%BB%84%E6%9C%89%E5%85%B3%E7%9A%84%E9%80%89%E9%A1%B9" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>与文件拥有者和所属群组有关的选项</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="97426895364616680000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`-uid n\n-gid n\n-user name\n-group name\n-nouser：搜索拥有者不存在 /etc/passwd 的文件\n-nogroup：搜索所属群组不存在于 /etc/group 的文件`, `97426895364616680000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">-uid n\n-gid n\n-user name\n-group name\n-nouser：搜索拥有者不存在 /etc/passwd 的文件\n-nogroup：搜索所属群组不存在于 /etc/group 的文件</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="与文件权限和名称有关的选项"><a href="#%E4%B8%8E%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90%E5%92%8C%E5%90%8D%E7%A7%B0%E6%9C%89%E5%85%B3%E7%9A%84%E9%80%89%E9%A1%B9" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>与文件权限和名称有关的选项</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="4934683170431886000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`-name filename\n-size [+-]SIZE：搜寻比 SIZE 还要大 (+) 或小 (-) 的文件。这个 SIZE 的规格有：c: 代表 byte，k: 代表\n1024bytes。所以，要找比 50KB 还要大的文件，就是 -size +50k -type TYPE\n-perm mode：搜索权限等于 mode 的文件\n-perm -mode：搜索权限包含 mode 的文件\n-perm /mode：搜索权限包含任一 mode 的文件`, `4934683170431886000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">-name filename\n-size <span class="token punctuation">[</span>+-<span class="token punctuation">]</span>SIZE：搜寻比 SIZE 还要大 <span class="token punctuation">(</span>+<span class="token punctuation">)</span> 或小 <span class="token punctuation">(</span>-<span class="token punctuation">)</span> 的文件。这个 SIZE 的规格有：c: 代表 byte，k: 代表\n1024bytes。所以，要找比 50KB 还要大的文件，就是 -size +50k -type TYPE\n-perm mode：搜索权限等于 mode 的文件\n-perm -mode：搜索权限包含 mode 的文件\n-perm /mode：搜索权限包含任一 mode 的文件</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h1 id="磁盘与文件系统"><a href="#%E7%A3%81%E7%9B%98%E4%B8%8E%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>磁盘与文件系统</h1>\n<h2 id="文件系统的组成"><a href="#%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%9A%84%E7%BB%84%E6%88%90" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>文件系统的组成</h2>\n<p>对分区进行格式化是为了在分区上建立文件系统。一个分区通常只能格式化为一个文件系统，但是磁盘阵列等技术可以将一个分区格式化为多个文件系统，因此只有文件系统能被挂载，而分区不能被挂载。</p>\n<p>文件系统有以下三个结构：</p>\n<ol>\n<li>superblock：记录文件系统的整体信息，包括 inode 和 block 的总量、使用量、剩余量，以及文件系统的格式与相关信息等；</li>\n<li>inode：一个文件占用一个 inode，记录文件的属性，同时记录此文件的内容所在的 block 号码；</li>\n<li>block：记录文件的内容，文件太大时，会占用多个 block。</li>\n</ol>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/ff0c019c-6461-467d-a266-0455341fd4f4-02068f623f4403097011bcc827f32302-41127.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 21.8052738336714%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsSAAALEgHS3X78AAAA1klEQVQI1yWL0U7CMBSGef+XkBuJaEIIF3KD4ULmMJhQJUEyHWV0ULpCnVvPCpZ2tnBy8uX8/8nXqC+j9V8BivByRXMmwFrryis5xWzzfY2usP6oL5+64c2zURXQfdkZfd30UTjfuiihmicCxZyTyW/6Isl7mUxh7YjkGgH50Efw8iJO9wfBhGwPP5t99DxLa2tYxrtBdDuYsfixWHZI0KLje7fb8G73+pCGba0KL4M6AcjsRz5NSS+I3qLdUVVnY0iWr6jIDxhEXDIsM+zJE+BJwbDRp38S6Njw5lfEWAAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="ff0c019c 6461 467d a266 0455341fd4f4" title="" data-src="/static/ff0c019c-6461-467d-a266-0455341fd4f4-02068f623f4403097011bcc827f32302-fee1c.png" data-srcset="/static/ff0c019c-6461-467d-a266-0455341fd4f4-02068f623f4403097011bcc827f32302-a67b7.png 200w,\n/static/ff0c019c-6461-467d-a266-0455341fd4f4-02068f623f4403097011bcc827f32302-0b187.png 400w,\n/static/ff0c019c-6461-467d-a266-0455341fd4f4-02068f623f4403097011bcc827f32302-fee1c.png 800w,\n/static/ff0c019c-6461-467d-a266-0455341fd4f4-02068f623f4403097011bcc827f32302-41127.png 986w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>当要读取一个文件的内容时，先在 inode 中去查找文件内容所在的所有 block，然后把所有 block 的内容读出来。</p>\n<p>磁盘碎片是指一个文件内容所在的 block 过于分散。</p>\n<h2 id="inode"><a href="#inode" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>inode</h2>\n<p>Ext2 文件系统支持的 block 大小有 1k、2k 和 4k 三种，不同的 block 大小限制了单一文件的大小。而每个 inode 大小是固定为 128 bytes。</p>\n<p>inode 中记录了文件内容所在的 block，但是每个 block 非常小，一个大文件随便都需要几十万的 block。而一个 inode 大小有限，无法直接引用这么多 block。因此引入了间接、双间接、三间接引用。间接引用是指，让 inode 记录的引用 block 块当成 inode 用来记录引用信息。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/1bfa3118-f3cd-4480-a950-cf6d646015db-96a1f8fc213262c384999e0e832d7e19-77bdb.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.336114421930866%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAABw0lEQVQoz32QXW/aMBSG+f9/YrtYp0msZSobF5O2VVs3CTEKpZBQki0uBBJInPj7IzhhLqnYIk19L2zL9nPec97W4SiptCCRJj6Dc439QqT2sipLkQCVApkATpEpS6314R+16o0ySbZjurxcT1/RVZdD116iPAv75+vvZ7ufHZRsong7mUwei1bVE3w8VVxolk7xw/v17A1Z9fBuxrjUStLIY5t7ul4wkpdVZYxpONdluFAWTv3zYPTSrnl8pwqjpICLfja/zv1+IdnhaNqAAQC3t2NChYXhr4vV3Vn2u0MSR2lDMIpvevHgIhn3NEP/gTnneZ4JWVg4C95Z2JaQyDv+LPeSGEH2gpRlo+FGYIwrDh07c+S2Eegq7Nfw4Vn9DYwmE+i/BaMXqdemqVP3Z4oCxistuT2LLCJgSIIBi/16hJOzZHCBw6vQuRTbH4osld4zqyz2Bp9R/KCK/cYbRf12eP3a5lf39QRb/9KYerA0SeZzNwAgjqLN8EM++xgNuzAOK1MovNV4p2necD6VsCvGyOYfhmvOWOp+TaefoPMFwd1u6aH7b5l7RUOn/tx6Jo/qpPIxuTxcbEfdaNDBwU39+gdhEqBlEfxF/AAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="1bfa3118 f3cd 4480 a950 cf6d646015db" title="" data-src="/static/1bfa3118-f3cd-4480-a950-cf6d646015db-96a1f8fc213262c384999e0e832d7e19-fee1c.png" data-srcset="/static/1bfa3118-f3cd-4480-a950-cf6d646015db-96a1f8fc213262c384999e0e832d7e19-a67b7.png 200w,\n/static/1bfa3118-f3cd-4480-a950-cf6d646015db-96a1f8fc213262c384999e0e832d7e19-0b187.png 400w,\n/static/1bfa3118-f3cd-4480-a950-cf6d646015db-96a1f8fc213262c384999e0e832d7e19-fee1c.png 800w,\n/static/1bfa3118-f3cd-4480-a950-cf6d646015db-96a1f8fc213262c384999e0e832d7e19-77bdb.png 839w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>inode 具体包含以下信息：</p>\n<ul>\n<li>该文件的存取模式 (read/write/excute)；</li>\n<li>该文件的拥有者与群组 (owner/group)；</li>\n<li>该文件的容量；</li>\n<li>该文件建立或状态改变的时间 (ctime)；</li>\n<li>最近一次的读取时间 (atime)；</li>\n<li>最近修改的时间 (mtime)；</li>\n<li>定义文件特性的旗标 (flag)，如 SetUID…；</li>\n<li>该文件真正内容的指向 (pointer)。</li>\n</ul>\n<h2 id="目录的-inode-与-block"><a href="#%E7%9B%AE%E5%BD%95%E7%9A%84-inode-%E4%B8%8E-block" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>目录的 inode 与 block</h2>\n<p>建立一个目录时，会分配一个 inode 与至少一个 block。block 记录的内容是目录下所有文件的 inode 编号以及文件名。可以看出文件的 inode 本身不记录文件名，文件名记录在目录中，因此新增文件、删除文件、更改文件名这些操作与目录的 w 权限有关。</p>\n<h2 id="实体链接与符号链接"><a href="#%E5%AE%9E%E4%BD%93%E9%93%BE%E6%8E%A5%E4%B8%8E%E7%AC%A6%E5%8F%B7%E9%93%BE%E6%8E%A5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>实体链接与符号链接</h2>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="61816970130822324000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`# ln [-sf] source_filename dist_filename\n-s：默认是 hard link，加 -s 为 symbolic link\n-f：如果目标文件存在时，先删除目标文件`, `61816970130822324000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token comment"># ln [-sf] source_filename dist_filename</span>\n-s：默认是 hard link，加 -s 为 symbolic <span class="token function">link</span>\n-f：如果目标文件存在时，先删除目标文件</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<h3 id="实体链接"><a href="#%E5%AE%9E%E4%BD%93%E9%93%BE%E6%8E%A5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>实体链接</h3>\n<p>它和普通文件类似，实体链接文件的 inode 都指向源文件所在的 block 上，也就是说读取文件直接从源文件的 block 上读取。</p>\n<p>删除任意一个条目，文件还是存在，只要引用数量不为 0。</p>\n<p>有以下限制：不能跨越 File System、不能对目录进行链接。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="82607039182559200000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`# ln /etc/crontab .\n# ll -i /etc/crontab crontab\n34474855 -rw-r--r--. 2 root root 451 Jun 10 2014 crontab\n34474855 -rw-r--r--. 2 root root 451 Jun 10 2014 /etc/crontab`, `82607039182559200000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token comment"># ln /etc/crontab .</span>\n<span class="token comment"># ll -i /etc/crontab crontab</span>\n<span class="token number">34474855</span> -rw-r--r--. <span class="token number">2</span> root root <span class="token number">451</span> Jun <span class="token number">10</span> <span class="token number">2014</span> <span class="token function">crontab</span>\n<span class="token number">34474855</span> -rw-r--r--. <span class="token number">2</span> root root <span class="token number">451</span> Jun <span class="token number">10</span> <span class="token number">2014</span> /etc/crontab</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="符号链接"><a href="#%E7%AC%A6%E5%8F%B7%E9%93%BE%E6%8E%A5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>符号链接</h3>\n<p>符号链接文件保存着源文件所在的绝对路径，在读取时会定位到源文件上，可以理解为 Windows 的快捷方式。</p>\n<p>当源文件被删除了，链接文件就打不开了。</p>\n<p>可以为目录建立链接。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="69275313548020015000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`# ll -i /etc/crontab /root/crontab2\n34474855 -rw-r--r--. 2 root root 451 Jun 10 2014 /etc/crontab 53745909 lrwxrwxrwx. 1 root root 12 Jun 23 22:31 /root/crontab2 -> /etc/crontab`, `69275313548020015000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token comment"># ll -i /etc/crontab /root/crontab2</span>\n<span class="token number">34474855</span> -rw-r--r--. <span class="token number">2</span> root root <span class="token number">451</span> Jun <span class="token number">10</span> <span class="token number">2014</span> /etc/crontab <span class="token number">53745909</span> lrwxrwxrwx. <span class="token number">1</span> root root <span class="token number">12</span> Jun <span class="token number">23</span> <span class="token number">22</span>:31 /root/crontab2 -<span class="token operator">></span> /etc/crontab</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<h1 id="压缩与打包"><a href="#%E5%8E%8B%E7%BC%A9%E4%B8%8E%E6%89%93%E5%8C%85" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>压缩与打包</h1>\n<h2 id="压缩"><a href="#%E5%8E%8B%E7%BC%A9" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>压缩</h2>\n<p>Linux 底下有很多压缩文件的扩展名，常见的如下：</p>\n<table>\n<thead>\n<tr>\n<th>扩展名</th>\n<th>压缩程序</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>*\n.Z</td>\n<td>compress</td>\n</tr>\n<tr>\n<td>*\n.zip</td>\n<td>zip</td>\n</tr>\n<tr>\n<td>*\n.gz</td>\n<td>gzip</td>\n</tr>\n<tr>\n<td>*\n.bz2</td>\n<td>bzip2</td>\n</tr>\n<tr>\n<td>*\n.xz</td>\n<td>xz</td>\n</tr>\n<tr>\n<td>*\n.tar</td>\n<td>tar 程序打包的数据，没有经过压缩</td>\n</tr>\n<tr>\n<td>*\n.tar.gz</td>\n<td>tar 程序打包的文件，经过 gzip 的压缩</td>\n</tr>\n<tr>\n<td>*\n.tar.bz2</td>\n<td>tar 程序打包的文件，经过 bzip2 的压缩</td>\n</tr>\n<tr>\n<td>*\n.tar.xz</td>\n<td>tar 程序打包的文件，经过 xz 的压缩</td>\n</tr>\n</tbody>\n</table>\n<h3 id="gzip"><a href="#gzip" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>gzip</h3>\n<p>gzip 是 Linux 使用最广的压缩指令，可以解开 compress、zip 与 gzip 所压缩的文件。</p>\n<p>经过 gzip 压缩过，源文件就不存在了。</p>\n<p>有 9 个不同的压缩等级可以使用。</p>\n<p>可以使用 zcat、zmore、zless 来读取压缩文件的内容。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="40701298745757430000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`\\$ gzip [-cdtv#] filename\n-c：将压缩的数据输出到屏幕上\n-d：解压缩\n-t：检验压缩文件是否出错\n-v：显示压缩比等信息\n-#：# 为数字的意思，代表压缩等级，数字越大压缩比越高，默认为 6`, `40701298745757430000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">$ <span class="token function">gzip</span> <span class="token punctuation">[</span>-cdtv<span class="token comment">#] filename</span>\n-c：将压缩的数据输出到屏幕上\n-d：解压缩\n-t：检验压缩文件是否出错\n-v：显示压缩比等信息\n-<span class="token comment">#：# 为数字的意思，代表压缩等级，数字越大压缩比越高，默认为 6</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="bzip2"><a href="#bzip2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>bzip2</h3>\n<p>提供比 gzip 更高的压缩比。</p>\n<p>查看命令：bzcat、bzmore、bzless、bzgrep。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="62673415947824630000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`\\$ bzip2 [-cdkzv#] filename\n-k：保留源文件`, `62673415947824630000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">$ <span class="token function">bzip2</span> <span class="token punctuation">[</span>-cdkzv<span class="token comment">#] filename</span>\n-k：保留源文件</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<h3 id="xz"><a href="#xz" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>xz</h3>\n<p>提供比 bzip2 更佳的压缩比。</p>\n<p>可以看到，gzip、bzip2、xz 的压缩比不断优化。不过要注意的是，压缩比越高，压缩的时间也越长。</p>\n<p>查看命令：xzcat、xzmore、xzless、xzgrep。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="86129299934127690000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`\\$ xz [-dtlkc#] filename`, `86129299934127690000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">$ xz <span class="token punctuation">[</span>-dtlkc<span class="token comment">#] filename</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<h2 id="打包"><a href="#%E6%89%93%E5%8C%85" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>打包</h2>\n<p>压缩指令只能对一个文件进行压缩，而打包能够将多个文件打包成一个大文件。tar 不仅可以用于打包，也可以使用 gip、bzip2、xz 将打包文件进行压缩。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="64397580655178020000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`\\$ tar [-z|-j|-J] [cv] [-f 新建的 tar 文件] filename... ==打包压缩\n\\$ tar [-z|-j|-J] [tv] [-f 已有的 tar 文件] ==查看\n\\$ tar [-z|-j|-J] [xv] [-f 已有的 tar 文件] [-C 目录] ==解压缩\n-z：使用 zip；\n-j：使用 bzip2；\n-J：使用 xz；\n-c：新建打包文件；\n-t：查看打包文件里面有哪些文件；\n-x：解打包或解压缩的功能；\n-v：在压缩/解压缩的过程中，显示正在处理的文件名；\n-f: filename：要处理的文件；\n-C 目录：在特定目录解压缩。`, `64397580655178020000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">$ <span class="token function">tar</span> <span class="token punctuation">[</span>-z<span class="token operator">|</span>-j<span class="token operator">|</span>-J<span class="token punctuation">]</span> <span class="token punctuation">[</span>cv<span class="token punctuation">]</span> <span class="token punctuation">[</span>-f 新建的 <span class="token function">tar</span> 文件<span class="token punctuation">]</span> filename<span class="token punctuation">..</span>. <span class="token operator">==</span>打包压缩\n$ <span class="token function">tar</span> <span class="token punctuation">[</span>-z<span class="token operator">|</span>-j<span class="token operator">|</span>-J<span class="token punctuation">]</span> <span class="token punctuation">[</span>tv<span class="token punctuation">]</span> <span class="token punctuation">[</span>-f 已有的 <span class="token function">tar</span> 文件<span class="token punctuation">]</span> <span class="token operator">==</span>查看\n$ <span class="token function">tar</span> <span class="token punctuation">[</span>-z<span class="token operator">|</span>-j<span class="token operator">|</span>-J<span class="token punctuation">]</span> <span class="token punctuation">[</span>xv<span class="token punctuation">]</span> <span class="token punctuation">[</span>-f 已有的 <span class="token function">tar</span> 文件<span class="token punctuation">]</span> <span class="token punctuation">[</span>-C 目录<span class="token punctuation">]</span> <span class="token operator">==</span>解压缩\n-z：使用 zip；\n-j：使用 bzip2；\n-J：使用 xz；\n-c：新建打包文件；\n-t：查看打包文件里面有哪些文件；\n-x：解打包或解压缩的功能；\n-v：在压缩/解压缩的过程中，显示正在处理的文件名；\n-f: filename：要处理的文件；\n-C 目录：在特定目录解压缩。</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<table>\n<thead>\n<tr>\n<th>使用方式</th>\n<th>命令</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>打包压缩</td>\n<td>tar -jcv -f filename.tar.bz2 要被压缩的文件或目录名称</td>\n</tr>\n<tr>\n<td>查看</td>\n<td>tar -jtv -f filename.tar.bz2</td>\n</tr>\n<tr>\n<td>解压缩</td>\n<td>tar -jxv -f filename.tar.bz2 -C 要解压缩的目录</td>\n</tr>\n</tbody>\n</table>\n<h1 id="bash"><a href="#bash" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Bash</h1>\n<p>可以通过 Shell 请求内核提供服务，Bash 正是 Shell 的一种。</p>\n<h2 id="特性"><a href="#%E7%89%B9%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>特性</h2>\n<ol>\n<li>\n<p>命令历史：记录使用过的命令。本次登录所执行的命令都会暂时存放到内存中，~/.bash_history 文件中记录的是前一次登录所执行过的命令。</p>\n</li>\n<li>\n<p>命令与文件补全：快捷键：tab。</p>\n</li>\n<li>\n<p>命名别名：例如 lm 是 ls -al 的别名。</p>\n</li>\n<li>\n<p>shell scripts。</p>\n</li>\n<li>\n<p>通配符：例如 ls -l /usr/bin/X* 列出 /usr/bin 下面所有以 X 开头的文件。</p>\n</li>\n</ol>\n<h2 id="变量操作"><a href="#%E5%8F%98%E9%87%8F%E6%93%8D%E4%BD%9C" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>变量操作</h2>\n<ul>\n<li>对一个变量赋值直接使用 = ；</li>\n<li>对变量取用需要在变量前加上 $ ，也可以用 ${} 的形式；</li>\n<li>输出变量使用 echo 命令。</li>\n</ul>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="89600299472393570000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`\\$ var=abc\n\\$ echo \\$var\n\\$ echo \\${var}`, `89600299472393570000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">$ <span class="token assign-left variable">var</span><span class="token operator">=</span>abc\n$ <span class="token builtin class-name">echo</span> <span class="token variable">$var</span>\n$ <span class="token builtin class-name">echo</span> <span class="token variable">${var}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>变量内容如果有空格，必须需要使用双引号或者单引号。</p>\n<ul>\n<li>双引号内的特殊字符可以保留原本特性，例如 var=“lang is $LANG”，则 var 的值为 lang is zh_TW.UTF-8；</li>\n<li>单引号内的特殊字符就是特殊字符本身，例如 var=‘lang is $LANG’，则 var 的值为 lang is $LANG。</li>\n</ul>\n<p>可以使用 `指令` 或者 $(指令) 的方式将指令的执行结果赋值给变量。例如 version=$(uname -r)，则 version 的值为 3.10.0-229.el7.x86_64。</p>\n<p>可以使用 export 命令将自定义变量转成环境变量，环境变量可以在子程序中使用，所谓子程序就是由当前 Bash 而产生的子 Bash。</p>\n<p>Bash 的变量可以声明为数组和整数数字。注意数字类型没有浮点数。如果不进行声明，默认是字符串类型。变量的声明使用 declare 命令：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="87848381604096340000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`\\$ declare [-aixr] variable\n-a：定义为数组类型\n-i：定义为整数类型\n-x：定义为环境变量\n-r：定义为 readonly 类型`, `87848381604096340000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">$ <span class="token builtin class-name">declare</span> <span class="token punctuation">[</span>-aixr<span class="token punctuation">]</span> variable\n-a：定义为数组类型\n-i：定义为整数类型\n-x：定义为环境变量\n-r：定义为 <span class="token builtin class-name">readonly</span> 类型</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>使用 <code class="language-text">[]</code> 来对数组进行索引操作：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="96932148712949170000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`\\$ array[1]=a\n\\$ array[2]=b\n\\$ echo \\${array[1]}`, `96932148712949170000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">$ array<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span>a\n$ array<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">=</span>b\n$ <span class="token builtin class-name">echo</span> <span class="token variable">${array<span class="token punctuation">[</span>1<span class="token punctuation">]</span>}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<h2 id="指令搜索顺序"><a href="#%E6%8C%87%E4%BB%A4%E6%90%9C%E7%B4%A2%E9%A1%BA%E5%BA%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>指令搜索顺序</h2>\n<ol>\n<li>以绝对或相对路径来执行指令，例如 /bin/ls 或者 ./ls ；</li>\n<li>由别名找到该指令来执行；</li>\n<li>由 Bash 内建的指令来执行；</li>\n<li>按 $PATH 变量指定的搜索路径的顺序找到第一个指令来执行。</li>\n</ol>\n<h2 id="数据流重定向"><a href="#%E6%95%B0%E6%8D%AE%E6%B5%81%E9%87%8D%E5%AE%9A%E5%90%91" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>数据流重定向</h2>\n<p>重定向指的是使用文件代替标准输入、标准输出和标准错误输出。</p>\n<table>\n<thead>\n<tr>\n<th align="center">1</th>\n<th align="center">代码</th>\n<th align="center">运算符</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align="center">标准输入 (stdin)</td>\n<td align="center">0</td>\n<td align="center">&#x3C; 或 &#x3C;&#x3C;</td>\n</tr>\n<tr>\n<td align="center">标准输出 (stdout)</td>\n<td align="center">1</td>\n<td align="center">> 或 >></td>\n</tr>\n<tr>\n<td align="center">标准错误输出 (stderr)</td>\n<td align="center">2</td>\n<td align="center">2> 或 2>></td>\n</tr>\n</tbody>\n</table>\n<p>其中，有一个箭头的表示以覆盖的方式重定向，而有两个箭头的表示以追加的方式重定向。</p>\n<p>可以将不需要的标准输出以及标准错误输出重定向到 /dev/null，相当于扔进垃圾箱。</p>\n<p>如果需要将标准输出以及标准错误输出同时重定向到一个文件，需要将某个输出转换为另一个输出，例如 2>&#x26;1 表示将标准错误输出转换为标准输出。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="59305363613500980000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`\\$ find /home -name .bashrc > list 2>&1`, `59305363613500980000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">$ <span class="token function">find</span> /home -name .bashrc <span class="token operator">></span> list <span class="token operator"><span class="token file-descriptor important">2</span>></span><span class="token file-descriptor important">&amp;1</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<h1 id="管线指令"><a href="#%E7%AE%A1%E7%BA%BF%E6%8C%87%E4%BB%A4" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>管线指令</h1>\n<p>管线是将一个命令的标准输出作为另一个命令的标准输入，在数据需要经过多个步骤的处理之后才能得到我们想要的内容时就可以使用管线。在命令之间使用 | 分隔各个管线命令。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="14556700198164773000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`\\$ ls -al /etc | less`, `14556700198164773000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">$ <span class="token function">ls</span> -al /etc <span class="token operator">|</span> <span class="token function">less</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<h2 id="提取指令"><a href="#%E6%8F%90%E5%8F%96%E6%8C%87%E4%BB%A4" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>提取指令</h2>\n<p>cut 对数据进行切分，取出想要的部分。提取过程一行一行地进行。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="93459789477907140000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`\\$ cut\n-d：分隔符\n-f：经过 -d 分隔后，使用 -f n 取出第 n 个区间\n-c：以字符为单位取出区间`, `93459789477907140000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">$ <span class="token function">cut</span>\n-d：分隔符\n-f：经过 -d 分隔后，使用 -f n 取出第 n 个区间\n-c：以字符为单位取出区间</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="范例-1：last-将显示的登入者的信息，要求仅显示用户名。"><a href="#%E8%8C%83%E4%BE%8B-1%EF%BC%9Alast-%E5%B0%86%E6%98%BE%E7%A4%BA%E7%9A%84%E7%99%BB%E5%85%A5%E8%80%85%E7%9A%84%E4%BF%A1%E6%81%AF%EF%BC%8C%E8%A6%81%E6%B1%82%E4%BB%85%E6%98%BE%E7%A4%BA%E7%94%A8%E6%88%B7%E5%90%8D%E3%80%82" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>范例 1：last 将显示的登入者的信息，要求仅显示用户名。</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="45481435540282190000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`\\$ last\nroot pts/1 192.168.201.101 Sat Feb 7 12:35 still logged in\nroot pts/1 192.168.201.101 Fri Feb 6 12:13 - 18:46 (06:33)\nroot pts/1 192.168.201.254 Thu Feb 5 22:37 - 23:53 (01:16)\n\n\\$ last | cut -d \' \' -f 1`, `45481435540282190000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">$ last\nroot pts/1 <span class="token number">192.168</span>.201.101 Sat Feb <span class="token number">7</span> <span class="token number">12</span>:35 still logged <span class="token keyword">in</span>\nroot pts/1 <span class="token number">192.168</span>.201.101 Fri Feb <span class="token number">6</span> <span class="token number">12</span>:13 - <span class="token number">18</span>:46 <span class="token punctuation">(</span>06:33<span class="token punctuation">)</span>\nroot pts/1 <span class="token number">192.168</span>.201.254 Thu Feb <span class="token number">5</span> <span class="token number">22</span>:37 - <span class="token number">23</span>:53 <span class="token punctuation">(</span>01:16<span class="token punctuation">)</span>\n\n$ last <span class="token operator">|</span> <span class="token function">cut</span> -d <span class="token string">\' \'</span> -f <span class="token number">1</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="范例-2：将-export-输出的讯息，取得第-12-字符以后的所有字符串。"><a href="#%E8%8C%83%E4%BE%8B-2%EF%BC%9A%E5%B0%86-export-%E8%BE%93%E5%87%BA%E7%9A%84%E8%AE%AF%E6%81%AF%EF%BC%8C%E5%8F%96%E5%BE%97%E7%AC%AC-12-%E5%AD%97%E7%AC%A6%E4%BB%A5%E5%90%8E%E7%9A%84%E6%89%80%E6%9C%89%E5%AD%97%E7%AC%A6%E4%B8%B2%E3%80%82" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>范例 2：将 export 输出的讯息，取得第 12 字符以后的所有字符串。</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="95365076310553640000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`\\$ export\ndeclare -x HISTCONTROL=&quot;ignoredups&quot;\ndeclare -x HISTSIZE=&quot;1000&quot;\ndeclare -x HOME=&quot;/home/dmtsai&quot;\ndeclare -x HOSTNAME=&quot;study.centos.vbird&quot;\n.....(其他省略).....\n\n\\$ export | cut -c 12`, `95365076310553640000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">$ <span class="token builtin class-name">export</span>\n<span class="token builtin class-name">declare</span> -x <span class="token assign-left variable"><span class="token environment constant">HISTCONTROL</span></span><span class="token operator">=</span><span class="token string">"ignoredups"</span>\n<span class="token builtin class-name">declare</span> -x <span class="token assign-left variable"><span class="token environment constant">HISTSIZE</span></span><span class="token operator">=</span><span class="token string">"1000"</span>\n<span class="token builtin class-name">declare</span> -x <span class="token assign-left variable"><span class="token environment constant">HOME</span></span><span class="token operator">=</span><span class="token string">"/home/dmtsai"</span>\n<span class="token builtin class-name">declare</span> -x <span class="token assign-left variable"><span class="token environment constant">HOSTNAME</span></span><span class="token operator">=</span><span class="token string">"study.centos.vbird"</span>\n<span class="token punctuation">..</span><span class="token punctuation">..</span>.<span class="token punctuation">(</span>其他省略<span class="token punctuation">)</span><span class="token punctuation">..</span><span class="token punctuation">..</span>.\n\n$ <span class="token builtin class-name">export</span> <span class="token operator">|</span> <span class="token function">cut</span> -c <span class="token number">12</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="排序指令"><a href="#%E6%8E%92%E5%BA%8F%E6%8C%87%E4%BB%A4" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>排序指令</h2>\n<h3 id="sort"><a href="#sort" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>sort</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="27793241459541430000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`\\$ sort [-fbMnrtuk] [file or stdin]\n-f：忽略大小写\n-b：忽略最前面的空格\n-M：以月份的名字来排序，例如 JAN，DEC\n-n：使用数字\n-r：反向排序\n-u：相当于 unique，重复的内容只出现一次\n-t：分隔符，默认为 tab\n-k：指定排序的区间`, `27793241459541430000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">$ <span class="token function">sort</span> <span class="token punctuation">[</span>-fbMnrtuk<span class="token punctuation">]</span> <span class="token punctuation">[</span>file or stdin<span class="token punctuation">]</span>\n-f：忽略大小写\n-b：忽略最前面的空格\n-M：以月份的名字来排序，例如 JAN，DEC\n-n：使用数字\n-r：反向排序\n-u：相当于 unique，重复的内容只出现一次\n-t：分隔符，默认为 tab\n-k：指定排序的区间</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>范例：/etc/passwd 内容是以 : 来分隔的，以第三栏来排序。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="68625280447494740000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`\\$ cat /etc/passwd | sort -t \':\' -k 3\nroot❌0:0:root:/root:/bin/bash\ndmtsai❌1000:1000:dmtsai:/home/dmtsai:/bin/bash\nalex❌1001:1002::/home/alex:/bin/bash\narod❌1002:1003::/home/arod:/bin/bash`, `68625280447494740000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">$ <span class="token function">cat</span> /etc/passwd <span class="token operator">|</span> <span class="token function">sort</span> -t <span class="token string">\':\'</span> -k <span class="token number">3</span>\nroot❌0:0:root:/root:/bin/bash\ndmtsai❌1000:1000:dmtsai:/home/dmtsai:/bin/bash\nalex❌1001:1002::/home/alex:/bin/bash\narod❌1002:1003::/home/arod:/bin/bash</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="uniq"><a href="#uniq" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>uniq</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="75098706798428640000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`\\$ uniq [-ic]\n-i：忽略大小写\n-c：进行计数`, `75098706798428640000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">$ <span class="token function">uniq</span> <span class="token punctuation">[</span>-ic<span class="token punctuation">]</span>\n-i：忽略大小写\n-c：进行计数</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>范例：取得每个人的登录总次数</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="3820515008203973000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`\\$ last | cut -d \' \' -f 1 | sort | uniq -c\n1\n6 (unknown\n47 dmtsai\n4 reboot\n7 root\n1 wtmp`, `3820515008203973000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">$ last <span class="token operator">|</span> <span class="token function">cut</span> -d <span class="token string">\' \'</span> -f <span class="token number">1</span> <span class="token operator">|</span> <span class="token function">sort</span> <span class="token operator">|</span> <span class="token function">uniq</span> -c\n<span class="token number">1</span>\n<span class="token number">6</span> <span class="token punctuation">(</span>unknown\n<span class="token number">47</span> dmtsai\n<span class="token number">4</span> <span class="token function">reboot</span>\n<span class="token number">7</span> root\n<span class="token number">1</span> wtmp</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="双向输出重定向"><a href="#%E5%8F%8C%E5%90%91%E8%BE%93%E5%87%BA%E9%87%8D%E5%AE%9A%E5%90%91" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>双向输出重定向</h2>\n<p>输出重定向会将输出内容重定向到文件中，而 <strong>tee</strong> 不仅能够完成这个功能，还能保留屏幕上的输出。也就是说，使用 tee 指令，一个输出会同时传送到文件和屏幕上。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="10455203667317758000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`\\$ tee [-a] file`, `10455203667317758000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">$ <span class="token function">tee</span> <span class="token punctuation">[</span>-a<span class="token punctuation">]</span> <span class="token function">file</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<h2 id="字符转换指令"><a href="#%E5%AD%97%E7%AC%A6%E8%BD%AC%E6%8D%A2%E6%8C%87%E4%BB%A4" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>字符转换指令</h2>\n<p><strong>tr</strong> 用来删除一行中的字符，或者对字符进行替换。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="65820945507452140000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`\\$ tr [-ds] SET1 ...\n-d：删除行中 SET1 这个字符串`, `65820945507452140000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">$ <span class="token function">tr</span> <span class="token punctuation">[</span>-ds<span class="token punctuation">]</span> SET1 <span class="token punctuation">..</span>.\n-d：删除行中 SET1 这个字符串</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>范例，将 last 输出的信息所有小写转换为大写。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="8730835087587319000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`\\$ last | tr \'[a-z]\' \'[A-Z]\'`, `8730835087587319000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">$ last <span class="token operator">|</span> <span class="token function">tr</span> <span class="token string">\'[a-z]\'</span> <span class="token string">\'[A-Z]\'</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p><strong>col</strong> 将 tab 字符转为空格字符。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="53470541144173290000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`\\$ col [-xb]\n-x： 将 tab 键转换成对等的空格键`, `53470541144173290000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">$ col <span class="token punctuation">[</span>-xb<span class="token punctuation">]</span>\n-x： 将 tab 键转换成对等的空格键</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p><strong>expand</strong> 将 tab 转换一定数量的空格，默认是 8 个。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="9193458174868630000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`\\$ expand [-t] file\n-t：tab 转为空格的数量`, `9193458174868630000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">$ <span class="token function">expand</span> <span class="token punctuation">[</span>-t<span class="token punctuation">]</span> <span class="token function">file</span>\n-t：tab 转为空格的数量</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p><strong>join</strong> 将有相同数据的那一行合并在一起。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="47640452754586660000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`\\$ join [-ti12] file1 file2\n-t：分隔符，默认为空格\n-i：忽略大小写的差异\n-1：第一个文件所用的比较字段\n-2：第二个文件所用的比较字段`, `47640452754586660000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">$ <span class="token function">join</span> <span class="token punctuation">[</span>-ti12<span class="token punctuation">]</span> file1 file2\n-t：分隔符，默认为空格\n-i：忽略大小写的差异\n-1：第一个文件所用的比较字段\n-2：第二个文件所用的比较字段</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><strong>paste</strong> 直接将两行粘贴在一起。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="37409639906519970000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`\\$ paste [-d] file1 file2\n-d：分隔符，默认为 tab`, `37409639906519970000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">$ <span class="token function">paste</span> <span class="token punctuation">[</span>-d<span class="token punctuation">]</span> file1 file2\n-d：分隔符，默认为 tab</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<h2 id="分区指令"><a href="#%E5%88%86%E5%8C%BA%E6%8C%87%E4%BB%A4" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>分区指令</h2>\n<p><strong>split</strong> 将一个文件划分成多个文件。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="82401431343313830000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`\\$ split [-bl] file PREFIX\n-b：以大小来进行分区，可加单位，例如 b, k, m 等\n-l：以行数来进行分区。\n-PREFIX：分区文件的前导名称`, `82401431343313830000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">$ <span class="token function">split</span> <span class="token punctuation">[</span>-bl<span class="token punctuation">]</span> <span class="token function">file</span> PREFIX\n-b：以大小来进行分区，可加单位，例如 b, k, m 等\n-l：以行数来进行分区。\n-PREFIX：分区文件的前导名称</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<h1 id="正则表达式"><a href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>正则表达式</h1>\n<h2 id="grep"><a href="#grep" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>grep</h2>\n<p>使用正则表示式把匹配的行提取出来。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="90462618085177970000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`\\$ grep [-acinv] [--color=auto] 搜寻字符串 filename\n-a：将 binary 文件以 text 文件的方式进行搜寻\n-c：计算找到个数\n-i：忽略大小写\n-n：输出行号\n-v：反向选择，亦即显示出没有搜寻字符串内容的那一行\n--color=auto：找到的关键字加颜色显示`, `90462618085177970000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">$ <span class="token function">grep</span> <span class="token punctuation">[</span>-acinv<span class="token punctuation">]</span> <span class="token punctuation">[</span>--color<span class="token operator">=</span>auto<span class="token punctuation">]</span> 搜寻字符串 filename\n-a：将 binary 文件以 text 文件的方式进行搜寻\n-c：计算找到个数\n-i：忽略大小写\n-n：输出行号\n-v：反向选择，亦即显示出没有搜寻字符串内容的那一行\n--color<span class="token operator">=</span>auto：找到的关键字加颜色显示</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>范例：把含有 the 字符串的行提取出来（注意默认会有 —color=auto 选项，因此以下内容在 Linux 中有颜色显示 the 字符串）</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="98356436275342210000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`\\$ grep -n \'the\' regular_express.txt\n8:I can\'t finish the test.\n12:the symbol \'*\' is represented as start.\n15:You are the best is mean you are the no. 1.\n16:The world Happy is the same with &quot;glad&quot;.\n18:google is the best tools for search keyword`, `98356436275342210000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">$ <span class="token function">grep</span> -n <span class="token string">\'the\'</span> regular_express.txt\n<span class="token number">8</span>:I can<span class="token string">\'t finish the test.\n12:the symbol \'</span>*\' is represented as start.\n<span class="token number">15</span>:You are the best is mean you are the no. <span class="token number">1</span>.\n<span class="token number">16</span>:The world Happy is the same with <span class="token string">"glad"</span><span class="token builtin class-name">.</span>\n<span class="token number">18</span>:google is the best tools <span class="token keyword">for</span> search keyword</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>因为 { 和 } 在 shell 是有特殊意义的，因此必须要使用转义字符进行转义。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="59772199830323720000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`\\$ grep -n \'go\\{2,5\\}g\' regular_express.txt`, `59772199830323720000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">$ <span class="token function">grep</span> -n <span class="token string">\'go\\{2,5\\}g\'</span> regular_express.txt</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<h2 id="printf"><a href="#printf" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>printf</h2>\n<p>用于格式化输出。</p>\n<p>它不属于管道命令，在给 printf 传数据时需要使用 $() 形式。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="72885333001824030000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`\\$ printf \'%10s %5i %5i %5i %8.2f \\n\' \\$(cat printf.txt)\n    DmTsai    80    60    92    77.33\n     VBird    75    55    80    70.00\n       Ken    60    90    70    73.33`, `72885333001824030000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">$ <span class="token builtin class-name">printf</span> <span class="token string">\'%10s %5i %5i %5i %8.2f <span class="token entity" title="\\n">\\n</span>\'</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">cat</span> printf.txt<span class="token variable">)</span></span>\n    DmTsai    <span class="token number">80</span>    <span class="token number">60</span>    <span class="token number">92</span>    <span class="token number">77.33</span>\n     VBird    <span class="token number">75</span>    <span class="token number">55</span>    <span class="token number">80</span>    <span class="token number">70.00</span>\n       Ken    <span class="token number">60</span>    <span class="token number">90</span>    <span class="token number">70</span>    <span class="token number">73.33</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="awk"><a href="#awk" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>awk</h2>\n<p>可以根据字段的某些条件进行匹配，例如匹配字段小于某个值的那一行数据。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="15800022802227320000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`\\$ awk \' 条件类型 1 {动作 1} 条件类型 2 {动作 2} ...\' filename`, `15800022802227320000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">$ <span class="token function">awk</span> <span class="token string">\' 条件类型 1 {动作 1} 条件类型 2 {动作 2} ...\'</span> filename</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>awk 每次处理一行，处理的最小单位是字段，每个字段的命名方式为：$n，n 为字段号，从 1 开始，$0 表示一整行。</p>\n<p>范例 1：取出登录用户的用户名和 ip</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="21021148779818865000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`\\$ last -n 5\ndmtsai pts/0 192.168.1.100 Tue Jul 14 17:32 still logged in\ndmtsai pts/0 192.168.1.100 Thu Jul 9 23:36 - 02:58 (03:22)\ndmtsai pts/0 192.168.1.100 Thu Jul 9 17:23 - 23:36 (06:12)\ndmtsai pts/0 192.168.1.100 Thu Jul 9 08:02 - 08:17 (00:14)\ndmtsai tty1 Fri May 29 11:55 - 12:11 (00:15)\n\n\\$ last -n 5 | awk \'{print \\$1 &quot;\\t&quot; \\$3}\'\ndmtsai   192.168.1.100\ndmtsai   192.168.1.100\ndmtsai   192.168.1.100\ndmtsai   192.168.1.100\ndmtsai   Fri`, `21021148779818865000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">$ last -n <span class="token number">5</span>\ndmtsai pts/0 <span class="token number">192.168</span>.1.100 Tue Jul <span class="token number">14</span> <span class="token number">17</span>:32 still logged <span class="token keyword">in</span>\ndmtsai pts/0 <span class="token number">192.168</span>.1.100 Thu Jul <span class="token number">9</span> <span class="token number">23</span>:36 - 02:58 <span class="token punctuation">(</span>03:22<span class="token punctuation">)</span>\ndmtsai pts/0 <span class="token number">192.168</span>.1.100 Thu Jul <span class="token number">9</span> <span class="token number">17</span>:23 - <span class="token number">23</span>:36 <span class="token punctuation">(</span>06:12<span class="token punctuation">)</span>\ndmtsai pts/0 <span class="token number">192.168</span>.1.100 Thu Jul <span class="token number">9</span> 08:02 - 08:17 <span class="token punctuation">(</span>00:14<span class="token punctuation">)</span>\ndmtsai tty1 Fri May <span class="token number">29</span> <span class="token number">11</span>:55 - <span class="token number">12</span>:11 <span class="token punctuation">(</span>00:15<span class="token punctuation">)</span>\n\n$ last -n <span class="token number">5</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">\'{print <span class="token variable">$1</span> "<span class="token entity" title="\\t">\\t</span>" <span class="token variable">$3</span>}\'</span>\ndmtsai   <span class="token number">192.168</span>.1.100\ndmtsai   <span class="token number">192.168</span>.1.100\ndmtsai   <span class="token number">192.168</span>.1.100\ndmtsai   <span class="token number">192.168</span>.1.100\ndmtsai   Fri</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>awk 变量：</p>\n<table>\n<thead>\n<tr>\n<th>变量名称</th>\n<th>代表意义</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>NF</td>\n<td>每一行拥有的字段总数</td>\n</tr>\n<tr>\n<td>NR</td>\n<td>目前所处理的是第几行数据</td>\n</tr>\n<tr>\n<td>FS</td>\n<td>目前的分隔字符，默认是空格键</td>\n</tr>\n</tbody>\n</table>\n<p>范例 2：输出正在处理的行号，并显示每一行有多少字段</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="17433588163469826000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`\\$ last -n 5 | awk \'{print \\$1 &quot;\\t lines: &quot; NR &quot;\\t columns: &quot; NF}\'\ndmtsai lines: 1 columns: 10\ndmtsai lines: 2 columns: 10\ndmtsai lines: 3 columns: 10\ndmtsai lines: 4 columns: 10\ndmtsai lines: 5 columns: 9`, `17433588163469826000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">$ last -n <span class="token number">5</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">\'{print <span class="token variable">$1</span> "<span class="token entity" title="\\t">\\t</span> lines: " NR "<span class="token entity" title="\\t">\\t</span> columns: " NF}\'</span>\ndmtsai lines: <span class="token number">1</span> columns: <span class="token number">10</span>\ndmtsai lines: <span class="token number">2</span> columns: <span class="token number">10</span>\ndmtsai lines: <span class="token number">3</span> columns: <span class="token number">10</span>\ndmtsai lines: <span class="token number">4</span> columns: <span class="token number">10</span>\ndmtsai lines: <span class="token number">5</span> columns: <span class="token number">9</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>可以使用条件，其中等于使用 ==。</p>\n<p>范例 3：/etc/passwd 文件第三个字段为 UID，对 UID 小于 10 的数据进行处理。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="75842617809404130000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`\\$ cat /etc/passwd | awk \'BEGIN {FS=&quot;:&quot;} \\$3 < 10 {print \\$1 &quot;\\t &quot; \\$3}\'\nroot 0\nbin 1\ndaemon 2`, `75842617809404130000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">$ <span class="token function">cat</span> /etc/passwd <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">\'BEGIN {FS=":"} <span class="token variable">$3</span> &lt; 10 {print <span class="token variable">$1</span> "<span class="token entity" title="\\t">\\t</span> " <span class="token variable">$3</span>}\'</span>\nroot <span class="token number">0</span>\nbin <span class="token number">1</span>\ndaemon <span class="token number">2</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<h1 id="进程管理"><a href="#%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>进程管理</h1>\n<h2 id="查看进程"><a href="#%E6%9F%A5%E7%9C%8B%E8%BF%9B%E7%A8%8B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>查看进程</h2>\n<h3 id="ps"><a href="#ps" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ps</h3>\n<p>查看某个时间点的进程信息</p>\n<p>示例一：查看自己的进程</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="13846534292477730000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`# ps -l`, `13846534292477730000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token comment"># ps -l</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>示例二：查看系统所有进程</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="7155085447565201000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`# ps aux`, `7155085447565201000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token comment"># ps aux</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>示例三：查看特定的进程</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="15081486443789394000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`# ps aux | grep threadx`, `15081486443789394000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token comment"># ps aux | grep threadx</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<h3 id="top"><a href="#top" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>top</h3>\n<p>实时显示进程信息</p>\n<p>示例：两秒钟刷新一次</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="36709133265362870000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`# top -d 2`, `36709133265362870000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token comment"># top -d 2</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<h3 id="pstree"><a href="#pstree" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>pstree</h3>\n<p>查看进程树</p>\n<p>示例：查看所有进程树</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="38876265982640914000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`# pstree -A`, `38876265982640914000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token comment"># pstree -A</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<h3 id="netstat"><a href="#netstat" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>netstat</h3>\n<p>查看占用端口的进程</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="88645098929929160000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`# netstat -anp | grep port`, `88645098929929160000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token comment"># netstat -anp | grep port</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<h2 id="进程状态"><a href="#%E8%BF%9B%E7%A8%8B%E7%8A%B6%E6%80%81" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>进程状态</h2>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/76a49594323247f21c9b3a69945445ee-35d6ed82419566e6b1cc4244be970f38-08e5b.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 430px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 30.69767441860465%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsSAAALEgHS3X78AAAAq0lEQVQY032R2QrCMBBFp1q3Vlu32IpBpe4o+OD//5s39Qh56sAhIczcuTMx+0VP9EUituIhzuItbuIpauuOlPpWbC2cuIhKTDlPYilKMRNDCv8CNXWbKK+NkDxHaAShyTVKyhBYINKIl9gjlpPTRo6gIRrG9DgMrj/iwN3RLLCjQUH9xNid4+GOfc/ds0vHaqp4LKIgr4xM2UCMGTWj0OPiKFa8Jx2fEtylX1ezB4wKMyiEAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="76a49594323247f21c9b3a69945445ee" title="" data-src="/static/76a49594323247f21c9b3a69945445ee-35d6ed82419566e6b1cc4244be970f38-08e5b.png" data-srcset="/static/76a49594323247f21c9b3a69945445ee-35d6ed82419566e6b1cc4244be970f38-7277b.png 200w,\n/static/76a49594323247f21c9b3a69945445ee-35d6ed82419566e6b1cc4244be970f38-7ec4d.png 400w,\n/static/76a49594323247f21c9b3a69945445ee-35d6ed82419566e6b1cc4244be970f38-08e5b.png 430w" data-sizes="(max-width: 430px) 100vw, 430px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<table>\n<thead>\n<tr>\n<th align="center">状态</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align="center">R</td>\n<td>running or runnable (on run queue)</td>\n</tr>\n<tr>\n<td align="center">D</td>\n<td>uninterruptible sleep (usually IO)</td>\n</tr>\n<tr>\n<td align="center">S</td>\n<td>interruptible sleep (waiting for an event to complete)</td>\n</tr>\n<tr>\n<td align="center">Z</td>\n<td>defunct/zombie, terminated but not reaped by its parent</td>\n</tr>\n<tr>\n<td align="center">T</td>\n<td>stopped, either by a job control signal or because it is being traced</td>\n</tr>\n</tbody>\n</table>\n<h2 id="sigchild"><a href="#sigchild" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>SIGCHILD</h2>\n<p>当一个子进程改变了它的状态时：停止运行，继续运行或者退出，有两件事会发生在父进程中：</p>\n<ul>\n<li>得到 SIGCHLD 信号；</li>\n<li>阻塞的 waitpid(2)（或者 wait）调用会返回。</li>\n</ul>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/flow-11094ca0f260e7b391ec8fe459a16162-aa752.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 339px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 110.02949852507373%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAAAsSAAALEgHS3X78AAAC40lEQVQ4y61USU8UQRT+upme6Z7p6dl6oadxBgZGEEQjqODBcMCDHPSgXJS4RBOI4kJEQQURV4x7jNGIB4yJMV79MRz8DZ694qvqN6RnIESNL/m6+lXVe/W9pQrwm4Cnrotlv4gPvo9XXhHXCxqE3LFRJ7dZH9SBJbL5SDbv/QCLTlbOP/fos1xM4WLuAkbT8zhhzeB8dgaP3O1yw11HWXcm/had8P9Ns4Wr+XGymSObedyyj2HtB2987CZxozCGs5lLGCNMkvMHTptcm8ordQwnc+H4wjMxTTanM5dxLnuFmI/Uh/K6OYmVYgafAwufimlM5KKOUgSLGIZzQSyc/RIY+BqkKU0ZYq7LuQGDPsetqOskwZQOgAyPIvw+ghdZTxDa0W1UsHZSrWdnkf6zE+jXVXTEVcoPUA5rgoatJD4fUEFcqWLKLeCeHx4Qg2BpRDeLkJqwtQijtDRMqUn82mOgFO8nvUSWotJ2o0NwruIEjQ+IresqrcXkesh9pTWFwZQjGepKbDMG3YQqYT9hL+tdhF6CYNIjupBwgNxW+aAtpZnDijOzgB12cO4Mhi6LU46bGLdDtr62wVktFJPzlOTKtsochQVJsENVRnLQrGK1JyGth9Mbsgdm08eh7SSIBt/F812R9V7KaBmfKIdLQXKrkNuYXSrCVPRillHTS5SQErVNFu9KhkyPpuiNjabgz8Ujhi34Vkljh16V6VCRp9H5V4ehfO+wyGGXZG6qMW41loLsaYf7zOOWqXCFt3GV23i+ha02lhan6MrO2gpGLYVo9yCpWNTOPldXOCpylYVelnc4bCeL8mYgoWgyOm3zAFXuv07aMkDjPq7sbkatscUo3rJDXKxI0l56TZgtDOCmPUTjEK7lh+l9zPNTpfL1UyImNegculFfgbe+RS/2NI6Yz3DUXMKZzH08cbvl2mo7/l7mbA0LzhA94yOYKRwmfQQLdlj+iRz+nzx0N59vDL5BfgOV5laEJ4oB4AAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="flow" title="" data-src="/static/flow-11094ca0f260e7b391ec8fe459a16162-aa752.png" data-srcset="/static/flow-11094ca0f260e7b391ec8fe459a16162-bb04d.png 200w,\n/static/flow-11094ca0f260e7b391ec8fe459a16162-aa752.png 339w" data-sizes="(max-width: 339px) 100vw, 339px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h2 id="孤儿进程和僵死进程"><a href="#%E5%AD%A4%E5%84%BF%E8%BF%9B%E7%A8%8B%E5%92%8C%E5%83%B5%E6%AD%BB%E8%BF%9B%E7%A8%8B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>孤儿进程和僵死进程</h2>\n<h3 id="孤儿进程"><a href="#%E5%AD%A4%E5%84%BF%E8%BF%9B%E7%A8%8B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>孤儿进程</h3>\n<p>一个父进程退出，而它的一个或多个子进程还在运行，那么这些子进程将成为孤儿进程。孤儿进程将被 init 进程（进程号为 1）所收养，并由 init 进程对它们完成状态收集工作。</p>\n<p>由于孤儿进程会被 init 进程收养，所以孤儿进程不会对系统造成危害。</p>\n<h3 id="僵死进程"><a href="#%E5%83%B5%E6%AD%BB%E8%BF%9B%E7%A8%8B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>僵死进程</h3>\n<p>一个子进程的进程描述符在子进程退出时不会释放，只有当父进程通过 wait 或 waitpid 获取了子进程信息后才会释放。如果子进程退出，而父进程并没有调用 wait 或 waitpid，那么子进程的进程描述符仍然保存在系统中，这种进程称之为僵死进程。</p>\n<p>僵死进程通过 ps 命令显示出来的状态为 Z。</p>\n<p>系统所能使用的进程号是有限的，如果大量的产生僵死进程，将因为没有可用的进程号而导致系统不能产生新的进程。</p>\n<p>要消灭系统中大量的僵死进程，只需要将其父进程杀死，此时所有的僵死进程就会变成孤儿进程，从而被 init 所收养，这样 init 就会释放所有的僵死进程所占有的资源，从而结束僵死进程。</p>\n<h1 id="io-复用"><a href="#io-%E5%A4%8D%E7%94%A8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>I/O 复用</h1>\n<h2 id="概念理解"><a href="#%E6%A6%82%E5%BF%B5%E7%90%86%E8%A7%A3" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>概念理解</h2>\n<p>I/O Multiplexing 又被称为 Event Driven I/O，它可以让单个进程具有处理多个 I/O 事件的能力。</p>\n<p>当某个 I/O 事件条件满足时，进程会收到通知。</p>\n<p>如果一个 Web 服务器没有 I/O 复用，那么每一个 Socket 连接都需要创建一个线程去处理。如果同时连接几万个连接，那么就需要创建相同数量的线程。并且相比于多进程和多线程技术，I/O 复用不需要进程线程创建和切换的开销，系统开销更小。</p>\n<h2 id="io-模型"><a href="#io-%E6%A8%A1%E5%9E%8B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>I/O 模型</h2>\n<ul>\n<li>阻塞（Blocking）</li>\n<li>非阻塞（Non-blocking）</li>\n<li>同步（Synchronous）</li>\n<li>异步（Asynchronous）</li>\n</ul>\n<p>阻塞非阻塞是等待 I/O 完成的方式，阻塞要求用户程序停止执行，直到 I/O 完成，而非阻塞在 I/O 完成之前还可以继续执行。</p>\n<p>同步异步是获知 I/O 完成的方式，同步需要时刻关心 I/O 是否已经完成，异步无需主动关心，在 I/O 完成时它会收到通知。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/54cb3f21-485b-4159-8bf5-dcde1c4d4c36-a8ba847add84744a31d6feb1eb990af8-59771.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 548px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 64.05109489051095%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAABa0lEQVQoz5VS2W6CQBTl/3+jT42Jj93SJtZUbVOTtmklwQUCkmFRlpkBRkG0BydV0PahJ2RyuXPOuQsouya2e9Tj88yBrJyLcYZhaNv24RVwXdcwjBOyUmdsNhtvD13XNU3zfZ8Q4jgOMuPxWFVVWCBer9eNylLPGIOg3h7YlNJ6tTiOl8ul5FRieCdJIsVRFKE+ruEihAiCIMuyPM/xulgsUDNNUySPYihxjYBzDmOI/QoeZBgeFtCgW4hXqxWSDXG9bcuy4A07GIGHJcm+ZBInttBouy42Px65/hxPBvF0wI0XfXjnEJsyho4wPAjwaohhKRfIGQu1bmn13PebUedSzLqBep/yamFCZCgryZjlKMY8cmHoVR/eTvvtUaf1en2hPbU/Oy2RcVyhLHYpxX/MTKn39bCb9wuzV1p9BM7bFY2CstyWPzj9VIefpCgKzzY923DxzA0ExJw5hHi+7+6BHnFi57//nv/CN34+5dEt440mAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="54cb3f21 485b 4159 8bf5 dcde1c4d4c36" title="" data-src="/static/54cb3f21-485b-4159-8bf5-dcde1c4d4c36-a8ba847add84744a31d6feb1eb990af8-59771.png" data-srcset="/static/54cb3f21-485b-4159-8bf5-dcde1c4d4c36-a8ba847add84744a31d6feb1eb990af8-46aad.png 200w,\n/static/54cb3f21-485b-4159-8bf5-dcde1c4d4c36-a8ba847add84744a31d6feb1eb990af8-692ce.png 400w,\n/static/54cb3f21-485b-4159-8bf5-dcde1c4d4c36-a8ba847add84744a31d6feb1eb990af8-59771.png 548w" data-sizes="(max-width: 548px) 100vw, 548px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h3 id="同步-阻塞"><a href="#%E5%90%8C%E6%AD%A5-%E9%98%BB%E5%A1%9E" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>同步-阻塞</h3>\n<p>这是最常见的一种模型，用户程序在使用 read() 时会执行系统调用从而陷入内核，之后就被阻塞直到系统调用完成。</p>\n<p>应该注意到，在阻塞的过程中，其他程序还可以执行，因此阻塞不意味着整个操作系统都被阻塞。因为其他程序还可以执行，因此不消耗 CPU 时间，这种模型的执行效率会比较高。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/5e9b10f3-9504-4483-9667-d4770adebf9f-fef91d39571cb699986ff0e226108cd3-f4ef4.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 705px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 57.304964539007095%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABHUlEQVQoz4VR2W6EMBDj/3+vlfpACyoLJJCDQNJlyUW9sKIspaofomgmnrGdZJ7nGCPOaZrqO4hzbn4GKlVVNU1jrY0L1nqyvYhzLOqWiwH36/WKWbcF4ziGEEDDeRiaYMxtmoJzQpvX7MKZVKoryxJ7CCHVgmEYypoKqTDUGIOJDzI2UEqj928f+YXL8EvzKlHInotuGHqlFLQ8yNCDPfBd0PaUvMLaKQSPx1i2hZJAA1KaQ+Da1FIFf28wxtI0zfM8yzKtNSpNKwltu67jnEP5j2cMC94LrV/eC0IYkgIZhnHCuRDCWUsoM1/jMbC9t8+yYaLfPm8PRA/Za+vkqxZjdk0yPgMVhOS9/3PzQnawcBrY/+S9pOOHnbW+ARNNgRe1+fy6AAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="5e9b10f3 9504 4483 9667 d4770adebf9f" title="" data-src="/static/5e9b10f3-9504-4483-9667-d4770adebf9f-fef91d39571cb699986ff0e226108cd3-f4ef4.png" data-srcset="/static/5e9b10f3-9504-4483-9667-d4770adebf9f-fef91d39571cb699986ff0e226108cd3-3d360.png 200w,\n/static/5e9b10f3-9504-4483-9667-d4770adebf9f-fef91d39571cb699986ff0e226108cd3-f7ff6.png 400w,\n/static/5e9b10f3-9504-4483-9667-d4770adebf9f-fef91d39571cb699986ff0e226108cd3-f4ef4.png 705w" data-sizes="(max-width: 705px) 100vw, 705px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h3 id="同步-非阻塞"><a href="#%E5%90%8C%E6%AD%A5-%E9%9D%9E%E9%98%BB%E5%A1%9E" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>同步-非阻塞</h3>\n<p>非阻塞意味着用户程序在执行系统调用后还可以继续执行，内核并不是马上执行完 I/O，而是以一个错误码来告知用户程序 I/O 还未完成。为了获得 I/O 完成事件，用户程序必须调用多次系统调用去询问内核，甚至是忙等，也就是在一个循环里面一直询问并等待。</p>\n<p>由于 CPU 要处理更多的用户程序的询问，因此这种模型的效率是比较低的。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/1582217a-ed46-4cac-811e-90d13a65163b-ecc018a3b82ac1b8fcefd1cc990524c1-b2e17.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 623px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 72.23113964686999%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsSAAALEgHS3X78AAABuElEQVQoz31SDXeCMAz0//8556aACOIo3xQoLaUFUXZY5zb3tjzICyXXXC5ZzfOslGrbljEmhBjHcf5l0zR1XVfXNdKQ/Dhf4ZVS+r7v2HaWZefz+TcYh5xzx3EIIbjlcrlcr9c7GGHDpesTxIy1VVXxmzWfBlIAaKXgv1+6gHut45z6QaS1LsvStm3XdQ+HAwLLwmPFcTxo7bgnLqS+9QhD8gLmUkZldTwSHIEhKqdpWhRFnudoBB59DYN2vTBJ8ZWjAHzf9wsYQgVJ4XkLbbAFSajS3QwwqIhL0aLW/WWaTLdftI0kgi9KUko3m81utwPbzc3W63UYkkGrre23vEPyA79iTQM2QUZtJzA1gQdbcANzBPAorlQfkkQpLThHAv6C1woA2jRZ1YQknf8wU+oUplGcGvGhy71nqVRcQKQCMU5RzfyGleXCoqpqA+Zc/qBtRpXXLElycMYaYRMwKqzNfr9HkCRJVdeq713vnYulZ7MksIdgo/xcnSiKttstkJ7nwWPIppTlkpI2z5Upa50wfXk7CMEhAzhjYBiPGRI+cQjB8qJ82vwFPIxjRtmrFcz/Gpg/recH6FgaUwXnl9QAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="1582217a ed46 4cac 811e 90d13a65163b" title="" data-src="/static/1582217a-ed46-4cac-811e-90d13a65163b-ecc018a3b82ac1b8fcefd1cc990524c1-b2e17.png" data-srcset="/static/1582217a-ed46-4cac-811e-90d13a65163b-ecc018a3b82ac1b8fcefd1cc990524c1-5d0dd.png 200w,\n/static/1582217a-ed46-4cac-811e-90d13a65163b-ecc018a3b82ac1b8fcefd1cc990524c1-d9bec.png 400w,\n/static/1582217a-ed46-4cac-811e-90d13a65163b-ecc018a3b82ac1b8fcefd1cc990524c1-b2e17.png 623w" data-sizes="(max-width: 623px) 100vw, 623px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h3 id="异步-阻塞"><a href="#%E5%BC%82%E6%AD%A5-%E9%98%BB%E5%A1%9E" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>异步-阻塞</h3>\n<p>这是 I/O 复用使用的一种模式，通过使用 select，它可以监听多个 I/O 事件，当这些事件至少有一个发生时，用户程序会收到通知。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/dbc5c9f1-c13c-4d06-86ba-7cc949eb4c8f-28cd27b8ae9d552ef20a2dd1d9b84a24-6e6e8.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 704px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 64.0625%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAd0guD//xAAYEAACAwAAAAAAAAAAAAAAAAAQEQAhQf/aAAgBAQABBQLbCiH/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAY/Al//xAAaEAACAwEBAAAAAAAAAAAAAAABEQAQQSEx/9oACAEBAAE/IfeIkyixgXa//9oADAMBAAIAAwAAABBwz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABoQAQEBAQEBAQAAAAAAAAAAAAERACFRQWH/2gAIAQEAAT8QqVfL3KKq5+4X00TsJJNE9tPNDw3/2Q==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="dbc5c9f1 c13c 4d06 86ba 7cc949eb4c8f" title="" data-src="/static/dbc5c9f1-c13c-4d06-86ba-7cc949eb4c8f-28cd27b8ae9d552ef20a2dd1d9b84a24-6e6e8.jpg" data-srcset="/static/dbc5c9f1-c13c-4d06-86ba-7cc949eb4c8f-28cd27b8ae9d552ef20a2dd1d9b84a24-6b746.jpg 200w,\n/static/dbc5c9f1-c13c-4d06-86ba-7cc949eb4c8f-28cd27b8ae9d552ef20a2dd1d9b84a24-006bd.jpg 400w,\n/static/dbc5c9f1-c13c-4d06-86ba-7cc949eb4c8f-28cd27b8ae9d552ef20a2dd1d9b84a24-6e6e8.jpg 704w" data-sizes="(max-width: 704px) 100vw, 704px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h3 id="异步-非阻塞"><a href="#%E5%BC%82%E6%AD%A5-%E9%9D%9E%E9%98%BB%E5%A1%9E" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>异步-非阻塞</h3>\n<p>该模式下，I/O 操作会立即返回，之后可以处理其它操作，并且在 I/O 完成时会收到一个通知，此时会中断正在处理的操作，然后继续之前的操作。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/b4b29aa9-dd2c-467b-b75f-ca6541cb25b5-87e2157c7c4a48a2f94e2a7f625c330a-fb06a.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 647px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 69.55177743431221%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAQAF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB3URqP//EABUQAQEAAAAAAAAAAAAAAAAAACBB/9oACAEBAAEFAqf/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAWEAADAAAAAAAAAAAAAAAAAAAQIDH/2gAIAQEABj8CSj//xAAZEAACAwEAAAAAAAAAAAAAAAABEQAQQWH/2gAIAQEAAT8h4hdIs5Eaf//aAAwDAQACAAMAAAAQIA//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAaEAEAAwEBAQAAAAAAAAAAAAABABEhQYEx/9oACAEBAAE/EC12FqBG07zIXWley5hMclX1PhArqz//2Q==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="b4b29aa9 dd2c 467b b75f ca6541cb25b5" title="" data-src="/static/b4b29aa9-dd2c-467b-b75f-ca6541cb25b5-87e2157c7c4a48a2f94e2a7f625c330a-fb06a.jpg" data-srcset="/static/b4b29aa9-dd2c-467b-b75f-ca6541cb25b5-87e2157c7c4a48a2f94e2a7f625c330a-ac83e.jpg 200w,\n/static/b4b29aa9-dd2c-467b-b75f-ca6541cb25b5-87e2157c7c4a48a2f94e2a7f625c330a-5292a.jpg 400w,\n/static/b4b29aa9-dd2c-467b-b75f-ca6541cb25b5-87e2157c7c4a48a2f94e2a7f625c330a-fb06a.jpg 647w" data-sizes="(max-width: 647px) 100vw, 647px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h2 id="select-poll-epoll"><a href="#select-poll-epoll" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>select poll epoll</h2>\n<p>这三个都是 I/O 多路复用的具体实现，select 出现的最早，之后是 poll，再是 epoll。</p>\n<h3 id="select"><a href="#select" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>select</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="83894377415071070000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`int select (int n, fd_set *readfds, fd_set *writefds, fd_set *exceptfds, struct timeval *timeout);`, `83894377415071070000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="c"\n              >\n                <span class="gatsby-code-button-language">c</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="c"><pre style="counter-reset: linenumber NaN" class="language-c line-numbers"><code class="language-c"><span class="token keyword">int</span> select <span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">,</span> fd_set <span class="token operator">*</span>readfds<span class="token punctuation">,</span> fd_set <span class="token operator">*</span>writefds<span class="token punctuation">,</span> fd_set <span class="token operator">*</span>exceptfds<span class="token punctuation">,</span> <span class="token keyword">struct</span> <span class="token class-name">timeval</span> <span class="token operator">*</span>timeout<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<ul>\n<li><code class="language-text">fd_set</code> 表示描述符集合；</li>\n<li>readset、writeset 和 exceptset 这三个参数指定让操作系统内核测试读、写和异常条件的描述符；</li>\n<li>timeout 参数告知内核等待所指定描述符中的任何一个就绪可花多少时间；</li>\n<li>成功调用返回结果大于 0；出错返回结果为 -1；超时返回结果为 0。</li>\n</ul>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="35158114392959530000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fd_set fd_in, fd_out;\nstruct timeval tv;\n\n// Reset the sets\nFD_ZERO( &fd_in );\nFD_ZERO( &fd_out );\n\n// Monitor sock1 for input events\nFD_SET( sock1, &fd_in );\n\n// Monitor sock2 for output events\nFD_SET( sock2, &fd_out );\n\n// Find out which socket has the largest numeric value as select requires it\nint largest_sock = sock1 > sock2 ? sock1 : sock2;\n\n// Wait up to 10 seconds\ntv.tv_sec = 10;\ntv.tv_usec = 0;\n\n// Call the select\nint ret = select( largest_sock + 1, &fd_in, &fd_out, NULL, &tv );\n\n// Check if select actually succeed\nif ( ret == -1 )\n    // report error and abort\nelse if ( ret == 0 )\n    // timeout; no event detected\nelse\n{\n    if ( FD_ISSET( sock1, &fd_in ) )\n        // input event on sock1\n\n    if ( FD_ISSET( sock2, &fd_out ) )\n        // output event on sock2\n}`, `35158114392959530000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="c"\n              >\n                <span class="gatsby-code-button-language">c</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="c"><pre style="counter-reset: linenumber NaN" class="language-c line-numbers"><code class="language-c">fd_set fd_in<span class="token punctuation">,</span> fd_out<span class="token punctuation">;</span>\n<span class="token keyword">struct</span> <span class="token class-name">timeval</span> tv<span class="token punctuation">;</span>\n\n<span class="token comment">// Reset the sets</span>\n<span class="token function">FD_ZERO</span><span class="token punctuation">(</span> <span class="token operator">&amp;</span>fd_in <span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token function">FD_ZERO</span><span class="token punctuation">(</span> <span class="token operator">&amp;</span>fd_out <span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// Monitor sock1 for input events</span>\n<span class="token function">FD_SET</span><span class="token punctuation">(</span> sock1<span class="token punctuation">,</span> <span class="token operator">&amp;</span>fd_in <span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// Monitor sock2 for output events</span>\n<span class="token function">FD_SET</span><span class="token punctuation">(</span> sock2<span class="token punctuation">,</span> <span class="token operator">&amp;</span>fd_out <span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// Find out which socket has the largest numeric value as select requires it</span>\n<span class="token keyword">int</span> largest_sock <span class="token operator">=</span> sock1 <span class="token operator">></span> sock2 <span class="token operator">?</span> sock1 <span class="token operator">:</span> sock2<span class="token punctuation">;</span>\n\n<span class="token comment">// Wait up to 10 seconds</span>\ntv<span class="token punctuation">.</span>tv_sec <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>\ntv<span class="token punctuation">.</span>tv_usec <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n\n<span class="token comment">// Call the select</span>\n<span class="token keyword">int</span> ret <span class="token operator">=</span> <span class="token function">select</span><span class="token punctuation">(</span> largest_sock <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>fd_in<span class="token punctuation">,</span> <span class="token operator">&amp;</span>fd_out<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>tv <span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// Check if select actually succeed</span>\n<span class="token keyword">if</span> <span class="token punctuation">(</span> ret <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token punctuation">)</span>\n    <span class="token comment">// report error and abort</span>\n<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> ret <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">)</span>\n    <span class="token comment">// timeout; no event detected</span>\n<span class="token keyword">else</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token function">FD_ISSET</span><span class="token punctuation">(</span> sock1<span class="token punctuation">,</span> <span class="token operator">&amp;</span>fd_in <span class="token punctuation">)</span> <span class="token punctuation">)</span>\n        <span class="token comment">// input event on sock1</span>\n\n    <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token function">FD_ISSET</span><span class="token punctuation">(</span> sock2<span class="token punctuation">,</span> <span class="token operator">&amp;</span>fd_out <span class="token punctuation">)</span> <span class="token punctuation">)</span>\n        <span class="token comment">// output event on sock2</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>每次调用 select() 都需要将 <code class="language-text">fd_set *readfds</code>, <code class="language-text">fd_set *writefds</code>, <code class="language-text">fd_set *exceptfds</code> 链表内容全部从用户进程内存中复制到操作系统内核中，内核需要将所有 <code class="language-text">fd_set</code> 遍历一遍，这个过程非常低效。</p>\n<p>返回结果中内核并没有声明哪些 <code class="language-text">fd_set</code> 已经准备好了，所以如果返回值大于 0 时，程序需要遍历所有的 <code class="language-text">fd_set</code> 判断哪个 I/O 已经准备好。</p>\n<p>在 Linux 中 select 最多支持 1024 个 <code class="language-text">fd_set</code> 同时轮询，其中 1024 由 Linux 内核的 <code class="language-text">FD_SETSIZE</code> 决定。如果需要打破该限制可以修改 <code class="language-text">FD_SETSIZE</code>，然后重新编译内核。</p>\n<h3 id="poll"><a href="#poll" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>poll</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="43536793387448070000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`int poll (struct pollfd *fds, unsigned int nfds, int timeout);`, `43536793387448070000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="c"\n              >\n                <span class="gatsby-code-button-language">c</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="c"><pre style="counter-reset: linenumber NaN" class="language-c line-numbers"><code class="language-c"><span class="token keyword">int</span> poll <span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">pollfd</span> <span class="token operator">*</span>fds<span class="token punctuation">,</span> <span class="token keyword">unsigned</span> <span class="token keyword">int</span> nfds<span class="token punctuation">,</span> <span class="token keyword">int</span> timeout<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="94113660169563930000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`struct pollfd {\n    int fd;       // 文件描述符\n    short events; // 监视的请求事件\n    short revents; // 已发生的事件\n};`, `94113660169563930000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="c"\n              >\n                <span class="gatsby-code-button-language">c</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="c"><pre style="counter-reset: linenumber NaN" class="language-c line-numbers"><code class="language-c"><span class="token keyword">struct</span> <span class="token class-name">pollfd</span> <span class="token punctuation">{</span>\n    <span class="token keyword">int</span> fd<span class="token punctuation">;</span>       <span class="token comment">// 文件描述符</span>\n    <span class="token keyword">short</span> events<span class="token punctuation">;</span> <span class="token comment">// 监视的请求事件</span>\n    <span class="token keyword">short</span> revents<span class="token punctuation">;</span> <span class="token comment">// 已发生的事件</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="70317240695889470000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// The structure for two events\nstruct pollfd fds[2];\n\n// Monitor sock1 for input\nfds[0].fd = sock1;\nfds[0].events = POLLIN;\n\n// Monitor sock2 for output\nfds[1].fd = sock2;\nfds[1].events = POLLOUT;\n\n// Wait 10 seconds\nint ret = poll( &fds, 2, 10000 );\n// Check if poll actually succeed\nif ( ret == -1 )\n    // report error and abort\nelse if ( ret == 0 )\n    // timeout; no event detected\nelse\n{\n    // If we detect the event, zero it out so we can reuse the structure\n    if ( pfd[0].revents & POLLIN )\n        pfd[0].revents = 0;\n        // input event on sock1\n\n    if ( pfd[1].revents & POLLOUT )\n        pfd[1].revents = 0;\n        // output event on sock2\n}`, `70317240695889470000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="c"\n              >\n                <span class="gatsby-code-button-language">c</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="c"><pre style="counter-reset: linenumber NaN" class="language-c line-numbers"><code class="language-c"><span class="token comment">// The structure for two events</span>\n<span class="token keyword">struct</span> <span class="token class-name">pollfd</span> fds<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n\n<span class="token comment">// Monitor sock1 for input</span>\nfds<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>fd <span class="token operator">=</span> sock1<span class="token punctuation">;</span>\nfds<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>events <span class="token operator">=</span> POLLIN<span class="token punctuation">;</span>\n\n<span class="token comment">// Monitor sock2 for output</span>\nfds<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>fd <span class="token operator">=</span> sock2<span class="token punctuation">;</span>\nfds<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>events <span class="token operator">=</span> POLLOUT<span class="token punctuation">;</span>\n\n<span class="token comment">// Wait 10 seconds</span>\n<span class="token keyword">int</span> ret <span class="token operator">=</span> <span class="token function">poll</span><span class="token punctuation">(</span> <span class="token operator">&amp;</span>fds<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">10000</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">// Check if poll actually succeed</span>\n<span class="token keyword">if</span> <span class="token punctuation">(</span> ret <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token punctuation">)</span>\n    <span class="token comment">// report error and abort</span>\n<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> ret <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">)</span>\n    <span class="token comment">// timeout; no event detected</span>\n<span class="token keyword">else</span>\n<span class="token punctuation">{</span>\n    <span class="token comment">// If we detect the event, zero it out so we can reuse the structure</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span> pfd<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>revents <span class="token operator">&amp;</span> POLLIN <span class="token punctuation">)</span>\n        pfd<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>revents <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n        <span class="token comment">// input event on sock1</span>\n\n    <span class="token keyword">if</span> <span class="token punctuation">(</span> pfd<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>revents <span class="token operator">&amp;</span> POLLOUT <span class="token punctuation">)</span>\n        pfd<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>revents <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n        <span class="token comment">// output event on sock2</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>它和 select() 功能基本相同。同样需要每次将 <code class="language-text">struct pollfd *fds</code> 复制到内核，返回后同样需要进行轮询每一个 pollfd 是否已经 I/O 准备好。poll() 取消了 1024 个描述符数量上限，但是数量太大以后不能保证执行效率，因为复制大量内存到内核十分低效，所需时间与描述符数量成正比。poll() 在 pollfd 的重复利用上比 select() 的 <code class="language-text">fd_set</code> 会更好。</p>\n<p>如果在多线程下，如果一个线程对某个描述符调用了 poll() 系统调用，但是另一个线程关闭了该描述符，会导致 poll() 调用结果不确定，该问题同样出现在 select() 中。</p>\n<h3 id="epoll"><a href="#epoll" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>epoll</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="37439350746435490000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`int epoll_create(int size);\nint epoll_ctl(int epfd, int op, int fd, struct epoll_event *event)；\nint epoll_wait(int epfd, struct epoll_event * events, int maxevents, int timeout);`, `37439350746435490000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="c"\n              >\n                <span class="gatsby-code-button-language">c</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="c"><pre style="counter-reset: linenumber NaN" class="language-c line-numbers"><code class="language-c"><span class="token keyword">int</span> <span class="token function">epoll_create</span><span class="token punctuation">(</span><span class="token keyword">int</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">int</span> <span class="token function">epoll_ctl</span><span class="token punctuation">(</span><span class="token keyword">int</span> epfd<span class="token punctuation">,</span> <span class="token keyword">int</span> op<span class="token punctuation">,</span> <span class="token keyword">int</span> fd<span class="token punctuation">,</span> <span class="token keyword">struct</span> <span class="token class-name">epoll_event</span> <span class="token operator">*</span>event<span class="token punctuation">)</span>；\n<span class="token keyword">int</span> <span class="token function">epoll_wait</span><span class="token punctuation">(</span><span class="token keyword">int</span> epfd<span class="token punctuation">,</span> <span class="token keyword">struct</span> <span class="token class-name">epoll_event</span> <span class="token operator">*</span> events<span class="token punctuation">,</span> <span class="token keyword">int</span> maxevents<span class="token punctuation">,</span> <span class="token keyword">int</span> timeout<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="99429910780858810000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// Create the epoll descriptor. Only one is needed per app, and is used to monitor all sockets.\n// The function argument is ignored (it was not before, but now it is), so put your favorite number here\nint pollingfd = epoll_create( 0xCAFE );\n\nif ( pollingfd < 0 )\n // report error\n\n// Initialize the epoll structure in case more members are added in future\nstruct epoll_event ev = { 0 };\n\n// Associate the connection class instance with the event. You can associate anything\n// you want, epoll does not use this information. We store a connection class pointer, pConnection1\nev.data.ptr = pConnection1;\n\n// Monitor for input, and do not automatically rearm the descriptor after the event\nev.events = EPOLLIN | EPOLLONESHOT;\n// Add the descriptor into the monitoring list. We can do it even if another thread is\n// waiting in epoll_wait - the descriptor will be properly added\nif ( epoll_ctl( epollfd, EPOLL_CTL_ADD, pConnection1->getSocket(), &ev ) != 0 )\n    // report error\n\n// Wait for up to 20 events (assuming we have added maybe 200 sockets before that it may happen)\nstruct epoll_event pevents[ 20 ];\n\n// Wait for 10 seconds, and retrieve less than 20 epoll_event and store them into epoll_event array\nint ready = epoll_wait( pollingfd, pevents, 20, 10000 );\n// Check if epoll actually succeed\nif ( ret == -1 )\n    // report error and abort\nelse if ( ret == 0 )\n    // timeout; no event detected\nelse\n{\n    // Check if any events detected\n    for ( int i = 0; i < ret; i++ )\n    {\n        if ( pevents[i].events & EPOLLIN )\n        {\n            // Get back our connection pointer\n            Connection * c = (Connection*) pevents[i].data.ptr;\n            c->handleReadEvent();\n         }\n    }\n}`, `99429910780858810000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="c"\n              >\n                <span class="gatsby-code-button-language">c</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="c"><pre style="counter-reset: linenumber NaN" class="language-c line-numbers"><code class="language-c"><span class="token comment">// Create the epoll descriptor. Only one is needed per app, and is used to monitor all sockets.</span>\n<span class="token comment">// The function argument is ignored (it was not before, but now it is), so put your favorite number here</span>\n<span class="token keyword">int</span> pollingfd <span class="token operator">=</span> <span class="token function">epoll_create</span><span class="token punctuation">(</span> <span class="token number">0xCAFE</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">if</span> <span class="token punctuation">(</span> pollingfd <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token punctuation">)</span>\n <span class="token comment">// report error</span>\n\n<span class="token comment">// Initialize the epoll structure in case more members are added in future</span>\n<span class="token keyword">struct</span> <span class="token class-name">epoll_event</span> ev <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token comment">// Associate the connection class instance with the event. You can associate anything</span>\n<span class="token comment">// you want, epoll does not use this information. We store a connection class pointer, pConnection1</span>\nev<span class="token punctuation">.</span>data<span class="token punctuation">.</span>ptr <span class="token operator">=</span> pConnection1<span class="token punctuation">;</span>\n\n<span class="token comment">// Monitor for input, and do not automatically rearm the descriptor after the event</span>\nev<span class="token punctuation">.</span>events <span class="token operator">=</span> EPOLLIN <span class="token operator">|</span> EPOLLONESHOT<span class="token punctuation">;</span>\n<span class="token comment">// Add the descriptor into the monitoring list. We can do it even if another thread is</span>\n<span class="token comment">// waiting in epoll_wait - the descriptor will be properly added</span>\n<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token function">epoll_ctl</span><span class="token punctuation">(</span> epollfd<span class="token punctuation">,</span> EPOLL_CTL_ADD<span class="token punctuation">,</span> pConnection1<span class="token operator">-></span><span class="token function">getSocket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>ev <span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span> <span class="token punctuation">)</span>\n    <span class="token comment">// report error</span>\n\n<span class="token comment">// Wait for up to 20 events (assuming we have added maybe 200 sockets before that it may happen)</span>\n<span class="token keyword">struct</span> <span class="token class-name">epoll_event</span> pevents<span class="token punctuation">[</span> <span class="token number">20</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>\n\n<span class="token comment">// Wait for 10 seconds, and retrieve less than 20 epoll_event and store them into epoll_event array</span>\n<span class="token keyword">int</span> ready <span class="token operator">=</span> <span class="token function">epoll_wait</span><span class="token punctuation">(</span> pollingfd<span class="token punctuation">,</span> pevents<span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">10000</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">// Check if epoll actually succeed</span>\n<span class="token keyword">if</span> <span class="token punctuation">(</span> ret <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token punctuation">)</span>\n    <span class="token comment">// report error and abort</span>\n<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> ret <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">)</span>\n    <span class="token comment">// timeout; no event detected</span>\n<span class="token keyword">else</span>\n<span class="token punctuation">{</span>\n    <span class="token comment">// Check if any events detected</span>\n    <span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> ret<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">if</span> <span class="token punctuation">(</span> pevents<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>events <span class="token operator">&amp;</span> EPOLLIN <span class="token punctuation">)</span>\n        <span class="token punctuation">{</span>\n            <span class="token comment">// Get back our connection pointer</span>\n            Connection <span class="token operator">*</span> c <span class="token operator">=</span> <span class="token punctuation">(</span>Connection<span class="token operator">*</span><span class="token punctuation">)</span> pevents<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>ptr<span class="token punctuation">;</span>\n            c<span class="token operator">-></span><span class="token function">handleReadEvent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n         <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>epoll 仅仅适用于 Linux OS。</p>\n<p>它是 select 和 poll 的增强版，更加灵活而且没有描述符限制。它将用户关心的描述符放到内核的一个事件表中，从而只需要在用户空间和内核空间拷贝一次。</p>\n<p>select 和 poll 方式中，进程只有在调用一定的方法后，内核才对所有监视的描述符进行扫描。而 epoll 事先通过 <code class="language-text">epoll_ctl()</code> 来注册描述符，一旦基于某个描述符就绪时，内核会采用类似 callback 的回调机制，迅速激活这个描述符，当进程调用 <code class="language-text">epoll_wait()</code> 时便得到通知。</p>\n<p>新版本的 <code class="language-text">epoll_create(int size)</code> 参数 size 不起任何作用，在旧版本的 epoll 中如果描述符的数量大于 size，不保证服务质量。</p>\n<p><code class="language-text">epoll_ctl()</code> 执行一次系统调用，用于向内核注册新的描述符或者是改变某个文件描述符的状态。已注册的描述符在内核中会被维护在一棵红黑树上，通过回调函数内核会将 I/O 准备好的描述符加入到一个链表中管理。</p>\n<p><code class="language-text">epoll_wait()</code> 取出在内核中通过链表维护的 I/O 准备好的描述符，将他们从内核复制到程序中，不需要像 select/poll 对注册的所有描述符遍历一遍。</p>\n<p>epoll 对多线程编程更友好，同时多个线程对同一个描述符调用了 <code class="language-text">epoll_wait</code> 也不会产生像 select/poll 的不确定情况。或者一个线程调用了 <code class="language-text">epoll_wait</code> 另一个线程关闭了同一个描述符也不会产生不确定情况。</p>\n<h2 id="select-和-poll-比较"><a href="#select-%E5%92%8C-poll-%E6%AF%94%E8%BE%83" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>select 和 poll 比较</h2>\n<h3 id="功能"><a href="#%E5%8A%9F%E8%83%BD" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>功能</h3>\n<p>它们提供了几乎相同的功能，但是在一些细节上有所不同：</p>\n<ul>\n<li>select 会修改 <code class="language-text">fd_set</code> 参数，而 poll 不会；</li>\n<li>select 默认只能监听 1024 个描述符，如果要监听更多的话，需要修改 <code class="language-text">FD_SETSIZE</code> 之后重新编译；</li>\n<li>poll 提供了更多的事件类型。</li>\n</ul>\n<h3 id="速度"><a href="#%E9%80%9F%E5%BA%A6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>速度</h3>\n<p>poll 和 select 在速度上都很慢。</p>\n<ul>\n<li>它们都采取轮询的方式来找到 I/O 完成的描述符，如果描述符很多，那么速度就会很慢；</li>\n<li>select 只使用每个描述符的 3 位，而 poll 通常需要使用 64 位，因此 poll 需要复制更多的内核空间。</li>\n</ul>\n<h3 id="可移植性"><a href="#%E5%8F%AF%E7%A7%BB%E6%A4%8D%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>可移植性</h3>\n<p>几乎所有的系统都支持 select，但是只有比较新的系统支持 poll。</p>\n<h2 id="eopll-工作模式"><a href="#eopll-%E5%B7%A5%E4%BD%9C%E6%A8%A1%E5%BC%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>eopll 工作模式</h2>\n<p><code class="language-text">epoll_event</code> 有两种触发模式：LT（level trigger）和 ET（edge trigger）。</p>\n<h3 id="lt-模式"><a href="#lt-%E6%A8%A1%E5%BC%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>LT 模式</h3>\n<p>当 <code class="language-text">epoll_wait()</code> 检测到描述符事件发生并将此事件通知应用程序，应用程序可以不立即处理该事件。下次调用 <code class="language-text">epoll_wait()</code> 时，会再次响应应用程序并通知此事件。是默认的一种模式，并且同时支持 Blocking 和 No-Blocking。</p>\n<h3 id="et-模式"><a href="#et-%E6%A8%A1%E5%BC%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ET 模式</h3>\n<p>当 <code class="language-text">epoll_wait()</code> 检测到描述符事件发生并将此事件通知应用程序，应用程序必须立即处理该事件。如果不处理，下次调用 <code class="language-text">epoll_wait()</code> 时，不会再次响应应用程序并通知此事件。很大程度上减少了 epoll 事件被重复触发的次数，因此效率要比 LT 模式高。只支持 No-Blocking，以避免由于一个文件句柄的阻塞读/阻塞写操作把处理多个文件描述符的任务饿死。</p>\n<h2 id="select-poll-epoll-应用场景"><a href="#select-poll-epoll-%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>select poll epoll 应用场景</h2>\n<p>很容易产生一种错觉认为只要用 epoll 就可以了，select poll 都是历史遗留问题，并没有什么应用场景，其实并不是这样的。</p>\n<h3 id="select-应用场景"><a href="#select-%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>select 应用场景</h3>\n<p>select()、poll()、<code class="language-text">epoll_wait()</code> 都有一个 timeout 参数，在 select() 中 timeout 的精确度为 1ns，而 poll() 和 <code class="language-text">epoll_wait()</code> 中则为 1ms。所以 select 更加适用于实时要求更高的场景，比如核反应堆的控制。</p>\n<p>select 历史更加悠久，它的可移植性更好，几乎被所有主流平台所支持。</p>\n<h3 id="poll-应用场景"><a href="#poll-%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>poll 应用场景</h3>\n<p>poll 没有最大描述符数量的限制，如果平台支持应该采用 poll 且对实时性要求并不是十分严格，而不是 select。</p>\n<p>需要同时监控小于 1000 个描述符。那么也没有必要使用 epoll，因为这个应用场景下并不能体现 epoll 的优势。</p>\n<p>需要监控的描述符状态变化多，而且都是非常短暂的。因为 epoll 中的所有描述符都存储在内核中，造成每次需要对描述符的状态改变都需要通过 <code class="language-text">epoll_ctl()</code> 进行系统调用，频繁系统调用降低效率。epoll 的描述符存储在内核，不容易调试。</p>\n<h3 id="epoll-应用场景"><a href="#epoll-%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>epoll 应用场景</h3>\n<p>程序只需要运行在 Linux 平台上，有非常大量的描述符需要同时轮询，而且这些连接最好是长连接。</p>\n<h3 id="性能对比"><a href="#%E6%80%A7%E8%83%BD%E5%AF%B9%E6%AF%94" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>性能对比</h3>\n<blockquote>\n<p><a href="http://lse.sourceforge.net/epoll/index.html" target="_blank" rel="nofollow noreferrer noopener">epoll Scalability Web Page</a></p>\n</blockquote>',
id:"/home/runner/work/GatsbyBlog/GatsbyBlog/blog/鸟哥的Linux私房菜读书笔记/index.md absPath of file >>> MarkdownRemark",timeToRead:31,frontmatter:{date:"2018-04-01 23:33:25",path:"/linux-introduce/",tags:"面试, 操作系统, Linux, 后端, 读书笔记",title:"鸟哥的Linux私房菜读书笔记",draft:null}},{excerpt:"…",html:'<h1 id="一、-概述"><a href="#%E4%B8%80%E3%80%81-%E6%A6%82%E8%BF%B0" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>一、 概述</h1>\n<h2 id="操作系统基本特征"><a href="#%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%9F%BA%E6%9C%AC%E7%89%B9%E5%BE%81" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>操作系统基本特征</h2>\n<h3 id="并发"><a href="#%E5%B9%B6%E5%8F%91" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>并发</h3>\n<ul>\n<li>并发性是指宏观上在一段时间内能同时运行多个程序，而并行性则指同一时刻能运行多个指令。</li>\n<li>并行需要硬件支持，如多流水线或者多处理器。</li>\n<li>操作系统通过引入进程和线程，使得程序能够并发运行。</li>\n</ul>\n<h3 id="共享"><a href="#%E5%85%B1%E4%BA%AB" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>共享</h3>\n<ul>\n<li>共享是指系统中的资源可以供多个并发进程共同使用。</li>\n<li>有两种共享方式：互斥共享和同时共享。</li>\n<li>互斥共享的资源称为临界资源，例如打印机等，在同一时间只允许一个进程访问，需要用同步机制来实现对临界资源的访问。</li>\n</ul>\n<h3 id="虚拟"><a href="#%E8%99%9A%E6%8B%9F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>虚拟</h3>\n<ul>\n<li>虚拟技术把一个物理实体转换为多个逻辑实体。</li>\n<li>主要有两种虚拟技术：时分复用技术和空分复用技术。例如多个进程能在同一个处理器上并发执行使用了时分复用技术，让每个进程轮流占有处理器，每次只执行一小个时间片并快速切换。</li>\n</ul>\n<h3 id="异步"><a href="#%E5%BC%82%E6%AD%A5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>异步</h3>\n<blockquote>\n<p>异步指进程不是一次性执行完毕，而是走走停停，以不可知的速度向前推进。</p>\n</blockquote>\n<h2 id="操作系统基本功能"><a href="#%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%9F%BA%E6%9C%AC%E5%8A%9F%E8%83%BD" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>操作系统基本功能</h2>\n<h3 id="进程管理"><a href="#%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>进程管理</h3>\n<blockquote>\n<p>进程控制、进程同步、进程通信、死锁处理、处理机调度等。</p>\n</blockquote>\n<h3 id="内存管理"><a href="#%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>内存管理</h3>\n<blockquote>\n<p>内存分配、地址映射、内存保护与共享和内存扩充等功能。</p>\n</blockquote>\n<h3 id="文件管理"><a href="#%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>文件管理</h3>\n<blockquote>\n<p>文件存储空间的管理、目录管理及文件读写管理和保护等。</p>\n</blockquote>\n<h3 id="设备管理"><a href="#%E8%AE%BE%E5%A4%87%E7%AE%A1%E7%90%86" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>设备管理</h3>\n<blockquote>\n<p>完成用户的 I/O 请求，方便用户使用各种设备，并提高设备的利用率，主要包括缓冲管理、设备分配、设备处理和虛拟设备等功能。</p>\n</blockquote>\n<h2 id="系统调用"><a href="#%E7%B3%BB%E7%BB%9F%E8%B0%83%E7%94%A8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>系统调用</h2>\n<blockquote>\n<p>如果一个进程在用户态需要使用内核态的功能，就进行系统调用从而陷入内核，由操作系统代为完成。</p>\n</blockquote>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/tGPV0-2cb10c80ff610a9dd985581fabeaae37-f4664.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 753px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 61.354581673306775%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAABjklEQVQoz3VRDW+bMBDN//8/0zapk6ZK06QmgUASvglJWUP5MMaAsQ026RWkLkuzJ/t0Z/nuvbtbXP5FP0gnpxYSTzF+POJfEfp5IsuEli27fMIC7jiO73aKhRD2a/2YyK9u/s16+bL78+Bly1z9jgkizcfnv8kzOsYQKnGJOWOYipwODR8qLmsOamRF6jTN4JtSV8lSSlyW4A3DwDlHCDXNLcPUTk9peyubMRYEQVliLziEp3hrOebetlxvpW10Y6dtjNVa39uO7Qd7x/PCyA0OGGMoDawLQsh2uy2KwvUDy3HD6Hg4nmzX0zXdNHeGYWraxrKd8BAF09ENs8RYKQVKF3BBKgRCcErpTVefkabpnYGB/tfz+TnHT+eW9QN0rcZx7rzruizL+r4HH5TeW9V4YbR9Lqofx6rlAmKp3gG9QV3f9+M4fplwh3nWmjXsu3NOsqImBAYDPEmS1HW9XK7W6zX48HgvecpOW/EQVayXH+XmLcL+wIKKqqr+y9yKIURdL9X1kOYcsOBfM78BtuCq8Wha7mEAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="tGPV0" title="" data-src="/static/tGPV0-2cb10c80ff610a9dd985581fabeaae37-f4664.png" data-srcset="/static/tGPV0-2cb10c80ff610a9dd985581fabeaae37-e4889.png 200w,\n/static/tGPV0-2cb10c80ff610a9dd985581fabeaae37-63af3.png 400w,\n/static/tGPV0-2cb10c80ff610a9dd985581fabeaae37-f4664.png 753w" data-sizes="(max-width: 753px) 100vw, 753px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<blockquote>\n<p>Linux 的系统调用主要有以下这些：</p>\n</blockquote>\n<table>\n<thead>\n<tr>\n<th align="center">Task</th>\n<th align="center">Commands</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align="center">进程控制</td>\n<td align="center">fork(); exit(); wait();</td>\n</tr>\n<tr>\n<td align="center">进程通信</td>\n<td align="center">pipe(); shmget(); mmap();</td>\n</tr>\n<tr>\n<td align="center">文件操作</td>\n<td align="center">open(); read(); write();</td>\n</tr>\n<tr>\n<td align="center">设备操作</td>\n<td align="center">ioctl(); read(); write();</td>\n</tr>\n<tr>\n<td align="center">信息维护</td>\n<td align="center">getpid(); alarm(); sleep();</td>\n</tr>\n<tr>\n<td align="center">安全</td>\n<td align="center">chmod(); umask(); chown();</td>\n</tr>\n</tbody>\n</table>\n<h2 id="大内核和微内核"><a href="#%E5%A4%A7%E5%86%85%E6%A0%B8%E5%92%8C%E5%BE%AE%E5%86%85%E6%A0%B8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>大内核和微内核</h2>\n<h3 id="大内核"><a href="#%E5%A4%A7%E5%86%85%E6%A0%B8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>大内核</h3>\n<ul>\n<li>大内核是将操作系统功能作为一个紧密结合的整体放到内核。</li>\n<li>由于各模块共享信息，因此有很高的性能。</li>\n</ul>\n<h3 id="微内核"><a href="#%E5%BE%AE%E5%86%85%E6%A0%B8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>微内核</h3>\n<ul>\n<li>由于操作系统不断复杂，因此将一部分操作系统功能移出内核，从而降低内核的复杂性。移出的部分根据分层的原则划分成若干服务，相互独立。</li>\n<li>在微内核结构下，操作系统被划分成小的、定义良好的模块，只有微内核这一个模块运行在内核态，其余模块运行在用户态。</li>\n<li>因为需要频繁地在用户态和核心态之间进行切换，所以会有一定的性能损失。</li>\n</ul>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2_14_microkernelArchitecture-dfb68dcc08d7a8d01c74c5ae2867570b-cec2e.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 609px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 48.44006568144499%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAECAwX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB1y9IiYv/xAAYEAACAwAAAAAAAAAAAAAAAAABMQAQQf/aAAgBAQABBQILKCn/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAYEAACAwAAAAAAAAAAAAAAAAAAASAhMf/aAAgBAQAGPwJ0ZH//xAAbEAEAAgIDAAAAAAAAAAAAAAABABEQITFxgf/aAAgBAQABPyGgAqmkl67njjghP//aAAwDAQACAAMAAAAQj8//xAAWEQADAAAAAAAAAAAAAAAAAAABEBH/2gAIAQMBAT8QhX//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAbEAEAAQUBAAAAAAAAAAAAAAABABEhMUFxUf/aAAgBAQABPxBAEsi3eRamA1DKCINe2mO+S5HyYT//2Q==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2 14 microkernelArchitecture" title="" data-src="/static/2_14_microkernelArchitecture-dfb68dcc08d7a8d01c74c5ae2867570b-cec2e.jpg" data-srcset="/static/2_14_microkernelArchitecture-dfb68dcc08d7a8d01c74c5ae2867570b-7d719.jpg 200w,\n/static/2_14_microkernelArchitecture-dfb68dcc08d7a8d01c74c5ae2867570b-126ca.jpg 400w,\n/static/2_14_microkernelArchitecture-dfb68dcc08d7a8d01c74c5ae2867570b-cec2e.jpg 609w" data-sizes="(max-width: 609px) 100vw, 609px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h2 id="中断分类"><a href="#%E4%B8%AD%E6%96%AD%E5%88%86%E7%B1%BB" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>中断分类</h2>\n<h3 id="外中断"><a href="#%E5%A4%96%E4%B8%AD%E6%96%AD" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>外中断</h3>\n<blockquote>\n<p>由 CPU 执行指令以外的事件引起，如 I/O 结束中断，表示设备输入/输出处理已经完成，处理器能够发送下一个输入/输出请求。此外还有时钟中断、控制台中断等。</p>\n</blockquote>\n<h3 id="异常"><a href="#%E5%BC%82%E5%B8%B8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>异常</h3>\n<blockquote>\n<p>由 CPU 执行指令的内部事件引起，如非法操作码、地址越界、算术溢出等。</p>\n</blockquote>\n<h3 id="陷入"><a href="#%E9%99%B7%E5%85%A5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>陷入</h3>\n<blockquote>\n<p>在用户程序中使用系统调用。</p>\n</blockquote>\n<h1 id="进程管理-1"><a href="#%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>进程管理</h1>\n<h2 id="进程与线程"><a href="#%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>进程与线程</h2>\n<h3 id="进程"><a href="#%E8%BF%9B%E7%A8%8B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>进程</h3>\n<ul>\n<li>进程是资源分配的基本单位。</li>\n<li>进程控制块 (Process Control Block, PCB) 描述进程的基本信息和运行状态，所谓的创建进程和撤销进程，都是指对 PCB 的操作。</li>\n<li>下图显示了 4 个程序创建了 4 个进程，这 4 个进程可以并发地执行。</li>\n</ul>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/a6ac2b08-3861-4e85-baa8-382287bfee9f-e416a7c0d6f062e4e756721b17b53f82-7b8b1.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 36.36363636363637%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsSAAALEgHS3X78AAAA00lEQVQY012Q6QqDQAyEff/n848oKgreN15V1+1XU7ZLA4ZsMsnM6GitlVIvK7Zto6OfuO/7PE9T/xUOHwt1XWdZFkVRWZZ5nu/7bnDTNBm0vfldltZxHMuykM3suq6qqpqmkWdRFKICAvg+y5D0fU8ehoFZ27acGMeRGv2+7zMFRwZAQZbOZzkMQ1Hrum6SJFDFcRwEged5OMcOzF3XCT+bAH6yEYPJeZ77J8BxCGY5jwsupmmKENRR08GO6HfUE7ZP+5cQ67ryz+BEC3e5zhNrjN7kD5Km3CYIRQAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="a6ac2b08 3861 4e85 baa8 382287bfee9f" title="" data-src="/static/a6ac2b08-3861-4e85-baa8-382287bfee9f-e416a7c0d6f062e4e756721b17b53f82-fee1c.png" data-srcset="/static/a6ac2b08-3861-4e85-baa8-382287bfee9f-e416a7c0d6f062e4e756721b17b53f82-a67b7.png 200w,\n/static/a6ac2b08-3861-4e85-baa8-382287bfee9f-e416a7c0d6f062e4e756721b17b53f82-0b187.png 400w,\n/static/a6ac2b08-3861-4e85-baa8-382287bfee9f-e416a7c0d6f062e4e756721b17b53f82-fee1c.png 800w,\n/static/a6ac2b08-3861-4e85-baa8-382287bfee9f-e416a7c0d6f062e4e756721b17b53f82-7b8b1.png 803w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h3 id="线程"><a href="#%E7%BA%BF%E7%A8%8B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>线程</h3>\n<ul>\n<li>线程是独立调度的基本单位。</li>\n<li>一个进程中可以有多个线程，它们共享进程资源。</li>\n</ul>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/3cd630ea-017c-488d-ad1d-732b4efeddf5-9010a1a6763d38cab1904718bd22acf8-7320c.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 367px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 82.83378746594006%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAIAAABSJhvpAAAACXBIWXMAAAsSAAALEgHS3X78AAABS0lEQVQ4y41SCZKCMBDk/4/C/YMrliLiQmABSbgEghxuQ9QCCbpdKUgy05meQ7lN0XUdvoZhaJsNvvpeb5rmtgBFetu2reu6pmnGcYz9IhlOYRieRwiCABzzePxery+XC47nKYRDT2aUPtWOlTPGCCEvpifwaE+OokhKRoSDrosU5uQ8zwcyY/PncXQcZ7/bVVUlzfYd2XVcaEYtTqYp5S+S0RuHkF/Ps22bUjrP62NkJ/B91AwShN+/yGITsehLXa1UFa2WFvxdZF7yrbbdalos0zwiT83PPhmHw49lnYbIiwWDHyqEkl4fqOsaM4C0MWTEJjheZ0jTtCfblpXEMeYM+u+LMtxwXla8KstyYhoWbsRcKtKsOOfoFiYeNZfmXBTFXTZ+0NY8gHlEQGg+GoYY77FVIMuynux7Hg3DlwVV6YAkSeZWKMI9yH9NNNZvEuaUPAAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="3cd630ea 017c 488d ad1d 732b4efeddf5" title="" data-src="/static/3cd630ea-017c-488d-ad1d-732b4efeddf5-9010a1a6763d38cab1904718bd22acf8-7320c.png" data-srcset="/static/3cd630ea-017c-488d-ad1d-732b4efeddf5-9010a1a6763d38cab1904718bd22acf8-3f7ac.png 200w,\n/static/3cd630ea-017c-488d-ad1d-732b4efeddf5-9010a1a6763d38cab1904718bd22acf8-7320c.png 367w" data-sizes="(max-width: 367px) 100vw, 367px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h3 id="区别"><a href="#%E5%8C%BA%E5%88%AB" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>区别</h3>\n<ul>\n<li>拥有资源：进程是资源分配的基本单位，但是线程不拥有资源，线程可以访问隶属进程的资源。</li>\n<li>调度：线程是独立调度的基本单位，在同一进程中，线程的切换不会引起进程切换，从一个进程内的线程切换到另一个进程中的线程时，会引起进程切换。</li>\n<li>系统开销：由于创建或撤销进程时，系统都要为之分配或回收资源，如内存空间、I/O 设备等，所付出的开销远大于创建或撤销线程时的开销。类似地，在进行进程切换时，涉及当前执行进程 CPU 环境的保存及新调度进程 CPU 环境的设置，而线程切换时只需保存和设置少量寄存器内容，开销很小。</li>\n<li>通信方面：进程间通信 (IPC) 需要进程同步和互斥手段的辅助，以保证数据的一致性。而线程间可以通过直接读/写同一进程中的数据段（如全局变量）来进行通信。</li>\n</ul>\n<p>举例：QQ 和浏览器是两个进程，浏览器进程里面有很多线程，例如 HTTP 请求线程、事件响应线程、渲染线程等等，线程的并发执行使得在浏览器中点击一个新链接从而发起 HTTP 请求时，浏览器还可以响应用户的其它事件。</p>\n<h2 id="进程状态的切换"><a href="#%E8%BF%9B%E7%A8%8B%E7%8A%B6%E6%80%81%E7%9A%84%E5%88%87%E6%8D%A2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>进程状态的切换</h2>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/ProcessState-283865e6bea83a995b51678c09fe31f1-4ddc2.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 679px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 64.50662739322533%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAAByElEQVQoz2VS6XKbMBDm/R+rnf5xwkxcx2CDzGFACHEfQidSlThtHXtHo9Huft9qL8c8CUJoHEe6UkLIupIK43meOec3rzb6duzb+U60Jl1ACEIAguBwOMIC+r7vui5C1Ydb63u0Y2MwyZji9n7wPYvcZE/6esLDOqhNOfVcexfv9W3nRV43ZRloTj47elrwzaJF3xMQr8lVksWqoAh2+5dTGP5yf6Y4dQgjsIU5zosWTkvPRkyaRCphNsH6jFSA4Ysi0y0noWQ7oCLZtfMgBP9e8ydEjOlaurRN+TpZdZOrmFKt6BdECdKAG9i5r3OkY9ZAEP8Ozz9GMnwwFWuXLi2iAOxhW0pBeJ8mwLNjeOx2PePk6r95+7zFVXmiTTLk7iU9XJI4CE9e/D40CSfDME5CiEeykry9vlC+FpcQR0lzzfoS5Wc/j0BX+kywh+b/J1fIEJsLyTZJv+rXN7FRGe+jIjcr/VgEvem/c9Zmng0hJstM3Zi+WRecKMUGOjZzTSTdaLtU575ZrqkFaC7uft42k+cGFgaVJo51FJuxW/I6OEfB4f1wjL0ye5WMlshgZAr4md1z2ncbaqhksCtjFKOusrP9Z3+QPwEM5RnOsz+GAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="ProcessState" title="" data-src="/static/ProcessState-283865e6bea83a995b51678c09fe31f1-4ddc2.png" data-srcset="/static/ProcessState-283865e6bea83a995b51678c09fe31f1-05daf.png 200w,\n/static/ProcessState-283865e6bea83a995b51678c09fe31f1-38f98.png 400w,\n/static/ProcessState-283865e6bea83a995b51678c09fe31f1-4ddc2.png 679w" data-sizes="(max-width: 679px) 100vw, 679px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<ul>\n<li>就绪状态（ready）：等待被调度</li>\n<li>运行状态（running）</li>\n<li>阻塞状态（waiting）：等待资源</li>\n</ul>\n<p>应该注意以下内容：</p>\n<ul>\n<li>只有就绪态和运行态可以相互转换，其它的都是单向转换。就绪状态的进程通过调度算法从而获得 CPU 时间，转为运行状态；而运行状态的进程，在分配给它的 CPU 时间片用完之后就会转为就绪状态，等待下一次调度。</li>\n<li>阻塞状态是缺少需要的资源从而由运行状态转换而来，但是该资源不包括 CPU 时间，缺少 CPU 时间会从运行态转换为就绪态。</li>\n</ul>\n<h2 id="调度算法"><a href="#%E8%B0%83%E5%BA%A6%E7%AE%97%E6%B3%95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>调度算法</h2>\n<p>需要针对不同环境来讨论调度算法。</p>\n<h3 id="批处理系统中的调度"><a href="#%E6%89%B9%E5%A4%84%E7%90%86%E7%B3%BB%E7%BB%9F%E4%B8%AD%E7%9A%84%E8%B0%83%E5%BA%A6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>批处理系统中的调度</h3>\n<h4 id="先来先服务"><a href="#%E5%85%88%E6%9D%A5%E5%85%88%E6%9C%8D%E5%8A%A1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>先来先服务</h4>\n<blockquote>\n<p>first-come first-serverd（FCFS）</p>\n</blockquote>\n<ul>\n<li>调度最先进入就绪队列的作业。</li>\n<li>有利于长作业，但不利于短作业，因为短作业必须一直等待前面的长作业执行完毕才能执行，而长作业又需要执行很长时间，造成了短作业等待时间过长。</li>\n</ul>\n<h4 id="短作业优先"><a href="#%E7%9F%AD%E4%BD%9C%E4%B8%9A%E4%BC%98%E5%85%88" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>短作业优先</h4>\n<blockquote>\n<p>shortest job first（SJF）</p>\n</blockquote>\n<ul>\n<li>调度估计运行时间最短的作业。</li>\n<li>长作业有可能会饿死，处于一直等待短作业执行完毕的状态。因为如果一直有短作业到来，那么长作业永远得不到调度。</li>\n</ul>\n<h4 id="最短剩余时间优先"><a href="#%E6%9C%80%E7%9F%AD%E5%89%A9%E4%BD%99%E6%97%B6%E9%97%B4%E4%BC%98%E5%85%88" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>最短剩余时间优先</h4>\n<blockquote>\n<p>shortest remaining time next（SRTN）</p>\n</blockquote>\n<ol>\n<li>设定系统中有五个进程，每一个进程用一个进程控制块表示。</li>\n<li>输入每个进程的“优先数”和“要求运行时间”。</li>\n<li>为了调度方便，将五个进程按给定的优先数从大到小连成就绪队列。用一单元指出队列首进程，用指针指出队列的连接情况。</li>\n<li>处理机调度总是选队首进程运行。采用动态优先数算法，进程每运行一次优先数就减“1”，同时将运行时间减“1”。</li>\n<li>若要求运行时间为零，则将其状态置为“结束”,且退出队列。</li>\n<li>运行所设计程序，显示或打印逐次被选中进程的进程名以及进程控制块的动态变化过程。</li>\n</ol>\n<h3 id="交互式系统中的调度"><a href="#%E4%BA%A4%E4%BA%92%E5%BC%8F%E7%B3%BB%E7%BB%9F%E4%B8%AD%E7%9A%84%E8%B0%83%E5%BA%A6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>交互式系统中的调度</h3>\n<h4 id="优先级调度"><a href="#%E4%BC%98%E5%85%88%E7%BA%A7%E8%B0%83%E5%BA%A6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>优先级调度</h4>\n<ul>\n<li>除了可以手动赋予优先权之外，还可以把响应比作为优先权，这种调度方式叫做高响应比优先调度算法。</li>\n<li>响应比 = (等待时间 + 要求服务时间) / 要求服务时间 = 响应时间 / 要求服务时间</li>\n<li>这种调度算法主要是为了解决短作业优先调度算法长作业可能会饿死的问题，因为随着等待时间的增长，响应比也会越来越高。</li>\n</ul>\n<h4 id="时间片轮转"><a href="#%E6%97%B6%E9%97%B4%E7%89%87%E8%BD%AE%E8%BD%AC" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>时间片轮转</h4>\n<ul>\n<li>将所有就绪进程按 FCFS 的原则排成一个队列，每次调度时，把 CPU 时间分配给队首进程，该进程可以执行一个时间片。当时间片用完时，由计时器发出时钟中断，调度程序便停止该进程的执行，并将它送往就绪队列的末尾，同时继续把 CPU 时间分配给队首的进程。</li>\n<li>时间片轮转算法的效率和时间片的大小有很大关系。因为进程切换都要保存进程的信息并且载入新进程的信息，如果时间片太小，会导致进程切换得太频繁，在进程切换上就会花过多时间。</li>\n</ul>\n<h4 id="多级反馈队列"><a href="#%E5%A4%9A%E7%BA%A7%E5%8F%8D%E9%A6%88%E9%98%9F%E5%88%97" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>多级反馈队列</h4>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/042cf928-3c8e-4815-ae9c-f2780202c68f-d3d513f0606ff99544602ecf603a2489-5032e.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 438px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 67.12328767123287%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABvElEQVQ4y5WTe2+CQBDE/f5fzKaN/5hojfUBx+NEfIAK+ACmO9ueJbVtUpKNHt7N/WZn7bVti/8+x+Pxx/fU6rkvl8sF1+sV2+0W1q6kYozHY8zncwRBgPV6rVWWJaIwRBhG8t4glN8WyyVut5uK3gW58Xw+wxijAsb4GAwGmEwmmC8WsKsVoihClmW6v20aBeCZqqrQfDrtdS0XRaGbHM1+v1fizWaDlQhynee5XngVIlJVAlJIOZ07IYu9WQhNHMdCE6Lf72M0HmE6nYroVoUOhwNyoQyFNhAXodhfLr0vy06MT13XailNU6VKkkRJ3ZqE/J0Wfw2lK7jb7VSEt7Jfs9kMnufBl76S2lqrop6EkMhFibTByntjAiGsHwmZtO/7GkAcR3h5fsYrQ5GkP9K3Gh7tnU4ntc/KshyNhPQgyEBYJKW1oii1rywKMjQn6Cz+aZkjwNlTm76Hp6c+hsOhUpKaM0dxCsexhRE3dDR9mynIAyFHgn1j/zgmTJcHzH2wE+2hI+xStt05dAvaqapSDmV6sCwr7RWpeBmLa05D91z3s/dwU1MrIf8puTQ8Tddqj4Ew/e7+78XnHW5i5J5nKsJzAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="042cf928 3c8e 4815 ae9c f2780202c68f" title="" data-src="/static/042cf928-3c8e-4815-ae9c-f2780202c68f-d3d513f0606ff99544602ecf603a2489-5032e.png" data-srcset="/static/042cf928-3c8e-4815-ae9c-f2780202c68f-d3d513f0606ff99544602ecf603a2489-86481.png 200w,\n/static/042cf928-3c8e-4815-ae9c-f2780202c68f-d3d513f0606ff99544602ecf603a2489-1ca59.png 400w,\n/static/042cf928-3c8e-4815-ae9c-f2780202c68f-d3d513f0606ff99544602ecf603a2489-5032e.png 438w" data-sizes="(max-width: 438px) 100vw, 438px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<ul>\n<li>如果一个进程需要执行 100 个时间片，如果采用轮转调度算法，那么需要交换 100 次。多级队列是为这种需要连续执行多个时间片的进程考虑，它设置了多个队列，每个队列时间片大小都不同，例如 1,2,4,8,..。进程在第一个队列没执行完，就会被移到下一个队列。这种方式下，之前的进程只需要交换 7 次。</li>\n<li>每个队列优先权也不同，最上面的优先权最高。因此只有上一个队列没有进程在排队，才能调度当前队列上的进程。</li>\n</ul>\n<h3 id="实时系统中的调度"><a href="#%E5%AE%9E%E6%97%B6%E7%B3%BB%E7%BB%9F%E4%B8%AD%E7%9A%84%E8%B0%83%E5%BA%A6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>实时系统中的调度</h3>\n<ul>\n<li>实时系统要求一个服务请求在一个确定时间内得到响应。</li>\n<li>分为硬实时和软实时，前者必须满足绝对的截止时间，后者可以容忍一定的超时。</li>\n</ul>\n<h2 id="进程同步"><a href="#%E8%BF%9B%E7%A8%8B%E5%90%8C%E6%AD%A5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>进程同步</h2>\n<h3 id="临界区"><a href="#%E4%B8%B4%E7%95%8C%E5%8C%BA" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>临界区</h3>\n<ul>\n<li>对临界资源进行访问的那段代码称为临界区。</li>\n<li>为了互斥访问临界资源，每个进程在进入临界区之前，需要先进行检查。</li>\n</ul>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="37575283634835020000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// entry section // critical section // exit section`, `37575283634835020000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html">// entry section // critical section // exit section</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<h3 id="同步与互斥"><a href="#%E5%90%8C%E6%AD%A5%E4%B8%8E%E4%BA%92%E6%96%A5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>同步与互斥</h3>\n<ul>\n<li>同步：多个进程按一定顺序执行；</li>\n<li>互斥：多个进程在同一时刻只有一个进程能进入临界区。</li>\n</ul>\n<h3 id="信号量"><a href="#%E4%BF%A1%E5%8F%B7%E9%87%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>信号量</h3>\n<ul>\n<li>\n<p>信号量（Semaphore）是一个整型变量，可以对其执行 down 和 up 操作，也就是常见的 P 和 V 操作。</p>\n<ul>\n<li><strong>down</strong> : 如果信号量大于 0 ，执行 -1 操作；如果信号量等于 0，进程睡眠，等待信号量大于 0；</li>\n<li><strong>up</strong> ：对信号量执行 +1 操作，唤醒睡眠的进程让其完成 down 操作。</li>\n</ul>\n</li>\n<li>down 和 up 操作需要被设计成原语，不可分割，通常的做法是在执行这些操作的时候屏蔽中断。</li>\n<li>如果信号量的取值只能为 0 或者 1，那么就成为了 <strong>互斥量（Mutex）</strong> ，0 表示临界区已经加锁，1 表示临界区解锁。</li>\n</ul>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="68740733472531140000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`typedef int semaphore;\nsemaphore mutex = 1;\nvoid P1() {\n    down(&mutex);\n    // 临界区\n    up(&mutex);\n}\n\nvoid P2() {\n    down(&mutex);\n    // 临界区\n    up(&mutex);\n}`, `68740733472531140000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="c"\n              >\n                <span class="gatsby-code-button-language">c</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="c"><pre style="counter-reset: linenumber NaN" class="language-c line-numbers"><code class="language-c"><span class="token keyword">typedef</span> <span class="token keyword">int</span> semaphore<span class="token punctuation">;</span>\nsemaphore mutex <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>\n<span class="token keyword">void</span> <span class="token function">P1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token function">down</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token comment">// 临界区</span>\n    <span class="token function">up</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">void</span> <span class="token function">P2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token function">down</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token comment">// 临界区</span>\n    <span class="token function">up</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><font size=3> <strong>使用信号量实现生产者-消费者问题</strong> </font> 问题描述：使用一个缓冲区来保存物品，只有缓冲区没有满，生产者才可以放入物品；只有缓冲区不为空，消费者才可以拿走物品。</p>\n<ul>\n<li>因为缓冲区属于临界资源，因此需要使用一个互斥量 mutex 来控制对缓冲区的互斥访问。</li>\n<li>为了同步生产者和消费者的行为，需要记录缓冲区中物品的数量。数量可以使用信号量来进行统计，这里需要使用两个信号量：empty 记录空缓冲区的数量，full 记录满缓冲区的数量。其中，empty 信号量是在生产者进程中使用，当 empty 不为 0 时，生产者才可以放入物品；full 信号量是在消费者进程中使用，当 full 信号量不为 0 时，消费者才可以取走物品。</li>\n<li>注意，不能先对缓冲区进行加锁，再测试信号量。也就是说，不能先执行 down(mutex) 再执行 down(empty)。如果这么做了，那么可能会出现这种情况：生产者对缓冲区加锁后，执行 down(empty) 操作，发现 empty = 0，此时生产者睡眠。消费者不能进入临界区，因为生产者对缓冲区加锁了，也就无法执行 up(empty) 操作，empty 永远都为 0，那么生产者和消费者就会一直等待下去，造成死锁。</li>\n</ul>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="25414311081297970000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`#define N 100\ntypedef int semaphore;\nsemaphore mutex = 1;\nsemaphore empty = N;\nsemaphore full = 0;\n\nvoid producer() {\n    while(TRUE){\n        int item = produce_item();\n        down(&empty);\n        down(&mutex);\n        insert_item(item);\n        up(&mutex);\n        up(&full);\n    }\n}\n\nvoid consumer() {\n    while(TRUE){\n        down(&full);\n        down(&mutex);\n        int item = remove_item();\n        up(&mutex);\n        up(&empty);\n        consume_item(item);\n    }\n}`, `25414311081297970000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="c"\n              >\n                <span class="gatsby-code-button-language">c</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="c"><pre style="counter-reset: linenumber NaN" class="language-c line-numbers"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">define</span> N 100</span>\n<span class="token keyword">typedef</span> <span class="token keyword">int</span> semaphore<span class="token punctuation">;</span>\nsemaphore mutex <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>\nsemaphore empty <span class="token operator">=</span> N<span class="token punctuation">;</span>\nsemaphore full <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n\n<span class="token keyword">void</span> <span class="token function">producer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">while</span><span class="token punctuation">(</span>TRUE<span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token keyword">int</span> item <span class="token operator">=</span> <span class="token function">produce_item</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token function">down</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>empty<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token function">down</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token function">insert_item</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token function">up</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token function">up</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>full<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">void</span> <span class="token function">consumer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">while</span><span class="token punctuation">(</span>TRUE<span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token function">down</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>full<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token function">down</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">int</span> item <span class="token operator">=</span> <span class="token function">remove_item</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token function">up</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token function">up</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>empty<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token function">consume_item</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="管程"><a href="#%E7%AE%A1%E7%A8%8B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>管程</h3>\n<ul>\n<li>使用信号量机制实现的生产者消费者问题需要客户端代码做很多控制，而管程把控制的代码独立出来，不仅不容易出错，也使得客户端代码调用更容易。</li>\n<li>c 语言不支持管程，下面的示例代码使用了类 Pascal 语言来描述管程。示例代码的管程提供了 insert() 和 remove() 方法，客户端代码通过调用这两个方法来解决生产者-消费者问题。</li>\n</ul>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="69863049822433500000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`monitor ProducerConsumer\n    integer i;\n    condition c;\n\n    procedure insert();\n    begin\n        // ...\n    end;\n\n    procedure remove();\n    begin\n        // ...\n    end;\nend monitor;`, `69863049822433500000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="pascal"\n              >\n                <span class="gatsby-code-button-language">pascal</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="pascal"><pre style="counter-reset: linenumber NaN" class="language-pascal line-numbers"><code class="language-pascal">monitor ProducerConsumer\n    integer i<span class="token punctuation">;</span>\n    condition c<span class="token punctuation">;</span>\n\n    <span class="token keyword">procedure</span> insert<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">begin</span>\n        <span class="token comment">// ...</span>\n    <span class="token keyword">end</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">procedure</span> remove<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">begin</span>\n        <span class="token comment">// ...</span>\n    <span class="token keyword">end</span><span class="token punctuation">;</span>\n<span class="token keyword">end</span> monitor<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li>管程有一个重要特性：在一个时刻只能有一个进程使用管程。进程在无法继续执行的时候不能一直占用管程，否则其它进程永远不能使用管程。</li>\n<li>管程引入了 <strong>条件变量</strong> 以及相关的操作：<strong>wait()</strong> 和 <strong>signal()</strong> 来实现同步操作。对条件变量执行 wait() 操作会导致调用进程阻塞，把管程让出来给另一个进程持有。signal() 操作用于唤醒被阻塞的进程。</li>\n</ul>\n<p><font size=3> <strong>使用管程实现生成者-消费者问题</strong> </font><br></p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="84277233239049220000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 管程\nmonitor ProducerConsumer\n    condition full, empty;\n    integer count := 0;\n    condition c;\n\n    procedure insert(item: integer);\n    begin\n        if count = N then wait(full);\n        insert_item(item);\n        count := count + 1;\n        if count = 1 then signal(empty);\n    end;\n\n    function remove: integer;\n    begin\n        if count = 0 then wait(empty);\n        remove = remove_item;\n        count := count - 1;\n        if count = N -1 then signal(full);\n    end;\nend monitor;\n\n// 生产者客户端\nprocedure producer\nbegin\n    while true do\n    begin\n        item = produce_item;\n        ProducerConsumer.insert(item);\n    end\nend;\n\n// 消费者客户端\nprocedure consumer\nbegin\n    while true do\n    begin\n        item = ProducerConsumer.remove;\n        consume_item(item);\n    end\nend;`, `84277233239049220000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="pascal"\n              >\n                <span class="gatsby-code-button-language">pascal</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="pascal"><pre style="counter-reset: linenumber NaN" class="language-pascal line-numbers"><code class="language-pascal"><span class="token comment">// 管程</span>\nmonitor ProducerConsumer\n    condition full<span class="token punctuation">,</span> empty<span class="token punctuation">;</span>\n    integer count <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n    condition c<span class="token punctuation">;</span>\n\n    <span class="token keyword">procedure</span> insert<span class="token punctuation">(</span>item<span class="token punctuation">:</span> integer<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">begin</span>\n        <span class="token keyword">if</span> count <span class="token operator">=</span> N <span class="token keyword">then</span> wait<span class="token punctuation">(</span>full<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        insert_item<span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        count <span class="token operator">:=</span> count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>\n        <span class="token keyword">if</span> count <span class="token operator">=</span> <span class="token number">1</span> <span class="token keyword">then</span> signal<span class="token punctuation">(</span>empty<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">end</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">function</span> remove<span class="token punctuation">:</span> integer<span class="token punctuation">;</span>\n    <span class="token keyword">begin</span>\n        <span class="token keyword">if</span> count <span class="token operator">=</span> <span class="token number">0</span> <span class="token keyword">then</span> wait<span class="token punctuation">(</span>empty<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        remove <span class="token operator">=</span> remove_item<span class="token punctuation">;</span>\n        count <span class="token operator">:=</span> count <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>\n        <span class="token keyword">if</span> count <span class="token operator">=</span> N <span class="token operator">-</span><span class="token number">1</span> <span class="token keyword">then</span> signal<span class="token punctuation">(</span>full<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">end</span><span class="token punctuation">;</span>\n<span class="token keyword">end</span> monitor<span class="token punctuation">;</span>\n\n<span class="token comment">// 生产者客户端</span>\n<span class="token keyword">procedure</span> producer\n<span class="token keyword">begin</span>\n    <span class="token keyword">while</span> <span class="token keyword">true</span> <span class="token keyword">do</span>\n    <span class="token keyword">begin</span>\n        item <span class="token operator">=</span> produce_item<span class="token punctuation">;</span>\n        ProducerConsumer<span class="token punctuation">.</span>insert<span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">end</span>\n<span class="token keyword">end</span><span class="token punctuation">;</span>\n\n<span class="token comment">// 消费者客户端</span>\n<span class="token keyword">procedure</span> consumer\n<span class="token keyword">begin</span>\n    <span class="token keyword">while</span> <span class="token keyword">true</span> <span class="token keyword">do</span>\n    <span class="token keyword">begin</span>\n        item <span class="token operator">=</span> ProducerConsumer<span class="token punctuation">.</span>remove<span class="token punctuation">;</span>\n        consume_item<span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">end</span>\n<span class="token keyword">end</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="经典同步问题"><a href="#%E7%BB%8F%E5%85%B8%E5%90%8C%E6%AD%A5%E9%97%AE%E9%A2%98" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>经典同步问题</h2>\n<p>生产者和消费者问题前面已经讨论过了。</p>\n<h3 id="读者-写者问题"><a href="#%E8%AF%BB%E8%80%85-%E5%86%99%E8%80%85%E9%97%AE%E9%A2%98" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>读者-写者问题</h3>\n<ul>\n<li>允许多个进程同时对数据进行读操作，但是不允许读和写以及写和写操作同时发生。</li>\n<li>一个整型变量 count 记录在对数据进行读操作的进程数量，一个互斥量 count<em>mutex 用于对 count 加锁，一个互斥量 data</em>mutex 用于对读写的数据加锁。</li>\n</ul>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="96506076420281810000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`typedef int semaphore;\nsemaphore count_mutex = 1;\nsemaphore data_mutex = 1;\nint count = 0;\n\nvoid reader() {\n    while(TRUE) {\n        down(&count_mutex);\n        count++;\n        if(count == 1) down(&data_mutex); // 第一个读者需要对数据进行加锁，防止写进程访问\n        up(&count_mutex);\n        read();\n        down(&count_mutex);\n        count--;\n        if(count == 0) up(&data_mutex);\n        up(&count_mutex);\n    }\n}\n\nvoid writer() {\n    while(TRUE) {\n        down(&data_mutex);\n        write();\n        up(&data_mutex);\n    }\n}`, `96506076420281810000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="c"\n              >\n                <span class="gatsby-code-button-language">c</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="c"><pre style="counter-reset: linenumber NaN" class="language-c line-numbers"><code class="language-c"><span class="token keyword">typedef</span> <span class="token keyword">int</span> semaphore<span class="token punctuation">;</span>\nsemaphore count_mutex <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>\nsemaphore data_mutex <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>\n<span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n\n<span class="token keyword">void</span> <span class="token function">reader</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">while</span><span class="token punctuation">(</span>TRUE<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token function">down</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>count_mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        count<span class="token operator">++</span><span class="token punctuation">;</span>\n        <span class="token keyword">if</span><span class="token punctuation">(</span>count <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token function">down</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>data_mutex<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 第一个读者需要对数据进行加锁，防止写进程访问</span>\n        <span class="token function">up</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>count_mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token function">down</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>count_mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        count<span class="token operator">--</span><span class="token punctuation">;</span>\n        <span class="token keyword">if</span><span class="token punctuation">(</span>count <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token function">up</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>data_mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token function">up</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>count_mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">void</span> <span class="token function">writer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">while</span><span class="token punctuation">(</span>TRUE<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token function">down</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>data_mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token function">write</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token function">up</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>data_mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="哲学家进餐问题"><a href="#%E5%93%B2%E5%AD%A6%E5%AE%B6%E8%BF%9B%E9%A4%90%E9%97%AE%E9%A2%98" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>哲学家进餐问题</h3>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/a9077f06-7584-4f2b-8c20-3a8e46928820-e00b6c60b644f0027c5fe554f7602a57-fde94.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 370px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 86.48648648648648%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAARABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAEDBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAe5LDRBcw1B//8QAGRAAAgMBAAAAAAAAAAAAAAAAAAECETEy/9oACAEBAAEFAnruyjoWEMP/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAWEAADAAAAAAAAAAAAAAAAAAAQESD/2gAIAQEABj8CLr//xAAZEAEBAAMBAAAAAAAAAAAAAAARAQAQITH/2gAIAQEAAT8hYLkBXSlqxHOZBE17a//aAAwDAQACAAMAAAAQ08gA/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPxAf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPxAf/8QAHRAAAgICAwEAAAAAAAAAAAAAAREAIRAxQYGhwf/aAAgBAQABPxAD4q1GlUU+8b8BtMxl6LPyEMFkQ6nux//Z\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="a9077f06 7584 4f2b 8c20 3a8e46928820" title="" data-src="/static/a9077f06-7584-4f2b-8c20-3a8e46928820-e00b6c60b644f0027c5fe554f7602a57-fde94.jpg" data-srcset="/static/a9077f06-7584-4f2b-8c20-3a8e46928820-e00b6c60b644f0027c5fe554f7602a57-d8c17.jpg 200w,\n/static/a9077f06-7584-4f2b-8c20-3a8e46928820-e00b6c60b644f0027c5fe554f7602a57-fde94.jpg 370w" data-sizes="(max-width: 370px) 100vw, 370px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>五个哲学家围着一张圆桌，每个哲学家面前放着食物。哲学家的生活有两种交替活动：吃饭以及思考。当一个哲学家吃饭时，需要先拿起自己左右两边的两根筷子，并且一次只能拿起一根筷子。</p>\n<p>下面是一种错误的解法，考虑到如果所有哲学家同时拿起左手边的筷子，那么就无法拿起右手边的筷子，造成死锁。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="67122964828534480000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`#define N 5\n\nvoid philosopher(int i) {\n    while(TRUE) {\n        think();\n        take(i);       // 拿起左边的筷子\n        take((i+1)%N); // 拿起右边的筷子\n        eat();\n        put(i);\n        put((i+1)%N);\n    }\n}`, `67122964828534480000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="c"\n              >\n                <span class="gatsby-code-button-language">c</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="c"><pre style="counter-reset: linenumber NaN" class="language-c line-numbers"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">define</span> N 5</span>\n\n<span class="token keyword">void</span> <span class="token function">philosopher</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">while</span><span class="token punctuation">(</span>TRUE<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token function">think</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token function">take</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// 拿起左边的筷子</span>\n        <span class="token function">take</span><span class="token punctuation">(</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">%</span>N<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 拿起右边的筷子</span>\n        <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token function">put</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token function">put</span><span class="token punctuation">(</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">%</span>N<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>为了防止死锁的发生，可以设置两个条件：</p>\n<ol>\n<li>必须同时拿起左右两根筷子；</li>\n<li>只有在两个邻居都没有进餐的情况下才允许进餐。</li>\n</ol>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="51349732925134070000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`#define N 5\n#define LEFT (i + N - 1) % N // 左邻居\n#define RIGHT (i + 1) % N    // 右邻居\n#define THINKING 0\n#define HUNGRY   1\n#define EATING   2\ntypedef int semaphore;\nint state[N];                // 跟踪每个哲学家的状态\nsemaphore mutex = 1;         // 临界区的互斥\nsemaphore s[N];              // 每个哲学家一个信号量\n\nvoid philosopher(int i) {\n    while(TRUE) {\n        think();\n        take_two(i);\n        eat();\n        put_two(i);\n    }\n}\n\nvoid take_two(int i) {\n    down(&mutex);\n    state[i] = HUNGRY;\n    test(i);\n    up(&mutex);\n    down(&s[i]);\n}\n\nvoid put_two(i) {\n    down(&mutex);\n    state[i] = THINKING;\n    test(LEFT);\n    test(RIGHT);\n    up(&mutex);\n}\n\nvoid test(i) {         // 尝试拿起两把筷子\n    if(state[i] == HUNGRY && state[LEFT] != EATING && state[RIGHT] !=EATING) {\n        state[i] = EATING;\n        up(&s[i]);\n    }\n}`, `51349732925134070000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="c"\n              >\n                <span class="gatsby-code-button-language">c</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="c"><pre style="counter-reset: linenumber NaN" class="language-c line-numbers"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">define</span> N 5</span>\n<span class="token macro property">#<span class="token directive keyword">define</span> LEFT (i + N - 1) % N </span><span class="token comment">// 左邻居</span>\n<span class="token macro property">#<span class="token directive keyword">define</span> RIGHT (i + 1) % N    </span><span class="token comment">// 右邻居</span>\n<span class="token macro property">#<span class="token directive keyword">define</span> THINKING 0</span>\n<span class="token macro property">#<span class="token directive keyword">define</span> HUNGRY   1</span>\n<span class="token macro property">#<span class="token directive keyword">define</span> EATING   2</span>\n<span class="token keyword">typedef</span> <span class="token keyword">int</span> semaphore<span class="token punctuation">;</span>\n<span class="token keyword">int</span> state<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span>                <span class="token comment">// 跟踪每个哲学家的状态</span>\nsemaphore mutex <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>         <span class="token comment">// 临界区的互斥</span>\nsemaphore s<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span>              <span class="token comment">// 每个哲学家一个信号量</span>\n\n<span class="token keyword">void</span> <span class="token function">philosopher</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">while</span><span class="token punctuation">(</span>TRUE<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token function">think</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token function">take_two</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token function">put_two</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">void</span> <span class="token function">take_two</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token function">down</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    state<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> HUNGRY<span class="token punctuation">;</span>\n    <span class="token function">test</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">up</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">down</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">void</span> <span class="token function">put_two</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token function">down</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    state<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> THINKING<span class="token punctuation">;</span>\n    <span class="token function">test</span><span class="token punctuation">(</span>LEFT<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">test</span><span class="token punctuation">(</span>RIGHT<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">up</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>         <span class="token comment">// 尝试拿起两把筷子</span>\n    <span class="token keyword">if</span><span class="token punctuation">(</span>state<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> HUNGRY <span class="token operator">&amp;&amp;</span> state<span class="token punctuation">[</span>LEFT<span class="token punctuation">]</span> <span class="token operator">!=</span> EATING <span class="token operator">&amp;&amp;</span> state<span class="token punctuation">[</span>RIGHT<span class="token punctuation">]</span> <span class="token operator">!=</span>EATING<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        state<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> EATING<span class="token punctuation">;</span>\n        <span class="token function">up</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="进程通信"><a href="#%E8%BF%9B%E7%A8%8B%E9%80%9A%E4%BF%A1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>进程通信</h2>\n<h3 id="进程同步与进程通信的区别"><a href="#%E8%BF%9B%E7%A8%8B%E5%90%8C%E6%AD%A5%E4%B8%8E%E8%BF%9B%E7%A8%8B%E9%80%9A%E4%BF%A1%E7%9A%84%E5%8C%BA%E5%88%AB" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>进程同步与进程通信的区别</h3>\n<ul>\n<li>进程同步：控制多个进程按一定顺序执行；</li>\n<li>进程通信：进程间传输信息。</li>\n<li>进程通信是一种手段，而进程同步是一种目的。也可以说，为了能够达到进程同步的目的，需要让进程进行通信，传输一些进程同步所需要的信息。</li>\n<li>在进程同步中介绍的信号量也属于进程通信的一种方式，但是属于低级别的进程通信，因为它传输的信息非常小。</li>\n</ul>\n<h3 id="进程通信方式"><a href="#%E8%BF%9B%E7%A8%8B%E9%80%9A%E4%BF%A1%E6%96%B9%E5%BC%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>进程通信方式</h3>\n<h4 id="消息传递"><a href="#%E6%B6%88%E6%81%AF%E4%BC%A0%E9%80%92" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>消息传递</h4>\n<p>操作系统提供了用于通信的通道（Channel），进程可以通过读写这个通道进行通信。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/037c3a0b-332d-434d-a374-f343ef72c8e1-63924ac60c8dbcef8770124247d2394a-d9b7d.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 621px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 78.09983896940419%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAQABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAEDBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAeysNFH/xAAYEAADAQEAAAAAAAAAAAAAAAAAAQIxIf/aAAgBAQABBQKtpiymTxn/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAVEAEBAAAAAAAAAAAAAAAAAAAQEf/aAAgBAQAGPwJj/8QAHBABAAICAwEAAAAAAAAAAAAAAQARMaEQIUFR/9oACAEBAAE/IUe9wKKZXCZUbqAoB7+vH//aAAwDAQACAAMAAAAQGO//xAAVEQEBAAAAAAAAAAAAAAAAAAAQEf/aAAgBAwEBPxCH/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAHRABAAICAgMAAAAAAAAAAAAAARExACEQoUFhsf/aAAgBAQABPxCPOnl7x4LFa6wEXHdr9wJEil3VlFUO1jU1x//Z\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="037c3a0b 332d 434d a374 f343ef72c8e1" title="" data-src="/static/037c3a0b-332d-434d-a374-f343ef72c8e1-63924ac60c8dbcef8770124247d2394a-d9b7d.jpg" data-srcset="/static/037c3a0b-332d-434d-a374-f343ef72c8e1-63924ac60c8dbcef8770124247d2394a-875ae.jpg 200w,\n/static/037c3a0b-332d-434d-a374-f343ef72c8e1-63924ac60c8dbcef8770124247d2394a-1715a.jpg 400w,\n/static/037c3a0b-332d-434d-a374-f343ef72c8e1-63924ac60c8dbcef8770124247d2394a-d9b7d.jpg 621w" data-sizes="(max-width: 621px) 100vw, 621px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><font size=3> <strong>（一）管道</strong> </font></br></p>\n<ul>\n<li>\n<p>写进程在管道的尾端写入数据，读进程在管道的首端读出数据。管道提供了简单的流控制机制，进程试图读空管道时，在有数据写入管道前，进程将一直阻塞。同样地，管道已经满时，进程再试图写管道，在其它进程从管道中移走数据之前，写进程将一直阻塞。</p>\n</li>\n<li>\n<p>Linux 中管道通过空文件实现。</p>\n</li>\n<li>\n<p>管道有三种：</p>\n<ol>\n<li>普通管道：有两个限制，一是只能单向传输；二是只能在父子进程之间使用；</li>\n<li>流管道：去除第一个限制，支持双向传输；</li>\n<li>命名管道：去除第二个限制，可以在不相关进程之间进行通信。</li>\n</ol>\n</li>\n</ul>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/7f642a65-b167-4c8f-b382-8322c6322b2c-c4fa984b75d1fbb706cc76828a47f035-5df5e.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 610px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 55.24590163934426%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAIBAwQF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB68aKhxw//8QAGBAAAwEBAAAAAAAAAAAAAAAAAAECMSL/2gAIAQEAAQUCumVfM4LT/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGhAAAgIDAAAAAAAAAAAAAAAAAREAICEiMf/aAAgBAQAGPwLUNdgQZmaf/8QAHRAAAgIBBQAAAAAAAAAAAAAAAREAITEQQVFhcf/aAAgBAQABPyHtBRqFsy7PHsMkUR4hwYAStP/aAAwDAQACAAMAAAAQWC//xAAVEQEBAAAAAAAAAAAAAAAAAAAQIf/aAAgBAwEBPxCH/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAHBABAQEAAgMBAAAAAAAAAAAAAREhADEQQVFx/9oACAEBAAE/EAtXJpBtT69SziYE6QXPb9zLxCZTaszq++AQTs5dRV1++P/Z\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="7f642a65 b167 4c8f b382 8322c6322b2c" title="" data-src="/static/7f642a65-b167-4c8f-b382-8322c6322b2c-c4fa984b75d1fbb706cc76828a47f035-5df5e.jpg" data-srcset="/static/7f642a65-b167-4c8f-b382-8322c6322b2c-c4fa984b75d1fbb706cc76828a47f035-980d3.jpg 200w,\n/static/7f642a65-b167-4c8f-b382-8322c6322b2c-c4fa984b75d1fbb706cc76828a47f035-d1b55.jpg 400w,\n/static/7f642a65-b167-4c8f-b382-8322c6322b2c-c4fa984b75d1fbb706cc76828a47f035-5df5e.jpg 610w" data-sizes="(max-width: 610px) 100vw, 610px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><font size=3> <strong>（二）消息队列</strong> </font></br></p>\n<p>消息队列克服了信号传递信息少、管道只能承载无格式字节流以及缓冲区大小受限等缺点。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/d49466db-fdd3-4d36-8a86-47dc45c07a1e-80cd50fc628c339844c5f0b15d37586d-9f30f.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 581px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 60.75731497418244%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAMEAQX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHrayYoGh//xAAaEAEAAgMBAAAAAAAAAAAAAAACAAEDESIy/9oACAEBAAEFAm9RZOTeyvNYhSn/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAaEAADAAMBAAAAAAAAAAAAAAAAARECECFx/9oACAEBAAY/AuJvwUrp0ZjMdf/EABoQAQADAQEBAAAAAAAAAAAAAAEAIUERURD/2gAIAQEAAT8hXhJ3xOCBMGVHBo+OQBQXGYBH5//aAAwDAQACAAMAAAAQ+y//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAbEAEAAwEBAQEAAAAAAAAAAAABESExAEEQUf/aAAgBAQABPxCBUqTAgNh2/OIpLxlWv8uuIaYFWVRlcdhAuDeDtCEMg+f/2Q==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="d49466db fdd3 4d36 8a86 47dc45c07a1e" title="" data-src="/static/d49466db-fdd3-4d36-8a86-47dc45c07a1e-80cd50fc628c339844c5f0b15d37586d-9f30f.jpg" data-srcset="/static/d49466db-fdd3-4d36-8a86-47dc45c07a1e-80cd50fc628c339844c5f0b15d37586d-6427f.jpg 200w,\n/static/d49466db-fdd3-4d36-8a86-47dc45c07a1e-80cd50fc628c339844c5f0b15d37586d-43640.jpg 400w,\n/static/d49466db-fdd3-4d36-8a86-47dc45c07a1e-80cd50fc628c339844c5f0b15d37586d-9f30f.jpg 581w" data-sizes="(max-width: 581px) 100vw, 581px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><font size=3> <strong>（三）套接字</strong> </font></br></p>\n<p>套接字也是一种进程间通信机制，与其它通信机制不同的是，它可用于不同机器间的进程通信。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/699b4f96-d63f-46ea-a581-2b3d95eceb6a-e3f96d72c78b317fa832b520f1ef965e-eb775.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 594px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 55.21885521885521%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAQBAgMF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB7EaLjBcP/8QAGhAAAgMBAQAAAAAAAAAAAAAAAQIAERIDMv/aAAgBAQABBQJ3zD0oKdKQKHqf/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGhAAAgIDAAAAAAAAAAAAAAAAAAEQETFB0f/aAAgBAQAGPwLhengsc//EABoQAAIDAQEAAAAAAAAAAAAAAAERACExUWH/2gAIAQEAAT8hCmpoo1ABM+IbFlr7UCIBZm0Q5P/aAAwDAQACAAMAAAAQvC//xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAwEBPxAJ/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAHRABAAICAgMAAAAAAAAAAAAAAQARITFBUWGBkf/aAAgBAQABPxC5K8h2Fr0E8roi4XVV1Ho6AcLa5JieCruaXFmPZKND5P/Z\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="699b4f96 d63f 46ea a581 2b3d95eceb6a" title="" data-src="/static/699b4f96-d63f-46ea-a581-2b3d95eceb6a-e3f96d72c78b317fa832b520f1ef965e-eb775.jpg" data-srcset="/static/699b4f96-d63f-46ea-a581-2b3d95eceb6a-e3f96d72c78b317fa832b520f1ef965e-7983d.jpg 200w,\n/static/699b4f96-d63f-46ea-a581-2b3d95eceb6a-e3f96d72c78b317fa832b520f1ef965e-81a85.jpg 400w,\n/static/699b4f96-d63f-46ea-a581-2b3d95eceb6a-e3f96d72c78b317fa832b520f1ef965e-eb775.jpg 594w" data-sizes="(max-width: 594px) 100vw, 594px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h4 id="共享内存"><a href="#%E5%85%B1%E4%BA%AB%E5%86%85%E5%AD%98" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>共享内存</h4>\n<ul>\n<li>操作系统建立一块共享内存，并将其映射到每个进程的地址空间上，进程就可以直接对这块共享内存进行读写。</li>\n<li>共享内存是最快的进程通信方式。</li>\n</ul>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/7be0abf9-687c-4451-becd-626b0be7ec22-f978c8460b2da9a89d9d7e6d18af5e68-79142.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 575px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 64.34782608695653%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAECAwX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHXViGTD//EABoQAAIDAQEAAAAAAAAAAAAAAAECABESAyH/2gAIAQEAAQUCd6h6eK1qRMnQn//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABwQAAEDBQAAAAAAAAAAAAAAAAARIUEQElGBsf/aAAgBAQAGPwKdEi9GFubFP//EABsQAAMAAgMAAAAAAAAAAAAAAAABESFBMVGB/9oACAEBAAE/IalEysugnTwOQyl1yELpWPFATB//2gAMAwEAAgADAAAAECzv/8QAFREBAQAAAAAAAAAAAAAAAAAAARD/2gAIAQMBAT8QAn//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAdEAEBAAIDAAMAAAAAAAAAAAABEQAhQVFhMYHB/9oACAEBAAE/EKVnSE9N9w9lJw39YyhAaAPHeGkHzJy5uIAmul7/ADIEdvcz/9k=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="7be0abf9 687c 4451 becd 626b0be7ec22" title="" data-src="/static/7be0abf9-687c-4451-becd-626b0be7ec22-f978c8460b2da9a89d9d7e6d18af5e68-79142.jpg" data-srcset="/static/7be0abf9-687c-4451-becd-626b0be7ec22-f978c8460b2da9a89d9d7e6d18af5e68-91d70.jpg 200w,\n/static/7be0abf9-687c-4451-becd-626b0be7ec22-f978c8460b2da9a89d9d7e6d18af5e68-70267.jpg 400w,\n/static/7be0abf9-687c-4451-becd-626b0be7ec22-f978c8460b2da9a89d9d7e6d18af5e68-79142.jpg 575w" data-sizes="(max-width: 575px) 100vw, 575px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h1 id="三、死锁"><a href="#%E4%B8%89%E3%80%81%E6%AD%BB%E9%94%81" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>三、死锁</h1>\n<h2 id="死锁的必要条件"><a href="#%E6%AD%BB%E9%94%81%E7%9A%84%E5%BF%85%E8%A6%81%E6%9D%A1%E4%BB%B6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>死锁的必要条件</h2>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/c037c901-7eae-4e31-a1e4-9d41329e5c3e-75cb3111be7af922c9876acff6ed9edb-454b7.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 560px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 45.53571428571428%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABGUlEQVQoz21Si26DMAzs//9hJzF1ECAJEJ7iDV7ONFE2aslgzvbJPvM4z5NgwzDQNE0cO6zve/YQC3NN03jM4Q8XiCShur4KjuPgd5ZlJIS4Nc3zTLnNpdYxiDPkPWHXdbRt258p0Ogawk3yPPckWisqq8p/e8JxHP1kDtv3/SZD27YUx7EnKMuScinfNQGhtCCmDJvr2nDDfw2hnzGGlFKsY5hjQnymVquqMn6yax3N7nSFu2ZjKqsxVj8/H2VbV1rfGjpbgVn/ZCBfluWGP/D4jiL6ej55mtfPizUSIqFCFyyFlIq1S+yfIO2akEHbHDAcKE1TKoryWhlKogmkKARRZGOlNE+Ao+DamBSHQwzcYdM8cQ0wEP4Cy168PugFLgAAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="c037c901 7eae 4e31 a1e4 9d41329e5c3e" title="" data-src="/static/c037c901-7eae-4e31-a1e4-9d41329e5c3e-75cb3111be7af922c9876acff6ed9edb-454b7.png" data-srcset="/static/c037c901-7eae-4e31-a1e4-9d41329e5c3e-75cb3111be7af922c9876acff6ed9edb-e8c6f.png 200w,\n/static/c037c901-7eae-4e31-a1e4-9d41329e5c3e-75cb3111be7af922c9876acff6ed9edb-5aee6.png 400w,\n/static/c037c901-7eae-4e31-a1e4-9d41329e5c3e-75cb3111be7af922c9876acff6ed9edb-454b7.png 560w" data-sizes="(max-width: 560px) 100vw, 560px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<ol>\n<li>互斥：每个资源要么已经分配给了一个进程，要么就是可用的。</li>\n<li>占有和等待：已经得到了某个资源的进程可以再请求新的资源。</li>\n<li>不可抢占：已经分配给一个进程的资源不能强制性地被抢占，它只能被占有它的进程显式地释放。</li>\n<li>环路等待：有两个或者两个以上的进程组成一条环路，该环路中的每个进程都在等待下一个进程所占有的资源。</li>\n</ol>\n<h2 id="死锁的处理方法"><a href="#%E6%AD%BB%E9%94%81%E7%9A%84%E5%A4%84%E7%90%86%E6%96%B9%E6%B3%95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>死锁的处理方法</h2>\n<h3 id="鸵鸟策略"><a href="#%E9%B8%B5%E9%B8%9F%E7%AD%96%E7%95%A5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>鸵鸟策略</h3>\n<ul>\n<li>把头埋在沙子里，假装根本没发生问题。</li>\n<li>因为解决死锁问题的代价很高，因此鸵鸟策略这种不采取任务措施的方案会获得更高的性能。当发生死锁时不会对用户造成多大影响，或发生死锁的概率很低，可以采用鸵鸟策略。</li>\n<li>大多数操作系统，包括 Unix，Linux 和 Windows，处理死锁问题的办法仅仅是忽略它。</li>\n</ul>\n<h3 id="死锁检测与死锁恢复"><a href="#%E6%AD%BB%E9%94%81%E6%A3%80%E6%B5%8B%E4%B8%8E%E6%AD%BB%E9%94%81%E6%81%A2%E5%A4%8D" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>死锁检测与死锁恢复</h3>\n<p>不试图阻止死锁，而是当检测到死锁发生时，采取措施进行恢复。</p>\n<p><strong>（一）每种类型一个资源的死锁检测</strong></p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/b1fa0453-a4b0-4eae-a352-48acca8fff74-ed62efa7dfe1ae8f19c9a065e67ba11d-aa6cd.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 597px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 51.08877721943048%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABL0lEQVQoz4WSh27DMAxE/f8faSce8N6z8WD12MpQULQlIJiSyePdSd55npLnuSzLIk3TyMfrJTaGYTBr1Py6rvuc/LflAZhlmXR9L49HIPt+3I1NU0tRlj+A/grvuk7pDdi6rhJFoYzjKG3byjRNUhqwPC/0jBobqKGG87qutRZ1kPOs5LbrxPd9bUySRMHKspCqqr+Ai/wGtDWAoo59FEVyHAbQpVt+y+sMOCxszPOsTGxYRm4ArAxdQ5/PUF7mUuI4fgOgmTMbVVVJGIb3fjc9vh9or+canaap5kjhhpnIgi2sXA8ZyL99343UQ1XpLVswvnhIMZ7CCFD8YcC2bTcgzX4Q6H9ylh34Buh6xNT/gh6XuTJ0wfCG28IzpvOFHfLILdvavE9qeac8NxfjE2DoCFJsKKtrAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="b1fa0453 a4b0 4eae a352 48acca8fff74" title="" data-src="/static/b1fa0453-a4b0-4eae-a352-48acca8fff74-ed62efa7dfe1ae8f19c9a065e67ba11d-aa6cd.png" data-srcset="/static/b1fa0453-a4b0-4eae-a352-48acca8fff74-ed62efa7dfe1ae8f19c9a065e67ba11d-b82a2.png 200w,\n/static/b1fa0453-a4b0-4eae-a352-48acca8fff74-ed62efa7dfe1ae8f19c9a065e67ba11d-6c81a.png 400w,\n/static/b1fa0453-a4b0-4eae-a352-48acca8fff74-ed62efa7dfe1ae8f19c9a065e67ba11d-aa6cd.png 597w" data-sizes="(max-width: 597px) 100vw, 597px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<ul>\n<li>上图为资源分配图，其中方框表示资源，圆圈表示进程。资源指向进程表示该资源已经分配给该进程，进程指向资源表示进程请求获取该资源。</li>\n<li>图 a 可以抽取出环，如图 b 它满足了环路等待条件，因此会发生死锁。</li>\n<li>每种类型一个资源的死锁检测算法是通过检测有向图是否存在环来实现，从一个节点出发进行深度优先搜索，对访问过的节点进行标记，如果访问了已经标记的节点，就表示有向图存在环，也就是检测到死锁的发生。</li>\n</ul>\n<p><strong>（二）每种类型多个资源的死锁检测</strong></p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/e1eda3d5-5ec8-4708-8e25-1a04c5e11f48-a11087d9a5b2fcd6728542dedd309071-1857e.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 448px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 49.10714285714286%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAABM0lEQVQoz21S2ZKCMBDk/78PqnSjy25UAmQSrnAZwG0STWnV9sPMMD13iB4O67pCLtZu2/b4Dx8UDGdHgbb2fj6f+2Ho+15KCeXCthd1GobRGFNVFaRPeSbb+3xi7Hg8JkmcxHGcJFVdB4oxBg9wOBwY+yqKwteNtnVFM3yXpSyLIs9zzrnS2tHrNE1FLnJwUoosA3vLsjBRBG1M13UGa1trFwd/AqBpmrZtfTSc47QjbBrB6yIadJNEsJVSYSugM51Su5+UGsfx/Yp7ZyK6XDm/XH85x/xp+qOVDhGZyL7TVAhxud60rj6S0Rn1iKQk2XY7iJRfCfOTorIs0RnjtA5ho2cyhsyFQNVKa0ThOj4Csm5qHKmBqmtUgfxIfj2y9XdaFjzNPfwPMOZ5hgTrY97H/gMgSj8VhAhXLgAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="e1eda3d5 5ec8 4708 8e25 1a04c5e11f48" title="" data-src="/static/e1eda3d5-5ec8-4708-8e25-1a04c5e11f48-a11087d9a5b2fcd6728542dedd309071-1857e.png" data-srcset="/static/e1eda3d5-5ec8-4708-8e25-1a04c5e11f48-a11087d9a5b2fcd6728542dedd309071-15195.png 200w,\n/static/e1eda3d5-5ec8-4708-8e25-1a04c5e11f48-a11087d9a5b2fcd6728542dedd309071-82e6d.png 400w,\n/static/e1eda3d5-5ec8-4708-8e25-1a04c5e11f48-a11087d9a5b2fcd6728542dedd309071-1857e.png 448w" data-sizes="(max-width: 448px) 100vw, 448px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<ul>\n<li>\n<p>上图中，有三个进程四个资源，每个数据代表的含义如下：</p>\n<ul>\n<li>E 向量：资源总量</li>\n<li>A 向量：资源剩余量</li>\n<li>C 矩阵：每个进程所拥有的资源数量，每一行都代表一个进程拥有资源的数量</li>\n<li>R 矩阵：每个进程请求的资源数量</li>\n</ul>\n</li>\n<li>\n<p>进程 P<sub>1</sub> 和 P<sub>2</sub> 所请求的资源都得不到满足，只有进程 P<sub>3</sub> 可以，让 P<sub>3</sub> 执行，之后释放 P<sub>3</sub> 拥有的资源，此时 A = (2 2 2 0)。P<sub>2</sub> 可以执行，执行后释放 P<sub>2</sub> 拥有的资源，A = (4 2 2 1) 。P<sub>1</sub> 也可以执行。所有进程都可以顺利执行，没有死锁。</p>\n</li>\n<li>\n<p>算法总结如下：每个进程最开始时都不被标记，执行过程有可能被标记。当算法结束时，任何没有被标记的进程都是死锁进程。</p>\n<ol>\n<li>寻找一个没有标记的进程 P<sub>i</sub>，它所请求的资源小于等于 A。</li>\n<li>如果找到了这样一个进程，那么将 C 矩阵的第 i 行向量加到 A 中，标记该进程，并转回 1。</li>\n<li>如果没有这样一个进程，算法终止。</li>\n</ol>\n</li>\n</ul>\n<p><strong>（三）死锁恢复</strong></p>\n<ul>\n<li>利用抢占恢复</li>\n<li>利用回滚恢复</li>\n<li>通过杀死进程恢复</li>\n</ul>\n<h3 id="死锁预防"><a href="#%E6%AD%BB%E9%94%81%E9%A2%84%E9%98%B2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>死锁预防</h3>\n<p>在程序运行之前预防发生死锁。</p>\n<p><strong>（一）破坏互斥条件</strong></p>\n<p>例如假脱机打印机技术允许若干个进程同时输出，唯一真正请求物理打印机的进程是打印机守护进程。</p>\n<p><strong>（二）破坏占有和等待条件</strong></p>\n<p>一种实现方式是规定所有进程在开始执行前请求所需要的全部资源。</p>\n<p><strong>（三）破坏不可抢占条件</strong></p>\n<p><strong>（四）破坏环路等待</strong></p>\n<p>给资源统一编号，进程只能按编号顺序来请求资源。</p>\n<h3 id="死锁避免"><a href="#%E6%AD%BB%E9%94%81%E9%81%BF%E5%85%8D" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>死锁避免</h3>\n<p>在程序运行时避免发生死锁。</p>\n<p><strong>（一）安全状态</strong></p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/ed523051-608f-4c3f-b343-383e2d194470-ed83f6ec8885ebfbc7e069cfb881b648-a40ca.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 647px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 27.51159196290572%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsSAAALEgHS3X78AAABG0lEQVQY01VQgW6CQAzl///MOSACERWRAAciHHKHY3GivrVNZtwlhL729b22zjR9oa5rNE0Dfj/XK06nE5SqMM8z7vc7uq5DWZaYpkk4vdZSN8YKNsOAqqqgdQ9nsfhAGIbYpykGKvi+T5+H3W4nJinll8slNpuNGBdFDtd1hcciLZlz7HmecJ1PKjKpbVuc+x6rVYB9kghmgSzLEEWRTMmT53mOOI7lzzk2Xa9jHEiM6w4XExIYBoNvWik9HBAToSdxa600BEGI4/EIO460lhYBNhoJj6PFdruVDY0Z4HBSqRJ/j29WlgXeX0H3u93mF1ZKYbxcXpgn7TotsfPe+Hw8ZE1el0k8JU/Et9Wa8LmXmIewxoj5v/7nE7/+UsAYWTNCRQAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="ed523051 608f 4c3f b343 383e2d194470" title="" data-src="/static/ed523051-608f-4c3f-b343-383e2d194470-ed83f6ec8885ebfbc7e069cfb881b648-a40ca.png" data-srcset="/static/ed523051-608f-4c3f-b343-383e2d194470-ed83f6ec8885ebfbc7e069cfb881b648-3426a.png 200w,\n/static/ed523051-608f-4c3f-b343-383e2d194470-ed83f6ec8885ebfbc7e069cfb881b648-f3a4f.png 400w,\n/static/ed523051-608f-4c3f-b343-383e2d194470-ed83f6ec8885ebfbc7e069cfb881b648-a40ca.png 647w" data-sizes="(max-width: 647px) 100vw, 647px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<ul>\n<li>图 a 的第二列 Has 表示已拥有的资源数，第三列 Max 表示总共需要的资源数，Free 表示还有可以使用的资源数。从图 a 开始出发，先让 B 拥有所需的所有资源（图 b），运行结束后释放 B，此时 Free 变为 5（图 c）；接着以同样的方式运行 C 和 A，使得所有进程都能成功运行，因此可以称图 a 所示的状态时安全的。</li>\n<li>定义：如果没有死锁发生，并且即使所有进程突然请求对资源的最大需求，也仍然存在某种调度次序能够使得每一个进程运行完毕，则称该状态是安全的。</li>\n<li>安全状态的检测与死锁的检测类似，因为安全状态必须要求不能发生死锁。下面的银行家算法与死锁检测算法非常类似，可以结合着做参考对比。</li>\n</ul>\n<p><strong>（二）单个资源的银行家算法</strong></p>\n<p>一个小城镇的银行家，他向一群客户分别承诺了一定的贷款额度，算法要做的是判断对请求的满足是否会进入不安全状态，如果是，就拒绝请求；否则予以分配。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/d160ec2e-cfe2-4640-bda7-62f53e58b8c0-984e281dd57aaa3897b03495dfa5d53d-f79be.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 567px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 40.74074074074074%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAABG0lEQVQY002RiW6DMBBE+f+va5qEcvgogmAbsK1wlJt0wCnqSCB2mMeuF+91aOh7Y0xd167ctg33pml0Vf30/etPy7ogA3OaJpQectYYQsjH5RLFkQut65qmKSFxEARJkjgTAGMs+Nqltdlh5ITIEYrjGIDrCfN2u31zLqWC6eBxGD6v1yAMhRAY84CXVSkVhmEURf9hOJSQLHtAJ4yevu+jmTb23VkKAZJSRDOUDkaOc/7Id517ud99DLh3tge8u8OAg3HG2q47d9O2LWM0z8U4jucWjbGYCDub5/kNQ/XziWNgZLhouywLTDjd8TmYcHDhSFVZonKU534JpRTDFyVelVWlVVEoKfFcKFVpowpltJZCWmsRKcrSwb/04cKkwg4uWQAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="d160ec2e cfe2 4640 bda7 62f53e58b8c0" title="" data-src="/static/d160ec2e-cfe2-4640-bda7-62f53e58b8c0-984e281dd57aaa3897b03495dfa5d53d-f79be.png" data-srcset="/static/d160ec2e-cfe2-4640-bda7-62f53e58b8c0-984e281dd57aaa3897b03495dfa5d53d-5ae21.png 200w,\n/static/d160ec2e-cfe2-4640-bda7-62f53e58b8c0-984e281dd57aaa3897b03495dfa5d53d-d9cbe.png 400w,\n/static/d160ec2e-cfe2-4640-bda7-62f53e58b8c0-984e281dd57aaa3897b03495dfa5d53d-f79be.png 567w" data-sizes="(max-width: 567px) 100vw, 567px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>上图 c 为不安全状态，因此算法会拒绝之前的请求，从而避免进入图 c 中的状态。</p>\n<p><strong>（三）多个资源的银行家算法</strong></p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/62e0dd4f-44c3-43ee-bb6e-fedb9e068519-0f1a9a7859ea04d19f2eb0cd641c5b44-352a0.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 511px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 53.62035225048923%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABfklEQVQoz21SiW6CQBTs/39WW6skci4ssIB4cMhhVI7VhMMOkGhpO8km783b2Xft2+MHyqLoR6PvX2RdVU3TjGT/mONtok6nk7/xDcMIw/BwOJRVBbKqyv1+b5nWdreLwjBNU5Bd173EOLyuKaVE1yFWFMXf7kC2beu57kQSopmm2TTtP5l939c0zaTUtplt21MGtCCKIlzGGCHEcVieZ47jhFH8EqMMhAVBoAbFE6IoBUGAQFFc3z8+oUdOiA1dDw775XKpqNqz/0Hsea6qKpZl456iqOh5Eq8EQZZl07QkWUIJnPPr9VqUxSzzKFaZPZSnaeQYx5N4uRIkSdJ1nRAd4scfDGL0s16LRCN4QpSkcCwbSRaLL7gmHcq2LKvr+gmzaWMNmPbG85jj4N75fAGZJEfDoK7nYkhoBwu73++/Mw/foK4vl0uFtQJFWdd8AhjOB6ccA7fbDTZWOBPjhzBmx1GUZTkQwcjzY5Jg7GmSZFkWRgNgxHHM+e0p/gYxBl6TSn37GgAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="62e0dd4f 44c3 43ee bb6e fedb9e068519" title="" data-src="/static/62e0dd4f-44c3-43ee-bb6e-fedb9e068519-0f1a9a7859ea04d19f2eb0cd641c5b44-352a0.png" data-srcset="/static/62e0dd4f-44c3-43ee-bb6e-fedb9e068519-0f1a9a7859ea04d19f2eb0cd641c5b44-1fc3e.png 200w,\n/static/62e0dd4f-44c3-43ee-bb6e-fedb9e068519-0f1a9a7859ea04d19f2eb0cd641c5b44-43cce.png 400w,\n/static/62e0dd4f-44c3-43ee-bb6e-fedb9e068519-0f1a9a7859ea04d19f2eb0cd641c5b44-352a0.png 511w" data-sizes="(max-width: 511px) 100vw, 511px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>上图中有五个进程，四个资源。左边的图表示已经分配的资源，右边的图表示还需要分配的资源。最右边的 E、P 以及 A 分别表示：总资源、已分配资源以及可用资源，注意这三个为向量，而不是具体数值，例如 A=(1020)，表示 4 个资源分别还剩下 1/0/2/0。</p>\n<p>检查一个状态是否安全的算法如下：</p>\n<ul>\n<li>查找右边的矩阵是否存在一行小于等于向量 A。如果不存在这样的行，那么系统将会发生死锁，状态是不安全的。</li>\n<li>假若找到这样一行，将该进程标记为终止，并将其已分配资源加到 A 中。</li>\n<li>重复以上两步，直到所有进程都标记为终止，则状态时安全的。</li>\n</ul>\n<p>如果一个状态不是安全的，也需要拒绝进入这个状态。</p>\n<h1 id="四、内存管理"><a href="#%E5%9B%9B%E3%80%81%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>四、内存管理</h1>\n<h2 id="虚拟内存"><a href="#%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>虚拟内存</h2>\n<p>每个程序拥有自己的地址空间，这个地址空间被分割成多个块，每一块称为一页。这些页被映射到物理内存，但不需要映射到连续的物理内存，也不需要所有页都必须在物理内存中。当程序引用到一部分不在物理内存中的地址空间时，由硬件执行必要的映射，将缺失的部分装入物理内存并重新执行失败的指令。</p>\n<h2 id="分页与分段"><a href="#%E5%88%86%E9%A1%B5%E4%B8%8E%E5%88%86%E6%AE%B5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>分页与分段</h2>\n<h3 id="分页"><a href="#%E5%88%86%E9%A1%B5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>分页</h3>\n<p>大部分虚拟内存系统都使用分页技术。把由程序产生的地址称为虚拟地址，它们构成了一个虚拟地址空间。例如有一台计算机可以产生 16 位地址，它的虚拟地址空间为 0~64K，然而计算机只有 32KB 的物理内存，因此虽然可以编写 64KB 的程序，但它们不能被完全调入内存运行。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/7b281b1e-0595-402b-ae35-8c91084c33c1-efa52d2a70fd2d1c4c8bc36fa499a03e-ced8c.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 491px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 89.81670061099797%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB0ElEQVQ4y5WUC2+CUAyF/f+/yyWaDZ2g8n4JLoATUROjgp613XS4wZw3aVC4fPf0tKWD2jqfz3I9nU5YLpfY7/fX+/Wo7/25Ok3AqirR7/eRpFnjy22wVmCeL6EoCoIwRJZlWK1WOB6PEqz+YYVZlmIymUgogwEsyxbwbDbDbrd7HJgmCZ5fnqHrOqbTKRaLxZ9e1tmtKQuMYjwek7LoBvjLy9q91pQZZJgmDMOA7/s4HA7XPb7vIQxn34fc9TBNMCDvGGhZlhQnz3McqCjcAU/dLl5fR42qG4Hv5Bkr1LQxer0ekiRFmqby37ZtTKlYnuehaqh4q8LhcEjpfipkWBRFAnubz0m9Qh4b/wcW1HdcXQayhxwmpc9exnEEnZ45jvN/4GZdSJUZyKnzy9w6rsfFCCh1VXqy0cPbfvr8XZZH8WmkajAIzECpOillhepohJhS/9mbrcBTVaEoCvlAsLLNZkOHlFJpHkPD0H+10hV4b9ibFh+2Xq8bPxpXhZZlkjeapMen8xxrqirpOY4r1Z5Q2jzX/JyLZn71Ke/NSflNyvM4FuAlbNsR/4IgkGIENB2u60pwD16uDA8Dn+zJb4Hb7RYr8oj9Yp9K8vHRxawPef1j1USePMMAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="7b281b1e 0595 402b ae35 8c91084c33c1" title="" data-src="/static/7b281b1e-0595-402b-ae35-8c91084c33c1-efa52d2a70fd2d1c4c8bc36fa499a03e-ced8c.png" data-srcset="/static/7b281b1e-0595-402b-ae35-8c91084c33c1-efa52d2a70fd2d1c4c8bc36fa499a03e-680fb.png 200w,\n/static/7b281b1e-0595-402b-ae35-8c91084c33c1-efa52d2a70fd2d1c4c8bc36fa499a03e-eda79.png 400w,\n/static/7b281b1e-0595-402b-ae35-8c91084c33c1-efa52d2a70fd2d1c4c8bc36fa499a03e-ced8c.png 491w" data-sizes="(max-width: 491px) 100vw, 491px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>虚拟地址空间划分成固定大小的页，在物理内存中对应的单元称为页框，页和页框大小通常相同，它们之间通过页表进行映射。</p>\n<p>程序最开始只将一部分页调入页框中，当程序引用到没有在页框的页时，产生缺页中断，进行页面置换，按一定的原则将一部分页框换出，并将页调入。</p>\n<h3 id="分段"><a href="#%E5%88%86%E6%AE%B5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>分段</h3>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/22de0538-7c6e-4365-bd3b-8ce3c5900216-9c3aca8727fa8419c9ea9a667a068684-09bf7.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 452px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 76.76991150442478%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsSAAALEgHS3X78AAABt0lEQVQoz41Sa1OCQBT1//+Jpul7KZmpmILKIvh+gDaFTxQbBHnJwxHtCsVYMdWdZWeZvWfPPffcxOlHOK5rWlb0ezwedV0PD98yE1EGhB9c27ZdIkiEUKPRZFj2NokJwvg38Bdmx5lMJqIozmaz6fS85vP5QhS32+23JxLh+U1aCePJSloDQJKkXn8w4PgBP+T4Ya/PCYKgqqpu6DtrZ5qGZZmmaYXgM7rbbuE4TlGoz3Evr694oZTN54sEUSLL6UyW4/h+r1ev19vtDltnW62zHNfzPsqWZRkI15IEZyAplgiiXKkiVKVQ4ak4Gj3b9g5oYbdMaxfE4XCI1xxW5fv+uYu+r2naKS6+dPv42W2EaJBAIQQ7hqWHo1H01mVmPPN8sVAURZY3m42yXC6lQM6/rHIdByRdDklY9iVnDDi8gLbUGKbb6YJdBFl+yGTB6L+ZI82Zx+xdCsPuH5Kp+6vrG57nofJgVuCbgTUxmiMwQZJVRDMMS9eYu1QawK1mA8cL1Uo5l8uD7WFynGbXRXQNwLBTNJ3DCzCthqErqqppW6A1DDOkSsQauN/v4QnP89xggUmxae82+kUpfvLcgwAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="22de0538 7c6e 4365 bd3b 8ce3c5900216" title="" data-src="/static/22de0538-7c6e-4365-bd3b-8ce3c5900216-9c3aca8727fa8419c9ea9a667a068684-09bf7.png" data-srcset="/static/22de0538-7c6e-4365-bd3b-8ce3c5900216-9c3aca8727fa8419c9ea9a667a068684-eb2f6.png 200w,\n/static/22de0538-7c6e-4365-bd3b-8ce3c5900216-9c3aca8727fa8419c9ea9a667a068684-ffac0.png 400w,\n/static/22de0538-7c6e-4365-bd3b-8ce3c5900216-9c3aca8727fa8419c9ea9a667a068684-09bf7.png 452w" data-sizes="(max-width: 452px) 100vw, 452px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>上图为一个编译器在编译过程中建立的多个表，有 4 个表是动态增长的，如果使用分页系统的一维地址空间，动态增长的特点会导致覆盖问题的出现。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/e0900bb2-220a-43b7-9aa9-1d5cd55ff56e-1f463b52433651669a2f05cfe686ca29-84ce9.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 581px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 49.22547332185886%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAABJklEQVQoz5WQS5KCMBCGuf/RPISOWAaEvEmCQNT5SKZcjLOZXqQauv9XN0qplFKMYVmW1z+rGcdxLQXF5/j5fDJ6PB45Z/oP8DBsea95nl9/obXWIQSmMcbfYKnkum1wO+emEFIpPt8bWun7/U7jnPXel4yxLjRg+r4/Ho9pTtZZfhG+uqgurbVLAU/TRI9H8GQpylLGUniTckQkzXOVqvTWGqIJ0bEjpVqXJcW0bdsONsbQwcfMeXc+fw3lhPVaRdDDCx2v91PbthDVUcM9yr0yM+LxCyS2efFJBGvM/GPbs4wdiLZqWxuNFLFDmJSSNAQh2+l0OhwO7eWC2o0aBq4FmIVbf0NsB+/31OoqrnvInLuuQ5CeLEKItWQzWr+tdkKQtIb6Bv6TQmjmEL5sAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="e0900bb2 220a 43b7 9aa9 1d5cd55ff56e" title="" data-src="/static/e0900bb2-220a-43b7-9aa9-1d5cd55ff56e-1f463b52433651669a2f05cfe686ca29-84ce9.png" data-srcset="/static/e0900bb2-220a-43b7-9aa9-1d5cd55ff56e-1f463b52433651669a2f05cfe686ca29-1b05b.png 200w,\n/static/e0900bb2-220a-43b7-9aa9-1d5cd55ff56e-1f463b52433651669a2f05cfe686ca29-f343a.png 400w,\n/static/e0900bb2-220a-43b7-9aa9-1d5cd55ff56e-1f463b52433651669a2f05cfe686ca29-84ce9.png 581w" data-sizes="(max-width: 581px) 100vw, 581px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<ul>\n<li>分段的做法是把每个表分成段，一个段构成一个独立的地址空间。每个段的长度可以不同，并且可以动态增长。</li>\n<li>每个段都需要程序员来划分。</li>\n</ul>\n<h3 id="段页式"><a href="#%E6%AE%B5%E9%A1%B5%E5%BC%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>段页式</h3>\n<ul>\n<li>用分段方法来分配和管理虚拟存储器。程序的地址空间按逻辑单位分成基本独立的段，而每一段有自己的段名，再把每段分成固定大小的若干页。</li>\n<li>用分页方法来分配和管理实存。即把整个主存分成与上述页大小相等的存储块，可装入作业的任何一页。</li>\n<li>程序对内存的调入或调出是按页进行的，但它又可按段实现共享和保护。</li>\n</ul>\n<h3 id="分页与分段区别"><a href="#%E5%88%86%E9%A1%B5%E4%B8%8E%E5%88%86%E6%AE%B5%E5%8C%BA%E5%88%AB" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>分页与分段区别</h3>\n<ul>\n<li>对程序员的透明性：分页透明，但是分段需要程序员显示划分每个段。</li>\n<li>地址空间的维度：分页是一维地址空间，分段是二维的。</li>\n<li>大小是否可以改变：页的大小不可变，段的大小可以动态改变。</li>\n<li>出现的原因：分页主要用于实现虚拟内存，从而获得更大的地址空间；分段主要是为了使程序和数据可以被划分为逻辑上独立的地址空间并且有助于共享和保护。</li>\n</ul>\n<h2 id="分页系统地址映射"><a href="#%E5%88%86%E9%A1%B5%E7%B3%BB%E7%BB%9F%E5%9C%B0%E5%9D%80%E6%98%A0%E5%B0%84" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>分页系统地址映射</h2>\n<ul>\n<li>内存管理单元（MMU）：管理着虚拟地址空间和物理内存的转换。</li>\n<li>页表（Page table）：页（虚拟地址空间）和页框（物理内存空间）的映射表。例如下图中，页表的第 0 个表项为 010，表示第 0 个页映射到第 2 个页框。页表项的最后一位用来标记页是否在内存中。</li>\n</ul>\n<p>下图的页表存放着 16 个页，这 16 个页需要用 4 个比特位来进行索引定位。因此对于虚拟地址（0010 000000000100），前 4 位是用来存储页面号，而后 12 位存储在页中的偏移量。</p>\n<p>（0010 000000000100）根据前 4 位得到页号为 2，读取表项内容为（110 1），它的前 3 为为页框号，最后 1 位表示该页在内存中。最后映射得到物理内存地址为（110 000000000100）。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/cf4386a1-58c9-4eca-a17f-e12b1e9770eb-3f3bbb9c057bc38c7b79ab64720ad9c1-0f06a.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 643px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 108.24261275272163%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACrElEQVQ4y6VViZLaMAzl//9l+w3lKiQQjiVJZ3ch4UgIJJzhPlU9FQeYhZ3tVDPGji0/S3qSSBHL6XSixWIhY7Va0Xq9pvVmQxseS/7GHtayfxlKP45j2u12pCSFH2zgAMDj0Yh83yfP88j3fGo2m+Q4DvX7fdnHPBgM6Hg80uFwkOG6DlmmScNheAWEFRCXL5dKZWq8vlK1WqVGo0EVo0L1ep0qlQrVajWybVt0z+e/VhlGmX68vJDfD66Ay+XyonTml4bJiKJIXIOb2+1W1kpPzbC62+3K+SdAuILDbCZDmqZTnS3CJQWqPFGA0Fd372J4BTxQu9OmTCZ9AazLPs6fASL+au+hhZ1Oh/L5vMQSsfsvQLAGlzVNExJAChQVIMatPATc7/fJJgSAxWJBWLYs6w5wPp/TVrJi/RwQ+dd2XXEP1sLlXDZLul5KXAYpeNjmB/AYQhKGkZw9tHA6nfLrcZIG6fRP0ooa1aq1O0CTQ1D4lSfHbbMh5+cxVMGG9Ho9KhQKVGPrlMuqJOH6gTPh/FUMb0mBBIOAdCYFVfH+8SEhmc1mSRz/iWW4hTrWtCKXlEEm16jv98lptaSWv502UMQhWMTFDFeKwTVsWqaUYAuAHNtvWwhAWIcLUOhwtYCcMAxpEASck4a4/xXgw9KL2UK0Il3XJY5oX7b9m/vhNsnHR4D4xvoT4IpnMGtbtuQjLEcXgaDJ3sZQgb6/vZHOZToaja+AuAT3hF1Ol9v+V2ZlEGSUDakeEHUrtm1RLpeTLp8AqvYEAiRu3JWxhpXIS/RF1R/H4/Fdx4Yu7iQuw/Q4nrPJkeQbqibmqkFs8A3mscbA2WQykYE1gG6LIqXisN2s2ZUGW+NRwKxGXKdIn4CZ9thCMB7xZZz7vif/HwBFBrjcB/rc/iF/AE9fhoRBQysJAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="cf4386a1 58c9 4eca a17f e12b1e9770eb" title="" data-src="/static/cf4386a1-58c9-4eca-a17f-e12b1e9770eb-3f3bbb9c057bc38c7b79ab64720ad9c1-0f06a.png" data-srcset="/static/cf4386a1-58c9-4eca-a17f-e12b1e9770eb-3f3bbb9c057bc38c7b79ab64720ad9c1-66246.png 200w,\n/static/cf4386a1-58c9-4eca-a17f-e12b1e9770eb-3f3bbb9c057bc38c7b79ab64720ad9c1-2dbe7.png 400w,\n/static/cf4386a1-58c9-4eca-a17f-e12b1e9770eb-3f3bbb9c057bc38c7b79ab64720ad9c1-0f06a.png 643w" data-sizes="(max-width: 643px) 100vw, 643px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h2 id="页面置换算法"><a href="#%E9%A1%B5%E9%9D%A2%E7%BD%AE%E6%8D%A2%E7%AE%97%E6%B3%95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>页面置换算法</h2>\n<p>在程序运行过程中，如果要访问的页面不在内存中，就发生缺页中断从而将该页调入内存中。此时如果内存已无空闲空间，系统必须从内存中调出一个页面到磁盘对换区中来腾出空间。</p>\n<p>页面置换算法的主要目标是使页面置换频率最低（也可以说缺页率最低）。</p>\n<h3 id="最佳"><a href="#%E6%9C%80%E4%BD%B3" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>最佳</h3>\n<blockquote>\n<p>Optimal</p>\n</blockquote>\n<p>所选择的被换出的页面将是最长时间内不再被访问，通常可以保证获得最低的缺页率。</p>\n<p>是一种理论上的算法，因为无法知道一个页面多长时间不再被访问。</p>\n<p>举例：一个系统为某进程分配了三个物理块，并有如下页面引用序列：</p>\n<html><head></head><body><div align="center"><img data-src="https://latex.codecogs.com/gif.latex?7，0，1，2，0，3，0，4，2，3，0，3，2，1，2，0，1，7，0，1" class="lazy"></div></body></html>\n<p>开始运行时，先将 7, 0, 1 三个页面装入内存。当进程要访问页面 2 时，产生缺页中断，会将页面 7 换出，因为页面 7 再次被访问的时间最长。</p>\n<h3 id="先进先出"><a href="#%E5%85%88%E8%BF%9B%E5%85%88%E5%87%BA" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>先进先出</h3>\n<blockquote>\n<p>FIFO, First In First Out</p>\n</blockquote>\n<p>所选择换出的页面是最先进入的页面。</p>\n<p>该算法会将那些经常被访问的页面也被换出，从而使缺页率升高。</p>\n<h3 id="最近最久未使用"><a href="#%E6%9C%80%E8%BF%91%E6%9C%80%E4%B9%85%E6%9C%AA%E4%BD%BF%E7%94%A8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>最近最久未使用</h3>\n<blockquote>\n<p>LRU, Least Recently Used</p>\n</blockquote>\n<p>虽然无法知道将来要使用的页面情况，但是可以知道过去使用页面的情况。LRU 将最近最久未使用的页面换出。</p>\n<p>可以用栈来实现该算法，栈中存储页面的页面号。当进程访问一个页面时，将该页面的页面号从栈移除，并将它压入栈顶。这样，最近被访问的页面总是在栈顶，而最近最久未使用的页面总是在栈底。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/eb859228-c0f2-4bce-910d-d9f76929352b-61fb193f862f817b00e35d61adc75e6c-8163f.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 537px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 30.91247672253259%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsSAAALEgHS3X78AAAA60lEQVQY0zWQ0bKDIAxE+///p0VARUcUQVBnblVQaxfbm4ewbHLIhMd5HMuyHMfhg4fY9917H0KAs67rtuHi3+f7a57nGeIZtm27ruvxev11Xeec01qrf6F1b601cJTSxthhKIWQjXTWlmUppUSO8DzPuBhjmjsg2rYtigJZCMF5LqoKT3DOKaVfATLP8x8MBm5d14Q8pWz5HVVdR5ixJyGNbAjJyC3SNC1LwRiL8DiOeAl8FoNgYJIkaMyLAjDNKKMUJmDELQjGIv92huXciOHYeZqmTqleqWEYsELfQ6oRZhfrqKIZJXwE4A/9n0dQgE9X0AAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="eb859228 c0f2 4bce 910d d9f76929352b" title="" data-src="/static/eb859228-c0f2-4bce-910d-d9f76929352b-61fb193f862f817b00e35d61adc75e6c-8163f.png" data-srcset="/static/eb859228-c0f2-4bce-910d-d9f76929352b-61fb193f862f817b00e35d61adc75e6c-e0dce.png 200w,\n/static/eb859228-c0f2-4bce-910d-d9f76929352b-61fb193f862f817b00e35d61adc75e6c-184d7.png 400w,\n/static/eb859228-c0f2-4bce-910d-d9f76929352b-61fb193f862f817b00e35d61adc75e6c-8163f.png 537w" data-sizes="(max-width: 537px) 100vw, 537px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h3 id="时钟"><a href="#%E6%97%B6%E9%92%9F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>时钟</h3>\n<blockquote>\n<p>Clock</p>\n</blockquote>\n<p>需要用到一个访问位，当一个页面被访问时，将访问位置为 1。</p>\n<p>首先，将内存中的所有页面链接成一个循环队列，当缺页中断发生时，检查当前指针所指向页面的访问位，如果访问位为 0，就将该页面换出；否则将该页的访问位设置为 0，给该页面第二次的机会，移动指针继续检查。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/5f5ef0b6-98ea-497c-a007-f6c55288eab1-f5b3b4f58918ea2f0479df3182ffd757-f978d.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 565px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 56.63716814159292%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABYklEQVQoz32TW3OCMBCF+f8/qT60nVp9aPvkSDujnQoVIaCIoOANTnN2Ggpo3ZklhCQn316woK2qKvGyLMXjOEZRFKj0Gudm3XjzjHk3ZjUnnuchyzIEQSCj4zhI0xTXLi3/ucDiJM9zodrtdjidTvUGUlJ4vV63KLrWIuSDQr7vX2w8HA5QSiEMQ5mrwIfjunBmM7h6XCwWclmLkI8kSbDf7+sFhsRQt9stzucz4tVKxo93G73eHQaDIR4f7vHU7yOMli1KESRFUeQ1GQ+b0GkkyXX435pqOHjGy+sbvjTl53QK9UtvRCVk0pnkd3PCPDIC2maTYDKZYDwew7ZtjEYjKSSBomX0l0OGxo+mRZpGMR5q5on0x+NRQJh/FtWkzGqW3XFcTbEREW6az+c1ebMfb1W7JcjbeJAVpyCrzHzesm7DW92uVyqAp4tAUbZEFEXiK11ppUJ5X2rneppmF3/NDzlbVVs2K8QOAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="5f5ef0b6 98ea 497c a007 f6c55288eab1" title="" data-src="/static/5f5ef0b6-98ea-497c-a007-f6c55288eab1-f5b3b4f58918ea2f0479df3182ffd757-f978d.png" data-srcset="/static/5f5ef0b6-98ea-497c-a007-f6c55288eab1-f5b3b4f58918ea2f0479df3182ffd757-a539b.png 200w,\n/static/5f5ef0b6-98ea-497c-a007-f6c55288eab1-f5b3b4f58918ea2f0479df3182ffd757-b8a14.png 400w,\n/static/5f5ef0b6-98ea-497c-a007-f6c55288eab1-f5b3b4f58918ea2f0479df3182ffd757-f978d.png 565w" data-sizes="(max-width: 565px) 100vw, 565px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h1 id="设备管理-1"><a href="#%E8%AE%BE%E5%A4%87%E7%AE%A1%E7%90%86-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>设备管理</h1>\n<h2 id="磁盘调度算法"><a href="#%E7%A3%81%E7%9B%98%E8%B0%83%E5%BA%A6%E7%AE%97%E6%B3%95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>磁盘调度算法</h2>\n<ul>\n<li>当多个进程同时请求访问磁盘时，需要进行磁盘调度来控制对磁盘的访问。</li>\n<li>磁盘调度的主要目标是使磁盘的平均寻道时间最少。</li>\n</ul>\n<h3 id="先来先服务-1"><a href="#%E5%85%88%E6%9D%A5%E5%85%88%E6%9C%8D%E5%8A%A1-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>先来先服务</h3>\n<blockquote>\n<p>FCFS, First Come First Served</p>\n</blockquote>\n<p>根据进程请求访问磁盘的先后次序来进行调度。优点是公平和简单，缺点也很明显，因为未对寻道做任何优化，使平均寻道时间可能较长。</p>\n<h3 id="最短寻道时间优先"><a href="#%E6%9C%80%E7%9F%AD%E5%AF%BB%E9%81%93%E6%97%B6%E9%97%B4%E4%BC%98%E5%85%88" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>最短寻道时间优先</h3>\n<blockquote>\n<p>SSTF, Shortest Seek Time First</p>\n</blockquote>\n<p>要求访问的磁道与当前磁头所在磁道距离最近的优先进行调度。这种算法并不能保证平均寻道时间最短，但是比 FCFS 好很多。</p>\n<h3 id="扫描算法"><a href="#%E6%89%AB%E6%8F%8F%E7%AE%97%E6%B3%95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>扫描算法</h3>\n<blockquote>\n<p>SCAN</p>\n</blockquote>\n<ul>\n<li>SSTF 会出现饥饿现象。考虑以下情况，新进程请求访问的磁道与磁头所在磁道的距离总是比一个在等待的进程来的近，那么等待的进程会一直等待下去。</li>\n<li>SCAN 算法在 SSTF 算法之上考虑了磁头的移动方向，要求所请求访问的磁道在磁头当前移动方向上才能够得到调度。因为考虑了移动方向，那么一个进程请求访问的磁道一定会得到调度。</li>\n<li>当一个磁头自里向外移动时，移到最外侧会改变移动方向为自外向里，这种移动的规律类似于电梯的运行，因此又常称 SCAN 算法为电梯调度算法。</li>\n</ul>\n<h3 id="循环扫描算法"><a href="#%E5%BE%AA%E7%8E%AF%E6%89%AB%E6%8F%8F%E7%AE%97%E6%B3%95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>循环扫描算法</h3>\n<blockquote>\n<p>CSCAN</p>\n</blockquote>\n<p>CSCAN 对 SCAN 进行了改动，要求磁头始终沿着一个方向移动。</p>\n<h1 id="链接"><a href="#%E9%93%BE%E6%8E%A5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>链接</h1>\n<h2 id="编译系统"><a href="#%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>编译系统</h2>\n<p>以下是一个 hello.c 程序：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="87348365511788720000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`#include <stdio.h>\n\nint main()\n{\n    printf(&quot;hello, world\\n&quot;);\n    return 0;\n}`, `87348365511788720000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="c"\n              >\n                <span class="gatsby-code-button-language">c</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="c"><pre style="counter-reset: linenumber NaN" class="language-c line-numbers"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>\n\n<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"hello, world\\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>在 Unix 系统上，由编译器把源文件转换为目标文件。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="16224562621004290000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`gcc -o hello hello.c`, `16224562621004290000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="bash"\n              >\n                <span class="gatsby-code-button-language">bash</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">gcc -o hello hello.c</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>这个过程大致如下：</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/b396d726-b75f-4a32-89a2-03a7b6e19f6f-251ca50ea259357171f06665b52b468e-f913e.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 18.545454545454543%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAEABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAd2EQH//xAAXEAADAQAAAAAAAAAAAAAAAAAAARAR/9oACAEBAAEFAsjP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFxAAAwEAAAAAAAAAAAAAAAAAAAEQMf/aAAgBAQAGPwKaz//EABkQAQACAwAAAAAAAAAAAAAAAAEAESFhcf/aAAgBAQABPyHplbYG8BP/2gAMAwEAAgADAAAAEIv/AP/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABkQAQADAQEAAAAAAAAAAAAAAAEAESExgf/aAAgBAQABPxB2e+9mxOFbcNQSuDP/2Q==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="b396d726 b75f 4a32 89a2 03a7b6e19f6f" title="" data-src="/static/b396d726-b75f-4a32-89a2-03a7b6e19f6f-251ca50ea259357171f06665b52b468e-dfbfc.jpg" data-srcset="/static/b396d726-b75f-4a32-89a2-03a7b6e19f6f-251ca50ea259357171f06665b52b468e-75a98.jpg 200w,\n/static/b396d726-b75f-4a32-89a2-03a7b6e19f6f-251ca50ea259357171f06665b52b468e-1f451.jpg 400w,\n/static/b396d726-b75f-4a32-89a2-03a7b6e19f6f-251ca50ea259357171f06665b52b468e-dfbfc.jpg 800w,\n/static/b396d726-b75f-4a32-89a2-03a7b6e19f6f-251ca50ea259357171f06665b52b468e-f913e.jpg 1100w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<ol>\n<li>预处理阶段：处理以 # 开头的预处理命令；</li>\n<li>编译阶段：翻译成汇编程序；</li>\n<li>汇编阶段：将汇编程序翻译可重定向目标程序，它是二进制的；</li>\n<li>链接阶段：将可重定向目标程序和 printf.o 等单独预编译好的目标文件进行合并，得到最终的可执行目标程序。</li>\n</ol>\n<h2 id="目标文件"><a href="#%E7%9B%AE%E6%A0%87%E6%96%87%E4%BB%B6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>目标文件</h2>\n<ol>\n<li>可执行目标文件：可以直接在内存中执行；</li>\n<li>可重定向目标文件：可与其他可重定向目标文件在链接阶段合并，创建一个可执行目标文件；</li>\n<li>共享目标文件：可以在运行时被动态加载进内存并链接；</li>\n</ol>\n<h2 id="静态链接"><a href="#%E9%9D%99%E6%80%81%E9%93%BE%E6%8E%A5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>静态链接</h2>\n<p>静态连接器以一组可重定向目标文件为输入，生成一个完全链接的可执行目标文件作为输出。链接器主要完成以下两个任务：</p>\n<ol>\n<li>符号解析：每个符号对应于一个函数、一个全局变量或一个静态变量，符号解析的目的是将每个符号引用与一个符号定义关联起来。</li>\n<li>重定位：编译器和汇编器生成从地址 0 开始的代码和数据节，链接器通过把每个符号定义与一个内存位置关联起来，从而重定位这些节，然后修改所有对这些符号的引用，使得它们指向这个内存位置。</li>\n</ol>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/47d98583-8bb0-45cc-812d-47eefa0a4a40-ab240a3c2455130f811ede48a4363e1f-d358a.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 444px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 75.45045045045046%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAECAwX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB3E4FwEf/xAAZEAACAwEAAAAAAAAAAAAAAAAAIQEQEUH/2gAIAQEAAQUCeupOn//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABUQAQEAAAAAAAAAAAAAAAAAABAx/9oACAEBAAY/AmP/xAAaEAACAwEBAAAAAAAAAAAAAAAAAREhMUFx/9oACAEBAAE/IfAdrNI9CrAnJ//aAAwDAQACAAMAAAAQEC//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAcEAEBAQEAAgMAAAAAAAAAAAABESEAMVGBobH/2gAIAQEAAT8Qff4OdowkMD74QWPyTi8tTW896AyQ/byCyd//2Q==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="47d98583 8bb0 45cc 812d 47eefa0a4a40" title="" data-src="/static/47d98583-8bb0-45cc-812d-47eefa0a4a40-ab240a3c2455130f811ede48a4363e1f-d358a.jpg" data-srcset="/static/47d98583-8bb0-45cc-812d-47eefa0a4a40-ab240a3c2455130f811ede48a4363e1f-57274.jpg 200w,\n/static/47d98583-8bb0-45cc-812d-47eefa0a4a40-ab240a3c2455130f811ede48a4363e1f-1aeea.jpg 400w,\n/static/47d98583-8bb0-45cc-812d-47eefa0a4a40-ab240a3c2455130f811ede48a4363e1f-d358a.jpg 444w" data-sizes="(max-width: 444px) 100vw, 444px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h2 id="动态链接"><a href="#%E5%8A%A8%E6%80%81%E9%93%BE%E6%8E%A5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>动态链接</h2>\n<p>静态库有以下两个问题：</p>\n<ul>\n<li>当静态库更新时那么整个程序都要重新进行链接；</li>\n<li>对于 printf 这种标准函数库，如果每个程序都要有代码，这会极大浪费资源。</li>\n</ul>\n<p>共享库是为了解决静态库的这两个问题而设计的，在 Linux 系统中通常用 .so 后缀来表示，Windows 系统上它们被称为 DLL。它具有以下特点：</p>\n<ol>\n<li>在给定的文件系统中一个库只有一个 .so 文件，所有引用该库的可执行目标文件都共享这个文件，它不会被复制到引用它的可执行文件中；</li>\n<li>在内存中，一个共享库的 .text 节的一个副本可以被不同的正在运行的进程共享。</li>\n</ol>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/76dc7769-1aac-4888-9bea-064f1caa8e77-3eefadc081201c5bbb52c20879c69a6b-9c39e.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 457px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 106.34573304157549%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAVABQDASIAAhEBAxEB/8QAGAABAQEBAQAAAAAAAAAAAAAAAAECAwX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB92JG1GMFdhH/xAAXEAEBAQEAAAAAAAAAAAAAAAABABEQ/9oACAEBAAEFAmIdmM5kc//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8BH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8BH//EABgQAAIDAAAAAAAAAAAAAAAAAAARECAx/9oACAEBAAY/AraJx//EABsQAAMAAwEBAAAAAAAAAAAAAAABESExURBB/9oACAEBAAE/IW+IpKsQlLu8chjsnjbspvIJJaP/2gAMAwEAAgADAAAAEOgoAv/EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8QH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8QH//EAB8QAQEBAAEDBQAAAAAAAAAAAAERADEhYaFBUXGR0f/aAAgBAQABPxBkg0fZmTYvjQDCCh9fJ94JuzzTEnTjB7vx08ZU41Kp+YGADtv/2Q==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="76dc7769 1aac 4888 9bea 064f1caa8e77" title="" data-src="/static/76dc7769-1aac-4888-9bea-064f1caa8e77-3eefadc081201c5bbb52c20879c69a6b-9c39e.jpg" data-srcset="/static/76dc7769-1aac-4888-9bea-064f1caa8e77-3eefadc081201c5bbb52c20879c69a6b-559da.jpg 200w,\n/static/76dc7769-1aac-4888-9bea-064f1caa8e77-3eefadc081201c5bbb52c20879c69a6b-8367b.jpg 400w,\n/static/76dc7769-1aac-4888-9bea-064f1caa8e77-3eefadc081201c5bbb52c20879c69a6b-9c39e.jpg 457w" data-sizes="(max-width: 457px) 100vw, 457px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>',
id:"/home/runner/work/GatsbyBlog/GatsbyBlog/blog/操作系统原理读书笔记/index.md absPath of file >>> MarkdownRemark",timeToRead:20,frontmatter:{date:"2018-04-01 10:23:49",path:"/os-principle/",tags:"面试, 操作系统, 后端, 读书笔记",title:"操作系统原理读书笔记",draft:null}},{excerpt:"基础概念 Web 基础 HTTP（超文本传输协议） WWW 的三种技术：HTML、HTTP、URL RFC（征求修正意见书），互联网的设计文档 URL URI（统一资源标识符） URL（统一资源定位符） URN（统一资源名称），例如 urn:isbn:0-486-27557-4 URI 包含 URL 和 URN，目前 WEB 只有 URL 比较流行，所以见到的基本都是 URL。 请求和响应报文 请求报文  响应报文  HTTP 方法 客户端发送的 第一行为请求行，包含了方法字段。 GET…",html:'<h2 id="基础概念"><a href="#%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>基础概念</h2>\n<h3 id="web-基础"><a href="#web-%E5%9F%BA%E7%A1%80" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Web 基础</h3>\n<ul>\n<li>HTTP（超文本传输协议）</li>\n<li>WWW 的三种技术：HTML、HTTP、URL</li>\n<li>RFC（征求修正意见书），互联网的设计文档</li>\n</ul>\n<h3 id="url"><a href="#url" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>URL</h3>\n<ul>\n<li>URI（统一资源标识符）</li>\n<li>URL（统一资源定位符）</li>\n<li>URN（统一资源名称），例如 urn:isbn:0-486-27557-4</li>\n</ul>\n<blockquote>\n<p>URI 包含 URL 和 URN，目前 WEB 只有 URL 比较流行，所以见到的基本都是 URL。</p>\n</blockquote>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/url_diagram-f00ae2d78722256e3092bb6714e633ca-28759.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 500px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 60%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAAB7ElEQVQoz21SW2/TMBTu/3/lmXcmgQYCiXUD2k1hg3VtxdTLkrS5NLZzj+NcncRxcdKuDMGno6Nzjv35fPbxYP83OO98QWucFKYd6jDICtrV9//B4JnDW96hYa1IZdM5H81fv5devfk2nsqi0rb8j3H+giySPu/pXRDG2WSp71CoWd5koWd5eRL1UmFHFiepyJ+r4G5pPGpIAb7wM8VaA1+Gvmx5K8PZ+fHCcGYquF+bhhsdO4tWNcmgjqBuW1sINOjuXNuwgYHkyUqZK5ZuI8N2dq65BbpqaYrlQa9JcqF+wAoar3UWp00Ys4iwkDTCcMLTvDBQaTmHpcqNaidsfNy4EXVDopgVTgZNUebQOz5aL6ZlbZWXwhitT2VKsgS4sQ7xFuROkBqoJ+dltnOOm3o2SwryayOMQv/5eXrXtqlqkYUm4jKIaRiLzrSJEmCj4XA4vrlWNpvvkvT5/MPHs7fzyVS6vb2RpK/j0eWXK3m1vr64+nT2jiSkxmkZ4MFBVZGmaKWuxndoqXi244WB7ToRjhY/HvSHx9nFSLmfR36AExLgiIlZM9Y2rBsVoxUrqZAU/FySJ5OX9b7/KgfBZG3g6VOD0/0/H60jV3FKtiBDfuFHpY+JBsswFsNvBTgvPJxaTkMr3l9b4ET+DUMbnfzAz/2VAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="url diagram" title="" data-src="/static/url_diagram-f00ae2d78722256e3092bb6714e633ca-28759.png" data-srcset="/static/url_diagram-f00ae2d78722256e3092bb6714e633ca-6ac48.png 200w,\n/static/url_diagram-f00ae2d78722256e3092bb6714e633ca-4b8bf.png 400w,\n/static/url_diagram-f00ae2d78722256e3092bb6714e633ca-28759.png 500w" data-sizes="(max-width: 500px) 100vw, 500px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h3 id="请求和响应报文"><a href="#%E8%AF%B7%E6%B1%82%E5%92%8C%E5%93%8D%E5%BA%94%E6%8A%A5%E6%96%87" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>请求和响应报文</h3>\n<ol>\n<li>请求报文 <html><head></head><body><a class="gatsby-resp-image-link" href="/static/HTTP_RequestMessageExample-d7432512c09cb121af9c8cf58d4c5317-3086a.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 656px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 33.6890243902439%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsSAAALEgHS3X78AAABXklEQVQY002Q2W6CQBSGef9HaVrTmt70omnTuqHiUsqiDDgsUkBxBmeBGUSLiU3651z85+I7J/mUKA62cRiEm3Drh5EPAy9OtoygRmBBU4aybLc/5Dml7HKS5+Z0+RfF9YAfwNXatmxz7azbNU1/ENpXFSM4qTmuKilFVTfNRXLBCeNlXdc3WJuPgGdOtMFo0oMhsFZLF9ruZpXm8QFFgh6OhFJCES54kSfhZqppSZK05Pl8VubGYGmpuq1q+mBhqwtzCMJvJ9Dj3M2PUFB0JIQxVhTHkmBOUJplUsrb589RZzTtDqdddfY8019M592Px1GmBek02o4lySkvGaNCSopzUqD2yjVFUZalMlzcacajurwfzq5lbnUnemeyfJhZTwC+Fqm/Wjuu5wEAXOAA19vtdi2LMea8VL7AmwH7Buzp7oex6Zmw13bzOv09ji/NSQjRGqqqSlzVyaY195df4y14zWG+AxQAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="HTTP RequestMessageExample" title="" data-src="/static/HTTP_RequestMessageExample-d7432512c09cb121af9c8cf58d4c5317-3086a.png" data-srcset="/static/HTTP_RequestMessageExample-d7432512c09cb121af9c8cf58d4c5317-a142c.png 200w,\n/static/HTTP_RequestMessageExample-d7432512c09cb121af9c8cf58d4c5317-201ef.png 400w,\n/static/HTTP_RequestMessageExample-d7432512c09cb121af9c8cf58d4c5317-3086a.png 656w" data-sizes="(max-width: 656px) 100vw, 656px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></li>\n<li>响应报文 <html><head></head><body><a class="gatsby-resp-image-link" href="/static/HTTP_ResponseMessageExample-b51aee4c62720404bc00da8ad05f37f2-283a0.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 704px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 37.92613636363637%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAABfklEQVQY002RWY+bMBSF+f//pIpatY06fan6MNMZhSAIAQbCNgSGnRCbxTY2W530YXr06coP99yjIwthFFxh/R6f0yyZFzZxZjrOjA4tRTXry665Qgi7rl/XdZno+p8Ez3fTNHY9Nwj8ssqzLOVXqqqs6xLjnhGI2xphTAi5rQ/9QDDXOI43s6Yr5kmXVck8Ga+W5niWaRte4HQY0pGb4ES6W+ayTNO8MvzmOaqqtl13N5t7yz3olmS6h4O2y+uwJcW1S0GfAZT3qIBlkuV5XddZlnegApeirC7LMvN7wqP4QzYen5VfsvnnFMp546bA+UcC7EsTLhSt9+jboLz58tH598tmp3zfq1vpuBWVr4r+4L8/Bckzx4+filJjqOWdh2GglJH2SnhnhBFChAzCi/5ZMr7sjxvxuNkdPqn2N+v80wweOJq3TRKxjM+240RR5N/1FgQAQgBA07SCE4leorixbEcSfwT5MSz1O9q5MDBpJ8Z4LOOxPGsglH781l+l97J2p6EBKQAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="HTTP ResponseMessageExample" title="" data-src="/static/HTTP_ResponseMessageExample-b51aee4c62720404bc00da8ad05f37f2-283a0.png" data-srcset="/static/HTTP_ResponseMessageExample-b51aee4c62720404bc00da8ad05f37f2-491a1.png 200w,\n/static/HTTP_ResponseMessageExample-b51aee4c62720404bc00da8ad05f37f2-19d07.png 400w,\n/static/HTTP_ResponseMessageExample-b51aee4c62720404bc00da8ad05f37f2-283a0.png 704w" data-sizes="(max-width: 704px) 100vw, 704px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></li>\n</ol>\n<h2 id="http-方法"><a href="#http-%E6%96%B9%E6%B3%95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>HTTP 方法</h2>\n<blockquote>\n<p>客户端发送的<code class="language-text">请求报文</code>第一行为请求行，包含了方法字段。</p>\n</blockquote>\n<h3 id="get"><a href="#get" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>GET</h3>\n<blockquote>\n<p>获取资源当前网络请求中，绝大部分使用的是 GET 方法。</p>\n</blockquote>\n<h3 id="post"><a href="#post" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>POST</h3>\n<blockquote>\n<p>传输实体主体</p>\n</blockquote>\n<ul>\n<li>POST 的主要目的不是获取资源，而是传输存储在内容实体中的数据。</li>\n<li>GET 和 POST 的请求都能使用额外的参数，但是 GET 的参数是以查询字符串出现在 URL 中，而 POST 的参数存储在内容实体。</li>\n</ul>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="46971403662873200000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`GET /test/demo_form.asp?name1=value1&name2=value2 HTTP/1.1`, `46971403662873200000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html">GET /test/demo_form.asp?name1=value1&amp;name2=value2 HTTP/1.1</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="65749962459625650000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`POST /test/demo_form.asp HTTP/1.1 Host: w3schools.com name1=value1&name2=value2`, `65749962459625650000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html">POST /test/demo_form.asp HTTP/1.1 Host: w3schools.com name1=value1&amp;name2=value2</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<ul>\n<li>\n<p>GET 的传参方式相比于 POST 安全性较差，因为 GET 传的参数在 URL 是可见的，可能泄露私密信息。并且 GET 只支持 ASCII 字符；如果参数为中文时可能会出现乱码，而 POST 支持标准字符集。</p>\n</li>\n<li>\n<p>GET 和 POST 的另一个区别是，使用 GET 方法，浏览器会把 HTTP Header 和 Data 一并发送出去，服务器响应 200（OK）并返回数据。而使用 POST 方法，浏览器先发送 Header，服务器响应 100（Continue）之后，浏览器在发送 Data，最后服务器响应 200（OK）并返回数据。</p>\n</li>\n</ul>\n<h3 id="head"><a href="#head" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>HEAD</h3>\n<blockquote>\n<p>获取报文首部</p>\n</blockquote>\n<ul>\n<li>和 GET 方法一样，但是不返回报文实体主体部分。</li>\n<li>主要用于确认 URL 有效性以及资源更新的日期时间等。</li>\n</ul>\n<h3 id="put"><a href="#put" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>PUT</h3>\n<blockquote>\n<p>上传文件由于自身不带验证机制，任何人都可以上传文件，因此存在安全性问题，一般不使用该方法。</p>\n</blockquote>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="1848850628235565600"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`PUT /new.html HTTP/1.1 Host: example.com Content-type: text/html Content-length: 16\n\n<p>New File</p>`, `1848850628235565600`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html">PUT /new.html HTTP/1.1 Host: example.com Content-type: text/html Content-length: 16\n\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>New File<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<h3 id="patch"><a href="#patch" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>PATCH</h3>\n<blockquote>\n<p>对资源进行部分修改 PUT 也可以用于修改资源，但是只能完全代替原始资源，PATCH 允许部分修改。</p>\n</blockquote>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="37092029669782315000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`PATCH /file.txt HTTP/1.1 Host: www.example.com Content-Type: application/example If-Match: &quot;e0023aa4e&quot; Content-Length:\n100 [description of changes]`, `37092029669782315000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html">PATCH /file.txt HTTP/1.1 Host: www.example.com Content-Type: application/example If-Match: "e0023aa4e" Content-Length:\n100 [description of changes]</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<h3 id="delete"><a href="#delete" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>DELETE</h3>\n<blockquote>\n<p>删除文件与 PUT 功能相反，并且同样不带验证机制。</p>\n</blockquote>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="4508156252511530500"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`DELETE /file.html HTTP/1.1`, `4508156252511530500`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html">DELETE /file.html HTTP/1.1</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<h3 id="options"><a href="#options" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>OPTIONS</h3>\n<blockquote>\n<p>查询支持的方法</p>\n</blockquote>\n<ul>\n<li>查询指定的 URL 能够支持的方法。</li>\n<li>会返回 Allow:GET,POST,HEAD,OPTIONS 这样的内容。</li>\n</ul>\n<h3 id="connect"><a href="#connect" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>CONNECT</h3>\n<blockquote>\n<p>要求用隧道协议连接代理要求在代理服务器通信时建立隧道，使用 SSL（安全套接字）和 TSL（传输层安全）协议把通信内容加密后经网络隧道传输。</p>\n</blockquote>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="73445985481379440000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`CONNECT www.example.com:443 HTTP/1.1`, `73445985481379440000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html">CONNECT www.example.com:443 HTTP/1.1</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/dc00f70e-c5c8-4d20-baf1-2d70014a97e3-e3b4504f8bea5afeaac089c28743c3da-ee7d4.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 654px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 28.287461773700308%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAGABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB3AUH/8QAFhABAQEAAAAAAAAAAAAAAAAAAAER/9oACAEBAAEFAsSMf//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABQQAQAAAAAAAAAAAAAAAAAAABD/2gAIAQEABj8Cf//EABkQAAMAAwAAAAAAAAAAAAAAAAABETFRcf/aAAgBAQABPyGtjFemR//aAAwDAQACAAMAAAAQ9A//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAaEAEBAAIDAAAAAAAAAAAAAAABEQBRITHR/9oACAEBAAE/ECZGGrgQEKnh9xpL26XP/9k=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="dc00f70e c5c8 4d20 baf1 2d70014a97e3" title="" data-src="/static/dc00f70e-c5c8-4d20-baf1-2d70014a97e3-e3b4504f8bea5afeaac089c28743c3da-ee7d4.jpg" data-srcset="/static/dc00f70e-c5c8-4d20-baf1-2d70014a97e3-e3b4504f8bea5afeaac089c28743c3da-46bbe.jpg 200w,\n/static/dc00f70e-c5c8-4d20-baf1-2d70014a97e3-e3b4504f8bea5afeaac089c28743c3da-0116f.jpg 400w,\n/static/dc00f70e-c5c8-4d20-baf1-2d70014a97e3-e3b4504f8bea5afeaac089c28743c3da-ee7d4.jpg 654w" data-sizes="(max-width: 654px) 100vw, 654px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h3 id="trace"><a href="#trace" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TRACE</h3>\n<blockquote>\n<p>追踪路径</p>\n</blockquote>\n<ul>\n<li>服务器会将通信路径返回客户端。</li>\n<li>发送请求时，在 Max-Forwards 首部字段中填入数值，每经过一个服务器就会减 1，当数值为 0 时就停止传输。</li>\n<li>通常不会使用 TRACE，并且它容易受到 XST 攻击（跨站追踪），因此更不会去使用它。</li>\n</ul>\n<h2 id="http-状态码"><a href="#http-%E7%8A%B6%E6%80%81%E7%A0%81" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>HTTP 状态码</h2>\n<blockquote>\n<p>服务器返回的<code class="language-text">响应报文</code>中第一行为状态行，包含了状态码以及原因短语，用来告知客户端请求的结果。</p>\n</blockquote>\n<table>\n<thead>\n<tr>\n<th align="center">状态码</th>\n<th align="center">类别</th>\n<th align="center">原因短语</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align="center">1XX</td>\n<td align="center">Informational（信息性状态码）</td>\n<td align="center">接收的请求正在处理</td>\n</tr>\n<tr>\n<td align="center">2XX</td>\n<td align="center">Success（成功状态码）</td>\n<td align="center">请求正常处理完毕</td>\n</tr>\n<tr>\n<td align="center">3XX</td>\n<td align="center">Redirection（重定向状态码）</td>\n<td align="center">需要进行附加操作以完成请求</td>\n</tr>\n<tr>\n<td align="center">4XX</td>\n<td align="center">Client Error（客户端错误状态码）</td>\n<td align="center">服务器无法处理请求</td>\n</tr>\n<tr>\n<td align="center">5XX</td>\n<td align="center">Server Error（服务器错误状态码）</td>\n<td align="center">服务器处理请求出错</td>\n</tr>\n</tbody>\n</table>\n<h3 id="2xx-成功"><a href="#2xx-%E6%88%90%E5%8A%9F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2XX 成功</h3>\n<ul>\n<li>200 OK</li>\n<li>204 No Content：请求已经成功处理，但是返回的响应报文不包含实体的主体部分。一般在只需要从客户端往服务器发送信息，而不需要返回数据时使用。</li>\n<li>206 Partial Content：表示客户端进行范围请求，响应报文包含由 Content-Range 指定范围的实体内容。</li>\n</ul>\n<h3 id="3xx-重定向"><a href="#3xx-%E9%87%8D%E5%AE%9A%E5%90%91" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3XX 重定向</h3>\n<ul>\n<li>301 Moved Permanently：永久性重定向</li>\n<li>302 Found：临时性重定向</li>\n<li>303 See Other：和 302 有着相同的功能，但是 303 明确要求客户端应该采用 GET 方法获取资源。</li>\n<li>注：虽然 HTTP 协议规定 301、302 状态下重定向时不允许把 POST 方法改为 GET 方法，但是大多数浏览器都会在 301、302 和 303 状态下的重定向把 POST 方法改为 GET 方法。</li>\n<li>304 Not Modified：如果请求报文首部包含一些条件，例如：If-Match，If-ModifiedSince，If-None-Match，If-Range，If-Unmodified-Since，如果不满足条件，则服务器会返回 304 状态码。</li>\n<li>307 Temporary Redirect：临时性重定向，与 302 的含义类似，但是 307 要求浏览器不会把重定向请求的 POST 方法改成 GET 方法。</li>\n</ul>\n<h3 id="4xx-客户端错误"><a href="#4xx-%E5%AE%A2%E6%88%B7%E7%AB%AF%E9%94%99%E8%AF%AF" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>4XX 客户端错误</h3>\n<ul>\n<li>400 Bad Request：请求报文中存在语法错误。</li>\n<li>401 Unauthorized：该状态码表示发送的请求需要有认证信息（BASIC 认证、DIGEST 认证）。如果之前已进行一次请求，则表示用户认证失败。</li>\n<li>403 Forbidden：请求被拒绝，服务器端没有必要给出拒绝的详细理由。</li>\n<li>404 Not Found</li>\n</ul>\n<h3 id="5xx-服务器错误"><a href="#5xx-%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%94%99%E8%AF%AF" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5XX 服务器错误</h3>\n<ul>\n<li>500 Internal Server Error：服务器正在执行请求时发生错误。</li>\n<li>503 Service Unavailable：服务器暂时处于超负载或正在进行停机维护，现在无法处理请求。</li>\n</ul>\n<h2 id="http-首部"><a href="#http-%E9%A6%96%E9%83%A8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>HTTP 首部</h2>\n<ul>\n<li>有 4 种类型的首部字段：通用首部字段、请求首部字段、响应首部字段和实体首部字段。</li>\n<li>各种首部字段及其含义如下（不需要全记，仅供查阅）：</li>\n</ul>\n<h3 id="通用首部字段"><a href="#%E9%80%9A%E7%94%A8%E9%A6%96%E9%83%A8%E5%AD%97%E6%AE%B5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>通用首部字段</h3>\n<table>\n<thead>\n<tr>\n<th align="center">首部字段名</th>\n<th align="center">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align="center">Cache-Control</td>\n<td align="center">控制缓存的行为</td>\n</tr>\n<tr>\n<td align="center">Connection</td>\n<td align="center">控制不再转发给代理的首部字段、管理持久连接</td>\n</tr>\n<tr>\n<td align="center">Date</td>\n<td align="center">创建报文的日期时间</td>\n</tr>\n<tr>\n<td align="center">Pragma</td>\n<td align="center">报文指令</td>\n</tr>\n<tr>\n<td align="center">Trailer</td>\n<td align="center">报文末端的首部一览</td>\n</tr>\n<tr>\n<td align="center">Transfer-Encoding</td>\n<td align="center">指定报文主体的传输编码方式</td>\n</tr>\n<tr>\n<td align="center">Upgrade</td>\n<td align="center">升级为其他协议</td>\n</tr>\n<tr>\n<td align="center">Via</td>\n<td align="center">代理服务器的相关信息</td>\n</tr>\n<tr>\n<td align="center">Warning</td>\n<td align="center">错误通知</td>\n</tr>\n</tbody>\n</table>\n<h3 id="请求首部字段"><a href="#%E8%AF%B7%E6%B1%82%E9%A6%96%E9%83%A8%E5%AD%97%E6%AE%B5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>请求首部字段</h3>\n<table>\n<thead>\n<tr>\n<th align="center">首部字段名</th>\n<th align="center">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align="center">Accept</td>\n<td align="center">用户代理可处理的媒体类型</td>\n</tr>\n<tr>\n<td align="center">Accept-Charset</td>\n<td align="center">优先的字符集</td>\n</tr>\n<tr>\n<td align="center">Accept-Encoding</td>\n<td align="center">优先的内容编码</td>\n</tr>\n<tr>\n<td align="center">Accept-Language</td>\n<td align="center">优先的语言（自然语言）</td>\n</tr>\n<tr>\n<td align="center">Authorization</td>\n<td align="center">Web 认证信息</td>\n</tr>\n<tr>\n<td align="center">Expect</td>\n<td align="center">期待服务器的特定行为</td>\n</tr>\n<tr>\n<td align="center">From</td>\n<td align="center">用户的电子邮箱地址</td>\n</tr>\n<tr>\n<td align="center">Host</td>\n<td align="center">请求资源所在服务器</td>\n</tr>\n<tr>\n<td align="center">If-Match</td>\n<td align="center">比较实体标记（ETag）</td>\n</tr>\n<tr>\n<td align="center">If-Modified-Since</td>\n<td align="center">比较资源的更新时间</td>\n</tr>\n<tr>\n<td align="center">If-None-Match</td>\n<td align="center">比较实体标记（与 If-Match 相反）</td>\n</tr>\n<tr>\n<td align="center">If-Range</td>\n<td align="center">资源未更新时发送实体 Byte 的范围请求</td>\n</tr>\n<tr>\n<td align="center">If-Unmodified-Since</td>\n<td align="center">比较资源的更新时间（与 If-Modified-Since 相反）</td>\n</tr>\n<tr>\n<td align="center">Max-Forwards</td>\n<td align="center">最大传输逐跳数</td>\n</tr>\n<tr>\n<td align="center">Proxy-Authorization</td>\n<td align="center">代理服务器要求客户端的认证信息</td>\n</tr>\n<tr>\n<td align="center">Range</td>\n<td align="center">实体的字节范围请求</td>\n</tr>\n<tr>\n<td align="center">Referer</td>\n<td align="center">对请求中 URI 的原始获取方</td>\n</tr>\n<tr>\n<td align="center">TE</td>\n<td align="center">传输编码的优先级</td>\n</tr>\n<tr>\n<td align="center">User-Agent</td>\n<td align="center">HTTP 客户端程序的信息</td>\n</tr>\n</tbody>\n</table>\n<h3 id="响应首部字段"><a href="#%E5%93%8D%E5%BA%94%E9%A6%96%E9%83%A8%E5%AD%97%E6%AE%B5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>响应首部字段</h3>\n<table>\n<thead>\n<tr>\n<th align="center">首部字段名</th>\n<th align="center">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align="center">Accept-Ranges</td>\n<td align="center">是否接受字节范围请求</td>\n</tr>\n<tr>\n<td align="center">Age</td>\n<td align="center">推算资源创建经过时间</td>\n</tr>\n<tr>\n<td align="center">ETag</td>\n<td align="center">资源的匹配信息</td>\n</tr>\n<tr>\n<td align="center">Location</td>\n<td align="center">令客户端重定向至指定 URI</td>\n</tr>\n<tr>\n<td align="center">Proxy-Authenticate</td>\n<td align="center">代理服务器对客户端的认证信息</td>\n</tr>\n<tr>\n<td align="center">Retry-After</td>\n<td align="center">对再次发起请求的时机要求</td>\n</tr>\n<tr>\n<td align="center">Server</td>\n<td align="center">HTTP 服务器的安装信息</td>\n</tr>\n<tr>\n<td align="center">Vary</td>\n<td align="center">代理服务器缓存的管理信息</td>\n</tr>\n<tr>\n<td align="center">WWW-Authenticate</td>\n<td align="center">服务器对客户端的认证信息</td>\n</tr>\n</tbody>\n</table>\n<h3 id="实体首部字段"><a href="#%E5%AE%9E%E4%BD%93%E9%A6%96%E9%83%A8%E5%AD%97%E6%AE%B5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>实体首部字段</h3>\n<table>\n<thead>\n<tr>\n<th align="center">首部字段名</th>\n<th align="center">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align="center">Allow</td>\n<td align="center">资源可支持的 HTTP 方法</td>\n</tr>\n<tr>\n<td align="center">Content-Encoding</td>\n<td align="center">实体主体适用的编码方式</td>\n</tr>\n<tr>\n<td align="center">Content-Language</td>\n<td align="center">实体主体的自然语言</td>\n</tr>\n<tr>\n<td align="center">Content-Length</td>\n<td align="center">实体主体的大小</td>\n</tr>\n<tr>\n<td align="center">Content-Location</td>\n<td align="center">替代对应资源的 URI</td>\n</tr>\n<tr>\n<td align="center">Content-MD5</td>\n<td align="center">实体主体的报文摘要</td>\n</tr>\n<tr>\n<td align="center">Content-Range</td>\n<td align="center">实体主体的位置范围</td>\n</tr>\n<tr>\n<td align="center">Content-Type</td>\n<td align="center">实体主体的媒体类型</td>\n</tr>\n<tr>\n<td align="center">Expires</td>\n<td align="center">实体主体过期的日期时间</td>\n</tr>\n<tr>\n<td align="center">Last-Modified</td>\n<td align="center">资源的最后修改日期时间</td>\n</tr>\n</tbody>\n</table>\n<h2 id="具体应用"><a href="#%E5%85%B7%E4%BD%93%E5%BA%94%E7%94%A8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>具体应用</h2>\n<h3 id="cookie"><a href="#cookie" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Cookie</h3>\n<ul>\n<li>\n<p>HTTP 协议是无状态的，主要是为了 HTTP 协议尽可能简单，使得它能够处理大量事物。HTTP/1.1 引入 Cookie 来保存状态信息。</p>\n</li>\n<li>\n<p>Cookie 是服务器发送给客户端的数据，该数据会被保存在浏览器中，并且客户端的下一次请求报文会包含该数据。通过 Cookie 可以让服务器知道两个请求是否来自于同一个客户端，从而实现保持登录状态等功能。</p>\n</li>\n<li>\n<p>创建过程</p>\n<blockquote>\n<p>服务器发送的响应报文包含 Set-Cookie 字段，客户端得到响应报文后把 Cookie 内容保存到浏览器中。</p>\n</blockquote>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="68915331427542740000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`HTTP/1.0 200 OK Content-type: text/html Set-Cookie: yummy_cookie=choco Set-Cookie: tasty_cookie=strawberry [page\ncontent]`, `68915331427542740000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html">HTTP/1.0 200 OK Content-type: text/html Set-Cookie: yummy_cookie=choco Set-Cookie: tasty_cookie=strawberry [page\ncontent]</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<blockquote>\n<p>客户端之后发送该请求时，会从浏览器中读出 Cookie 值，在请求报文中包含 Cookie 字段。</p>\n</blockquote>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="19360521368269156000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`GET /sample_page.html HTTP/1.1 Host: www.example.org Cookie: yummy_cookie=choco; tasty_cookie=strawberry`, `19360521368269156000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html">GET /sample_page.html HTTP/1.1 Host: www.example.org Cookie: yummy_cookie=choco; tasty_cookie=strawberry</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n</li>\n<li>\n<p>Set-Cookie</p>\n</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th align="center">属性</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align="center">NAME=VALUE</td>\n<td>赋予 Cookie 的名称和其值（必需项）</td>\n</tr>\n<tr>\n<td align="center">expires=DATE</td>\n<td>Cookie 的有效期（若不明确指定则默认为浏览器关闭前为止）</td>\n</tr>\n<tr>\n<td align="center">path=PATH</td>\n<td>将服务器上的文件目录作为 Cookie 的适用对象（若不指定则默认为文档所在的文件目录）</td>\n</tr>\n<tr>\n<td align="center">domain=域名</td>\n<td>作为 Cookie 适用对象的域名（若不指定则默认为创建 Cookie 的服务器的域名）</td>\n</tr>\n<tr>\n<td align="center">Secure</td>\n<td>仅在 HTTPs 安全通信时才会发送 Cookie</td>\n</tr>\n<tr>\n<td align="center">HttpOnly</td>\n<td>加以限制，使 Cookie 不能被 JavaScript 脚本访问</td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li>Session 和 Cookie 区别 Session 是服务器用来跟踪用户的一种手段，每个 Session 都有一个唯一标识：Session ID。当服务器创建一个 Session 时，给客户端发送的响应报文包含了 Set-Cookie 字段，其中一个名为 sid 的键值对，这个键值对就是 Session ID。客户端收到后就把 Cookie 保存在浏览器中，并且之后发送的请求报文都包含 Session ID。HTTP 就是通过 Session 和 Cookie 这两种方式一起合作来实现来跟踪用户状态的，Session 用于服务器端，Cookie 用于客户端。</li>\n<li>浏览器禁用 Cookie 的情况 会使用 URL 重写技术，在 URL 后面加上 sid=xxx;</li>\n<li>使用 Cookie 实现用户名和密码的自动填写 网站脚本会自动从保存在浏览器的 Cookie 读取用户名和密码，从而实现自动填写。</li>\n</ul>\n<h3 id="缓存"><a href="#%E7%BC%93%E5%AD%98" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>缓存</h3>\n<ol>\n<li>\n<p>优点</p>\n</li>\n<li>\n<p>降低服务器的负担</p>\n</li>\n<li>\n<p>提高响应速度（缓存资源比服务器上的资源离客户端更近）</p>\n</li>\n<li>\n<p>实现方法</p>\n</li>\n<li>\n<p>让代理服务器进行缓存</p>\n</li>\n<li>\n<p>让客户端浏览器进行缓存</p>\n</li>\n<li>\n<p>Cache-Control 字段</p>\n<blockquote>\n<p>HTTP 通过 Cache-Control 首部字段来控制缓存。</p>\n</blockquote>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="35977591411907682000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`Cache-Control: private, max-age=0, no-cache`, `35977591411907682000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html">Cache-Control: private, max-age=0, no-cache</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n</li>\n<li>\n<p>no-cache 指令</p>\n</li>\n<li>\n<p>该字段出现在请求报文的 Cache-Control 字段中，表示缓存服务器需要先向原服务器验证缓存资源是否过期；</p>\n</li>\n<li>\n<p>该指令出现在响应报文的 Cache-Control 字段中，表示缓存服务器在进行缓存之前需要先验证缓存资源的有效性。</p>\n</li>\n<li>\n<p>no-store 指令</p>\n</li>\n<li>\n<p>该指令表示缓存服务器不能对请求或响应的任何一部分进行缓存。</p>\n</li>\n<li>\n<p>no-cache 不表示不缓存，而是缓存之前需要先进行验证，no-store 才是不进行缓存。</p>\n</li>\n<li>\n<p>max-age 指令</p>\n</li>\n<li>\n<p>该指令出现在请求报文的 Cache-Control 字段中，如果缓存资源的缓存时间小于该指令指定的时间，那么就能接受该缓存。</p>\n</li>\n<li>\n<p>该指令出现在响应报文的 Cache-Control 字段中，表示缓存资源在缓存服务器中保存的时间。</p>\n</li>\n<li>\n<p>Expires 字段也可以用于告知缓存服务器该资源什么时候过期。在 HTTP/1.1 中，会优先处理 Cache-Control:max-age 指令；而在 HTTP/1.0 中，Cache-Control:max-age 指令会被忽略掉。</p>\n</li>\n</ol>\n<h3 id="持久连接"><a href="#%E6%8C%81%E4%B9%85%E8%BF%9E%E6%8E%A5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>持久连接</h3>\n<blockquote>\n<p>当浏览器访问一个包含多张图片的 HTML 页面时，除了请求访问 HTML 页面资源，还会请求图片资源，如果每进行一次 HTTP 通信就要断开一次 TCP 连接，连接建立和断开的开销会很大。持久连接只需要建立一次 TCP 连接就能进行多次 HTTP 通信。</p>\n</blockquote>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/450px-HTTP_persistent_connection-90bc58c29af94085ef2777cd1077c507-a64ad.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 450px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.22222222222222%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAACdElEQVQoz11TTUhUURT+7r3vvfHNzPuZeW/+3syYjeNPmpYNGgyRQQpTKQaBGYGrRMOgRa0jBEEQWlUQ0aIMzakWFRZJbYxoJS5c1CpauA3at3idN/PmrwOHe8/vPed85wIeyVDBkKFbljhGnCRO+KeFGmmQIBAHmEOcJk3U9/FiPFn3PSVRVXITPElCVGHQDD9ZGK1kEkeEBEVGSiI/kqVYVc8E2j7xgLwIQ3QbPVoKgaZAlTgFwdsq0gshY41qPKn2IDuaavKTieMMqloVd+UgNij7jaFO5F2qxtU72J+IjW/dYRSC9bB1WcFbSjhvH5bGXkf6cBA5zvfMJA5yOu44nksAJQYXQdkFgg9wIreK5cwiW9Hv4WF4BCvtNrq8tmENOPW8Di7Yc3iUu8Rfmufw2SrgQ9bBZKPi6ds8uXAVvdNjmfFi/plGFcrQXAYshcgcqvmdujhVOdvlfGyCbTh5/DSHsR8+ip18EgveizRPJdKYhDQTLeKH3Ys9axTfrS5sFSwMewDAxiDm8aTilkMpVcKbztP4QpWu6Ql8jTKUopWOwS1sF7j1qh+51Y7k2efBK7FNTCouPyPNkpX7FcaaEODIReawqk9gSzuP7cQx7BxJ4bq3crRRRgDWutAydwmly33dyFZA0cCpbXykuaTrK/MXQqVZ22WYQ08xc+gmHouaTSEMCGyvm3j95SKmYsu4b93CkjmL9/F+lAcs9BtV6yCBB/xGgtFiGq1rOU6NSEa5cmccriTCvwScTe4U3rFrWs2NyhPMbznUkoDrI5hkLvarKbwkjR9SCw4o/heieaV9ra773+9/SvvLXIfTA78m/AOnSGMfWOWxBwAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="450px HTTP persistent connection" title="" data-src="/static/450px-HTTP_persistent_connection-90bc58c29af94085ef2777cd1077c507-a64ad.png" data-srcset="/static/450px-HTTP_persistent_connection-90bc58c29af94085ef2777cd1077c507-a484f.png 200w,\n/static/450px-HTTP_persistent_connection-90bc58c29af94085ef2777cd1077c507-d7c5d.png 400w,\n/static/450px-HTTP_persistent_connection-90bc58c29af94085ef2777cd1077c507-a64ad.png 450w" data-sizes="(max-width: 450px) 100vw, 450px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<ul>\n<li>持久连接需要使用 Connection 首部字段进行管理。HTTP/1.1 开始 HTTP 默认是持久化连接的，如果要断开 TCP 连接，需要由客户端或者服务端提出断开，使用 Connection:close；而在 HTTP/1.1 之前默认是非持久化连接的，如果要维持持续连接，需要使用 Connection:Keep-Alive。</li>\n<li>管线化方式可以同时发送多个请求和响应，而不需要发送一个请求然后等待响应之后再发另一个请求。</li>\n</ul>\n<h3 id="编码"><a href="#%E7%BC%96%E7%A0%81" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>编码</h3>\n<blockquote>\n<p>编码主要是为了对实体进行压缩。常用的编码有：gzip、compress、deflate、identity，其中 identity 表示不执行压缩的编码格式。</p>\n</blockquote>\n<h3 id="分块传输"><a href="#%E5%88%86%E5%9D%97%E4%BC%A0%E8%BE%93" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>分块传输</h3>\n<blockquote>\n<p>分块传输可以把数据分割成多块，让浏览器逐步显示页面。</p>\n</blockquote>\n<h3 id="多部分对象集合"><a href="#%E5%A4%9A%E9%83%A8%E5%88%86%E5%AF%B9%E8%B1%A1%E9%9B%86%E5%90%88" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>多部分对象集合</h3>\n<ul>\n<li>一份报文主体内可含有多种类型的实体同时发送，每个部分之间用 boundary 字段定义的分割符进行分隔，每个部分都可以有首部字段。</li>\n<li>例如，上传多个表单时可以使用如下的方式：</li>\n</ul>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="25056161631405048000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`Content-Type: multipart/form-data; boundary=AaB03x --AaB03x Content-Disposition: form-data; name=&quot;submit-name&quot; Larry\n--AaB03x Content-Disposition: form-data; name=&quot;files&quot;; filename=&quot;file1.txt&quot; Content-Type: text/plain ... contents of\nfile1.txt ... --AaB03x--`, `25056161631405048000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html">Content-Type: multipart/form-data; boundary=AaB03x --AaB03x Content-Disposition: form-data; name="submit-name" Larry\n--AaB03x Content-Disposition: form-data; name="files"; filename="file1.txt" Content-Type: text/plain ... contents of\nfile1.txt ... --AaB03x--</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<h3 id="范围请求"><a href="#%E8%8C%83%E5%9B%B4%E8%AF%B7%E6%B1%82" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>范围请求</h3>\n<ul>\n<li>如果网络出现中断，服务器只发送一部分数据，范围请求使得客户端能够只请求未发送的那部分数据，从而避免服务器重新发送所有数据。</li>\n<li>在请求报文首部中添加 Range 字段，然后指定请求的范围，例如 Range:bytes=5001-10000。请求成功的话服务器发送 206Partial Content 状态。</li>\n</ul>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="63580867594056550000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`GET /z4d4kWk.jpg HTTP/1.1 Host: i.imgur.com Range: bytes=0-1023`, `63580867594056550000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html">GET /z4d4kWk.jpg HTTP/1.1 Host: i.imgur.com Range: bytes=0-1023</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="99782218183359450000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`HTTP/1.1 206 Partial Content Content-Range: bytes 0-1023/146515 Content-Length: 1024 ... (binary content)`, `99782218183359450000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html">HTTP/1.1 206 Partial Content Content-Range: bytes 0-1023/146515 Content-Length: 1024 ... (binary content)</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<h3 id="内容协商"><a href="#%E5%86%85%E5%AE%B9%E5%8D%8F%E5%95%86" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>内容协商</h3>\n<ul>\n<li>通过内容协商返回最合适的内容，例如根据浏览器的默认语言选择返回中文界面还是英文界面。</li>\n<li>涉及以下首部字段：Accept、Accept-Charset、Accept-Encoding、Accept-Language、Content-Language。</li>\n</ul>\n<h3 id="虚拟主机"><a href="#%E8%99%9A%E6%8B%9F%E4%B8%BB%E6%9C%BA" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>虚拟主机</h3>\n<blockquote>\n<p>使用虚拟主机技术，使得一台服务器拥有多个域名，并且在逻辑上可以看成多个服务器。</p>\n</blockquote>\n<h3 id="通信数据转发"><a href="#%E9%80%9A%E4%BF%A1%E6%95%B0%E6%8D%AE%E8%BD%AC%E5%8F%91" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>通信数据转发</h3>\n<ol>\n<li>\n<p>代理</p>\n</li>\n<li>\n<p>代理服务器接受客户端的请求，并且转发给其他服务器。</p>\n</li>\n<li>\n<p>使用代理的主要目的是：缓存、网络访问控制以及访问日志记录。</p>\n</li>\n<li>\n<p>代理服务器分为正向代理和反向代理两种，用户察觉到正向代理的存在，而反向代理一般位于内部网络中，用户察觉不到。 <html><head></head><body><a class="gatsby-resp-image-link" href="/static/a314bb79-5b18-4e63-a976-3448bffa6f1b-23f226eb5731de67e020eee8302d87e8-72b6c.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 527px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 32.25806451612903%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsSAAALEgHS3X78AAABAklEQVQY011PXUvDMBTdbxMU/D/i+/QHDR9UfJtzGtu50nazrClpmLY+tItUK0uy5sM7w3R4yIXL4ZxzT3rWWqVU13V2D9qYjdZuN8YwxnKSs7r+bD72ZT0YjHEYxpRSEBmtN9bmg4ukf/6+fHGisnxDyEtTDIvehW7NhJAoigmhQRANh7dt21aMoZNTdHi8uLyCoCWlo9E4TTOMCUI+HHB1tuaiKIMgTJLFxH9CD498vf4S4r5/Njg4IndjZW1dVb4/mc8TeJ7nN03zZ4bJsmwWzyASKjn29TmJr2+kkK7eql5Np9OiKDgX///cKcU5l1L+shAgf1LcEcgUACnMjnT4BtdjSWEP9I4lAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="a314bb79 5b18 4e63 a976 3448bffa6f1b" title="" data-src="/static/a314bb79-5b18-4e63-a976-3448bffa6f1b-23f226eb5731de67e020eee8302d87e8-72b6c.png" data-srcset="/static/a314bb79-5b18-4e63-a976-3448bffa6f1b-23f226eb5731de67e020eee8302d87e8-96efc.png 200w,\n/static/a314bb79-5b18-4e63-a976-3448bffa6f1b-23f226eb5731de67e020eee8302d87e8-b717e.png 400w,\n/static/a314bb79-5b18-4e63-a976-3448bffa6f1b-23f226eb5731de67e020eee8302d87e8-72b6c.png 527w" data-sizes="(max-width: 527px) 100vw, 527px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n<li>\n<p>网关</p>\n<blockquote>\n<p>与代理服务器不同的是，网关访问器会将 HTTP 转化为其他协议进行通信，从而请求其他非 HTTP 服务器的服务。</p>\n</blockquote>\n</li>\n<li>\n<p>隧道</p>\n<blockquote>\n<p>使用 SSL 等加密手段，为客户端和服务器之间建立一条安全的通信线路。</p>\n</blockquote>\n</li>\n</ol>\n<h2 id="https"><a href="#https" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>HTTPs</h2>\n<ul>\n<li>\n<p>HTTP 有以下安全性问题：</p>\n<ol>\n<li>使用明文进行通信，内容可能会被窃听；</li>\n<li>不验证通信方的身份，通信方的身份有可能遭遇伪装。</li>\n<li>无法证明报文的完整性，报文有可能遭篡改。</li>\n</ol>\n</li>\n<li>\n<p>HTTPs 并不是新协议，而是 HTTP 先和 SSL 通信，再由 SSL 和 TCP 通信。通过使用 SSL，HTTPs 提供了加密、认证和完整性保护。</p>\n</li>\n</ul>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/ssl-offloading-2b112d87802962fcf1d6edcee57de0c6-38582.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 31.278331822302814%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAGABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB3oFB/8QAFxAAAwEAAAAAAAAAAAAAAAAAAAExQf/aAAgBAQABBQLRT//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABYQAAMAAAAAAAAAAAAAAAAAAAAQMf/aAAgBAQAGPwIq/8QAGBABAAMBAAAAAAAAAAAAAAAAAQARIUH/2gAIAQEAAT8hp6yU7qBBbbP/2gAMAwEAAgADAAAAEHPP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGhAAAgMBAQAAAAAAAAAAAAAAAREAITFBcf/aAAgBAQABPxAlaqYo9PDIIiAFk9n/2Q==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="ssl offloading" title="" data-src="/static/ssl-offloading-2b112d87802962fcf1d6edcee57de0c6-dfbfc.jpg" data-srcset="/static/ssl-offloading-2b112d87802962fcf1d6edcee57de0c6-75a98.jpg 200w,\n/static/ssl-offloading-2b112d87802962fcf1d6edcee57de0c6-1f451.jpg 400w,\n/static/ssl-offloading-2b112d87802962fcf1d6edcee57de0c6-dfbfc.jpg 800w,\n/static/ssl-offloading-2b112d87802962fcf1d6edcee57de0c6-38582.jpg 1103w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h3 id="加密"><a href="#%E5%8A%A0%E5%AF%86" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>加密</h3>\n<ol>\n<li>\n<p>对称密钥（加密解密使用同一密钥）</p>\n</li>\n<li>\n<p>优点：运算速度快；</p>\n</li>\n<li>\n<p>缺点：密钥容易被获取。 <img src="/images/scrypt.gif"></p>\n</li>\n<li>\n<p>公开密钥</p>\n<blockquote>\n<p>公开密钥加密使用一对密钥用于加密解密，分别为公开密钥和私有密钥。公开密钥所有人都可以获得，通信发送方获得接收方的公开密钥之后，就可以使用公开密钥进行加密，接收方收到通信内容后使用私有密钥解密。</p>\n</blockquote>\n</li>\n<li>\n<p>优点：更为安全；</p>\n</li>\n<li>\n<p>缺点：运算速度慢。 <img src="/images/pcrypt.gif"></p>\n</li>\n<li>\n<p>HTTPs 采用的加密方式</p>\n<blockquote>\n<p>HTTPs 采用混合的加密机制，使用公开密钥加密用于传输对称密钥，之后使用对称密钥加密进行通信。</p>\n</blockquote>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/How-HTTPS-Works-21ad59bf286ba8dadca2acf7b318dd0e-72d75.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 260.41666666666663%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAA0CAIAAAAFR49sAAAACXBIWXMAAAsSAAALEgHS3X78AAAFpElEQVRIx6VWaW8bZRDOz0R84gsI8QNQkShUVOJDEUIggRAVqfjQqiRUhLQpoTnAuWzHTnyv79ix9/C5tvc+HZ712F5fiagYJatZ7zvvO/PMzDPv2s3/kDX8D4dD13Wh9Pv98Pl5KpW+jMUyGSaeSESiUeiJZBK/B0OhwWBA633jqZiW1Wg02+02Lwg8L9Tq9TrLQud4vnp9zXKcZVmLJ1er1XK5XCwWc7kclE6nM7s9CV4rlcr19TWW5fN5wzDGxrBJJBKpVOry8jJ6Ea3VarR6Knh1HCcSiWBNLBYLh8Oapvlu27ZtmiaeCwcuCOLAsbIs+24DrW63C2NVU5utJhRjleC0aDS6t7cnCAK5NkYb/iSTSbgUj8dbrVZjlcAGC+A8dN+YkgSbZrOp6/ptPmM1oM1ms1NE1wgMCGGDsCnnC4IfNV1TVEWRZU1VsX4cM45FzHiKoogyQJ4zmQxSUiqV8EQ4SAfLso7luLZrO47pOJIkjY2BHmIOhULHx8dIJjaCY3j2ej1sh72g8yx/cRVONONdJsds/0GAe8ZAEtsfHBycnZ1xHAd7nue5iUCv1WtMMvssuP4r85zd+Stw756iKP7JABBgoDxwmqqqyzFjNbD0oEHwikJF7hnjVxiYIyFl2ZjyLHZFnKEbBiVl7DYOVyaC6rcnQmVHCgw4ngM6VEVjY/hALtEiXuCZLIMyLBYKwDmdTqNb2u2WY49TaFiW7zaOhRl9wBZU9KOyGP1R8RvOy9jmTmmH/+c4+NUjH+1ZY/iDAuY4tsW3ngWfPA2tN/lWna3XKvVDZjdQC3QiF4n1n320kXHYUIXBf2COp23Yx/nD4+LflmHjFZm3Le8AdzgEDH6R4BsORzOj46Cs7EqEI8kS/rBAGgwoI2uUQ5yM2uj1+0gDsiWNBJWM+KEg+VTMKwhQ9hIlO66ry31NkbpdsVAo7O/vn56eBgKB3d1dlDrlZrXx59sfH2T/TP7wHvP6O2N4M3RsBIkGRkmgQlf2me92vBZtyQ2pFBpwWUUzljv5VmNkXFN0VVE105YVjXLozshdxpTkZDzZFkWvLtzhW0wM4LkV3jhNnRaPfiufv2x1ROSMmhHNDBq4urpamBVzMX/95uFhIVDYeJB+8UVP1nNZBjifnJygwwE7wF/JbWNjVdMa1ZylipZlIm8eY43E+zRhrNtSpZiWnfrxXTbwE9wa9HtvEfNoey15tF3PxzTDuoN9VxjDPa+240mW4wEegT+dUtN5JJNI0qDfp3HpdxUZYBGgBgGgMTE9QIxgVVACWo0YBmucOepVFPya2nrEJfY8R1QF3zDcM0w2lc5gC6IaOk2Ix1Obmz4ZIGZsltv4pBnbhqOFfNYj3kY7vfFZavMB3+zUazU0rDVqw8qrVyf37/tkQBu7Xkl6ZIDCADsCOfb8BRf5XTdtTVMRC/EcZXGOevEiT2RlVm3LMkyzK4pXlQpC99lzeaYZI2bWNQxs8ARmkwODXluoV8upRKLbaPi8PXeCbYN0MbRQm6jQo6Mj6EC705Nijz/IbT+MPX2++9GHPtqzgmKEMRIDyBAnxhC6wusTXugUwoNmWShWuWDQB+y/CFgPiWgk93KHv4D8/VQtkMaUAKa6V0iDgeHcFF9/w2x8CvxXu33HncKDUPeA1DSdSnjMJHSJwRCnmwkE2QYH4hU0SErHE2/iewNgagyQQK4ZDLRSKV8o0G0Qlz0ouFkAP7r4QRiGoennX+IQPV4QmeU48GklRY+81Wx3iM4gkpgddI5YDKrNsjO86bTbXlVMhEY0rin4JAuFfjVmO648c6FBVzmhb98pvfkeoYRDQXZGkHC4HY2cw7Xs1pfRx+/PpYrq2ZS7joH2cnGnWr64ggAc+Kz1TRl+uXNXKRiougEepA5bjlkdfVI1Hcuw2I+ZCGQqt6V6dg258y+x4G9MvT36FwAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="How HTTPS Works" title="" data-src="/static/How-HTTPS-Works-21ad59bf286ba8dadca2acf7b318dd0e-fee1c.png" data-srcset="/static/How-HTTPS-Works-21ad59bf286ba8dadca2acf7b318dd0e-a67b7.png 200w,\n/static/How-HTTPS-Works-21ad59bf286ba8dadca2acf7b318dd0e-0b187.png 400w,\n/static/How-HTTPS-Works-21ad59bf286ba8dadca2acf7b318dd0e-fee1c.png 800w,\n/static/How-HTTPS-Works-21ad59bf286ba8dadca2acf7b318dd0e-b1a91.png 1200w,\n/static/How-HTTPS-Works-21ad59bf286ba8dadca2acf7b318dd0e-95179.png 1600w,\n/static/How-HTTPS-Works-21ad59bf286ba8dadca2acf7b318dd0e-72d75.png 1920w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n</ol>\n<h3 id="认证"><a href="#%E8%AE%A4%E8%AF%81" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>认证</h3>\n<blockquote>\n<p>通过使用证书来对通信方进行认证。</p>\n</blockquote>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/mutualssl_small-0f2ec0eb0c5211199da4622e710d4d33-80d40.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 640px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 77.03125%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsSAAALEgHS3X78AAAC5UlEQVQ4y42TS29bVRDH/dWADwGLsmLZBUvYseiCShWqVNQFGxYICVSUtAhI1FRNUttxGveZ4LSO7Xtzrx0/7vtpXz/zY8613ZAVjDS6586Z+c/8Z+YUWMnl5SXXZJIoK9kEqi/+Znv7Fq5nLO/G8TXXf8cW1M/akGUZ3W5XAj0CqwOLKcx0htEb9is7GH07TxIM2uLj574qZg2qtKCw1oBBEKBpGtPZjEkcykVIR7tD/d3X/FU+ZWP3PbP5nFnq5T6a1pIY/6pKBagyrgFd26LZOFtRTlmME7T3d9DPvmVrr8r2szdEnv2BcqPRZGC5VxWuKSsZjud07Ug0JBjOhe0Yp6Ph9X38QUDqXJDYHRK3J94zmNr4VpNRJH2dRzkYS8pLwHC0IB5N6fb6ONGE9kWPt8fHnBs6hmmgG6Z8O3h+hOv0GIUtRmlAaAujSX9V5UJRlsNijhOOCOOEUrlCXetgux6ntRq2bYtaWJaVnz0ZhgIahgYnr/c5e/sHWdRmvsiRloCOBDTOu9QbLVrNJi1zIJW1efXqJS0Zkmp+U9lbzZxB6NtME5Ot7Q3+LD4jtuv0Bs5ybXK6gfQtnRPFKWkcEGcLLMejbZqEYXhNI2EReH2ZmWIxlBbINkwsfD9e7SFz2akLbFmZnitTbfexghG+JNF1Paep6FqWUBdNh0PG2VAqNOibJ2ShDCZpM3AsFFbhpydf8v3mF9zbvMGJviuZRpLAzUHq9foK7Epd1xWfQHppEcq5pj/m/sNP+eH3Gyiswt1HN3mwdcJ3v96m2nywekAL/kuWWwcvGr/wuPgZtdff8PPOxxR+fPIV9zd/4+7GLU7bOx/c+R+QSmrmU7YOPuHl8UdsFD+nMBqrgfRIMoc4iYSOnz/BUFSdo2hpW9vzOxmO+vqyQkmaEA9donRAmsXLKa/FODfY39ujUqlweFihXCpxVK1ydHREuVymWCxycFChVCxx+Pw5u7tPZb3Ma3X/A4O9WPTvHWZ+AAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="mutualssl small" title="" data-src="/static/mutualssl_small-0f2ec0eb0c5211199da4622e710d4d33-80d40.png" data-srcset="/static/mutualssl_small-0f2ec0eb0c5211199da4622e710d4d33-5da91.png 200w,\n/static/mutualssl_small-0f2ec0eb0c5211199da4622e710d4d33-08121.png 400w,\n/static/mutualssl_small-0f2ec0eb0c5211199da4622e710d4d33-80d40.png 640w" data-sizes="(max-width: 640px) 100vw, 640px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<ul>\n<li>数字证书认证机构（CA）是客户端与服务器双方都可信赖的第三方机构。服务器的运营人员向 CA 提出公开密钥的申请，CA 在判明提出申请者的身份后，会对已申请的公开密钥做数字签名，然后分配这个已签名的公开密钥，并将该公开密钥放入公开密钥证书后绑定在一起。</li>\n<li>进行 HTTPs 通信时，服务器会把证书发送给客户端，客户端取得其中的公开密钥之后，先进行验证，如果验证通过，就可以开始通信。</li>\n<li>使用 OpenSSL 这套开源程序，每个人都可以构建一套自己的认证机构，从而自己给自己颁发服务器证书。浏览器在访问该服务器时，会显示“无法确认连接安全性”或“该网站的安全证书存在问题”等警告信息。</li>\n</ul>\n<h3 id="完整性"><a href="#%E5%AE%8C%E6%95%B4%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>完整性</h3>\n<blockquote>\n<p>SSL 提供摘要功能来验证完整性。</p>\n</blockquote>\n<h2 id="web-攻击技术"><a href="#web-%E6%94%BB%E5%87%BB%E6%8A%80%E6%9C%AF" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Web 攻击技术</h2>\n<h3 id="攻击模式"><a href="#%E6%94%BB%E5%87%BB%E6%A8%A1%E5%BC%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>攻击模式</h3>\n<ol>\n<li>\n<p>主动攻击</p>\n<blockquote>\n<p>直接攻击服务器，具有代表性的有 SQL 注入和 OS 命令注入。</p>\n</blockquote>\n</li>\n<li>\n<p>被动攻击</p>\n<blockquote>\n<p>设下圈套，让用户发送有攻击代码的 HTTP 请求，那么用户发送了该 HTTP 请求之后就会泄露 Cookie 等个人信息，具有代表性的有跨站脚本攻击和跨站请求伪造。</p>\n</blockquote>\n</li>\n</ol>\n<h3 id="跨站脚本攻击"><a href="#%E8%B7%A8%E7%AB%99%E8%84%9A%E6%9C%AC%E6%94%BB%E5%87%BB" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>跨站脚本攻击</h3>\n<ol>\n<li>\n<p>概念 XSS 可以将代码注入到用户浏览的网页上，这种代码包括 HTML 和 JavaScript。利用网页开发时留下的漏洞，通过巧妙的方法注入恶意指令代码到网页，使用户加载并执行攻击者恶意制造的网页程序。攻击成功后，攻击者可能得到更高的权限（如执行一些操作）、私密网页内容、会话和 Cookie 等各种内容。</p>\n</li>\n<li>\n<p>危害</p>\n</li>\n<li>\n<p>伪造虚假的输入表单骗取个人信息</p>\n</li>\n<li>\n<p>窃取用户的 Cookie 值</p>\n</li>\n<li>\n<p>显示伪造的文章或者图片</p>\n</li>\n<li>\n<p>防范手段</p>\n</li>\n<li>\n<p>过滤特殊字符许多语言都提供了对 HTML 的过滤：</p>\n<ul>\n<li>PHP 的 htmlentities() 或是 htmlspecialchars()。</li>\n<li>Python 的 cgi.escape()。</li>\n<li>Java 的 xssprotect (Open Source Library)。</li>\n<li>Node.js 的 node-validator。</li>\n</ul>\n</li>\n<li>\n<p>指定 HTTP 的 Content-Type</p>\n<blockquote>\n<p>通过这种方式，可以避免内容被当成 HTML 解析，比如 PHP 语言可以使用如下代码：</p>\n</blockquote>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="87474888852739240000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<?php\n    header(\'Content-Type: text/javascript; charset=utf-8\');\n    ?>`, `87474888852739240000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="php"\n              >\n                <span class="gatsby-code-button-language">php</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="php"><pre style="counter-reset: linenumber NaN" class="language-php line-numbers"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>\n    <span class="token function">header</span><span class="token punctuation">(</span><span class="token single-quoted-string string">\'Content-Type: text/javascript; charset=utf-8\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token delimiter important">?></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n</li>\n</ol>\n<h3 id="sql-注入攻击"><a href="#sql-%E6%B3%A8%E5%85%A5%E6%94%BB%E5%87%BB" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>SQL 注入攻击</h3>\n<ol>\n<li>\n<p>概念</p>\n<blockquote>\n<p>服务器上的数据库运行非法的 SQL 语句。</p>\n</blockquote>\n</li>\n<li>\n<p>攻击原理</p>\n</li>\n<li>\n<p>例如一个网站登录验证的 SQL 查询代码为：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="40022712808621690000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`strSQL = &quot;SELECT * FROM users WHERE (name = \'&quot; + userName + &quot;\') and (pw = \'&quot;+ passWord +&quot;\');&quot;`, `40022712808621690000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="sql"\n              >\n                <span class="gatsby-code-button-language">sql</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="sql"><pre style="counter-reset: linenumber NaN" class="language-sql line-numbers"><code class="language-sql">strSQL <span class="token operator">=</span> <span class="token string">"SELECT * FROM users WHERE (name = \'"</span> <span class="token operator">+</span> userName <span class="token operator">+</span> <span class="token string">"\') and (pw = \'"</span><span class="token operator">+</span> passWord <span class="token operator">+</span><span class="token string">"\');"</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n</li>\n<li>\n<p>如果填入以下内容：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="4350819190989363000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`userName = &quot;1\' OR \'1\'=\'1&quot;;\npassWord = &quot;1\' OR \'1\'=\'1&quot;;`, `4350819190989363000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="sql"\n              >\n                <span class="gatsby-code-button-language">sql</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="sql"><pre style="counter-reset: linenumber NaN" class="language-sql line-numbers"><code class="language-sql">userName <span class="token operator">=</span> <span class="token string">"1\' OR \'1\'=\'1"</span><span class="token punctuation">;</span>\npassWord <span class="token operator">=</span> <span class="token string">"1\' OR \'1\'=\'1"</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>那么 SQL 查询字符串为：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="16308778270235736000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`strSQL = &quot;SELECT * FROM users WHERE (name = \'1\' OR \'1\'=\'1\') and (pw = \'1\' OR \'1\'=\'1\');&quot;`, `16308778270235736000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="sql"\n              >\n                <span class="gatsby-code-button-language">sql</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="sql"><pre style="counter-reset: linenumber NaN" class="language-sql line-numbers"><code class="language-sql">strSQL <span class="token operator">=</span> <span class="token string">"SELECT * FROM users WHERE (name = \'1\' OR \'1\'=\'1\') and (pw = \'1\' OR \'1\'=\'1\');"</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n</li>\n<li>\n<p>此时无需验证通过就能执行以下查询：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="42039115045650590000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`strSQL = &quot;SELECT * FROM users;&quot;`, `42039115045650590000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="sql"\n              >\n                <span class="gatsby-code-button-language">sql</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="sql"><pre style="counter-reset: linenumber NaN" class="language-sql line-numbers"><code class="language-sql">strSQL <span class="token operator">=</span> <span class="token string">"SELECT * FROM users;"</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n</li>\n<li>\n<p>危害</p>\n</li>\n<li>\n<p>数据表中的数据外泄，例如个人机密数据，账户数据、密码等。</p>\n</li>\n<li>\n<p>数据结构被黑客探知，得以做进一步攻击（例如 SELECT * FROM sys.table）。</p>\n</li>\n<li>\n<p>数据库服务器被攻击，系统管理员账户被篡改（例如 ALTER LOGIN sa WITH PASSWORD=‘xxxxx’）。</p>\n</li>\n<li>\n<p>获取系统较高权限后，有可能得以在网页加入恶意链接、恶意代码以及 XSS 等。</p>\n</li>\n<li>\n<p>经由数据库服务器提供的操作系统的支持，让黑客得以修改或控制操作系统（例如 xp_cmdshell ‘net stop iisadmin’可停止服务器的 IIS 服务）。</p>\n</li>\n<li>\n<p>破坏硬盘数据，瘫痪全系统（例如 xp_cmdshell ‘FORMAT C:’）。</p>\n</li>\n<li>\n<p>防范手段</p>\n</li>\n<li>\n<p>在设计应用程序时，完全使用参数化查询来设计数据访问功能。</p>\n</li>\n<li>\n<p>在组合 SQL 字符串时，先针对所传入的参数作为字符取代（将单引号字符取代为 2 个单引号字符）。</p>\n</li>\n<li>\n<p>如果使用 PHP 开发网页程序的话，亦可打开 PHP 的魔术引号功能（自动将所有的网页传入参数，将单引号字符取代为连续 2 个单引号字符）。</p>\n</li>\n<li>\n<p>使用其他更安全的方式连接 SQL 数据库。例如已修正过 SQL 注入问题的数据库连接组件，例如 ASP.NET 的 SqlDataSource 对象或是 LINQ to SQL。</p>\n</li>\n<li>\n<p>使用 SQL 防注入系统。</p>\n</li>\n</ol>\n<h3 id="跨站点请求伪造"><a href="#%E8%B7%A8%E7%AB%99%E7%82%B9%E8%AF%B7%E6%B1%82%E4%BC%AA%E9%80%A0" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>跨站点请求伪造</h3>\n<ol>\n<li>\n<p>概念</p>\n</li>\n<li>\n<p>XSRF 是攻击者通过一些技术手段欺骗用户的浏览器去访问一个自己曾经认证过的网站并执行一些操作（如发邮件，发消息，甚至财产操作如转账和购买商品）。由于浏览器曾经认证过，所以被访问的网站会认为是真正的用户操作而去执行。这利用了 Web 用户身份验证的一个漏洞：简单的身份验证只能保证请求发自某个用户的浏览器，却不能保证请求本身是用户资源发出的。</p>\n</li>\n<li>\n<p>XSS 利用的是用户对指定网站的信任，CSRF 利用的是网站对用户浏览器的信任。</p>\n</li>\n<li>\n<p>假如一家银行用以转账操作的 URL 地址如下：<code class="language-text">http://www.examplebank.com/withdraw?account=AccoutName&amp;amount=1000&amp;for=PayeeName。</code></p>\n</li>\n<li>\n<p>那么，一个恶意的攻击者可以在另一个网站上放置如下代码：<code class="language-text">&lt;img src=&quot;http://www.examplebank.com/withdraw?account=Alice&amp;amount=1000&amp;for=Badman&quot;&gt;</code>。</p>\n</li>\n<li>\n<p>如果有账户名为 Alice 的用户访问了恶意站点，而她之前刚访问过银行不久，登录信息尚未过期，那么她就会损失 1000 资金。</p>\n</li>\n<li>\n<p>这种恶意的网址可以有很多形式，藏身于网页中的许多地方。此外，攻击者也不需要控制放置恶意网址的网站。例如他可以将这种地址藏在论坛，博客等任何用户生成内容的网站中。这意味着如果服务器端没有合适的防御措施的话，用户即使访问熟悉的可信网站也有受攻击的危险。</p>\n</li>\n<li>\n<p>透过例子能够看出，攻击者并不能通过 CSRF 攻击来直接获取用户的账户控制权，也不能直接窃取用户的任何信息。他们能做到的，是欺骗用户浏览器，让其以用户的名义执行操作。</p>\n</li>\n<li>\n<p>防范手段</p>\n</li>\n<li>\n<p>检查 Referer 字段</p>\n<ul>\n<li>HTTP 头中有一个 Referer 字段，这个字段用以标明请求来源于哪个地址。在处理敏感数据请求时，通常来说，Referer 字段应和请求的地址位于同一域名下。</li>\n<li>这种办法简单易行，工作量低，仅需要在关键访问处增加一步校验。但这种办法也有其局限性，因其完全依赖浏览器发送正确的 Referer 字段。虽然 HTTP 协议对此字段的内容有明确的规定，但并无法保证来访的浏览器的具体实现，亦无法保证浏览器没有安全漏洞影响到此字段。并且也存在攻击者攻击某些浏览器，篡改其 Referer 字段的可能。</li>\n</ul>\n</li>\n<li>\n<p>添加校验 Token</p>\n<blockquote>\n<p>由于 CSRF 的本质在于攻击者欺骗用户去访问自己设置的地址，所以如果要求在访问敏感数据请求时，要求用户浏览器提供不保存在 cookie 中，并且攻击者无法伪造的数据作为校验，那么攻击者就无法再执行 CSRF 攻击。这种数据通常是表单中的一个数据项。服务器将其生成并附加在表单中，其内容是一个伪乱数。当客户端通过表单提交请求时，这个伪乱数也一并提交上去以供校验。正常的访问时，客户端浏览器能够正确得到并传回这个伪乱数，而通过 CSRF 传来的欺骗性攻击中，攻击者无从事先得知这个伪乱数的值，服务器端就会因为校验 token 的值为空或者错误，拒绝这个可疑请求。</p>\n</blockquote>\n</li>\n</ol>\n<h3 id="拒绝服务攻击"><a href="#%E6%8B%92%E7%BB%9D%E6%9C%8D%E5%8A%A1%E6%94%BB%E5%87%BB" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>拒绝服务攻击</h3>\n<ol>\n<li>\n<p>概念</p>\n</li>\n<li>\n<p>（denial-of-service attack，DoS），亦称洪水攻击，其目的在于使目标电脑的网络或系统资源耗尽，使服务暂时中断或停止，导致其正常用户无法访问。</p>\n</li>\n<li>\n<p>（distributed denial-of-service attack，DDoS），指攻击者使用网络上两个或以上被攻陷的电脑作为“僵尸”向特定的目标发动“拒绝服务”式攻击。</p>\n</li>\n</ol>\n<h2 id="各版本比较"><a href="#%E5%90%84%E7%89%88%E6%9C%AC%E6%AF%94%E8%BE%83" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>各版本比较</h2>\n<h3 id="http10-与-http11-的区别"><a href="#http10-%E4%B8%8E-http11-%E7%9A%84%E5%8C%BA%E5%88%AB" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>HTTP/1.0 与 HTTP/1.1 的区别</h3>\n<p>HTTP/1.1 新增了以下内容：</p>\n<ul>\n<li>默认为长连接；</li>\n<li>提供了范围请求功能；</li>\n<li>提供了虚拟主机的功能；</li>\n<li>多了一些缓存处理字段；</li>\n<li>多了一些状态码。</li>\n</ul>\n<h3 id="http11-与-http20-的区别"><a href="#http11-%E4%B8%8E-http20-%E7%9A%84%E5%8C%BA%E5%88%AB" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>HTTP/1.1 与 HTTP/2.0 的区别</h3>\n<ol>\n<li>多路复用 HTTP/2.0 使用多路复用技术，使用同一个 TCP 连接来处理多个请求。</li>\n<li>首部压缩 HTTP/1.1 的首部带有大量信息，而且每次都要重复发送。HTTP/2.0 要求通讯双方各自缓存一份首部字段表，从而避免了重复传输。</li>\n<li>服务端推送在客户端请求一个资源时，会把相关的资源一起发送给客户端，客户端就不需要再次发起请求了。例如客户端请求 index.html 页面，服务端就把 index.js 一起发给客户端。</li>\n<li>二进制格式 HTTP/1.1 的解析是基于文本的，而 HTTP/2.0 采用二进制格式。</li>\n</ol>',
id:"/home/runner/work/GatsbyBlog/GatsbyBlog/blog/图解HTTP读书笔记/index.md absPath of file >>> MarkdownRemark",timeToRead:15,frontmatter:{date:"2018-03-29 15:39:17",path:"/http-reading-notes/",tags:"面试, 计算机网络, 读书笔记",title:"图解HTTP读书笔记",draft:null}},{excerpt:"概述 网络的网络 网络把主机连接起来，而互联网是把多种不同的网络连接起来，因此互联网是网络的网络。 ISP 互联网服务提供商 ISP 可以从互联网管理机构获得许多 IP 地址，同时拥有通信线路以及路由器等连网设备，个人或机构向 ISP 缴纳一定的费用就可以接入互联网。 目前互联网是一种多层次结构，ISP 根据覆盖面的大小分为主干 ISP、地区 ISP、本地 ISP。 互联网交换点 IXP 允许两个 ISP 直接相连而不用经过第三个 ISP…",html:'<h2 id="概述"><a href="#%E6%A6%82%E8%BF%B0" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>概述</h2>\n<h3 id="网络的网络"><a href="#%E7%BD%91%E7%BB%9C%E7%9A%84%E7%BD%91%E7%BB%9C" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>网络的网络</h3>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/f1fb826b-ecf4-4ddb-91f0-2bafecf08869-a42e3551d268cc414cf72094337a2def-cea4c.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 626px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 39.45686900958466%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAIABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAMF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB2ZBYH//EABkQAAIDAQAAAAAAAAAAAAAAAAECAAMSIf/aAAgBAQABBQLsYWZr0F//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAYEAACAwAAAAAAAAAAAAAAAAAAASEiMf/aAAgBAQAGPwJkMvp//8QAGhABAQEAAwEAAAAAAAAAAAAAAREAITFBUf/aAAgBAQABPyFL8cveQA7fuMsOf//aAAwDAQACAAMAAAAQcA//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAaEAEAAgMBAAAAAAAAAAAAAAABESEAMWHw/9oACAEBAAE/EBoQqHSPTiHIS6LVXg1ALDMsd7n/2Q==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="f1fb826b ecf4 4ddb 91f0 2bafecf08869" title="" data-src="/static/f1fb826b-ecf4-4ddb-91f0-2bafecf08869-a42e3551d268cc414cf72094337a2def-cea4c.jpg" data-srcset="/static/f1fb826b-ecf4-4ddb-91f0-2bafecf08869-a42e3551d268cc414cf72094337a2def-2590f.jpg 200w,\n/static/f1fb826b-ecf4-4ddb-91f0-2bafecf08869-a42e3551d268cc414cf72094337a2def-6b161.jpg 400w,\n/static/f1fb826b-ecf4-4ddb-91f0-2bafecf08869-a42e3551d268cc414cf72094337a2def-cea4c.jpg 626w" data-sizes="(max-width: 626px) 100vw, 626px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<blockquote>\n<p>网络把主机连接起来，而互联网是把多种不同的网络连接起来，因此互联网是网络的网络。</p>\n</blockquote>\n<h3 id="isp"><a href="#isp" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ISP</h3>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/0f8c0a60-d4c6-47f4-978d-1a5c393fedac-8a56939b7f7aaa1eee674df8055e76f9-afa27.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 657px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 58.44748858447488%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAECAwX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHbTiWjD//EABcQAAMBAAAAAAAAAAAAAAAAAAABECH/2gAIAQEAAQUCi0Yp/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFxAAAwEAAAAAAAAAAAAAAAAAAAEgIf/aAAgBAQAGPwIxz//EABkQAQEBAQEBAAAAAAAAAAAAAAERAIEhUf/aAAgBAQABPyFX7zKnidyi4zVZXBN//9oADAMBAAIAAwAAABCjD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABwQAQACAwEBAQAAAAAAAAAAAAEAETFBUSFhgf/aAAgBAQABPxBVqwVKa/ZhQMqH3kpaV05DVinzkVIIXUDDfrP/2Q==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="0f8c0a60 d4c6 47f4 978d 1a5c393fedac" title="" data-src="/static/0f8c0a60-d4c6-47f4-978d-1a5c393fedac-8a56939b7f7aaa1eee674df8055e76f9-afa27.jpg" data-srcset="/static/0f8c0a60-d4c6-47f4-978d-1a5c393fedac-8a56939b7f7aaa1eee674df8055e76f9-33655.jpg 200w,\n/static/0f8c0a60-d4c6-47f4-978d-1a5c393fedac-8a56939b7f7aaa1eee674df8055e76f9-1cc07.jpg 400w,\n/static/0f8c0a60-d4c6-47f4-978d-1a5c393fedac-8a56939b7f7aaa1eee674df8055e76f9-afa27.jpg 657w" data-sizes="(max-width: 657px) 100vw, 657px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<ul>\n<li>互联网服务提供商 ISP 可以从互联网管理机构获得许多 IP 地址，同时拥有通信线路以及路由器等连网设备，个人或机构向 ISP 缴纳一定的费用就可以接入互联网。</li>\n<li>目前互联网是一种多层次结构，ISP 根据覆盖面的大小分为主干 ISP、地区 ISP、本地 ISP。</li>\n<li>互联网交换点 IXP 允许两个 ISP 直接相连而不用经过第三个 ISP。</li>\n</ul>\n<h3 id="互联网的组成"><a href="#%E4%BA%92%E8%81%94%E7%BD%91%E7%9A%84%E7%BB%84%E6%88%90" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>互联网的组成</h3>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/8ab40d6d-bd7c-47d3-afe8-6a8bc9f5d04c-36eeb499d07ae127bfbbf9f62398cd6c-75896.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 690px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 49.130434782608695%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAMBBAX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHYTcWMJD//xAAYEAADAQEAAAAAAAAAAAAAAAAAARExAv/aAAgBAQABBQLu2sWMWn//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAYEAACAwAAAAAAAAAAAAAAAAAAIREgYf/aAAgBAQAGPwLBSOn/xAAdEAABAgcAAAAAAAAAAAAAAAAAAREQITFBYZGx/9oACAEBAAE/IVpQ2hKvcH5CiJ//2gAMAwEAAgADAAAAEODP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAHhABAAICAQUAAAAAAAAAAAAAAQARITHwEEFRobH/2gAIAQEAAT8QvinDMyFXaw+G/fCJhAdwT6EbQt30/9k=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="8ab40d6d bd7c 47d3 afe8 6a8bc9f5d04c" title="" data-src="/static/8ab40d6d-bd7c-47d3-afe8-6a8bc9f5d04c-36eeb499d07ae127bfbbf9f62398cd6c-75896.jpg" data-srcset="/static/8ab40d6d-bd7c-47d3-afe8-6a8bc9f5d04c-36eeb499d07ae127bfbbf9f62398cd6c-f0091.jpg 200w,\n/static/8ab40d6d-bd7c-47d3-afe8-6a8bc9f5d04c-36eeb499d07ae127bfbbf9f62398cd6c-eb828.jpg 400w,\n/static/8ab40d6d-bd7c-47d3-afe8-6a8bc9f5d04c-36eeb499d07ae127bfbbf9f62398cd6c-75896.jpg 690w" data-sizes="(max-width: 690px) 100vw, 690px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<ul>\n<li>边缘部分：所有连接在互联网上的主机，用户可以直接使用。</li>\n<li>核心部分：由大量的网络和连接这些的路由器组成，为边缘部分的主机提供服务。</li>\n</ul>\n<h3 id="主机之间的通信方式"><a href="#%E4%B8%BB%E6%9C%BA%E4%B9%8B%E9%97%B4%E7%9A%84%E9%80%9A%E4%BF%A1%E6%96%B9%E5%BC%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>主机之间的通信方式</h3>\n<ul>\n<li>客户-服务器（C/S）：客户是服务的请求方，服务器是服务的提供方。</li>\n<li>对等（P2P）：不区分客户端和服务器。</li>\n</ul>\n<h3 id="电路交换与分组交换"><a href="#%E7%94%B5%E8%B7%AF%E4%BA%A4%E6%8D%A2%E4%B8%8E%E5%88%86%E7%BB%84%E4%BA%A4%E6%8D%A2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>电路交换与分组交换</h3>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/c50d230c-8b89-4644-8f62-8708d03aac5b-39c0cd7125f3167a7e3909299e0b31fa-7a227.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 652px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 68.71165644171779%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAEDBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAe3ENFH/xAAaEAACAgMAAAAAAAAAAAAAAAABEQAxAiFB/9oACAEBAAEFAnvmLRuCv//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABkQAAIDAQAAAAAAAAAAAAAAAAABEBEhMf/aAAgBAQAGPwIas07P/8QAGxAAAgIDAQAAAAAAAAAAAAAAAREAIRBBUWH/2gAIAQEAAT8hJaldiJAQ9lGj8jKXXFA7u9Yv/9oADAMBAAIAAwAAABBTD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EAB0QAQADAAEFAAAAAAAAAAAAAAEAETFRIUFxgcH/2gAIAQEAAT8QKQa3gRXzc07vycBd7IzQA9aG/cQLtWqJaltvM//Z\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="c50d230c 8b89 4644 8f62 8708d03aac5b" title="" data-src="/static/c50d230c-8b89-4644-8f62-8708d03aac5b-39c0cd7125f3167a7e3909299e0b31fa-7a227.jpg" data-srcset="/static/c50d230c-8b89-4644-8f62-8708d03aac5b-39c0cd7125f3167a7e3909299e0b31fa-224a2.jpg 200w,\n/static/c50d230c-8b89-4644-8f62-8708d03aac5b-39c0cd7125f3167a7e3909299e0b31fa-6e8e4.jpg 400w,\n/static/c50d230c-8b89-4644-8f62-8708d03aac5b-39c0cd7125f3167a7e3909299e0b31fa-7a227.jpg 652w" data-sizes="(max-width: 652px) 100vw, 652px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<ul>\n<li>电路交换电路交换用于电话通信系统，两个用户要通信之前需要建立一条专用的物理链路，并且在整个通信过程中始终占用该链路。由于通信的过程中不可能一直在使用传输线路，因此电路交换对线路的利用率很低，往往不到 10%。</li>\n<li>报文交换报文交换用于邮局通信系统，邮局接收到一份报文之后，先存储下来，然后把相同目的地的报文一起转发到下一个目的地，这个过程就是存储转发过程。</li>\n<li>分组交换分组交换也使用了存储转发，但是转发的是分组不是报文。把整块数据称为一个报文，由于一个报文可能很长，需要先进行切分，来满足分组能处理的大小。在每个切分的数据前面加上首部之后就成为了分组，首部包含目的地址和源地址等控制信息。 <html><head></head><body><a class="gatsby-resp-image-link" href="/static/2366c2ad-5859-4d4e-805f-7e2b88061cd8-b4c17c0f18bad634333f112d24266dce-e744a.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 559px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 35.77817531305904%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAHABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAMEBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAdmMLIP/xAAYEAADAQEAAAAAAAAAAAAAAAAAAQIRMf/aAAgBAQABBQK1TMoXP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABkQAAIDAQAAAAAAAAAAAAAAAAAhAQIRMv/aAAgBAQAGPwJWw7kZ/8QAGRAAAwADAAAAAAAAAAAAAAAAABFhAdHh/9oACAEBAAE/IUjMYO5aGof/2gAMAwEAAgADAAAAEPAP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGRABAAMBAQAAAAAAAAAAAAAAAQARITFR/9oACAEBAAE/EEaAegVzmkGIbuUQJArBr7P/2Q==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2366c2ad 5859 4d4e 805f 7e2b88061cd8" title="" data-src="/static/2366c2ad-5859-4d4e-805f-7e2b88061cd8-b4c17c0f18bad634333f112d24266dce-e744a.jpg" data-srcset="/static/2366c2ad-5859-4d4e-805f-7e2b88061cd8-b4c17c0f18bad634333f112d24266dce-38f9e.jpg 200w,\n/static/2366c2ad-5859-4d4e-805f-7e2b88061cd8-b4c17c0f18bad634333f112d24266dce-1a21b.jpg 400w,\n/static/2366c2ad-5859-4d4e-805f-7e2b88061cd8-b4c17c0f18bad634333f112d24266dce-e744a.jpg 559w" data-sizes="(max-width: 559px) 100vw, 559px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html> 存储转发允许在一条传输线路上传送多个主机的分组，因此两个用户之间的通信不需要占用端到端的线路资源。相比于报文交换，由于分组比报文更小，因此分组交换的存储转发速度更加快速。</li>\n</ul>\n<h3 id="时延"><a href="#%E6%97%B6%E5%BB%B6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>时延</h3>\n<blockquote>\n<p>总时延=发送时延+传播时延+处理时延+排队时延</p>\n</blockquote>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/ceee91c2-da26-4169-94c3-e4608b46b9ac-37f0ebac6a340c9614778d16279ffab3-160dc.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 737px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 31.478968792401623%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsSAAALEgHS3X78AAAA3klEQVQY03WQuQ6DMBiD8/7vAhuswMgAAyAEYgBEuW/EfYRatEVVpXqI/ij5bCfkOI593ymlGNZ1LYqiruskSdI0zfPcdd2mac6P6KV7JmCCINB13TCMKIqqqgJfliWMcNx1Xdu2uIMBGS9snudhGHCBYLNtG+wBIM1xHFVVRVGUZVmSJEEQOI5jWZZhGPESz/Oe54ECT76bICHLMk3TbNu2LOtxSVEU0zRRKgxDdPR9H0nIm6bpDd8Wfd/jqcuyoP/5R8Bg8a79I3wYXggXxMIojmPUgdc4jvefoSPWJ4bzT1xlIj3IAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="ceee91c2 da26 4169 94c3 e4608b46b9ac" title="" data-src="/static/ceee91c2-da26-4169-94c3-e4608b46b9ac-37f0ebac6a340c9614778d16279ffab3-160dc.png" data-srcset="/static/ceee91c2-da26-4169-94c3-e4608b46b9ac-37f0ebac6a340c9614778d16279ffab3-fc7b9.png 200w,\n/static/ceee91c2-da26-4169-94c3-e4608b46b9ac-37f0ebac6a340c9614778d16279ffab3-cea17.png 400w,\n/static/ceee91c2-da26-4169-94c3-e4608b46b9ac-37f0ebac6a340c9614778d16279ffab3-160dc.png 737w" data-sizes="(max-width: 737px) 100vw, 737px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<ul>\n<li>发送时延主机或路由器发送数据帧所需要的时间。 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><mi>e</mi><mi>l</mi><mi>a</mi><mi>y</mi><mo>=</mo><mi>l</mi><mo>(</mo><mi>b</mi><mi>i</mi><mi>t</mi><mo>)</mo><mi mathvariant="normal">/</mi><mi>v</mi><mo>(</mo><mi>b</mi><mi>i</mi><mi>t</mi><mi mathvariant="normal">/</mi><mi>s</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">delay=l(bit)/v(bit/s)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit">d</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mopen">(</span><span class="mord mathit">b</span><span class="mord mathit">i</span><span class="mord mathit">t</span><span class="mclose">)</span><span class="mord">/</span><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="mopen">(</span><span class="mord mathit">b</span><span class="mord mathit">i</span><span class="mord mathit">t</span><span class="mord">/</span><span class="mord mathit">s</span><span class="mclose">)</span></span></span></span> 其中 l 表示数据帧的长度，v 表示发送帧率。</li>\n<li>传播时延电磁波在信道中传播一定的距离需要花费的时间，电磁波传播速度接近光速。 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><mi>e</mi><mi>l</mi><mi>a</mi><mi>y</mi><mo>=</mo><mi>l</mi><mo>(</mo><mi>m</mi><mo>)</mo><mi mathvariant="normal">/</mi><mi>v</mi><mo>(</mo><mi>m</mi><mi mathvariant="normal">/</mi><mi>s</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">delay=l(m)/v(m/s)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit">d</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mopen">(</span><span class="mord mathit">m</span><span class="mclose">)</span><span class="mord">/</span><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="mopen">(</span><span class="mord mathit">m</span><span class="mord">/</span><span class="mord mathit">s</span><span class="mclose">)</span></span></span></span> 其中 l 表示信道长度，v 表示电磁波在信道上的传播速率。</li>\n<li>处理时延主机或路由器收到分组时进行处理所需要的时间。例如分析首部，从分组中提取数据部分等。</li>\n<li>排队时延分组在路由器的输入队列和输出队列中排队等待的时间，取决于网络当前的通信量。</li>\n</ul>\n<h3 id="计算机网络体系结构-"><a href="#%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84-" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>计算机网络体系结构 *</h3>\n<ol>\n<li>七层协议如图 a 所示，其中表示层和会话层用途如下：</li>\n<li>表示层：信息的语法、语义以及它们的关联，如加密解密、转换翻译、压缩解压缩。</li>\n<li>会话层：不同机器上的用户之间建立及管理会话。 <html><head></head><body><a class="gatsby-resp-image-link" href="/static/1005dc9d-9049-4b06-9524-6171e56ebd8c-d3d51cb03de5e1c86b5b65143fb09876-fb277.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 733px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 54.84311050477489%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABa0lEQVQoz1XS145iQQwEUP7/q0gPCCSiEDmDSEOOQ1j2zG1m0frBdPu6yuVqYn+iWC6X3W631+ttNpvX63U4HFqtVr1eL5fLDqfTSc9gMGi3266dTud+v6vEtEK6NxoN31Kp1G63WywW+/1+Mpk4z2azYrF4uVyA1bEXCoXpdAr4A16tVuv1Gl4pkUg4a8VYq9Xm87mD7tvtdj6fv6OgEe8b/BXFeDyW0+k0btOGw+FoNMLYbDaz2ez1eqWCfhRIqfhMBtNnTjKZlEmQSUCEJR6PH4/HUEFRKpX6/f4bTJhR7AmyZd/QVyqVdhSMYCGpvSjU5c9krIw1PIC32y0t1WoVL4xdAtgAxVwu9x/YZK54BrKBbaibC5akM5PJuKoHOfl8/iPbq5gT9kTPaqvChJ0VvRCTZTOmUbDgDUbPPR/wUaECgwWMW1ofj0eYoYdgulyfz2cs/Dx+I7wcFnO4WoyCHeT86/TfekXxF7PCV5UjhPOyAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="1005dc9d 9049 4b06 9524 6171e56ebd8c" title="" data-src="/static/1005dc9d-9049-4b06-9524-6171e56ebd8c-d3d51cb03de5e1c86b5b65143fb09876-fb277.png" data-srcset="/static/1005dc9d-9049-4b06-9524-6171e56ebd8c-d3d51cb03de5e1c86b5b65143fb09876-c9c1e.png 200w,\n/static/1005dc9d-9049-4b06-9524-6171e56ebd8c-d3d51cb03de5e1c86b5b65143fb09876-178e3.png 400w,\n/static/1005dc9d-9049-4b06-9524-6171e56ebd8c-d3d51cb03de5e1c86b5b65143fb09876-fb277.png 733w" data-sizes="(max-width: 733px) 100vw, 733px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></li>\n<li>五层协议</li>\n<li>应用层：为特定应用程序提供数据传输服务，例如 HTTP、DNS 等，数据单位为报文。</li>\n<li>运输层：提供的是进程间的通用数据传输服务。由于应用层协议很多，定义通用的运输层协议机就可以支持不断增多的应用层协议。运输层包括两种协议：传输控制协议 TCP，提供面向连接、可靠的数据传输服务，数据单位为报文段；用户数据包协议 UDP，提供无连接、尽最大努力的数据传输服务，数据单位为用户数据报。TCP 主要提供完整性服务，UDP 主要提供及时性服务。</li>\n<li>网络层：为主机之间提供数据传输服务，而像运输层协议那样是为主机中的进程提供服务。网络层把运输层传递下来的报文段或用户数据报封装成分组。</li>\n<li>数据链路层：网络层针对的还是主机之间的数据传输服务，而主机之间可以有很多链路，链路层协议就是为相邻结点间提供服务。数据链路层把网络层传来的分组封装成帧。</li>\n<li>物理层：考虑的是怎样在传输媒体上传输数据比特流，而不是指具体的传输媒体。物理层的作用是尽可能的屏蔽传输媒体和通信手段的差异，使数据链路层感觉不到这些差异。</li>\n<li>数据在各层之间的传递过程</li>\n<li>在向下的过程中，需要添加下层协议所需要的首部或者尾部，而在向上的过程中不断拆开首部和尾部。</li>\n<li>路由器只有下面三层协议，因为路由器位于网络核心中，不需要为进程或者应用程序提供服务，因此也就不需要运输层和应用层。 <html><head></head><body><a class="gatsby-resp-image-link" href="/static/ac106e7e-489a-4082-abd9-dabebe48394c-5e84057845ae46d92e6a013e7a96c48e-bf603.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 659px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 49.92412746585736%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAIBAwX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHXmxRxg//EABoQAAMAAwEAAAAAAAAAAAAAAAABAhAREjH/2gAIAQEAAQUCdaHZPnMilY//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAYEAACAwAAAAAAAAAAAAAAAAARMQABEP/aAAgBAQAGPwIGMYqirP/EABwQAQEBAAEFAAAAAAAAAAAAAAERACExUXGBkf/aAAgBAQABPyE0xG98c6PbO1bzluVnxkvPywAQJv/aAAwDAQACAAMAAAAQoA//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAaEAEAAwEBAQAAAAAAAAAAAAABABEhMUFR/9oACAEBAAE/EOwi6MJjWF6jkBhQqm4yrnVKwZaz0ylIfAqf/9k=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="ac106e7e 489a 4082 abd9 dabebe48394c" title="" data-src="/static/ac106e7e-489a-4082-abd9-dabebe48394c-5e84057845ae46d92e6a013e7a96c48e-bf603.jpg" data-srcset="/static/ac106e7e-489a-4082-abd9-dabebe48394c-5e84057845ae46d92e6a013e7a96c48e-9eb1c.jpg 200w,\n/static/ac106e7e-489a-4082-abd9-dabebe48394c-5e84057845ae46d92e6a013e7a96c48e-6b8c8.jpg 400w,\n/static/ac106e7e-489a-4082-abd9-dabebe48394c-5e84057845ae46d92e6a013e7a96c48e-bf603.jpg 659w" data-sizes="(max-width: 659px) 100vw, 659px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></li>\n<li>TCP/IP 体系结构</li>\n<li>它只有四层，相当于五层协议中数据链路层和物理层合并为网络接口层。</li>\n<li>现在的 TCP/IP 体系结构不严格遵循 OSI 分层概念，应用层可能会直接使用 IP 层或者网络接口层。 <html><head></head><body><a class="gatsby-resp-image-link" href="/static/37b74a34-251c-45f8-88a4-614ec953f7e9-effcdee30884dd5d93b4bcece90839fa-6db8f.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 383px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 49.347258485639685%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAABEklEQVQoz32R126DQBRE+f8vQ34ykgEh0wyI3hx6c3KUVQhCcfZhtWXOndm70udhDMNQlmXbth/fo6qqKIqyLHv+DE7yPN/10hEGg2exritzXdeKogRBsAter9fj8XgLx3GMVVEULJIk6fv+KAD2ff9vuOs6Ctu2TTbTNPHEfBxH4ogs/8FN08Avy4I6TVO2LIB5LaEQbNv2FkYBPE0TIszZYjjPs+A5F9HOMHmY6TDXzJfL5Xq9GobhOA5qWZbDMKQEtzxq10unrxJ9QnG/38EIyW9ZluV5HlnoJVXOMNm4E860GhEfzrMpJMpxziEtpBEo6csvjCdu+CBCqus6bpqm3W431qqqUtF1XbZEIJT4wi8F6zjSQXSESwAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="37b74a34 251c 45f8 88a4 614ec953f7e9" title="" data-src="/static/37b74a34-251c-45f8-88a4-614ec953f7e9-effcdee30884dd5d93b4bcece90839fa-6db8f.png" data-srcset="/static/37b74a34-251c-45f8-88a4-614ec953f7e9-effcdee30884dd5d93b4bcece90839fa-89fca.png 200w,\n/static/37b74a34-251c-45f8-88a4-614ec953f7e9-effcdee30884dd5d93b4bcece90839fa-6db8f.png 383w" data-sizes="(max-width: 383px) 100vw, 383px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></li>\n<li>TCP/IP 协议族是一种沙漏形状，中间小两边大，IP 协议在其中占用举足轻重的地位。 <html><head></head><body><a class="gatsby-resp-image-link" href="/static/93cbce0c-c37d-429c-815b-861976a46bd8-79996c3fcdb481e4a4fde70f6d24907d-e9bcc.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 466px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 51.716738197424895%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAABPUlEQVQoz1WSy66CYAyEff9X0oVIQmIChA0Lg5gIiCI3wQsgiOeDYsLphk7b6fQfXXzHuN1uaZp+fxHH8el0atuW5HK55HkeBAHwfr9Tfz6fzPR9v+BDlQmZfo9hWdZms6mqStM0wzD2+/16va7rerfbKYqCTD/GQKZ6Pp8p1WPA6bouyzLXdVnKLmBRFMAwDEWAMYgDGUAD5c/nI8pMvF4vNB3HERHEt9ttkiQskoGJjNT1ei3Lsmma+hfkog/B930GREZaxERG0PO8uWESiHMtLY6iiwYnzAcGMmuwEQ/ZSpv10Kg8Hg9aWM0JVIDkHPjvzWBsPB6PJFyhqupqtbJtG2ia5nK51HWd42lhPhAvcG4iz6P/BWoC4ZDLwZLLzzGRpRFFEW/j33I4HDAZ/zkHk3GLCi8HkoimUP4ABXczwu+DNGoAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="93cbce0c c37d 429c 815b 861976a46bd8" title="" data-src="/static/93cbce0c-c37d-429c-815b-861976a46bd8-79996c3fcdb481e4a4fde70f6d24907d-e9bcc.png" data-srcset="/static/93cbce0c-c37d-429c-815b-861976a46bd8-79996c3fcdb481e4a4fde70f6d24907d-6dacd.png 200w,\n/static/93cbce0c-c37d-429c-815b-861976a46bd8-79996c3fcdb481e4a4fde70f6d24907d-7f2bb.png 400w,\n/static/93cbce0c-c37d-429c-815b-861976a46bd8-79996c3fcdb481e4a4fde70f6d24907d-e9bcc.png 466w" data-sizes="(max-width: 466px) 100vw, 466px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></li>\n</ol>\n<h2 id="物理层"><a href="#%E7%89%A9%E7%90%86%E5%B1%82" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>物理层</h2>\n<h3 id="通信方式"><a href="#%E9%80%9A%E4%BF%A1%E6%96%B9%E5%BC%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>通信方式</h3>\n<ol>\n<li>单向通信，又称为单工通信。</li>\n<li>双向交替通信，又称为半双工通信。</li>\n<li>双向同时通信，又称为全双工通信。</li>\n</ol>\n<h3 id="带通调制"><a href="#%E5%B8%A6%E9%80%9A%E8%B0%83%E5%88%B6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>带通调制</h3>\n<blockquote>\n<p>模拟信号是连续的信号，数字信号是离散的信号。带通调制把数字信号转换为模拟信号。</p>\n</blockquote>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/d2c55c84-aa1f-43c1-bd97-457bcb7816b3-acc53a9dd78b46a505c9614b32865980-d86f6.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 573px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 45.37521815008726%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsSAAALEgHS3X78AAABNElEQVQoz1WRW2+CQBCF/f//SQkN8Q2I4aKA5SIKFKEVLxDUQj93mxDPw2b27JyZM7OzcRzP53OWZZfLhfh6vdZ1DfMr8C3wI0DQ973kR4GZFCNo25YgTdNhGMqy/BI4nU7P5/PxeEDyejgcjscjJCqYlxgZLMH9fqfKfD4vigLydruZpvkhoCiKYRhd1zVNw9PUGTNQUox5XdeZApLUOI7RrFYryPV6TTmUPA0CLzGU7IxPMhaLhWVZnwLL5VJVVdpiR9O0MAxJwNfUmYbMI4eniuu6SZKUAnR2HGez2di27XleIcBokxir+/2eAOV2u93tdmRHUURMFfSRQBAEvu/zxFDTwtin3AEWcM6XcKU8QZ7nVVURcJXbYtWcKP87S8g7P4FbslkSFohpSDfc8mHjO/4Ai8TyapnLEN8AAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="d2c55c84 aa1f 43c1 bd97 457bcb7816b3" title="" data-src="/static/d2c55c84-aa1f-43c1-bd97-457bcb7816b3-acc53a9dd78b46a505c9614b32865980-d86f6.png" data-srcset="/static/d2c55c84-aa1f-43c1-bd97-457bcb7816b3-acc53a9dd78b46a505c9614b32865980-4af32.png 200w,\n/static/d2c55c84-aa1f-43c1-bd97-457bcb7816b3-acc53a9dd78b46a505c9614b32865980-86238.png 400w,\n/static/d2c55c84-aa1f-43c1-bd97-457bcb7816b3-acc53a9dd78b46a505c9614b32865980-d86f6.png 573w" data-sizes="(max-width: 573px) 100vw, 573px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h3 id="信道复用技术"><a href="#%E4%BF%A1%E9%81%93%E5%A4%8D%E7%94%A8%E6%8A%80%E6%9C%AF" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>信道复用技术</h3>\n<ol>\n<li>\n<p>频分复用、时分复用</p>\n</li>\n<li>\n<p>频分复用的所有用户在相同的时间占用不同频率带宽资源；时分复用的所有用户在不同的时间占用相同的频率带宽资源。</p>\n</li>\n<li>\n<p>使用这两种方式进行通信，在通信的过程中用户会一直占用一部分信道资源。但是由于计算机数据的突发性质，没必要一直用信道资源而不让出给其他用户使用，因此这两种方式对信道的利用率都不高。 <html><head></head><body><a class="gatsby-resp-image-link" href="/static/543d47a1-f0dd-414f-b23c-0c142c814854-b1bc07320bc5b6224030cab069fd9532-b1c4a.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 562px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 78.64768683274022%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAAsSAAALEgHS3X78AAABiUlEQVQoz2WTCbKCMBBEuf9FPApXQEEscWH9IqIiqPCftIDRrjJOJrN0eoLVtm0cx1mWPR6PpmnuA263290EAa0Jq+u6oih2u93fgOPxmCSJbdubzSbPczysh8MBPwndByztFVH0OJ1OhJK83W6x5eQU+/l8Gp2VnKYp3bIeZEJkNpstFgtsPJQmgHwFK/PVWQQ4KMvyMoBWZLJyc3nO5/P1elWa+k/JnHElcQZsEY+e0MEuTUAEatOdP4Gqnuet1+sgCKqq6n5AZ8R/q00ZhBVbCjO51WpFeQQbudR1rVEZavOjDAz3+z1VwjAkGZ1Ii6Io7sERglGOSEMw/RFNc4LCAUSzxcm1yY966BbGI5HaCtK0NHbyxWJ8P6j4TVuPjKlwxs0ZCfSw0RknV8WjUSGVOuN8JWtPVbRFJ3hCz/d91MJgXS6X8Ecz6rKiKNRQZ6JNH+jBU0GwxSCZNOri+Z3oW7BRPc1wfIO6iJxNj++v6nNDNM8j7cHzdF2X7Xw+58E4joP99VX+Ax6xkX4rKIvGAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="543d47a1 f0dd 414f b23c 0c142c814854" title="" data-src="/static/543d47a1-f0dd-414f-b23c-0c142c814854-b1bc07320bc5b6224030cab069fd9532-b1c4a.png" data-srcset="/static/543d47a1-f0dd-414f-b23c-0c142c814854-b1bc07320bc5b6224030cab069fd9532-3ced9.png 200w,\n/static/543d47a1-f0dd-414f-b23c-0c142c814854-b1bc07320bc5b6224030cab069fd9532-4c4f5.png 400w,\n/static/543d47a1-f0dd-414f-b23c-0c142c814854-b1bc07320bc5b6224030cab069fd9532-b1c4a.png 562w" data-sizes="(max-width: 562px) 100vw, 562px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n<li>\n<p>统计时分复用是对时分复用的一种改进，不固定每个用户在时分复用帧中的位置，只要有数据就集中起来组成统计时分复用帧然后发送。 <html><head></head><body><a class="gatsby-resp-image-link" href="/static/29058e09-bb72-4040-a73d-4c497895e9ce-6a3ec855363ad7fb44c79a5688be179d-df6d7.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 736px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 32.33695652173913%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAGABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAd2AuD//xAAUEAEAAAAAAAAAAAAAAAAAAAAQ/9oACAEBAAEFAn//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAQ/9oACAEBAAY/An//xAAZEAEAAgMAAAAAAAAAAAAAAAABABEQITH/2gAIAQEAAT8hRu53Q1j/2gAMAwEAAgADAAAAEHPP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGhABAAMBAQEAAAAAAAAAAAAAAQARITFRYf/aAAgBAQABPxAW2eTi0u4ECgFv6z//2Q==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="29058e09 bb72 4040 a73d 4c497895e9ce" title="" data-src="/static/29058e09-bb72-4040-a73d-4c497895e9ce-6a3ec855363ad7fb44c79a5688be179d-df6d7.jpg" data-srcset="/static/29058e09-bb72-4040-a73d-4c497895e9ce-6a3ec855363ad7fb44c79a5688be179d-4e99b.jpg 200w,\n/static/29058e09-bb72-4040-a73d-4c497895e9ce-6a3ec855363ad7fb44c79a5688be179d-1dc89.jpg 400w,\n/static/29058e09-bb72-4040-a73d-4c497895e9ce-6a3ec855363ad7fb44c79a5688be179d-df6d7.jpg 736w" data-sizes="(max-width: 736px) 100vw, 736px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n<li>\n<p>波分复用光的频分复用。由于光的频率很高，因此习惯用波长而不是频率来表示所使用的光载波。 <html><head></head><body><a class="gatsby-resp-image-link" href="/static/78534153-88d1-4f83-a6e0-59064dbdc43a-ead4d9e7a0d8e3135030f0990c2786de-59b40.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 35.95092024539878%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsSAAALEgHS3X78AAAA6klEQVQY02WQyWqFQBRE/f+fcsIBRNyIuhHnCVEUNWrQmPOeYEhSiwavdW5Vt/D11nVd4ziGYThN077v128dx/Hxlu/72Jic58kpPI4sy2zbNk0zTdN1XQE+38IHZlmWYRiO47Rti/nOE+Z5LoqiaRq2SpKEyfM8PjHVdZ3nOWTf98x1XVcUhQyGdGT7C46iqCxLYFVVSSbfdV1MOPjLojiOZVnWNA1DkiSYOV/wUzsIAlEUgdnVdd0wDJS/Gy7LwkZqk1xV1U/tB+YlCIEB5qqPAwFT9W6xbduDCH8e9gbuZK7N41H+rvBf381jhB5jSTTeAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="78534153 88d1 4f83 a6e0 59064dbdc43a" title="" data-src="/static/78534153-88d1-4f83-a6e0-59064dbdc43a-ead4d9e7a0d8e3135030f0990c2786de-fee1c.png" data-srcset="/static/78534153-88d1-4f83-a6e0-59064dbdc43a-ead4d9e7a0d8e3135030f0990c2786de-a67b7.png 200w,\n/static/78534153-88d1-4f83-a6e0-59064dbdc43a-ead4d9e7a0d8e3135030f0990c2786de-0b187.png 400w,\n/static/78534153-88d1-4f83-a6e0-59064dbdc43a-ead4d9e7a0d8e3135030f0990c2786de-fee1c.png 800w,\n/static/78534153-88d1-4f83-a6e0-59064dbdc43a-ead4d9e7a0d8e3135030f0990c2786de-59b40.png 815w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n<li>\n<p>码分复用</p>\n</li>\n<li>\n<p>为每个用户分配 m bit 的码片，并且所有的码片正交，对于任意两个码片<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover accent="true"><mi>S</mi><mo>⃗</mo></mover></mrow><annotation encoding="application/x-tex">\\vec S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.9663299999999999em;"></span><span class="strut bottom" style="height:0.9663299999999999em;vertical-align:0em;"></span><span class="base"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9663299999999999em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathit" style="margin-right:0.05764em;">S</span></span><span style="top:-3.25233em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.15216em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg width=\'0.471em\' height=\'0.714em\' style=\'width:0.471em\' viewBox=\'0 0 471 714\' preserveAspectRatio=\'xMinYMin\'><path d=\'M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z\'/></svg></span></span></span></span></span></span></span></span></span></span>和<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover accent="true"><mi>T</mi><mo>⃗</mo></mover></mrow><annotation encoding="application/x-tex">\\vec T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.9663299999999999em;"></span><span class="strut bottom" style="height:0.9663299999999999em;vertical-align:0em;"></span><span class="base"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9663299999999999em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathit" style="margin-right:0.13889em;">T</span></span><span style="top:-3.25233em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.15216em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg width=\'0.471em\' height=\'0.714em\' style=\'width:0.471em\' viewBox=\'0 0 471 714\' preserveAspectRatio=\'xMinYMin\'><path d=\'M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z\'/></svg></span></span></span></span></span></span></span></span></span></span>有 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mfrac><mrow><mover accent="true"><mi>S</mi><mo>⃗</mo></mover><mo>∗</mo><mover accent="true"><mi>T</mi><mo>⃗</mo></mover></mrow><mrow><mi>m</mi></mrow></mfrac></mrow><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">{\\vec S\\ast \\vec T \\over m} = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.070431em;"></span><span class="strut bottom" style="height:1.4154309999999999em;vertical-align:-0.345em;"></span><span class="base"><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.070431em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">m</span></span></span></span><span style="top:-3.15em;"><span class="pstrut" style="height:3em;"></span><span class="stretchy" style="height:0.2em;"><svg width=\'400em\' height=\'0.2em\' viewBox=\'0 0 400000 200\' preserveAspectRatio=\'xMinYMin slice\'><path d=\'M0 80H400000 v40H0z M0 80H400000 v40H0z\'/></svg></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord accent mtight"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9663299999999999em;"><span style="top:-2.714em;"><span class="pstrut" style="height:2.714em;"></span><span class="mord mathit mtight" style="margin-right:0.05764em;">S</span></span><span style="top:-2.96633em;"><span class="pstrut" style="height:2.714em;"></span><span class="accent-body" style="left:-0.15216em;"><span class="overlay mtight" style="height:0.714em;width:0.471em;"><svg width=\'0.471em\' height=\'0.714em\' style=\'width:0.471em\' viewBox=\'0 0 471 714\' preserveAspectRatio=\'xMinYMin\'><path d=\'M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z\'/></svg></span></span></span></span></span></span></span><span class="mbin mtight">∗</span><span class="mord accent mtight"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9663299999999999em;"><span style="top:-2.714em;"><span class="pstrut" style="height:2.714em;"></span><span class="mord mathit mtight" style="margin-right:0.13889em;">T</span></span><span style="top:-2.96633em;"><span class="pstrut" style="height:2.714em;"></span><span class="accent-body" style="left:-0.15216em;"><span class="overlay mtight" style="height:0.714em;width:0.471em;"><svg width=\'0.471em\' height=\'0.714em\' style=\'width:0.471em\' viewBox=\'0 0 471 714\' preserveAspectRatio=\'xMinYMin\'><path d=\'M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z\'/></svg></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="mord">0</span></span></span></span></p>\n</li>\n<li>\n<p>为了方便，取 m=8，设码片 S 为 00011011。在拥有该码片的用户发送比特 1 时就发送该码片，发送比特 0 是就发送该码片的反码 11100100。</p>\n</li>\n<li>\n<p>在计算时将 00011011 记做(-1-1-1+1+1-1+1+1)，可以得到 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mfrac><mrow><mover accent="true"><mi>S</mi><mo>⃗</mo></mover><mo>∗</mo><mover accent="true"><mi>S</mi><mo>⃗</mo></mover></mrow><mrow><mi>m</mi></mrow></mfrac></mrow><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">{\\vec S\\ast \\vec S\\over m}=1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.070431em;"></span><span class="strut bottom" style="height:1.4154309999999999em;vertical-align:-0.345em;"></span><span class="base"><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.070431em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">m</span></span></span></span><span style="top:-3.15em;"><span class="pstrut" style="height:3em;"></span><span class="stretchy" style="height:0.2em;"><svg width=\'400em\' height=\'0.2em\' viewBox=\'0 0 400000 200\' preserveAspectRatio=\'xMinYMin slice\'><path d=\'M0 80H400000 v40H0z M0 80H400000 v40H0z\'/></svg></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord accent mtight"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9663299999999999em;"><span style="top:-2.714em;"><span class="pstrut" style="height:2.714em;"></span><span class="mord mathit mtight" style="margin-right:0.05764em;">S</span></span><span style="top:-2.96633em;"><span class="pstrut" style="height:2.714em;"></span><span class="accent-body" style="left:-0.15216em;"><span class="overlay mtight" style="height:0.714em;width:0.471em;"><svg width=\'0.471em\' height=\'0.714em\' style=\'width:0.471em\' viewBox=\'0 0 471 714\' preserveAspectRatio=\'xMinYMin\'><path d=\'M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z\'/></svg></span></span></span></span></span></span></span><span class="mbin mtight">∗</span><span class="mord accent mtight"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9663299999999999em;"><span style="top:-2.714em;"><span class="pstrut" style="height:2.714em;"></span><span class="mord mathit mtight" style="margin-right:0.05764em;">S</span></span><span style="top:-2.96633em;"><span class="pstrut" style="height:2.714em;"></span><span class="accent-body" style="left:-0.15216em;"><span class="overlay mtight" style="height:0.714em;width:0.471em;"><svg width=\'0.471em\' height=\'0.714em\' style=\'width:0.471em\' viewBox=\'0 0 471 714\' preserveAspectRatio=\'xMinYMin\'><path d=\'M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z\'/></svg></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="mord">1</span></span></span></span> <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mfrac><mrow><mover accent="true"><mi>S</mi><mo>⃗</mo></mover><mo>∗</mo><mover accent="true"><mrow><msup><mi>S</mi><mi>i</mi></msup></mrow><mo>⃗</mo></mover></mrow><mrow><mi>m</mi></mrow></mfrac></mrow><mo>=</mo><mo>−</mo><mn>1</mn><mo>∣</mo></mrow><annotation encoding="application/x-tex">{\\vec S\\ast \\vec {S^i}\\over m}=-1 \\mid</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.1220599999999998em;"></span><span class="strut bottom" style="height:1.4670599999999998em;vertical-align:-0.345em;"></span><span class="base"><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1220599999999998em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">m</span></span></span></span><span style="top:-3.15em;"><span class="pstrut" style="height:3em;"></span><span class="stretchy" style="height:0.2em;"><svg width=\'400em\' height=\'0.2em\' viewBox=\'0 0 400000 200\' preserveAspectRatio=\'xMinYMin slice\'><path d=\'M0 80H400000 v40H0z M0 80H400000 v40H0z\'/></svg></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord accent mtight"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9663299999999999em;"><span style="top:-2.714em;"><span class="pstrut" style="height:2.714em;"></span><span class="mord mathit mtight" style="margin-right:0.05764em;">S</span></span><span style="top:-2.96633em;"><span class="pstrut" style="height:2.714em;"></span><span class="accent-body" style="left:-0.15216em;"><span class="overlay mtight" style="height:0.714em;width:0.471em;"><svg width=\'0.471em\' height=\'0.714em\' style=\'width:0.471em\' viewBox=\'0 0 471 714\' preserveAspectRatio=\'xMinYMin\'><path d=\'M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z\'/></svg></span></span></span></span></span></span></span><span class="mbin mtight">∗</span><span class="mord accent mtight"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.0400857142857143em;"><span style="top:-2.757085714285714em;"><span class="pstrut" style="height:2.757085714285714em;"></span><span class="mord mtight"><span class="mord mtight"><span class="mord mathit mtight" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7570857142857143em;"><span style="top:-2.786em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathit mtight">i</span></span></span></span></span></span></span></span></span></span><span style="top:-3.0831714285714282em;"><span class="pstrut" style="height:2.757085714285714em;"></span><span class="accent-body" style="left:-0.2355em;"><span class="overlay mtight" style="height:0.714em;width:0.471em;"><svg width=\'0.471em\' height=\'0.714em\' style=\'width:0.471em\' viewBox=\'0 0 471 714\' preserveAspectRatio=\'xMinYMin\'><path d=\'M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z\'/></svg></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="mord">−</span><span class="mord">1</span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∣</span></span></span></span> { 其中<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover accent="true"><mrow><msup><mi>S</mi><mi>i</mi></msup></mrow><mo>⃗</mo></mover></mrow><annotation encoding="application/x-tex">\\vec {S^i}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.033664em;"></span><span class="strut bottom" style="height:1.033664em;vertical-align:0em;"></span><span class="base"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.033664em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.750664em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">i</span></span></span></span></span></span></span></span></span></span><span style="top:-3.319664em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2355em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg width=\'0.471em\' height=\'0.714em\' style=\'width:0.471em\' viewBox=\'0 0 471 714\' preserveAspectRatio=\'xMinYMin\'><path d=\'M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z\'/></svg></span></span></span></span></span></span></span></span></span></span> 为 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover accent="true"><mi>S</mi><mo>⃗</mo></mover></mrow><annotation encoding="application/x-tex">\\vec S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.9663299999999999em;"></span><span class="strut bottom" style="height:0.9663299999999999em;vertical-align:0em;"></span><span class="base"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9663299999999999em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathit" style="margin-right:0.05764em;">S</span></span><span style="top:-3.25233em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.15216em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg width=\'0.471em\' height=\'0.714em\' style=\'width:0.471em\' viewBox=\'0 0 471 714\' preserveAspectRatio=\'xMinYMin\'><path d=\'M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z\'/></svg></span></span></span></span></span></span></span></span></span></span> 的反码。}</p>\n</li>\n<li>\n<p>利用上面的式子我们知道，当接收端使用码片 S 对接收到的数据进行内积运算时，结果为 0 的是其他用户发送的数据，结果为 1 的是用户发送的比特 1，结果为-1 的是用户发送的比特 0。</p>\n</li>\n<li>\n<p>码分复用需要发送的数据量为原先的 m 倍。 <html><head></head><body><a class="gatsby-resp-image-link" href="/static/0042edad-8e3b-4279-bd93-6906fcd1b640-13ff91c7b0e8db821ee56571ca7216aa-a434a.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 671px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 36.95976154992549%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAHABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAIDBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAd2AWg//xAAXEAEAAwAAAAAAAAAAAAAAAAABABAR/9oACAEBAAEFAmY1/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFhAAAwAAAAAAAAAAAAAAAAAAABAx/9oACAEBAAY/Air/xAAXEAEBAQEAAAAAAAAAAAAAAAABADHw/9oACAEBAAE/IQ8xAy//2gAMAwEAAgADAAAAEHAP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGBABAQEBAQAAAAAAAAAAAAAAAREAceH/2gAIAQEAAT8QpthiGDXvmKAWu//Z\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="0042edad 8e3b 4279 bd93 6906fcd1b640" title="" data-src="/static/0042edad-8e3b-4279-bd93-6906fcd1b640-13ff91c7b0e8db821ee56571ca7216aa-a434a.jpg" data-srcset="/static/0042edad-8e3b-4279-bd93-6906fcd1b640-13ff91c7b0e8db821ee56571ca7216aa-0a465.jpg 200w,\n/static/0042edad-8e3b-4279-bd93-6906fcd1b640-13ff91c7b0e8db821ee56571ca7216aa-e7837.jpg 400w,\n/static/0042edad-8e3b-4279-bd93-6906fcd1b640-13ff91c7b0e8db821ee56571ca7216aa-a434a.jpg 671w" data-sizes="(max-width: 671px) 100vw, 671px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n</ol>\n<h2 id="数据链路层"><a href="#%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>数据链路层</h2>\n<h3 id="三个基本问题"><a href="#%E4%B8%89%E4%B8%AA%E5%9F%BA%E6%9C%AC%E9%97%AE%E9%A2%98" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>三个基本问题</h3>\n<ol>\n<li>封装成帧将网络层传下来的分组添加到首部和尾部，用于标记帧的开始和结束。 <html><head></head><body><a class="gatsby-resp-image-link" href="/static/3402d1c0-7020-4249-9a7f-12ea2ea6adf7-833c1539b4505b3132908b81e35ac2ea-e744a.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 559px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 42.39713774597496%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAIABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAMF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB3JBcH//EABcQAAMBAAAAAAAAAAAAAAAAAAABESH/2gAIAQEAAQUCZNR//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFxAAAwEAAAAAAAAAAAAAAAAAABAxMv/aAAgBAQAGPwKml//EABkQAAMAAwAAAAAAAAAAAAAAAAABEUFhwf/aAAgBAQABPyG7sJ66EeWf/9oADAMBAAIAAwAAABAAD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABkQAQADAQEAAAAAAAAAAAAAAAEAESFx8f/aAAgBAQABPxANAgxphLcikoPUENy3yf/Z\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="3402d1c0 7020 4249 9a7f 12ea2ea6adf7" title="" data-src="/static/3402d1c0-7020-4249-9a7f-12ea2ea6adf7-833c1539b4505b3132908b81e35ac2ea-e744a.jpg" data-srcset="/static/3402d1c0-7020-4249-9a7f-12ea2ea6adf7-833c1539b4505b3132908b81e35ac2ea-38f9e.jpg 200w,\n/static/3402d1c0-7020-4249-9a7f-12ea2ea6adf7-833c1539b4505b3132908b81e35ac2ea-1a21b.jpg 400w,\n/static/3402d1c0-7020-4249-9a7f-12ea2ea6adf7-833c1539b4505b3132908b81e35ac2ea-e744a.jpg 559w" data-sizes="(max-width: 559px) 100vw, 559px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></li>\n<li>透明传输透明表示实际存在的事物好像不存在一样。帧使用首部和尾部进行定界，如果帧的数据部分含有和首部尾部相同的内容，那么帧的开始和结束位置就会被错误的判定，需要在数据部分出现首部尾部相同的内容前面插入转义字符，如果出现转义字符，那么就在转义字符前面再加个转义字符，在接收端进行处理之后可以还原出原始数据。这个过程透明传输的内容是转义字符，用户察觉不到转义字符的存在。 <html><head></head><body><a class="gatsby-resp-image-link" href="/static/4146e14b-56b9-433c-8e3d-74b1b325399c-937ae2e8aa1cdec16d7f0a54aff8a966-cf44c.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 778px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 43.830334190231355%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAMBAgX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHbhihhcP/EABcQAQEBAQAAAAAAAAAAAAAAAAABITH/2gAIAQEAAQUC1qKnX//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABQQAQAAAAAAAAAAAAAAAAAAACD/2gAIAQEABj8CX//EABsQAAICAwEAAAAAAAAAAAAAAAARATEQIYGh/9oACAEBAAE/IZ2cM7r0ZVJQrx//2gAMAwEAAgADAAAAEBMP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAHRABAAICAgMAAAAAAAAAAAAAAQARITEQQXGRof/aAAgBAQABPxBNGBLprfUMaOhz7RAmoq1MzV5n0cf/2Q==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="4146e14b 56b9 433c 8e3d 74b1b325399c" title="" data-src="/static/4146e14b-56b9-433c-8e3d-74b1b325399c-937ae2e8aa1cdec16d7f0a54aff8a966-cf44c.jpg" data-srcset="/static/4146e14b-56b9-433c-8e3d-74b1b325399c-937ae2e8aa1cdec16d7f0a54aff8a966-db956.jpg 200w,\n/static/4146e14b-56b9-433c-8e3d-74b1b325399c-937ae2e8aa1cdec16d7f0a54aff8a966-0c2bd.jpg 400w,\n/static/4146e14b-56b9-433c-8e3d-74b1b325399c-937ae2e8aa1cdec16d7f0a54aff8a966-cf44c.jpg 778w" data-sizes="(max-width: 778px) 100vw, 778px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></li>\n<li>差错检测目前数据链路层广泛使用了循环冗余（CRC）来检查比特差错。</li>\n</ol>\n<h3 id="点对点信道-ppp-协议"><a href="#%E7%82%B9%E5%AF%B9%E7%82%B9%E4%BF%A1%E9%81%93-ppp-%E5%8D%8F%E8%AE%AE" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>点对点信道-PPP 协议</h3>\n<blockquote>\n<p>互联网用户通常需要连接到某个 ISP 之后才能接入到互联网，PPP 协议就是用户计算机和 ISP 进行通信时所使用的数据链路层协议。</p>\n</blockquote>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/8393f520-d824-44ea-a5f3-1c1a73d735fb-faea6fa52bc52ea88150903a4d6ed5a4-bae49.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 651px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 38.095238095238095%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAIABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAIDBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAdyIWg//xAAWEAEBAQAAAAAAAAAAAAAAAAAAASH/2gAIAQEAAQUCXa//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAQ/9oACAEBAAY/An//xAAbEAACAQUAAAAAAAAAAAAAAAAAASExQVFhkf/aAAgBAQABPyGb5EoN9Fs//9oADAMBAAIAAwAAABBwD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABsQAQADAAMBAAAAAAAAAAAAAAEAESExUXGR/9oACAEBAAE/EMjZN15EssHFZ+XAhoXsKn//2Q==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="8393f520 d824 44ea a5f3 1c1a73d735fb" title="" data-src="/static/8393f520-d824-44ea-a5f3-1c1a73d735fb-faea6fa52bc52ea88150903a4d6ed5a4-bae49.jpg" data-srcset="/static/8393f520-d824-44ea-a5f3-1c1a73d735fb-faea6fa52bc52ea88150903a4d6ed5a4-bb104.jpg 200w,\n/static/8393f520-d824-44ea-a5f3-1c1a73d735fb-faea6fa52bc52ea88150903a4d6ed5a4-110b2.jpg 400w,\n/static/8393f520-d824-44ea-a5f3-1c1a73d735fb-faea6fa52bc52ea88150903a4d6ed5a4-bae49.jpg 651w" data-sizes="(max-width: 651px) 100vw, 651px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>在 PPP 的帧中</p>\n<ul>\n<li>F 字段为帧的定界符</li>\n<li>A 和 C 的字段暂时没有意义</li>\n<li>FCS 字段是使用 CRC 的检验序列</li>\n<li>信息部分的长度不超过 1500 字节</li>\n</ul>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/0f39c274-b79c-4e83-8c7c-94fc2747832d-4370f325463fdff2ecc6f7168413396b-f887e.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 628px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 44.745222929936304%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAgADBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAe6NQKUf/8QAGRAAAgMBAAAAAAAAAAAAAAAAACEBEBEx/9oACAEBAAEFAmPajp//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAY/Al//xAAaEAEAAgMBAAAAAAAAAAAAAAABACEQETFh/9oACAEBAAE/IVDRUPWG9XHjO+P/2gAMAwEAAgADAAAAEMMP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGxABAAICAwAAAAAAAAAAAAAAAQAxEaEQIWH/2gAIAQEAAT8QuJ6aiaaBWTEa6MM1pqcf/9k=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="0f39c274 b79c 4e83 8c7c 94fc2747832d" title="" data-src="/static/0f39c274-b79c-4e83-8c7c-94fc2747832d-4370f325463fdff2ecc6f7168413396b-f887e.jpg" data-srcset="/static/0f39c274-b79c-4e83-8c7c-94fc2747832d-4370f325463fdff2ecc6f7168413396b-43f74.jpg 200w,\n/static/0f39c274-b79c-4e83-8c7c-94fc2747832d-4370f325463fdff2ecc6f7168413396b-fa8ff.jpg 400w,\n/static/0f39c274-b79c-4e83-8c7c-94fc2747832d-4370f325463fdff2ecc6f7168413396b-f887e.jpg 628w" data-sizes="(max-width: 628px) 100vw, 628px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h3 id="局域网的拓补"><a href="#%E5%B1%80%E5%9F%9F%E7%BD%91%E7%9A%84%E6%8B%93%E8%A1%A5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>局域网的拓补</h3>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/8b15e36f-69b4-46b6-a07c-7234ac7c7927-9c864198d4cc116bac18b3211d0523b1-9d075.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 34.78701825557809%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAHABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAIF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB2wWD/8QAFhABAQEAAAAAAAAAAAAAAAAAAAFB/9oACAEBAAEFAtR//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFRABAQAAAAAAAAAAAAAAAAAAARD/2gAIAQEABj8Cb//EABkQAAMAAwAAAAAAAAAAAAAAAAABETFBof/aAAgBAQABPyGPJ003YJEf/9oADAMBAAIAAwAAABADz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABoQAQEBAQADAAAAAAAAAAAAAAERIQAxQYH/2gAIAQEAAT8QuInHK+drbF8jfU5BsV1nf//Z\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="8b15e36f 69b4 46b6 a07c 7234ac7c7927" title="" data-src="/static/8b15e36f-69b4-46b6-a07c-7234ac7c7927-9c864198d4cc116bac18b3211d0523b1-dfbfc.jpg" data-srcset="/static/8b15e36f-69b4-46b6-a07c-7234ac7c7927-9c864198d4cc116bac18b3211d0523b1-75a98.jpg 200w,\n/static/8b15e36f-69b4-46b6-a07c-7234ac7c7927-9c864198d4cc116bac18b3211d0523b1-1f451.jpg 400w,\n/static/8b15e36f-69b4-46b6-a07c-7234ac7c7927-9c864198d4cc116bac18b3211d0523b1-dfbfc.jpg 800w,\n/static/8b15e36f-69b4-46b6-a07c-7234ac7c7927-9c864198d4cc116bac18b3211d0523b1-9d075.jpg 986w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h3 id="广播信道-csmacd-协议-"><a href="#%E5%B9%BF%E6%92%AD%E4%BF%A1%E9%81%93-csmacd-%E5%8D%8F%E8%AE%AE-" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>广播信道-CSMA/CD 协议 *</h3>\n<blockquote>\n<p>在广播信道上，同一时间只能允许一台计算机发送数据。 CSMA/CD 表示载波监听多点接入/碰撞检测。</p>\n</blockquote>\n<ul>\n<li>多点接入：说明这是总线型网络，许多计算机以多点的方式连接到总线上。</li>\n<li>载波监听：每个站都必须不停的监听信道。在发送前，如果监听信道正在使用，就必须等待。</li>\n<li>碰撞检测：在发送中，如果监听到信道已有其他站正在发送数据，就表示发生了碰撞。虽然每一个站在发送数据之前都已经监听到信道为空闲，但是由于电磁波的传播时延的存在，还是可能发送碰撞。</li>\n</ul>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/f9ed4da5-0032-41e6-991a-36d995ec28fd-409d707c39ad0bbf16ab2a717598a8a7-3be6a.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 726px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 23.96694214876033%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsSAAALEgHS3X78AAAA0UlEQVQY022QSYqEUBBEvf8xPICu3IuIOIAgiONKUSlFwREVh6rXJd2rjsUnp4iM/MJ5ntd1jeNYVVXbtn3fT9NU1zUxRdJ5nodhaJpm33cCuvd9v78Qtm1b17XrOt/34zgOgsD/Issy5KIoEkVRkiTIYRgahqFpGhSYSAiPzLIsZVl6nmdZlqqqaZo++4uikGUZvqIokLFD/f0L4TgO+MzZts1mJPI8533WJknyer0cx0GOaZz/ef4hcxW2cYVhTqLNLzBBjAvTNHVdd133/R8+ieUP3nQV5k4AAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="f9ed4da5 0032 41e6 991a 36d995ec28fd" title="" data-src="/static/f9ed4da5-0032-41e6-991a-36d995ec28fd-409d707c39ad0bbf16ab2a717598a8a7-3be6a.png" data-srcset="/static/f9ed4da5-0032-41e6-991a-36d995ec28fd-409d707c39ad0bbf16ab2a717598a8a7-0aa07.png 200w,\n/static/f9ed4da5-0032-41e6-991a-36d995ec28fd-409d707c39ad0bbf16ab2a717598a8a7-92365.png 400w,\n/static/f9ed4da5-0032-41e6-991a-36d995ec28fd-409d707c39ad0bbf16ab2a717598a8a7-3be6a.png 726w" data-sizes="(max-width: 726px) 100vw, 726px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html> 记端到端的传播时延为 τ，最先发送的站点最多经过 2τ 就可以知道是否发生了碰撞，称 2τ 为<code class="language-text">争用期</code>。只有经过争用期之后还没有检测到碰撞，才能肯定这次发送不会发送碰撞。当发生碰撞时，站点要停止发送，等待一段时间再发送。这个时间采用<code class="language-text">截断二进制指数退避算法</code>来确定，从离散的整数集合{0,1,…,(2^k-1)}中随机去除一个数，记做 r，然后取 r 倍的争用期作为重传等待时间。</p>\n<h3 id="扩展局域网-"><a href="#%E6%89%A9%E5%B1%95%E5%B1%80%E5%9F%9F%E7%BD%91-" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>扩展局域网 *</h3>\n<ol>\n<li>\n<p>在物理层进行扩展</p>\n</li>\n<li>\n<p>使用集线器进行扩展。</p>\n</li>\n<li>\n<p>集线器的主要功能是对接收到的信号进行放大，以扩大网络的传输距离。</p>\n</li>\n<li>\n<p>集线器不能根据 MAC 地址进行转发，而是以广播的方式发送数据帧。</p>\n</li>\n<li>\n<p>集线器是一种共享式的传输设备，意味着同一时刻只能传输一组数据帧。 <html><head></head><body><a class="gatsby-resp-image-link" href="/static/823cdab7-3779-4e3a-a951-dc2d154e0ee6-16b7ec2375227b72810ef958a3cfc8b6-0b193.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 765px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 35.29411764705882%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAHABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAIDBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAdmIXg//xAAXEAEBAQEAAAAAAAAAAAAAAAABABEC/9oACAEBAAEFAk6kWNz/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAWEAEBAQAAAAAAAAAAAAAAAAAAMSH/2gAIAQEABj8Cqtf/xAAZEAADAAMAAAAAAAAAAAAAAAAAAREhYXH/2gAIAQEAAT8hss6GK5FTJWf/2gAMAwEAAgADAAAAEHAP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGRABAAMBAQAAAAAAAAAAAAAAAQARMSGR/9oACAEBAAE/EFsAW4znPIEFwwWWm+ygFZoT/9k=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="823cdab7 3779 4e3a a951 dc2d154e0ee6" title="" data-src="/static/823cdab7-3779-4e3a-a951-dc2d154e0ee6-16b7ec2375227b72810ef958a3cfc8b6-0b193.jpg" data-srcset="/static/823cdab7-3779-4e3a-a951-dc2d154e0ee6-16b7ec2375227b72810ef958a3cfc8b6-04271.jpg 200w,\n/static/823cdab7-3779-4e3a-a951-dc2d154e0ee6-16b7ec2375227b72810ef958a3cfc8b6-e88ab.jpg 400w,\n/static/823cdab7-3779-4e3a-a951-dc2d154e0ee6-16b7ec2375227b72810ef958a3cfc8b6-0b193.jpg 765w" data-sizes="(max-width: 765px) 100vw, 765px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n<li>\n<p>在链路层进行扩展</p>\n</li>\n<li>\n<p>最开始使用的是网桥，它接收到一个帧时，根据帧的 MAC 地址，查找网桥中的地址表，确定将帧转发的接口。</p>\n</li>\n<li>\n<p>网桥不是共享式设备，因此性能比集线器这种共享设备更高。</p>\n</li>\n<li>\n<p>交换机的问世很快就淘汰了网桥，它实质上是一个多接口网桥，而网桥是两接口。交换机的每个接口都能直接与一个主机或者另一个交换机相连，并且一般都工作在全双工方式。</p>\n</li>\n<li>\n<p>交换机具有学习能力，学习的是交换表的内容，交换表中存储着 MAC 地址到接口的映射。下图中，交换机有 4 个接口，主机 A 向主机 B 发送数据帧时，交换机把主机 A 到接口 1 的映射写入交换表中。为了发送数据帧到 B，先查交换表，此时没有主机 B 的表项，那么主机 A 就发送广播帧，主机 C 和主机 D 会丢弃该项，主机 B 收下之后，查找交换表得到主机 A 映射的接口为 1，因此就把帧发送主机 A，同时交换机添加主机 B 到接口 3 的映射。 <html><head></head><body><a class="gatsby-resp-image-link" href="/static/c9cfcd20-c901-435f-9a07-3e46830c359f-a190f1412cca2f4cec6817f8deded0e6-6cd35.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 39.26829268292683%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAIABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAIF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB2wWD/8QAFhABAQEAAAAAAAAAAAAAAAAAAQAh/9oACAEBAAEFAk1i/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFBABAAAAAAAAAAAAAAAAAAAAEP/aAAgBAQAGPwJ//8QAGBAAAwEBAAAAAAAAAAAAAAAAAAEhEWH/2gAIAQEAAT8h6KW4JiP/2gAMAwEAAgADAAAAEPPP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAHBAAAgICAwAAAAAAAAAAAAAAAREAITFxQVGh/9oACAEBAAE/ECUaZHrR4jMIGkhfkQhk7n//2Q==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="c9cfcd20 c901 435f 9a07 3e46830c359f" title="" data-src="/static/c9cfcd20-c901-435f-9a07-3e46830c359f-a190f1412cca2f4cec6817f8deded0e6-dfbfc.jpg" data-srcset="/static/c9cfcd20-c901-435f-9a07-3e46830c359f-a190f1412cca2f4cec6817f8deded0e6-75a98.jpg 200w,\n/static/c9cfcd20-c901-435f-9a07-3e46830c359f-a190f1412cca2f4cec6817f8deded0e6-1f451.jpg 400w,\n/static/c9cfcd20-c901-435f-9a07-3e46830c359f-a190f1412cca2f4cec6817f8deded0e6-dfbfc.jpg 800w,\n/static/c9cfcd20-c901-435f-9a07-3e46830c359f-a190f1412cca2f4cec6817f8deded0e6-6cd35.jpg 820w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n<li>\n<p>虚拟局域网虚拟局域网可以建立与物理位置无关的逻辑组，只有在同一个虚拟局域网中的成员才会收到链路层广播信息，例如下图中（A1,A2,A3,A4）属于一个虚拟局域网，A1 发送的广播会被 A2,A3,A4 收到，而其他站点收不到。 <html><head></head><body><a class="gatsby-resp-image-link" href="/static/a74b70ac-323a-4b31-b4d5-90569b8a944b-32096129e323c811536384843ea2f66b-7bebf.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 695px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 59.71223021582735%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAABgklEQVQoz12RyY6CYBCEef8Tj+DdxIsxcjMuCSbuGnBDBXFfMgIu4Dpf+MkM0odOw1/dVV0tfWJxPp8Ph8NyuVwsFuv12nXd/X6/3W4dxzmdTmSeVqvV/X4XeOnzHTxnMplKpdJsNsvlMpn+Wq2mKApzq9XqcDi8Xq+v1+ur+f1+ky+XS6fTsSwLQkY0Gg2g/X5f0zQ4N5sNI4Qc8FK8E9k8TKdTFAJCqmmaDDLDmM1mk8lkMBgI5qhZVATLGIaRTqchbLVaSBiNRhCOx+NisajrOlpQ4fu+IJPoxJ7dbsfs+XzO4Gw2a4RBQ7vdRo5t291uF8DxePwJg+L5fEbMghxcr9eDlp9o4/PxeHiexy78gYDaDQNyWqSEW9ibSqXQRgEbssm4raoqzGSebrdb8lSin1PJslyv19kwn8/ncrlSqYRPhUKB0dwJw4MggPzf7fidQWM1CO4BMxm1sHECsQsFa0c7xwOF0LI2y+MWDEKU0CXyXySb0Ya3zAaHWwl0In4BQ1iUTE9sbU8AAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="a74b70ac 323a 4b31 b4d5 90569b8a944b" title="" data-src="/static/a74b70ac-323a-4b31-b4d5-90569b8a944b-32096129e323c811536384843ea2f66b-7bebf.png" data-srcset="/static/a74b70ac-323a-4b31-b4d5-90569b8a944b-32096129e323c811536384843ea2f66b-8e255.png 200w,\n/static/a74b70ac-323a-4b31-b4d5-90569b8a944b-32096129e323c811536384843ea2f66b-f1fd8.png 400w,\n/static/a74b70ac-323a-4b31-b4d5-90569b8a944b-32096129e323c811536384843ea2f66b-7bebf.png 695w" data-sizes="(max-width: 695px) 100vw, 695px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n</ol>\n<h3 id="mac-层-"><a href="#mac-%E5%B1%82-" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>MAC 层 *</h3>\n<blockquote>\n<p>MAC 地址是 6 字节（48 位）的地址，用于唯一标识网络适配器（网卡），一台主机拥有多少个适配器就有多少个 MAC 地址，例如笔记本电脑普遍存在无线网络适配器和有线网络适配器。</p>\n</blockquote>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/50d38e84-238f-4081-8876-14ef6d7938b5-669c2bb79937f7c0e230140738a8f8f8-c60ac.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 42.93103448275862%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAgAF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB2ZoM4//EABkQAAEFAAAAAAAAAAAAAAAAABAAAREhQf/aAAgBAQABBQKVbjB//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFhAAAwAAAAAAAAAAAAAAAAAAACAx/9oACAEBAAY/AiL/AP/EABwQAQABBAMAAAAAAAAAAAAAAAEAEBEhsTFBUf/aAAgBAQABPyFfpO7aA2zDSHBT/9oADAMBAAIAAwAAABCzz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABoQAAIDAQEAAAAAAAAAAAAAAAERABAhgaH/2gAIAQEAAT8QfYQtRgBByIHYiTeVfJX/2Q==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="50d38e84 238f 4081 8876 14ef6d7938b5" title="" data-src="/static/50d38e84-238f-4081-8876-14ef6d7938b5-669c2bb79937f7c0e230140738a8f8f8-dfbfc.jpg" data-srcset="/static/50d38e84-238f-4081-8876-14ef6d7938b5-669c2bb79937f7c0e230140738a8f8f8-75a98.jpg 200w,\n/static/50d38e84-238f-4081-8876-14ef6d7938b5-669c2bb79937f7c0e230140738a8f8f8-1f451.jpg 400w,\n/static/50d38e84-238f-4081-8876-14ef6d7938b5-669c2bb79937f7c0e230140738a8f8f8-dfbfc.jpg 800w,\n/static/50d38e84-238f-4081-8876-14ef6d7938b5-669c2bb79937f7c0e230140738a8f8f8-c60ac.jpg 1160w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<ul>\n<li>类型：标记上层使用的协议。</li>\n<li>数据：长度在 46~1500 之间，如果太小则需要填充。</li>\n<li>FCS：帧检验序列，使用的是 CRC 检验方法。</li>\n<li>前同步码：只是为了计算 FCS 临时加入的，计算之后会丢弃。</li>\n</ul>\n<h2 id="网络层-"><a href="#%E7%BD%91%E7%BB%9C%E5%B1%82-" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>网络层 *</h2>\n<h3 id="网际协议-ip-概述"><a href="#%E7%BD%91%E9%99%85%E5%8D%8F%E8%AE%AE-ip-%E6%A6%82%E8%BF%B0" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>网际协议 IP 概述</h3>\n<ul>\n<li>\n<p>因为网络层是整个互联网的核心，因此应当让网络层尽可能的简单。网络层向上只提供简单灵活、无连接、尽最大努力交互的数据报服务。</p>\n</li>\n<li>\n<p>使用 IP 协议，可以把异构的物理网络连接起来，使得网络层看起来好像是一个统一的网络。 <html><head></head><body><a class="gatsby-resp-image-link" href="/static/fe3d224c-8ffd-40f9-85b1-86ffe1393f6c-7d9afcee0d0974490e3b6ea7e1408cdd-6e6e8.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 704px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 42.47159090909091%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAIABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAIF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB2LCwf//EABgQAAIDAAAAAAAAAAAAAAAAAAERAAIx/9oACAEBAAEFArNnBP/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABQQAQAAAAAAAAAAAAAAAAAAABD/2gAIAQEABj8Cf//EABkQAAIDAQAAAAAAAAAAAAAAAAARATFBcf/aAAgBAQABPyHDI6cKn//aAAwDAQACAAMAAAAQgA//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAYEAEBAQEBAAAAAAAAAAAAAAABESEAQf/aAAgBAQABPxA3Z7lsuchC+FR5Lbdfe//Z\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="fe3d224c 8ffd 40f9 85b1 86ffe1393f6c" title="" data-src="/static/fe3d224c-8ffd-40f9-85b1-86ffe1393f6c-7d9afcee0d0974490e3b6ea7e1408cdd-6e6e8.jpg" data-srcset="/static/fe3d224c-8ffd-40f9-85b1-86ffe1393f6c-7d9afcee0d0974490e3b6ea7e1408cdd-6b746.jpg 200w,\n/static/fe3d224c-8ffd-40f9-85b1-86ffe1393f6c-7d9afcee0d0974490e3b6ea7e1408cdd-006bd.jpg 400w,\n/static/fe3d224c-8ffd-40f9-85b1-86ffe1393f6c-7d9afcee0d0974490e3b6ea7e1408cdd-6e6e8.jpg 704w" data-sizes="(max-width: 704px) 100vw, 704px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n<li>\n<p>与 IP 协议配套使用的还有三个协议：</p>\n<ol>\n<li>地址解析协议 ARP</li>\n<li>网际控制报文协议 ICMP</li>\n<li>网际组管理协议 IGMP <html><head></head><body><a class="gatsby-resp-image-link" href="/static/163cf8b4-5f30-46c9-af00-316a71b3c890-95a5672d3a192646bbfae01fb692a842-668bc.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 346px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 83.52601156069365%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAARABQDASIAAhEBAxEB/8QAGAABAQEBAQAAAAAAAAAAAAAAAAECAwX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAH2sdIaBuBQf//EABoQAAICAwAAAAAAAAAAAAAAAAARASAhMUH/2gAIAQEAAQUCZuRZ6qf/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAWEAADAAAAAAAAAAAAAAAAAAAAMDH/2gAIAQEABj8CKj//xAAcEAACAgIDAAAAAAAAAAAAAAABEQAhEEExUZH/2gAIAQEAAT8hKEviM0FhmKF9QuqECb9hmsf/2gAMAwEAAgADAAAAEMMHAP/EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8QH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8QH//EAB4QAQACAgIDAQAAAAAAAAAAAAEAESExYXFBgZGh/9oACAEBAAE/EGeGic/m4dhFpK9XL5+QNpKyrLFVYfCjdd6jBFOdxpCCf//Z\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="163cf8b4 5f30 46c9 af00 316a71b3c890" title="" data-src="/static/163cf8b4-5f30-46c9-af00-316a71b3c890-95a5672d3a192646bbfae01fb692a842-668bc.jpg" data-srcset="/static/163cf8b4-5f30-46c9-af00-316a71b3c890-95a5672d3a192646bbfae01fb692a842-8289d.jpg 200w,\n/static/163cf8b4-5f30-46c9-af00-316a71b3c890-95a5672d3a192646bbfae01fb692a842-668bc.jpg 346w" data-sizes="(max-width: 346px) 100vw, 346px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></li>\n</ol>\n</li>\n</ul>\n<h3 id="ip-数据报格式"><a href="#ip-%E6%95%B0%E6%8D%AE%E6%8A%A5%E6%A0%BC%E5%BC%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>IP 数据报格式</h3>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/8681db55-0873-434b-aa98-83d07e8392ae-a2f14d44c5750354cae8dc176174024f-0b193.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 765px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 51.37254901960784%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAEDBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAdydmIYf/8QAFxABAQEBAAAAAAAAAAAAAAAAAAEQEv/aAAgBAQABBQKukXf/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAY/Al//xAAcEAACAgIDAAAAAAAAAAAAAAABEQAxEFEhkcH/2gAIAQEAAT8hcbMRkc9ylKeohoY//9oADAMBAAIAAwAAABADz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EAB8QAQACAgAHAAAAAAAAAAAAAAEAESExEFFhcYGhsf/aAAgBAQABPxDYQOlYliAeF/Y1upcnczDsme/Rw//Z\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="8681db55 0873 434b aa98 83d07e8392ae" title="" data-src="/static/8681db55-0873-434b-aa98-83d07e8392ae-a2f14d44c5750354cae8dc176174024f-0b193.jpg" data-srcset="/static/8681db55-0873-434b-aa98-83d07e8392ae-a2f14d44c5750354cae8dc176174024f-04271.jpg 200w,\n/static/8681db55-0873-434b-aa98-83d07e8392ae-a2f14d44c5750354cae8dc176174024f-e88ab.jpg 400w,\n/static/8681db55-0873-434b-aa98-83d07e8392ae-a2f14d44c5750354cae8dc176174024f-0b193.jpg 765w" data-sizes="(max-width: 765px) 100vw, 765px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<ul>\n<li>版本：有 4（IPV4）和 6（IPV6）两个值。</li>\n<li>首部长度：占 4 位，因此最大值为 15，值为 1 表示的是 1 个 32 位字的长度，也就是 4 字节。因为首部固定长度为 20 字节，因此该值最小为 5，如果可选部分的长度不是 4 字节的整数倍，就用尾部的填充部分来填充。</li>\n<li>区分服务：用来获得更好的服务，一般情况下不使用。</li>\n<li>总长度：包括首部长度和数据部分长度。</li>\n<li>标识：在数据报长度过长从而发生分片的情况下，相同数据报的不同分片具有相同的标识符。</li>\n<li>片偏移：和标识符一起，用于发生分片的情况下。片偏移的单位为 8 字节。</li>\n<li>生存时间：TTL，它的存在是为了防止无法交付的数据报在互联网中不断的兜圈子。以路由器跳数为单位，当 TTL 为 0 时就丢弃数据报。</li>\n<li>协议：指出携带的数据应该上交给哪个协议进行处理，例如 ICMP、TCP、UDP 等。</li>\n<li>首部校验和：因为数据报每经过一个路由器，都要重新计算检验和，因此检验和不包含数据部分可以减少计算的工作量。</li>\n</ul>\n<h3 id="ip-地址编址"><a href="#ip-%E5%9C%B0%E5%9D%80%E7%BC%96%E5%9D%80" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>IP 地址编址</h3>\n<p>IP 地址编制方式经历了三个历史阶段：</p>\n<ul>\n<li>\n<p>分类；</p>\n</li>\n<li>\n<p>子网划分；</p>\n</li>\n<li>\n<p>无分类；</p>\n</li>\n<li>\n<p>分类</p>\n</li>\n<li>\n<p>由两部分组成，网络号和主机号，其中不同类别具有不同的网络号长度，并且是固定的。</p>\n</li>\n<li>\n<p>IP 地址::={&#x3C;网络号>,&#x3C;主机号>} <html><head></head><body><a class="gatsby-resp-image-link" href="/static/2ddd6132-60be-4a72-9daa-3d9756191f4a-6d61848df7259b8993c9809cfcac2b98-8157d.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 541px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 55.637707948244%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABnklEQVQozzWSyY6CQBRF+f+1CxP9Ad2YGBcujCMJtjFGjYgj4gji0CA4R+1Dlf0WlapH3eHdQvl8Pu/3m/V4PHqedz6ff//rdDqtVqv1en25XDxRss/GdV2aCsjhcDgajer1ejKZjMViqVSq3W5zab/fw7hYLBqNhmmavu8fDgc6fAJ8vV4VNB+Px+v1QgEW7qFmWVYYhtxm3e123W7XcRwEQUrGzWbzVeb2drudTCaVSqXT6eTz+Ww2q6qqpmnVahWi2+0WBAHiy+WSuYAx0f1+V9CEFfrBYFAsFhHJ5XLpdPpHVK1W6/V66CPb7/d1XZfOZRCRbTiezyd4bE+nU6RwoYsiC7ywgRoWPKI0n8+xzbCRbQ5gIM5kMqVSCcO4jcfjiUSCY7lcLhQKcgUDGC7EmeUbGBQESLDyM4UxjjI8RqXDHg3Smc1mXGN4BSTeDMPg9ng8psuE5ME3Nq1Wi9joy2Yoiml5iMg2yhzwQJcHpEuwMiGI5J/jigpESTxExBTNjBmUccVj4EribdtuNpsEgSxPwAVYfFEgISXmP1IwSueG4M1EAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2ddd6132 60be 4a72 9daa 3d9756191f4a" title="" data-src="/static/2ddd6132-60be-4a72-9daa-3d9756191f4a-6d61848df7259b8993c9809cfcac2b98-8157d.png" data-srcset="/static/2ddd6132-60be-4a72-9daa-3d9756191f4a-6d61848df7259b8993c9809cfcac2b98-696af.png 200w,\n/static/2ddd6132-60be-4a72-9daa-3d9756191f4a-6d61848df7259b8993c9809cfcac2b98-4fa96.png 400w,\n/static/2ddd6132-60be-4a72-9daa-3d9756191f4a-6d61848df7259b8993c9809cfcac2b98-8157d.png 541w" data-sizes="(max-width: 541px) 100vw, 541px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n<li>\n<p>子网划分</p>\n</li>\n<li>\n<p>通过在主机号字段中拿一部分作为子网号，把两级 IP 地址划分为三级 IP 地址。注意，外部网络看不到子网的存在。</p>\n</li>\n<li>\n<p>IP 地址::={&#x3C;网络号>,&#x3C;子网号>,&#x3C;主机号>}</p>\n</li>\n<li>\n<p>要使用子网，必须配置子网掩码。一个 B 类地址的默认子网掩码为 255.255.0.0，如果 B 类地址的子网占两个比特，那么子网掩码为 11111111 11111111 11000000 00000000，也就是 255.255.192.0。</p>\n</li>\n<li>\n<p>无分类</p>\n</li>\n<li>\n<p>无分类编址 CIDR 消除了传统 A 类、B 类和 C 类地址以及划分子网的概念，使用网络前缀和主机号来对 IP 地址进行编码，网络前缀的长度可以根据需要变化。</p>\n</li>\n<li>\n<p>IP 地址::={&#x3C;网络前缀号>,&#x3C;主机号>}</p>\n</li>\n<li>\n<p>CIDR 的记法上采用在 IP 地址后面加上网络前缀长度的方法。例如 128.14.35.7/20 表示前 20 位网络前缀。</p>\n</li>\n<li>\n<p>CIDR 的地址掩码可以继续称为子网掩码，子网掩码首 1 长度为前缀的长度。</p>\n</li>\n<li>\n<p>一个 CIDR 地址块中有很多地址，一个 CIDR 表示的网络就可以表示原来的很多个网络，并且在路由表中只需要一个路由就可以代替原来多个路由，减少了路由表项的数量。把这种通过使用网络前缀来减少路由表项的方式称为路由聚合，也成为构成超网。</p>\n</li>\n<li>\n<p>在路由表中的项目由“网络前缀”和“下一跳地址”组成，在查找时可能会得到不只一个匹配结果，应当采用最长前缀匹配来确定应该匹配哪一个。</p>\n</li>\n</ul>\n<h3 id="ip-地址和-mac-地址"><a href="#ip-%E5%9C%B0%E5%9D%80%E5%92%8C-mac-%E5%9C%B0%E5%9D%80" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>IP 地址和 MAC 地址</h3>\n<blockquote>\n<p>网络层实现主机之间的通信，而链路层实现具体每段链路之间的通信。因此在通信过程中，IP 数据报的源地址和目的地址始终不变，而 MAC 地址随链路的改变而改变。</p>\n</blockquote>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/86b71296-0d1e-4a63-bcd9-54955b6b781b-ae1c7f45e3b51c6e0a0a04895f150107-cf44c.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 778px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 46.27249357326478%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAMBAgQF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB6ytkFBof/8QAGxAAAgEFAAAAAAAAAAAAAAAAAhEAASIxQUL/2gAIAQEAAQUCJu6C11qmP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABgQAAIDAAAAAAAAAAAAAAAAABAxAAGh/9oACAEBAAY/AnHpsf/EAB0QAAICAQUAAAAAAAAAAAAAAAERACExEEFhgcH/2gAIAQEAAT8hN4HR3AXqu5wj8geXPGjgn//aAAwDAQACAAMAAAAQoM//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAbEAACAgMBAAAAAAAAAAAAAAABEQAhMUGhUf/aAAgBAQABPxAgfDNAhVCHYC0Vb8hs5ODOocIHQzmn/9k=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="86b71296 0d1e 4a63 bcd9 54955b6b781b" title="" data-src="/static/86b71296-0d1e-4a63-bcd9-54955b6b781b-ae1c7f45e3b51c6e0a0a04895f150107-cf44c.jpg" data-srcset="/static/86b71296-0d1e-4a63-bcd9-54955b6b781b-ae1c7f45e3b51c6e0a0a04895f150107-db956.jpg 200w,\n/static/86b71296-0d1e-4a63-bcd9-54955b6b781b-ae1c7f45e3b51c6e0a0a04895f150107-0c2bd.jpg 400w,\n/static/86b71296-0d1e-4a63-bcd9-54955b6b781b-ae1c7f45e3b51c6e0a0a04895f150107-cf44c.jpg 778w" data-sizes="(max-width: 778px) 100vw, 778px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h3 id="地址解析协议-arp"><a href="#%E5%9C%B0%E5%9D%80%E8%A7%A3%E6%9E%90%E5%8D%8F%E8%AE%AE-arp" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>地址解析协议 ARP</h3>\n<ul>\n<li>实现由 IP 地址得到的 MAC 地址。 <html><head></head><body><a class="gatsby-resp-image-link" href="/static/1b4d6737-d834-46ed-8f9d-6f123e29c8dd-2c901b953a2a4890c9acddcdc861bc04-3791f.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 579px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 37.30569948186529%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAHABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAIDBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAdmAXg//xAAYEAADAQEAAAAAAAAAAAAAAAABAhESMf/aAAgBAQABBQJg1bUHP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABYQAQEBAAAAAAAAAAAAAAAAAAAhsf/aAAgBAQAGPwKJqv/EABkQAQEBAAMAAAAAAAAAAAAAAAERAEFhcf/aAAgBAQABPyFotnTgbSe1rDy3/9oADAMBAAIAAwAAABCDz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABgQAQADAQAAAAAAAAAAAAAAAAEAESEx/9oACAEBAAE/EHYQ6UR4jNWAkqybtz//2Q==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="1b4d6737 d834 46ed 8f9d 6f123e29c8dd" title="" data-src="/static/1b4d6737-d834-46ed-8f9d-6f123e29c8dd-2c901b953a2a4890c9acddcdc861bc04-3791f.jpg" data-srcset="/static/1b4d6737-d834-46ed-8f9d-6f123e29c8dd-2c901b953a2a4890c9acddcdc861bc04-e5850.jpg 200w,\n/static/1b4d6737-d834-46ed-8f9d-6f123e29c8dd-2c901b953a2a4890c9acddcdc861bc04-97ecc.jpg 400w,\n/static/1b4d6737-d834-46ed-8f9d-6f123e29c8dd-2c901b953a2a4890c9acddcdc861bc04-3791f.jpg 579w" data-sizes="(max-width: 579px) 100vw, 579px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></li>\n<li>每个主机都有一个 ARP 高速缓存，里面有本局域网上各主机和路由器的 IP 地址到硬件地址的映射表。</li>\n<li>如果主机 A 知道主机 B 的 IP 地址，但是 ARP 的高速缓存中没有该 IP 地址到 MAC 地址的映射，此时主机 A 通过广播的方式发送 ARP 请求分组，主机 B 收到该请求后会发送 ARP 响应分组给主机 A 告知其 MAC 地址，随后主机 A 向其高速缓存中写入主机 B 的 IP 地址到硬件地址的映射。 <html><head></head><body><a class="gatsby-resp-image-link" href="/static/8bc6fc2c-d198-4759-b06c-18d94d851e97-4d183f98131bae7a7d54f03de63da4ac-07a9a.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 696px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 73.13218390804597%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsSAAALEgHS3X78AAAB5klEQVQoz12SV2/CQBCE/f9/CW8IROcBRC8CBMgU0avpnVDiOPl8i0ySlTgNvpvb2ZnTLMv6+lX3+3232y0Wi81mczweDcMAr9dr/m63W1lvt9vz+YSoWaq+VUFmo9PpxOPxQqFQrVZLpVIul4tGo3yZz+fcwl0fqjiv8btcLnxl73w+8xVys9lcLpd07na7w+FwtVohYTQaATj8qcomo1PXda/X6/P5KpUKp0OhEJjO9Xo9GAz6/f5UKoUKMMc4IAPasmnFf+RxZa1WC4fDjUaDPmiBQyvm5KJ8Pt9utzOZDLLpZ5qmTaZ7NptlMAB7kAHssbrd7larBQgEAsViEcDkqBN3XmTuXqhig+bT6fR0OrHHtGxxgGkFoAgtf8iO1WIenP1+z2qoGo/HxOMkQjnYjspUJQCH6cN4rEhgfl0VEfR6PVa+Hw6Hx+Pxiup3cQWBYWG/36c5+XGUZ4MW+gvgLYgpGgipEK7XqwROwjjn8XhcLheGsQWHYCE8VMnzsmcGIZX7mHk2m3GaK+iGZ5PJRBriYrlcRjYW8J1034Ylk0mJKp1Ox2IxxzyaMzyANwMZEIlEeBGS5YuMVAmAPBgSJnLQiTc0HwwGiUSCFMkSaZLZu7NYLyua4XAIGm4DcA4s9v6rH+rQNAa9vBDBAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="8bc6fc2c d198 4759 b06c 18d94d851e97" title="" data-src="/static/8bc6fc2c-d198-4759-b06c-18d94d851e97-4d183f98131bae7a7d54f03de63da4ac-07a9a.png" data-srcset="/static/8bc6fc2c-d198-4759-b06c-18d94d851e97-4d183f98131bae7a7d54f03de63da4ac-fe3b1.png 200w,\n/static/8bc6fc2c-d198-4759-b06c-18d94d851e97-4d183f98131bae7a7d54f03de63da4ac-abb86.png 400w,\n/static/8bc6fc2c-d198-4759-b06c-18d94d851e97-4d183f98131bae7a7d54f03de63da4ac-07a9a.png 696w" data-sizes="(max-width: 696px) 100vw, 696px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></li>\n</ul>\n<h3 id="路由器的结构"><a href="#%E8%B7%AF%E7%94%B1%E5%99%A8%E7%9A%84%E7%BB%93%E6%9E%84" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>路由器的结构</h3>\n<ul>\n<li>路由器从功能上可以划分为两大部分：路由选择和分组转发。</li>\n<li>分组转发由三部分组成：交换结构、一组输入端口和一组输出端口。 <html><head></head><body><a class="gatsby-resp-image-link" href="/static/3a676c54-b559-4466-9b21-eb10f1e25879-64dda807f55c2b78cff052e0b5a144e5-23558.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 556px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 52.33812949640287%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAMFAQL/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAG2rhBSND//xAAaEAACAgMAAAAAAAAAAAAAAAABAgAQAxEy/9oACAEBAAEFAmMQ6rJ0K//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABkQAAEFAAAAAAAAAAAAAAAAAAABESAhQf/aAAgBAQAGPwLS3WP/xAAaEAACAwEBAAAAAAAAAAAAAAAAEQExcRAh/9oACAEBAAE/IUuFpErtj6RXOhFH/9oADAMBAAIAAwAAABDjD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABsQAQACAgMAAAAAAAAAAAAAAAEAETFxgZHB/9oACAEBAAE/EK4gpgqIIE1KbU5jsq3MmiN7ezFqf//Z\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="3a676c54 b559 4466 9b21 eb10f1e25879" title="" data-src="/static/3a676c54-b559-4466-9b21-eb10f1e25879-64dda807f55c2b78cff052e0b5a144e5-23558.jpg" data-srcset="/static/3a676c54-b559-4466-9b21-eb10f1e25879-64dda807f55c2b78cff052e0b5a144e5-84453.jpg 200w,\n/static/3a676c54-b559-4466-9b21-eb10f1e25879-64dda807f55c2b78cff052e0b5a144e5-a559f.jpg 400w,\n/static/3a676c54-b559-4466-9b21-eb10f1e25879-64dda807f55c2b78cff052e0b5a144e5-23558.jpg 556w" data-sizes="(max-width: 556px) 100vw, 556px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></li>\n<li>交换结构的交换网络有以下三种实现方式： <html><head></head><body><a class="gatsby-resp-image-link" href="/static/7f82fd18-7f16-4125-ada6-bb6b795b4fda-fcb6de2360a74a59476854205275a163-d6910.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 568px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 74.64788732394366%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsSAAALEgHS3X78AAABs0lEQVQoz22TZ4vCYBCE/f//wy8Kgh8UwQoW7BFbsFxQI3bUWLDn7kn2LicxA8qbZGZ3djbxmab57QXzD66b9/v9+XzK2fd6vcbjcaVSyeVyxWJxMBjM5/Ptdrvb7Y7HI6Tb7TYajer1eqFQUFVV07TFYrHf7x+Ph49fq9Wq1WqJRIISgUDA7/eHQqFYLHY4HBDzz/1yuRyNRoPBYDKZ5EAVqzPiLxs8pmoqlUqn05ybzaZhGIhPpxOdYdNcURQI+XyeO5i3xN1ulweZTKbX6+Etm81ipNFoYB4xDhUbcOgBGafUssTMzFTX63W5XGIPV8yMRlIR0IAS/X4fMTS8wLdsO3mez2cY5KTrOp6r1ap0wMJ0OkW/Xq85bDYb+v2m/bkSOpRKpXg83ul02u0280ciEYZEQwrkQmdoXFq230EHyqNnct0GQRCHzCI9+Bfyf2cHrBqriDUbmMfFarWSINA4TA8x+V0uF8MG2TI/y6PiJ9NtWwrL8ETKelhBOBymxCfTQyyQDak2eHOxwKVbbHpB2vKSDIdDxmZ/7Ilx3j8Yb9vyevBKTyYTQp7NZs4n5WL+AFWgO4a0tc2XAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="7f82fd18 7f16 4125 ada6 bb6b795b4fda" title="" data-src="/static/7f82fd18-7f16-4125-ada6-bb6b795b4fda-fcb6de2360a74a59476854205275a163-d6910.png" data-srcset="/static/7f82fd18-7f16-4125-ada6-bb6b795b4fda-fcb6de2360a74a59476854205275a163-487ad.png 200w,\n/static/7f82fd18-7f16-4125-ada6-bb6b795b4fda-fcb6de2360a74a59476854205275a163-1cefb.png 400w,\n/static/7f82fd18-7f16-4125-ada6-bb6b795b4fda-fcb6de2360a74a59476854205275a163-d6910.png 568w" data-sizes="(max-width: 568px) 100vw, 568px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></li>\n</ul>\n<h3 id="路由器分组转发流程"><a href="#%E8%B7%AF%E7%94%B1%E5%99%A8%E5%88%86%E7%BB%84%E8%BD%AC%E5%8F%91%E6%B5%81%E7%A8%8B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>路由器分组转发流程</h3>\n<ol>\n<li>从数据报的首部提取目的主机的 IP 地址 D，得到目的网络地址 N。（路由表项是网络号而不是 IP 地址，这样做大大减少了路由表条目数量）；</li>\n<li>若 N 就是与此路由器直接相连的某个网络地址，则直接进行交付；</li>\n<li>若路由表中有目的地址为 D 的特定主机路由，则把数据报传送给表中所指明的下一跳路由器；</li>\n<li>若路由表中有到达网络 N 的路由，则把数据报传送给路由表中所指明的下一跳路由器；</li>\n<li>若路由表中有一个默认路由，则把数据报传送给路由表中所指明的默认路由器；</li>\n<li>报告分组转发出错。</li>\n</ol>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/8d211911-0e62-4190-ab00-d8610adec4a0-30c05361cc351047035ed980b8f7f5a2-9628a.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 725px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 27.86206896551724%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAGABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAduQsD//xAAYEAADAQEAAAAAAAAAAAAAAAAAAQIRIf/aAAgBAQABBQKlTO6f/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGRAAAQUAAAAAAAAAAAAAAAAAAAEQESEx/9oACAEBAAY/AqWDW//EABgQAAMBAQAAAAAAAAAAAAAAAAABITFB/9oACAEBAAE/IeghKjCyn//aAAwDAQACAAMAAAAQg8//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAaEAEAAgMBAAAAAAAAAAAAAAABABEhMUFh/9oACAEBAAE/EBMVGHZfp2WVgDVRrbqf/9k=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="8d211911 0e62 4190 ab00 d8610adec4a0" title="" data-src="/static/8d211911-0e62-4190-ab00-d8610adec4a0-30c05361cc351047035ed980b8f7f5a2-9628a.jpg" data-srcset="/static/8d211911-0e62-4190-ab00-d8610adec4a0-30c05361cc351047035ed980b8f7f5a2-3a09e.jpg 200w,\n/static/8d211911-0e62-4190-ab00-d8610adec4a0-30c05361cc351047035ed980b8f7f5a2-d5ce8.jpg 400w,\n/static/8d211911-0e62-4190-ab00-d8610adec4a0-30c05361cc351047035ed980b8f7f5a2-9628a.jpg 725w" data-sizes="(max-width: 725px) 100vw, 725px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h3 id="路由选择协议"><a href="#%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E5%8D%8F%E8%AE%AE" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>路由选择协议</h3>\n<ul>\n<li>\n<p>互联网使用的路由选择协议都是自适应的，能随着网络通信量和拓补结构的变化而自适应的进行调整。</p>\n</li>\n<li>\n<p>互联网可以划分为许多较小的自治系统 AS，一个 AS 可以使用一种和别的 AS 不同的路由选择协议。</p>\n</li>\n<li>\n<p>可以把路由选择协议划分为两大类：</p>\n</li>\n<li>\n<p>内部网关协议 IGP：在 AS 内部使用，如 RIP 和 OSPF；</p>\n</li>\n<li>\n<p>外部网关协议 EGP：在 AS 之间使用，如 BGP。 <html><head></head><body><a class="gatsby-resp-image-link" href="/static/e0be6970-5b0e-44a2-bc71-df4d61c42b8f-4d2af2dd21901e9cf7c1f51fcff09f43-fe401.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 540px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 20.555555555555554%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAEABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAEDBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAdqAtB//xAAYEAACAwAAAAAAAAAAAAAAAAABAiEiMf/aAAgBAQABBQIizLAz/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFxAAAwEAAAAAAAAAAAAAAAAAAAExEP/aAAgBAQAGPwKsrz//xAAbEAACAQUAAAAAAAAAAAAAAAABEQAhMUFhcf/aAAgBAQABPyFrq0DMQHDLdXP/2gAMAwEAAgADAAAAEPAP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGhABAAMAAwAAAAAAAAAAAAAAAQARMSGB0f/aAAgBAQABPxBypkrgEN6P6wIKlWus/9k=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="e0be6970 5b0e 44a2 bc71 df4d61c42b8f" title="" data-src="/static/e0be6970-5b0e-44a2-bc71-df4d61c42b8f-4d2af2dd21901e9cf7c1f51fcff09f43-fe401.jpg" data-srcset="/static/e0be6970-5b0e-44a2-bc71-df4d61c42b8f-4d2af2dd21901e9cf7c1f51fcff09f43-839e5.jpg 200w,\n/static/e0be6970-5b0e-44a2-bc71-df4d61c42b8f-4d2af2dd21901e9cf7c1f51fcff09f43-95e19.jpg 400w,\n/static/e0be6970-5b0e-44a2-bc71-df4d61c42b8f-4d2af2dd21901e9cf7c1f51fcff09f43-fe401.jpg 540w" data-sizes="(max-width: 540px) 100vw, 540px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n<li>\n<p>内部网关协议 RIP</p>\n<ul>\n<li>RIP 是一种分布式的基础距离向量的路由选择协议。距离是指跳数，直接相连的路由器的跳数为 1，跳数最多为 15，超过 15 表示不可达。</li>\n<li>RIP 按固定的时间间隔仅和相邻路由器交换自己的路由表，经过若干次交换之后，所有的路由器最终会知道到达本自治系统中任何一个网络的最短距离和下一跳的路由器地址。</li>\n<li>\n<p>距离向量算法：</p>\n<blockquote>\n<ol>\n<li>对地址为 X 的相邻路由器发来的 RIP 报文，先修改报文中的所有项目，把下一跳字段的地址改为 X，并把所有的距离字段加 1；</li>\n<li>对修改后的 RIP 报文中的每一个项目，进行一下步骤：</li>\n</ol>\n</blockquote>\n<ul>\n<li>若原来的路由表中没有目的网络N，则把该项目添加到路由表中；</li>\n<li>\n<p>否则，若下一跳路由器的地址是X，则把收到的项目替换原来路由表中的项目；否则，若收到的项目中的距离d小于路由表中的距离，则进行更新（例如原始路由表项为Net2,5,P,新表项为Net2,4,X,则更新）否则什么也不做。</p>\n<blockquote>\n<ol start="3">\n<li>若 3 份中还没有收到相邻路由器的更新路由表，则把该相邻路由器标记为不可达，即把距离置为 16。</li>\n</ol>\n</blockquote>\n</li>\n</ul>\n</li>\n<li>RIP 协议实现简单，开销小，但是 RIP 能使用的最大距离为 15，限制了网络的规模，并且当网络出现故障时，要经过比较长的时间才能将消息传送到所有路由器。</li>\n</ul>\n</li>\n<li>\n<p>内部网关协议 OSPF</p>\n<ul>\n<li>开放最短路径优先 OSPF，是为了克服 RIP 的缺点而开发出来的。</li>\n<li>开放表示 OSPF 不受某一家厂商控制，而是公开发表的；最短路径优先表示使用了 Dijkstra 提出的最短路径算法 SPF。</li>\n<li>\n<p>OSPF 具有以下特点：</p>\n<blockquote>\n<ul>\n<li>向本自治系统中的所有路由器发送信息，这种方法是洪泛法。</li>\n<li>发送的信息就是与相邻路由器的链路状态，链路状态包括与哪些路由器相连以及链路的度量，度量用费用、距离、时延、带宽等来表示。</li>\n<li>只有当链路状态发生变化时，路由器才会发送信息。</li>\n</ul>\n</blockquote>\n</li>\n<li>所有路由器都具有全网的拓补结构图，并且是一致的，相比于 RIP，OSPF 的更新过程收敛的很快。</li>\n</ul>\n</li>\n<li>\n<p>外部网关协议 BGP</p>\n<ul>\n<li>AS 之间的路由选择很困难，主要是互联网规模很大。并且各个 AS 内部使用不同的路由选择协议，就无法准确定义路径的度量。并且 AS 之间的路由选择必须考虑有关的策略，比如有些 AS 不愿意让其他 AS 经过。</li>\n<li>BGP 只能寻找一条比较好的路由，而不是最佳路由。它采用路径向量路由选择协议。</li>\n<li>每个 AS 都必须配置 BGP 发言人，通过在两个相邻 BGP 发言人之间建立 TCP 连接来交换路由信息。 <html><head></head><body><a class="gatsby-resp-image-link" href="/static/eb6271de-22c9-4f4b-8b31-eab1f560efac-d02ebc5a0958fdc17bdd666558dc86bc-8b318.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 668px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 41.01796407185629%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAABQElEQVQY0zWQy46CQBBF+f81v8APEFyxICFCogkoapSggIIKBgK+RUdgjoPTC+i6XfdRJTRN836/X6/XarVyXTfLsuPx2LZtXdc/f4fXJEmiKJrNZpvNZrFY3O93GiAK/IDiOF6v1/v9frvdhmFIGQQB5WQyQXEwGPB6Op12ux0qvPKEqIAAEHoUh8OBDl3XRVGEXJYld0mSsKKHRHmeP59P3/dHoxHRPs6Px4NiPB7LsowVzuQE0TTNsixK3Obzued5IIhS3m43iAIC3QDD4VBRFEY4n88g0+nUNE0IhKqqCkOc4bAFKPR/nYlnGAbTcmdzDIk2CeEXRUG3qqq9Xo85u102/0e4XC7QQFkDq0YvTVMu0HgCRKXf77MwZkF3uVyCf8lYdck5mADxhcCq6HYcx7ZtYhMYZxBEr9dr5/8LRAyxyeh+2c4AAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="eb6271de 22c9 4f4b 8b31 eab1f560efac" title="" data-src="/static/eb6271de-22c9-4f4b-8b31-eab1f560efac-d02ebc5a0958fdc17bdd666558dc86bc-8b318.png" data-srcset="/static/eb6271de-22c9-4f4b-8b31-eab1f560efac-d02ebc5a0958fdc17bdd666558dc86bc-d09a1.png 200w,\n/static/eb6271de-22c9-4f4b-8b31-eab1f560efac-d02ebc5a0958fdc17bdd666558dc86bc-9165c.png 400w,\n/static/eb6271de-22c9-4f4b-8b31-eab1f560efac-d02ebc5a0958fdc17bdd666558dc86bc-8b318.png 668w" data-sizes="(max-width: 668px) 100vw, 668px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></li>\n</ul>\n</li>\n</ul>\n<h3 id="网际控制报文协议-icmp"><a href="#%E7%BD%91%E9%99%85%E6%8E%A7%E5%88%B6%E6%8A%A5%E6%96%87%E5%8D%8F%E8%AE%AE-icmp" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>网际控制报文协议 ICMP</h3>\n<blockquote>\n<p>ICMP 是为了更有效地转发 IP 数据报和提高交付成功的机会。它封装在 IP 数据报中，但是不属于高层协议。</p>\n</blockquote>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/9b5e0fa0-9274-4219-a3a9-84fbb509c735-e528cc76279fcf1d48e87bd5724eb34e-00888.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 525px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 46.476190476190474%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMFAv/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAbU+mgeaD//EABkQAQEAAwEAAAAAAAAAAAAAAAIBABIxMv/aAAgBAQABBQJy6xu08XD6z//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABkQAAIDAQAAAAAAAAAAAAAAAAAhESAxkf/aAAgBAQAGPwJaQ+jp/8QAHBAAAgICAwAAAAAAAAAAAAAAAREAECExQXGR/9oACAEBAAE/IXD+lExnAEDyo3d1/9oADAMBAAIAAwAAABADz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABsQAQACAgMAAAAAAAAAAAAAAAEAESExELHB/9oACAEBAAE/ELCpsDIOdrWh5At3XObnZzP/2Q==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="9b5e0fa0 9274 4219 a3a9 84fbb509c735" title="" data-src="/static/9b5e0fa0-9274-4219-a3a9-84fbb509c735-e528cc76279fcf1d48e87bd5724eb34e-00888.jpg" data-srcset="/static/9b5e0fa0-9274-4219-a3a9-84fbb509c735-e528cc76279fcf1d48e87bd5724eb34e-e3762.jpg 200w,\n/static/9b5e0fa0-9274-4219-a3a9-84fbb509c735-e528cc76279fcf1d48e87bd5724eb34e-03b74.jpg 400w,\n/static/9b5e0fa0-9274-4219-a3a9-84fbb509c735-e528cc76279fcf1d48e87bd5724eb34e-00888.jpg 525w" data-sizes="(max-width: 525px) 100vw, 525px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<blockquote>\n<p>ICMP 报文分为差错报告报文和询文报文。</p>\n</blockquote>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/aa29cc88-7256-4399-8c7f-3cf4a6489559-538223049cfbbad1deb34a0b6513e235-05ed6.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 38.69499241274658%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAABOElEQVQY0y2RyY6CUBBF+f8PcsMCIg6BJqjRBEEB0YDGiRlCA02ffnYtKvdV3Zruk/q+/xE2jiPYcZz7/X4+n6fT6Wq12u12m81mu91altW2LbRvYV3XgSV4JJbLpaIox+PxcDhMJhNN0wBRFMVxDCAly7KqqvRK0/TxeNxut7IsJebUdZ3neZIkJPAUvF4vfBiGtM6yjPjz+SSCh9w0DYC4dL1eyYGGYWCf9/vNk66Xy8U0Tdd1wVVV1cIARVEQYTjzJEisRwtO4pLPViSYOZ/PbdumI2UUFMI+vf6LGYVUXI9aJFiYBKTT6WQYxnq9RjbwZ2wuDBrHwpF83w+CgLUpJo0SqMIuxGez2ZcwXdfhUIAiMKmH9le83+/Rk+V54z3PYxRB/gyRkX2xWPBtSM0ikTCUg8akX7C8rvx6iiRwAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="aa29cc88 7256 4399 8c7f 3cf4a6489559" title="" data-src="/static/aa29cc88-7256-4399-8c7f-3cf4a6489559-538223049cfbbad1deb34a0b6513e235-fee1c.png" data-srcset="/static/aa29cc88-7256-4399-8c7f-3cf4a6489559-538223049cfbbad1deb34a0b6513e235-a67b7.png 200w,\n/static/aa29cc88-7256-4399-8c7f-3cf4a6489559-538223049cfbbad1deb34a0b6513e235-0b187.png 400w,\n/static/aa29cc88-7256-4399-8c7f-3cf4a6489559-538223049cfbbad1deb34a0b6513e235-fee1c.png 800w,\n/static/aa29cc88-7256-4399-8c7f-3cf4a6489559-538223049cfbbad1deb34a0b6513e235-b1a91.png 1200w,\n/static/aa29cc88-7256-4399-8c7f-3cf4a6489559-538223049cfbbad1deb34a0b6513e235-05ed6.png 1318w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h3 id="分组网间探测-ping"><a href="#%E5%88%86%E7%BB%84%E7%BD%91%E9%97%B4%E6%8E%A2%E6%B5%8B-ping" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>分组网间探测 PING</h3>\n<ul>\n<li>\n<p>PING 是 ICMP 的一个重要应用，主要用来测试两台主机之间的连通性。</p>\n</li>\n<li>\n<p>PING 发送的 IP 数据报封装的是无法交付的 UDP 用户数据报。</p>\n</li>\n<li>\n<p>PING 的过程：</p>\n<ol>\n<li>源主机向目的主机发送一连串的 IP 数据报。第一个数据报 P1 的生存时间 TTL 设置为 1，但 P1 到达路径上的第一个路由器 R1 时，R1 收下它并把 TTL 减 1，此时 TTL 等于 0，R1 就把 P1 丢弃，并向源主机发送一个 ICMP 时间超过差错报告报文；</li>\n<li>源主机接着发送第二个数据报 P2，并把 TTL 设置为 2。P2 先到达 R1，R1 收下后把 TTL 减 1 再转发给 R2，R2 收下后也把 TTL 减 1，由于此时 TTL 为 0，R2 就丢弃 P2，并向源主机发送一个 ICMP 时间超过差错报告报文；</li>\n<li>不断执行这样的步骤，直到最后一个数据报刚刚到达目的主机，主机不转发数据报，也不把 TTL 减 1。但是因为数据报封装的是无法交付的 UDP，因此目的主机要向源主机发送 ICMP 终点不可达差错报告报文。</li>\n<li>之后源主机知道了到达目的主机所经过的路由器 IP 地址以及到达每个路由器的往返时间。</li>\n</ol>\n</li>\n</ul>\n<h3 id="ip-多播"><a href="#ip-%E5%A4%9A%E6%92%AD" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>IP 多播</h3>\n<blockquote>\n<p>在一对多的通信中，多播不需要将分组复制多份，从而大大节约网络资源。</p>\n</blockquote>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/f50a8e52-a683-444c-8e32-63c1890fe84a-d24dae6597fa07390aecbb89c033d103-5cce7.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 52.61904761904762%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAIBAwX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHXLlJHD//EABkQAAIDAQAAAAAAAAAAAAAAAAECABEhIv/aAAgBAQABBQK+nZbVgQYNM//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABgQAAIDAAAAAAAAAAAAAAAAAAAQESFB/9oACAEBAAY/ApMdr//EABoQAQACAwEAAAAAAAAAAAAAAAEAERAhMVH/2gAIAQEAAT8hRr8rsSBbCMsQwHa3Njqsf//aAAwDAQACAAMAAAAQI8//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAbEAEAAwEAAwAAAAAAAAAAAAABABExIUFx8P/aAAgBAQABPxAdQ4q6eiefcpMlq58MAiq6e3BDVTGpQwBjkzJ//9k=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="f50a8e52 a683 444c 8e32 63c1890fe84a" title="" data-src="/static/f50a8e52-a683-444c-8e32-63c1890fe84a-d24dae6597fa07390aecbb89c033d103-dfbfc.jpg" data-srcset="/static/f50a8e52-a683-444c-8e32-63c1890fe84a-d24dae6597fa07390aecbb89c033d103-75a98.jpg 200w,\n/static/f50a8e52-a683-444c-8e32-63c1890fe84a-d24dae6597fa07390aecbb89c033d103-1f451.jpg 400w,\n/static/f50a8e52-a683-444c-8e32-63c1890fe84a-d24dae6597fa07390aecbb89c033d103-dfbfc.jpg 800w,\n/static/f50a8e52-a683-444c-8e32-63c1890fe84a-d24dae6597fa07390aecbb89c033d103-5cce7.jpg 840w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h3 id="虚拟专用网-vpn"><a href="#%E8%99%9A%E6%8B%9F%E4%B8%93%E7%94%A8%E7%BD%91-vpn" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>虚拟专用网 VPN</h3>\n<ul>\n<li>\n<p>由于 IP 地址的短缺，一个机构能申请到的 IP 地址远远小于本机构所拥有的主机数。并且一个机构并不需要把所有主机接入到外部的互联网中，机构内的计算机可以使用仅在本机构有效的 IP 地址（专用地址）。</p>\n</li>\n<li>\n<p>有三个专用地址块：</p>\n</li>\n<li>\n<p>10.0.0.0~10.255.255.255</p>\n</li>\n<li>\n<p>172.16.0.0~172.31.255.255</p>\n</li>\n<li>\n<p>192.168.0.0~192.168.255.255</p>\n</li>\n<li>\n<p>VPN 使用的公用互联网作为本机构各专用网之间的通信媒体。专用指机构内的主机只与本机构的其他主机通信，虚拟指“好像是”，而实际上并不是，它有经过公用的互联网。</p>\n</li>\n<li>\n<p>下图中，场所 A 和 B 的通信部都经过互联网，如果场所 A 的主机要和另一个场所 B 的主机 Y 通信，IP 数据报的源地址是 10.1.0.1，目的地址是 10.2.0.3。数据报先发送到与互联网相连的路由器 R1，R1 对内部数据进行加密，然后重新加上数据报的首部，源地址是路由器 R1 的全球地址 125.1.2.3，目的地址是路由器 R2 的全球地址 194.4.5.6。路由器 R2 收到数据报后将数据部分进行解密，恢复原来的数据报，此时目的地址为 10.2.0.3，就交付给 Y。</p>\n</li>\n</ul>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/1556770b-8c01-4681-af10-46f1df69202c-a3b4e1a60750d855c21fe024897313e5-41ed6.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 77.79339423752636%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAQABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAECAwX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHsLQag/8QAGhAAAgIDAAAAAAAAAAAAAAAAAAECESEiMf/aAAgBAQABBQJ7PgipGRH/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAYEAADAQEAAAAAAAAAAAAAAAAAITECEP/aAAgBAQAGPwKE5RaGf//EABkQAAMBAQEAAAAAAAAAAAAAAAABEVExQf/aAAgBAQABPyFfSK8O4NUaShKIFTR//9oADAMBAAIAAwAAABAzD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABkQAQEBAQEBAAAAAAAAAAAAAAERAJFhwf/aAAgBAQABPxBklQlE+4kIQgUhzJZE8cgqEJJbnciYmUNb/9k=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="1556770b 8c01 4681 af10 46f1df69202c" title="" data-src="/static/1556770b-8c01-4681-af10-46f1df69202c-a3b4e1a60750d855c21fe024897313e5-dfbfc.jpg" data-srcset="/static/1556770b-8c01-4681-af10-46f1df69202c-a3b4e1a60750d855c21fe024897313e5-75a98.jpg 200w,\n/static/1556770b-8c01-4681-af10-46f1df69202c-a3b4e1a60750d855c21fe024897313e5-1f451.jpg 400w,\n/static/1556770b-8c01-4681-af10-46f1df69202c-a3b4e1a60750d855c21fe024897313e5-dfbfc.jpg 800w,\n/static/1556770b-8c01-4681-af10-46f1df69202c-a3b4e1a60750d855c21fe024897313e5-ca27a.jpg 1200w,\n/static/1556770b-8c01-4681-af10-46f1df69202c-a3b4e1a60750d855c21fe024897313e5-41ed6.jpg 1423w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h3 id="网络地址转换-nat"><a href="#%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2-nat" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>网络地址转换 NAT</h3>\n<ul>\n<li>专用网内部的主机使用本地 IP 地址又想和互联网上的主机通信时，可以使用 NAT 来将本地 IP 转换为全球 IP。</li>\n<li>在以前，NAT 将本地 IP 和全球 IP 一一对应，这种方式拥有 n 个全球 IP 地址的专用网内最多只可以同时拥有 n 台主机接入互联网。为了更有效利用全球 IP 地址，现在常用的 NAT 转换表把运输层的端口号也用上了，使得多个专用网内部的主机公用一个全球 IP 地址。使用端口号的 NAT 也叫作网络地址与端口转换 NAPT。</li>\n</ul>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2719067e-b299-4639-9065-bed6729dbf0b-04b8de33a1de8173b48df5c6f0e3236d-18059.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 22.193877551020407%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsSAAALEgHS3X78AAAArklEQVQI1yWOSQ6EMAwE8/9/cQAhsQRERNjmAGIJe0DiNjWMD47tVLstnudZluU4Dmvtfd/btlF83tBa+77vOI7rujDXdRlj5nkmgwELnqIouq6j6Ps+yzI067oCDcMQRRHKMAxpGeZ5HgQBE3hWCEZt28JN0wQkpfQ8r2kaaNaVZcmEDGbeUEqlacrvOI4/Z5RcRYNPHMecisP//rqu2VhV1Xme+75DJkmCOWIkXzLU1UbnFBWoAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2719067e b299 4639 9065 bed6729dbf0b" title="" data-src="/static/2719067e-b299-4639-9065-bed6729dbf0b-04b8de33a1de8173b48df5c6f0e3236d-fee1c.png" data-srcset="/static/2719067e-b299-4639-9065-bed6729dbf0b-04b8de33a1de8173b48df5c6f0e3236d-a67b7.png 200w,\n/static/2719067e-b299-4639-9065-bed6729dbf0b-04b8de33a1de8173b48df5c6f0e3236d-0b187.png 400w,\n/static/2719067e-b299-4639-9065-bed6729dbf0b-04b8de33a1de8173b48df5c6f0e3236d-fee1c.png 800w,\n/static/2719067e-b299-4639-9065-bed6729dbf0b-04b8de33a1de8173b48df5c6f0e3236d-18059.png 1176w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h2 id="运输层"><a href="#%E8%BF%90%E8%BE%93%E5%B1%82" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>运输层*</h2>\n<blockquote>\n<p>网络层只把分组发送到目的主机，但是真正通信的并不是主机而是主机中的进程。运输层提供了进程间的逻辑通信，运输层向高层用户屏蔽了下面网络层的核心细节，使应用程序看见的好像在两个运输层实体之间有一条端到端的逻辑通信信道。</p>\n</blockquote>\n<h3 id="udp-和-tcp-的特点"><a href="#udp-%E5%92%8C-tcp-%E7%9A%84%E7%89%B9%E7%82%B9" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>UDP 和 TCP 的特点</h3>\n<ul>\n<li>用户数据报协议 UDP 是无连接的，尽最大可能交付，没有拥塞控制，面向报文（对于应用程序传下来的报文不合并也不拆分，只是添加 UDP 首部）。</li>\n<li>传输控制协议 TCP 是面向连接的，提供可靠交付，有流量控制，拥塞控制，提供全双工通信，面向字节流（把应用层传下的报文看成字节流，把字节流组织成大小不等的数据块）。</li>\n</ul>\n<h3 id="udp-首部格式"><a href="#udp-%E9%A6%96%E9%83%A8%E6%A0%BC%E5%BC%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>UDP 首部格式</h3>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/d4c3a4a1-0846-46ec-9cc3-eaddfca71254-ee5de09d9faf1cb8c30ebb2b0b6cfb31-38bca.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 59.2788038698329%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAABAAF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB1zOOJqP/xAAZEAEBAAMBAAAAAAAAAAAAAAACAAEDERL/2gAIAQEAAQUC2FxSu4lcN5xf/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAHRAAAgEEAwAAAAAAAAAAAAAAAAECEBEhMTJxkf/aAAgBAQAGPwK8ZPoy5eo3TijR/8QAHRABAAEDBQAAAAAAAAAAAAAAAQARITFRYYGRwf/aAAgBAQABPyG4OoYBNGNxhQw7mEUfOAlgcT//2gAMAwEAAgADAAAAEOMP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAHBABAQACAgMAAAAAAAAAAAAAAREAIUFhMYGR/9oACAEBAAE/EFILSzX2Yx3VyT9N5MiQ7ZMCW3nrFN061OTx3mAM/9k=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="d4c3a4a1 0846 46ec 9cc3 eaddfca71254" title="" data-src="/static/d4c3a4a1-0846-46ec-9cc3-eaddfca71254-ee5de09d9faf1cb8c30ebb2b0b6cfb31-dfbfc.jpg" data-srcset="/static/d4c3a4a1-0846-46ec-9cc3-eaddfca71254-ee5de09d9faf1cb8c30ebb2b0b6cfb31-75a98.jpg 200w,\n/static/d4c3a4a1-0846-46ec-9cc3-eaddfca71254-ee5de09d9faf1cb8c30ebb2b0b6cfb31-1f451.jpg 400w,\n/static/d4c3a4a1-0846-46ec-9cc3-eaddfca71254-ee5de09d9faf1cb8c30ebb2b0b6cfb31-dfbfc.jpg 800w,\n/static/d4c3a4a1-0846-46ec-9cc3-eaddfca71254-ee5de09d9faf1cb8c30ebb2b0b6cfb31-38bca.jpg 1137w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<blockquote>\n<p>首部字段只有 8 个字节，包括源端口、目的端口、长度、检验和。12 字节的伪首部是为了计算校验和临时添加的。</p>\n</blockquote>\n<h3 id="tcp-首部格式"><a href="#tcp-%E9%A6%96%E9%83%A8%E6%A0%BC%E5%BC%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TCP 首部格式</h3>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/55dc4e84-573d-4c13-a765-52ed1dd251f9-3a123d50e9e5aa5cff7f1cd4acec9336-f5b3e.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 79.49502677888293%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAAsSAAALEgHS3X78AAACVUlEQVQoz02TN29iQRSF+VmE1paABiQbUdDQ8y9oEALJbqD2dhQIJJKEBJWRkMAyQQQHwpIzS1gw0d7vvdllfYvhvplz7z3nzKD4+vpaLBbD4fC3HNvtdjabrddr8s1m0+v1VquV2AcDkoR1Mpmcz2cFxSCq1Wqr1Wq328ViMZfL1Wq1n3JUKpVGo9FsNkmenp4KhQJ5vV4H0O/3pWJG0fV0Oh2Px9FoRC9GHQ6H3W7H0cfHB/skoDnd7/d8Mnw+n0vF/HQ6HUBsbeQQtOnIENblcinIs0/OKjgqoJ7NZgWNX3LQC0nUQBLml32Gs1JMF4qpkiZzXCqVQqEQk+FMZT6fDwaD0WgU/XSHJwXAcAvaKKILYKmYZtTAlm8ovL+/87mUYzAYQHI8HuPo6+vry8sLGAQiHmpSMRm7IEAjslwuw+rt7U2gYYvg6XSKL5xmMhn28Ry84vPzk5mot1qtKpVKrVYrlUqVHBqNRvUvrq+vjUajzWbzeDyPj4/0olCazI/w3O/3u93uu7u7+/t7EqfT6XK5vF6vz+dLJpPIEW4hm1tEuVQsHEIMXeAJLhaLYTUIcQpPvMjKgVXYhpC/j4TnIXbJ7XY7JK+urvR6vclkur29tVgsDofDYDBotVqdTndzc2M2m/l8fn5W0Kbb7YpniB9QQFIqlWJNJBI/5AgEAg8PD+FwOB6PRyIReHGvgBVQhwNXgiThLWyxkPtgH8JcEhLoDjWOtnIAACnRvngmJBAkvI3L5gVz+hb/3RZBgfifYAFvgGfHC0NCOp3GRTz7PobkD7lyKey9bWL2AAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="55dc4e84 573d 4c13 a765 52ed1dd251f9" title="" data-src="/static/55dc4e84-573d-4c13-a765-52ed1dd251f9-3a123d50e9e5aa5cff7f1cd4acec9336-fee1c.png" data-srcset="/static/55dc4e84-573d-4c13-a765-52ed1dd251f9-3a123d50e9e5aa5cff7f1cd4acec9336-a67b7.png 200w,\n/static/55dc4e84-573d-4c13-a765-52ed1dd251f9-3a123d50e9e5aa5cff7f1cd4acec9336-0b187.png 400w,\n/static/55dc4e84-573d-4c13-a765-52ed1dd251f9-3a123d50e9e5aa5cff7f1cd4acec9336-fee1c.png 800w,\n/static/55dc4e84-573d-4c13-a765-52ed1dd251f9-3a123d50e9e5aa5cff7f1cd4acec9336-b1a91.png 1200w,\n/static/55dc4e84-573d-4c13-a765-52ed1dd251f9-3a123d50e9e5aa5cff7f1cd4acec9336-f5b3e.png 1307w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<ul>\n<li>序号：用于对字节流进行编号，例如序号为 301，表示第一个字节的编号为 301，如果携带的数据长度为 100 个字节，那么下一个报文段的序号应为 401。</li>\n<li>确认号：期望收到的下一个报文段的序号。例如 B 正确收到 A 发送来的一个报文段，序号为 501，携带的数据长度为 200 字节，因此 B 期望下一个报文段的序号为 701，B 发送给 A 的确认报文段确认号就为 701。</li>\n<li>数据偏移：指的是数据部分距离报文段起始处的偏移量，实际上指的是首部长度。</li>\n<li>确认 ACK：当 ACK=1 时确认号字段有效，否则无效。TCP 规定，在连接建立后所有传送的报文段都必须把 ACK 置 1。</li>\n<li>同步 SYN：在连接建立时用来同步序号。当 SYN=1，ACK=0 时表示这是一个连接请求报文段。若对方同意建立连接，则响应报文中 SYN=1，ACK=1。</li>\n<li>终止 FIN：用来释放一个连接，当 FIN=1 时，表示此报文段的发送方的数据已发送完毕，并要求释放运输连接。</li>\n<li>窗口：窗口值作为接收方让发送方设置其发送窗口的依据。之所以有这个限制，是因为接收方的数据缓存空间是有限的。</li>\n</ul>\n<h3 id="tcp-的三次握手"><a href="#tcp-%E7%9A%84%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TCP 的三次握手</h3>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/e92d0ebc-7d46-413b-aec1-34a39602f787-7716ba6f8afe335ad565fca4c4b0b297-df5e4.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 64.21800947867298%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAABoElEQVQoz22SScrCQBCF+wSuvY438hau3bsXwa0LlyoEBUGcwTHGeYqaOGvM/5GCduCvRdNDvXqvXrXyff/5fHqed71ex+Px6/Xy/wu5H41G7Xab5MfjwarAnM9n8Ov1Op1O27ZNEg+fGL2pVCrZbPZyudzvd9d1leM42+32eDxGo9FQKBSLxUTLpwSpRd1IJBIOh1OpFPnIVNSYzWbT6TSTySQSCQofDofFYtFsNtHC/e12kxJoTCaT8Xg8l8utVitelZYEptPp7Pd7smGmK6ioSyHy2HDcbDbkIFZQSqviuVgsLpdLjjzYQcBMdq1WM03TsiwIwGtflG4MTt5QWy6XW61Wo9GAkFRUaHXgq9Xq6XR6M0uIc8PhEAwj6ff7rMjhEn4mIuqojltvsK5qGMZkMtGzofndboc39GIFIRNC4C8YHmwcDAbsmSQkHEulUr1epyMvCH5IoVD4AktAgmBIxGq6EJPQjE75hYDz+TxpX2B2yCNvPp+7QQCAH29YOTpB0D9IcZtQP78Xe3u9Hp3zgZgQnne7XSRwyebnw/8BkTnMsD/g5E0AAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="e92d0ebc 7d46 413b aec1 34a39602f787" title="" data-src="/static/e92d0ebc-7d46-413b-aec1-34a39602f787-7716ba6f8afe335ad565fca4c4b0b297-fee1c.png" data-srcset="/static/e92d0ebc-7d46-413b-aec1-34a39602f787-7716ba6f8afe335ad565fca4c4b0b297-a67b7.png 200w,\n/static/e92d0ebc-7d46-413b-aec1-34a39602f787-7716ba6f8afe335ad565fca4c4b0b297-0b187.png 400w,\n/static/e92d0ebc-7d46-413b-aec1-34a39602f787-7716ba6f8afe335ad565fca4c4b0b297-fee1c.png 800w,\n/static/e92d0ebc-7d46-413b-aec1-34a39602f787-7716ba6f8afe335ad565fca4c4b0b297-b1a91.png 1200w,\n/static/e92d0ebc-7d46-413b-aec1-34a39602f787-7716ba6f8afe335ad565fca4c4b0b297-df5e4.png 1266w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<blockquote>\n<p>假设 A 为客户端，B 为服务器端。</p>\n</blockquote>\n<ol>\n<li>首先 B 处于 LISTEN（监听）状态，等待客户的连接请求。</li>\n<li>A 向 B 发送连接请求报文段，SYN=1，ACK=0，选择一个初始的序号 x。</li>\n<li>B 收到连接请求报文段，如果同意建立连接，则向 A 发送连接确认报文段，SYN=1，ACK=1，确认号为 x+1，同时也选择一个初始的序号 y。</li>\n<li>A 收到 B 的连接确认报文段后，还要向 B 发出确认，确认号为 y+1，序号为 x+1，进入 TIME-WAIT 状态。</li>\n<li>B 收到 A 的确认后，连接建立。</li>\n</ol>\n<h3 id="tcp-的四次挥手"><a href="#tcp-%E7%9A%84%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TCP 的四次挥手</h3>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/f87afe72-c2df-4c12-ac03-9b8d581a8af8-845813c61190858b218abd19b9e15948-81230.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 69.16488222698072%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAIBBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAe5Gi1D/xAAZEAEAAgMAAAAAAAAAAAAAAAABABECITH/2gAIAQEAAQUCe3CZDbsn/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGRAAAgMBAAAAAAAAAAAAAAAAAREAEDFB/9oACAEBAAY/AhDQxdiBVf/EABoQAQADAAMAAAAAAAAAAAAAAAEAESExUXH/2gAIAQEAAT8hsbZNguKyWI9EFjn3zDCf/9oADAMBAAIAAwAAABBjD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABwQAQEAAgIDAAAAAAAAAAAAAAERACExUUGBwf/aAAgBAQABPxByoS671irdQ1CT7jVW4q8NRV41PGWqJCAHpwoi1CL3n//Z\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="f87afe72 c2df 4c12 ac03 9b8d581a8af8" title="" data-src="/static/f87afe72-c2df-4c12-ac03-9b8d581a8af8-845813c61190858b218abd19b9e15948-dfbfc.jpg" data-srcset="/static/f87afe72-c2df-4c12-ac03-9b8d581a8af8-845813c61190858b218abd19b9e15948-75a98.jpg 200w,\n/static/f87afe72-c2df-4c12-ac03-9b8d581a8af8-845813c61190858b218abd19b9e15948-1f451.jpg 400w,\n/static/f87afe72-c2df-4c12-ac03-9b8d581a8af8-845813c61190858b218abd19b9e15948-dfbfc.jpg 800w,\n/static/f87afe72-c2df-4c12-ac03-9b8d581a8af8-845813c61190858b218abd19b9e15948-81230.jpg 934w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<blockquote>\n<p>以下描述不讨论序号和确认号，因为序号和确认号的规则比较简单。并且不讨论 ACK，因为 ACK 在连接建立之后都为 1。</p>\n</blockquote>\n<ol>\n<li>A 发送连接释放报文段，FIN=1；</li>\n<li>B 收到之后发出确认，此时 TCP 属于半关闭状态，B 能向 A 发送数据但是 A 不能向 B 发送数据。</li>\n<li>当 B 要不再需要连接时，发送连接释放请求报文段，FIN=1；</li>\n<li>A 收到后发出确认，此时连接释放。</li>\n</ol>\n<p><strong>TIME_WAIT</strong> 客户端接收到服务器端的 FIN 报文后进入此状态，此时并不是直接进入 CLOSED 状态，还需要等待一个时间计时器设置的时间 2MSL。这么做有 2 个理由：</p>\n<ol>\n<li>确保最后一个确认报文能够到达。如果 B 没有收到 A 发送来的确认报文段，那么就会重新发送连接释放请求报文段，A 等待一段时间就是为了处理这种情况。</li>\n<li>等待一段时间是为了让本连接持续时间内所产生的所有报文段都从网络中消失，使得下一个新的连接不会出现旧的连接请求报文段。</li>\n</ol>\n<h3 id="tcp-滑动窗口"><a href="#tcp-%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TCP 滑动窗口</h3>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/a3253deb-8d21-40a1-aae4-7d178e4aa319-c244f5caab8bd0c5a0af6a622a4a830a-8d2dc.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 44.92890995260663%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAECBAX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHrLTBYw//EABgQAAMBAQAAAAAAAAAAAAAAAAABEQJB/9oACAEBAAEFAtWqiGdP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGRAAAQUAAAAAAAAAAAAAAAAAAAIgMUKB/9oACAEBAAY/ApXhdv8A/8QAHRAAAgIBBQAAAAAAAAAAAAAAAAERMRBBUXGBkf/aAAgBAQABPyGaKVwQm7wimvZQVcf/2gAMAwEAAgADAAAAEPDP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGxABAAIDAQEAAAAAAAAAAAAAAQAhETGhEEH/2gAIAQEAAT8QVgKhS6QuLkdsmtlX8YZtnK+f/9k=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="a3253deb 8d21 40a1 aae4 7d178e4aa319" title="" data-src="/static/a3253deb-8d21-40a1-aae4-7d178e4aa319-c244f5caab8bd0c5a0af6a622a4a830a-dfbfc.jpg" data-srcset="/static/a3253deb-8d21-40a1-aae4-7d178e4aa319-c244f5caab8bd0c5a0af6a622a4a830a-75a98.jpg 200w,\n/static/a3253deb-8d21-40a1-aae4-7d178e4aa319-c244f5caab8bd0c5a0af6a622a4a830a-1f451.jpg 400w,\n/static/a3253deb-8d21-40a1-aae4-7d178e4aa319-c244f5caab8bd0c5a0af6a622a4a830a-dfbfc.jpg 800w,\n/static/a3253deb-8d21-40a1-aae4-7d178e4aa319-c244f5caab8bd0c5a0af6a622a4a830a-8d2dc.jpg 1055w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<ul>\n<li>窗口是缓存一部分，用来暂时存放字节流。发送方和接收方各有一个窗口，接收方通过 TCP 报文段中的窗口字段告诉发送方自己的窗口大小，发送方根据这个值和其他信息设置自己窗口大小。</li>\n<li>发送窗口内的字节都允许被发送，接收窗口内的字节都允许接收。如果发送窗口左部的字节已经发送并且受到了确认，那么就将发送窗口向右滑动一定的距离，直到左部第一个字节不是已发送并且已经确认的状态；接收窗口类似，接收窗口左部字节已经发送确认并交付主机，就向右滑动接收窗口。</li>\n<li>接收窗口只会对窗口内最后一个按序到达的字节进行确认，例如接收窗口已经收到的字节为{31,32,34,35}，其中{31,32}按序到达，而{34,35}就不是，因此只对字节 32 进行确认。发送方得到一个字节的确认之后，就知道这个字节之前的所有字节都已经被接收。</li>\n</ul>\n<h3 id="tcp-可靠传输"><a href="#tcp-%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TCP 可靠传输</h3>\n<ul>\n<li>TCP 使用超时重传来实现可靠传输：如果一个已经发送的报文段在超时时间内没有收到确认，那么就重传这个报文段。</li>\n<li>一个报文段从发送到接收再到确认所经过的时间称为往返时间 RTT，加权平均往返时间 RTTs 计算如下： <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mi>T</mi><msub><mi>T</mi><mi>s</mi></msub><mo>=</mo><mo>(</mo><mn>1</mn><mo>−</mo><mi>a</mi><mo>)</mo><mo>∗</mo><mo>(</mo><mi>R</mi><mi>T</mi><msub><mi>T</mi><mi>s</mi></msub><mo>)</mo><mo>+</mo><mi>a</mi><mo>∗</mo><mi>R</mi><mi>T</mi><mi>T</mi></mrow><annotation encoding="application/x-tex">RTT_s=(1-a)\\ast(RTT_s)+a\\ast RTT</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="mord"><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">s</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mord rule" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mord rule" style="margin-right:0.2222222222222222em;"></span><span class="mord mathit">a</span><span class="mclose">)</span><span class="mord rule" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mord rule" style="margin-right:0.2222222222222222em;"></span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="mord"><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">s</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span><span class="mclose">)</span><span class="mord rule" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mord rule" style="margin-right:0.2222222222222222em;"></span><span class="mord mathit">a</span><span class="mord rule" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mord rule" style="margin-right:0.2222222222222222em;"></span><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span></span></li>\n<li>超过时间 RTO 应该略大于 RTTs，TCP 使用的超过时间计算如下： <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mi>T</mi><mi>O</mi><mo>=</mo><mi>R</mi><mi>T</mi><msub><mi>T</mi><mi>s</mi></msub><mo>+</mo><mn>4</mn><mo>∗</mo><mi>R</mi><mi>T</mi><msub><mi>T</mi><mi>d</mi></msub><mo>∣</mo></mrow><annotation encoding="application/x-tex">RTO=RTT_s+4\\ast RTT_d \\mid</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="mord"><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">s</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span><span class="mord rule" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mord rule" style="margin-right:0.2222222222222222em;"></span><span class="mord">4</span><span class="mord rule" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mord rule" style="margin-right:0.2222222222222222em;"></span><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="mord"><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∣</span></span></span></span> {其中 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mi>T</mi><msub><mi>T</mi><mi>d</mi></msub></mrow><annotation encoding="application/x-tex">RTT_d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="mord"><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span></span></span></span> 为偏差}</li>\n</ul>\n<h3 id="tcp-流量控制"><a href="#tcp-%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TCP 流量控制</h3>\n<ul>\n<li>流量控制是为了控制发送方发送速率，保证接收方来的及接收。</li>\n<li>接收方发送的确认报文中的窗口字段可以用来控制发送方窗口大小，从而影响发送方的发送速率。将窗口字段设置为 0，则发送方不能发送速率。</li>\n</ul>\n<h3 id="tcp-拥塞控制"><a href="#tcp-%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TCP 拥塞控制</h3>\n<blockquote>\n<p>如果网络出现拥塞，分组将会丢失，此时发送方会继续重传，从而导致网络拥塞程度更高。因此当出现拥塞时，应当控制发送方的速率。这一点和流量控制很像，但是出发点不同。流量控制是为了接收方来得及接收，而拥塞控制是为了降低整个网络的拥塞程度。</p>\n</blockquote>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/51e2ed95-65b8-4ae9-8af3-65602d452a25-27955e7ca6e3022cebad4c7f07e6fd4d-0c6d6.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 56.464646464646464%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAMBAgX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHbqxI8kP/EABkQAAIDAQAAAAAAAAAAAAAAAAARAQIxQf/aAAgBAQABBQJnWWysyz//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAXEAADAQAAAAAAAAAAAAAAAAAAICEx/9oACAEBAAY/Aoav/8QAHBAAAQUAAwAAAAAAAAAAAAAAAQAQESExQYGR/9oACAEBAAE/IdRrkqDa3aARrHqt/9oADAMBAAIAAwAAABDDz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EAB0QAQACAgIDAAAAAAAAAAAAAAEAESExEFFBYeH/2gAIAQEAAT8Q3BdsjQfYb4ur0HcTgH3CeA5NkQBSnKg4/9k=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="51e2ed95 65b8 4ae9 8af3 65602d452a25" title="" data-src="/static/51e2ed95-65b8-4ae9-8af3-65602d452a25-27955e7ca6e3022cebad4c7f07e6fd4d-dfbfc.jpg" data-srcset="/static/51e2ed95-65b8-4ae9-8af3-65602d452a25-27955e7ca6e3022cebad4c7f07e6fd4d-75a98.jpg 200w,\n/static/51e2ed95-65b8-4ae9-8af3-65602d452a25-27955e7ca6e3022cebad4c7f07e6fd4d-1f451.jpg 400w,\n/static/51e2ed95-65b8-4ae9-8af3-65602d452a25-27955e7ca6e3022cebad4c7f07e6fd4d-dfbfc.jpg 800w,\n/static/51e2ed95-65b8-4ae9-8af3-65602d452a25-27955e7ca6e3022cebad4c7f07e6fd4d-0c6d6.jpg 990w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<blockquote>\n<p>TCP 主要通过四种算法来进行拥塞控制：慢开始、拥塞避免、快重传、快恢复。发送方需要维护有一个叫做拥塞（cwnd）的状态变量。注意拥塞窗口与发送方窗口的区别，拥塞窗口只是一个状态变量，实际决定发送方能发送多少数据的是发送方窗口。为了便于讨论，做如下假设：</p>\n</blockquote>\n<ol>\n<li>接收方有足够大的接受缓存，因此不会发生流量控制；</li>\n<li>虽然 TCP 的窗口基于字节，但是这里设窗口的大小单位为报文段。</li>\n</ol>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/910f613f-514f-4534-87dd-9b4699d59d31-696df0d4d372515e36f963e1adc24552-587e4.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 39.3939393939394%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAABF0lEQVQY01WQyY6CYBCEef/n4QXAAyGGEwcRomxBdmQnbOLnMJKZPtXff1d1VQvbti3Lcr1eb7dbGIbg7VvP51NV1b7vweu6vl6v7X8JB3Jdt23baZqKooBzuVxs2348HtD2gXme+f2r/iE7jnO/333fB+u6rmma53nTt1hYlqVpmqfTKY7jpmno0EdLALEBMkvGcUzTtOu6XRjQ/pQoipBxRDSkmYmiKAiCz+Y9DAnZQGx8QsuyDAygCW03eD6f67o+wgvDMCiKQkhuZlkWf/hhWpZlSZJYmCQJEjQ5Cop7eMaw+bGd5znyDLEKwARknnijw5OB5FsYRIuYgN9r707Q42xVVZGfy7EKMhcBYwFgGAa3PK79BjJ/vfxcrNNBAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="910f613f 514f 4534 87dd 9b4699d59d31" title="" data-src="/static/910f613f-514f-4534-87dd-9b4699d59d31-696df0d4d372515e36f963e1adc24552-fee1c.png" data-srcset="/static/910f613f-514f-4534-87dd-9b4699d59d31-696df0d4d372515e36f963e1adc24552-a67b7.png 200w,\n/static/910f613f-514f-4534-87dd-9b4699d59d31-696df0d4d372515e36f963e1adc24552-0b187.png 400w,\n/static/910f613f-514f-4534-87dd-9b4699d59d31-696df0d4d372515e36f963e1adc24552-fee1c.png 800w,\n/static/910f613f-514f-4534-87dd-9b4699d59d31-696df0d4d372515e36f963e1adc24552-b1a91.png 1200w,\n/static/910f613f-514f-4534-87dd-9b4699d59d31-696df0d4d372515e36f963e1adc24552-95179.png 1600w,\n/static/910f613f-514f-4534-87dd-9b4699d59d31-696df0d4d372515e36f963e1adc24552-587e4.png 1914w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<ol>\n<li>\n<p>慢开始与拥塞避免</p>\n</li>\n<li>\n<p>发送的最初执行慢开始，令 cwnd=1，发送方只能发送 1 个报文段；当收到确认后，将 cwnd 加倍，因此发送方能够发送的报文段数量为：2、4、8…</p>\n</li>\n<li>\n<p>注意到慢开始每个轮次都会将 cwnd 加倍，这样会让 cwnd 增长速度非常快，从而使得发送方发送的增长速度过快，网络拥塞的可能也就更高。设置一个慢开始门限 ssthresh，当 cwnd>=ssthresh 时，进入拥塞避免，每个轮次只将 cwnd 加 1。</p>\n</li>\n<li>\n<p>如果出现了超时，则令 ssthresh=cwnd/2，然后重新执行慢开始。</p>\n</li>\n<li>\n<p>快重传与快恢复</p>\n</li>\n<li>\n<p>在接受方，要求每次接收到报文段都应该发送对已接收到有序报文段的确认，例如已经接收到<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>M</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">M_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span></span></span></span>和<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>M</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">M_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span></span></span></span>，此时收到<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>M</mi><mn>4</mn></msub></mrow><annotation encoding="application/x-tex">M_4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span></span></span></span>，应当发送对<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>M</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">M_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span></span></span></span>的确认。</p>\n</li>\n<li>\n<p>在发送方，如果收到三个重复确认，那么可以确认下一个报文段丢失，例如收到三个<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>M</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">M_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span></span></span></span>，则<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>M</mi><mn>3</mn></msub></mrow><annotation encoding="application/x-tex">M_3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span></span></span></span>丢失。此时执行快重传，立即重传下一个报文段。</p>\n</li>\n<li>\n<p>在这种情况下，只是丢失个别报文段，而不是网络堵塞，因此执行快恢复，令 ssthresh=cwnd/2，cwnd=ssthresh，注意到此时直接进入拥塞避免。</p>\n</li>\n</ol>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/f61b5419-c94a-4df1-8d4d-aed9ae8cc6d5-cc025ab4fcccf7be4c9d4d073b4aec8a-bcbcc.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 55.195911413969334%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABPklEQVQoz4WSW2+CQBCF+f8/yoRHEsNFJUTkKtdElFIIVUDbj93GtNik52GzO7tnzpmZVT5f8Hg8xnFMkiSKop9xgmEY1nX9jCiv5GEY9vt9HMdFUXRd9y5QC6Rperlcpmn6n+z7Pvw8z2OB4/FIRNf1IAgk/2+y67p43u12EFDj9Xa75ciecrBwv9+/yXJHqZJ8u908z0sFzgKn08m2bTQxwrFpmr7vEVfgUFhZlvIRWVkRgY9+LoBnBMlFcLPZWJbF/nq9zspcm6bpOI6qqjI9L2CiBoejdEEJh8PBEmA/k/GMGlHUYDKMLMtIRG9Y0Vyv16vVyjAMuiD1SQeFyc1kbDMA3FZV9SZAz7jGUdu25KL5NIy2ycivOT9bJUE6IvQDY4tBfAg8Kcrib7GijGGM0B48U5GmafK3LWS+ALhCZGdMh36wAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="f61b5419 c94a 4df1 8d4d aed9ae8cc6d5" title="" data-src="/static/f61b5419-c94a-4df1-8d4d-aed9ae8cc6d5-cc025ab4fcccf7be4c9d4d073b4aec8a-fee1c.png" data-srcset="/static/f61b5419-c94a-4df1-8d4d-aed9ae8cc6d5-cc025ab4fcccf7be4c9d4d073b4aec8a-a67b7.png 200w,\n/static/f61b5419-c94a-4df1-8d4d-aed9ae8cc6d5-cc025ab4fcccf7be4c9d4d073b4aec8a-0b187.png 400w,\n/static/f61b5419-c94a-4df1-8d4d-aed9ae8cc6d5-cc025ab4fcccf7be4c9d4d073b4aec8a-fee1c.png 800w,\n/static/f61b5419-c94a-4df1-8d4d-aed9ae8cc6d5-cc025ab4fcccf7be4c9d4d073b4aec8a-bcbcc.png 1174w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h2 id="应用层"><a href="#%E5%BA%94%E7%94%A8%E5%B1%82" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>应用层*</h2>\n<h3 id="域名系统-dns"><a href="#%E5%9F%9F%E5%90%8D%E7%B3%BB%E7%BB%9F-dns" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>域名系统 DNS</h3>\n<blockquote>\n<ul>\n<li>把主机名解析为 IP 地址。</li>\n</ul>\n</blockquote>\n<ul>\n<li>\n<p>被设计成分布式系统。</p>\n</li>\n<li>\n<p>层次结构</p>\n<blockquote>\n<p>一个域名有多个层次构成，从上层从下层分别为顶级域名、二级域名、三级域名以及四级域名。所有域名都可以画成域名树。</p>\n</blockquote>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/c2117f61-1177-4768-bf33-cf4f950d911c-3b4801307aca36ed0ab80b77c0683510-3a052.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 351px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 28.205128205128204%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsSAAALEgHS3X78AAAAzklEQVQY021PSQqEMBD0/88RL+JCvOhJEBE0irgdxA1cDoqaOIUOMjLWoalUuqurheMP+wnG2LZtqJxzPI83CDdDE+o8z6ZpSpLkeZ5lWa7r2ratado4jnfPYxgSNsAeZF3XOI6bpgHJsgxe0zQFQQCCTvaDx+ZrbV3Xy7LwE1VVXTryl2XZdd1L7GEYHMfRdV0URcMw+r6HcZIkiqLIskwISdMUbfi9FFVVcdR3GAvzPPd9PwxDSinOwwlt24JDQWbEgQI78CiKIBZFgcEPK2dOPxBUNiYAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="c2117f61 1177 4768 bf33 cf4f950d911c" title="" data-src="/static/c2117f61-1177-4768-bf33-cf4f950d911c-3b4801307aca36ed0ab80b77c0683510-3a052.png" data-srcset="/static/c2117f61-1177-4768-bf33-cf4f950d911c-3b4801307aca36ed0ab80b77c0683510-0559a.png 200w,\n/static/c2117f61-1177-4768-bf33-cf4f950d911c-3b4801307aca36ed0ab80b77c0683510-3a052.png 351w" data-sizes="(max-width: 351px) 100vw, 351px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/a4b162e5-db2a-4a27-b213-1fe481c5a06a-726951f28ed7d72d2dd5857fdcac591f-83c29.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 722px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 36.42659279778393%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsSAAALEgHS3X78AAAAyElEQVQY03WQiQqEMAxE/f9f8xvcKnhSW896W/exXbaCbEBJ0pnJJMH1J87z3LYtDMOiKKy1lE9MwKe1juMYxDiOUkqlVJZlaZomSfL6RBRFlKj0fd80zbqunjxNEwSSYRhIQOR5Drqua6CUqJNARhQAYzx5nmeg+76TV1Xl0EwTQjjcsiz0MUW/LMvjODzZGEMLctu2OGc+29pbuCcMotJ13W//72RU2QRvkPnTuR8GLYxgGD4qlJ4Mk6s428+AgC/koHGF+9Mb/0OR4DgmuuMAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="a4b162e5 db2a 4a27 b213 1fe481c5a06a" title="" data-src="/static/a4b162e5-db2a-4a27-b213-1fe481c5a06a-726951f28ed7d72d2dd5857fdcac591f-83c29.png" data-srcset="/static/a4b162e5-db2a-4a27-b213-1fe481c5a06a-726951f28ed7d72d2dd5857fdcac591f-5b578.png 200w,\n/static/a4b162e5-db2a-4a27-b213-1fe481c5a06a-726951f28ed7d72d2dd5857fdcac591f-4dff0.png 400w,\n/static/a4b162e5-db2a-4a27-b213-1fe481c5a06a-726951f28ed7d72d2dd5857fdcac591f-83c29.png 722w" data-sizes="(max-width: 722px) 100vw, 722px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n<li>\n<p>域名服务器可以分成以下四类：</p>\n<ol>\n<li>根域名服务器：解析顶级域名；</li>\n<li>顶级域名服务器：解析二级域名；</li>\n<li>权限域名服务器：解析区内域名；</li>\n<li>本地域名服务器：也称为默认域名服务器。可以在其中配置高速缓存。</li>\n</ol>\n</li>\n<li>\n<p>区和域的概念不同，可以在一个域中划分多个区。图 b 在域 abc.com 中划分了两个区：abc.com 和 y.abc.com <html><head></head><body><a class="gatsby-resp-image-link" href="/static/fc0c6b2d-68c7-4de8-aaaa-97355a4f0472-2923907ddde9dae34a6f20bd88b73a89-00f6d.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 714px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 46.07843137254902%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAEDBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAe01EUf/xAAZEAEAAgMAAAAAAAAAAAAAAAABAAIQETH/2gAIAQEAAQUCs6VhzP8A/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFBABAAAAAAAAAAAAAAAAAAAAIP/aAAgBAQAGPwJf/8QAGRAAAwADAAAAAAAAAAAAAAAAARARADFR/9oACAEBAAE/IerkpssK/9oADAMBAAIAAwAAABBTz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EAB0QAQACAgIDAAAAAAAAAAAAAAEAESExQYEQUXH/2gAIAQEAAT8QpBEDeOMS9WlBOO47Da373HZ9mnfj/9k=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="fc0c6b2d 68c7 4de8 aaaa 97355a4f0472" title="" data-src="/static/fc0c6b2d-68c7-4de8-aaaa-97355a4f0472-2923907ddde9dae34a6f20bd88b73a89-00f6d.jpg" data-srcset="/static/fc0c6b2d-68c7-4de8-aaaa-97355a4f0472-2923907ddde9dae34a6f20bd88b73a89-5b29b.jpg 200w,\n/static/fc0c6b2d-68c7-4de8-aaaa-97355a4f0472-2923907ddde9dae34a6f20bd88b73a89-61e89.jpg 400w,\n/static/fc0c6b2d-68c7-4de8-aaaa-97355a4f0472-2923907ddde9dae34a6f20bd88b73a89-00f6d.jpg 714w" data-sizes="(max-width: 714px) 100vw, 714px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n<li>\n<p>因此就需要两个权限域名服务器： <html><head></head><body><a class="gatsby-resp-image-link" href="/static/8b335d94-c1ca-42e1-ad48-bb179d28a4f1-f668e20574668a83ade66dfee1c1bc85-fb61b.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 618px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 39.482200647249186%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAIABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAIDBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAd2AWA//xAAVEAEBAAAAAAAAAAAAAAAAAAAAQf/aAAgBAQABBQJX/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFhAAAwAAAAAAAAAAAAAAAAAAAAEQ/9oACAEBAAY/Ahz/xAAYEAEBAQEBAAAAAAAAAAAAAAABEQAhMf/aAAgBAQABPyGNYpi8luPO7//aAAwDAQACAAMAAAAQA8//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAaEAADAQADAAAAAAAAAAAAAAABESEAQVFh/9oACAEBAAE/ECWgcoHCcUnedKfu/9k=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="8b335d94 c1ca 42e1 ad48 bb179d28a4f1" title="" data-src="/static/8b335d94-c1ca-42e1-ad48-bb179d28a4f1-f668e20574668a83ade66dfee1c1bc85-fb61b.jpg" data-srcset="/static/8b335d94-c1ca-42e1-ad48-bb179d28a4f1-f668e20574668a83ade66dfee1c1bc85-5e6b4.jpg 200w,\n/static/8b335d94-c1ca-42e1-ad48-bb179d28a4f1-f668e20574668a83ade66dfee1c1bc85-004ff.jpg 400w,\n/static/8b335d94-c1ca-42e1-ad48-bb179d28a4f1-f668e20574668a83ade66dfee1c1bc85-fb61b.jpg 618w" data-sizes="(max-width: 618px) 100vw, 618px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n<li>\n<p>解析过程</p>\n</li>\n<li>\n<p>主机向本地域名服务器解析的过程采用递归，而本地域名服务器向其他域名服务器解析可以使用递归和迭代两种方式。</p>\n</li>\n<li>\n<p>迭代的方式下，本地域名服务器向一个域名服务器解析请求解析之后，结果返回到本地域名服务器，然后本地域名服务器继续向其他域名服务器请求解析；而递归方式下，结果不是直接返回的，然后继续向前请求解析，最后的结果才会返回。 <html><head></head><body><a class="gatsby-resp-image-link" href="/static/e6723b94-1a33-4605-b775-f6813352d383-610f825f09f5be5d4bb6e31b688705f6-e2849.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 72.50936329588015%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsSAAALEgHS3X78AAACGUlEQVQoz2WSSWsqURCF+wf6D9xnIy4ENy4l4FZc6FIXQQJBCAQFRVTEOQ5xTnzqwilGXxzjGI15X/fNaxpSi6b63jr3nDpV0m6322w26/X6fD5/fn4ul8vVajWfz/n9VuJwOHx8fHDI7eVyWSwW/M5ms/1+L729vTWbzVarNRqNJpNJJpOJx+PdblcF81C9XhcF7+/vpVIpFos1Gg1YJa5tNpvf7x+Px2ACgYDZbD6dTpzD8/X1RXJ3d+d0Op+fn8vl8uPjo8lkgoZzGXx9fe12uwUP4KurKxRqwff390ajMZ/Pt9vtYDBIQafTkcFU1Gq1RCKBDCRls1kuVM0iBoNBKBTiRWp6vZ7P50OjDN5utzc3N7e3t4VCAbeoQN7xeBTMBAnVuVxOPDSdTr1eL6gf2cgwGAz0Q9vhcFin02GpVrbD4bBYLCR4gWd6vR6BP7LtdrvH4/mjBCowDGO1zA8PDy6Xa6EEBFarVQiRmEQymWQ8DINS+NH/9PQkwHzpkxPGUywWEYIjIPGc7ZBlD4fDaDTKGtAPM+A51SpBzgpFIhGxPH+VEI5K+JxOpxGMjUyChLe0VuMfSL6cQ9tSgvWSwShJpVLAVJ3aECfsU6VS+V0gYSDjpQecmP8PMQk1Xl5e8AVprDRuYxstyGC2nPXu9/s9JfCZnCKVh/ZeX1/ZE1GAeHKYuJW+fwX9QAV/tVolQZT2LW38Awb6GsKK9MfAAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="e6723b94 1a33 4605 b775 f6813352d383" title="" data-src="/static/e6723b94-1a33-4605-b775-f6813352d383-610f825f09f5be5d4bb6e31b688705f6-fee1c.png" data-srcset="/static/e6723b94-1a33-4605-b775-f6813352d383-610f825f09f5be5d4bb6e31b688705f6-a67b7.png 200w,\n/static/e6723b94-1a33-4605-b775-f6813352d383-610f825f09f5be5d4bb6e31b688705f6-0b187.png 400w,\n/static/e6723b94-1a33-4605-b775-f6813352d383-610f825f09f5be5d4bb6e31b688705f6-fee1c.png 800w,\n/static/e6723b94-1a33-4605-b775-f6813352d383-610f825f09f5be5d4bb6e31b688705f6-b1a91.png 1200w,\n/static/e6723b94-1a33-4605-b775-f6813352d383-610f825f09f5be5d4bb6e31b688705f6-e2849.png 1335w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n</li>\n</ul>\n<h3 id="文件传输协议-ftp"><a href="#%E6%96%87%E4%BB%B6%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE-ftp" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>文件传输协议 FTP</h3>\n<blockquote>\n<p>FTP 在运输层使用 TCP，并且需要建立两个并行的 TCP 连接：控制连接和数据连接。控制连接在整个会话期间一直保持打开，而数据连接在数据传送完毕之后就关闭。控制连接使用端口号为 21，数据连接使用端口号为 20。</p>\n</blockquote>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/30210b86-472d-4574-abb6-b74898cc17a4-65919b858b538da09cc89dca5ec8fe70-1109e.jpg" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 39.9401645474944%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAIABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAdawSD//xAAXEAADAQAAAAAAAAAAAAAAAAACERIB/9oACAEBAAEFApKtaG1//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGRAAAgMBAAAAAAAAAAAAAAAAACERMVGB/9oACAEBAAY/Au6Kxwf/xAAZEAADAQEBAAAAAAAAAAAAAAAAAREhcZH/2gAIAQEAAT8hakdzXou1wRWGfT//2gAMAwEAAgADAAAAEHPP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGxABAAICAwAAAAAAAAAAAAAAAREhAEExcYH/2gAIAQEAAT8Qkni0qaZedYy7w3zdxiACBapa3Wf/2Q==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="30210b86 472d 4574 abb6 b74898cc17a4" title="" data-src="/static/30210b86-472d-4574-abb6-b74898cc17a4-65919b858b538da09cc89dca5ec8fe70-dfbfc.jpg" data-srcset="/static/30210b86-472d-4574-abb6-b74898cc17a4-65919b858b538da09cc89dca5ec8fe70-75a98.jpg 200w,\n/static/30210b86-472d-4574-abb6-b74898cc17a4-65919b858b538da09cc89dca5ec8fe70-1f451.jpg 400w,\n/static/30210b86-472d-4574-abb6-b74898cc17a4-65919b858b538da09cc89dca5ec8fe70-dfbfc.jpg 800w,\n/static/30210b86-472d-4574-abb6-b74898cc17a4-65919b858b538da09cc89dca5ec8fe70-ca27a.jpg 1200w,\n/static/30210b86-472d-4574-abb6-b74898cc17a4-65919b858b538da09cc89dca5ec8fe70-1109e.jpg 1337w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h3 id="远程终端协议-telnet"><a href="#%E8%BF%9C%E7%A8%8B%E7%BB%88%E7%AB%AF%E5%8D%8F%E8%AE%AE-telnet" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>远程终端协议 TELNET</h3>\n<ul>\n<li>TELNET 用于登录到远程主机上，并且远程主机上的输出也会返回。</li>\n<li>TELNET 可以适应许多计算机和操作系统的差异，例如不同操作系统的换行符的定义。</li>\n</ul>\n<h3 id="万维网"><a href="#%E4%B8%87%E7%BB%B4%E7%BD%91" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>万维网</h3>\n<p><a href="/HTTP/">HTTP</a></p>\n<h3 id="电子邮件协议"><a href="#%E7%94%B5%E5%AD%90%E9%82%AE%E4%BB%B6%E5%8D%8F%E8%AE%AE" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>电子邮件协议</h3>\n<blockquote>\n<p>一个电子邮件系统由 3 部分组成：用户代理、邮件服务器以及邮件发送协议和读取协议。其中发送协议常用 SMTP，读取常用 POP3 和 IMAP。</p>\n</blockquote>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/7b3efa99-d306-4982-8cfb-e7153c33aab4-13745a91067897beba9c4344272d08cd-7a146.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 63.526119402985074%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAABzUlEQVQoz12SR67CQBBE555cgjuw4QBISEgsYMOGPQuQQCAEMtkgosk55xz8nxk+spiF3dNTNV1d00LX9dPpNBqNHo/H8/ns9/vL5ZLk6/XS/5eMwQwGg+v1ej6fgcESZEGrqloqlUgVCoVMJvPlyEXMvWBSqVSxWOz1emCazaZBXq1W2Ww2HA6TgpxIJIDqpiX5jUZDUZRQKJRMJrmo1WoZ5MvlstvtNE0bj8ek8vk8ktDW7XbZUgcAW0pxdblcBna/36fT6Ye83W7n8zlxrVZLp9Mc0AtMipAhns1muVyO7WazoW0ok8nkQ+Zsv98TcwbU7JZct9uNgnhGmcPhQKfghTwADYeuvujj8djpdJBKfYRQgC/q/H4/BQjo1CDz8/l8TqczEAjQcCwWGw6HwWAwGo0q70Wr7Xbb6/W63e5IJGKz2TweDxmDXKlULBYLfDx0uVwOhwMEjVAKbYvFAud4YXwGgxY6t1qtXC1kn3a7HZHE8XgcPlqIYUr/4bPFdqRRCeeRxlAJ+Yzr9RoPqEA13gmHcUXOhpyTer3OCEkwHsEkFmZLeQPQ+FmtVpENAhwZLmL+uPpnbIV5EmUMmUbQjE7tvXgFxOP/D/kPg72+PXT3m5EAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="7b3efa99 d306 4982 8cfb e7153c33aab4" title="" data-src="/static/7b3efa99-d306-4982-8cfb-e7153c33aab4-13745a91067897beba9c4344272d08cd-fee1c.png" data-srcset="/static/7b3efa99-d306-4982-8cfb-e7153c33aab4-13745a91067897beba9c4344272d08cd-a67b7.png 200w,\n/static/7b3efa99-d306-4982-8cfb-e7153c33aab4-13745a91067897beba9c4344272d08cd-0b187.png 400w,\n/static/7b3efa99-d306-4982-8cfb-e7153c33aab4-13745a91067897beba9c4344272d08cd-fee1c.png 800w,\n/static/7b3efa99-d306-4982-8cfb-e7153c33aab4-13745a91067897beba9c4344272d08cd-7a146.png 1072w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<ol>\n<li>POP3 POP3 的特点是只要从服务器上读取了邮件，就把该邮件删除。</li>\n<li>IMAP IMAP 协议中客户端和服务器上的邮件保持同步，如果不去手动删除邮件，那么服务器上的邮件也不会被删除。IMAP 这种做法可以让用户随时随地去访问服务器上的邮件。IMAP 协议也支持创建自定义的文件夹。</li>\n<li>SMTP SMTP 只能发送 ASCII 码，而互联网邮件扩充 MIME 可以发送二进制文件。MIME 并没有改动或者取代 SMTP，而是增加邮件主题的结构，定义了非 ASCIII 码的编码规则。</li>\n</ol>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/ed5522bb-3a60-481c-8654-43e7195a48fe-21ecedde810022587ffe6ddd23a6d083-6566f.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 462px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 43.290043290043286%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsSAAALEgHS3X78AAABKklEQVQoz3WRy46CQBBF+f8vccMXuJAEAwsTlEeEgEJERQQJPoCgMM4cdEKMztSiky763nOrEBzHmUwmtm03TfP9f93vd871em0Yhu/7ZVlyFVzXHY/Hy+US8dej/lQ+xWEYSpK0WCyqqurEbdumaUoXOK5JkvScvi6Xi+d5PLAsC0z/QOAOeTqdHo9H4Hh9kolzu92KooCpqioup9OpEw+Hw8FgMBqN6rr+ZL4WvrPZTBRFJM+AwvV63W63u91us9kEQcD5pgcbxzF99gSZAfu9dGJsyMy53++f4dkH+zyfz8TDiyv99FFRFCH+nZlNaJrG5PBJzjtSmKZJk/HIiYxp6WdZtlqtdF2fz+d5nndifjILUxQFDn5g32K3j4KGnr3Ksozp4XDg0w+LNfU09LWPKgAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="ed5522bb 3a60 481c 8654 43e7195a48fe" title="" data-src="/static/ed5522bb-3a60-481c-8654-43e7195a48fe-21ecedde810022587ffe6ddd23a6d083-6566f.png" data-srcset="/static/ed5522bb-3a60-481c-8654-43e7195a48fe-21ecedde810022587ffe6ddd23a6d083-c4b43.png 200w,\n/static/ed5522bb-3a60-481c-8654-43e7195a48fe-21ecedde810022587ffe6ddd23a6d083-5dba5.png 400w,\n/static/ed5522bb-3a60-481c-8654-43e7195a48fe-21ecedde810022587ffe6ddd23a6d083-6566f.png 462w" data-sizes="(max-width: 462px) 100vw, 462px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h3 id="动态主机配置协议-dhcp"><a href="#%E5%8A%A8%E6%80%81%E4%B8%BB%E6%9C%BA%E9%85%8D%E7%BD%AE%E5%8D%8F%E8%AE%AE-dhcp" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>动态主机配置协议 DHCP</h3>\n<ul>\n<li>DHCP 提供了即插即用的联网方式，用户不再需要去手动配置 IP 地址等信息。</li>\n<li>DHCP 配置的内容不仅是 IP 地址，还包括子网掩码、默认路由器 IP 地址、域名服务器的 IP 地址。</li>\n<li>工作方式如下：需要 IP 地址的主机广播发送 DHCP 发现报文（将目的主机置为全 1，即 255.255.255.255:67，源地址设置为全 0，即 0.0.0.0:68，DHCP 服务器收到发现报文之后，则在 IP 地址池中取一个地址，发送 DHCP 提供报文给该主机。</li>\n</ul>\n<h3 id="点对点传输-p2p"><a href="#%E7%82%B9%E5%AF%B9%E7%82%B9%E4%BC%A0%E8%BE%93-p2p" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>点对点传输 P2P</h3>\n<ul>\n<li>把某个文件分发的所有对等集合称为一个洪流。文件的数据单元称为文件块，它的大小是固定的。一个新的对等方加入某个洪流，一开始并没有文件块，但是能够从其它对等方中逐渐地下载到一些文件块，与此同时，它也为别的对等方上传一些文件块。</li>\n<li>每个洪流都有一个基础设施，称为追踪器。当一个对等方加入洪流时，必须向追踪器登记，并周期性的通知追踪器它仍在洪流中。可以在任何时间加入和退出某个洪流。</li>\n<li>一个新的对等方加入洪流时，追踪器会随机从洪流中选择若干个对等方，并让新对等方与这些对等方建立连接，把这些对等方称为相邻对等方。接收和发送文件块都是在相邻对等方中进行的。</li>\n<li>当一个对等方需要很多文件块时，通常使用最稀有优先策略来取得文件块，也就是一个文件块在相邻对等方中副本最少，那么就优先请求这个文件块。</li>\n<li>当很多对等方向同一个对等方请求文件块时，该对等方优先选择最高速率向其发送文件块的对等方。</li>\n<li>P2P 是一个分布式系统，任何时候都有对等方加入或者退出。使用分布式散列表 DHT，可以查找洪流中的资源和 IP 地址映射。</li>\n</ul>\n<h3 id="web-页面请求过程"><a href="#web-%E9%A1%B5%E9%9D%A2%E8%AF%B7%E6%B1%82%E8%BF%87%E7%A8%8B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Web 页面请求过程</h3>\n<ol>\n<li>DHCP 配置主机信息</li>\n<li>假设主机最开始没有 IP 地址以及其他信息，那么就需要先使用 DHCP 来获取。</li>\n<li>主机生成一个 DHCP 请求报文，并将这个报文放入具有目的端口 67 和源端口 68 的 UDP 报文中。</li>\n<li>该报文段则被放入一个具有广播 IP 目的地址（255.255.255.255）和源 IP 地址（0.0.0.0）的 IP 数据报中。</li>\n<li>该数据报则被放置在 MAC 帧中，该帧具有目的地址 FF:FF:FF:FF:FF:FF，将广播到与交换机相连的所有设备。</li>\n<li>连接在交换机的 DHCP 服务器收到广播帧之后，不断向上分解得到 IP 数据报、UDP 报文段、DHCP 请求报文，之后生成 DHCP ACK 报文，该报文包含以下信息：IP 地址、DNS 服务器的地址、默认网关路由器的 IP 地址和子网掩码。该报文被放入 UDP 报文段中，UDP 报文段被放入 IP 数据报中，最后放入 MAC 帧中。</li>\n<li>该帧的目的地址是请求主机的 MAC 地址，因为交换机具有自学习能力，之前主机发送了广播帧之后就记录了 MAC 地址到其转发的交换表项，因此现在交换机就可以直接知道应该向哪个接口发送该帧。</li>\n<li>主机收到该帧后，不断分解得到 DHCP 报文。之后就配置它的 IP 地址、子网掩码和 DNS 服务器的 IP 地址，并在其 IP 转发表中安装默认网关。</li>\n<li>ARP 解析 MAC 地址</li>\n<li>主机通过浏览器生成一个 TCP 套接字，套接字向 HTTP 服务器发送 HTPP 请求。为了生成该套接字，主机需要知道网站的域名对应的 IP 地址。</li>\n<li>主机生成一个 DNS 查询报文，该报文具有 53 端口，因为 DNS 服务器的端口号为 53。</li>\n<li>该 DNS 查询报文被放入目的地址为 DNS 服务器 IP 地址的 IP 数据报中。</li>\n<li>该 IP 数据报被放入一个以太网帧中，该帧将发送到网关路由器。</li>\n<li>DHCP 过程只知道网关路由器的 IP 地址，为了获取网关路由器的 MAC 地址，需要使用 ARP 协议。</li>\n<li>主机生成一个包含目的地址为网关路由器 IP 地址的 ARP 查询报文，并将该 ARP 查询报文放入一个具有广播目的地址（FF:FF:FF:FF:FF:FF）的以太网帧中，并向交换机发送该以太网帧，交换机将该帧转发给所有的连接设备，包括网关路由器。</li>\n<li>网关路由器接收到该帧后，不断向上分解得到 ARP 报文，发现其中的 IP 地址与其接口的 IP 地址匹配，因此就发送一个 ARP 回答报文，包含了它的 MAC 地址，发回给主机。</li>\n<li>DNS 解析域名</li>\n<li>知道了网关路由器的 MAC 地址之后，就可以继续 DNS 解析过程了。</li>\n<li>网关路由器接收到包含 DNS 查询报文的以太网帧后，抽出 IP 数据报，并根据转发表决定 IP 数据报应该转发的路由器。</li>\n<li>因为路由器具有内部网关协议（RIP、OSPF）和外部网关协议（BGP）这两种路由选择协议，因此路由表中已经配置网关路由器到达 DNS 服务器的路由表项。</li>\n<li>到达 DNS 服务器之后，DNS 服务器抽取出 DNS 查询报文，并在 DNS 数据库中查找待解析的域名。</li>\n<li>找到 DNS 记录之后，发送 DNS 回答报文，将该回答报文放入 UDP 报文段中，然后放入 IP 数据报中，通过路由器反向转发回网关路由器，并经过以太网交换机到达主机。</li>\n<li>HTTP 请求页面</li>\n<li>有了 HTTP 服务器的 IP 地址之后，主机就能够生成 TCP 套接字，该套接字将用于向 Web 服务器发送 HTTP GET 报文。</li>\n<li>在生成 TCP 套接字之前，必须先与 HTTP 服务器进行三次握手来建立连接。生成一个具有目的端口 80 的 TCP SYN 报文段，并向 HTTP 服务器发送该报文段。</li>\n<li>HTTP 服务器收到该报文段之后，生成 TCP SYNACK 报文段，发回给主机。</li>\n<li>连接建立之后，浏览器生成 HTTP GET 报文，并交付给 HTPP 服务器。</li>\n<li>HTTP 服务器从 TCP 套接字读取 HTTP GET 报文，生成一个 HTTP 响应报文，将 Web 页面内容放入报文主体中，发回给主机。</li>\n<li>浏览器收到 HTTP 响应报文后，抽取出 Web 页面内容，之后会进行渲染，显示 Web 页面。</li>\n</ol>\n<h3 id="常用端口"><a href="#%E5%B8%B8%E7%94%A8%E7%AB%AF%E5%8F%A3" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>常用端口</h3>\n<table>\n<thead>\n<tr>\n<th>应用层协议</th>\n<th>端口号</th>\n<th>运输层协议</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>DNS</td>\n<td>53</td>\n<td>UDP</td>\n</tr>\n<tr>\n<td>FTP</td>\n<td>控制连接 21，数据连接 20</td>\n<td>TCP</td>\n</tr>\n<tr>\n<td>TELNET</td>\n<td>23</td>\n<td>TCP</td>\n</tr>\n<tr>\n<td>DHCP</td>\n<td>67 68</td>\n<td>UDP</td>\n</tr>\n<tr>\n<td>HTTP</td>\n<td>80</td>\n<td>TCP</td>\n</tr>\n<tr>\n<td>SMTP</td>\n<td>25</td>\n<td>TCP</td>\n</tr>\n<tr>\n<td>POP3</td>\n<td>110</td>\n<td>TCP</td>\n</tr>\n<tr>\n<td>IMAP</td>\n<td>143</td>\n<td>TCP</td>\n</tr>\n</tbody>\n</table>',
id:"/home/runner/work/GatsbyBlog/GatsbyBlog/blog/计算机网络读书笔记/index.md absPath of file >>> MarkdownRemark",timeToRead:26,frontmatter:{date:"2018-03-23 21:43:25",path:"/computer-network-notes/",tags:"面试, 计算机网络, 读书笔记",title:"计算机网络读书笔记",draft:null}}],length:36,tag:"面试",pagesSum:8,page:5}}}});